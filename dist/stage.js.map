{"version":3,"sources":["webpack://stage/webpack/universalModuleDefinition","webpack://stage/webpack/bootstrap","webpack://stage/./node_modules/jquery/dist/jquery.js-exposed","webpack://stage/./node_modules/jquery/dist/jquery.js","webpack://stage/./node_modules/jquery/dist/jquery.js-exposed?28a1","webpack://stage/./node_modules/nanoid/format.js","webpack://stage/./node_modules/path-browserify/index.js","webpack://stage/./node_modules/process/browser.js","webpack://stage/./node_modules/rtcpeerconnection-shim/rtcpeerconnection.js","webpack://stage/./node_modules/sdp/sdp.js","webpack://stage/./node_modules/shortid/index.js","webpack://stage/./node_modules/shortid/lib/alphabet.js","webpack://stage/./node_modules/shortid/lib/build.js","webpack://stage/./node_modules/shortid/lib/generate.js","webpack://stage/./node_modules/shortid/lib/index.js","webpack://stage/./node_modules/shortid/lib/is-valid.js","webpack://stage/./node_modules/shortid/lib/random/random-byte-browser.js","webpack://stage/./node_modules/shortid/lib/random/random-from-seed.js","webpack://stage/./node_modules/shortid/lib/util/cluster-worker-id-browser.js","webpack://stage/./node_modules/twig/twig.js","webpack://stage/(webpack)/buildin/global.js","webpack://stage/./node_modules/webrtc-adapter/src/js/adapter_core.js","webpack://stage/./node_modules/webrtc-adapter/src/js/adapter_factory.js","webpack://stage/./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js","webpack://stage/./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js","webpack://stage/./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js","webpack://stage/./node_modules/webrtc-adapter/src/js/common_shim.js","webpack://stage/./node_modules/webrtc-adapter/src/js/edge/edge_shim.js","webpack://stage/./node_modules/webrtc-adapter/src/js/edge/filtericeservers.js","webpack://stage/./node_modules/webrtc-adapter/src/js/edge/getdisplaymedia.js","webpack://stage/./node_modules/webrtc-adapter/src/js/edge/getusermedia.js","webpack://stage/./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js","webpack://stage/./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js","webpack://stage/./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js","webpack://stage/./node_modules/webrtc-adapter/src/js/safari/safari_shim.js","webpack://stage/./node_modules/webrtc-adapter/src/js/utils.js","webpack://stage/./src/core.js","webpack://stage/./src/core/notificationsCenter.es6","webpack://stage/./src/core/stage.es6","webpack://stage/./src/crypto/base64.js","webpack://stage/./src/crypto/md5.js","webpack://stage/./src/io/authentication/mechanisms/digest-md5/digestMd5.es6","webpack://stage/./src/io/authentication/sasl/sasl.es6","webpack://stage/./src/io/io.es6","webpack://stage/./src/io/protocols/bayeux/bayeux.es6","webpack://stage/./src/io/protocols/sip/sdp.es6","webpack://stage/./src/io/protocols/sip/sip.es6","webpack://stage/./src/io/realtime/realtime.es6","webpack://stage/./src/io/transports/in/longPoll.es6","webpack://stage/./src/io/transports/in/poll.es6","webpack://stage/./src/io/transports/socket.es6","webpack://stage/./src/io/transports/websockets/websocket.es6","webpack://stage/./src/kernel/appKernel.es6","webpack://stage/./src/kernel/autoload.es6","webpack://stage/./src/kernel/container.es6","webpack://stage/./src/kernel/controller.es6","webpack://stage/./src/kernel/kernel.es6","webpack://stage/./src/kernel/locationService.es6","webpack://stage/./src/kernel/module.es6","webpack://stage/./src/kernel/routerService.es6","webpack://stage/./src/kernel/service.es6","webpack://stage/./src/kernel/translationService.es6","webpack://stage/./src/media/media.es6","webpack://stage/./src/media/webAudio/webaudio.es6","webpack://stage/./src/media/webrtc/transaction.es6","webpack://stage/./src/media/webrtc/user.es6","webpack://stage/./src/media/webrtc/webrtc.es6","webpack://stage/./src/structs/hash/hash.es6","webpack://stage/./src/structs/queue/queue.es6","webpack://stage/./src/syslog/syslog.es6","webpack://stage/./src/tools/xml.js","webpack://stage/fs (ignored)"],"names":["stage","require","module","exports","regListenOn","Notification","settings","context","events","garbageEvent","settingsToListen","eventName","callback","event","arguments","ContextClosure","push","args","apply","Array","prototype","unshift","call","fire","length","pop","ret","slice","i","e","console","log","Error","localSettings","res","exec","listen","splice","clearNotifications","notificationsCenter","notification","create","version","arrayProto","indexOf","value","startIndex","index","Math","max","typeOf","t","Object","toString","propertyIsEnumerable","nodeType","window","Date","callee","SyntaxError","getBrowser","navigator","userAgent","getBrowserVersion","test","parseInt","RegExp","$1","useragent","toLowerCase","Stage","extend","jQuery","crypto","modules","media","structs","controllers","browser","Ie","Gecko","Webkit","Opera","opera","platform","match","name","closure","reg","register","path","replace","_keyStr","encode64","input","output","chr1","chr2","chr3","enc1","enc2","enc3","enc4","_utf8_encode","charCodeAt","isNaN","charAt","decode64","String","fromCharCode","_utf8_decode","decode","arrayBuffer","lkey1","lkey2","bytes","uarray","j","Uint8Array","string","utftext","n","c","c2","c3","decodeArrayBuffer","ab","ArrayBuffer","base64","encode","hexcase","b64pad","md5_vm_test","rstr2hex","rstr_md5","s","binl2rstr","binl_md5","rstr2binl","rstr_hmac_md5","key","data","bkey","ipad","opad","hash","concat","hex_tab","x","rstr2b64","tab","len","triplet","rstr2any","encoding","divisor","q","quotient","dividend","ceil","full_length","remainders","floor","str2rstr_utf8","y","str2rstr_utf16le","str2rstr_utf16be","a","b","d","olda","oldb","oldc","oldd","md5_ff","md5_gg","md5_hh","md5_ii","safe_add","md5_cmn","bit_rol","lsw","msw","num","cnt","md5","hex_md5","hex_md5_noUTF8","str_md5","b64_md5","any_md5","hex_hmac_md5","k","str_hmac_md5","b64_hmac_md5","any_hmac_md5","keyWord","realm","qop","charset","algorithm","nonce","parserAuthenticate","str","head","split","obj","MD5","BASE64","DBASE64","generateA1","username","password","cnonce","A1","generateA2","method","uri","entity_body","A2","entity","responseDigest","noncecount","digestMd5","url","headers","body","requestUri","protocol","host","parseChallenge","parsing","ele","challenge","challengeB64","warn","line","response","random","opaque","nc","toSend","io","authentication","Digest","mechanisms","parserSasl","Sasl","mechanism","getBestMechanism","bestMechanism","Class","goodM","user","generateAuthorization","SASL","isSameOrigin","loc","location","urlToOject","hostname","port","isSecure","authenticate","request","crossDomain","notificationCenter","authType","shift","auth","getAuthenticationType","ajax","type","getAuthorization","$","href","cache","error","message","beforeSend","xhr","setRequestHeader","success","state","encodeUriSegment","val","encodeUriQuery","pctEncodeSpaces","encodeURIComponent","regSearch","parseKeyValue","search","key_value","decodeURIComponent","hasOwnProperty","toKeyValue","parts","join","getHeaderJSON","json","getResponseHeader","JSON","parse","result","anchor","document","createElement","keys","keyIndex","currentKey","pathname","basename","dirname","nativeWebSocket","WebSocket","transportCore","protocols","transport","transports","clientsCapabilities","ws","poll","lpoll","longPoll","jsonp","onHandshakeResponse","successful","socket","getBestConnection","supportedConnectionTypes","onmessage","onMessage","onopen","send","connect","onerror","onclose","err","onError","reconnect","onConnectResponse","connected","idconnection","clientId","advice","onDisconnectResponse","close","onSubscribeResponse","onUnsubscribeResponse","code","arg","mess","bayeux","socketType","req","stringify","channel","minimumVersion","connectionType","unListen","subscription","service","id","getTime","dataType","contentType","defaultAparser","block","rtpmapParser","payloadType","encodingName","clockRate","encodingParameters","raw","rtpmap","candidateParser","foundation","componentId","transportExt","priority","connectionAddress","candidateType","remoteAddr","remotePort","generation","networkId","candidates","aAttribute","aAttributeDirection","parserSdp","blocks","sessionBlock","audioBlock","videoBlock","detectBlocks","parseBlocks","nbLines","first","m","size","parseM","parseMline","direction","information","attributes","bandwidths","connection","encryption","nbPort","proto","fmt","attribute","setup","nettype","addrtype","address","sessId","sessVersion","unicastAddr","start","stop","interval","duration","offsets","parseAline","parseCline","originator","timeZone","sessionName","phoneNumber","email","timeDescription","timeRepeat","parseOline","parseTline","parseRline","blockSessionParser","blockMediaParser","sdp","byteToHex","byte","generateId","arr","getRandomValues","map","digest","generateResponse","dialog","userName","sip","server","nonceCount","timeout","unregisterSended","Digestalgorithm","rawBody","digestMD5","lineResponse","transac","createTransaction","transaction","to","tagTo","createRequest","bodyType","header","createDialogTimeout","expires","contact","trans","from","regHeaders","headName","Allow","Via","CallId","fromTo","fromToG","parsefromTo","sp","res2","displayName","res3","headerSip","rawHeader","firstLine","branch","routes","recordRoutes","each","Index","substr","headValue","func","logger","date","callId","cseq","parseValue","clean","Supported","bodySip","contentLength","sdpParser","dtmfParser","dtmf","endline","endHeader","sipRequest","bodyMessage","typeBody","serverPort","requestLine","buildRequestline","buildHeader","buildBody","toUpperCase","rport","ip","publicAddress","via","tagFrom","maxForward","rawResponse","getRequestline","getHeader","getBody","getMessage","codeMessage","sipResponse","messageCode","responseLine","buildResponseLine","ptr","getResponseline","generateHex","Transaction","Message","hydrate","generateBranchId","responses","requests","hex","incCseq","status","statusCode","EARLY","ESTABLISHED","TERMINATED","CANCEL","createResponse","clearInterval","INITIAL","Dialog","transactions","generateTag","generateCseq","generateCallId","fromNameDisplay","toName","fromName","fromTag","toTag","toNameDisplay","reverse","currentTransaction","userTo","description","notify","typeNotify","info","typeInfo","clear","firstline","regSIP","rawMessage","statusLine","parseHeader","parseBody","getType","getDialog","getTransaction","createDialog","fragment","lastResponse","clearDialogTimeout","transportType","registered","registerInterval","authenticateRegister","setInterval","ack","onStart","onStop","defaultSettings","portServer","pwd","SIP","dialogs","registerTimeout","diagRegister","initTransport","addr","force","invalid","generateInvalid","generateVia","domain","quit","dia","setTimeout","clearTimeout","generateContact","unregister","diagInv","invite","diagNotify","bye","Service","settingsSyslog","moduleName","defaultSeverity","realtime","urlServer","syslog","services","subscribedService","nbSubscribed","handshake","ext","remoteAddress","responseText","onSuccess","subscribe","unSubscribe","sendMessage","stopReConnect","disconnect","delay","async","pollAction","ajaxConfig","get","pollling","timer","bind","buildAjaxSettings","complete","abort","connectState","tokenKey","httpData","reset","permanent","transient","idInterval","add","bestTransport","websocket","appKernel","environnement","loadModule","kernel","shortId","generate","loader","AJAX","css","mineType","tag","position","js","SCRIPT","insert","script","getElementsByTagName","appendChild","src","def","setAttribute","rel","onload","defaultSetting","prefix","regType","autoload","file","pci","severity","msgid","msg","parentNode","removeChild","ISDefined","undefined","parseParameterString","ns","Container","parameters","protoService","protoParameters","scope","set","parameter","object","sc","Scope","ExtendedScope","leaveScope","parent","tabFxEvent","Controller","container","i18n","router","redirect","pattern","forward","variables","absolute","generateUrl","$controller","eval","trim","domElement","find","jElement","ctrl","closest","attr","resolvePattern","controller","content","on","evalInContext","element","partial","append","prepend","empty","html","domParser","template","getTemplatePattern","render","Twig","debug","html5Mode","hashPrefix","defaultEnvEnable","dev","development","prod","production","loadRemoteTwig","params","error_callback","precompiled","Templates","registry","mydata","getModuleName","Template","getTemplateName","registerTemplate","xrh","Kernel","environment","booted","isDomReady","uiContainer","initializeLog","autoloader","initRouter","initTwig","initTranslation","initRest","ready","domReady","resize","unLoad","onLoad","boot","initLocation","locationService","Rest","restService","templateEngine","twig","loadRemote","extendFunction","getModule","getController","action","app","initialize","listenWithConditions","pdu","payload","stack","severityName","timeStamp","xml","parseXml","moduleSrc","load","registerModule","kernelcontext","addScope","onReady","nativeHistory","history","pushState","PATH_MATCH","DEFAULT_PORTS","changeUrl","lastUrl","initialUrl","newUrl","lastHash","lastUrlr","myurl","options","same","urlBrowser","History","beginsWith","begin","whole","stripHash","Location","base","stripFile","parseAbsoluteUrl","_absUrl","_url","_protocol","_host","_port","_path","change","_search","_hash","segments","lastIndexOf","relativeUrl","prefixed","resolve","substring","absoluteUrl","LocationHashbangUrl","withoutBaseUrl","withoutHashUrl","parseRelativeUrl","encodePath","LocationHashbangInHtml5Url","LocationHtml5Url","pathUrl","serverBase","browserService","baseHref","mode","urlParser","text","regI18n","modelModule","config","rootName","documentXml","parser","overrideMimeType","templates","views","optionsGlobal","rest","addApi","locale","registerI18n","root","node","registerController","view","registerView","styles","style","registerStyle","scripts","registerScript","fonts","font","cacheFont","translations","translation","registerTranslation","icon","author","emailAuthor","authorLink","mvc","initialiseRest","route","defaultParam","createRoute","regPattern","Module","setParameters","getParameters","txt","pathName","templateName","enterScope","reader","Route","defaultParams","defaults","compile","slash","dot","capture","opt","offset","incl","param","wildcard","regModuleName","Resolver","defaultAction","defaultView","parsePathernController","getRouteByPattern","getAction","getDefaultView","cacheState","regSerch","routePattern","generatedPath","absUrl","last","resolveRoute","resolver","callController","getRoute","defaultOptions","removeAllListeners","has","translate","translateDispo","fr_FR","en_EN","regNavLang","defaultDomain","trans_default_domain","language","userLanguage","defaultLocale","getLangs","extendFilter","defaulDomain","mediaStream","getMediaStream","updaterMedia","stream","URL","createObjectURL","webkitMediaStream","getVideoTracks","videoTracks","getAudioTracks","audioTracks","MediaStream","defaultSettingsStream","audio","video","mediaElement","urlStream","setStream","getUserMedia","videotracks","audiotracks","srcObject","play","attachMediaStream","audioContext","webAudioApi","AudioContext","webkitAudioContext","mixSettings","mediaMix","audioBus","nbBus","eventsManager","createAudioBus","panner","analyser","masterBus","MASTER","tracks","muted","audioNodes","analyserLeft","analyserRight","gain","destination","bus","track","audioNode","setGain","getGain","mute","unmute","createTrack","removeTrack","time","loop","createGain","createPanner","createStereoPanner","createBiquadFilter","createAnalyser","nbChannel","createChannelSplitter","createChannelMerger","createOscillator","defaultAudioBusSettings","mixer","nbTracks","in","out","createNodes","splitter","smoothingTimeConstant","setValueAtTime","currentTime","createMediaStreamDestination","Track","pause","trackSettings","filter","source","buffer","sync","retry","mediaType","AudioNode","oncanplay","connectSource","createFilter","when","playbackState","PLAYING_STATE","disconnectSource","noteOn","createSource","createBufferSource","rawBuffer","Blob","decodeAudioData","decoded","createMediaStreamSource","createMediaElementSource","buf8","tmp","XMLHttpRequest","open","responseType","parseSdp","sdpLines","newline","webrtc","userMedia","asyncCandidates","RTCPeerConnection","createPeerConnection","addStream","dtmfSender","initDtmfSender","sendDtmf","peerConnection","localDescription","sessionDescription","webrtcTransaction","diag","optional","onicecandidate","old","iceGatheringState","target","candidate","onaddstream","setRemoteStream","insertDTMF","gap","createDTMFSender","localAudioTrack","ontonechange","tone","createOffer","setDescription","setLocalDescription","constraintsOffer","createMediaStream","remoteDescription","desc","remoteDesc","ClassDesc","RTCSessionDescription","setRemoteDescription","createAnswer","constraints","cancel","closeTransaction","decline","userSettings","mandatory","User","OfferToReceiveAudio","OfferToReceiveVideo","succesCallback","errorMedia","onSucces","sipPort","sipTransport","iceServers","WebRtc","socketState","init","doAnswer","RTCIceCandidate","addIceCandidate","transation","cleanTransactions","ea","iterator","pair","struct","local","createHash","active","codeError","notFound","stopped","eventsQueue","createEventsManager","fireEvent","isEmpty","array","contain","remove","removeIndexOf","createStruct","Structs","createQueue","queues","maxStack","rateLimit","burstLimit","checkConditions","sysLogSeverity","guid","PDU","uid","translateSeverity","typePayload","toTimeString","getDate","operators","ele1","ele2","conditionsObj","condition","operator","sev","logicCondition","myConditions","checkFormatSeverity","checkFormatDate","checkFormatMsgId","severityToString","myint","sanitizeConditions","settingsCondition","condi","mySeverity","myseverity","createPDU","ringStack","burstPrinted","missed","valid","now","pushStack","end","contition","getLogs","conditions","myStack","myFuncCondition","Conditions","doEvent","beforeConditions","st","stringToDocumentXML","implementation","createDocument","doc","loadXML","oDomDoc","DOMParser","parseFromString","getDocumentRoot","documentElement","childNodes","myDoc","ownerDocument","parseDOM","__force_array","force_array","parseNode","nodeName","attr_prefix","name_space","nodeValue","addNode","textonly","ntype","cnts","removeColon"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;AClFA,kFAAoC,mBAAO,CAAC,2DAAe,E;;;;;;;;;;;;ACA3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,MAAM,KAA0B;;AAEhC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,QAAQ,YAAY;;AAEpB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,MAAM;AACN;AACA;;AAEA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF,oBAAoB;;AAEpB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA,UAAU,YAAY;AACtB;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS,SAAS;AAClB;AACA;;AAEA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS,YAAY;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU,YAAY;AACtB;;AAEA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,SAAS;AAClB;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA,gBAAgB,IAAI;;AAEpB;AACA;;AAEA;;AAEA;AACA;AACA,wCAAwC,IAAI;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,GAAG;AACH,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,SAAS;;AAET;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA,MAAM;;AAEN;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;;AAEA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,aAAa,yBAAyB;AACtC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,SAAS;AACpB;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,QAAQ,6BAA6B;AAChD;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;AACF;;AAEA;AACA;AACA,WAAW,gBAAgB;AAC3B,aAAa,uBAAuB;AACpC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,WAAW,eAAe;AAC1B,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,eAAe;AAC1B,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,WAAW,UAAU;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,WAAW,cAAc;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,gCAAgC,MAAM;AACtC;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,eAAe;;AAEf,SAAS;;AAET;AACA,QAAQ,iCAAiC;AACzC,QAAQ,oBAAoB;AAC5B,QAAQ,sCAAsC;AAC9C,QAAQ;AACR,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;;AAEA;AACA;AACA;AACA,gBAAgB,aAAa,EAAE;AAC/B;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,4DAA4D;;AAE5D;AACA;AACA;AACA,yCAAyC;;AAEzC;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO;AACP;AACA;AACA;AACA;AACA,6DAA6D;;AAE7D;AACA;AACA;AACA,0CAA0C;;AAE1C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,gEAAgE;;AAEhE;AACA;AACA;AACA,6CAA6C;;AAE7C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA,iEAAiE,UAAU;AAC3E,sCAAsC,2BAA2B;AACjE;AACA,gCAAgC,MAAM;AACtC;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,UAAU,YAAY;AACtB;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,UAAU,YAAY;AACtB;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,UAAU,UAAU;AACpB;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,UAAU,cAAc;AACxB;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;AAEA;AACA,YAAY,uEAAuE;AACnF;AACA;AACA,YAAY,4BAA4B;AACxC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAQ,SAAS;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,2DAA2D;;AAE3D;AACA;AACA,oFAAoF;;AAEpF;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA,OAAO;AACP;AACA;;AAEA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA,QAAQ,SAAS;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAQ,SAAS;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH,QAAQ,SAAS;AACjB;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,iDAAiD;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,iDAAiD;AACjD,UAAU,wCAAwC;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B;AACA,WAAW,QAAQ;AACnB,WAAW,MAAM;AACjB,WAAW,MAAM;AACjB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA;;AAEA,CAAC;;;;AAID;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA,QAAQ,GAAG;AACX;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;;;;AAIA;;AAEA;;AAEA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gBAAgB,SAAS;AACzB;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;;AAEA,cAAc,SAAS;AACvB;AACA;;AAEA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;AAGD;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,IAAI;AACJ;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,QAAQ;AACR;AACA;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU,OAAO;AACjB;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU,OAAO;AACjB,0BAA0B,wBAAwB;;AAElD;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA,0CAA0C;AAC1C,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;;;;AAIA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB;;AAEnB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,UAAU,cAAc;AACxB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;;AAER;AACA;AACA;AACA,OAAO;AACP,MAAM;;AAEN;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;AACH;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,wCAAwC,sCAAsC;AAC9E,oCAAoC,uCAAuC;AAC3E,oCAAoC,sCAAsC;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR,OAAO;AACP;AACA,MAAM;AACN,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW;;AAEX;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,UAAU;;AAEV;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;;AAER;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;;AAEN;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,oCAAoC;AACpC,qCAAqC;AACrC,oCAAoC;AACpC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;;AAGD;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA,EAAE;AACF;;;;;AAKA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;AACF;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,UAAU,SAAS;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,uBAAuB,aAAa;AACpC,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB,SAAS;AAC7B;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,IAAI;AACJ,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;;;AAGD;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ,EAAE;AACF;AACA;AACA;AACA,GAAG;AACH,EAAE;AACF;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;AAEA;;;AAGA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,QAAQ,gBAAgB;AACxB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,gBAAgB;AACjC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,GAAG;AACH;AACA,CAAC;AACD;;AAEA;;AAEA;;;;AAIA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,EAAE;AACF;;AAEA,EAAE;AACF;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA,QAAQ,OAAO;AACf;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,sBAAsB;;AAEtB;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAQ,OAAO;AACf;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;;AAEA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;AAIA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE,gBAAgB;AAClB;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;;AAEA,WAAW;;AAEX;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;;AAEA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA,oDAAoD;AACpD;;AAEA;AACA;;AAEA,cAAc,sBAAsB;AACpC;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,yBAAyB;AACzB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,+DAA+D;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,UAAU,cAAc;;AAExB;AACA;AACA;AACA;AACA;AACA,iBAAiB,mBAAmB;AACpC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,uCAAuC;AACjE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,uDAAuD;AAC9E;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,sCAAsC;AACtC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,qCAAqC,cAAc;AACnD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;;;AAGD;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,2CAA2C,OAAO;AAClD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,8BAA8B;;AAE9B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;AACF;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU,OAAO;AACjB;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,gBAAgB,gBAAgB;AAChC;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,QAAQ,+BAA+B;AACvC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,uCAAuC,OAAO;AAC9C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,wCAAwC,OAAO;AAC/C;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA,SAAS,qCAAqC;AAC9C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,QAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;;AAEA,SAAS,8BAA8B;AACvC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA,6BAA6B;AAC7B;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,YAAY,OAAO;AACnB;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS,WAAW;AACpB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;;;AAIA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,+CAA+C,cAAc,WAAW;AACxE,mBAAmB,UAAU;AAC7B;AACA,sBAAsB,cAAc,sBAAsB,gBAAgB;AAC1E,gBAAgB,WAAW,YAAY;AACvC,cAAc;AACd;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,EAAE;AACF,CAAC;;;AAGD;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB;AAClB;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY,+DAA+D;AAC3E;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,QAAQ,OAAO;;AAEf;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,aAAa;;AAEb;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,kBAAkB,gBAAgB;AAClC;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;;AAEA,UAAU,OAAO;AACjB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,YAAY;AACZ;;AAEA;AACA;AACA;;AAEA,WAAW,SAAS;AACpB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;;;AAGD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;AACA;;;;;AAKA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA,QAAQ,OAAO;AACf;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAQ,gBAAgB;AACxB;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,iDAAiD,0BAA0B;AAC3E;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,UAAU,gBAAgB;AAC1B;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,2BAA2B;AAC3B;AACA,qBAAqB;AACrB;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B;AACA;;AAEA,6CAA6C;AAC7C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA,QAAQ,gBAAgB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA,SAAS,gBAAgB;AACzB;AACA;AACA;AACA;AACA,EAAE;;AAEF;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,CAAC;;AAED;AACA,iEAAiE;AACjE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,EAAE;AACF;AACA;AACA;;AAEA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,oBAAoB,cAAc;AAClC,EAAE;AACF;AACA;AACA;AACA;;AAEA;AACA,iDAAiD;;AAEjD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA,+BAA+B,SAAS;AACxC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,+BAA+B,SAAS;AACxC;AACA;AACA;AACA;AACA;;AAEA;AACA,mBAAmB,gBAAgB;AACnC;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,UAAU,kBAAkB;AAC5B,WAAW,kBAAkB;AAC7B,cAAc;AACd,CAAC;AACD;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;;AAEA,QAAQ,mBAAmB;AAC3B;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;AAGD;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;AAKD;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;AAKD;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;;;;AAKD;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA,iCAAiC;AACjC;AACA;;AAEA,IAAI;AACJ;;AAEA,IAAI;AACJ;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,KAAK;AACL;AACA;;AAEA;AACA,WAAW,SAAS;AACpB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;AAKD;;;AAGA;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,sCAAsC;AACtC;AACA;AACA;;AAEA;;AAEA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,2CAA2C;AAC3C;;AAEA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iDAAiD;AACjD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,CAAC;;AAED;;AAEA;AACA;AACA;AACA,GAAG;AACH,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,qCAAqC;;AAEpD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA,KAAK;AACL;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH,EAAE;;AAEF;AACA;AACA;AACA;;AAEA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb,KAAK;AACL;;AAEA,WAAW;AACX,GAAG;AACH;AACA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;;AAEhB;AACA;AACA;AACA;AACA;AACA,gBAAgB;;AAEhB,gDAAgD;AAChD;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,mBAAmB;AACnB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA,IAAI;;AAEJ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS;AACT;;AAEA;;AAEA;AACA;;AAEA;AACA,iBAAiB;AACjB,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;;AAElD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,2BAA2B;;AAE3B;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,kCAAkC;;AAElC;AACA,sBAAsB;AACtB,2BAA2B;;AAE3B;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sDAAsD;AACtD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;;;AAGD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,IAAI;AACJ;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;;AAEA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA,EAAE;AACF;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAQ;;AAER;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA,mDAAmD;AACnD;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,uBAAuB;AAClC,WAAW,yBAAyB;AACpC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;AAKD;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;AAKD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA,CAAC;;;;;AAKD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,IAAI;AACJ,GAAG;AACH;;AAEA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;AAKD;AACA;AACA;AACA,EAAE;AACF;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA,qDAAqD;AACrD;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,GAAG;AACH;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB;;AAEnB;AACA;;AAEA;AACA;;AAEA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA,cAAc,sDAAsD;AACpE;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,IAAI;AACJ;AACA;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;AAGD;AACA,cAAc,mCAAmC;AACjD,eAAe,6DAA6D;AAC5E;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA,EAAE;AACF,CAAC;;;AAGD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,CAAC;;;;;AAKD;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,KAAK,IAA0C;AAC/C,CAAC,iCAAkB,EAAE,mCAAE;AACvB;AACA,EAAE;AAAA,oGAAE;AACJ;;;;;AAKA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA,CAAC;;;;;;;;;;;;AC3nUD,6EAA+B,mBAAO,CAAC,oJAA+G,E;;;;;;;;;;;;ACAtJ;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB,WAAW,OAAO;AAClB,WAAW,KAAK;AAChB;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,UAAU;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB,UAAU;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,SAAS;AACrB;;;;;;;;;;;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,QAAQ;AACxC;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU,MAAM;AAChB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,IAAI;AACjC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,oCAAoC,8BAA8B;AAClE;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU,oBAAoB;AAC9B;AACA;;AAEA;AACA,UAAU,UAAU;AACpB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA,+BAA+B,sBAAsB;AACrD;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB,eAAe;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC/NA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;;AAErC;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU;;;;;;;;;;;;;ACvLtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;;AAEb,eAAe,mBAAO,CAAC,sCAAK;;AAE5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,mBAAmB;AACtC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mBAAmB,sCAAsC;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yBAAyB,gCAAgC;AACzD;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,aAAa;AACtB;;AAEA;AACA;AACA;AACA,SAAS,aAAa;AACtB;;AAEA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,mDAAmD;;AAEnD;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,+CAA+C,OAAO;AACtD;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,+BAA+B;;AAE/B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA,mBAAmB,8BAA8B;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;;;AAGA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;;AAEzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,gCAAgC;AAC3C;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,aAAa;AACb;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD;AACA,OAAO;AACP,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;;AAEP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD;AACA,WAAW;AACX;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,uBAAuB,4BAA4B;AACnD;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,yBAAyB,4BAA4B;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,SAAS;AACT;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,GAAG;;AAEH;AACA;;;;;;;;;;;;;ACh0DA;AACa;;AAEb;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oBAAoB;AACpB,0BAA0B;AAC1B;AACA;AACA;AACA,yDAAyD;AACzD,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL,iDAAiD;AACjD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,kBAAkB,OAAO;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI,IAA0B;AAC9B;AACA;;;;;;;;;;;;;ACtsBa;AACb,iBAAiB,mBAAO,CAAC,wDAAa;;;;;;;;;;;;;ACDzB;;AAEb,qBAAqB,mBAAO,CAAC,wFAA2B;;AAExD;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACtGa;;AAEb,eAAe,mBAAO,CAAC,0DAAY;AACnC,eAAe,mBAAO,CAAC,0DAAY;;AAEnC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;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CA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;;AAEgD;AACM;;AAE/C;AACP;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,0BAA0B;AAC1B;;AAEA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,0BAA0B;AAC1B;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,IAAI,iEAA6B;AACjC;AACA;AACA,WAAW,QAAQ,sBAAsB;AACzC;AACA;AACA,KAAK;AACL;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,iEAA6B;AACjC;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA,yBAAyB,uDAAmB;AAC5C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,SAAS;AACT;AACA,OAAO;;AAEP;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP,EAAE,iEAA6B;AAC/B;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;;;;;;AC1tBA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;AACN;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;;;;;;;;;;;;AC/CA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;AACwB;AACrC,gBAAgB,6CAAS;;AAElB;AACP;;AAEA;AACA;AACA;;AAEA,yBAAyB,uDAAmB;;AAE5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,YAAY;AACvE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA,yDAAyD,oBAAoB;AAC7E,yDAAyD;AACzD;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;;;;;;;;;;;;;AC3LA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;;AAEc;AACM;;AAE1B;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,8BAA8B,0CAAQ;AACtC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE,8DAA6B;AAC/B;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;AACH;;AAEO;AACP;AACA;AACA;AACA,yBAAyB,oDAAmB;;AAE5C;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,qBAAqB,0CAAQ;AAC7B;AACA;AACA,oBAAoB,0CAAQ;AAC5B;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB,0CAAQ;AAC1B;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,8DAA6B;AAC/B;AACA;AACA,GAAG;AACH;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;;;;;;ACzSA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;;AAEqB;AACkB;AACO;;AAEX;AACM;;AAE/C;AACP,yBAAyB,oDAAmB;;AAE5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA,gCAAgC,6DAAqB;AACrD;AACA;AACA;AACA,0BAA0B,0EAAgB;AAC1C;AACA,MAAM,0CAAS;AACf;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC1FA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;;AAEqB;AAClC;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,iDAAgB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;;;;;;AClDA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;;AAEN;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACvBA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;;AAEN;AACP;;AAEA;AACA;AACA,aAAa,yCAAyC;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC9BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;;AAEqB;AACc;AACM;;AAE/C;AACP;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA,KAAK;AACL;AACA;;AAEO;AACP,yBAAyB,oDAAmB;;AAE5C;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA,eAAe;AACf,aAAa;AACb;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,8DAA6B;AAC/B;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,IAAI,iDAAgB;AACpB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACrLA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;;AAEN;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B,KAAK;AACL;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AClCA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;;AAEqB;;AAE3B;AACP,yBAAyB,oDAAmB;AAC5C;AACA;;AAEA;AACA;AACA,IAAI,iDAAgB;AACpB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACnEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;AACqB;;AAE3B;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,qBAAqB,gCAAgC;AACrD;AACA;AACA;AACA,UAAU,iDAAgB;AAC1B;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA,KAAK;AACL;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACnTA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;;AAEb;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,YAAY,QAAQ;AACpB;AACO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,SAAS;AACpB;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACO;AACP,SAAS,UAAU;;AAEnB;AACA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","file":"stage.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"stage\"] = factory();\n\telse\n\t\troot[\"stage\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/core.js\");\n","module.exports = global[\"jQuery\"] = require(\"-!./jquery.js\");","/*!\n * jQuery JavaScript Library v3.3.1\n * https://jquery.com/\n *\n * Includes Sizzle.js\n * https://sizzlejs.com/\n *\n * Copyright JS Foundation and other contributors\n * Released under the MIT license\n * https://jquery.org/license\n *\n * Date: 2018-01-20T17:24Z\n */\n( function( global, factory ) {\n\n\t\"use strict\";\n\n\tif ( typeof module === \"object\" && typeof module.exports === \"object\" ) {\n\n\t\t// For CommonJS and CommonJS-like environments where a proper `window`\n\t\t// is present, execute the factory and get jQuery.\n\t\t// For environments that do not have a `window` with a `document`\n\t\t// (such as Node.js), expose a factory as module.exports.\n\t\t// This accentuates the need for the creation of a real `window`.\n\t\t// e.g. var jQuery = require(\"jquery\")(window);\n\t\t// See ticket #14549 for more info.\n\t\tmodule.exports = global.document ?\n\t\t\tfactory( global, true ) :\n\t\t\tfunction( w ) {\n\t\t\t\tif ( !w.document ) {\n\t\t\t\t\tthrow new Error( \"jQuery requires a window with a document\" );\n\t\t\t\t}\n\t\t\t\treturn factory( w );\n\t\t\t};\n\t} else {\n\t\tfactory( global );\n\t}\n\n// Pass this if window is not defined yet\n} )( typeof window !== \"undefined\" ? window : this, function( window, noGlobal ) {\n\n// Edge <= 12 - 13+, Firefox <=18 - 45+, IE 10 - 11, Safari 5.1 - 9+, iOS 6 - 9.1\n// throw exceptions when non-strict code (e.g., ASP.NET 4.5) accesses strict mode\n// arguments.callee.caller (trac-13335). But as of jQuery 3.0 (2016), strict mode should be common\n// enough that all such attempts are guarded in a try block.\n\"use strict\";\n\nvar arr = [];\n\nvar document = window.document;\n\nvar getProto = Object.getPrototypeOf;\n\nvar slice = arr.slice;\n\nvar concat = arr.concat;\n\nvar push = arr.push;\n\nvar indexOf = arr.indexOf;\n\nvar class2type = {};\n\nvar toString = class2type.toString;\n\nvar hasOwn = class2type.hasOwnProperty;\n\nvar fnToString = hasOwn.toString;\n\nvar ObjectFunctionString = fnToString.call( Object );\n\nvar support = {};\n\nvar isFunction = function isFunction( obj ) {\n\n      // Support: Chrome <=57, Firefox <=52\n      // In some browsers, typeof returns \"function\" for HTML <object> elements\n      // (i.e., `typeof document.createElement( \"object\" ) === \"function\"`).\n      // We don't want to classify *any* DOM node as a function.\n      return typeof obj === \"function\" && typeof obj.nodeType !== \"number\";\n  };\n\n\nvar isWindow = function isWindow( obj ) {\n\t\treturn obj != null && obj === obj.window;\n\t};\n\n\n\n\n\tvar preservedScriptAttributes = {\n\t\ttype: true,\n\t\tsrc: true,\n\t\tnoModule: true\n\t};\n\n\tfunction DOMEval( code, doc, node ) {\n\t\tdoc = doc || document;\n\n\t\tvar i,\n\t\t\tscript = doc.createElement( \"script\" );\n\n\t\tscript.text = code;\n\t\tif ( node ) {\n\t\t\tfor ( i in preservedScriptAttributes ) {\n\t\t\t\tif ( node[ i ] ) {\n\t\t\t\t\tscript[ i ] = node[ i ];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tdoc.head.appendChild( script ).parentNode.removeChild( script );\n\t}\n\n\nfunction toType( obj ) {\n\tif ( obj == null ) {\n\t\treturn obj + \"\";\n\t}\n\n\t// Support: Android <=2.3 only (functionish RegExp)\n\treturn typeof obj === \"object\" || typeof obj === \"function\" ?\n\t\tclass2type[ toString.call( obj ) ] || \"object\" :\n\t\ttypeof obj;\n}\n/* global Symbol */\n// Defining this global in .eslintrc.json would create a danger of using the global\n// unguarded in another place, it seems safer to define global only for this module\n\n\n\nvar\n\tversion = \"3.3.1\",\n\n\t// Define a local copy of jQuery\n\tjQuery = function( selector, context ) {\n\n\t\t// The jQuery object is actually just the init constructor 'enhanced'\n\t\t// Need init if jQuery is called (just allow error to be thrown if not included)\n\t\treturn new jQuery.fn.init( selector, context );\n\t},\n\n\t// Support: Android <=4.0 only\n\t// Make sure we trim BOM and NBSP\n\trtrim = /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g;\n\njQuery.fn = jQuery.prototype = {\n\n\t// The current version of jQuery being used\n\tjquery: version,\n\n\tconstructor: jQuery,\n\n\t// The default length of a jQuery object is 0\n\tlength: 0,\n\n\ttoArray: function() {\n\t\treturn slice.call( this );\n\t},\n\n\t// Get the Nth element in the matched element set OR\n\t// Get the whole matched element set as a clean array\n\tget: function( num ) {\n\n\t\t// Return all the elements in a clean array\n\t\tif ( num == null ) {\n\t\t\treturn slice.call( this );\n\t\t}\n\n\t\t// Return just the one element from the set\n\t\treturn num < 0 ? this[ num + this.length ] : this[ num ];\n\t},\n\n\t// Take an array of elements and push it onto the stack\n\t// (returning the new matched element set)\n\tpushStack: function( elems ) {\n\n\t\t// Build a new jQuery matched element set\n\t\tvar ret = jQuery.merge( this.constructor(), elems );\n\n\t\t// Add the old object onto the stack (as a reference)\n\t\tret.prevObject = this;\n\n\t\t// Return the newly-formed element set\n\t\treturn ret;\n\t},\n\n\t// Execute a callback for every element in the matched set.\n\teach: function( callback ) {\n\t\treturn jQuery.each( this, callback );\n\t},\n\n\tmap: function( callback ) {\n\t\treturn this.pushStack( jQuery.map( this, function( elem, i ) {\n\t\t\treturn callback.call( elem, i, elem );\n\t\t} ) );\n\t},\n\n\tslice: function() {\n\t\treturn this.pushStack( slice.apply( this, arguments ) );\n\t},\n\n\tfirst: function() {\n\t\treturn this.eq( 0 );\n\t},\n\n\tlast: function() {\n\t\treturn this.eq( -1 );\n\t},\n\n\teq: function( i ) {\n\t\tvar len = this.length,\n\t\t\tj = +i + ( i < 0 ? len : 0 );\n\t\treturn this.pushStack( j >= 0 && j < len ? [ this[ j ] ] : [] );\n\t},\n\n\tend: function() {\n\t\treturn this.prevObject || this.constructor();\n\t},\n\n\t// For internal use only.\n\t// Behaves like an Array's method, not like a jQuery method.\n\tpush: push,\n\tsort: arr.sort,\n\tsplice: arr.splice\n};\n\njQuery.extend = jQuery.fn.extend = function() {\n\tvar options, name, src, copy, copyIsArray, clone,\n\t\ttarget = arguments[ 0 ] || {},\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif ( typeof target === \"boolean\" ) {\n\t\tdeep = target;\n\n\t\t// Skip the boolean and the target\n\t\ttarget = arguments[ i ] || {};\n\t\ti++;\n\t}\n\n\t// Handle case when target is a string or something (possible in deep copy)\n\tif ( typeof target !== \"object\" && !isFunction( target ) ) {\n\t\ttarget = {};\n\t}\n\n\t// Extend jQuery itself if only one argument is passed\n\tif ( i === length ) {\n\t\ttarget = this;\n\t\ti--;\n\t}\n\n\tfor ( ; i < length; i++ ) {\n\n\t\t// Only deal with non-null/undefined values\n\t\tif ( ( options = arguments[ i ] ) != null ) {\n\n\t\t\t// Extend the base object\n\t\t\tfor ( name in options ) {\n\t\t\t\tsrc = target[ name ];\n\t\t\t\tcopy = options[ name ];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif ( target === copy ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\tif ( deep && copy && ( jQuery.isPlainObject( copy ) ||\n\t\t\t\t\t( copyIsArray = Array.isArray( copy ) ) ) ) {\n\n\t\t\t\t\tif ( copyIsArray ) {\n\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\tclone = src && Array.isArray( src ) ? src : [];\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone = src && jQuery.isPlainObject( src ) ? src : {};\n\t\t\t\t\t}\n\n\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\ttarget[ name ] = jQuery.extend( deep, clone, copy );\n\n\t\t\t\t// Don't bring in undefined values\n\t\t\t\t} else if ( copy !== undefined ) {\n\t\t\t\t\ttarget[ name ] = copy;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\njQuery.extend( {\n\n\t// Unique for each copy of jQuery on the page\n\texpando: \"jQuery\" + ( version + Math.random() ).replace( /\\D/g, \"\" ),\n\n\t// Assume jQuery is ready without the ready module\n\tisReady: true,\n\n\terror: function( msg ) {\n\t\tthrow new Error( msg );\n\t},\n\n\tnoop: function() {},\n\n\tisPlainObject: function( obj ) {\n\t\tvar proto, Ctor;\n\n\t\t// Detect obvious negatives\n\t\t// Use toString instead of jQuery.type to catch host objects\n\t\tif ( !obj || toString.call( obj ) !== \"[object Object]\" ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tproto = getProto( obj );\n\n\t\t// Objects with no prototype (e.g., `Object.create( null )`) are plain\n\t\tif ( !proto ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Objects with prototype are plain iff they were constructed by a global Object function\n\t\tCtor = hasOwn.call( proto, \"constructor\" ) && proto.constructor;\n\t\treturn typeof Ctor === \"function\" && fnToString.call( Ctor ) === ObjectFunctionString;\n\t},\n\n\tisEmptyObject: function( obj ) {\n\n\t\t/* eslint-disable no-unused-vars */\n\t\t// See https://github.com/eslint/eslint/issues/6125\n\t\tvar name;\n\n\t\tfor ( name in obj ) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\n\t// Evaluates a script in a global context\n\tglobalEval: function( code ) {\n\t\tDOMEval( code );\n\t},\n\n\teach: function( obj, callback ) {\n\t\tvar length, i = 0;\n\n\t\tif ( isArrayLike( obj ) ) {\n\t\t\tlength = obj.length;\n\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\tif ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor ( i in obj ) {\n\t\t\t\tif ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn obj;\n\t},\n\n\t// Support: Android <=4.0 only\n\ttrim: function( text ) {\n\t\treturn text == null ?\n\t\t\t\"\" :\n\t\t\t( text + \"\" ).replace( rtrim, \"\" );\n\t},\n\n\t// results is for internal usage only\n\tmakeArray: function( arr, results ) {\n\t\tvar ret = results || [];\n\n\t\tif ( arr != null ) {\n\t\t\tif ( isArrayLike( Object( arr ) ) ) {\n\t\t\t\tjQuery.merge( ret,\n\t\t\t\t\ttypeof arr === \"string\" ?\n\t\t\t\t\t[ arr ] : arr\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tpush.call( ret, arr );\n\t\t\t}\n\t\t}\n\n\t\treturn ret;\n\t},\n\n\tinArray: function( elem, arr, i ) {\n\t\treturn arr == null ? -1 : indexOf.call( arr, elem, i );\n\t},\n\n\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t// push.apply(_, arraylike) throws on ancient WebKit\n\tmerge: function( first, second ) {\n\t\tvar len = +second.length,\n\t\t\tj = 0,\n\t\t\ti = first.length;\n\n\t\tfor ( ; j < len; j++ ) {\n\t\t\tfirst[ i++ ] = second[ j ];\n\t\t}\n\n\t\tfirst.length = i;\n\n\t\treturn first;\n\t},\n\n\tgrep: function( elems, callback, invert ) {\n\t\tvar callbackInverse,\n\t\t\tmatches = [],\n\t\t\ti = 0,\n\t\t\tlength = elems.length,\n\t\t\tcallbackExpect = !invert;\n\n\t\t// Go through the array, only saving the items\n\t\t// that pass the validator function\n\t\tfor ( ; i < length; i++ ) {\n\t\t\tcallbackInverse = !callback( elems[ i ], i );\n\t\t\tif ( callbackInverse !== callbackExpect ) {\n\t\t\t\tmatches.push( elems[ i ] );\n\t\t\t}\n\t\t}\n\n\t\treturn matches;\n\t},\n\n\t// arg is for internal usage only\n\tmap: function( elems, callback, arg ) {\n\t\tvar length, value,\n\t\t\ti = 0,\n\t\t\tret = [];\n\n\t\t// Go through the array, translating each of the items to their new values\n\t\tif ( isArrayLike( elems ) ) {\n\t\t\tlength = elems.length;\n\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\tvalue = callback( elems[ i ], i, arg );\n\n\t\t\t\tif ( value != null ) {\n\t\t\t\t\tret.push( value );\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Go through every key on the object,\n\t\t} else {\n\t\t\tfor ( i in elems ) {\n\t\t\t\tvalue = callback( elems[ i ], i, arg );\n\n\t\t\t\tif ( value != null ) {\n\t\t\t\t\tret.push( value );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Flatten any nested arrays\n\t\treturn concat.apply( [], ret );\n\t},\n\n\t// A global GUID counter for objects\n\tguid: 1,\n\n\t// jQuery.support is not used in Core but other projects attach their\n\t// properties to it so it needs to exist.\n\tsupport: support\n} );\n\nif ( typeof Symbol === \"function\" ) {\n\tjQuery.fn[ Symbol.iterator ] = arr[ Symbol.iterator ];\n}\n\n// Populate the class2type map\njQuery.each( \"Boolean Number String Function Array Date RegExp Object Error Symbol\".split( \" \" ),\nfunction( i, name ) {\n\tclass2type[ \"[object \" + name + \"]\" ] = name.toLowerCase();\n} );\n\nfunction isArrayLike( obj ) {\n\n\t// Support: real iOS 8.2 only (not reproducible in simulator)\n\t// `in` check used to prevent JIT error (gh-2145)\n\t// hasOwn isn't used here due to false negatives\n\t// regarding Nodelist length in IE\n\tvar length = !!obj && \"length\" in obj && obj.length,\n\t\ttype = toType( obj );\n\n\tif ( isFunction( obj ) || isWindow( obj ) ) {\n\t\treturn false;\n\t}\n\n\treturn type === \"array\" || length === 0 ||\n\t\ttypeof length === \"number\" && length > 0 && ( length - 1 ) in obj;\n}\nvar Sizzle =\n/*!\n * Sizzle CSS Selector Engine v2.3.3\n * https://sizzlejs.com/\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license\n * http://jquery.org/license\n *\n * Date: 2016-08-08\n */\n(function( window ) {\n\nvar i,\n\tsupport,\n\tExpr,\n\tgetText,\n\tisXML,\n\ttokenize,\n\tcompile,\n\tselect,\n\toutermostContext,\n\tsortInput,\n\thasDuplicate,\n\n\t// Local document vars\n\tsetDocument,\n\tdocument,\n\tdocElem,\n\tdocumentIsHTML,\n\trbuggyQSA,\n\trbuggyMatches,\n\tmatches,\n\tcontains,\n\n\t// Instance-specific data\n\texpando = \"sizzle\" + 1 * new Date(),\n\tpreferredDoc = window.document,\n\tdirruns = 0,\n\tdone = 0,\n\tclassCache = createCache(),\n\ttokenCache = createCache(),\n\tcompilerCache = createCache(),\n\tsortOrder = function( a, b ) {\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t}\n\t\treturn 0;\n\t},\n\n\t// Instance methods\n\thasOwn = ({}).hasOwnProperty,\n\tarr = [],\n\tpop = arr.pop,\n\tpush_native = arr.push,\n\tpush = arr.push,\n\tslice = arr.slice,\n\t// Use a stripped-down indexOf as it's faster than native\n\t// https://jsperf.com/thor-indexof-vs-for/5\n\tindexOf = function( list, elem ) {\n\t\tvar i = 0,\n\t\t\tlen = list.length;\n\t\tfor ( ; i < len; i++ ) {\n\t\t\tif ( list[i] === elem ) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t},\n\n\tbooleans = \"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",\n\n\t// Regular expressions\n\n\t// http://www.w3.org/TR/css3-selectors/#whitespace\n\twhitespace = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",\n\n\t// http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier\n\tidentifier = \"(?:\\\\\\\\.|[\\\\w-]|[^\\0-\\\\xa0])+\",\n\n\t// Attribute selectors: http://www.w3.org/TR/selectors/#attribute-selectors\n\tattributes = \"\\\\[\" + whitespace + \"*(\" + identifier + \")(?:\" + whitespace +\n\t\t// Operator (capture 2)\n\t\t\"*([*^$|!~]?=)\" + whitespace +\n\t\t// \"Attribute values must be CSS identifiers [capture 5] or strings [capture 3 or capture 4]\"\n\t\t\"*(?:'((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\" + identifier + \"))|)\" + whitespace +\n\t\t\"*\\\\]\",\n\n\tpseudos = \":(\" + identifier + \")(?:\\\\((\" +\n\t\t// To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:\n\t\t// 1. quoted (capture 3; capture 4 or capture 5)\n\t\t\"('((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|\" +\n\t\t// 2. simple (capture 6)\n\t\t\"((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\" + attributes + \")*)|\" +\n\t\t// 3. anything else (capture 2)\n\t\t\".*\" +\n\t\t\")\\\\)|)\",\n\n\t// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter\n\trwhitespace = new RegExp( whitespace + \"+\", \"g\" ),\n\trtrim = new RegExp( \"^\" + whitespace + \"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\" + whitespace + \"+$\", \"g\" ),\n\n\trcomma = new RegExp( \"^\" + whitespace + \"*,\" + whitespace + \"*\" ),\n\trcombinators = new RegExp( \"^\" + whitespace + \"*([>+~]|\" + whitespace + \")\" + whitespace + \"*\" ),\n\n\trattributeQuotes = new RegExp( \"=\" + whitespace + \"*([^\\\\]'\\\"]*?)\" + whitespace + \"*\\\\]\", \"g\" ),\n\n\trpseudo = new RegExp( pseudos ),\n\tridentifier = new RegExp( \"^\" + identifier + \"$\" ),\n\n\tmatchExpr = {\n\t\t\"ID\": new RegExp( \"^#(\" + identifier + \")\" ),\n\t\t\"CLASS\": new RegExp( \"^\\\\.(\" + identifier + \")\" ),\n\t\t\"TAG\": new RegExp( \"^(\" + identifier + \"|[*])\" ),\n\t\t\"ATTR\": new RegExp( \"^\" + attributes ),\n\t\t\"PSEUDO\": new RegExp( \"^\" + pseudos ),\n\t\t\"CHILD\": new RegExp( \"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\" + whitespace +\n\t\t\t\"*(even|odd|(([+-]|)(\\\\d*)n|)\" + whitespace + \"*(?:([+-]|)\" + whitespace +\n\t\t\t\"*(\\\\d+)|))\" + whitespace + \"*\\\\)|)\", \"i\" ),\n\t\t\"bool\": new RegExp( \"^(?:\" + booleans + \")$\", \"i\" ),\n\t\t// For use in libraries implementing .is()\n\t\t// We use this for POS matching in `select`\n\t\t\"needsContext\": new RegExp( \"^\" + whitespace + \"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\" +\n\t\t\twhitespace + \"*((?:-\\\\d)?\\\\d*)\" + whitespace + \"*\\\\)|)(?=[^-]|$)\", \"i\" )\n\t},\n\n\trinputs = /^(?:input|select|textarea|button)$/i,\n\trheader = /^h\\d$/i,\n\n\trnative = /^[^{]+\\{\\s*\\[native \\w/,\n\n\t// Easily-parseable/retrievable ID or TAG or CLASS selectors\n\trquickExpr = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,\n\n\trsibling = /[+~]/,\n\n\t// CSS escapes\n\t// http://www.w3.org/TR/CSS21/syndata.html#escaped-characters\n\trunescape = new RegExp( \"\\\\\\\\([\\\\da-f]{1,6}\" + whitespace + \"?|(\" + whitespace + \")|.)\", \"ig\" ),\n\tfunescape = function( _, escaped, escapedWhitespace ) {\n\t\tvar high = \"0x\" + escaped - 0x10000;\n\t\t// NaN means non-codepoint\n\t\t// Support: Firefox<24\n\t\t// Workaround erroneous numeric interpretation of +\"0x\"\n\t\treturn high !== high || escapedWhitespace ?\n\t\t\tescaped :\n\t\t\thigh < 0 ?\n\t\t\t\t// BMP codepoint\n\t\t\t\tString.fromCharCode( high + 0x10000 ) :\n\t\t\t\t// Supplemental Plane codepoint (surrogate pair)\n\t\t\t\tString.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );\n\t},\n\n\t// CSS string/identifier serialization\n\t// https://drafts.csswg.org/cssom/#common-serializing-idioms\n\trcssescape = /([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\0-\\x1f\\x7f-\\uFFFF\\w-]/g,\n\tfcssescape = function( ch, asCodePoint ) {\n\t\tif ( asCodePoint ) {\n\n\t\t\t// U+0000 NULL becomes U+FFFD REPLACEMENT CHARACTER\n\t\t\tif ( ch === \"\\0\" ) {\n\t\t\t\treturn \"\\uFFFD\";\n\t\t\t}\n\n\t\t\t// Control characters and (dependent upon position) numbers get escaped as code points\n\t\t\treturn ch.slice( 0, -1 ) + \"\\\\\" + ch.charCodeAt( ch.length - 1 ).toString( 16 ) + \" \";\n\t\t}\n\n\t\t// Other potentially-special ASCII characters get backslash-escaped\n\t\treturn \"\\\\\" + ch;\n\t},\n\n\t// Used for iframes\n\t// See setDocument()\n\t// Removing the function wrapper causes a \"Permission Denied\"\n\t// error in IE\n\tunloadHandler = function() {\n\t\tsetDocument();\n\t},\n\n\tdisabledAncestor = addCombinator(\n\t\tfunction( elem ) {\n\t\t\treturn elem.disabled === true && (\"form\" in elem || \"label\" in elem);\n\t\t},\n\t\t{ dir: \"parentNode\", next: \"legend\" }\n\t);\n\n// Optimize for push.apply( _, NodeList )\ntry {\n\tpush.apply(\n\t\t(arr = slice.call( preferredDoc.childNodes )),\n\t\tpreferredDoc.childNodes\n\t);\n\t// Support: Android<4.0\n\t// Detect silently failing push.apply\n\tarr[ preferredDoc.childNodes.length ].nodeType;\n} catch ( e ) {\n\tpush = { apply: arr.length ?\n\n\t\t// Leverage slice if possible\n\t\tfunction( target, els ) {\n\t\t\tpush_native.apply( target, slice.call(els) );\n\t\t} :\n\n\t\t// Support: IE<9\n\t\t// Otherwise append directly\n\t\tfunction( target, els ) {\n\t\t\tvar j = target.length,\n\t\t\t\ti = 0;\n\t\t\t// Can't trust NodeList.length\n\t\t\twhile ( (target[j++] = els[i++]) ) {}\n\t\t\ttarget.length = j - 1;\n\t\t}\n\t};\n}\n\nfunction Sizzle( selector, context, results, seed ) {\n\tvar m, i, elem, nid, match, groups, newSelector,\n\t\tnewContext = context && context.ownerDocument,\n\n\t\t// nodeType defaults to 9, since context defaults to document\n\t\tnodeType = context ? context.nodeType : 9;\n\n\tresults = results || [];\n\n\t// Return early from calls with invalid selector or context\n\tif ( typeof selector !== \"string\" || !selector ||\n\t\tnodeType !== 1 && nodeType !== 9 && nodeType !== 11 ) {\n\n\t\treturn results;\n\t}\n\n\t// Try to shortcut find operations (as opposed to filters) in HTML documents\n\tif ( !seed ) {\n\n\t\tif ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {\n\t\t\tsetDocument( context );\n\t\t}\n\t\tcontext = context || document;\n\n\t\tif ( documentIsHTML ) {\n\n\t\t\t// If the selector is sufficiently simple, try using a \"get*By*\" DOM method\n\t\t\t// (excepting DocumentFragment context, where the methods don't exist)\n\t\t\tif ( nodeType !== 11 && (match = rquickExpr.exec( selector )) ) {\n\n\t\t\t\t// ID selector\n\t\t\t\tif ( (m = match[1]) ) {\n\n\t\t\t\t\t// Document context\n\t\t\t\t\tif ( nodeType === 9 ) {\n\t\t\t\t\t\tif ( (elem = context.getElementById( m )) ) {\n\n\t\t\t\t\t\t\t// Support: IE, Opera, Webkit\n\t\t\t\t\t\t\t// TODO: identify versions\n\t\t\t\t\t\t\t// getElementById can match elements by name instead of ID\n\t\t\t\t\t\t\tif ( elem.id === m ) {\n\t\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t// Element context\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// Support: IE, Opera, Webkit\n\t\t\t\t\t\t// TODO: identify versions\n\t\t\t\t\t\t// getElementById can match elements by name instead of ID\n\t\t\t\t\t\tif ( newContext && (elem = newContext.getElementById( m )) &&\n\t\t\t\t\t\t\tcontains( context, elem ) &&\n\t\t\t\t\t\t\telem.id === m ) {\n\n\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t// Type selector\n\t\t\t\t} else if ( match[2] ) {\n\t\t\t\t\tpush.apply( results, context.getElementsByTagName( selector ) );\n\t\t\t\t\treturn results;\n\n\t\t\t\t// Class selector\n\t\t\t\t} else if ( (m = match[3]) && support.getElementsByClassName &&\n\t\t\t\t\tcontext.getElementsByClassName ) {\n\n\t\t\t\t\tpush.apply( results, context.getElementsByClassName( m ) );\n\t\t\t\t\treturn results;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Take advantage of querySelectorAll\n\t\t\tif ( support.qsa &&\n\t\t\t\t!compilerCache[ selector + \" \" ] &&\n\t\t\t\t(!rbuggyQSA || !rbuggyQSA.test( selector )) ) {\n\n\t\t\t\tif ( nodeType !== 1 ) {\n\t\t\t\t\tnewContext = context;\n\t\t\t\t\tnewSelector = selector;\n\n\t\t\t\t// qSA looks outside Element context, which is not what we want\n\t\t\t\t// Thanks to Andrew Dupont for this workaround technique\n\t\t\t\t// Support: IE <=8\n\t\t\t\t// Exclude object elements\n\t\t\t\t} else if ( context.nodeName.toLowerCase() !== \"object\" ) {\n\n\t\t\t\t\t// Capture the context ID, setting it first if necessary\n\t\t\t\t\tif ( (nid = context.getAttribute( \"id\" )) ) {\n\t\t\t\t\t\tnid = nid.replace( rcssescape, fcssescape );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcontext.setAttribute( \"id\", (nid = expando) );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Prefix every selector in the list\n\t\t\t\t\tgroups = tokenize( selector );\n\t\t\t\t\ti = groups.length;\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tgroups[i] = \"#\" + nid + \" \" + toSelector( groups[i] );\n\t\t\t\t\t}\n\t\t\t\t\tnewSelector = groups.join( \",\" );\n\n\t\t\t\t\t// Expand context for sibling selectors\n\t\t\t\t\tnewContext = rsibling.test( selector ) && testContext( context.parentNode ) ||\n\t\t\t\t\t\tcontext;\n\t\t\t\t}\n\n\t\t\t\tif ( newSelector ) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tpush.apply( results,\n\t\t\t\t\t\t\tnewContext.querySelectorAll( newSelector )\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn results;\n\t\t\t\t\t} catch ( qsaError ) {\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tif ( nid === expando ) {\n\t\t\t\t\t\t\tcontext.removeAttribute( \"id\" );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// All others\n\treturn select( selector.replace( rtrim, \"$1\" ), context, results, seed );\n}\n\n/**\n * Create key-value caches of limited size\n * @returns {function(string, object)} Returns the Object data after storing it on itself with\n *\tproperty name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)\n *\tdeleting the oldest entry\n */\nfunction createCache() {\n\tvar keys = [];\n\n\tfunction cache( key, value ) {\n\t\t// Use (key + \" \") to avoid collision with native prototype properties (see Issue #157)\n\t\tif ( keys.push( key + \" \" ) > Expr.cacheLength ) {\n\t\t\t// Only keep the most recent entries\n\t\t\tdelete cache[ keys.shift() ];\n\t\t}\n\t\treturn (cache[ key + \" \" ] = value);\n\t}\n\treturn cache;\n}\n\n/**\n * Mark a function for special use by Sizzle\n * @param {Function} fn The function to mark\n */\nfunction markFunction( fn ) {\n\tfn[ expando ] = true;\n\treturn fn;\n}\n\n/**\n * Support testing using an element\n * @param {Function} fn Passed the created element and returns a boolean result\n */\nfunction assert( fn ) {\n\tvar el = document.createElement(\"fieldset\");\n\n\ttry {\n\t\treturn !!fn( el );\n\t} catch (e) {\n\t\treturn false;\n\t} finally {\n\t\t// Remove from its parent by default\n\t\tif ( el.parentNode ) {\n\t\t\tel.parentNode.removeChild( el );\n\t\t}\n\t\t// release memory in IE\n\t\tel = null;\n\t}\n}\n\n/**\n * Adds the same handler for all of the specified attrs\n * @param {String} attrs Pipe-separated list of attributes\n * @param {Function} handler The method that will be applied\n */\nfunction addHandle( attrs, handler ) {\n\tvar arr = attrs.split(\"|\"),\n\t\ti = arr.length;\n\n\twhile ( i-- ) {\n\t\tExpr.attrHandle[ arr[i] ] = handler;\n\t}\n}\n\n/**\n * Checks document order of two siblings\n * @param {Element} a\n * @param {Element} b\n * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b\n */\nfunction siblingCheck( a, b ) {\n\tvar cur = b && a,\n\t\tdiff = cur && a.nodeType === 1 && b.nodeType === 1 &&\n\t\t\ta.sourceIndex - b.sourceIndex;\n\n\t// Use IE sourceIndex if available on both nodes\n\tif ( diff ) {\n\t\treturn diff;\n\t}\n\n\t// Check if b follows a\n\tif ( cur ) {\n\t\twhile ( (cur = cur.nextSibling) ) {\n\t\t\tif ( cur === b ) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn a ? 1 : -1;\n}\n\n/**\n * Returns a function to use in pseudos for input types\n * @param {String} type\n */\nfunction createInputPseudo( type ) {\n\treturn function( elem ) {\n\t\tvar name = elem.nodeName.toLowerCase();\n\t\treturn name === \"input\" && elem.type === type;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for buttons\n * @param {String} type\n */\nfunction createButtonPseudo( type ) {\n\treturn function( elem ) {\n\t\tvar name = elem.nodeName.toLowerCase();\n\t\treturn (name === \"input\" || name === \"button\") && elem.type === type;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for :enabled/:disabled\n * @param {Boolean} disabled true for :disabled; false for :enabled\n */\nfunction createDisabledPseudo( disabled ) {\n\n\t// Known :disabled false positives: fieldset[disabled] > legend:nth-of-type(n+2) :can-disable\n\treturn function( elem ) {\n\n\t\t// Only certain elements can match :enabled or :disabled\n\t\t// https://html.spec.whatwg.org/multipage/scripting.html#selector-enabled\n\t\t// https://html.spec.whatwg.org/multipage/scripting.html#selector-disabled\n\t\tif ( \"form\" in elem ) {\n\n\t\t\t// Check for inherited disabledness on relevant non-disabled elements:\n\t\t\t// * listed form-associated elements in a disabled fieldset\n\t\t\t//   https://html.spec.whatwg.org/multipage/forms.html#category-listed\n\t\t\t//   https://html.spec.whatwg.org/multipage/forms.html#concept-fe-disabled\n\t\t\t// * option elements in a disabled optgroup\n\t\t\t//   https://html.spec.whatwg.org/multipage/forms.html#concept-option-disabled\n\t\t\t// All such elements have a \"form\" property.\n\t\t\tif ( elem.parentNode && elem.disabled === false ) {\n\n\t\t\t\t// Option elements defer to a parent optgroup if present\n\t\t\t\tif ( \"label\" in elem ) {\n\t\t\t\t\tif ( \"label\" in elem.parentNode ) {\n\t\t\t\t\t\treturn elem.parentNode.disabled === disabled;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn elem.disabled === disabled;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Support: IE 6 - 11\n\t\t\t\t// Use the isDisabled shortcut property to check for disabled fieldset ancestors\n\t\t\t\treturn elem.isDisabled === disabled ||\n\n\t\t\t\t\t// Where there is no isDisabled, check manually\n\t\t\t\t\t/* jshint -W018 */\n\t\t\t\t\telem.isDisabled !== !disabled &&\n\t\t\t\t\t\tdisabledAncestor( elem ) === disabled;\n\t\t\t}\n\n\t\t\treturn elem.disabled === disabled;\n\n\t\t// Try to winnow out elements that can't be disabled before trusting the disabled property.\n\t\t// Some victims get caught in our net (label, legend, menu, track), but it shouldn't\n\t\t// even exist on them, let alone have a boolean value.\n\t\t} else if ( \"label\" in elem ) {\n\t\t\treturn elem.disabled === disabled;\n\t\t}\n\n\t\t// Remaining elements are neither :enabled nor :disabled\n\t\treturn false;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for positionals\n * @param {Function} fn\n */\nfunction createPositionalPseudo( fn ) {\n\treturn markFunction(function( argument ) {\n\t\targument = +argument;\n\t\treturn markFunction(function( seed, matches ) {\n\t\t\tvar j,\n\t\t\t\tmatchIndexes = fn( [], seed.length, argument ),\n\t\t\t\ti = matchIndexes.length;\n\n\t\t\t// Match elements found at the specified indexes\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( seed[ (j = matchIndexes[i]) ] ) {\n\t\t\t\t\tseed[j] = !(matches[j] = seed[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Checks a node for validity as a Sizzle context\n * @param {Element|Object=} context\n * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value\n */\nfunction testContext( context ) {\n\treturn context && typeof context.getElementsByTagName !== \"undefined\" && context;\n}\n\n// Expose support vars for convenience\nsupport = Sizzle.support = {};\n\n/**\n * Detects XML nodes\n * @param {Element|Object} elem An element or a document\n * @returns {Boolean} True iff elem is a non-HTML XML node\n */\nisXML = Sizzle.isXML = function( elem ) {\n\t// documentElement is verified for cases where it doesn't yet exist\n\t// (such as loading iframes in IE - #4833)\n\tvar documentElement = elem && (elem.ownerDocument || elem).documentElement;\n\treturn documentElement ? documentElement.nodeName !== \"HTML\" : false;\n};\n\n/**\n * Sets document-related variables once based on the current document\n * @param {Element|Object} [doc] An element or document object to use to set the document\n * @returns {Object} Returns the current document\n */\nsetDocument = Sizzle.setDocument = function( node ) {\n\tvar hasCompare, subWindow,\n\t\tdoc = node ? node.ownerDocument || node : preferredDoc;\n\n\t// Return early if doc is invalid or already selected\n\tif ( doc === document || doc.nodeType !== 9 || !doc.documentElement ) {\n\t\treturn document;\n\t}\n\n\t// Update global variables\n\tdocument = doc;\n\tdocElem = document.documentElement;\n\tdocumentIsHTML = !isXML( document );\n\n\t// Support: IE 9-11, Edge\n\t// Accessing iframe documents after unload throws \"permission denied\" errors (jQuery #13936)\n\tif ( preferredDoc !== document &&\n\t\t(subWindow = document.defaultView) && subWindow.top !== subWindow ) {\n\n\t\t// Support: IE 11, Edge\n\t\tif ( subWindow.addEventListener ) {\n\t\t\tsubWindow.addEventListener( \"unload\", unloadHandler, false );\n\n\t\t// Support: IE 9 - 10 only\n\t\t} else if ( subWindow.attachEvent ) {\n\t\t\tsubWindow.attachEvent( \"onunload\", unloadHandler );\n\t\t}\n\t}\n\n\t/* Attributes\n\t---------------------------------------------------------------------- */\n\n\t// Support: IE<8\n\t// Verify that getAttribute really returns attributes and not properties\n\t// (excepting IE8 booleans)\n\tsupport.attributes = assert(function( el ) {\n\t\tel.className = \"i\";\n\t\treturn !el.getAttribute(\"className\");\n\t});\n\n\t/* getElement(s)By*\n\t---------------------------------------------------------------------- */\n\n\t// Check if getElementsByTagName(\"*\") returns only elements\n\tsupport.getElementsByTagName = assert(function( el ) {\n\t\tel.appendChild( document.createComment(\"\") );\n\t\treturn !el.getElementsByTagName(\"*\").length;\n\t});\n\n\t// Support: IE<9\n\tsupport.getElementsByClassName = rnative.test( document.getElementsByClassName );\n\n\t// Support: IE<10\n\t// Check if getElementById returns elements by name\n\t// The broken getElementById methods don't pick up programmatically-set names,\n\t// so use a roundabout getElementsByName test\n\tsupport.getById = assert(function( el ) {\n\t\tdocElem.appendChild( el ).id = expando;\n\t\treturn !document.getElementsByName || !document.getElementsByName( expando ).length;\n\t});\n\n\t// ID filter and find\n\tif ( support.getById ) {\n\t\tExpr.filter[\"ID\"] = function( id ) {\n\t\t\tvar attrId = id.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\treturn elem.getAttribute(\"id\") === attrId;\n\t\t\t};\n\t\t};\n\t\tExpr.find[\"ID\"] = function( id, context ) {\n\t\t\tif ( typeof context.getElementById !== \"undefined\" && documentIsHTML ) {\n\t\t\t\tvar elem = context.getElementById( id );\n\t\t\t\treturn elem ? [ elem ] : [];\n\t\t\t}\n\t\t};\n\t} else {\n\t\tExpr.filter[\"ID\"] =  function( id ) {\n\t\t\tvar attrId = id.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\tvar node = typeof elem.getAttributeNode !== \"undefined\" &&\n\t\t\t\t\telem.getAttributeNode(\"id\");\n\t\t\t\treturn node && node.value === attrId;\n\t\t\t};\n\t\t};\n\n\t\t// Support: IE 6 - 7 only\n\t\t// getElementById is not reliable as a find shortcut\n\t\tExpr.find[\"ID\"] = function( id, context ) {\n\t\t\tif ( typeof context.getElementById !== \"undefined\" && documentIsHTML ) {\n\t\t\t\tvar node, i, elems,\n\t\t\t\t\telem = context.getElementById( id );\n\n\t\t\t\tif ( elem ) {\n\n\t\t\t\t\t// Verify the id attribute\n\t\t\t\t\tnode = elem.getAttributeNode(\"id\");\n\t\t\t\t\tif ( node && node.value === id ) {\n\t\t\t\t\t\treturn [ elem ];\n\t\t\t\t\t}\n\n\t\t\t\t\t// Fall back on getElementsByName\n\t\t\t\t\telems = context.getElementsByName( id );\n\t\t\t\t\ti = 0;\n\t\t\t\t\twhile ( (elem = elems[i++]) ) {\n\t\t\t\t\t\tnode = elem.getAttributeNode(\"id\");\n\t\t\t\t\t\tif ( node && node.value === id ) {\n\t\t\t\t\t\t\treturn [ elem ];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn [];\n\t\t\t}\n\t\t};\n\t}\n\n\t// Tag\n\tExpr.find[\"TAG\"] = support.getElementsByTagName ?\n\t\tfunction( tag, context ) {\n\t\t\tif ( typeof context.getElementsByTagName !== \"undefined\" ) {\n\t\t\t\treturn context.getElementsByTagName( tag );\n\n\t\t\t// DocumentFragment nodes don't have gEBTN\n\t\t\t} else if ( support.qsa ) {\n\t\t\t\treturn context.querySelectorAll( tag );\n\t\t\t}\n\t\t} :\n\n\t\tfunction( tag, context ) {\n\t\t\tvar elem,\n\t\t\t\ttmp = [],\n\t\t\t\ti = 0,\n\t\t\t\t// By happy coincidence, a (broken) gEBTN appears on DocumentFragment nodes too\n\t\t\t\tresults = context.getElementsByTagName( tag );\n\n\t\t\t// Filter out possible comments\n\t\t\tif ( tag === \"*\" ) {\n\t\t\t\twhile ( (elem = results[i++]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\t\t\ttmp.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn tmp;\n\t\t\t}\n\t\t\treturn results;\n\t\t};\n\n\t// Class\n\tExpr.find[\"CLASS\"] = support.getElementsByClassName && function( className, context ) {\n\t\tif ( typeof context.getElementsByClassName !== \"undefined\" && documentIsHTML ) {\n\t\t\treturn context.getElementsByClassName( className );\n\t\t}\n\t};\n\n\t/* QSA/matchesSelector\n\t---------------------------------------------------------------------- */\n\n\t// QSA and matchesSelector support\n\n\t// matchesSelector(:active) reports false when true (IE9/Opera 11.5)\n\trbuggyMatches = [];\n\n\t// qSa(:focus) reports false when true (Chrome 21)\n\t// We allow this because of a bug in IE8/9 that throws an error\n\t// whenever `document.activeElement` is accessed on an iframe\n\t// So, we allow :focus to pass through QSA all the time to avoid the IE error\n\t// See https://bugs.jquery.com/ticket/13378\n\trbuggyQSA = [];\n\n\tif ( (support.qsa = rnative.test( document.querySelectorAll )) ) {\n\t\t// Build QSA regex\n\t\t// Regex strategy adopted from Diego Perini\n\t\tassert(function( el ) {\n\t\t\t// Select is set to empty string on purpose\n\t\t\t// This is to test IE's treatment of not explicitly\n\t\t\t// setting a boolean content attribute,\n\t\t\t// since its presence should be enough\n\t\t\t// https://bugs.jquery.com/ticket/12359\n\t\t\tdocElem.appendChild( el ).innerHTML = \"<a id='\" + expando + \"'></a>\" +\n\t\t\t\t\"<select id='\" + expando + \"-\\r\\\\' msallowcapture=''>\" +\n\t\t\t\t\"<option selected=''></option></select>\";\n\n\t\t\t// Support: IE8, Opera 11-12.16\n\t\t\t// Nothing should be selected when empty strings follow ^= or $= or *=\n\t\t\t// The test attribute must be unknown in Opera but \"safe\" for WinRT\n\t\t\t// https://msdn.microsoft.com/en-us/library/ie/hh465388.aspx#attribute_section\n\t\t\tif ( el.querySelectorAll(\"[msallowcapture^='']\").length ) {\n\t\t\t\trbuggyQSA.push( \"[*^$]=\" + whitespace + \"*(?:''|\\\"\\\")\" );\n\t\t\t}\n\n\t\t\t// Support: IE8\n\t\t\t// Boolean attributes and \"value\" are not treated correctly\n\t\t\tif ( !el.querySelectorAll(\"[selected]\").length ) {\n\t\t\t\trbuggyQSA.push( \"\\\\[\" + whitespace + \"*(?:value|\" + booleans + \")\" );\n\t\t\t}\n\n\t\t\t// Support: Chrome<29, Android<4.4, Safari<7.0+, iOS<7.0+, PhantomJS<1.9.8+\n\t\t\tif ( !el.querySelectorAll( \"[id~=\" + expando + \"-]\" ).length ) {\n\t\t\t\trbuggyQSA.push(\"~=\");\n\t\t\t}\n\n\t\t\t// Webkit/Opera - :checked should return selected option elements\n\t\t\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\n\t\t\t// IE8 throws error here and will not see later tests\n\t\t\tif ( !el.querySelectorAll(\":checked\").length ) {\n\t\t\t\trbuggyQSA.push(\":checked\");\n\t\t\t}\n\n\t\t\t// Support: Safari 8+, iOS 8+\n\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=136851\n\t\t\t// In-page `selector#id sibling-combinator selector` fails\n\t\t\tif ( !el.querySelectorAll( \"a#\" + expando + \"+*\" ).length ) {\n\t\t\t\trbuggyQSA.push(\".#.+[+~]\");\n\t\t\t}\n\t\t});\n\n\t\tassert(function( el ) {\n\t\t\tel.innerHTML = \"<a href='' disabled='disabled'></a>\" +\n\t\t\t\t\"<select disabled='disabled'><option/></select>\";\n\n\t\t\t// Support: Windows 8 Native Apps\n\t\t\t// The type and name attributes are restricted during .innerHTML assignment\n\t\t\tvar input = document.createElement(\"input\");\n\t\t\tinput.setAttribute( \"type\", \"hidden\" );\n\t\t\tel.appendChild( input ).setAttribute( \"name\", \"D\" );\n\n\t\t\t// Support: IE8\n\t\t\t// Enforce case-sensitivity of name attribute\n\t\t\tif ( el.querySelectorAll(\"[name=d]\").length ) {\n\t\t\t\trbuggyQSA.push( \"name\" + whitespace + \"*[*^$|!~]?=\" );\n\t\t\t}\n\n\t\t\t// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)\n\t\t\t// IE8 throws error here and will not see later tests\n\t\t\tif ( el.querySelectorAll(\":enabled\").length !== 2 ) {\n\t\t\t\trbuggyQSA.push( \":enabled\", \":disabled\" );\n\t\t\t}\n\n\t\t\t// Support: IE9-11+\n\t\t\t// IE's :disabled selector does not pick up the children of disabled fieldsets\n\t\t\tdocElem.appendChild( el ).disabled = true;\n\t\t\tif ( el.querySelectorAll(\":disabled\").length !== 2 ) {\n\t\t\t\trbuggyQSA.push( \":enabled\", \":disabled\" );\n\t\t\t}\n\n\t\t\t// Opera 10-11 does not throw on post-comma invalid pseudos\n\t\t\tel.querySelectorAll(\"*,:x\");\n\t\t\trbuggyQSA.push(\",.*:\");\n\t\t});\n\t}\n\n\tif ( (support.matchesSelector = rnative.test( (matches = docElem.matches ||\n\t\tdocElem.webkitMatchesSelector ||\n\t\tdocElem.mozMatchesSelector ||\n\t\tdocElem.oMatchesSelector ||\n\t\tdocElem.msMatchesSelector) )) ) {\n\n\t\tassert(function( el ) {\n\t\t\t// Check to see if it's possible to do matchesSelector\n\t\t\t// on a disconnected node (IE 9)\n\t\t\tsupport.disconnectedMatch = matches.call( el, \"*\" );\n\n\t\t\t// This should fail with an exception\n\t\t\t// Gecko does not error, returns false instead\n\t\t\tmatches.call( el, \"[s!='']:x\" );\n\t\t\trbuggyMatches.push( \"!=\", pseudos );\n\t\t});\n\t}\n\n\trbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join(\"|\") );\n\trbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join(\"|\") );\n\n\t/* Contains\n\t---------------------------------------------------------------------- */\n\thasCompare = rnative.test( docElem.compareDocumentPosition );\n\n\t// Element contains another\n\t// Purposefully self-exclusive\n\t// As in, an element does not contain itself\n\tcontains = hasCompare || rnative.test( docElem.contains ) ?\n\t\tfunction( a, b ) {\n\t\t\tvar adown = a.nodeType === 9 ? a.documentElement : a,\n\t\t\t\tbup = b && b.parentNode;\n\t\t\treturn a === bup || !!( bup && bup.nodeType === 1 && (\n\t\t\t\tadown.contains ?\n\t\t\t\t\tadown.contains( bup ) :\n\t\t\t\t\ta.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16\n\t\t\t));\n\t\t} :\n\t\tfunction( a, b ) {\n\t\t\tif ( b ) {\n\t\t\t\twhile ( (b = b.parentNode) ) {\n\t\t\t\t\tif ( b === a ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t/* Sorting\n\t---------------------------------------------------------------------- */\n\n\t// Document order sorting\n\tsortOrder = hasCompare ?\n\tfunction( a, b ) {\n\n\t\t// Flag for duplicate removal\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t\treturn 0;\n\t\t}\n\n\t\t// Sort on method existence if only one input has compareDocumentPosition\n\t\tvar compare = !a.compareDocumentPosition - !b.compareDocumentPosition;\n\t\tif ( compare ) {\n\t\t\treturn compare;\n\t\t}\n\n\t\t// Calculate position if both inputs belong to the same document\n\t\tcompare = ( a.ownerDocument || a ) === ( b.ownerDocument || b ) ?\n\t\t\ta.compareDocumentPosition( b ) :\n\n\t\t\t// Otherwise we know they are disconnected\n\t\t\t1;\n\n\t\t// Disconnected nodes\n\t\tif ( compare & 1 ||\n\t\t\t(!support.sortDetached && b.compareDocumentPosition( a ) === compare) ) {\n\n\t\t\t// Choose the first element that is related to our preferred document\n\t\t\tif ( a === document || a.ownerDocument === preferredDoc && contains(preferredDoc, a) ) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\tif ( b === document || b.ownerDocument === preferredDoc && contains(preferredDoc, b) ) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\t// Maintain original order\n\t\t\treturn sortInput ?\n\t\t\t\t( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :\n\t\t\t\t0;\n\t\t}\n\n\t\treturn compare & 4 ? -1 : 1;\n\t} :\n\tfunction( a, b ) {\n\t\t// Exit early if the nodes are identical\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t\treturn 0;\n\t\t}\n\n\t\tvar cur,\n\t\t\ti = 0,\n\t\t\taup = a.parentNode,\n\t\t\tbup = b.parentNode,\n\t\t\tap = [ a ],\n\t\t\tbp = [ b ];\n\n\t\t// Parentless nodes are either documents or disconnected\n\t\tif ( !aup || !bup ) {\n\t\t\treturn a === document ? -1 :\n\t\t\t\tb === document ? 1 :\n\t\t\t\taup ? -1 :\n\t\t\t\tbup ? 1 :\n\t\t\t\tsortInput ?\n\t\t\t\t( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :\n\t\t\t\t0;\n\n\t\t// If the nodes are siblings, we can do a quick check\n\t\t} else if ( aup === bup ) {\n\t\t\treturn siblingCheck( a, b );\n\t\t}\n\n\t\t// Otherwise we need full lists of their ancestors for comparison\n\t\tcur = a;\n\t\twhile ( (cur = cur.parentNode) ) {\n\t\t\tap.unshift( cur );\n\t\t}\n\t\tcur = b;\n\t\twhile ( (cur = cur.parentNode) ) {\n\t\t\tbp.unshift( cur );\n\t\t}\n\n\t\t// Walk down the tree looking for a discrepancy\n\t\twhile ( ap[i] === bp[i] ) {\n\t\t\ti++;\n\t\t}\n\n\t\treturn i ?\n\t\t\t// Do a sibling check if the nodes have a common ancestor\n\t\t\tsiblingCheck( ap[i], bp[i] ) :\n\n\t\t\t// Otherwise nodes in our document sort first\n\t\t\tap[i] === preferredDoc ? -1 :\n\t\t\tbp[i] === preferredDoc ? 1 :\n\t\t\t0;\n\t};\n\n\treturn document;\n};\n\nSizzle.matches = function( expr, elements ) {\n\treturn Sizzle( expr, null, null, elements );\n};\n\nSizzle.matchesSelector = function( elem, expr ) {\n\t// Set document vars if needed\n\tif ( ( elem.ownerDocument || elem ) !== document ) {\n\t\tsetDocument( elem );\n\t}\n\n\t// Make sure that attribute selectors are quoted\n\texpr = expr.replace( rattributeQuotes, \"='$1']\" );\n\n\tif ( support.matchesSelector && documentIsHTML &&\n\t\t!compilerCache[ expr + \" \" ] &&\n\t\t( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&\n\t\t( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {\n\n\t\ttry {\n\t\t\tvar ret = matches.call( elem, expr );\n\n\t\t\t// IE 9's matchesSelector returns false on disconnected nodes\n\t\t\tif ( ret || support.disconnectedMatch ||\n\t\t\t\t\t// As well, disconnected nodes are said to be in a document\n\t\t\t\t\t// fragment in IE 9\n\t\t\t\t\telem.document && elem.document.nodeType !== 11 ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t} catch (e) {}\n\t}\n\n\treturn Sizzle( expr, document, null, [ elem ] ).length > 0;\n};\n\nSizzle.contains = function( context, elem ) {\n\t// Set document vars if needed\n\tif ( ( context.ownerDocument || context ) !== document ) {\n\t\tsetDocument( context );\n\t}\n\treturn contains( context, elem );\n};\n\nSizzle.attr = function( elem, name ) {\n\t// Set document vars if needed\n\tif ( ( elem.ownerDocument || elem ) !== document ) {\n\t\tsetDocument( elem );\n\t}\n\n\tvar fn = Expr.attrHandle[ name.toLowerCase() ],\n\t\t// Don't get fooled by Object.prototype properties (jQuery #13807)\n\t\tval = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?\n\t\t\tfn( elem, name, !documentIsHTML ) :\n\t\t\tundefined;\n\n\treturn val !== undefined ?\n\t\tval :\n\t\tsupport.attributes || !documentIsHTML ?\n\t\t\telem.getAttribute( name ) :\n\t\t\t(val = elem.getAttributeNode(name)) && val.specified ?\n\t\t\t\tval.value :\n\t\t\t\tnull;\n};\n\nSizzle.escape = function( sel ) {\n\treturn (sel + \"\").replace( rcssescape, fcssescape );\n};\n\nSizzle.error = function( msg ) {\n\tthrow new Error( \"Syntax error, unrecognized expression: \" + msg );\n};\n\n/**\n * Document sorting and removing duplicates\n * @param {ArrayLike} results\n */\nSizzle.uniqueSort = function( results ) {\n\tvar elem,\n\t\tduplicates = [],\n\t\tj = 0,\n\t\ti = 0;\n\n\t// Unless we *know* we can detect duplicates, assume their presence\n\thasDuplicate = !support.detectDuplicates;\n\tsortInput = !support.sortStable && results.slice( 0 );\n\tresults.sort( sortOrder );\n\n\tif ( hasDuplicate ) {\n\t\twhile ( (elem = results[i++]) ) {\n\t\t\tif ( elem === results[ i ] ) {\n\t\t\t\tj = duplicates.push( i );\n\t\t\t}\n\t\t}\n\t\twhile ( j-- ) {\n\t\t\tresults.splice( duplicates[ j ], 1 );\n\t\t}\n\t}\n\n\t// Clear input after sorting to release objects\n\t// See https://github.com/jquery/sizzle/pull/225\n\tsortInput = null;\n\n\treturn results;\n};\n\n/**\n * Utility function for retrieving the text value of an array of DOM nodes\n * @param {Array|Element} elem\n */\ngetText = Sizzle.getText = function( elem ) {\n\tvar node,\n\t\tret = \"\",\n\t\ti = 0,\n\t\tnodeType = elem.nodeType;\n\n\tif ( !nodeType ) {\n\t\t// If no nodeType, this is expected to be an array\n\t\twhile ( (node = elem[i++]) ) {\n\t\t\t// Do not traverse comment nodes\n\t\t\tret += getText( node );\n\t\t}\n\t} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {\n\t\t// Use textContent for elements\n\t\t// innerText usage removed for consistency of new lines (jQuery #11153)\n\t\tif ( typeof elem.textContent === \"string\" ) {\n\t\t\treturn elem.textContent;\n\t\t} else {\n\t\t\t// Traverse its children\n\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n\t\t\t\tret += getText( elem );\n\t\t\t}\n\t\t}\n\t} else if ( nodeType === 3 || nodeType === 4 ) {\n\t\treturn elem.nodeValue;\n\t}\n\t// Do not include comment or processing instruction nodes\n\n\treturn ret;\n};\n\nExpr = Sizzle.selectors = {\n\n\t// Can be adjusted by the user\n\tcacheLength: 50,\n\n\tcreatePseudo: markFunction,\n\n\tmatch: matchExpr,\n\n\tattrHandle: {},\n\n\tfind: {},\n\n\trelative: {\n\t\t\">\": { dir: \"parentNode\", first: true },\n\t\t\" \": { dir: \"parentNode\" },\n\t\t\"+\": { dir: \"previousSibling\", first: true },\n\t\t\"~\": { dir: \"previousSibling\" }\n\t},\n\n\tpreFilter: {\n\t\t\"ATTR\": function( match ) {\n\t\t\tmatch[1] = match[1].replace( runescape, funescape );\n\n\t\t\t// Move the given value to match[3] whether quoted or unquoted\n\t\t\tmatch[3] = ( match[3] || match[4] || match[5] || \"\" ).replace( runescape, funescape );\n\n\t\t\tif ( match[2] === \"~=\" ) {\n\t\t\t\tmatch[3] = \" \" + match[3] + \" \";\n\t\t\t}\n\n\t\t\treturn match.slice( 0, 4 );\n\t\t},\n\n\t\t\"CHILD\": function( match ) {\n\t\t\t/* matches from matchExpr[\"CHILD\"]\n\t\t\t\t1 type (only|nth|...)\n\t\t\t\t2 what (child|of-type)\n\t\t\t\t3 argument (even|odd|\\d*|\\d*n([+-]\\d+)?|...)\n\t\t\t\t4 xn-component of xn+y argument ([+-]?\\d*n|)\n\t\t\t\t5 sign of xn-component\n\t\t\t\t6 x of xn-component\n\t\t\t\t7 sign of y-component\n\t\t\t\t8 y of y-component\n\t\t\t*/\n\t\t\tmatch[1] = match[1].toLowerCase();\n\n\t\t\tif ( match[1].slice( 0, 3 ) === \"nth\" ) {\n\t\t\t\t// nth-* requires argument\n\t\t\t\tif ( !match[3] ) {\n\t\t\t\t\tSizzle.error( match[0] );\n\t\t\t\t}\n\n\t\t\t\t// numeric x and y parameters for Expr.filter.CHILD\n\t\t\t\t// remember that false/true cast respectively to 0/1\n\t\t\t\tmatch[4] = +( match[4] ? match[5] + (match[6] || 1) : 2 * ( match[3] === \"even\" || match[3] === \"odd\" ) );\n\t\t\t\tmatch[5] = +( ( match[7] + match[8] ) || match[3] === \"odd\" );\n\n\t\t\t// other types prohibit arguments\n\t\t\t} else if ( match[3] ) {\n\t\t\t\tSizzle.error( match[0] );\n\t\t\t}\n\n\t\t\treturn match;\n\t\t},\n\n\t\t\"PSEUDO\": function( match ) {\n\t\t\tvar excess,\n\t\t\t\tunquoted = !match[6] && match[2];\n\n\t\t\tif ( matchExpr[\"CHILD\"].test( match[0] ) ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\t// Accept quoted arguments as-is\n\t\t\tif ( match[3] ) {\n\t\t\t\tmatch[2] = match[4] || match[5] || \"\";\n\n\t\t\t// Strip excess characters from unquoted arguments\n\t\t\t} else if ( unquoted && rpseudo.test( unquoted ) &&\n\t\t\t\t// Get excess from tokenize (recursively)\n\t\t\t\t(excess = tokenize( unquoted, true )) &&\n\t\t\t\t// advance to the next closing parenthesis\n\t\t\t\t(excess = unquoted.indexOf( \")\", unquoted.length - excess ) - unquoted.length) ) {\n\n\t\t\t\t// excess is a negative index\n\t\t\t\tmatch[0] = match[0].slice( 0, excess );\n\t\t\t\tmatch[2] = unquoted.slice( 0, excess );\n\t\t\t}\n\n\t\t\t// Return only captures needed by the pseudo filter method (type and argument)\n\t\t\treturn match.slice( 0, 3 );\n\t\t}\n\t},\n\n\tfilter: {\n\n\t\t\"TAG\": function( nodeNameSelector ) {\n\t\t\tvar nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();\n\t\t\treturn nodeNameSelector === \"*\" ?\n\t\t\t\tfunction() { return true; } :\n\t\t\t\tfunction( elem ) {\n\t\t\t\t\treturn elem.nodeName && elem.nodeName.toLowerCase() === nodeName;\n\t\t\t\t};\n\t\t},\n\n\t\t\"CLASS\": function( className ) {\n\t\t\tvar pattern = classCache[ className + \" \" ];\n\n\t\t\treturn pattern ||\n\t\t\t\t(pattern = new RegExp( \"(^|\" + whitespace + \")\" + className + \"(\" + whitespace + \"|$)\" )) &&\n\t\t\t\tclassCache( className, function( elem ) {\n\t\t\t\t\treturn pattern.test( typeof elem.className === \"string\" && elem.className || typeof elem.getAttribute !== \"undefined\" && elem.getAttribute(\"class\") || \"\" );\n\t\t\t\t});\n\t\t},\n\n\t\t\"ATTR\": function( name, operator, check ) {\n\t\t\treturn function( elem ) {\n\t\t\t\tvar result = Sizzle.attr( elem, name );\n\n\t\t\t\tif ( result == null ) {\n\t\t\t\t\treturn operator === \"!=\";\n\t\t\t\t}\n\t\t\t\tif ( !operator ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tresult += \"\";\n\n\t\t\t\treturn operator === \"=\" ? result === check :\n\t\t\t\t\toperator === \"!=\" ? result !== check :\n\t\t\t\t\toperator === \"^=\" ? check && result.indexOf( check ) === 0 :\n\t\t\t\t\toperator === \"*=\" ? check && result.indexOf( check ) > -1 :\n\t\t\t\t\toperator === \"$=\" ? check && result.slice( -check.length ) === check :\n\t\t\t\t\toperator === \"~=\" ? ( \" \" + result.replace( rwhitespace, \" \" ) + \" \" ).indexOf( check ) > -1 :\n\t\t\t\t\toperator === \"|=\" ? result === check || result.slice( 0, check.length + 1 ) === check + \"-\" :\n\t\t\t\t\tfalse;\n\t\t\t};\n\t\t},\n\n\t\t\"CHILD\": function( type, what, argument, first, last ) {\n\t\t\tvar simple = type.slice( 0, 3 ) !== \"nth\",\n\t\t\t\tforward = type.slice( -4 ) !== \"last\",\n\t\t\t\tofType = what === \"of-type\";\n\n\t\t\treturn first === 1 && last === 0 ?\n\n\t\t\t\t// Shortcut for :nth-*(n)\n\t\t\t\tfunction( elem ) {\n\t\t\t\t\treturn !!elem.parentNode;\n\t\t\t\t} :\n\n\t\t\t\tfunction( elem, context, xml ) {\n\t\t\t\t\tvar cache, uniqueCache, outerCache, node, nodeIndex, start,\n\t\t\t\t\t\tdir = simple !== forward ? \"nextSibling\" : \"previousSibling\",\n\t\t\t\t\t\tparent = elem.parentNode,\n\t\t\t\t\t\tname = ofType && elem.nodeName.toLowerCase(),\n\t\t\t\t\t\tuseCache = !xml && !ofType,\n\t\t\t\t\t\tdiff = false;\n\n\t\t\t\t\tif ( parent ) {\n\n\t\t\t\t\t\t// :(first|last|only)-(child|of-type)\n\t\t\t\t\t\tif ( simple ) {\n\t\t\t\t\t\t\twhile ( dir ) {\n\t\t\t\t\t\t\t\tnode = elem;\n\t\t\t\t\t\t\t\twhile ( (node = node[ dir ]) ) {\n\t\t\t\t\t\t\t\t\tif ( ofType ?\n\t\t\t\t\t\t\t\t\t\tnode.nodeName.toLowerCase() === name :\n\t\t\t\t\t\t\t\t\t\tnode.nodeType === 1 ) {\n\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// Reverse direction for :only-* (if we haven't yet done so)\n\t\t\t\t\t\t\t\tstart = dir = type === \"only\" && !start && \"nextSibling\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstart = [ forward ? parent.firstChild : parent.lastChild ];\n\n\t\t\t\t\t\t// non-xml :nth-child(...) stores cache data on `parent`\n\t\t\t\t\t\tif ( forward && useCache ) {\n\n\t\t\t\t\t\t\t// Seek `elem` from a previously-cached index\n\n\t\t\t\t\t\t\t// ...in a gzip-friendly way\n\t\t\t\t\t\t\tnode = parent;\n\t\t\t\t\t\t\touterCache = node[ expando ] || (node[ expando ] = {});\n\n\t\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\t\tuniqueCache = outerCache[ node.uniqueID ] ||\n\t\t\t\t\t\t\t\t(outerCache[ node.uniqueID ] = {});\n\n\t\t\t\t\t\t\tcache = uniqueCache[ type ] || [];\n\t\t\t\t\t\t\tnodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];\n\t\t\t\t\t\t\tdiff = nodeIndex && cache[ 2 ];\n\t\t\t\t\t\t\tnode = nodeIndex && parent.childNodes[ nodeIndex ];\n\n\t\t\t\t\t\t\twhile ( (node = ++nodeIndex && node && node[ dir ] ||\n\n\t\t\t\t\t\t\t\t// Fallback to seeking `elem` from the start\n\t\t\t\t\t\t\t\t(diff = nodeIndex = 0) || start.pop()) ) {\n\n\t\t\t\t\t\t\t\t// When found, cache indexes on `parent` and break\n\t\t\t\t\t\t\t\tif ( node.nodeType === 1 && ++diff && node === elem ) {\n\t\t\t\t\t\t\t\t\tuniqueCache[ type ] = [ dirruns, nodeIndex, diff ];\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Use previously-cached element index if available\n\t\t\t\t\t\t\tif ( useCache ) {\n\t\t\t\t\t\t\t\t// ...in a gzip-friendly way\n\t\t\t\t\t\t\t\tnode = elem;\n\t\t\t\t\t\t\t\touterCache = node[ expando ] || (node[ expando ] = {});\n\n\t\t\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\t\t\tuniqueCache = outerCache[ node.uniqueID ] ||\n\t\t\t\t\t\t\t\t\t(outerCache[ node.uniqueID ] = {});\n\n\t\t\t\t\t\t\t\tcache = uniqueCache[ type ] || [];\n\t\t\t\t\t\t\t\tnodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];\n\t\t\t\t\t\t\t\tdiff = nodeIndex;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// xml :nth-child(...)\n\t\t\t\t\t\t\t// or :nth-last-child(...) or :nth(-last)?-of-type(...)\n\t\t\t\t\t\t\tif ( diff === false ) {\n\t\t\t\t\t\t\t\t// Use the same loop as above to seek `elem` from the start\n\t\t\t\t\t\t\t\twhile ( (node = ++nodeIndex && node && node[ dir ] ||\n\t\t\t\t\t\t\t\t\t(diff = nodeIndex = 0) || start.pop()) ) {\n\n\t\t\t\t\t\t\t\t\tif ( ( ofType ?\n\t\t\t\t\t\t\t\t\t\tnode.nodeName.toLowerCase() === name :\n\t\t\t\t\t\t\t\t\t\tnode.nodeType === 1 ) &&\n\t\t\t\t\t\t\t\t\t\t++diff ) {\n\n\t\t\t\t\t\t\t\t\t\t// Cache the index of each encountered element\n\t\t\t\t\t\t\t\t\t\tif ( useCache ) {\n\t\t\t\t\t\t\t\t\t\t\touterCache = node[ expando ] || (node[ expando ] = {});\n\n\t\t\t\t\t\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\t\t\t\t\t\tuniqueCache = outerCache[ node.uniqueID ] ||\n\t\t\t\t\t\t\t\t\t\t\t\t(outerCache[ node.uniqueID ] = {});\n\n\t\t\t\t\t\t\t\t\t\t\tuniqueCache[ type ] = [ dirruns, diff ];\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tif ( node === elem ) {\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Incorporate the offset, then check against cycle size\n\t\t\t\t\t\tdiff -= last;\n\t\t\t\t\t\treturn diff === first || ( diff % first === 0 && diff / first >= 0 );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t},\n\n\t\t\"PSEUDO\": function( pseudo, argument ) {\n\t\t\t// pseudo-class names are case-insensitive\n\t\t\t// http://www.w3.org/TR/selectors/#pseudo-classes\n\t\t\t// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters\n\t\t\t// Remember that setFilters inherits from pseudos\n\t\t\tvar args,\n\t\t\t\tfn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||\n\t\t\t\t\tSizzle.error( \"unsupported pseudo: \" + pseudo );\n\n\t\t\t// The user may use createPseudo to indicate that\n\t\t\t// arguments are needed to create the filter function\n\t\t\t// just as Sizzle does\n\t\t\tif ( fn[ expando ] ) {\n\t\t\t\treturn fn( argument );\n\t\t\t}\n\n\t\t\t// But maintain support for old signatures\n\t\t\tif ( fn.length > 1 ) {\n\t\t\t\targs = [ pseudo, pseudo, \"\", argument ];\n\t\t\t\treturn Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?\n\t\t\t\t\tmarkFunction(function( seed, matches ) {\n\t\t\t\t\t\tvar idx,\n\t\t\t\t\t\t\tmatched = fn( seed, argument ),\n\t\t\t\t\t\t\ti = matched.length;\n\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\tidx = indexOf( seed, matched[i] );\n\t\t\t\t\t\t\tseed[ idx ] = !( matches[ idx ] = matched[i] );\n\t\t\t\t\t\t}\n\t\t\t\t\t}) :\n\t\t\t\t\tfunction( elem ) {\n\t\t\t\t\t\treturn fn( elem, 0, args );\n\t\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn fn;\n\t\t}\n\t},\n\n\tpseudos: {\n\t\t// Potentially complex pseudos\n\t\t\"not\": markFunction(function( selector ) {\n\t\t\t// Trim the selector passed to compile\n\t\t\t// to avoid treating leading and trailing\n\t\t\t// spaces as combinators\n\t\t\tvar input = [],\n\t\t\t\tresults = [],\n\t\t\t\tmatcher = compile( selector.replace( rtrim, \"$1\" ) );\n\n\t\t\treturn matcher[ expando ] ?\n\t\t\t\tmarkFunction(function( seed, matches, context, xml ) {\n\t\t\t\t\tvar elem,\n\t\t\t\t\t\tunmatched = matcher( seed, null, xml, [] ),\n\t\t\t\t\t\ti = seed.length;\n\n\t\t\t\t\t// Match elements unmatched by `matcher`\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tif ( (elem = unmatched[i]) ) {\n\t\t\t\t\t\t\tseed[i] = !(matches[i] = elem);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}) :\n\t\t\t\tfunction( elem, context, xml ) {\n\t\t\t\t\tinput[0] = elem;\n\t\t\t\t\tmatcher( input, null, xml, results );\n\t\t\t\t\t// Don't keep the element (issue #299)\n\t\t\t\t\tinput[0] = null;\n\t\t\t\t\treturn !results.pop();\n\t\t\t\t};\n\t\t}),\n\n\t\t\"has\": markFunction(function( selector ) {\n\t\t\treturn function( elem ) {\n\t\t\t\treturn Sizzle( selector, elem ).length > 0;\n\t\t\t};\n\t\t}),\n\n\t\t\"contains\": markFunction(function( text ) {\n\t\t\ttext = text.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\treturn ( elem.textContent || elem.innerText || getText( elem ) ).indexOf( text ) > -1;\n\t\t\t};\n\t\t}),\n\n\t\t// \"Whether an element is represented by a :lang() selector\n\t\t// is based solely on the element's language value\n\t\t// being equal to the identifier C,\n\t\t// or beginning with the identifier C immediately followed by \"-\".\n\t\t// The matching of C against the element's language value is performed case-insensitively.\n\t\t// The identifier C does not have to be a valid language name.\"\n\t\t// http://www.w3.org/TR/selectors/#lang-pseudo\n\t\t\"lang\": markFunction( function( lang ) {\n\t\t\t// lang value must be a valid identifier\n\t\t\tif ( !ridentifier.test(lang || \"\") ) {\n\t\t\t\tSizzle.error( \"unsupported lang: \" + lang );\n\t\t\t}\n\t\t\tlang = lang.replace( runescape, funescape ).toLowerCase();\n\t\t\treturn function( elem ) {\n\t\t\t\tvar elemLang;\n\t\t\t\tdo {\n\t\t\t\t\tif ( (elemLang = documentIsHTML ?\n\t\t\t\t\t\telem.lang :\n\t\t\t\t\t\telem.getAttribute(\"xml:lang\") || elem.getAttribute(\"lang\")) ) {\n\n\t\t\t\t\t\telemLang = elemLang.toLowerCase();\n\t\t\t\t\t\treturn elemLang === lang || elemLang.indexOf( lang + \"-\" ) === 0;\n\t\t\t\t\t}\n\t\t\t\t} while ( (elem = elem.parentNode) && elem.nodeType === 1 );\n\t\t\t\treturn false;\n\t\t\t};\n\t\t}),\n\n\t\t// Miscellaneous\n\t\t\"target\": function( elem ) {\n\t\t\tvar hash = window.location && window.location.hash;\n\t\t\treturn hash && hash.slice( 1 ) === elem.id;\n\t\t},\n\n\t\t\"root\": function( elem ) {\n\t\t\treturn elem === docElem;\n\t\t},\n\n\t\t\"focus\": function( elem ) {\n\t\t\treturn elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);\n\t\t},\n\n\t\t// Boolean properties\n\t\t\"enabled\": createDisabledPseudo( false ),\n\t\t\"disabled\": createDisabledPseudo( true ),\n\n\t\t\"checked\": function( elem ) {\n\t\t\t// In CSS3, :checked should return both checked and selected elements\n\t\t\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\n\t\t\tvar nodeName = elem.nodeName.toLowerCase();\n\t\t\treturn (nodeName === \"input\" && !!elem.checked) || (nodeName === \"option\" && !!elem.selected);\n\t\t},\n\n\t\t\"selected\": function( elem ) {\n\t\t\t// Accessing this property makes selected-by-default\n\t\t\t// options in Safari work properly\n\t\t\tif ( elem.parentNode ) {\n\t\t\t\telem.parentNode.selectedIndex;\n\t\t\t}\n\n\t\t\treturn elem.selected === true;\n\t\t},\n\n\t\t// Contents\n\t\t\"empty\": function( elem ) {\n\t\t\t// http://www.w3.org/TR/selectors/#empty-pseudo\n\t\t\t// :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),\n\t\t\t//   but not by others (comment: 8; processing instruction: 7; etc.)\n\t\t\t// nodeType < 6 works because attributes (2) do not appear as children\n\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n\t\t\t\tif ( elem.nodeType < 6 ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\n\t\t\"parent\": function( elem ) {\n\t\t\treturn !Expr.pseudos[\"empty\"]( elem );\n\t\t},\n\n\t\t// Element/input types\n\t\t\"header\": function( elem ) {\n\t\t\treturn rheader.test( elem.nodeName );\n\t\t},\n\n\t\t\"input\": function( elem ) {\n\t\t\treturn rinputs.test( elem.nodeName );\n\t\t},\n\n\t\t\"button\": function( elem ) {\n\t\t\tvar name = elem.nodeName.toLowerCase();\n\t\t\treturn name === \"input\" && elem.type === \"button\" || name === \"button\";\n\t\t},\n\n\t\t\"text\": function( elem ) {\n\t\t\tvar attr;\n\t\t\treturn elem.nodeName.toLowerCase() === \"input\" &&\n\t\t\t\telem.type === \"text\" &&\n\n\t\t\t\t// Support: IE<8\n\t\t\t\t// New HTML5 attribute values (e.g., \"search\") appear with elem.type === \"text\"\n\t\t\t\t( (attr = elem.getAttribute(\"type\")) == null || attr.toLowerCase() === \"text\" );\n\t\t},\n\n\t\t// Position-in-collection\n\t\t\"first\": createPositionalPseudo(function() {\n\t\t\treturn [ 0 ];\n\t\t}),\n\n\t\t\"last\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\treturn [ length - 1 ];\n\t\t}),\n\n\t\t\"eq\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\treturn [ argument < 0 ? argument + length : argument ];\n\t\t}),\n\n\t\t\"even\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\tvar i = 0;\n\t\t\tfor ( ; i < length; i += 2 ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"odd\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\tvar i = 1;\n\t\t\tfor ( ; i < length; i += 2 ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"lt\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\tvar i = argument < 0 ? argument + length : argument;\n\t\t\tfor ( ; --i >= 0; ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"gt\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\tvar i = argument < 0 ? argument + length : argument;\n\t\t\tfor ( ; ++i < length; ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t})\n\t}\n};\n\nExpr.pseudos[\"nth\"] = Expr.pseudos[\"eq\"];\n\n// Add button/input type pseudos\nfor ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {\n\tExpr.pseudos[ i ] = createInputPseudo( i );\n}\nfor ( i in { submit: true, reset: true } ) {\n\tExpr.pseudos[ i ] = createButtonPseudo( i );\n}\n\n// Easy API for creating new setFilters\nfunction setFilters() {}\nsetFilters.prototype = Expr.filters = Expr.pseudos;\nExpr.setFilters = new setFilters();\n\ntokenize = Sizzle.tokenize = function( selector, parseOnly ) {\n\tvar matched, match, tokens, type,\n\t\tsoFar, groups, preFilters,\n\t\tcached = tokenCache[ selector + \" \" ];\n\n\tif ( cached ) {\n\t\treturn parseOnly ? 0 : cached.slice( 0 );\n\t}\n\n\tsoFar = selector;\n\tgroups = [];\n\tpreFilters = Expr.preFilter;\n\n\twhile ( soFar ) {\n\n\t\t// Comma and first run\n\t\tif ( !matched || (match = rcomma.exec( soFar )) ) {\n\t\t\tif ( match ) {\n\t\t\t\t// Don't consume trailing commas as valid\n\t\t\t\tsoFar = soFar.slice( match[0].length ) || soFar;\n\t\t\t}\n\t\t\tgroups.push( (tokens = []) );\n\t\t}\n\n\t\tmatched = false;\n\n\t\t// Combinators\n\t\tif ( (match = rcombinators.exec( soFar )) ) {\n\t\t\tmatched = match.shift();\n\t\t\ttokens.push({\n\t\t\t\tvalue: matched,\n\t\t\t\t// Cast descendant combinators to space\n\t\t\t\ttype: match[0].replace( rtrim, \" \" )\n\t\t\t});\n\t\t\tsoFar = soFar.slice( matched.length );\n\t\t}\n\n\t\t// Filters\n\t\tfor ( type in Expr.filter ) {\n\t\t\tif ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||\n\t\t\t\t(match = preFilters[ type ]( match ))) ) {\n\t\t\t\tmatched = match.shift();\n\t\t\t\ttokens.push({\n\t\t\t\t\tvalue: matched,\n\t\t\t\t\ttype: type,\n\t\t\t\t\tmatches: match\n\t\t\t\t});\n\t\t\t\tsoFar = soFar.slice( matched.length );\n\t\t\t}\n\t\t}\n\n\t\tif ( !matched ) {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\t// Return the length of the invalid excess\n\t// if we're just parsing\n\t// Otherwise, throw an error or return tokens\n\treturn parseOnly ?\n\t\tsoFar.length :\n\t\tsoFar ?\n\t\t\tSizzle.error( selector ) :\n\t\t\t// Cache the tokens\n\t\t\ttokenCache( selector, groups ).slice( 0 );\n};\n\nfunction toSelector( tokens ) {\n\tvar i = 0,\n\t\tlen = tokens.length,\n\t\tselector = \"\";\n\tfor ( ; i < len; i++ ) {\n\t\tselector += tokens[i].value;\n\t}\n\treturn selector;\n}\n\nfunction addCombinator( matcher, combinator, base ) {\n\tvar dir = combinator.dir,\n\t\tskip = combinator.next,\n\t\tkey = skip || dir,\n\t\tcheckNonElements = base && key === \"parentNode\",\n\t\tdoneName = done++;\n\n\treturn combinator.first ?\n\t\t// Check against closest ancestor/preceding element\n\t\tfunction( elem, context, xml ) {\n\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\treturn matcher( elem, context, xml );\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t} :\n\n\t\t// Check against all ancestor/preceding elements\n\t\tfunction( elem, context, xml ) {\n\t\t\tvar oldCache, uniqueCache, outerCache,\n\t\t\t\tnewCache = [ dirruns, doneName ];\n\n\t\t\t// We can't set arbitrary data on XML nodes, so they don't benefit from combinator caching\n\t\t\tif ( xml ) {\n\t\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\t\tif ( matcher( elem, context, xml ) ) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\t\touterCache = elem[ expando ] || (elem[ expando ] = {});\n\n\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\tuniqueCache = outerCache[ elem.uniqueID ] || (outerCache[ elem.uniqueID ] = {});\n\n\t\t\t\t\t\tif ( skip && skip === elem.nodeName.toLowerCase() ) {\n\t\t\t\t\t\t\telem = elem[ dir ] || elem;\n\t\t\t\t\t\t} else if ( (oldCache = uniqueCache[ key ]) &&\n\t\t\t\t\t\t\toldCache[ 0 ] === dirruns && oldCache[ 1 ] === doneName ) {\n\n\t\t\t\t\t\t\t// Assign to newCache so results back-propagate to previous elements\n\t\t\t\t\t\t\treturn (newCache[ 2 ] = oldCache[ 2 ]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Reuse newcache so results back-propagate to previous elements\n\t\t\t\t\t\t\tuniqueCache[ key ] = newCache;\n\n\t\t\t\t\t\t\t// A match means we're done; a fail means we have to keep checking\n\t\t\t\t\t\t\tif ( (newCache[ 2 ] = matcher( elem, context, xml )) ) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n}\n\nfunction elementMatcher( matchers ) {\n\treturn matchers.length > 1 ?\n\t\tfunction( elem, context, xml ) {\n\t\t\tvar i = matchers.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( !matchers[i]( elem, context, xml ) ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t} :\n\t\tmatchers[0];\n}\n\nfunction multipleContexts( selector, contexts, results ) {\n\tvar i = 0,\n\t\tlen = contexts.length;\n\tfor ( ; i < len; i++ ) {\n\t\tSizzle( selector, contexts[i], results );\n\t}\n\treturn results;\n}\n\nfunction condense( unmatched, map, filter, context, xml ) {\n\tvar elem,\n\t\tnewUnmatched = [],\n\t\ti = 0,\n\t\tlen = unmatched.length,\n\t\tmapped = map != null;\n\n\tfor ( ; i < len; i++ ) {\n\t\tif ( (elem = unmatched[i]) ) {\n\t\t\tif ( !filter || filter( elem, context, xml ) ) {\n\t\t\t\tnewUnmatched.push( elem );\n\t\t\t\tif ( mapped ) {\n\t\t\t\t\tmap.push( i );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn newUnmatched;\n}\n\nfunction setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {\n\tif ( postFilter && !postFilter[ expando ] ) {\n\t\tpostFilter = setMatcher( postFilter );\n\t}\n\tif ( postFinder && !postFinder[ expando ] ) {\n\t\tpostFinder = setMatcher( postFinder, postSelector );\n\t}\n\treturn markFunction(function( seed, results, context, xml ) {\n\t\tvar temp, i, elem,\n\t\t\tpreMap = [],\n\t\t\tpostMap = [],\n\t\t\tpreexisting = results.length,\n\n\t\t\t// Get initial elements from seed or context\n\t\t\telems = seed || multipleContexts( selector || \"*\", context.nodeType ? [ context ] : context, [] ),\n\n\t\t\t// Prefilter to get matcher input, preserving a map for seed-results synchronization\n\t\t\tmatcherIn = preFilter && ( seed || !selector ) ?\n\t\t\t\tcondense( elems, preMap, preFilter, context, xml ) :\n\t\t\t\telems,\n\n\t\t\tmatcherOut = matcher ?\n\t\t\t\t// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,\n\t\t\t\tpostFinder || ( seed ? preFilter : preexisting || postFilter ) ?\n\n\t\t\t\t\t// ...intermediate processing is necessary\n\t\t\t\t\t[] :\n\n\t\t\t\t\t// ...otherwise use results directly\n\t\t\t\t\tresults :\n\t\t\t\tmatcherIn;\n\n\t\t// Find primary matches\n\t\tif ( matcher ) {\n\t\t\tmatcher( matcherIn, matcherOut, context, xml );\n\t\t}\n\n\t\t// Apply postFilter\n\t\tif ( postFilter ) {\n\t\t\ttemp = condense( matcherOut, postMap );\n\t\t\tpostFilter( temp, [], context, xml );\n\n\t\t\t// Un-match failing elements by moving them back to matcherIn\n\t\t\ti = temp.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( (elem = temp[i]) ) {\n\t\t\t\t\tmatcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( seed ) {\n\t\t\tif ( postFinder || preFilter ) {\n\t\t\t\tif ( postFinder ) {\n\t\t\t\t\t// Get the final matcherOut by condensing this intermediate into postFinder contexts\n\t\t\t\t\ttemp = [];\n\t\t\t\t\ti = matcherOut.length;\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tif ( (elem = matcherOut[i]) ) {\n\t\t\t\t\t\t\t// Restore matcherIn since elem is not yet a final match\n\t\t\t\t\t\t\ttemp.push( (matcherIn[i] = elem) );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tpostFinder( null, (matcherOut = []), temp, xml );\n\t\t\t\t}\n\n\t\t\t\t// Move matched elements from seed to results to keep them synchronized\n\t\t\t\ti = matcherOut.length;\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\tif ( (elem = matcherOut[i]) &&\n\t\t\t\t\t\t(temp = postFinder ? indexOf( seed, elem ) : preMap[i]) > -1 ) {\n\n\t\t\t\t\t\tseed[temp] = !(results[temp] = elem);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Add elements to results, through postFinder if defined\n\t\t} else {\n\t\t\tmatcherOut = condense(\n\t\t\t\tmatcherOut === results ?\n\t\t\t\t\tmatcherOut.splice( preexisting, matcherOut.length ) :\n\t\t\t\t\tmatcherOut\n\t\t\t);\n\t\t\tif ( postFinder ) {\n\t\t\t\tpostFinder( null, results, matcherOut, xml );\n\t\t\t} else {\n\t\t\t\tpush.apply( results, matcherOut );\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction matcherFromTokens( tokens ) {\n\tvar checkContext, matcher, j,\n\t\tlen = tokens.length,\n\t\tleadingRelative = Expr.relative[ tokens[0].type ],\n\t\timplicitRelative = leadingRelative || Expr.relative[\" \"],\n\t\ti = leadingRelative ? 1 : 0,\n\n\t\t// The foundational matcher ensures that elements are reachable from top-level context(s)\n\t\tmatchContext = addCombinator( function( elem ) {\n\t\t\treturn elem === checkContext;\n\t\t}, implicitRelative, true ),\n\t\tmatchAnyContext = addCombinator( function( elem ) {\n\t\t\treturn indexOf( checkContext, elem ) > -1;\n\t\t}, implicitRelative, true ),\n\t\tmatchers = [ function( elem, context, xml ) {\n\t\t\tvar ret = ( !leadingRelative && ( xml || context !== outermostContext ) ) || (\n\t\t\t\t(checkContext = context).nodeType ?\n\t\t\t\t\tmatchContext( elem, context, xml ) :\n\t\t\t\t\tmatchAnyContext( elem, context, xml ) );\n\t\t\t// Avoid hanging onto element (issue #299)\n\t\t\tcheckContext = null;\n\t\t\treturn ret;\n\t\t} ];\n\n\tfor ( ; i < len; i++ ) {\n\t\tif ( (matcher = Expr.relative[ tokens[i].type ]) ) {\n\t\t\tmatchers = [ addCombinator(elementMatcher( matchers ), matcher) ];\n\t\t} else {\n\t\t\tmatcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );\n\n\t\t\t// Return special upon seeing a positional matcher\n\t\t\tif ( matcher[ expando ] ) {\n\t\t\t\t// Find the next relative operator (if any) for proper handling\n\t\t\t\tj = ++i;\n\t\t\t\tfor ( ; j < len; j++ ) {\n\t\t\t\t\tif ( Expr.relative[ tokens[j].type ] ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn setMatcher(\n\t\t\t\t\ti > 1 && elementMatcher( matchers ),\n\t\t\t\t\ti > 1 && toSelector(\n\t\t\t\t\t\t// If the preceding token was a descendant combinator, insert an implicit any-element `*`\n\t\t\t\t\t\ttokens.slice( 0, i - 1 ).concat({ value: tokens[ i - 2 ].type === \" \" ? \"*\" : \"\" })\n\t\t\t\t\t).replace( rtrim, \"$1\" ),\n\t\t\t\t\tmatcher,\n\t\t\t\t\ti < j && matcherFromTokens( tokens.slice( i, j ) ),\n\t\t\t\t\tj < len && matcherFromTokens( (tokens = tokens.slice( j )) ),\n\t\t\t\t\tj < len && toSelector( tokens )\n\t\t\t\t);\n\t\t\t}\n\t\t\tmatchers.push( matcher );\n\t\t}\n\t}\n\n\treturn elementMatcher( matchers );\n}\n\nfunction matcherFromGroupMatchers( elementMatchers, setMatchers ) {\n\tvar bySet = setMatchers.length > 0,\n\t\tbyElement = elementMatchers.length > 0,\n\t\tsuperMatcher = function( seed, context, xml, results, outermost ) {\n\t\t\tvar elem, j, matcher,\n\t\t\t\tmatchedCount = 0,\n\t\t\t\ti = \"0\",\n\t\t\t\tunmatched = seed && [],\n\t\t\t\tsetMatched = [],\n\t\t\t\tcontextBackup = outermostContext,\n\t\t\t\t// We must always have either seed elements or outermost context\n\t\t\t\telems = seed || byElement && Expr.find[\"TAG\"]( \"*\", outermost ),\n\t\t\t\t// Use integer dirruns iff this is the outermost matcher\n\t\t\t\tdirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1),\n\t\t\t\tlen = elems.length;\n\n\t\t\tif ( outermost ) {\n\t\t\t\toutermostContext = context === document || context || outermost;\n\t\t\t}\n\n\t\t\t// Add elements passing elementMatchers directly to results\n\t\t\t// Support: IE<9, Safari\n\t\t\t// Tolerate NodeList properties (IE: \"length\"; Safari: <number>) matching elements by id\n\t\t\tfor ( ; i !== len && (elem = elems[i]) != null; i++ ) {\n\t\t\t\tif ( byElement && elem ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\tif ( !context && elem.ownerDocument !== document ) {\n\t\t\t\t\t\tsetDocument( elem );\n\t\t\t\t\t\txml = !documentIsHTML;\n\t\t\t\t\t}\n\t\t\t\t\twhile ( (matcher = elementMatchers[j++]) ) {\n\t\t\t\t\t\tif ( matcher( elem, context || document, xml) ) {\n\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ( outermost ) {\n\t\t\t\t\t\tdirruns = dirrunsUnique;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Track unmatched elements for set filters\n\t\t\t\tif ( bySet ) {\n\t\t\t\t\t// They will have gone through all possible matchers\n\t\t\t\t\tif ( (elem = !matcher && elem) ) {\n\t\t\t\t\t\tmatchedCount--;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Lengthen the array for every element, matched or not\n\t\t\t\t\tif ( seed ) {\n\t\t\t\t\t\tunmatched.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// `i` is now the count of elements visited above, and adding it to `matchedCount`\n\t\t\t// makes the latter nonnegative.\n\t\t\tmatchedCount += i;\n\n\t\t\t// Apply set filters to unmatched elements\n\t\t\t// NOTE: This can be skipped if there are no unmatched elements (i.e., `matchedCount`\n\t\t\t// equals `i`), unless we didn't visit _any_ elements in the above loop because we have\n\t\t\t// no element matchers and no seed.\n\t\t\t// Incrementing an initially-string \"0\" `i` allows `i` to remain a string only in that\n\t\t\t// case, which will result in a \"00\" `matchedCount` that differs from `i` but is also\n\t\t\t// numerically zero.\n\t\t\tif ( bySet && i !== matchedCount ) {\n\t\t\t\tj = 0;\n\t\t\t\twhile ( (matcher = setMatchers[j++]) ) {\n\t\t\t\t\tmatcher( unmatched, setMatched, context, xml );\n\t\t\t\t}\n\n\t\t\t\tif ( seed ) {\n\t\t\t\t\t// Reintegrate element matches to eliminate the need for sorting\n\t\t\t\t\tif ( matchedCount > 0 ) {\n\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\tif ( !(unmatched[i] || setMatched[i]) ) {\n\t\t\t\t\t\t\t\tsetMatched[i] = pop.call( results );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Discard index placeholder values to get only actual matches\n\t\t\t\t\tsetMatched = condense( setMatched );\n\t\t\t\t}\n\n\t\t\t\t// Add matches to results\n\t\t\t\tpush.apply( results, setMatched );\n\n\t\t\t\t// Seedless set matches succeeding multiple successful matchers stipulate sorting\n\t\t\t\tif ( outermost && !seed && setMatched.length > 0 &&\n\t\t\t\t\t( matchedCount + setMatchers.length ) > 1 ) {\n\n\t\t\t\t\tSizzle.uniqueSort( results );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Override manipulation of globals by nested matchers\n\t\t\tif ( outermost ) {\n\t\t\t\tdirruns = dirrunsUnique;\n\t\t\t\toutermostContext = contextBackup;\n\t\t\t}\n\n\t\t\treturn unmatched;\n\t\t};\n\n\treturn bySet ?\n\t\tmarkFunction( superMatcher ) :\n\t\tsuperMatcher;\n}\n\ncompile = Sizzle.compile = function( selector, match /* Internal Use Only */ ) {\n\tvar i,\n\t\tsetMatchers = [],\n\t\telementMatchers = [],\n\t\tcached = compilerCache[ selector + \" \" ];\n\n\tif ( !cached ) {\n\t\t// Generate a function of recursive functions that can be used to check each element\n\t\tif ( !match ) {\n\t\t\tmatch = tokenize( selector );\n\t\t}\n\t\ti = match.length;\n\t\twhile ( i-- ) {\n\t\t\tcached = matcherFromTokens( match[i] );\n\t\t\tif ( cached[ expando ] ) {\n\t\t\t\tsetMatchers.push( cached );\n\t\t\t} else {\n\t\t\t\telementMatchers.push( cached );\n\t\t\t}\n\t\t}\n\n\t\t// Cache the compiled function\n\t\tcached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );\n\n\t\t// Save selector and tokenization\n\t\tcached.selector = selector;\n\t}\n\treturn cached;\n};\n\n/**\n * A low-level selection function that works with Sizzle's compiled\n *  selector functions\n * @param {String|Function} selector A selector or a pre-compiled\n *  selector function built with Sizzle.compile\n * @param {Element} context\n * @param {Array} [results]\n * @param {Array} [seed] A set of elements to match against\n */\nselect = Sizzle.select = function( selector, context, results, seed ) {\n\tvar i, tokens, token, type, find,\n\t\tcompiled = typeof selector === \"function\" && selector,\n\t\tmatch = !seed && tokenize( (selector = compiled.selector || selector) );\n\n\tresults = results || [];\n\n\t// Try to minimize operations if there is only one selector in the list and no seed\n\t// (the latter of which guarantees us context)\n\tif ( match.length === 1 ) {\n\n\t\t// Reduce context if the leading compound selector is an ID\n\t\ttokens = match[0] = match[0].slice( 0 );\n\t\tif ( tokens.length > 2 && (token = tokens[0]).type === \"ID\" &&\n\t\t\t\tcontext.nodeType === 9 && documentIsHTML && Expr.relative[ tokens[1].type ] ) {\n\n\t\t\tcontext = ( Expr.find[\"ID\"]( token.matches[0].replace(runescape, funescape), context ) || [] )[0];\n\t\t\tif ( !context ) {\n\t\t\t\treturn results;\n\n\t\t\t// Precompiled matchers will still verify ancestry, so step up a level\n\t\t\t} else if ( compiled ) {\n\t\t\t\tcontext = context.parentNode;\n\t\t\t}\n\n\t\t\tselector = selector.slice( tokens.shift().value.length );\n\t\t}\n\n\t\t// Fetch a seed set for right-to-left matching\n\t\ti = matchExpr[\"needsContext\"].test( selector ) ? 0 : tokens.length;\n\t\twhile ( i-- ) {\n\t\t\ttoken = tokens[i];\n\n\t\t\t// Abort if we hit a combinator\n\t\t\tif ( Expr.relative[ (type = token.type) ] ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( (find = Expr.find[ type ]) ) {\n\t\t\t\t// Search, expanding context for leading sibling combinators\n\t\t\t\tif ( (seed = find(\n\t\t\t\t\ttoken.matches[0].replace( runescape, funescape ),\n\t\t\t\t\trsibling.test( tokens[0].type ) && testContext( context.parentNode ) || context\n\t\t\t\t)) ) {\n\n\t\t\t\t\t// If seed is empty or no tokens remain, we can return early\n\t\t\t\t\ttokens.splice( i, 1 );\n\t\t\t\t\tselector = seed.length && toSelector( tokens );\n\t\t\t\t\tif ( !selector ) {\n\t\t\t\t\t\tpush.apply( results, seed );\n\t\t\t\t\t\treturn results;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Compile and execute a filtering function if one is not provided\n\t// Provide `match` to avoid retokenization if we modified the selector above\n\t( compiled || compile( selector, match ) )(\n\t\tseed,\n\t\tcontext,\n\t\t!documentIsHTML,\n\t\tresults,\n\t\t!context || rsibling.test( selector ) && testContext( context.parentNode ) || context\n\t);\n\treturn results;\n};\n\n// One-time assignments\n\n// Sort stability\nsupport.sortStable = expando.split(\"\").sort( sortOrder ).join(\"\") === expando;\n\n// Support: Chrome 14-35+\n// Always assume duplicates if they aren't passed to the comparison function\nsupport.detectDuplicates = !!hasDuplicate;\n\n// Initialize against the default document\nsetDocument();\n\n// Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)\n// Detached nodes confoundingly follow *each other*\nsupport.sortDetached = assert(function( el ) {\n\t// Should return 1, but returns 4 (following)\n\treturn el.compareDocumentPosition( document.createElement(\"fieldset\") ) & 1;\n});\n\n// Support: IE<8\n// Prevent attribute/property \"interpolation\"\n// https://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx\nif ( !assert(function( el ) {\n\tel.innerHTML = \"<a href='#'></a>\";\n\treturn el.firstChild.getAttribute(\"href\") === \"#\" ;\n}) ) {\n\taddHandle( \"type|href|height|width\", function( elem, name, isXML ) {\n\t\tif ( !isXML ) {\n\t\t\treturn elem.getAttribute( name, name.toLowerCase() === \"type\" ? 1 : 2 );\n\t\t}\n\t});\n}\n\n// Support: IE<9\n// Use defaultValue in place of getAttribute(\"value\")\nif ( !support.attributes || !assert(function( el ) {\n\tel.innerHTML = \"<input/>\";\n\tel.firstChild.setAttribute( \"value\", \"\" );\n\treturn el.firstChild.getAttribute( \"value\" ) === \"\";\n}) ) {\n\taddHandle( \"value\", function( elem, name, isXML ) {\n\t\tif ( !isXML && elem.nodeName.toLowerCase() === \"input\" ) {\n\t\t\treturn elem.defaultValue;\n\t\t}\n\t});\n}\n\n// Support: IE<9\n// Use getAttributeNode to fetch booleans when getAttribute lies\nif ( !assert(function( el ) {\n\treturn el.getAttribute(\"disabled\") == null;\n}) ) {\n\taddHandle( booleans, function( elem, name, isXML ) {\n\t\tvar val;\n\t\tif ( !isXML ) {\n\t\t\treturn elem[ name ] === true ? name.toLowerCase() :\n\t\t\t\t\t(val = elem.getAttributeNode( name )) && val.specified ?\n\t\t\t\t\tval.value :\n\t\t\t\tnull;\n\t\t}\n\t});\n}\n\nreturn Sizzle;\n\n})( window );\n\n\n\njQuery.find = Sizzle;\njQuery.expr = Sizzle.selectors;\n\n// Deprecated\njQuery.expr[ \":\" ] = jQuery.expr.pseudos;\njQuery.uniqueSort = jQuery.unique = Sizzle.uniqueSort;\njQuery.text = Sizzle.getText;\njQuery.isXMLDoc = Sizzle.isXML;\njQuery.contains = Sizzle.contains;\njQuery.escapeSelector = Sizzle.escape;\n\n\n\n\nvar dir = function( elem, dir, until ) {\n\tvar matched = [],\n\t\ttruncate = until !== undefined;\n\n\twhile ( ( elem = elem[ dir ] ) && elem.nodeType !== 9 ) {\n\t\tif ( elem.nodeType === 1 ) {\n\t\t\tif ( truncate && jQuery( elem ).is( until ) ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tmatched.push( elem );\n\t\t}\n\t}\n\treturn matched;\n};\n\n\nvar siblings = function( n, elem ) {\n\tvar matched = [];\n\n\tfor ( ; n; n = n.nextSibling ) {\n\t\tif ( n.nodeType === 1 && n !== elem ) {\n\t\t\tmatched.push( n );\n\t\t}\n\t}\n\n\treturn matched;\n};\n\n\nvar rneedsContext = jQuery.expr.match.needsContext;\n\n\n\nfunction nodeName( elem, name ) {\n\n  return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();\n\n};\nvar rsingleTag = ( /^<([a-z][^\\/\\0>:\\x20\\t\\r\\n\\f]*)[\\x20\\t\\r\\n\\f]*\\/?>(?:<\\/\\1>|)$/i );\n\n\n\n// Implement the identical functionality for filter and not\nfunction winnow( elements, qualifier, not ) {\n\tif ( isFunction( qualifier ) ) {\n\t\treturn jQuery.grep( elements, function( elem, i ) {\n\t\t\treturn !!qualifier.call( elem, i, elem ) !== not;\n\t\t} );\n\t}\n\n\t// Single element\n\tif ( qualifier.nodeType ) {\n\t\treturn jQuery.grep( elements, function( elem ) {\n\t\t\treturn ( elem === qualifier ) !== not;\n\t\t} );\n\t}\n\n\t// Arraylike of elements (jQuery, arguments, Array)\n\tif ( typeof qualifier !== \"string\" ) {\n\t\treturn jQuery.grep( elements, function( elem ) {\n\t\t\treturn ( indexOf.call( qualifier, elem ) > -1 ) !== not;\n\t\t} );\n\t}\n\n\t// Filtered directly for both simple and complex selectors\n\treturn jQuery.filter( qualifier, elements, not );\n}\n\njQuery.filter = function( expr, elems, not ) {\n\tvar elem = elems[ 0 ];\n\n\tif ( not ) {\n\t\texpr = \":not(\" + expr + \")\";\n\t}\n\n\tif ( elems.length === 1 && elem.nodeType === 1 ) {\n\t\treturn jQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [];\n\t}\n\n\treturn jQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {\n\t\treturn elem.nodeType === 1;\n\t} ) );\n};\n\njQuery.fn.extend( {\n\tfind: function( selector ) {\n\t\tvar i, ret,\n\t\t\tlen = this.length,\n\t\t\tself = this;\n\n\t\tif ( typeof selector !== \"string\" ) {\n\t\t\treturn this.pushStack( jQuery( selector ).filter( function() {\n\t\t\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\t\t\tif ( jQuery.contains( self[ i ], this ) ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} ) );\n\t\t}\n\n\t\tret = this.pushStack( [] );\n\n\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\tjQuery.find( selector, self[ i ], ret );\n\t\t}\n\n\t\treturn len > 1 ? jQuery.uniqueSort( ret ) : ret;\n\t},\n\tfilter: function( selector ) {\n\t\treturn this.pushStack( winnow( this, selector || [], false ) );\n\t},\n\tnot: function( selector ) {\n\t\treturn this.pushStack( winnow( this, selector || [], true ) );\n\t},\n\tis: function( selector ) {\n\t\treturn !!winnow(\n\t\t\tthis,\n\n\t\t\t// If this is a positional/relative selector, check membership in the returned set\n\t\t\t// so $(\"p:first\").is(\"p:last\") won't return true for a doc with two \"p\".\n\t\t\ttypeof selector === \"string\" && rneedsContext.test( selector ) ?\n\t\t\t\tjQuery( selector ) :\n\t\t\t\tselector || [],\n\t\t\tfalse\n\t\t).length;\n\t}\n} );\n\n\n// Initialize a jQuery object\n\n\n// A central reference to the root jQuery(document)\nvar rootjQuery,\n\n\t// A simple way to check for HTML strings\n\t// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)\n\t// Strict HTML recognition (#11290: must start with <)\n\t// Shortcut simple #id case for speed\n\trquickExpr = /^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]+))$/,\n\n\tinit = jQuery.fn.init = function( selector, context, root ) {\n\t\tvar match, elem;\n\n\t\t// HANDLE: $(\"\"), $(null), $(undefined), $(false)\n\t\tif ( !selector ) {\n\t\t\treturn this;\n\t\t}\n\n\t\t// Method init() accepts an alternate rootjQuery\n\t\t// so migrate can support jQuery.sub (gh-2101)\n\t\troot = root || rootjQuery;\n\n\t\t// Handle HTML strings\n\t\tif ( typeof selector === \"string\" ) {\n\t\t\tif ( selector[ 0 ] === \"<\" &&\n\t\t\t\tselector[ selector.length - 1 ] === \">\" &&\n\t\t\t\tselector.length >= 3 ) {\n\n\t\t\t\t// Assume that strings that start and end with <> are HTML and skip the regex check\n\t\t\t\tmatch = [ null, selector, null ];\n\n\t\t\t} else {\n\t\t\t\tmatch = rquickExpr.exec( selector );\n\t\t\t}\n\n\t\t\t// Match html or make sure no context is specified for #id\n\t\t\tif ( match && ( match[ 1 ] || !context ) ) {\n\n\t\t\t\t// HANDLE: $(html) -> $(array)\n\t\t\t\tif ( match[ 1 ] ) {\n\t\t\t\t\tcontext = context instanceof jQuery ? context[ 0 ] : context;\n\n\t\t\t\t\t// Option to run scripts is true for back-compat\n\t\t\t\t\t// Intentionally let the error be thrown if parseHTML is not present\n\t\t\t\t\tjQuery.merge( this, jQuery.parseHTML(\n\t\t\t\t\t\tmatch[ 1 ],\n\t\t\t\t\t\tcontext && context.nodeType ? context.ownerDocument || context : document,\n\t\t\t\t\t\ttrue\n\t\t\t\t\t) );\n\n\t\t\t\t\t// HANDLE: $(html, props)\n\t\t\t\t\tif ( rsingleTag.test( match[ 1 ] ) && jQuery.isPlainObject( context ) ) {\n\t\t\t\t\t\tfor ( match in context ) {\n\n\t\t\t\t\t\t\t// Properties of context are called as methods if possible\n\t\t\t\t\t\t\tif ( isFunction( this[ match ] ) ) {\n\t\t\t\t\t\t\t\tthis[ match ]( context[ match ] );\n\n\t\t\t\t\t\t\t// ...and otherwise set as attributes\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.attr( match, context[ match ] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this;\n\n\t\t\t\t// HANDLE: $(#id)\n\t\t\t\t} else {\n\t\t\t\t\telem = document.getElementById( match[ 2 ] );\n\n\t\t\t\t\tif ( elem ) {\n\n\t\t\t\t\t\t// Inject the element directly into the jQuery object\n\t\t\t\t\t\tthis[ 0 ] = elem;\n\t\t\t\t\t\tthis.length = 1;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\n\t\t\t// HANDLE: $(expr, $(...))\n\t\t\t} else if ( !context || context.jquery ) {\n\t\t\t\treturn ( context || root ).find( selector );\n\n\t\t\t// HANDLE: $(expr, context)\n\t\t\t// (which is just equivalent to: $(context).find(expr)\n\t\t\t} else {\n\t\t\t\treturn this.constructor( context ).find( selector );\n\t\t\t}\n\n\t\t// HANDLE: $(DOMElement)\n\t\t} else if ( selector.nodeType ) {\n\t\t\tthis[ 0 ] = selector;\n\t\t\tthis.length = 1;\n\t\t\treturn this;\n\n\t\t// HANDLE: $(function)\n\t\t// Shortcut for document ready\n\t\t} else if ( isFunction( selector ) ) {\n\t\t\treturn root.ready !== undefined ?\n\t\t\t\troot.ready( selector ) :\n\n\t\t\t\t// Execute immediately if ready is not present\n\t\t\t\tselector( jQuery );\n\t\t}\n\n\t\treturn jQuery.makeArray( selector, this );\n\t};\n\n// Give the init function the jQuery prototype for later instantiation\ninit.prototype = jQuery.fn;\n\n// Initialize central reference\nrootjQuery = jQuery( document );\n\n\nvar rparentsprev = /^(?:parents|prev(?:Until|All))/,\n\n\t// Methods guaranteed to produce a unique set when starting from a unique set\n\tguaranteedUnique = {\n\t\tchildren: true,\n\t\tcontents: true,\n\t\tnext: true,\n\t\tprev: true\n\t};\n\njQuery.fn.extend( {\n\thas: function( target ) {\n\t\tvar targets = jQuery( target, this ),\n\t\t\tl = targets.length;\n\n\t\treturn this.filter( function() {\n\t\t\tvar i = 0;\n\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\tif ( jQuery.contains( this, targets[ i ] ) ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t},\n\n\tclosest: function( selectors, context ) {\n\t\tvar cur,\n\t\t\ti = 0,\n\t\t\tl = this.length,\n\t\t\tmatched = [],\n\t\t\ttargets = typeof selectors !== \"string\" && jQuery( selectors );\n\n\t\t// Positional selectors never match, since there's no _selection_ context\n\t\tif ( !rneedsContext.test( selectors ) ) {\n\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\tfor ( cur = this[ i ]; cur && cur !== context; cur = cur.parentNode ) {\n\n\t\t\t\t\t// Always skip document fragments\n\t\t\t\t\tif ( cur.nodeType < 11 && ( targets ?\n\t\t\t\t\t\ttargets.index( cur ) > -1 :\n\n\t\t\t\t\t\t// Don't pass non-elements to Sizzle\n\t\t\t\t\t\tcur.nodeType === 1 &&\n\t\t\t\t\t\t\tjQuery.find.matchesSelector( cur, selectors ) ) ) {\n\n\t\t\t\t\t\tmatched.push( cur );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.pushStack( matched.length > 1 ? jQuery.uniqueSort( matched ) : matched );\n\t},\n\n\t// Determine the position of an element within the set\n\tindex: function( elem ) {\n\n\t\t// No argument, return index in parent\n\t\tif ( !elem ) {\n\t\t\treturn ( this[ 0 ] && this[ 0 ].parentNode ) ? this.first().prevAll().length : -1;\n\t\t}\n\n\t\t// Index in selector\n\t\tif ( typeof elem === \"string\" ) {\n\t\t\treturn indexOf.call( jQuery( elem ), this[ 0 ] );\n\t\t}\n\n\t\t// Locate the position of the desired element\n\t\treturn indexOf.call( this,\n\n\t\t\t// If it receives a jQuery object, the first element is used\n\t\t\telem.jquery ? elem[ 0 ] : elem\n\t\t);\n\t},\n\n\tadd: function( selector, context ) {\n\t\treturn this.pushStack(\n\t\t\tjQuery.uniqueSort(\n\t\t\t\tjQuery.merge( this.get(), jQuery( selector, context ) )\n\t\t\t)\n\t\t);\n\t},\n\n\taddBack: function( selector ) {\n\t\treturn this.add( selector == null ?\n\t\t\tthis.prevObject : this.prevObject.filter( selector )\n\t\t);\n\t}\n} );\n\nfunction sibling( cur, dir ) {\n\twhile ( ( cur = cur[ dir ] ) && cur.nodeType !== 1 ) {}\n\treturn cur;\n}\n\njQuery.each( {\n\tparent: function( elem ) {\n\t\tvar parent = elem.parentNode;\n\t\treturn parent && parent.nodeType !== 11 ? parent : null;\n\t},\n\tparents: function( elem ) {\n\t\treturn dir( elem, \"parentNode\" );\n\t},\n\tparentsUntil: function( elem, i, until ) {\n\t\treturn dir( elem, \"parentNode\", until );\n\t},\n\tnext: function( elem ) {\n\t\treturn sibling( elem, \"nextSibling\" );\n\t},\n\tprev: function( elem ) {\n\t\treturn sibling( elem, \"previousSibling\" );\n\t},\n\tnextAll: function( elem ) {\n\t\treturn dir( elem, \"nextSibling\" );\n\t},\n\tprevAll: function( elem ) {\n\t\treturn dir( elem, \"previousSibling\" );\n\t},\n\tnextUntil: function( elem, i, until ) {\n\t\treturn dir( elem, \"nextSibling\", until );\n\t},\n\tprevUntil: function( elem, i, until ) {\n\t\treturn dir( elem, \"previousSibling\", until );\n\t},\n\tsiblings: function( elem ) {\n\t\treturn siblings( ( elem.parentNode || {} ).firstChild, elem );\n\t},\n\tchildren: function( elem ) {\n\t\treturn siblings( elem.firstChild );\n\t},\n\tcontents: function( elem ) {\n        if ( nodeName( elem, \"iframe\" ) ) {\n            return elem.contentDocument;\n        }\n\n        // Support: IE 9 - 11 only, iOS 7 only, Android Browser <=4.3 only\n        // Treat the template element as a regular one in browsers that\n        // don't support it.\n        if ( nodeName( elem, \"template\" ) ) {\n            elem = elem.content || elem;\n        }\n\n        return jQuery.merge( [], elem.childNodes );\n\t}\n}, function( name, fn ) {\n\tjQuery.fn[ name ] = function( until, selector ) {\n\t\tvar matched = jQuery.map( this, fn, until );\n\n\t\tif ( name.slice( -5 ) !== \"Until\" ) {\n\t\t\tselector = until;\n\t\t}\n\n\t\tif ( selector && typeof selector === \"string\" ) {\n\t\t\tmatched = jQuery.filter( selector, matched );\n\t\t}\n\n\t\tif ( this.length > 1 ) {\n\n\t\t\t// Remove duplicates\n\t\t\tif ( !guaranteedUnique[ name ] ) {\n\t\t\t\tjQuery.uniqueSort( matched );\n\t\t\t}\n\n\t\t\t// Reverse order for parents* and prev-derivatives\n\t\t\tif ( rparentsprev.test( name ) ) {\n\t\t\t\tmatched.reverse();\n\t\t\t}\n\t\t}\n\n\t\treturn this.pushStack( matched );\n\t};\n} );\nvar rnothtmlwhite = ( /[^\\x20\\t\\r\\n\\f]+/g );\n\n\n\n// Convert String-formatted options into Object-formatted ones\nfunction createOptions( options ) {\n\tvar object = {};\n\tjQuery.each( options.match( rnothtmlwhite ) || [], function( _, flag ) {\n\t\tobject[ flag ] = true;\n\t} );\n\treturn object;\n}\n\n/*\n * Create a callback list using the following parameters:\n *\n *\toptions: an optional list of space-separated options that will change how\n *\t\t\tthe callback list behaves or a more traditional option object\n *\n * By default a callback list will act like an event callback list and can be\n * \"fired\" multiple times.\n *\n * Possible options:\n *\n *\tonce:\t\t\twill ensure the callback list can only be fired once (like a Deferred)\n *\n *\tmemory:\t\t\twill keep track of previous values and will call any callback added\n *\t\t\t\t\tafter the list has been fired right away with the latest \"memorized\"\n *\t\t\t\t\tvalues (like a Deferred)\n *\n *\tunique:\t\t\twill ensure a callback can only be added once (no duplicate in the list)\n *\n *\tstopOnFalse:\tinterrupt callings when a callback returns false\n *\n */\njQuery.Callbacks = function( options ) {\n\n\t// Convert options from String-formatted to Object-formatted if needed\n\t// (we check in cache first)\n\toptions = typeof options === \"string\" ?\n\t\tcreateOptions( options ) :\n\t\tjQuery.extend( {}, options );\n\n\tvar // Flag to know if list is currently firing\n\t\tfiring,\n\n\t\t// Last fire value for non-forgettable lists\n\t\tmemory,\n\n\t\t// Flag to know if list was already fired\n\t\tfired,\n\n\t\t// Flag to prevent firing\n\t\tlocked,\n\n\t\t// Actual callback list\n\t\tlist = [],\n\n\t\t// Queue of execution data for repeatable lists\n\t\tqueue = [],\n\n\t\t// Index of currently firing callback (modified by add/remove as needed)\n\t\tfiringIndex = -1,\n\n\t\t// Fire callbacks\n\t\tfire = function() {\n\n\t\t\t// Enforce single-firing\n\t\t\tlocked = locked || options.once;\n\n\t\t\t// Execute callbacks for all pending executions,\n\t\t\t// respecting firingIndex overrides and runtime changes\n\t\t\tfired = firing = true;\n\t\t\tfor ( ; queue.length; firingIndex = -1 ) {\n\t\t\t\tmemory = queue.shift();\n\t\t\t\twhile ( ++firingIndex < list.length ) {\n\n\t\t\t\t\t// Run callback and check for early termination\n\t\t\t\t\tif ( list[ firingIndex ].apply( memory[ 0 ], memory[ 1 ] ) === false &&\n\t\t\t\t\t\toptions.stopOnFalse ) {\n\n\t\t\t\t\t\t// Jump to end and forget the data so .add doesn't re-fire\n\t\t\t\t\t\tfiringIndex = list.length;\n\t\t\t\t\t\tmemory = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Forget the data if we're done with it\n\t\t\tif ( !options.memory ) {\n\t\t\t\tmemory = false;\n\t\t\t}\n\n\t\t\tfiring = false;\n\n\t\t\t// Clean up if we're done firing for good\n\t\t\tif ( locked ) {\n\n\t\t\t\t// Keep an empty list if we have data for future add calls\n\t\t\t\tif ( memory ) {\n\t\t\t\t\tlist = [];\n\n\t\t\t\t// Otherwise, this object is spent\n\t\t\t\t} else {\n\t\t\t\t\tlist = \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t// Actual Callbacks object\n\t\tself = {\n\n\t\t\t// Add a callback or a collection of callbacks to the list\n\t\t\tadd: function() {\n\t\t\t\tif ( list ) {\n\n\t\t\t\t\t// If we have memory from a past run, we should fire after adding\n\t\t\t\t\tif ( memory && !firing ) {\n\t\t\t\t\t\tfiringIndex = list.length - 1;\n\t\t\t\t\t\tqueue.push( memory );\n\t\t\t\t\t}\n\n\t\t\t\t\t( function add( args ) {\n\t\t\t\t\t\tjQuery.each( args, function( _, arg ) {\n\t\t\t\t\t\t\tif ( isFunction( arg ) ) {\n\t\t\t\t\t\t\t\tif ( !options.unique || !self.has( arg ) ) {\n\t\t\t\t\t\t\t\t\tlist.push( arg );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if ( arg && arg.length && toType( arg ) !== \"string\" ) {\n\n\t\t\t\t\t\t\t\t// Inspect recursively\n\t\t\t\t\t\t\t\tadd( arg );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t} )( arguments );\n\n\t\t\t\t\tif ( memory && !firing ) {\n\t\t\t\t\t\tfire();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Remove a callback from the list\n\t\t\tremove: function() {\n\t\t\t\tjQuery.each( arguments, function( _, arg ) {\n\t\t\t\t\tvar index;\n\t\t\t\t\twhile ( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {\n\t\t\t\t\t\tlist.splice( index, 1 );\n\n\t\t\t\t\t\t// Handle firing indexes\n\t\t\t\t\t\tif ( index <= firingIndex ) {\n\t\t\t\t\t\t\tfiringIndex--;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Check if a given callback is in the list.\n\t\t\t// If no argument is given, return whether or not list has callbacks attached.\n\t\t\thas: function( fn ) {\n\t\t\t\treturn fn ?\n\t\t\t\t\tjQuery.inArray( fn, list ) > -1 :\n\t\t\t\t\tlist.length > 0;\n\t\t\t},\n\n\t\t\t// Remove all callbacks from the list\n\t\t\tempty: function() {\n\t\t\t\tif ( list ) {\n\t\t\t\t\tlist = [];\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Disable .fire and .add\n\t\t\t// Abort any current/pending executions\n\t\t\t// Clear all callbacks and values\n\t\t\tdisable: function() {\n\t\t\t\tlocked = queue = [];\n\t\t\t\tlist = memory = \"\";\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\tdisabled: function() {\n\t\t\t\treturn !list;\n\t\t\t},\n\n\t\t\t// Disable .fire\n\t\t\t// Also disable .add unless we have memory (since it would have no effect)\n\t\t\t// Abort any pending executions\n\t\t\tlock: function() {\n\t\t\t\tlocked = queue = [];\n\t\t\t\tif ( !memory && !firing ) {\n\t\t\t\t\tlist = memory = \"\";\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\tlocked: function() {\n\t\t\t\treturn !!locked;\n\t\t\t},\n\n\t\t\t// Call all callbacks with the given context and arguments\n\t\t\tfireWith: function( context, args ) {\n\t\t\t\tif ( !locked ) {\n\t\t\t\t\targs = args || [];\n\t\t\t\t\targs = [ context, args.slice ? args.slice() : args ];\n\t\t\t\t\tqueue.push( args );\n\t\t\t\t\tif ( !firing ) {\n\t\t\t\t\t\tfire();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Call all the callbacks with the given arguments\n\t\t\tfire: function() {\n\t\t\t\tself.fireWith( this, arguments );\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// To know if the callbacks have already been called at least once\n\t\t\tfired: function() {\n\t\t\t\treturn !!fired;\n\t\t\t}\n\t\t};\n\n\treturn self;\n};\n\n\nfunction Identity( v ) {\n\treturn v;\n}\nfunction Thrower( ex ) {\n\tthrow ex;\n}\n\nfunction adoptValue( value, resolve, reject, noValue ) {\n\tvar method;\n\n\ttry {\n\n\t\t// Check for promise aspect first to privilege synchronous behavior\n\t\tif ( value && isFunction( ( method = value.promise ) ) ) {\n\t\t\tmethod.call( value ).done( resolve ).fail( reject );\n\n\t\t// Other thenables\n\t\t} else if ( value && isFunction( ( method = value.then ) ) ) {\n\t\t\tmethod.call( value, resolve, reject );\n\n\t\t// Other non-thenables\n\t\t} else {\n\n\t\t\t// Control `resolve` arguments by letting Array#slice cast boolean `noValue` to integer:\n\t\t\t// * false: [ value ].slice( 0 ) => resolve( value )\n\t\t\t// * true: [ value ].slice( 1 ) => resolve()\n\t\t\tresolve.apply( undefined, [ value ].slice( noValue ) );\n\t\t}\n\n\t// For Promises/A+, convert exceptions into rejections\n\t// Since jQuery.when doesn't unwrap thenables, we can skip the extra checks appearing in\n\t// Deferred#then to conditionally suppress rejection.\n\t} catch ( value ) {\n\n\t\t// Support: Android 4.0 only\n\t\t// Strict mode functions invoked without .call/.apply get global-object context\n\t\treject.apply( undefined, [ value ] );\n\t}\n}\n\njQuery.extend( {\n\n\tDeferred: function( func ) {\n\t\tvar tuples = [\n\n\t\t\t\t// action, add listener, callbacks,\n\t\t\t\t// ... .then handlers, argument index, [final state]\n\t\t\t\t[ \"notify\", \"progress\", jQuery.Callbacks( \"memory\" ),\n\t\t\t\t\tjQuery.Callbacks( \"memory\" ), 2 ],\n\t\t\t\t[ \"resolve\", \"done\", jQuery.Callbacks( \"once memory\" ),\n\t\t\t\t\tjQuery.Callbacks( \"once memory\" ), 0, \"resolved\" ],\n\t\t\t\t[ \"reject\", \"fail\", jQuery.Callbacks( \"once memory\" ),\n\t\t\t\t\tjQuery.Callbacks( \"once memory\" ), 1, \"rejected\" ]\n\t\t\t],\n\t\t\tstate = \"pending\",\n\t\t\tpromise = {\n\t\t\t\tstate: function() {\n\t\t\t\t\treturn state;\n\t\t\t\t},\n\t\t\t\talways: function() {\n\t\t\t\t\tdeferred.done( arguments ).fail( arguments );\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\t\t\t\t\"catch\": function( fn ) {\n\t\t\t\t\treturn promise.then( null, fn );\n\t\t\t\t},\n\n\t\t\t\t// Keep pipe for back-compat\n\t\t\t\tpipe: function( /* fnDone, fnFail, fnProgress */ ) {\n\t\t\t\t\tvar fns = arguments;\n\n\t\t\t\t\treturn jQuery.Deferred( function( newDefer ) {\n\t\t\t\t\t\tjQuery.each( tuples, function( i, tuple ) {\n\n\t\t\t\t\t\t\t// Map tuples (progress, done, fail) to arguments (done, fail, progress)\n\t\t\t\t\t\t\tvar fn = isFunction( fns[ tuple[ 4 ] ] ) && fns[ tuple[ 4 ] ];\n\n\t\t\t\t\t\t\t// deferred.progress(function() { bind to newDefer or newDefer.notify })\n\t\t\t\t\t\t\t// deferred.done(function() { bind to newDefer or newDefer.resolve })\n\t\t\t\t\t\t\t// deferred.fail(function() { bind to newDefer or newDefer.reject })\n\t\t\t\t\t\t\tdeferred[ tuple[ 1 ] ]( function() {\n\t\t\t\t\t\t\t\tvar returned = fn && fn.apply( this, arguments );\n\t\t\t\t\t\t\t\tif ( returned && isFunction( returned.promise ) ) {\n\t\t\t\t\t\t\t\t\treturned.promise()\n\t\t\t\t\t\t\t\t\t\t.progress( newDefer.notify )\n\t\t\t\t\t\t\t\t\t\t.done( newDefer.resolve )\n\t\t\t\t\t\t\t\t\t\t.fail( newDefer.reject );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tnewDefer[ tuple[ 0 ] + \"With\" ](\n\t\t\t\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\t\t\t\tfn ? [ returned ] : arguments\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} );\n\t\t\t\t\t\tfns = null;\n\t\t\t\t\t} ).promise();\n\t\t\t\t},\n\t\t\t\tthen: function( onFulfilled, onRejected, onProgress ) {\n\t\t\t\t\tvar maxDepth = 0;\n\t\t\t\t\tfunction resolve( depth, deferred, handler, special ) {\n\t\t\t\t\t\treturn function() {\n\t\t\t\t\t\t\tvar that = this,\n\t\t\t\t\t\t\t\targs = arguments,\n\t\t\t\t\t\t\t\tmightThrow = function() {\n\t\t\t\t\t\t\t\t\tvar returned, then;\n\n\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.3.3.3\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-59\n\t\t\t\t\t\t\t\t\t// Ignore double-resolution attempts\n\t\t\t\t\t\t\t\t\tif ( depth < maxDepth ) {\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturned = handler.apply( that, args );\n\n\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.1\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-48\n\t\t\t\t\t\t\t\t\tif ( returned === deferred.promise() ) {\n\t\t\t\t\t\t\t\t\t\tthrow new TypeError( \"Thenable self-resolution\" );\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Support: Promises/A+ sections 2.3.3.1, 3.5\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-54\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-75\n\t\t\t\t\t\t\t\t\t// Retrieve `then` only once\n\t\t\t\t\t\t\t\t\tthen = returned &&\n\n\t\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.4\n\t\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-64\n\t\t\t\t\t\t\t\t\t\t// Only check objects and functions for thenability\n\t\t\t\t\t\t\t\t\t\t( typeof returned === \"object\" ||\n\t\t\t\t\t\t\t\t\t\t\ttypeof returned === \"function\" ) &&\n\t\t\t\t\t\t\t\t\t\treturned.then;\n\n\t\t\t\t\t\t\t\t\t// Handle a returned thenable\n\t\t\t\t\t\t\t\t\tif ( isFunction( then ) ) {\n\n\t\t\t\t\t\t\t\t\t\t// Special processors (notify) just wait for resolution\n\t\t\t\t\t\t\t\t\t\tif ( special ) {\n\t\t\t\t\t\t\t\t\t\t\tthen.call(\n\t\t\t\t\t\t\t\t\t\t\t\treturned,\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Identity, special ),\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Thrower, special )\n\t\t\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\t\t// Normal processors (resolve) also hook into progress\n\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t// ...and disregard older resolution values\n\t\t\t\t\t\t\t\t\t\t\tmaxDepth++;\n\n\t\t\t\t\t\t\t\t\t\t\tthen.call(\n\t\t\t\t\t\t\t\t\t\t\t\treturned,\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Identity, special ),\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Thrower, special ),\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Identity,\n\t\t\t\t\t\t\t\t\t\t\t\t\tdeferred.notifyWith )\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Handle all other returned values\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t// Only substitute handlers pass on context\n\t\t\t\t\t\t\t\t\t\t// and multiple values (non-spec behavior)\n\t\t\t\t\t\t\t\t\t\tif ( handler !== Identity ) {\n\t\t\t\t\t\t\t\t\t\t\tthat = undefined;\n\t\t\t\t\t\t\t\t\t\t\targs = [ returned ];\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t// Process the value(s)\n\t\t\t\t\t\t\t\t\t\t// Default process is resolve\n\t\t\t\t\t\t\t\t\t\t( special || deferred.resolveWith )( that, args );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t// Only normal processors (resolve) catch and reject exceptions\n\t\t\t\t\t\t\t\tprocess = special ?\n\t\t\t\t\t\t\t\t\tmightThrow :\n\t\t\t\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\tmightThrow();\n\t\t\t\t\t\t\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\t\t\t\t\t\t\tif ( jQuery.Deferred.exceptionHook ) {\n\t\t\t\t\t\t\t\t\t\t\t\tjQuery.Deferred.exceptionHook( e,\n\t\t\t\t\t\t\t\t\t\t\t\t\tprocess.stackTrace );\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.3.3.4.1\n\t\t\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-61\n\t\t\t\t\t\t\t\t\t\t\t// Ignore post-resolution exceptions\n\t\t\t\t\t\t\t\t\t\t\tif ( depth + 1 >= maxDepth ) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t// Only substitute handlers pass on context\n\t\t\t\t\t\t\t\t\t\t\t\t// and multiple values (non-spec behavior)\n\t\t\t\t\t\t\t\t\t\t\t\tif ( handler !== Thrower ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tthat = undefined;\n\t\t\t\t\t\t\t\t\t\t\t\t\targs = [ e ];\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tdeferred.rejectWith( that, args );\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.3.3.1\n\t\t\t\t\t\t\t// https://promisesaplus.com/#point-57\n\t\t\t\t\t\t\t// Re-resolve promises immediately to dodge false rejection from\n\t\t\t\t\t\t\t// subsequent errors\n\t\t\t\t\t\t\tif ( depth ) {\n\t\t\t\t\t\t\t\tprocess();\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// Call an optional hook to record the stack, in case of exception\n\t\t\t\t\t\t\t\t// since it's otherwise lost when execution goes async\n\t\t\t\t\t\t\t\tif ( jQuery.Deferred.getStackHook ) {\n\t\t\t\t\t\t\t\t\tprocess.stackTrace = jQuery.Deferred.getStackHook();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\twindow.setTimeout( process );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn jQuery.Deferred( function( newDefer ) {\n\n\t\t\t\t\t\t// progress_handlers.add( ... )\n\t\t\t\t\t\ttuples[ 0 ][ 3 ].add(\n\t\t\t\t\t\t\tresolve(\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\tnewDefer,\n\t\t\t\t\t\t\t\tisFunction( onProgress ) ?\n\t\t\t\t\t\t\t\t\tonProgress :\n\t\t\t\t\t\t\t\t\tIdentity,\n\t\t\t\t\t\t\t\tnewDefer.notifyWith\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// fulfilled_handlers.add( ... )\n\t\t\t\t\t\ttuples[ 1 ][ 3 ].add(\n\t\t\t\t\t\t\tresolve(\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\tnewDefer,\n\t\t\t\t\t\t\t\tisFunction( onFulfilled ) ?\n\t\t\t\t\t\t\t\t\tonFulfilled :\n\t\t\t\t\t\t\t\t\tIdentity\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// rejected_handlers.add( ... )\n\t\t\t\t\t\ttuples[ 2 ][ 3 ].add(\n\t\t\t\t\t\t\tresolve(\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\tnewDefer,\n\t\t\t\t\t\t\t\tisFunction( onRejected ) ?\n\t\t\t\t\t\t\t\t\tonRejected :\n\t\t\t\t\t\t\t\t\tThrower\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t} ).promise();\n\t\t\t\t},\n\n\t\t\t\t// Get a promise for this deferred\n\t\t\t\t// If obj is provided, the promise aspect is added to the object\n\t\t\t\tpromise: function( obj ) {\n\t\t\t\t\treturn obj != null ? jQuery.extend( obj, promise ) : promise;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdeferred = {};\n\n\t\t// Add list-specific methods\n\t\tjQuery.each( tuples, function( i, tuple ) {\n\t\t\tvar list = tuple[ 2 ],\n\t\t\t\tstateString = tuple[ 5 ];\n\n\t\t\t// promise.progress = list.add\n\t\t\t// promise.done = list.add\n\t\t\t// promise.fail = list.add\n\t\t\tpromise[ tuple[ 1 ] ] = list.add;\n\n\t\t\t// Handle state\n\t\t\tif ( stateString ) {\n\t\t\t\tlist.add(\n\t\t\t\t\tfunction() {\n\n\t\t\t\t\t\t// state = \"resolved\" (i.e., fulfilled)\n\t\t\t\t\t\t// state = \"rejected\"\n\t\t\t\t\t\tstate = stateString;\n\t\t\t\t\t},\n\n\t\t\t\t\t// rejected_callbacks.disable\n\t\t\t\t\t// fulfilled_callbacks.disable\n\t\t\t\t\ttuples[ 3 - i ][ 2 ].disable,\n\n\t\t\t\t\t// rejected_handlers.disable\n\t\t\t\t\t// fulfilled_handlers.disable\n\t\t\t\t\ttuples[ 3 - i ][ 3 ].disable,\n\n\t\t\t\t\t// progress_callbacks.lock\n\t\t\t\t\ttuples[ 0 ][ 2 ].lock,\n\n\t\t\t\t\t// progress_handlers.lock\n\t\t\t\t\ttuples[ 0 ][ 3 ].lock\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// progress_handlers.fire\n\t\t\t// fulfilled_handlers.fire\n\t\t\t// rejected_handlers.fire\n\t\t\tlist.add( tuple[ 3 ].fire );\n\n\t\t\t// deferred.notify = function() { deferred.notifyWith(...) }\n\t\t\t// deferred.resolve = function() { deferred.resolveWith(...) }\n\t\t\t// deferred.reject = function() { deferred.rejectWith(...) }\n\t\t\tdeferred[ tuple[ 0 ] ] = function() {\n\t\t\t\tdeferred[ tuple[ 0 ] + \"With\" ]( this === deferred ? undefined : this, arguments );\n\t\t\t\treturn this;\n\t\t\t};\n\n\t\t\t// deferred.notifyWith = list.fireWith\n\t\t\t// deferred.resolveWith = list.fireWith\n\t\t\t// deferred.rejectWith = list.fireWith\n\t\t\tdeferred[ tuple[ 0 ] + \"With\" ] = list.fireWith;\n\t\t} );\n\n\t\t// Make the deferred a promise\n\t\tpromise.promise( deferred );\n\n\t\t// Call given func if any\n\t\tif ( func ) {\n\t\t\tfunc.call( deferred, deferred );\n\t\t}\n\n\t\t// All done!\n\t\treturn deferred;\n\t},\n\n\t// Deferred helper\n\twhen: function( singleValue ) {\n\t\tvar\n\n\t\t\t// count of uncompleted subordinates\n\t\t\tremaining = arguments.length,\n\n\t\t\t// count of unprocessed arguments\n\t\t\ti = remaining,\n\n\t\t\t// subordinate fulfillment data\n\t\t\tresolveContexts = Array( i ),\n\t\t\tresolveValues = slice.call( arguments ),\n\n\t\t\t// the master Deferred\n\t\t\tmaster = jQuery.Deferred(),\n\n\t\t\t// subordinate callback factory\n\t\t\tupdateFunc = function( i ) {\n\t\t\t\treturn function( value ) {\n\t\t\t\t\tresolveContexts[ i ] = this;\n\t\t\t\t\tresolveValues[ i ] = arguments.length > 1 ? slice.call( arguments ) : value;\n\t\t\t\t\tif ( !( --remaining ) ) {\n\t\t\t\t\t\tmaster.resolveWith( resolveContexts, resolveValues );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\n\t\t// Single- and empty arguments are adopted like Promise.resolve\n\t\tif ( remaining <= 1 ) {\n\t\t\tadoptValue( singleValue, master.done( updateFunc( i ) ).resolve, master.reject,\n\t\t\t\t!remaining );\n\n\t\t\t// Use .then() to unwrap secondary thenables (cf. gh-3000)\n\t\t\tif ( master.state() === \"pending\" ||\n\t\t\t\tisFunction( resolveValues[ i ] && resolveValues[ i ].then ) ) {\n\n\t\t\t\treturn master.then();\n\t\t\t}\n\t\t}\n\n\t\t// Multiple arguments are aggregated like Promise.all array elements\n\t\twhile ( i-- ) {\n\t\t\tadoptValue( resolveValues[ i ], updateFunc( i ), master.reject );\n\t\t}\n\n\t\treturn master.promise();\n\t}\n} );\n\n\n// These usually indicate a programmer mistake during development,\n// warn about them ASAP rather than swallowing them by default.\nvar rerrorNames = /^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;\n\njQuery.Deferred.exceptionHook = function( error, stack ) {\n\n\t// Support: IE 8 - 9 only\n\t// Console exists when dev tools are open, which can happen at any time\n\tif ( window.console && window.console.warn && error && rerrorNames.test( error.name ) ) {\n\t\twindow.console.warn( \"jQuery.Deferred exception: \" + error.message, error.stack, stack );\n\t}\n};\n\n\n\n\njQuery.readyException = function( error ) {\n\twindow.setTimeout( function() {\n\t\tthrow error;\n\t} );\n};\n\n\n\n\n// The deferred used on DOM ready\nvar readyList = jQuery.Deferred();\n\njQuery.fn.ready = function( fn ) {\n\n\treadyList\n\t\t.then( fn )\n\n\t\t// Wrap jQuery.readyException in a function so that the lookup\n\t\t// happens at the time of error handling instead of callback\n\t\t// registration.\n\t\t.catch( function( error ) {\n\t\t\tjQuery.readyException( error );\n\t\t} );\n\n\treturn this;\n};\n\njQuery.extend( {\n\n\t// Is the DOM ready to be used? Set to true once it occurs.\n\tisReady: false,\n\n\t// A counter to track how many items to wait for before\n\t// the ready event fires. See #6781\n\treadyWait: 1,\n\n\t// Handle when the DOM is ready\n\tready: function( wait ) {\n\n\t\t// Abort if there are pending holds or we're already ready\n\t\tif ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Remember that the DOM is ready\n\t\tjQuery.isReady = true;\n\n\t\t// If a normal DOM Ready event fired, decrement, and wait if need be\n\t\tif ( wait !== true && --jQuery.readyWait > 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If there are functions bound, to execute\n\t\treadyList.resolveWith( document, [ jQuery ] );\n\t}\n} );\n\njQuery.ready.then = readyList.then;\n\n// The ready event handler and self cleanup method\nfunction completed() {\n\tdocument.removeEventListener( \"DOMContentLoaded\", completed );\n\twindow.removeEventListener( \"load\", completed );\n\tjQuery.ready();\n}\n\n// Catch cases where $(document).ready() is called\n// after the browser event has already occurred.\n// Support: IE <=9 - 10 only\n// Older IE sometimes signals \"interactive\" too soon\nif ( document.readyState === \"complete\" ||\n\t( document.readyState !== \"loading\" && !document.documentElement.doScroll ) ) {\n\n\t// Handle it asynchronously to allow scripts the opportunity to delay ready\n\twindow.setTimeout( jQuery.ready );\n\n} else {\n\n\t// Use the handy event callback\n\tdocument.addEventListener( \"DOMContentLoaded\", completed );\n\n\t// A fallback to window.onload, that will always work\n\twindow.addEventListener( \"load\", completed );\n}\n\n\n\n\n// Multifunctional method to get and set values of a collection\n// The value/s can optionally be executed if it's a function\nvar access = function( elems, fn, key, value, chainable, emptyGet, raw ) {\n\tvar i = 0,\n\t\tlen = elems.length,\n\t\tbulk = key == null;\n\n\t// Sets many values\n\tif ( toType( key ) === \"object\" ) {\n\t\tchainable = true;\n\t\tfor ( i in key ) {\n\t\t\taccess( elems, fn, i, key[ i ], true, emptyGet, raw );\n\t\t}\n\n\t// Sets one value\n\t} else if ( value !== undefined ) {\n\t\tchainable = true;\n\n\t\tif ( !isFunction( value ) ) {\n\t\t\traw = true;\n\t\t}\n\n\t\tif ( bulk ) {\n\n\t\t\t// Bulk operations run against the entire set\n\t\t\tif ( raw ) {\n\t\t\t\tfn.call( elems, value );\n\t\t\t\tfn = null;\n\n\t\t\t// ...except when executing function values\n\t\t\t} else {\n\t\t\t\tbulk = fn;\n\t\t\t\tfn = function( elem, key, value ) {\n\t\t\t\t\treturn bulk.call( jQuery( elem ), value );\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tif ( fn ) {\n\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\tfn(\n\t\t\t\t\telems[ i ], key, raw ?\n\t\t\t\t\tvalue :\n\t\t\t\t\tvalue.call( elems[ i ], i, fn( elems[ i ], key ) )\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( chainable ) {\n\t\treturn elems;\n\t}\n\n\t// Gets\n\tif ( bulk ) {\n\t\treturn fn.call( elems );\n\t}\n\n\treturn len ? fn( elems[ 0 ], key ) : emptyGet;\n};\n\n\n// Matches dashed string for camelizing\nvar rmsPrefix = /^-ms-/,\n\trdashAlpha = /-([a-z])/g;\n\n// Used by camelCase as callback to replace()\nfunction fcamelCase( all, letter ) {\n\treturn letter.toUpperCase();\n}\n\n// Convert dashed to camelCase; used by the css and data modules\n// Support: IE <=9 - 11, Edge 12 - 15\n// Microsoft forgot to hump their vendor prefix (#9572)\nfunction camelCase( string ) {\n\treturn string.replace( rmsPrefix, \"ms-\" ).replace( rdashAlpha, fcamelCase );\n}\nvar acceptData = function( owner ) {\n\n\t// Accepts only:\n\t//  - Node\n\t//    - Node.ELEMENT_NODE\n\t//    - Node.DOCUMENT_NODE\n\t//  - Object\n\t//    - Any\n\treturn owner.nodeType === 1 || owner.nodeType === 9 || !( +owner.nodeType );\n};\n\n\n\n\nfunction Data() {\n\tthis.expando = jQuery.expando + Data.uid++;\n}\n\nData.uid = 1;\n\nData.prototype = {\n\n\tcache: function( owner ) {\n\n\t\t// Check if the owner object already has a cache\n\t\tvar value = owner[ this.expando ];\n\n\t\t// If not, create one\n\t\tif ( !value ) {\n\t\t\tvalue = {};\n\n\t\t\t// We can accept data for non-element nodes in modern browsers,\n\t\t\t// but we should not, see #8335.\n\t\t\t// Always return an empty object.\n\t\t\tif ( acceptData( owner ) ) {\n\n\t\t\t\t// If it is a node unlikely to be stringify-ed or looped over\n\t\t\t\t// use plain assignment\n\t\t\t\tif ( owner.nodeType ) {\n\t\t\t\t\towner[ this.expando ] = value;\n\n\t\t\t\t// Otherwise secure it in a non-enumerable property\n\t\t\t\t// configurable must be true to allow the property to be\n\t\t\t\t// deleted when data is removed\n\t\t\t\t} else {\n\t\t\t\t\tObject.defineProperty( owner, this.expando, {\n\t\t\t\t\t\tvalue: value,\n\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn value;\n\t},\n\tset: function( owner, data, value ) {\n\t\tvar prop,\n\t\t\tcache = this.cache( owner );\n\n\t\t// Handle: [ owner, key, value ] args\n\t\t// Always use camelCase key (gh-2257)\n\t\tif ( typeof data === \"string\" ) {\n\t\t\tcache[ camelCase( data ) ] = value;\n\n\t\t// Handle: [ owner, { properties } ] args\n\t\t} else {\n\n\t\t\t// Copy the properties one-by-one to the cache object\n\t\t\tfor ( prop in data ) {\n\t\t\t\tcache[ camelCase( prop ) ] = data[ prop ];\n\t\t\t}\n\t\t}\n\t\treturn cache;\n\t},\n\tget: function( owner, key ) {\n\t\treturn key === undefined ?\n\t\t\tthis.cache( owner ) :\n\n\t\t\t// Always use camelCase key (gh-2257)\n\t\t\towner[ this.expando ] && owner[ this.expando ][ camelCase( key ) ];\n\t},\n\taccess: function( owner, key, value ) {\n\n\t\t// In cases where either:\n\t\t//\n\t\t//   1. No key was specified\n\t\t//   2. A string key was specified, but no value provided\n\t\t//\n\t\t// Take the \"read\" path and allow the get method to determine\n\t\t// which value to return, respectively either:\n\t\t//\n\t\t//   1. The entire cache object\n\t\t//   2. The data stored at the key\n\t\t//\n\t\tif ( key === undefined ||\n\t\t\t\t( ( key && typeof key === \"string\" ) && value === undefined ) ) {\n\n\t\t\treturn this.get( owner, key );\n\t\t}\n\n\t\t// When the key is not a string, or both a key and value\n\t\t// are specified, set or extend (existing objects) with either:\n\t\t//\n\t\t//   1. An object of properties\n\t\t//   2. A key and value\n\t\t//\n\t\tthis.set( owner, key, value );\n\n\t\t// Since the \"set\" path can have two possible entry points\n\t\t// return the expected data based on which path was taken[*]\n\t\treturn value !== undefined ? value : key;\n\t},\n\tremove: function( owner, key ) {\n\t\tvar i,\n\t\t\tcache = owner[ this.expando ];\n\n\t\tif ( cache === undefined ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( key !== undefined ) {\n\n\t\t\t// Support array or space separated string of keys\n\t\t\tif ( Array.isArray( key ) ) {\n\n\t\t\t\t// If key is an array of keys...\n\t\t\t\t// We always set camelCase keys, so remove that.\n\t\t\t\tkey = key.map( camelCase );\n\t\t\t} else {\n\t\t\t\tkey = camelCase( key );\n\n\t\t\t\t// If a key with the spaces exists, use it.\n\t\t\t\t// Otherwise, create an array by matching non-whitespace\n\t\t\t\tkey = key in cache ?\n\t\t\t\t\t[ key ] :\n\t\t\t\t\t( key.match( rnothtmlwhite ) || [] );\n\t\t\t}\n\n\t\t\ti = key.length;\n\n\t\t\twhile ( i-- ) {\n\t\t\t\tdelete cache[ key[ i ] ];\n\t\t\t}\n\t\t}\n\n\t\t// Remove the expando if there's no more data\n\t\tif ( key === undefined || jQuery.isEmptyObject( cache ) ) {\n\n\t\t\t// Support: Chrome <=35 - 45\n\t\t\t// Webkit & Blink performance suffers when deleting properties\n\t\t\t// from DOM nodes, so set to undefined instead\n\t\t\t// https://bugs.chromium.org/p/chromium/issues/detail?id=378607 (bug restricted)\n\t\t\tif ( owner.nodeType ) {\n\t\t\t\towner[ this.expando ] = undefined;\n\t\t\t} else {\n\t\t\t\tdelete owner[ this.expando ];\n\t\t\t}\n\t\t}\n\t},\n\thasData: function( owner ) {\n\t\tvar cache = owner[ this.expando ];\n\t\treturn cache !== undefined && !jQuery.isEmptyObject( cache );\n\t}\n};\nvar dataPriv = new Data();\n\nvar dataUser = new Data();\n\n\n\n//\tImplementation Summary\n//\n//\t1. Enforce API surface and semantic compatibility with 1.9.x branch\n//\t2. Improve the module's maintainability by reducing the storage\n//\t\tpaths to a single mechanism.\n//\t3. Use the same single mechanism to support \"private\" and \"user\" data.\n//\t4. _Never_ expose \"private\" data to user code (TODO: Drop _data, _removeData)\n//\t5. Avoid exposing implementation details on user objects (eg. expando properties)\n//\t6. Provide a clear path for implementation upgrade to WeakMap in 2014\n\nvar rbrace = /^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,\n\trmultiDash = /[A-Z]/g;\n\nfunction getData( data ) {\n\tif ( data === \"true\" ) {\n\t\treturn true;\n\t}\n\n\tif ( data === \"false\" ) {\n\t\treturn false;\n\t}\n\n\tif ( data === \"null\" ) {\n\t\treturn null;\n\t}\n\n\t// Only convert to a number if it doesn't change the string\n\tif ( data === +data + \"\" ) {\n\t\treturn +data;\n\t}\n\n\tif ( rbrace.test( data ) ) {\n\t\treturn JSON.parse( data );\n\t}\n\n\treturn data;\n}\n\nfunction dataAttr( elem, key, data ) {\n\tvar name;\n\n\t// If nothing was found internally, try to fetch any\n\t// data from the HTML5 data-* attribute\n\tif ( data === undefined && elem.nodeType === 1 ) {\n\t\tname = \"data-\" + key.replace( rmultiDash, \"-$&\" ).toLowerCase();\n\t\tdata = elem.getAttribute( name );\n\n\t\tif ( typeof data === \"string\" ) {\n\t\t\ttry {\n\t\t\t\tdata = getData( data );\n\t\t\t} catch ( e ) {}\n\n\t\t\t// Make sure we set the data so it isn't changed later\n\t\t\tdataUser.set( elem, key, data );\n\t\t} else {\n\t\t\tdata = undefined;\n\t\t}\n\t}\n\treturn data;\n}\n\njQuery.extend( {\n\thasData: function( elem ) {\n\t\treturn dataUser.hasData( elem ) || dataPriv.hasData( elem );\n\t},\n\n\tdata: function( elem, name, data ) {\n\t\treturn dataUser.access( elem, name, data );\n\t},\n\n\tremoveData: function( elem, name ) {\n\t\tdataUser.remove( elem, name );\n\t},\n\n\t// TODO: Now that all calls to _data and _removeData have been replaced\n\t// with direct calls to dataPriv methods, these can be deprecated.\n\t_data: function( elem, name, data ) {\n\t\treturn dataPriv.access( elem, name, data );\n\t},\n\n\t_removeData: function( elem, name ) {\n\t\tdataPriv.remove( elem, name );\n\t}\n} );\n\njQuery.fn.extend( {\n\tdata: function( key, value ) {\n\t\tvar i, name, data,\n\t\t\telem = this[ 0 ],\n\t\t\tattrs = elem && elem.attributes;\n\n\t\t// Gets all values\n\t\tif ( key === undefined ) {\n\t\t\tif ( this.length ) {\n\t\t\t\tdata = dataUser.get( elem );\n\n\t\t\t\tif ( elem.nodeType === 1 && !dataPriv.get( elem, \"hasDataAttrs\" ) ) {\n\t\t\t\t\ti = attrs.length;\n\t\t\t\t\twhile ( i-- ) {\n\n\t\t\t\t\t\t// Support: IE 11 only\n\t\t\t\t\t\t// The attrs elements can be null (#14894)\n\t\t\t\t\t\tif ( attrs[ i ] ) {\n\t\t\t\t\t\t\tname = attrs[ i ].name;\n\t\t\t\t\t\t\tif ( name.indexOf( \"data-\" ) === 0 ) {\n\t\t\t\t\t\t\t\tname = camelCase( name.slice( 5 ) );\n\t\t\t\t\t\t\t\tdataAttr( elem, name, data[ name ] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdataPriv.set( elem, \"hasDataAttrs\", true );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn data;\n\t\t}\n\n\t\t// Sets multiple values\n\t\tif ( typeof key === \"object\" ) {\n\t\t\treturn this.each( function() {\n\t\t\t\tdataUser.set( this, key );\n\t\t\t} );\n\t\t}\n\n\t\treturn access( this, function( value ) {\n\t\t\tvar data;\n\n\t\t\t// The calling jQuery object (element matches) is not empty\n\t\t\t// (and therefore has an element appears at this[ 0 ]) and the\n\t\t\t// `value` parameter was not undefined. An empty jQuery object\n\t\t\t// will result in `undefined` for elem = this[ 0 ] which will\n\t\t\t// throw an exception if an attempt to read a data cache is made.\n\t\t\tif ( elem && value === undefined ) {\n\n\t\t\t\t// Attempt to get data from the cache\n\t\t\t\t// The key will always be camelCased in Data\n\t\t\t\tdata = dataUser.get( elem, key );\n\t\t\t\tif ( data !== undefined ) {\n\t\t\t\t\treturn data;\n\t\t\t\t}\n\n\t\t\t\t// Attempt to \"discover\" the data in\n\t\t\t\t// HTML5 custom data-* attrs\n\t\t\t\tdata = dataAttr( elem, key );\n\t\t\t\tif ( data !== undefined ) {\n\t\t\t\t\treturn data;\n\t\t\t\t}\n\n\t\t\t\t// We tried really hard, but the data doesn't exist.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Set the data...\n\t\t\tthis.each( function() {\n\n\t\t\t\t// We always store the camelCased key\n\t\t\t\tdataUser.set( this, key, value );\n\t\t\t} );\n\t\t}, null, value, arguments.length > 1, null, true );\n\t},\n\n\tremoveData: function( key ) {\n\t\treturn this.each( function() {\n\t\t\tdataUser.remove( this, key );\n\t\t} );\n\t}\n} );\n\n\njQuery.extend( {\n\tqueue: function( elem, type, data ) {\n\t\tvar queue;\n\n\t\tif ( elem ) {\n\t\t\ttype = ( type || \"fx\" ) + \"queue\";\n\t\t\tqueue = dataPriv.get( elem, type );\n\n\t\t\t// Speed up dequeue by getting out quickly if this is just a lookup\n\t\t\tif ( data ) {\n\t\t\t\tif ( !queue || Array.isArray( data ) ) {\n\t\t\t\t\tqueue = dataPriv.access( elem, type, jQuery.makeArray( data ) );\n\t\t\t\t} else {\n\t\t\t\t\tqueue.push( data );\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn queue || [];\n\t\t}\n\t},\n\n\tdequeue: function( elem, type ) {\n\t\ttype = type || \"fx\";\n\n\t\tvar queue = jQuery.queue( elem, type ),\n\t\t\tstartLength = queue.length,\n\t\t\tfn = queue.shift(),\n\t\t\thooks = jQuery._queueHooks( elem, type ),\n\t\t\tnext = function() {\n\t\t\t\tjQuery.dequeue( elem, type );\n\t\t\t};\n\n\t\t// If the fx queue is dequeued, always remove the progress sentinel\n\t\tif ( fn === \"inprogress\" ) {\n\t\t\tfn = queue.shift();\n\t\t\tstartLength--;\n\t\t}\n\n\t\tif ( fn ) {\n\n\t\t\t// Add a progress sentinel to prevent the fx queue from being\n\t\t\t// automatically dequeued\n\t\t\tif ( type === \"fx\" ) {\n\t\t\t\tqueue.unshift( \"inprogress\" );\n\t\t\t}\n\n\t\t\t// Clear up the last queue stop function\n\t\t\tdelete hooks.stop;\n\t\t\tfn.call( elem, next, hooks );\n\t\t}\n\n\t\tif ( !startLength && hooks ) {\n\t\t\thooks.empty.fire();\n\t\t}\n\t},\n\n\t// Not public - generate a queueHooks object, or return the current one\n\t_queueHooks: function( elem, type ) {\n\t\tvar key = type + \"queueHooks\";\n\t\treturn dataPriv.get( elem, key ) || dataPriv.access( elem, key, {\n\t\t\tempty: jQuery.Callbacks( \"once memory\" ).add( function() {\n\t\t\t\tdataPriv.remove( elem, [ type + \"queue\", key ] );\n\t\t\t} )\n\t\t} );\n\t}\n} );\n\njQuery.fn.extend( {\n\tqueue: function( type, data ) {\n\t\tvar setter = 2;\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tdata = type;\n\t\t\ttype = \"fx\";\n\t\t\tsetter--;\n\t\t}\n\n\t\tif ( arguments.length < setter ) {\n\t\t\treturn jQuery.queue( this[ 0 ], type );\n\t\t}\n\n\t\treturn data === undefined ?\n\t\t\tthis :\n\t\t\tthis.each( function() {\n\t\t\t\tvar queue = jQuery.queue( this, type, data );\n\n\t\t\t\t// Ensure a hooks for this queue\n\t\t\t\tjQuery._queueHooks( this, type );\n\n\t\t\t\tif ( type === \"fx\" && queue[ 0 ] !== \"inprogress\" ) {\n\t\t\t\t\tjQuery.dequeue( this, type );\n\t\t\t\t}\n\t\t\t} );\n\t},\n\tdequeue: function( type ) {\n\t\treturn this.each( function() {\n\t\t\tjQuery.dequeue( this, type );\n\t\t} );\n\t},\n\tclearQueue: function( type ) {\n\t\treturn this.queue( type || \"fx\", [] );\n\t},\n\n\t// Get a promise resolved when queues of a certain type\n\t// are emptied (fx is the type by default)\n\tpromise: function( type, obj ) {\n\t\tvar tmp,\n\t\t\tcount = 1,\n\t\t\tdefer = jQuery.Deferred(),\n\t\t\telements = this,\n\t\t\ti = this.length,\n\t\t\tresolve = function() {\n\t\t\t\tif ( !( --count ) ) {\n\t\t\t\t\tdefer.resolveWith( elements, [ elements ] );\n\t\t\t\t}\n\t\t\t};\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tobj = type;\n\t\t\ttype = undefined;\n\t\t}\n\t\ttype = type || \"fx\";\n\n\t\twhile ( i-- ) {\n\t\t\ttmp = dataPriv.get( elements[ i ], type + \"queueHooks\" );\n\t\t\tif ( tmp && tmp.empty ) {\n\t\t\t\tcount++;\n\t\t\t\ttmp.empty.add( resolve );\n\t\t\t}\n\t\t}\n\t\tresolve();\n\t\treturn defer.promise( obj );\n\t}\n} );\nvar pnum = ( /[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/ ).source;\n\nvar rcssNum = new RegExp( \"^(?:([+-])=|)(\" + pnum + \")([a-z%]*)$\", \"i\" );\n\n\nvar cssExpand = [ \"Top\", \"Right\", \"Bottom\", \"Left\" ];\n\nvar isHiddenWithinTree = function( elem, el ) {\n\n\t\t// isHiddenWithinTree might be called from jQuery#filter function;\n\t\t// in that case, element will be second argument\n\t\telem = el || elem;\n\n\t\t// Inline style trumps all\n\t\treturn elem.style.display === \"none\" ||\n\t\t\telem.style.display === \"\" &&\n\n\t\t\t// Otherwise, check computed style\n\t\t\t// Support: Firefox <=43 - 45\n\t\t\t// Disconnected elements can have computed display: none, so first confirm that elem is\n\t\t\t// in the document.\n\t\t\tjQuery.contains( elem.ownerDocument, elem ) &&\n\n\t\t\tjQuery.css( elem, \"display\" ) === \"none\";\n\t};\n\nvar swap = function( elem, options, callback, args ) {\n\tvar ret, name,\n\t\told = {};\n\n\t// Remember the old values, and insert the new ones\n\tfor ( name in options ) {\n\t\told[ name ] = elem.style[ name ];\n\t\telem.style[ name ] = options[ name ];\n\t}\n\n\tret = callback.apply( elem, args || [] );\n\n\t// Revert the old values\n\tfor ( name in options ) {\n\t\telem.style[ name ] = old[ name ];\n\t}\n\n\treturn ret;\n};\n\n\n\n\nfunction adjustCSS( elem, prop, valueParts, tween ) {\n\tvar adjusted, scale,\n\t\tmaxIterations = 20,\n\t\tcurrentValue = tween ?\n\t\t\tfunction() {\n\t\t\t\treturn tween.cur();\n\t\t\t} :\n\t\t\tfunction() {\n\t\t\t\treturn jQuery.css( elem, prop, \"\" );\n\t\t\t},\n\t\tinitial = currentValue(),\n\t\tunit = valueParts && valueParts[ 3 ] || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" ),\n\n\t\t// Starting value computation is required for potential unit mismatches\n\t\tinitialInUnit = ( jQuery.cssNumber[ prop ] || unit !== \"px\" && +initial ) &&\n\t\t\trcssNum.exec( jQuery.css( elem, prop ) );\n\n\tif ( initialInUnit && initialInUnit[ 3 ] !== unit ) {\n\n\t\t// Support: Firefox <=54\n\t\t// Halve the iteration target value to prevent interference from CSS upper bounds (gh-2144)\n\t\tinitial = initial / 2;\n\n\t\t// Trust units reported by jQuery.css\n\t\tunit = unit || initialInUnit[ 3 ];\n\n\t\t// Iteratively approximate from a nonzero starting point\n\t\tinitialInUnit = +initial || 1;\n\n\t\twhile ( maxIterations-- ) {\n\n\t\t\t// Evaluate and update our best guess (doubling guesses that zero out).\n\t\t\t// Finish if the scale equals or crosses 1 (making the old*new product non-positive).\n\t\t\tjQuery.style( elem, prop, initialInUnit + unit );\n\t\t\tif ( ( 1 - scale ) * ( 1 - ( scale = currentValue() / initial || 0.5 ) ) <= 0 ) {\n\t\t\t\tmaxIterations = 0;\n\t\t\t}\n\t\t\tinitialInUnit = initialInUnit / scale;\n\n\t\t}\n\n\t\tinitialInUnit = initialInUnit * 2;\n\t\tjQuery.style( elem, prop, initialInUnit + unit );\n\n\t\t// Make sure we update the tween properties later on\n\t\tvalueParts = valueParts || [];\n\t}\n\n\tif ( valueParts ) {\n\t\tinitialInUnit = +initialInUnit || +initial || 0;\n\n\t\t// Apply relative offset (+=/-=) if specified\n\t\tadjusted = valueParts[ 1 ] ?\n\t\t\tinitialInUnit + ( valueParts[ 1 ] + 1 ) * valueParts[ 2 ] :\n\t\t\t+valueParts[ 2 ];\n\t\tif ( tween ) {\n\t\t\ttween.unit = unit;\n\t\t\ttween.start = initialInUnit;\n\t\t\ttween.end = adjusted;\n\t\t}\n\t}\n\treturn adjusted;\n}\n\n\nvar defaultDisplayMap = {};\n\nfunction getDefaultDisplay( elem ) {\n\tvar temp,\n\t\tdoc = elem.ownerDocument,\n\t\tnodeName = elem.nodeName,\n\t\tdisplay = defaultDisplayMap[ nodeName ];\n\n\tif ( display ) {\n\t\treturn display;\n\t}\n\n\ttemp = doc.body.appendChild( doc.createElement( nodeName ) );\n\tdisplay = jQuery.css( temp, \"display\" );\n\n\ttemp.parentNode.removeChild( temp );\n\n\tif ( display === \"none\" ) {\n\t\tdisplay = \"block\";\n\t}\n\tdefaultDisplayMap[ nodeName ] = display;\n\n\treturn display;\n}\n\nfunction showHide( elements, show ) {\n\tvar display, elem,\n\t\tvalues = [],\n\t\tindex = 0,\n\t\tlength = elements.length;\n\n\t// Determine new display value for elements that need to change\n\tfor ( ; index < length; index++ ) {\n\t\telem = elements[ index ];\n\t\tif ( !elem.style ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tdisplay = elem.style.display;\n\t\tif ( show ) {\n\n\t\t\t// Since we force visibility upon cascade-hidden elements, an immediate (and slow)\n\t\t\t// check is required in this first loop unless we have a nonempty display value (either\n\t\t\t// inline or about-to-be-restored)\n\t\t\tif ( display === \"none\" ) {\n\t\t\t\tvalues[ index ] = dataPriv.get( elem, \"display\" ) || null;\n\t\t\t\tif ( !values[ index ] ) {\n\t\t\t\t\telem.style.display = \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ( elem.style.display === \"\" && isHiddenWithinTree( elem ) ) {\n\t\t\t\tvalues[ index ] = getDefaultDisplay( elem );\n\t\t\t}\n\t\t} else {\n\t\t\tif ( display !== \"none\" ) {\n\t\t\t\tvalues[ index ] = \"none\";\n\n\t\t\t\t// Remember what we're overwriting\n\t\t\t\tdataPriv.set( elem, \"display\", display );\n\t\t\t}\n\t\t}\n\t}\n\n\t// Set the display of the elements in a second loop to avoid constant reflow\n\tfor ( index = 0; index < length; index++ ) {\n\t\tif ( values[ index ] != null ) {\n\t\t\telements[ index ].style.display = values[ index ];\n\t\t}\n\t}\n\n\treturn elements;\n}\n\njQuery.fn.extend( {\n\tshow: function() {\n\t\treturn showHide( this, true );\n\t},\n\thide: function() {\n\t\treturn showHide( this );\n\t},\n\ttoggle: function( state ) {\n\t\tif ( typeof state === \"boolean\" ) {\n\t\t\treturn state ? this.show() : this.hide();\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tif ( isHiddenWithinTree( this ) ) {\n\t\t\t\tjQuery( this ).show();\n\t\t\t} else {\n\t\t\t\tjQuery( this ).hide();\n\t\t\t}\n\t\t} );\n\t}\n} );\nvar rcheckableType = ( /^(?:checkbox|radio)$/i );\n\nvar rtagName = ( /<([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]+)/i );\n\nvar rscriptType = ( /^$|^module$|\\/(?:java|ecma)script/i );\n\n\n\n// We have to close these tags to support XHTML (#13200)\nvar wrapMap = {\n\n\t// Support: IE <=9 only\n\toption: [ 1, \"<select multiple='multiple'>\", \"</select>\" ],\n\n\t// XHTML parsers do not magically insert elements in the\n\t// same way that tag soup parsers do. So we cannot shorten\n\t// this by omitting <tbody> or other required elements.\n\tthead: [ 1, \"<table>\", \"</table>\" ],\n\tcol: [ 2, \"<table><colgroup>\", \"</colgroup></table>\" ],\n\ttr: [ 2, \"<table><tbody>\", \"</tbody></table>\" ],\n\ttd: [ 3, \"<table><tbody><tr>\", \"</tr></tbody></table>\" ],\n\n\t_default: [ 0, \"\", \"\" ]\n};\n\n// Support: IE <=9 only\nwrapMap.optgroup = wrapMap.option;\n\nwrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;\nwrapMap.th = wrapMap.td;\n\n\nfunction getAll( context, tag ) {\n\n\t// Support: IE <=9 - 11 only\n\t// Use typeof to avoid zero-argument method invocation on host objects (#15151)\n\tvar ret;\n\n\tif ( typeof context.getElementsByTagName !== \"undefined\" ) {\n\t\tret = context.getElementsByTagName( tag || \"*\" );\n\n\t} else if ( typeof context.querySelectorAll !== \"undefined\" ) {\n\t\tret = context.querySelectorAll( tag || \"*\" );\n\n\t} else {\n\t\tret = [];\n\t}\n\n\tif ( tag === undefined || tag && nodeName( context, tag ) ) {\n\t\treturn jQuery.merge( [ context ], ret );\n\t}\n\n\treturn ret;\n}\n\n\n// Mark scripts as having already been evaluated\nfunction setGlobalEval( elems, refElements ) {\n\tvar i = 0,\n\t\tl = elems.length;\n\n\tfor ( ; i < l; i++ ) {\n\t\tdataPriv.set(\n\t\t\telems[ i ],\n\t\t\t\"globalEval\",\n\t\t\t!refElements || dataPriv.get( refElements[ i ], \"globalEval\" )\n\t\t);\n\t}\n}\n\n\nvar rhtml = /<|&#?\\w+;/;\n\nfunction buildFragment( elems, context, scripts, selection, ignored ) {\n\tvar elem, tmp, tag, wrap, contains, j,\n\t\tfragment = context.createDocumentFragment(),\n\t\tnodes = [],\n\t\ti = 0,\n\t\tl = elems.length;\n\n\tfor ( ; i < l; i++ ) {\n\t\telem = elems[ i ];\n\n\t\tif ( elem || elem === 0 ) {\n\n\t\t\t// Add nodes directly\n\t\t\tif ( toType( elem ) === \"object\" ) {\n\n\t\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t\t// push.apply(_, arraylike) throws on ancient WebKit\n\t\t\t\tjQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );\n\n\t\t\t// Convert non-html into a text node\n\t\t\t} else if ( !rhtml.test( elem ) ) {\n\t\t\t\tnodes.push( context.createTextNode( elem ) );\n\n\t\t\t// Convert html into DOM nodes\n\t\t\t} else {\n\t\t\t\ttmp = tmp || fragment.appendChild( context.createElement( \"div\" ) );\n\n\t\t\t\t// Deserialize a standard representation\n\t\t\t\ttag = ( rtagName.exec( elem ) || [ \"\", \"\" ] )[ 1 ].toLowerCase();\n\t\t\t\twrap = wrapMap[ tag ] || wrapMap._default;\n\t\t\t\ttmp.innerHTML = wrap[ 1 ] + jQuery.htmlPrefilter( elem ) + wrap[ 2 ];\n\n\t\t\t\t// Descend through wrappers to the right content\n\t\t\t\tj = wrap[ 0 ];\n\t\t\t\twhile ( j-- ) {\n\t\t\t\t\ttmp = tmp.lastChild;\n\t\t\t\t}\n\n\t\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t\t// push.apply(_, arraylike) throws on ancient WebKit\n\t\t\t\tjQuery.merge( nodes, tmp.childNodes );\n\n\t\t\t\t// Remember the top-level container\n\t\t\t\ttmp = fragment.firstChild;\n\n\t\t\t\t// Ensure the created nodes are orphaned (#12392)\n\t\t\t\ttmp.textContent = \"\";\n\t\t\t}\n\t\t}\n\t}\n\n\t// Remove wrapper from fragment\n\tfragment.textContent = \"\";\n\n\ti = 0;\n\twhile ( ( elem = nodes[ i++ ] ) ) {\n\n\t\t// Skip elements already in the context collection (trac-4087)\n\t\tif ( selection && jQuery.inArray( elem, selection ) > -1 ) {\n\t\t\tif ( ignored ) {\n\t\t\t\tignored.push( elem );\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\n\t\tcontains = jQuery.contains( elem.ownerDocument, elem );\n\n\t\t// Append to fragment\n\t\ttmp = getAll( fragment.appendChild( elem ), \"script\" );\n\n\t\t// Preserve script evaluation history\n\t\tif ( contains ) {\n\t\t\tsetGlobalEval( tmp );\n\t\t}\n\n\t\t// Capture executables\n\t\tif ( scripts ) {\n\t\t\tj = 0;\n\t\t\twhile ( ( elem = tmp[ j++ ] ) ) {\n\t\t\t\tif ( rscriptType.test( elem.type || \"\" ) ) {\n\t\t\t\t\tscripts.push( elem );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn fragment;\n}\n\n\n( function() {\n\tvar fragment = document.createDocumentFragment(),\n\t\tdiv = fragment.appendChild( document.createElement( \"div\" ) ),\n\t\tinput = document.createElement( \"input\" );\n\n\t// Support: Android 4.0 - 4.3 only\n\t// Check state lost if the name is set (#11217)\n\t// Support: Windows Web Apps (WWA)\n\t// `name` and `type` must use .setAttribute for WWA (#14901)\n\tinput.setAttribute( \"type\", \"radio\" );\n\tinput.setAttribute( \"checked\", \"checked\" );\n\tinput.setAttribute( \"name\", \"t\" );\n\n\tdiv.appendChild( input );\n\n\t// Support: Android <=4.1 only\n\t// Older WebKit doesn't clone checked state correctly in fragments\n\tsupport.checkClone = div.cloneNode( true ).cloneNode( true ).lastChild.checked;\n\n\t// Support: IE <=11 only\n\t// Make sure textarea (and checkbox) defaultValue is properly cloned\n\tdiv.innerHTML = \"<textarea>x</textarea>\";\n\tsupport.noCloneChecked = !!div.cloneNode( true ).lastChild.defaultValue;\n} )();\nvar documentElement = document.documentElement;\n\n\n\nvar\n\trkeyEvent = /^key/,\n\trmouseEvent = /^(?:mouse|pointer|contextmenu|drag|drop)|click/,\n\trtypenamespace = /^([^.]*)(?:\\.(.+)|)/;\n\nfunction returnTrue() {\n\treturn true;\n}\n\nfunction returnFalse() {\n\treturn false;\n}\n\n// Support: IE <=9 only\n// See #13393 for more info\nfunction safeActiveElement() {\n\ttry {\n\t\treturn document.activeElement;\n\t} catch ( err ) { }\n}\n\nfunction on( elem, types, selector, data, fn, one ) {\n\tvar origFn, type;\n\n\t// Types can be a map of types/handlers\n\tif ( typeof types === \"object\" ) {\n\n\t\t// ( types-Object, selector, data )\n\t\tif ( typeof selector !== \"string\" ) {\n\n\t\t\t// ( types-Object, data )\n\t\t\tdata = data || selector;\n\t\t\tselector = undefined;\n\t\t}\n\t\tfor ( type in types ) {\n\t\t\ton( elem, type, selector, data, types[ type ], one );\n\t\t}\n\t\treturn elem;\n\t}\n\n\tif ( data == null && fn == null ) {\n\n\t\t// ( types, fn )\n\t\tfn = selector;\n\t\tdata = selector = undefined;\n\t} else if ( fn == null ) {\n\t\tif ( typeof selector === \"string\" ) {\n\n\t\t\t// ( types, selector, fn )\n\t\t\tfn = data;\n\t\t\tdata = undefined;\n\t\t} else {\n\n\t\t\t// ( types, data, fn )\n\t\t\tfn = data;\n\t\t\tdata = selector;\n\t\t\tselector = undefined;\n\t\t}\n\t}\n\tif ( fn === false ) {\n\t\tfn = returnFalse;\n\t} else if ( !fn ) {\n\t\treturn elem;\n\t}\n\n\tif ( one === 1 ) {\n\t\torigFn = fn;\n\t\tfn = function( event ) {\n\n\t\t\t// Can use an empty set, since event contains the info\n\t\t\tjQuery().off( event );\n\t\t\treturn origFn.apply( this, arguments );\n\t\t};\n\n\t\t// Use same guid so caller can remove using origFn\n\t\tfn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );\n\t}\n\treturn elem.each( function() {\n\t\tjQuery.event.add( this, types, fn, data, selector );\n\t} );\n}\n\n/*\n * Helper functions for managing events -- not part of the public interface.\n * Props to Dean Edwards' addEvent library for many of the ideas.\n */\njQuery.event = {\n\n\tglobal: {},\n\n\tadd: function( elem, types, handler, data, selector ) {\n\n\t\tvar handleObjIn, eventHandle, tmp,\n\t\t\tevents, t, handleObj,\n\t\t\tspecial, handlers, type, namespaces, origType,\n\t\t\telemData = dataPriv.get( elem );\n\n\t\t// Don't attach events to noData or text/comment nodes (but allow plain objects)\n\t\tif ( !elemData ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Caller can pass in an object of custom data in lieu of the handler\n\t\tif ( handler.handler ) {\n\t\t\thandleObjIn = handler;\n\t\t\thandler = handleObjIn.handler;\n\t\t\tselector = handleObjIn.selector;\n\t\t}\n\n\t\t// Ensure that invalid selectors throw exceptions at attach time\n\t\t// Evaluate against documentElement in case elem is a non-element node (e.g., document)\n\t\tif ( selector ) {\n\t\t\tjQuery.find.matchesSelector( documentElement, selector );\n\t\t}\n\n\t\t// Make sure that the handler has a unique ID, used to find/remove it later\n\t\tif ( !handler.guid ) {\n\t\t\thandler.guid = jQuery.guid++;\n\t\t}\n\n\t\t// Init the element's event structure and main handler, if this is the first\n\t\tif ( !( events = elemData.events ) ) {\n\t\t\tevents = elemData.events = {};\n\t\t}\n\t\tif ( !( eventHandle = elemData.handle ) ) {\n\t\t\teventHandle = elemData.handle = function( e ) {\n\n\t\t\t\t// Discard the second event of a jQuery.event.trigger() and\n\t\t\t\t// when an event is called after a page has unloaded\n\t\t\t\treturn typeof jQuery !== \"undefined\" && jQuery.event.triggered !== e.type ?\n\t\t\t\t\tjQuery.event.dispatch.apply( elem, arguments ) : undefined;\n\t\t\t};\n\t\t}\n\n\t\t// Handle multiple events separated by a space\n\t\ttypes = ( types || \"\" ).match( rnothtmlwhite ) || [ \"\" ];\n\t\tt = types.length;\n\t\twhile ( t-- ) {\n\t\t\ttmp = rtypenamespace.exec( types[ t ] ) || [];\n\t\t\ttype = origType = tmp[ 1 ];\n\t\t\tnamespaces = ( tmp[ 2 ] || \"\" ).split( \".\" ).sort();\n\n\t\t\t// There *must* be a type, no attaching namespace-only handlers\n\t\t\tif ( !type ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// If event changes its type, use the special event handlers for the changed type\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\n\t\t\t// If selector defined, determine special event api type, otherwise given type\n\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n\n\t\t\t// Update special based on newly reset type\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\n\t\t\t// handleObj is passed to all event handlers\n\t\t\thandleObj = jQuery.extend( {\n\t\t\t\ttype: type,\n\t\t\t\torigType: origType,\n\t\t\t\tdata: data,\n\t\t\t\thandler: handler,\n\t\t\t\tguid: handler.guid,\n\t\t\t\tselector: selector,\n\t\t\t\tneedsContext: selector && jQuery.expr.match.needsContext.test( selector ),\n\t\t\t\tnamespace: namespaces.join( \".\" )\n\t\t\t}, handleObjIn );\n\n\t\t\t// Init the event handler queue if we're the first\n\t\t\tif ( !( handlers = events[ type ] ) ) {\n\t\t\t\thandlers = events[ type ] = [];\n\t\t\t\thandlers.delegateCount = 0;\n\n\t\t\t\t// Only use addEventListener if the special events handler returns false\n\t\t\t\tif ( !special.setup ||\n\t\t\t\t\tspecial.setup.call( elem, data, namespaces, eventHandle ) === false ) {\n\n\t\t\t\t\tif ( elem.addEventListener ) {\n\t\t\t\t\t\telem.addEventListener( type, eventHandle );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( special.add ) {\n\t\t\t\tspecial.add.call( elem, handleObj );\n\n\t\t\t\tif ( !handleObj.handler.guid ) {\n\t\t\t\t\thandleObj.handler.guid = handler.guid;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add to the element's handler list, delegates in front\n\t\t\tif ( selector ) {\n\t\t\t\thandlers.splice( handlers.delegateCount++, 0, handleObj );\n\t\t\t} else {\n\t\t\t\thandlers.push( handleObj );\n\t\t\t}\n\n\t\t\t// Keep track of which events have ever been used, for event optimization\n\t\t\tjQuery.event.global[ type ] = true;\n\t\t}\n\n\t},\n\n\t// Detach an event or set of events from an element\n\tremove: function( elem, types, handler, selector, mappedTypes ) {\n\n\t\tvar j, origCount, tmp,\n\t\t\tevents, t, handleObj,\n\t\t\tspecial, handlers, type, namespaces, origType,\n\t\t\telemData = dataPriv.hasData( elem ) && dataPriv.get( elem );\n\n\t\tif ( !elemData || !( events = elemData.events ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Once for each type.namespace in types; type may be omitted\n\t\ttypes = ( types || \"\" ).match( rnothtmlwhite ) || [ \"\" ];\n\t\tt = types.length;\n\t\twhile ( t-- ) {\n\t\t\ttmp = rtypenamespace.exec( types[ t ] ) || [];\n\t\t\ttype = origType = tmp[ 1 ];\n\t\t\tnamespaces = ( tmp[ 2 ] || \"\" ).split( \".\" ).sort();\n\n\t\t\t// Unbind all events (on this namespace, if provided) for the element\n\t\t\tif ( !type ) {\n\t\t\t\tfor ( type in events ) {\n\t\t\t\t\tjQuery.event.remove( elem, type + types[ t ], handler, selector, true );\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n\t\t\thandlers = events[ type ] || [];\n\t\t\ttmp = tmp[ 2 ] &&\n\t\t\t\tnew RegExp( \"(^|\\\\.)\" + namespaces.join( \"\\\\.(?:.*\\\\.|)\" ) + \"(\\\\.|$)\" );\n\n\t\t\t// Remove matching events\n\t\t\torigCount = j = handlers.length;\n\t\t\twhile ( j-- ) {\n\t\t\t\thandleObj = handlers[ j ];\n\n\t\t\t\tif ( ( mappedTypes || origType === handleObj.origType ) &&\n\t\t\t\t\t( !handler || handler.guid === handleObj.guid ) &&\n\t\t\t\t\t( !tmp || tmp.test( handleObj.namespace ) ) &&\n\t\t\t\t\t( !selector || selector === handleObj.selector ||\n\t\t\t\t\t\tselector === \"**\" && handleObj.selector ) ) {\n\t\t\t\t\thandlers.splice( j, 1 );\n\n\t\t\t\t\tif ( handleObj.selector ) {\n\t\t\t\t\t\thandlers.delegateCount--;\n\t\t\t\t\t}\n\t\t\t\t\tif ( special.remove ) {\n\t\t\t\t\t\tspecial.remove.call( elem, handleObj );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove generic event handler if we removed something and no more handlers exist\n\t\t\t// (avoids potential for endless recursion during removal of special event handlers)\n\t\t\tif ( origCount && !handlers.length ) {\n\t\t\t\tif ( !special.teardown ||\n\t\t\t\t\tspecial.teardown.call( elem, namespaces, elemData.handle ) === false ) {\n\n\t\t\t\t\tjQuery.removeEvent( elem, type, elemData.handle );\n\t\t\t\t}\n\n\t\t\t\tdelete events[ type ];\n\t\t\t}\n\t\t}\n\n\t\t// Remove data and the expando if it's no longer used\n\t\tif ( jQuery.isEmptyObject( events ) ) {\n\t\t\tdataPriv.remove( elem, \"handle events\" );\n\t\t}\n\t},\n\n\tdispatch: function( nativeEvent ) {\n\n\t\t// Make a writable jQuery.Event from the native event object\n\t\tvar event = jQuery.event.fix( nativeEvent );\n\n\t\tvar i, j, ret, matched, handleObj, handlerQueue,\n\t\t\targs = new Array( arguments.length ),\n\t\t\thandlers = ( dataPriv.get( this, \"events\" ) || {} )[ event.type ] || [],\n\t\t\tspecial = jQuery.event.special[ event.type ] || {};\n\n\t\t// Use the fix-ed jQuery.Event rather than the (read-only) native event\n\t\targs[ 0 ] = event;\n\n\t\tfor ( i = 1; i < arguments.length; i++ ) {\n\t\t\targs[ i ] = arguments[ i ];\n\t\t}\n\n\t\tevent.delegateTarget = this;\n\n\t\t// Call the preDispatch hook for the mapped type, and let it bail if desired\n\t\tif ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Determine handlers\n\t\thandlerQueue = jQuery.event.handlers.call( this, event, handlers );\n\n\t\t// Run delegates first; they may want to stop propagation beneath us\n\t\ti = 0;\n\t\twhile ( ( matched = handlerQueue[ i++ ] ) && !event.isPropagationStopped() ) {\n\t\t\tevent.currentTarget = matched.elem;\n\n\t\t\tj = 0;\n\t\t\twhile ( ( handleObj = matched.handlers[ j++ ] ) &&\n\t\t\t\t!event.isImmediatePropagationStopped() ) {\n\n\t\t\t\t// Triggered event must either 1) have no namespace, or 2) have namespace(s)\n\t\t\t\t// a subset or equal to those in the bound event (both can have no namespace).\n\t\t\t\tif ( !event.rnamespace || event.rnamespace.test( handleObj.namespace ) ) {\n\n\t\t\t\t\tevent.handleObj = handleObj;\n\t\t\t\t\tevent.data = handleObj.data;\n\n\t\t\t\t\tret = ( ( jQuery.event.special[ handleObj.origType ] || {} ).handle ||\n\t\t\t\t\t\thandleObj.handler ).apply( matched.elem, args );\n\n\t\t\t\t\tif ( ret !== undefined ) {\n\t\t\t\t\t\tif ( ( event.result = ret ) === false ) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Call the postDispatch hook for the mapped type\n\t\tif ( special.postDispatch ) {\n\t\t\tspecial.postDispatch.call( this, event );\n\t\t}\n\n\t\treturn event.result;\n\t},\n\n\thandlers: function( event, handlers ) {\n\t\tvar i, handleObj, sel, matchedHandlers, matchedSelectors,\n\t\t\thandlerQueue = [],\n\t\t\tdelegateCount = handlers.delegateCount,\n\t\t\tcur = event.target;\n\n\t\t// Find delegate handlers\n\t\tif ( delegateCount &&\n\n\t\t\t// Support: IE <=9\n\t\t\t// Black-hole SVG <use> instance trees (trac-13180)\n\t\t\tcur.nodeType &&\n\n\t\t\t// Support: Firefox <=42\n\t\t\t// Suppress spec-violating clicks indicating a non-primary pointer button (trac-3861)\n\t\t\t// https://www.w3.org/TR/DOM-Level-3-Events/#event-type-click\n\t\t\t// Support: IE 11 only\n\t\t\t// ...but not arrow key \"clicks\" of radio inputs, which can have `button` -1 (gh-2343)\n\t\t\t!( event.type === \"click\" && event.button >= 1 ) ) {\n\n\t\t\tfor ( ; cur !== this; cur = cur.parentNode || this ) {\n\n\t\t\t\t// Don't check non-elements (#13208)\n\t\t\t\t// Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)\n\t\t\t\tif ( cur.nodeType === 1 && !( event.type === \"click\" && cur.disabled === true ) ) {\n\t\t\t\t\tmatchedHandlers = [];\n\t\t\t\t\tmatchedSelectors = {};\n\t\t\t\t\tfor ( i = 0; i < delegateCount; i++ ) {\n\t\t\t\t\t\thandleObj = handlers[ i ];\n\n\t\t\t\t\t\t// Don't conflict with Object.prototype properties (#13203)\n\t\t\t\t\t\tsel = handleObj.selector + \" \";\n\n\t\t\t\t\t\tif ( matchedSelectors[ sel ] === undefined ) {\n\t\t\t\t\t\t\tmatchedSelectors[ sel ] = handleObj.needsContext ?\n\t\t\t\t\t\t\t\tjQuery( sel, this ).index( cur ) > -1 :\n\t\t\t\t\t\t\t\tjQuery.find( sel, this, null, [ cur ] ).length;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( matchedSelectors[ sel ] ) {\n\t\t\t\t\t\t\tmatchedHandlers.push( handleObj );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ( matchedHandlers.length ) {\n\t\t\t\t\t\thandlerQueue.push( { elem: cur, handlers: matchedHandlers } );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Add the remaining (directly-bound) handlers\n\t\tcur = this;\n\t\tif ( delegateCount < handlers.length ) {\n\t\t\thandlerQueue.push( { elem: cur, handlers: handlers.slice( delegateCount ) } );\n\t\t}\n\n\t\treturn handlerQueue;\n\t},\n\n\taddProp: function( name, hook ) {\n\t\tObject.defineProperty( jQuery.Event.prototype, name, {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\n\t\t\tget: isFunction( hook ) ?\n\t\t\t\tfunction() {\n\t\t\t\t\tif ( this.originalEvent ) {\n\t\t\t\t\t\t\treturn hook( this.originalEvent );\n\t\t\t\t\t}\n\t\t\t\t} :\n\t\t\t\tfunction() {\n\t\t\t\t\tif ( this.originalEvent ) {\n\t\t\t\t\t\t\treturn this.originalEvent[ name ];\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\tset: function( value ) {\n\t\t\t\tObject.defineProperty( this, name, {\n\t\t\t\t\tenumerable: true,\n\t\t\t\t\tconfigurable: true,\n\t\t\t\t\twritable: true,\n\t\t\t\t\tvalue: value\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t},\n\n\tfix: function( originalEvent ) {\n\t\treturn originalEvent[ jQuery.expando ] ?\n\t\t\toriginalEvent :\n\t\t\tnew jQuery.Event( originalEvent );\n\t},\n\n\tspecial: {\n\t\tload: {\n\n\t\t\t// Prevent triggered image.load events from bubbling to window.load\n\t\t\tnoBubble: true\n\t\t},\n\t\tfocus: {\n\n\t\t\t// Fire native event if possible so blur/focus sequence is correct\n\t\t\ttrigger: function() {\n\t\t\t\tif ( this !== safeActiveElement() && this.focus ) {\n\t\t\t\t\tthis.focus();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelegateType: \"focusin\"\n\t\t},\n\t\tblur: {\n\t\t\ttrigger: function() {\n\t\t\t\tif ( this === safeActiveElement() && this.blur ) {\n\t\t\t\t\tthis.blur();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelegateType: \"focusout\"\n\t\t},\n\t\tclick: {\n\n\t\t\t// For checkbox, fire native event so checked state will be right\n\t\t\ttrigger: function() {\n\t\t\t\tif ( this.type === \"checkbox\" && this.click && nodeName( this, \"input\" ) ) {\n\t\t\t\t\tthis.click();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// For cross-browser consistency, don't fire native .click() on links\n\t\t\t_default: function( event ) {\n\t\t\t\treturn nodeName( event.target, \"a\" );\n\t\t\t}\n\t\t},\n\n\t\tbeforeunload: {\n\t\t\tpostDispatch: function( event ) {\n\n\t\t\t\t// Support: Firefox 20+\n\t\t\t\t// Firefox doesn't alert if the returnValue field is not set.\n\t\t\t\tif ( event.result !== undefined && event.originalEvent ) {\n\t\t\t\t\tevent.originalEvent.returnValue = event.result;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\njQuery.removeEvent = function( elem, type, handle ) {\n\n\t// This \"if\" is needed for plain objects\n\tif ( elem.removeEventListener ) {\n\t\telem.removeEventListener( type, handle );\n\t}\n};\n\njQuery.Event = function( src, props ) {\n\n\t// Allow instantiation without the 'new' keyword\n\tif ( !( this instanceof jQuery.Event ) ) {\n\t\treturn new jQuery.Event( src, props );\n\t}\n\n\t// Event object\n\tif ( src && src.type ) {\n\t\tthis.originalEvent = src;\n\t\tthis.type = src.type;\n\n\t\t// Events bubbling up the document may have been marked as prevented\n\t\t// by a handler lower down the tree; reflect the correct value.\n\t\tthis.isDefaultPrevented = src.defaultPrevented ||\n\t\t\t\tsrc.defaultPrevented === undefined &&\n\n\t\t\t\t// Support: Android <=2.3 only\n\t\t\t\tsrc.returnValue === false ?\n\t\t\treturnTrue :\n\t\t\treturnFalse;\n\n\t\t// Create target properties\n\t\t// Support: Safari <=6 - 7 only\n\t\t// Target should not be a text node (#504, #13143)\n\t\tthis.target = ( src.target && src.target.nodeType === 3 ) ?\n\t\t\tsrc.target.parentNode :\n\t\t\tsrc.target;\n\n\t\tthis.currentTarget = src.currentTarget;\n\t\tthis.relatedTarget = src.relatedTarget;\n\n\t// Event type\n\t} else {\n\t\tthis.type = src;\n\t}\n\n\t// Put explicitly provided properties onto the event object\n\tif ( props ) {\n\t\tjQuery.extend( this, props );\n\t}\n\n\t// Create a timestamp if incoming event doesn't have one\n\tthis.timeStamp = src && src.timeStamp || Date.now();\n\n\t// Mark it as fixed\n\tthis[ jQuery.expando ] = true;\n};\n\n// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding\n// https://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html\njQuery.Event.prototype = {\n\tconstructor: jQuery.Event,\n\tisDefaultPrevented: returnFalse,\n\tisPropagationStopped: returnFalse,\n\tisImmediatePropagationStopped: returnFalse,\n\tisSimulated: false,\n\n\tpreventDefault: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isDefaultPrevented = returnTrue;\n\n\t\tif ( e && !this.isSimulated ) {\n\t\t\te.preventDefault();\n\t\t}\n\t},\n\tstopPropagation: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isPropagationStopped = returnTrue;\n\n\t\tif ( e && !this.isSimulated ) {\n\t\t\te.stopPropagation();\n\t\t}\n\t},\n\tstopImmediatePropagation: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isImmediatePropagationStopped = returnTrue;\n\n\t\tif ( e && !this.isSimulated ) {\n\t\t\te.stopImmediatePropagation();\n\t\t}\n\n\t\tthis.stopPropagation();\n\t}\n};\n\n// Includes all common event props including KeyEvent and MouseEvent specific props\njQuery.each( {\n\taltKey: true,\n\tbubbles: true,\n\tcancelable: true,\n\tchangedTouches: true,\n\tctrlKey: true,\n\tdetail: true,\n\teventPhase: true,\n\tmetaKey: true,\n\tpageX: true,\n\tpageY: true,\n\tshiftKey: true,\n\tview: true,\n\t\"char\": true,\n\tcharCode: true,\n\tkey: true,\n\tkeyCode: true,\n\tbutton: true,\n\tbuttons: true,\n\tclientX: true,\n\tclientY: true,\n\toffsetX: true,\n\toffsetY: true,\n\tpointerId: true,\n\tpointerType: true,\n\tscreenX: true,\n\tscreenY: true,\n\ttargetTouches: true,\n\ttoElement: true,\n\ttouches: true,\n\n\twhich: function( event ) {\n\t\tvar button = event.button;\n\n\t\t// Add which for key events\n\t\tif ( event.which == null && rkeyEvent.test( event.type ) ) {\n\t\t\treturn event.charCode != null ? event.charCode : event.keyCode;\n\t\t}\n\n\t\t// Add which for click: 1 === left; 2 === middle; 3 === right\n\t\tif ( !event.which && button !== undefined && rmouseEvent.test( event.type ) ) {\n\t\t\tif ( button & 1 ) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\tif ( button & 2 ) {\n\t\t\t\treturn 3;\n\t\t\t}\n\n\t\t\tif ( button & 4 ) {\n\t\t\t\treturn 2;\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn event.which;\n\t}\n}, jQuery.event.addProp );\n\n// Create mouseenter/leave events using mouseover/out and event-time checks\n// so that event delegation works in jQuery.\n// Do the same for pointerenter/pointerleave and pointerover/pointerout\n//\n// Support: Safari 7 only\n// Safari sends mouseenter too often; see:\n// https://bugs.chromium.org/p/chromium/issues/detail?id=470258\n// for the description of the bug (it existed in older Chrome versions as well).\njQuery.each( {\n\tmouseenter: \"mouseover\",\n\tmouseleave: \"mouseout\",\n\tpointerenter: \"pointerover\",\n\tpointerleave: \"pointerout\"\n}, function( orig, fix ) {\n\tjQuery.event.special[ orig ] = {\n\t\tdelegateType: fix,\n\t\tbindType: fix,\n\n\t\thandle: function( event ) {\n\t\t\tvar ret,\n\t\t\t\ttarget = this,\n\t\t\t\trelated = event.relatedTarget,\n\t\t\t\thandleObj = event.handleObj;\n\n\t\t\t// For mouseenter/leave call the handler if related is outside the target.\n\t\t\t// NB: No relatedTarget if the mouse left/entered the browser window\n\t\t\tif ( !related || ( related !== target && !jQuery.contains( target, related ) ) ) {\n\t\t\t\tevent.type = handleObj.origType;\n\t\t\t\tret = handleObj.handler.apply( this, arguments );\n\t\t\t\tevent.type = fix;\n\t\t\t}\n\t\t\treturn ret;\n\t\t}\n\t};\n} );\n\njQuery.fn.extend( {\n\n\ton: function( types, selector, data, fn ) {\n\t\treturn on( this, types, selector, data, fn );\n\t},\n\tone: function( types, selector, data, fn ) {\n\t\treturn on( this, types, selector, data, fn, 1 );\n\t},\n\toff: function( types, selector, fn ) {\n\t\tvar handleObj, type;\n\t\tif ( types && types.preventDefault && types.handleObj ) {\n\n\t\t\t// ( event )  dispatched jQuery.Event\n\t\t\thandleObj = types.handleObj;\n\t\t\tjQuery( types.delegateTarget ).off(\n\t\t\t\thandleObj.namespace ?\n\t\t\t\t\thandleObj.origType + \".\" + handleObj.namespace :\n\t\t\t\t\thandleObj.origType,\n\t\t\t\thandleObj.selector,\n\t\t\t\thandleObj.handler\n\t\t\t);\n\t\t\treturn this;\n\t\t}\n\t\tif ( typeof types === \"object\" ) {\n\n\t\t\t// ( types-object [, selector] )\n\t\t\tfor ( type in types ) {\n\t\t\t\tthis.off( type, selector, types[ type ] );\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t\tif ( selector === false || typeof selector === \"function\" ) {\n\n\t\t\t// ( types [, fn] )\n\t\t\tfn = selector;\n\t\t\tselector = undefined;\n\t\t}\n\t\tif ( fn === false ) {\n\t\t\tfn = returnFalse;\n\t\t}\n\t\treturn this.each( function() {\n\t\t\tjQuery.event.remove( this, types, fn, selector );\n\t\t} );\n\t}\n} );\n\n\nvar\n\n\t/* eslint-disable max-len */\n\n\t// See https://github.com/eslint/eslint/issues/3229\n\trxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]*)[^>]*)\\/>/gi,\n\n\t/* eslint-enable */\n\n\t// Support: IE <=10 - 11, Edge 12 - 13 only\n\t// In IE/Edge using regex groups here causes severe slowdowns.\n\t// See https://connect.microsoft.com/IE/feedback/details/1736512/\n\trnoInnerhtml = /<script|<style|<link/i,\n\n\t// checked=\"checked\" or checked\n\trchecked = /checked\\s*(?:[^=]|=\\s*.checked.)/i,\n\trcleanScript = /^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g;\n\n// Prefer a tbody over its parent table for containing new rows\nfunction manipulationTarget( elem, content ) {\n\tif ( nodeName( elem, \"table\" ) &&\n\t\tnodeName( content.nodeType !== 11 ? content : content.firstChild, \"tr\" ) ) {\n\n\t\treturn jQuery( elem ).children( \"tbody\" )[ 0 ] || elem;\n\t}\n\n\treturn elem;\n}\n\n// Replace/restore the type attribute of script elements for safe DOM manipulation\nfunction disableScript( elem ) {\n\telem.type = ( elem.getAttribute( \"type\" ) !== null ) + \"/\" + elem.type;\n\treturn elem;\n}\nfunction restoreScript( elem ) {\n\tif ( ( elem.type || \"\" ).slice( 0, 5 ) === \"true/\" ) {\n\t\telem.type = elem.type.slice( 5 );\n\t} else {\n\t\telem.removeAttribute( \"type\" );\n\t}\n\n\treturn elem;\n}\n\nfunction cloneCopyEvent( src, dest ) {\n\tvar i, l, type, pdataOld, pdataCur, udataOld, udataCur, events;\n\n\tif ( dest.nodeType !== 1 ) {\n\t\treturn;\n\t}\n\n\t// 1. Copy private data: events, handlers, etc.\n\tif ( dataPriv.hasData( src ) ) {\n\t\tpdataOld = dataPriv.access( src );\n\t\tpdataCur = dataPriv.set( dest, pdataOld );\n\t\tevents = pdataOld.events;\n\n\t\tif ( events ) {\n\t\t\tdelete pdataCur.handle;\n\t\t\tpdataCur.events = {};\n\n\t\t\tfor ( type in events ) {\n\t\t\t\tfor ( i = 0, l = events[ type ].length; i < l; i++ ) {\n\t\t\t\t\tjQuery.event.add( dest, type, events[ type ][ i ] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// 2. Copy user data\n\tif ( dataUser.hasData( src ) ) {\n\t\tudataOld = dataUser.access( src );\n\t\tudataCur = jQuery.extend( {}, udataOld );\n\n\t\tdataUser.set( dest, udataCur );\n\t}\n}\n\n// Fix IE bugs, see support tests\nfunction fixInput( src, dest ) {\n\tvar nodeName = dest.nodeName.toLowerCase();\n\n\t// Fails to persist the checked state of a cloned checkbox or radio button.\n\tif ( nodeName === \"input\" && rcheckableType.test( src.type ) ) {\n\t\tdest.checked = src.checked;\n\n\t// Fails to return the selected option to the default selected state when cloning options\n\t} else if ( nodeName === \"input\" || nodeName === \"textarea\" ) {\n\t\tdest.defaultValue = src.defaultValue;\n\t}\n}\n\nfunction domManip( collection, args, callback, ignored ) {\n\n\t// Flatten any nested arrays\n\targs = concat.apply( [], args );\n\n\tvar fragment, first, scripts, hasScripts, node, doc,\n\t\ti = 0,\n\t\tl = collection.length,\n\t\tiNoClone = l - 1,\n\t\tvalue = args[ 0 ],\n\t\tvalueIsFunction = isFunction( value );\n\n\t// We can't cloneNode fragments that contain checked, in WebKit\n\tif ( valueIsFunction ||\n\t\t\t( l > 1 && typeof value === \"string\" &&\n\t\t\t\t!support.checkClone && rchecked.test( value ) ) ) {\n\t\treturn collection.each( function( index ) {\n\t\t\tvar self = collection.eq( index );\n\t\t\tif ( valueIsFunction ) {\n\t\t\t\targs[ 0 ] = value.call( this, index, self.html() );\n\t\t\t}\n\t\t\tdomManip( self, args, callback, ignored );\n\t\t} );\n\t}\n\n\tif ( l ) {\n\t\tfragment = buildFragment( args, collection[ 0 ].ownerDocument, false, collection, ignored );\n\t\tfirst = fragment.firstChild;\n\n\t\tif ( fragment.childNodes.length === 1 ) {\n\t\t\tfragment = first;\n\t\t}\n\n\t\t// Require either new content or an interest in ignored elements to invoke the callback\n\t\tif ( first || ignored ) {\n\t\t\tscripts = jQuery.map( getAll( fragment, \"script\" ), disableScript );\n\t\t\thasScripts = scripts.length;\n\n\t\t\t// Use the original fragment for the last item\n\t\t\t// instead of the first because it can end up\n\t\t\t// being emptied incorrectly in certain situations (#8070).\n\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\tnode = fragment;\n\n\t\t\t\tif ( i !== iNoClone ) {\n\t\t\t\t\tnode = jQuery.clone( node, true, true );\n\n\t\t\t\t\t// Keep references to cloned scripts for later restoration\n\t\t\t\t\tif ( hasScripts ) {\n\n\t\t\t\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t\t\t\t// push.apply(_, arraylike) throws on ancient WebKit\n\t\t\t\t\t\tjQuery.merge( scripts, getAll( node, \"script\" ) );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcallback.call( collection[ i ], node, i );\n\t\t\t}\n\n\t\t\tif ( hasScripts ) {\n\t\t\t\tdoc = scripts[ scripts.length - 1 ].ownerDocument;\n\n\t\t\t\t// Reenable scripts\n\t\t\t\tjQuery.map( scripts, restoreScript );\n\n\t\t\t\t// Evaluate executable scripts on first document insertion\n\t\t\t\tfor ( i = 0; i < hasScripts; i++ ) {\n\t\t\t\t\tnode = scripts[ i ];\n\t\t\t\t\tif ( rscriptType.test( node.type || \"\" ) &&\n\t\t\t\t\t\t!dataPriv.access( node, \"globalEval\" ) &&\n\t\t\t\t\t\tjQuery.contains( doc, node ) ) {\n\n\t\t\t\t\t\tif ( node.src && ( node.type || \"\" ).toLowerCase()  !== \"module\" ) {\n\n\t\t\t\t\t\t\t// Optional AJAX dependency, but won't run scripts if not present\n\t\t\t\t\t\t\tif ( jQuery._evalUrl ) {\n\t\t\t\t\t\t\t\tjQuery._evalUrl( node.src );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tDOMEval( node.textContent.replace( rcleanScript, \"\" ), doc, node );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn collection;\n}\n\nfunction remove( elem, selector, keepData ) {\n\tvar node,\n\t\tnodes = selector ? jQuery.filter( selector, elem ) : elem,\n\t\ti = 0;\n\n\tfor ( ; ( node = nodes[ i ] ) != null; i++ ) {\n\t\tif ( !keepData && node.nodeType === 1 ) {\n\t\t\tjQuery.cleanData( getAll( node ) );\n\t\t}\n\n\t\tif ( node.parentNode ) {\n\t\t\tif ( keepData && jQuery.contains( node.ownerDocument, node ) ) {\n\t\t\t\tsetGlobalEval( getAll( node, \"script\" ) );\n\t\t\t}\n\t\t\tnode.parentNode.removeChild( node );\n\t\t}\n\t}\n\n\treturn elem;\n}\n\njQuery.extend( {\n\thtmlPrefilter: function( html ) {\n\t\treturn html.replace( rxhtmlTag, \"<$1></$2>\" );\n\t},\n\n\tclone: function( elem, dataAndEvents, deepDataAndEvents ) {\n\t\tvar i, l, srcElements, destElements,\n\t\t\tclone = elem.cloneNode( true ),\n\t\t\tinPage = jQuery.contains( elem.ownerDocument, elem );\n\n\t\t// Fix IE cloning issues\n\t\tif ( !support.noCloneChecked && ( elem.nodeType === 1 || elem.nodeType === 11 ) &&\n\t\t\t\t!jQuery.isXMLDoc( elem ) ) {\n\n\t\t\t// We eschew Sizzle here for performance reasons: https://jsperf.com/getall-vs-sizzle/2\n\t\t\tdestElements = getAll( clone );\n\t\t\tsrcElements = getAll( elem );\n\n\t\t\tfor ( i = 0, l = srcElements.length; i < l; i++ ) {\n\t\t\t\tfixInput( srcElements[ i ], destElements[ i ] );\n\t\t\t}\n\t\t}\n\n\t\t// Copy the events from the original to the clone\n\t\tif ( dataAndEvents ) {\n\t\t\tif ( deepDataAndEvents ) {\n\t\t\t\tsrcElements = srcElements || getAll( elem );\n\t\t\t\tdestElements = destElements || getAll( clone );\n\n\t\t\t\tfor ( i = 0, l = srcElements.length; i < l; i++ ) {\n\t\t\t\t\tcloneCopyEvent( srcElements[ i ], destElements[ i ] );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcloneCopyEvent( elem, clone );\n\t\t\t}\n\t\t}\n\n\t\t// Preserve script evaluation history\n\t\tdestElements = getAll( clone, \"script\" );\n\t\tif ( destElements.length > 0 ) {\n\t\t\tsetGlobalEval( destElements, !inPage && getAll( elem, \"script\" ) );\n\t\t}\n\n\t\t// Return the cloned set\n\t\treturn clone;\n\t},\n\n\tcleanData: function( elems ) {\n\t\tvar data, elem, type,\n\t\t\tspecial = jQuery.event.special,\n\t\t\ti = 0;\n\n\t\tfor ( ; ( elem = elems[ i ] ) !== undefined; i++ ) {\n\t\t\tif ( acceptData( elem ) ) {\n\t\t\t\tif ( ( data = elem[ dataPriv.expando ] ) ) {\n\t\t\t\t\tif ( data.events ) {\n\t\t\t\t\t\tfor ( type in data.events ) {\n\t\t\t\t\t\t\tif ( special[ type ] ) {\n\t\t\t\t\t\t\t\tjQuery.event.remove( elem, type );\n\n\t\t\t\t\t\t\t// This is a shortcut to avoid jQuery.event.remove's overhead\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tjQuery.removeEvent( elem, type, data.handle );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Support: Chrome <=35 - 45+\n\t\t\t\t\t// Assign undefined instead of using delete, see Data#remove\n\t\t\t\t\telem[ dataPriv.expando ] = undefined;\n\t\t\t\t}\n\t\t\t\tif ( elem[ dataUser.expando ] ) {\n\n\t\t\t\t\t// Support: Chrome <=35 - 45+\n\t\t\t\t\t// Assign undefined instead of using delete, see Data#remove\n\t\t\t\t\telem[ dataUser.expando ] = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n} );\n\njQuery.fn.extend( {\n\tdetach: function( selector ) {\n\t\treturn remove( this, selector, true );\n\t},\n\n\tremove: function( selector ) {\n\t\treturn remove( this, selector );\n\t},\n\n\ttext: function( value ) {\n\t\treturn access( this, function( value ) {\n\t\t\treturn value === undefined ?\n\t\t\t\tjQuery.text( this ) :\n\t\t\t\tthis.empty().each( function() {\n\t\t\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\t\t\tthis.textContent = value;\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t}, null, value, arguments.length );\n\t},\n\n\tappend: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\tvar target = manipulationTarget( this, elem );\n\t\t\t\ttarget.appendChild( elem );\n\t\t\t}\n\t\t} );\n\t},\n\n\tprepend: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\tvar target = manipulationTarget( this, elem );\n\t\t\t\ttarget.insertBefore( elem, target.firstChild );\n\t\t\t}\n\t\t} );\n\t},\n\n\tbefore: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.parentNode ) {\n\t\t\t\tthis.parentNode.insertBefore( elem, this );\n\t\t\t}\n\t\t} );\n\t},\n\n\tafter: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.parentNode ) {\n\t\t\t\tthis.parentNode.insertBefore( elem, this.nextSibling );\n\t\t\t}\n\t\t} );\n\t},\n\n\tempty: function() {\n\t\tvar elem,\n\t\t\ti = 0;\n\n\t\tfor ( ; ( elem = this[ i ] ) != null; i++ ) {\n\t\t\tif ( elem.nodeType === 1 ) {\n\n\t\t\t\t// Prevent memory leaks\n\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n\n\t\t\t\t// Remove any remaining nodes\n\t\t\t\telem.textContent = \"\";\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tclone: function( dataAndEvents, deepDataAndEvents ) {\n\t\tdataAndEvents = dataAndEvents == null ? false : dataAndEvents;\n\t\tdeepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;\n\n\t\treturn this.map( function() {\n\t\t\treturn jQuery.clone( this, dataAndEvents, deepDataAndEvents );\n\t\t} );\n\t},\n\n\thtml: function( value ) {\n\t\treturn access( this, function( value ) {\n\t\t\tvar elem = this[ 0 ] || {},\n\t\t\t\ti = 0,\n\t\t\t\tl = this.length;\n\n\t\t\tif ( value === undefined && elem.nodeType === 1 ) {\n\t\t\t\treturn elem.innerHTML;\n\t\t\t}\n\n\t\t\t// See if we can take a shortcut and just use innerHTML\n\t\t\tif ( typeof value === \"string\" && !rnoInnerhtml.test( value ) &&\n\t\t\t\t!wrapMap[ ( rtagName.exec( value ) || [ \"\", \"\" ] )[ 1 ].toLowerCase() ] ) {\n\n\t\t\t\tvalue = jQuery.htmlPrefilter( value );\n\n\t\t\t\ttry {\n\t\t\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\t\t\telem = this[ i ] || {};\n\n\t\t\t\t\t\t// Remove element nodes and prevent memory leaks\n\t\t\t\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n\t\t\t\t\t\t\telem.innerHTML = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\telem = 0;\n\n\t\t\t\t// If using innerHTML throws an exception, use the fallback method\n\t\t\t\t} catch ( e ) {}\n\t\t\t}\n\n\t\t\tif ( elem ) {\n\t\t\t\tthis.empty().append( value );\n\t\t\t}\n\t\t}, null, value, arguments.length );\n\t},\n\n\treplaceWith: function() {\n\t\tvar ignored = [];\n\n\t\t// Make the changes, replacing each non-ignored context element with the new content\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tvar parent = this.parentNode;\n\n\t\t\tif ( jQuery.inArray( this, ignored ) < 0 ) {\n\t\t\t\tjQuery.cleanData( getAll( this ) );\n\t\t\t\tif ( parent ) {\n\t\t\t\t\tparent.replaceChild( elem, this );\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Force callback invocation\n\t\t}, ignored );\n\t}\n} );\n\njQuery.each( {\n\tappendTo: \"append\",\n\tprependTo: \"prepend\",\n\tinsertBefore: \"before\",\n\tinsertAfter: \"after\",\n\treplaceAll: \"replaceWith\"\n}, function( name, original ) {\n\tjQuery.fn[ name ] = function( selector ) {\n\t\tvar elems,\n\t\t\tret = [],\n\t\t\tinsert = jQuery( selector ),\n\t\t\tlast = insert.length - 1,\n\t\t\ti = 0;\n\n\t\tfor ( ; i <= last; i++ ) {\n\t\t\telems = i === last ? this : this.clone( true );\n\t\t\tjQuery( insert[ i ] )[ original ]( elems );\n\n\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t// .get() because push.apply(_, arraylike) throws on ancient WebKit\n\t\t\tpush.apply( ret, elems.get() );\n\t\t}\n\n\t\treturn this.pushStack( ret );\n\t};\n} );\nvar rnumnonpx = new RegExp( \"^(\" + pnum + \")(?!px)[a-z%]+$\", \"i\" );\n\nvar getStyles = function( elem ) {\n\n\t\t// Support: IE <=11 only, Firefox <=30 (#15098, #14150)\n\t\t// IE throws on elements created in popups\n\t\t// FF meanwhile throws on frame elements through \"defaultView.getComputedStyle\"\n\t\tvar view = elem.ownerDocument.defaultView;\n\n\t\tif ( !view || !view.opener ) {\n\t\t\tview = window;\n\t\t}\n\n\t\treturn view.getComputedStyle( elem );\n\t};\n\nvar rboxStyle = new RegExp( cssExpand.join( \"|\" ), \"i\" );\n\n\n\n( function() {\n\n\t// Executing both pixelPosition & boxSizingReliable tests require only one layout\n\t// so they're executed at the same time to save the second computation.\n\tfunction computeStyleTests() {\n\n\t\t// This is a singleton, we need to execute it only once\n\t\tif ( !div ) {\n\t\t\treturn;\n\t\t}\n\n\t\tcontainer.style.cssText = \"position:absolute;left:-11111px;width:60px;\" +\n\t\t\t\"margin-top:1px;padding:0;border:0\";\n\t\tdiv.style.cssText =\n\t\t\t\"position:relative;display:block;box-sizing:border-box;overflow:scroll;\" +\n\t\t\t\"margin:auto;border:1px;padding:1px;\" +\n\t\t\t\"width:60%;top:1%\";\n\t\tdocumentElement.appendChild( container ).appendChild( div );\n\n\t\tvar divStyle = window.getComputedStyle( div );\n\t\tpixelPositionVal = divStyle.top !== \"1%\";\n\n\t\t// Support: Android 4.0 - 4.3 only, Firefox <=3 - 44\n\t\treliableMarginLeftVal = roundPixelMeasures( divStyle.marginLeft ) === 12;\n\n\t\t// Support: Android 4.0 - 4.3 only, Safari <=9.1 - 10.1, iOS <=7.0 - 9.3\n\t\t// Some styles come back with percentage values, even though they shouldn't\n\t\tdiv.style.right = \"60%\";\n\t\tpixelBoxStylesVal = roundPixelMeasures( divStyle.right ) === 36;\n\n\t\t// Support: IE 9 - 11 only\n\t\t// Detect misreporting of content dimensions for box-sizing:border-box elements\n\t\tboxSizingReliableVal = roundPixelMeasures( divStyle.width ) === 36;\n\n\t\t// Support: IE 9 only\n\t\t// Detect overflow:scroll screwiness (gh-3699)\n\t\tdiv.style.position = \"absolute\";\n\t\tscrollboxSizeVal = div.offsetWidth === 36 || \"absolute\";\n\n\t\tdocumentElement.removeChild( container );\n\n\t\t// Nullify the div so it wouldn't be stored in the memory and\n\t\t// it will also be a sign that checks already performed\n\t\tdiv = null;\n\t}\n\n\tfunction roundPixelMeasures( measure ) {\n\t\treturn Math.round( parseFloat( measure ) );\n\t}\n\n\tvar pixelPositionVal, boxSizingReliableVal, scrollboxSizeVal, pixelBoxStylesVal,\n\t\treliableMarginLeftVal,\n\t\tcontainer = document.createElement( \"div\" ),\n\t\tdiv = document.createElement( \"div\" );\n\n\t// Finish early in limited (non-browser) environments\n\tif ( !div.style ) {\n\t\treturn;\n\t}\n\n\t// Support: IE <=9 - 11 only\n\t// Style of cloned element affects source element cloned (#8908)\n\tdiv.style.backgroundClip = \"content-box\";\n\tdiv.cloneNode( true ).style.backgroundClip = \"\";\n\tsupport.clearCloneStyle = div.style.backgroundClip === \"content-box\";\n\n\tjQuery.extend( support, {\n\t\tboxSizingReliable: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn boxSizingReliableVal;\n\t\t},\n\t\tpixelBoxStyles: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn pixelBoxStylesVal;\n\t\t},\n\t\tpixelPosition: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn pixelPositionVal;\n\t\t},\n\t\treliableMarginLeft: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn reliableMarginLeftVal;\n\t\t},\n\t\tscrollboxSize: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn scrollboxSizeVal;\n\t\t}\n\t} );\n} )();\n\n\nfunction curCSS( elem, name, computed ) {\n\tvar width, minWidth, maxWidth, ret,\n\n\t\t// Support: Firefox 51+\n\t\t// Retrieving style before computed somehow\n\t\t// fixes an issue with getting wrong values\n\t\t// on detached elements\n\t\tstyle = elem.style;\n\n\tcomputed = computed || getStyles( elem );\n\n\t// getPropertyValue is needed for:\n\t//   .css('filter') (IE 9 only, #12537)\n\t//   .css('--customProperty) (#3144)\n\tif ( computed ) {\n\t\tret = computed.getPropertyValue( name ) || computed[ name ];\n\n\t\tif ( ret === \"\" && !jQuery.contains( elem.ownerDocument, elem ) ) {\n\t\t\tret = jQuery.style( elem, name );\n\t\t}\n\n\t\t// A tribute to the \"awesome hack by Dean Edwards\"\n\t\t// Android Browser returns percentage for some values,\n\t\t// but width seems to be reliably pixels.\n\t\t// This is against the CSSOM draft spec:\n\t\t// https://drafts.csswg.org/cssom/#resolved-values\n\t\tif ( !support.pixelBoxStyles() && rnumnonpx.test( ret ) && rboxStyle.test( name ) ) {\n\n\t\t\t// Remember the original values\n\t\t\twidth = style.width;\n\t\t\tminWidth = style.minWidth;\n\t\t\tmaxWidth = style.maxWidth;\n\n\t\t\t// Put in the new values to get a computed value out\n\t\t\tstyle.minWidth = style.maxWidth = style.width = ret;\n\t\t\tret = computed.width;\n\n\t\t\t// Revert the changed values\n\t\t\tstyle.width = width;\n\t\t\tstyle.minWidth = minWidth;\n\t\t\tstyle.maxWidth = maxWidth;\n\t\t}\n\t}\n\n\treturn ret !== undefined ?\n\n\t\t// Support: IE <=9 - 11 only\n\t\t// IE returns zIndex value as an integer.\n\t\tret + \"\" :\n\t\tret;\n}\n\n\nfunction addGetHookIf( conditionFn, hookFn ) {\n\n\t// Define the hook, we'll check on the first run if it's really needed.\n\treturn {\n\t\tget: function() {\n\t\t\tif ( conditionFn() ) {\n\n\t\t\t\t// Hook not needed (or it's not possible to use it due\n\t\t\t\t// to missing dependency), remove it.\n\t\t\t\tdelete this.get;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Hook needed; redefine it so that the support test is not executed again.\n\t\t\treturn ( this.get = hookFn ).apply( this, arguments );\n\t\t}\n\t};\n}\n\n\nvar\n\n\t// Swappable if display is none or starts with table\n\t// except \"table\", \"table-cell\", or \"table-caption\"\n\t// See here for display values: https://developer.mozilla.org/en-US/docs/CSS/display\n\trdisplayswap = /^(none|table(?!-c[ea]).+)/,\n\trcustomProp = /^--/,\n\tcssShow = { position: \"absolute\", visibility: \"hidden\", display: \"block\" },\n\tcssNormalTransform = {\n\t\tletterSpacing: \"0\",\n\t\tfontWeight: \"400\"\n\t},\n\n\tcssPrefixes = [ \"Webkit\", \"Moz\", \"ms\" ],\n\temptyStyle = document.createElement( \"div\" ).style;\n\n// Return a css property mapped to a potentially vendor prefixed property\nfunction vendorPropName( name ) {\n\n\t// Shortcut for names that are not vendor prefixed\n\tif ( name in emptyStyle ) {\n\t\treturn name;\n\t}\n\n\t// Check for vendor prefixed names\n\tvar capName = name[ 0 ].toUpperCase() + name.slice( 1 ),\n\t\ti = cssPrefixes.length;\n\n\twhile ( i-- ) {\n\t\tname = cssPrefixes[ i ] + capName;\n\t\tif ( name in emptyStyle ) {\n\t\t\treturn name;\n\t\t}\n\t}\n}\n\n// Return a property mapped along what jQuery.cssProps suggests or to\n// a vendor prefixed property.\nfunction finalPropName( name ) {\n\tvar ret = jQuery.cssProps[ name ];\n\tif ( !ret ) {\n\t\tret = jQuery.cssProps[ name ] = vendorPropName( name ) || name;\n\t}\n\treturn ret;\n}\n\nfunction setPositiveNumber( elem, value, subtract ) {\n\n\t// Any relative (+/-) values have already been\n\t// normalized at this point\n\tvar matches = rcssNum.exec( value );\n\treturn matches ?\n\n\t\t// Guard against undefined \"subtract\", e.g., when used as in cssHooks\n\t\tMath.max( 0, matches[ 2 ] - ( subtract || 0 ) ) + ( matches[ 3 ] || \"px\" ) :\n\t\tvalue;\n}\n\nfunction boxModelAdjustment( elem, dimension, box, isBorderBox, styles, computedVal ) {\n\tvar i = dimension === \"width\" ? 1 : 0,\n\t\textra = 0,\n\t\tdelta = 0;\n\n\t// Adjustment may not be necessary\n\tif ( box === ( isBorderBox ? \"border\" : \"content\" ) ) {\n\t\treturn 0;\n\t}\n\n\tfor ( ; i < 4; i += 2 ) {\n\n\t\t// Both box models exclude margin\n\t\tif ( box === \"margin\" ) {\n\t\t\tdelta += jQuery.css( elem, box + cssExpand[ i ], true, styles );\n\t\t}\n\n\t\t// If we get here with a content-box, we're seeking \"padding\" or \"border\" or \"margin\"\n\t\tif ( !isBorderBox ) {\n\n\t\t\t// Add padding\n\t\t\tdelta += jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n\n\t\t\t// For \"border\" or \"margin\", add border\n\t\t\tif ( box !== \"padding\" ) {\n\t\t\t\tdelta += jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\n\t\t\t// But still keep track of it otherwise\n\t\t\t} else {\n\t\t\t\textra += jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\t\t\t}\n\n\t\t// If we get here with a border-box (content + padding + border), we're seeking \"content\" or\n\t\t// \"padding\" or \"margin\"\n\t\t} else {\n\n\t\t\t// For \"content\", subtract padding\n\t\t\tif ( box === \"content\" ) {\n\t\t\t\tdelta -= jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n\t\t\t}\n\n\t\t\t// For \"content\" or \"padding\", subtract border\n\t\t\tif ( box !== \"margin\" ) {\n\t\t\t\tdelta -= jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\t\t\t}\n\t\t}\n\t}\n\n\t// Account for positive content-box scroll gutter when requested by providing computedVal\n\tif ( !isBorderBox && computedVal >= 0 ) {\n\n\t\t// offsetWidth/offsetHeight is a rounded sum of content, padding, scroll gutter, and border\n\t\t// Assuming integer scroll gutter, subtract the rest and round down\n\t\tdelta += Math.max( 0, Math.ceil(\n\t\t\telem[ \"offset\" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 ) ] -\n\t\t\tcomputedVal -\n\t\t\tdelta -\n\t\t\textra -\n\t\t\t0.5\n\t\t) );\n\t}\n\n\treturn delta;\n}\n\nfunction getWidthOrHeight( elem, dimension, extra ) {\n\n\t// Start with computed style\n\tvar styles = getStyles( elem ),\n\t\tval = curCSS( elem, dimension, styles ),\n\t\tisBorderBox = jQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\",\n\t\tvalueIsBorderBox = isBorderBox;\n\n\t// Support: Firefox <=54\n\t// Return a confounding non-pixel value or feign ignorance, as appropriate.\n\tif ( rnumnonpx.test( val ) ) {\n\t\tif ( !extra ) {\n\t\t\treturn val;\n\t\t}\n\t\tval = \"auto\";\n\t}\n\n\t// Check for style in case a browser which returns unreliable values\n\t// for getComputedStyle silently falls back to the reliable elem.style\n\tvalueIsBorderBox = valueIsBorderBox &&\n\t\t( support.boxSizingReliable() || val === elem.style[ dimension ] );\n\n\t// Fall back to offsetWidth/offsetHeight when value is \"auto\"\n\t// This happens for inline elements with no explicit setting (gh-3571)\n\t// Support: Android <=4.1 - 4.3 only\n\t// Also use offsetWidth/offsetHeight for misreported inline dimensions (gh-3602)\n\tif ( val === \"auto\" ||\n\t\t!parseFloat( val ) && jQuery.css( elem, \"display\", false, styles ) === \"inline\" ) {\n\n\t\tval = elem[ \"offset\" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 ) ];\n\n\t\t// offsetWidth/offsetHeight provide border-box values\n\t\tvalueIsBorderBox = true;\n\t}\n\n\t// Normalize \"\" and auto\n\tval = parseFloat( val ) || 0;\n\n\t// Adjust for the element's box model\n\treturn ( val +\n\t\tboxModelAdjustment(\n\t\t\telem,\n\t\t\tdimension,\n\t\t\textra || ( isBorderBox ? \"border\" : \"content\" ),\n\t\t\tvalueIsBorderBox,\n\t\t\tstyles,\n\n\t\t\t// Provide the current computed size to request scroll gutter calculation (gh-3589)\n\t\t\tval\n\t\t)\n\t) + \"px\";\n}\n\njQuery.extend( {\n\n\t// Add in style property hooks for overriding the default\n\t// behavior of getting and setting a style property\n\tcssHooks: {\n\t\topacity: {\n\t\t\tget: function( elem, computed ) {\n\t\t\t\tif ( computed ) {\n\n\t\t\t\t\t// We should always get a number back from opacity\n\t\t\t\t\tvar ret = curCSS( elem, \"opacity\" );\n\t\t\t\t\treturn ret === \"\" ? \"1\" : ret;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t// Don't automatically add \"px\" to these possibly-unitless properties\n\tcssNumber: {\n\t\t\"animationIterationCount\": true,\n\t\t\"columnCount\": true,\n\t\t\"fillOpacity\": true,\n\t\t\"flexGrow\": true,\n\t\t\"flexShrink\": true,\n\t\t\"fontWeight\": true,\n\t\t\"lineHeight\": true,\n\t\t\"opacity\": true,\n\t\t\"order\": true,\n\t\t\"orphans\": true,\n\t\t\"widows\": true,\n\t\t\"zIndex\": true,\n\t\t\"zoom\": true\n\t},\n\n\t// Add in properties whose names you wish to fix before\n\t// setting or getting the value\n\tcssProps: {},\n\n\t// Get and set the style property on a DOM Node\n\tstyle: function( elem, name, value, extra ) {\n\n\t\t// Don't set styles on text and comment nodes\n\t\tif ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Make sure that we're working with the right name\n\t\tvar ret, type, hooks,\n\t\t\torigName = camelCase( name ),\n\t\t\tisCustomProp = rcustomProp.test( name ),\n\t\t\tstyle = elem.style;\n\n\t\t// Make sure that we're working with the right name. We don't\n\t\t// want to query the value if it is a CSS custom property\n\t\t// since they are user-defined.\n\t\tif ( !isCustomProp ) {\n\t\t\tname = finalPropName( origName );\n\t\t}\n\n\t\t// Gets hook for the prefixed version, then unprefixed version\n\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n\n\t\t// Check if we're setting a value\n\t\tif ( value !== undefined ) {\n\t\t\ttype = typeof value;\n\n\t\t\t// Convert \"+=\" or \"-=\" to relative numbers (#7345)\n\t\t\tif ( type === \"string\" && ( ret = rcssNum.exec( value ) ) && ret[ 1 ] ) {\n\t\t\t\tvalue = adjustCSS( elem, name, ret );\n\n\t\t\t\t// Fixes bug #9237\n\t\t\t\ttype = \"number\";\n\t\t\t}\n\n\t\t\t// Make sure that null and NaN values aren't set (#7116)\n\t\t\tif ( value == null || value !== value ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If a number was passed in, add the unit (except for certain CSS properties)\n\t\t\tif ( type === \"number\" ) {\n\t\t\t\tvalue += ret && ret[ 3 ] || ( jQuery.cssNumber[ origName ] ? \"\" : \"px\" );\n\t\t\t}\n\n\t\t\t// background-* props affect original clone's values\n\t\t\tif ( !support.clearCloneStyle && value === \"\" && name.indexOf( \"background\" ) === 0 ) {\n\t\t\t\tstyle[ name ] = \"inherit\";\n\t\t\t}\n\n\t\t\t// If a hook was provided, use that value, otherwise just set the specified value\n\t\t\tif ( !hooks || !( \"set\" in hooks ) ||\n\t\t\t\t( value = hooks.set( elem, value, extra ) ) !== undefined ) {\n\n\t\t\t\tif ( isCustomProp ) {\n\t\t\t\t\tstyle.setProperty( name, value );\n\t\t\t\t} else {\n\t\t\t\t\tstyle[ name ] = value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// If a hook was provided get the non-computed value from there\n\t\t\tif ( hooks && \"get\" in hooks &&\n\t\t\t\t( ret = hooks.get( elem, false, extra ) ) !== undefined ) {\n\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\t// Otherwise just get the value from the style object\n\t\t\treturn style[ name ];\n\t\t}\n\t},\n\n\tcss: function( elem, name, extra, styles ) {\n\t\tvar val, num, hooks,\n\t\t\torigName = camelCase( name ),\n\t\t\tisCustomProp = rcustomProp.test( name );\n\n\t\t// Make sure that we're working with the right name. We don't\n\t\t// want to modify the value if it is a CSS custom property\n\t\t// since they are user-defined.\n\t\tif ( !isCustomProp ) {\n\t\t\tname = finalPropName( origName );\n\t\t}\n\n\t\t// Try prefixed name followed by the unprefixed name\n\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n\n\t\t// If a hook was provided get the computed value from there\n\t\tif ( hooks && \"get\" in hooks ) {\n\t\t\tval = hooks.get( elem, true, extra );\n\t\t}\n\n\t\t// Otherwise, if a way to get the computed value exists, use that\n\t\tif ( val === undefined ) {\n\t\t\tval = curCSS( elem, name, styles );\n\t\t}\n\n\t\t// Convert \"normal\" to computed value\n\t\tif ( val === \"normal\" && name in cssNormalTransform ) {\n\t\t\tval = cssNormalTransform[ name ];\n\t\t}\n\n\t\t// Make numeric if forced or a qualifier was provided and val looks numeric\n\t\tif ( extra === \"\" || extra ) {\n\t\t\tnum = parseFloat( val );\n\t\t\treturn extra === true || isFinite( num ) ? num || 0 : val;\n\t\t}\n\n\t\treturn val;\n\t}\n} );\n\njQuery.each( [ \"height\", \"width\" ], function( i, dimension ) {\n\tjQuery.cssHooks[ dimension ] = {\n\t\tget: function( elem, computed, extra ) {\n\t\t\tif ( computed ) {\n\n\t\t\t\t// Certain elements can have dimension info if we invisibly show them\n\t\t\t\t// but it must have a current display style that would benefit\n\t\t\t\treturn rdisplayswap.test( jQuery.css( elem, \"display\" ) ) &&\n\n\t\t\t\t\t// Support: Safari 8+\n\t\t\t\t\t// Table columns in Safari have non-zero offsetWidth & zero\n\t\t\t\t\t// getBoundingClientRect().width unless display is changed.\n\t\t\t\t\t// Support: IE <=11 only\n\t\t\t\t\t// Running getBoundingClientRect on a disconnected node\n\t\t\t\t\t// in IE throws an error.\n\t\t\t\t\t( !elem.getClientRects().length || !elem.getBoundingClientRect().width ) ?\n\t\t\t\t\t\tswap( elem, cssShow, function() {\n\t\t\t\t\t\t\treturn getWidthOrHeight( elem, dimension, extra );\n\t\t\t\t\t\t} ) :\n\t\t\t\t\t\tgetWidthOrHeight( elem, dimension, extra );\n\t\t\t}\n\t\t},\n\n\t\tset: function( elem, value, extra ) {\n\t\t\tvar matches,\n\t\t\t\tstyles = getStyles( elem ),\n\t\t\t\tisBorderBox = jQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\",\n\t\t\t\tsubtract = extra && boxModelAdjustment(\n\t\t\t\t\telem,\n\t\t\t\t\tdimension,\n\t\t\t\t\textra,\n\t\t\t\t\tisBorderBox,\n\t\t\t\t\tstyles\n\t\t\t\t);\n\n\t\t\t// Account for unreliable border-box dimensions by comparing offset* to computed and\n\t\t\t// faking a content-box to get border and padding (gh-3699)\n\t\t\tif ( isBorderBox && support.scrollboxSize() === styles.position ) {\n\t\t\t\tsubtract -= Math.ceil(\n\t\t\t\t\telem[ \"offset\" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 ) ] -\n\t\t\t\t\tparseFloat( styles[ dimension ] ) -\n\t\t\t\t\tboxModelAdjustment( elem, dimension, \"border\", false, styles ) -\n\t\t\t\t\t0.5\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Convert to pixels if value adjustment is needed\n\t\t\tif ( subtract && ( matches = rcssNum.exec( value ) ) &&\n\t\t\t\t( matches[ 3 ] || \"px\" ) !== \"px\" ) {\n\n\t\t\t\telem.style[ dimension ] = value;\n\t\t\t\tvalue = jQuery.css( elem, dimension );\n\t\t\t}\n\n\t\t\treturn setPositiveNumber( elem, value, subtract );\n\t\t}\n\t};\n} );\n\njQuery.cssHooks.marginLeft = addGetHookIf( support.reliableMarginLeft,\n\tfunction( elem, computed ) {\n\t\tif ( computed ) {\n\t\t\treturn ( parseFloat( curCSS( elem, \"marginLeft\" ) ) ||\n\t\t\t\telem.getBoundingClientRect().left -\n\t\t\t\t\tswap( elem, { marginLeft: 0 }, function() {\n\t\t\t\t\t\treturn elem.getBoundingClientRect().left;\n\t\t\t\t\t} )\n\t\t\t\t) + \"px\";\n\t\t}\n\t}\n);\n\n// These hooks are used by animate to expand properties\njQuery.each( {\n\tmargin: \"\",\n\tpadding: \"\",\n\tborder: \"Width\"\n}, function( prefix, suffix ) {\n\tjQuery.cssHooks[ prefix + suffix ] = {\n\t\texpand: function( value ) {\n\t\t\tvar i = 0,\n\t\t\t\texpanded = {},\n\n\t\t\t\t// Assumes a single number if not a string\n\t\t\t\tparts = typeof value === \"string\" ? value.split( \" \" ) : [ value ];\n\n\t\t\tfor ( ; i < 4; i++ ) {\n\t\t\t\texpanded[ prefix + cssExpand[ i ] + suffix ] =\n\t\t\t\t\tparts[ i ] || parts[ i - 2 ] || parts[ 0 ];\n\t\t\t}\n\n\t\t\treturn expanded;\n\t\t}\n\t};\n\n\tif ( prefix !== \"margin\" ) {\n\t\tjQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;\n\t}\n} );\n\njQuery.fn.extend( {\n\tcss: function( name, value ) {\n\t\treturn access( this, function( elem, name, value ) {\n\t\t\tvar styles, len,\n\t\t\t\tmap = {},\n\t\t\t\ti = 0;\n\n\t\t\tif ( Array.isArray( name ) ) {\n\t\t\t\tstyles = getStyles( elem );\n\t\t\t\tlen = name.length;\n\n\t\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\t\tmap[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );\n\t\t\t\t}\n\n\t\t\t\treturn map;\n\t\t\t}\n\n\t\t\treturn value !== undefined ?\n\t\t\t\tjQuery.style( elem, name, value ) :\n\t\t\t\tjQuery.css( elem, name );\n\t\t}, name, value, arguments.length > 1 );\n\t}\n} );\n\n\nfunction Tween( elem, options, prop, end, easing ) {\n\treturn new Tween.prototype.init( elem, options, prop, end, easing );\n}\njQuery.Tween = Tween;\n\nTween.prototype = {\n\tconstructor: Tween,\n\tinit: function( elem, options, prop, end, easing, unit ) {\n\t\tthis.elem = elem;\n\t\tthis.prop = prop;\n\t\tthis.easing = easing || jQuery.easing._default;\n\t\tthis.options = options;\n\t\tthis.start = this.now = this.cur();\n\t\tthis.end = end;\n\t\tthis.unit = unit || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" );\n\t},\n\tcur: function() {\n\t\tvar hooks = Tween.propHooks[ this.prop ];\n\n\t\treturn hooks && hooks.get ?\n\t\t\thooks.get( this ) :\n\t\t\tTween.propHooks._default.get( this );\n\t},\n\trun: function( percent ) {\n\t\tvar eased,\n\t\t\thooks = Tween.propHooks[ this.prop ];\n\n\t\tif ( this.options.duration ) {\n\t\t\tthis.pos = eased = jQuery.easing[ this.easing ](\n\t\t\t\tpercent, this.options.duration * percent, 0, 1, this.options.duration\n\t\t\t);\n\t\t} else {\n\t\t\tthis.pos = eased = percent;\n\t\t}\n\t\tthis.now = ( this.end - this.start ) * eased + this.start;\n\n\t\tif ( this.options.step ) {\n\t\t\tthis.options.step.call( this.elem, this.now, this );\n\t\t}\n\n\t\tif ( hooks && hooks.set ) {\n\t\t\thooks.set( this );\n\t\t} else {\n\t\t\tTween.propHooks._default.set( this );\n\t\t}\n\t\treturn this;\n\t}\n};\n\nTween.prototype.init.prototype = Tween.prototype;\n\nTween.propHooks = {\n\t_default: {\n\t\tget: function( tween ) {\n\t\t\tvar result;\n\n\t\t\t// Use a property on the element directly when it is not a DOM element,\n\t\t\t// or when there is no matching style property that exists.\n\t\t\tif ( tween.elem.nodeType !== 1 ||\n\t\t\t\ttween.elem[ tween.prop ] != null && tween.elem.style[ tween.prop ] == null ) {\n\t\t\t\treturn tween.elem[ tween.prop ];\n\t\t\t}\n\n\t\t\t// Passing an empty string as a 3rd parameter to .css will automatically\n\t\t\t// attempt a parseFloat and fallback to a string if the parse fails.\n\t\t\t// Simple values such as \"10px\" are parsed to Float;\n\t\t\t// complex values such as \"rotate(1rad)\" are returned as-is.\n\t\t\tresult = jQuery.css( tween.elem, tween.prop, \"\" );\n\n\t\t\t// Empty strings, null, undefined and \"auto\" are converted to 0.\n\t\t\treturn !result || result === \"auto\" ? 0 : result;\n\t\t},\n\t\tset: function( tween ) {\n\n\t\t\t// Use step hook for back compat.\n\t\t\t// Use cssHook if its there.\n\t\t\t// Use .style if available and use plain properties where available.\n\t\t\tif ( jQuery.fx.step[ tween.prop ] ) {\n\t\t\t\tjQuery.fx.step[ tween.prop ]( tween );\n\t\t\t} else if ( tween.elem.nodeType === 1 &&\n\t\t\t\t( tween.elem.style[ jQuery.cssProps[ tween.prop ] ] != null ||\n\t\t\t\t\tjQuery.cssHooks[ tween.prop ] ) ) {\n\t\t\t\tjQuery.style( tween.elem, tween.prop, tween.now + tween.unit );\n\t\t\t} else {\n\t\t\t\ttween.elem[ tween.prop ] = tween.now;\n\t\t\t}\n\t\t}\n\t}\n};\n\n// Support: IE <=9 only\n// Panic based approach to setting things on disconnected nodes\nTween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {\n\tset: function( tween ) {\n\t\tif ( tween.elem.nodeType && tween.elem.parentNode ) {\n\t\t\ttween.elem[ tween.prop ] = tween.now;\n\t\t}\n\t}\n};\n\njQuery.easing = {\n\tlinear: function( p ) {\n\t\treturn p;\n\t},\n\tswing: function( p ) {\n\t\treturn 0.5 - Math.cos( p * Math.PI ) / 2;\n\t},\n\t_default: \"swing\"\n};\n\njQuery.fx = Tween.prototype.init;\n\n// Back compat <1.8 extension point\njQuery.fx.step = {};\n\n\n\n\nvar\n\tfxNow, inProgress,\n\trfxtypes = /^(?:toggle|show|hide)$/,\n\trrun = /queueHooks$/;\n\nfunction schedule() {\n\tif ( inProgress ) {\n\t\tif ( document.hidden === false && window.requestAnimationFrame ) {\n\t\t\twindow.requestAnimationFrame( schedule );\n\t\t} else {\n\t\t\twindow.setTimeout( schedule, jQuery.fx.interval );\n\t\t}\n\n\t\tjQuery.fx.tick();\n\t}\n}\n\n// Animations created synchronously will run synchronously\nfunction createFxNow() {\n\twindow.setTimeout( function() {\n\t\tfxNow = undefined;\n\t} );\n\treturn ( fxNow = Date.now() );\n}\n\n// Generate parameters to create a standard animation\nfunction genFx( type, includeWidth ) {\n\tvar which,\n\t\ti = 0,\n\t\tattrs = { height: type };\n\n\t// If we include width, step value is 1 to do all cssExpand values,\n\t// otherwise step value is 2 to skip over Left and Right\n\tincludeWidth = includeWidth ? 1 : 0;\n\tfor ( ; i < 4; i += 2 - includeWidth ) {\n\t\twhich = cssExpand[ i ];\n\t\tattrs[ \"margin\" + which ] = attrs[ \"padding\" + which ] = type;\n\t}\n\n\tif ( includeWidth ) {\n\t\tattrs.opacity = attrs.width = type;\n\t}\n\n\treturn attrs;\n}\n\nfunction createTween( value, prop, animation ) {\n\tvar tween,\n\t\tcollection = ( Animation.tweeners[ prop ] || [] ).concat( Animation.tweeners[ \"*\" ] ),\n\t\tindex = 0,\n\t\tlength = collection.length;\n\tfor ( ; index < length; index++ ) {\n\t\tif ( ( tween = collection[ index ].call( animation, prop, value ) ) ) {\n\n\t\t\t// We're done with this property\n\t\t\treturn tween;\n\t\t}\n\t}\n}\n\nfunction defaultPrefilter( elem, props, opts ) {\n\tvar prop, value, toggle, hooks, oldfire, propTween, restoreDisplay, display,\n\t\tisBox = \"width\" in props || \"height\" in props,\n\t\tanim = this,\n\t\torig = {},\n\t\tstyle = elem.style,\n\t\thidden = elem.nodeType && isHiddenWithinTree( elem ),\n\t\tdataShow = dataPriv.get( elem, \"fxshow\" );\n\n\t// Queue-skipping animations hijack the fx hooks\n\tif ( !opts.queue ) {\n\t\thooks = jQuery._queueHooks( elem, \"fx\" );\n\t\tif ( hooks.unqueued == null ) {\n\t\t\thooks.unqueued = 0;\n\t\t\toldfire = hooks.empty.fire;\n\t\t\thooks.empty.fire = function() {\n\t\t\t\tif ( !hooks.unqueued ) {\n\t\t\t\t\toldfire();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\thooks.unqueued++;\n\n\t\tanim.always( function() {\n\n\t\t\t// Ensure the complete handler is called before this completes\n\t\t\tanim.always( function() {\n\t\t\t\thooks.unqueued--;\n\t\t\t\tif ( !jQuery.queue( elem, \"fx\" ).length ) {\n\t\t\t\t\thooks.empty.fire();\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\t}\n\n\t// Detect show/hide animations\n\tfor ( prop in props ) {\n\t\tvalue = props[ prop ];\n\t\tif ( rfxtypes.test( value ) ) {\n\t\t\tdelete props[ prop ];\n\t\t\ttoggle = toggle || value === \"toggle\";\n\t\t\tif ( value === ( hidden ? \"hide\" : \"show\" ) ) {\n\n\t\t\t\t// Pretend to be hidden if this is a \"show\" and\n\t\t\t\t// there is still data from a stopped show/hide\n\t\t\t\tif ( value === \"show\" && dataShow && dataShow[ prop ] !== undefined ) {\n\t\t\t\t\thidden = true;\n\n\t\t\t\t// Ignore all other no-op show/hide data\n\t\t\t\t} else {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\torig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );\n\t\t}\n\t}\n\n\t// Bail out if this is a no-op like .hide().hide()\n\tpropTween = !jQuery.isEmptyObject( props );\n\tif ( !propTween && jQuery.isEmptyObject( orig ) ) {\n\t\treturn;\n\t}\n\n\t// Restrict \"overflow\" and \"display\" styles during box animations\n\tif ( isBox && elem.nodeType === 1 ) {\n\n\t\t// Support: IE <=9 - 11, Edge 12 - 15\n\t\t// Record all 3 overflow attributes because IE does not infer the shorthand\n\t\t// from identically-valued overflowX and overflowY and Edge just mirrors\n\t\t// the overflowX value there.\n\t\topts.overflow = [ style.overflow, style.overflowX, style.overflowY ];\n\n\t\t// Identify a display type, preferring old show/hide data over the CSS cascade\n\t\trestoreDisplay = dataShow && dataShow.display;\n\t\tif ( restoreDisplay == null ) {\n\t\t\trestoreDisplay = dataPriv.get( elem, \"display\" );\n\t\t}\n\t\tdisplay = jQuery.css( elem, \"display\" );\n\t\tif ( display === \"none\" ) {\n\t\t\tif ( restoreDisplay ) {\n\t\t\t\tdisplay = restoreDisplay;\n\t\t\t} else {\n\n\t\t\t\t// Get nonempty value(s) by temporarily forcing visibility\n\t\t\t\tshowHide( [ elem ], true );\n\t\t\t\trestoreDisplay = elem.style.display || restoreDisplay;\n\t\t\t\tdisplay = jQuery.css( elem, \"display\" );\n\t\t\t\tshowHide( [ elem ] );\n\t\t\t}\n\t\t}\n\n\t\t// Animate inline elements as inline-block\n\t\tif ( display === \"inline\" || display === \"inline-block\" && restoreDisplay != null ) {\n\t\t\tif ( jQuery.css( elem, \"float\" ) === \"none\" ) {\n\n\t\t\t\t// Restore the original display value at the end of pure show/hide animations\n\t\t\t\tif ( !propTween ) {\n\t\t\t\t\tanim.done( function() {\n\t\t\t\t\t\tstyle.display = restoreDisplay;\n\t\t\t\t\t} );\n\t\t\t\t\tif ( restoreDisplay == null ) {\n\t\t\t\t\t\tdisplay = style.display;\n\t\t\t\t\t\trestoreDisplay = display === \"none\" ? \"\" : display;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tstyle.display = \"inline-block\";\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( opts.overflow ) {\n\t\tstyle.overflow = \"hidden\";\n\t\tanim.always( function() {\n\t\t\tstyle.overflow = opts.overflow[ 0 ];\n\t\t\tstyle.overflowX = opts.overflow[ 1 ];\n\t\t\tstyle.overflowY = opts.overflow[ 2 ];\n\t\t} );\n\t}\n\n\t// Implement show/hide animations\n\tpropTween = false;\n\tfor ( prop in orig ) {\n\n\t\t// General show/hide setup for this element animation\n\t\tif ( !propTween ) {\n\t\t\tif ( dataShow ) {\n\t\t\t\tif ( \"hidden\" in dataShow ) {\n\t\t\t\t\thidden = dataShow.hidden;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdataShow = dataPriv.access( elem, \"fxshow\", { display: restoreDisplay } );\n\t\t\t}\n\n\t\t\t// Store hidden/visible for toggle so `.stop().toggle()` \"reverses\"\n\t\t\tif ( toggle ) {\n\t\t\t\tdataShow.hidden = !hidden;\n\t\t\t}\n\n\t\t\t// Show elements before animating them\n\t\t\tif ( hidden ) {\n\t\t\t\tshowHide( [ elem ], true );\n\t\t\t}\n\n\t\t\t/* eslint-disable no-loop-func */\n\n\t\t\tanim.done( function() {\n\n\t\t\t/* eslint-enable no-loop-func */\n\n\t\t\t\t// The final step of a \"hide\" animation is actually hiding the element\n\t\t\t\tif ( !hidden ) {\n\t\t\t\t\tshowHide( [ elem ] );\n\t\t\t\t}\n\t\t\t\tdataPriv.remove( elem, \"fxshow\" );\n\t\t\t\tfor ( prop in orig ) {\n\t\t\t\t\tjQuery.style( elem, prop, orig[ prop ] );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\t// Per-property setup\n\t\tpropTween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );\n\t\tif ( !( prop in dataShow ) ) {\n\t\t\tdataShow[ prop ] = propTween.start;\n\t\t\tif ( hidden ) {\n\t\t\t\tpropTween.end = propTween.start;\n\t\t\t\tpropTween.start = 0;\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction propFilter( props, specialEasing ) {\n\tvar index, name, easing, value, hooks;\n\n\t// camelCase, specialEasing and expand cssHook pass\n\tfor ( index in props ) {\n\t\tname = camelCase( index );\n\t\teasing = specialEasing[ name ];\n\t\tvalue = props[ index ];\n\t\tif ( Array.isArray( value ) ) {\n\t\t\teasing = value[ 1 ];\n\t\t\tvalue = props[ index ] = value[ 0 ];\n\t\t}\n\n\t\tif ( index !== name ) {\n\t\t\tprops[ name ] = value;\n\t\t\tdelete props[ index ];\n\t\t}\n\n\t\thooks = jQuery.cssHooks[ name ];\n\t\tif ( hooks && \"expand\" in hooks ) {\n\t\t\tvalue = hooks.expand( value );\n\t\t\tdelete props[ name ];\n\n\t\t\t// Not quite $.extend, this won't overwrite existing keys.\n\t\t\t// Reusing 'index' because we have the correct \"name\"\n\t\t\tfor ( index in value ) {\n\t\t\t\tif ( !( index in props ) ) {\n\t\t\t\t\tprops[ index ] = value[ index ];\n\t\t\t\t\tspecialEasing[ index ] = easing;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tspecialEasing[ name ] = easing;\n\t\t}\n\t}\n}\n\nfunction Animation( elem, properties, options ) {\n\tvar result,\n\t\tstopped,\n\t\tindex = 0,\n\t\tlength = Animation.prefilters.length,\n\t\tdeferred = jQuery.Deferred().always( function() {\n\n\t\t\t// Don't match elem in the :animated selector\n\t\t\tdelete tick.elem;\n\t\t} ),\n\t\ttick = function() {\n\t\t\tif ( stopped ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar currentTime = fxNow || createFxNow(),\n\t\t\t\tremaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),\n\n\t\t\t\t// Support: Android 2.3 only\n\t\t\t\t// Archaic crash bug won't allow us to use `1 - ( 0.5 || 0 )` (#12497)\n\t\t\t\ttemp = remaining / animation.duration || 0,\n\t\t\t\tpercent = 1 - temp,\n\t\t\t\tindex = 0,\n\t\t\t\tlength = animation.tweens.length;\n\n\t\t\tfor ( ; index < length; index++ ) {\n\t\t\t\tanimation.tweens[ index ].run( percent );\n\t\t\t}\n\n\t\t\tdeferred.notifyWith( elem, [ animation, percent, remaining ] );\n\n\t\t\t// If there's more to do, yield\n\t\t\tif ( percent < 1 && length ) {\n\t\t\t\treturn remaining;\n\t\t\t}\n\n\t\t\t// If this was an empty animation, synthesize a final progress notification\n\t\t\tif ( !length ) {\n\t\t\t\tdeferred.notifyWith( elem, [ animation, 1, 0 ] );\n\t\t\t}\n\n\t\t\t// Resolve the animation and report its conclusion\n\t\t\tdeferred.resolveWith( elem, [ animation ] );\n\t\t\treturn false;\n\t\t},\n\t\tanimation = deferred.promise( {\n\t\t\telem: elem,\n\t\t\tprops: jQuery.extend( {}, properties ),\n\t\t\topts: jQuery.extend( true, {\n\t\t\t\tspecialEasing: {},\n\t\t\t\teasing: jQuery.easing._default\n\t\t\t}, options ),\n\t\t\toriginalProperties: properties,\n\t\t\toriginalOptions: options,\n\t\t\tstartTime: fxNow || createFxNow(),\n\t\t\tduration: options.duration,\n\t\t\ttweens: [],\n\t\t\tcreateTween: function( prop, end ) {\n\t\t\t\tvar tween = jQuery.Tween( elem, animation.opts, prop, end,\n\t\t\t\t\t\tanimation.opts.specialEasing[ prop ] || animation.opts.easing );\n\t\t\t\tanimation.tweens.push( tween );\n\t\t\t\treturn tween;\n\t\t\t},\n\t\t\tstop: function( gotoEnd ) {\n\t\t\t\tvar index = 0,\n\n\t\t\t\t\t// If we are going to the end, we want to run all the tweens\n\t\t\t\t\t// otherwise we skip this part\n\t\t\t\t\tlength = gotoEnd ? animation.tweens.length : 0;\n\t\t\t\tif ( stopped ) {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t\tstopped = true;\n\t\t\t\tfor ( ; index < length; index++ ) {\n\t\t\t\t\tanimation.tweens[ index ].run( 1 );\n\t\t\t\t}\n\n\t\t\t\t// Resolve when we played the last frame; otherwise, reject\n\t\t\t\tif ( gotoEnd ) {\n\t\t\t\t\tdeferred.notifyWith( elem, [ animation, 1, 0 ] );\n\t\t\t\t\tdeferred.resolveWith( elem, [ animation, gotoEnd ] );\n\t\t\t\t} else {\n\t\t\t\t\tdeferred.rejectWith( elem, [ animation, gotoEnd ] );\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t}\n\t\t} ),\n\t\tprops = animation.props;\n\n\tpropFilter( props, animation.opts.specialEasing );\n\n\tfor ( ; index < length; index++ ) {\n\t\tresult = Animation.prefilters[ index ].call( animation, elem, props, animation.opts );\n\t\tif ( result ) {\n\t\t\tif ( isFunction( result.stop ) ) {\n\t\t\t\tjQuery._queueHooks( animation.elem, animation.opts.queue ).stop =\n\t\t\t\t\tresult.stop.bind( result );\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t}\n\n\tjQuery.map( props, createTween, animation );\n\n\tif ( isFunction( animation.opts.start ) ) {\n\t\tanimation.opts.start.call( elem, animation );\n\t}\n\n\t// Attach callbacks from options\n\tanimation\n\t\t.progress( animation.opts.progress )\n\t\t.done( animation.opts.done, animation.opts.complete )\n\t\t.fail( animation.opts.fail )\n\t\t.always( animation.opts.always );\n\n\tjQuery.fx.timer(\n\t\tjQuery.extend( tick, {\n\t\t\telem: elem,\n\t\t\tanim: animation,\n\t\t\tqueue: animation.opts.queue\n\t\t} )\n\t);\n\n\treturn animation;\n}\n\njQuery.Animation = jQuery.extend( Animation, {\n\n\ttweeners: {\n\t\t\"*\": [ function( prop, value ) {\n\t\t\tvar tween = this.createTween( prop, value );\n\t\t\tadjustCSS( tween.elem, prop, rcssNum.exec( value ), tween );\n\t\t\treturn tween;\n\t\t} ]\n\t},\n\n\ttweener: function( props, callback ) {\n\t\tif ( isFunction( props ) ) {\n\t\t\tcallback = props;\n\t\t\tprops = [ \"*\" ];\n\t\t} else {\n\t\t\tprops = props.match( rnothtmlwhite );\n\t\t}\n\n\t\tvar prop,\n\t\t\tindex = 0,\n\t\t\tlength = props.length;\n\n\t\tfor ( ; index < length; index++ ) {\n\t\t\tprop = props[ index ];\n\t\t\tAnimation.tweeners[ prop ] = Animation.tweeners[ prop ] || [];\n\t\t\tAnimation.tweeners[ prop ].unshift( callback );\n\t\t}\n\t},\n\n\tprefilters: [ defaultPrefilter ],\n\n\tprefilter: function( callback, prepend ) {\n\t\tif ( prepend ) {\n\t\t\tAnimation.prefilters.unshift( callback );\n\t\t} else {\n\t\t\tAnimation.prefilters.push( callback );\n\t\t}\n\t}\n} );\n\njQuery.speed = function( speed, easing, fn ) {\n\tvar opt = speed && typeof speed === \"object\" ? jQuery.extend( {}, speed ) : {\n\t\tcomplete: fn || !fn && easing ||\n\t\t\tisFunction( speed ) && speed,\n\t\tduration: speed,\n\t\teasing: fn && easing || easing && !isFunction( easing ) && easing\n\t};\n\n\t// Go to the end state if fx are off\n\tif ( jQuery.fx.off ) {\n\t\topt.duration = 0;\n\n\t} else {\n\t\tif ( typeof opt.duration !== \"number\" ) {\n\t\t\tif ( opt.duration in jQuery.fx.speeds ) {\n\t\t\t\topt.duration = jQuery.fx.speeds[ opt.duration ];\n\n\t\t\t} else {\n\t\t\t\topt.duration = jQuery.fx.speeds._default;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Normalize opt.queue - true/undefined/null -> \"fx\"\n\tif ( opt.queue == null || opt.queue === true ) {\n\t\topt.queue = \"fx\";\n\t}\n\n\t// Queueing\n\topt.old = opt.complete;\n\n\topt.complete = function() {\n\t\tif ( isFunction( opt.old ) ) {\n\t\t\topt.old.call( this );\n\t\t}\n\n\t\tif ( opt.queue ) {\n\t\t\tjQuery.dequeue( this, opt.queue );\n\t\t}\n\t};\n\n\treturn opt;\n};\n\njQuery.fn.extend( {\n\tfadeTo: function( speed, to, easing, callback ) {\n\n\t\t// Show any hidden elements after setting opacity to 0\n\t\treturn this.filter( isHiddenWithinTree ).css( \"opacity\", 0 ).show()\n\n\t\t\t// Animate to the value specified\n\t\t\t.end().animate( { opacity: to }, speed, easing, callback );\n\t},\n\tanimate: function( prop, speed, easing, callback ) {\n\t\tvar empty = jQuery.isEmptyObject( prop ),\n\t\t\toptall = jQuery.speed( speed, easing, callback ),\n\t\t\tdoAnimation = function() {\n\n\t\t\t\t// Operate on a copy of prop so per-property easing won't be lost\n\t\t\t\tvar anim = Animation( this, jQuery.extend( {}, prop ), optall );\n\n\t\t\t\t// Empty animations, or finishing resolves immediately\n\t\t\t\tif ( empty || dataPriv.get( this, \"finish\" ) ) {\n\t\t\t\t\tanim.stop( true );\n\t\t\t\t}\n\t\t\t};\n\t\t\tdoAnimation.finish = doAnimation;\n\n\t\treturn empty || optall.queue === false ?\n\t\t\tthis.each( doAnimation ) :\n\t\t\tthis.queue( optall.queue, doAnimation );\n\t},\n\tstop: function( type, clearQueue, gotoEnd ) {\n\t\tvar stopQueue = function( hooks ) {\n\t\t\tvar stop = hooks.stop;\n\t\t\tdelete hooks.stop;\n\t\t\tstop( gotoEnd );\n\t\t};\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tgotoEnd = clearQueue;\n\t\t\tclearQueue = type;\n\t\t\ttype = undefined;\n\t\t}\n\t\tif ( clearQueue && type !== false ) {\n\t\t\tthis.queue( type || \"fx\", [] );\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tvar dequeue = true,\n\t\t\t\tindex = type != null && type + \"queueHooks\",\n\t\t\t\ttimers = jQuery.timers,\n\t\t\t\tdata = dataPriv.get( this );\n\n\t\t\tif ( index ) {\n\t\t\t\tif ( data[ index ] && data[ index ].stop ) {\n\t\t\t\t\tstopQueue( data[ index ] );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor ( index in data ) {\n\t\t\t\t\tif ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {\n\t\t\t\t\t\tstopQueue( data[ index ] );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor ( index = timers.length; index--; ) {\n\t\t\t\tif ( timers[ index ].elem === this &&\n\t\t\t\t\t( type == null || timers[ index ].queue === type ) ) {\n\n\t\t\t\t\ttimers[ index ].anim.stop( gotoEnd );\n\t\t\t\t\tdequeue = false;\n\t\t\t\t\ttimers.splice( index, 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Start the next in the queue if the last step wasn't forced.\n\t\t\t// Timers currently will call their complete callbacks, which\n\t\t\t// will dequeue but only if they were gotoEnd.\n\t\t\tif ( dequeue || !gotoEnd ) {\n\t\t\t\tjQuery.dequeue( this, type );\n\t\t\t}\n\t\t} );\n\t},\n\tfinish: function( type ) {\n\t\tif ( type !== false ) {\n\t\t\ttype = type || \"fx\";\n\t\t}\n\t\treturn this.each( function() {\n\t\t\tvar index,\n\t\t\t\tdata = dataPriv.get( this ),\n\t\t\t\tqueue = data[ type + \"queue\" ],\n\t\t\t\thooks = data[ type + \"queueHooks\" ],\n\t\t\t\ttimers = jQuery.timers,\n\t\t\t\tlength = queue ? queue.length : 0;\n\n\t\t\t// Enable finishing flag on private data\n\t\t\tdata.finish = true;\n\n\t\t\t// Empty the queue first\n\t\t\tjQuery.queue( this, type, [] );\n\n\t\t\tif ( hooks && hooks.stop ) {\n\t\t\t\thooks.stop.call( this, true );\n\t\t\t}\n\n\t\t\t// Look for any active animations, and finish them\n\t\t\tfor ( index = timers.length; index--; ) {\n\t\t\t\tif ( timers[ index ].elem === this && timers[ index ].queue === type ) {\n\t\t\t\t\ttimers[ index ].anim.stop( true );\n\t\t\t\t\ttimers.splice( index, 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Look for any animations in the old queue and finish them\n\t\t\tfor ( index = 0; index < length; index++ ) {\n\t\t\t\tif ( queue[ index ] && queue[ index ].finish ) {\n\t\t\t\t\tqueue[ index ].finish.call( this );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Turn off finishing flag\n\t\t\tdelete data.finish;\n\t\t} );\n\t}\n} );\n\njQuery.each( [ \"toggle\", \"show\", \"hide\" ], function( i, name ) {\n\tvar cssFn = jQuery.fn[ name ];\n\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n\t\treturn speed == null || typeof speed === \"boolean\" ?\n\t\t\tcssFn.apply( this, arguments ) :\n\t\t\tthis.animate( genFx( name, true ), speed, easing, callback );\n\t};\n} );\n\n// Generate shortcuts for custom animations\njQuery.each( {\n\tslideDown: genFx( \"show\" ),\n\tslideUp: genFx( \"hide\" ),\n\tslideToggle: genFx( \"toggle\" ),\n\tfadeIn: { opacity: \"show\" },\n\tfadeOut: { opacity: \"hide\" },\n\tfadeToggle: { opacity: \"toggle\" }\n}, function( name, props ) {\n\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n\t\treturn this.animate( props, speed, easing, callback );\n\t};\n} );\n\njQuery.timers = [];\njQuery.fx.tick = function() {\n\tvar timer,\n\t\ti = 0,\n\t\ttimers = jQuery.timers;\n\n\tfxNow = Date.now();\n\n\tfor ( ; i < timers.length; i++ ) {\n\t\ttimer = timers[ i ];\n\n\t\t// Run the timer and safely remove it when done (allowing for external removal)\n\t\tif ( !timer() && timers[ i ] === timer ) {\n\t\t\ttimers.splice( i--, 1 );\n\t\t}\n\t}\n\n\tif ( !timers.length ) {\n\t\tjQuery.fx.stop();\n\t}\n\tfxNow = undefined;\n};\n\njQuery.fx.timer = function( timer ) {\n\tjQuery.timers.push( timer );\n\tjQuery.fx.start();\n};\n\njQuery.fx.interval = 13;\njQuery.fx.start = function() {\n\tif ( inProgress ) {\n\t\treturn;\n\t}\n\n\tinProgress = true;\n\tschedule();\n};\n\njQuery.fx.stop = function() {\n\tinProgress = null;\n};\n\njQuery.fx.speeds = {\n\tslow: 600,\n\tfast: 200,\n\n\t// Default speed\n\t_default: 400\n};\n\n\n// Based off of the plugin by Clint Helfers, with permission.\n// https://web.archive.org/web/20100324014747/http://blindsignals.com/index.php/2009/07/jquery-delay/\njQuery.fn.delay = function( time, type ) {\n\ttime = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;\n\ttype = type || \"fx\";\n\n\treturn this.queue( type, function( next, hooks ) {\n\t\tvar timeout = window.setTimeout( next, time );\n\t\thooks.stop = function() {\n\t\t\twindow.clearTimeout( timeout );\n\t\t};\n\t} );\n};\n\n\n( function() {\n\tvar input = document.createElement( \"input\" ),\n\t\tselect = document.createElement( \"select\" ),\n\t\topt = select.appendChild( document.createElement( \"option\" ) );\n\n\tinput.type = \"checkbox\";\n\n\t// Support: Android <=4.3 only\n\t// Default value for a checkbox should be \"on\"\n\tsupport.checkOn = input.value !== \"\";\n\n\t// Support: IE <=11 only\n\t// Must access selectedIndex to make default options select\n\tsupport.optSelected = opt.selected;\n\n\t// Support: IE <=11 only\n\t// An input loses its value after becoming a radio\n\tinput = document.createElement( \"input\" );\n\tinput.value = \"t\";\n\tinput.type = \"radio\";\n\tsupport.radioValue = input.value === \"t\";\n} )();\n\n\nvar boolHook,\n\tattrHandle = jQuery.expr.attrHandle;\n\njQuery.fn.extend( {\n\tattr: function( name, value ) {\n\t\treturn access( this, jQuery.attr, name, value, arguments.length > 1 );\n\t},\n\n\tremoveAttr: function( name ) {\n\t\treturn this.each( function() {\n\t\t\tjQuery.removeAttr( this, name );\n\t\t} );\n\t}\n} );\n\njQuery.extend( {\n\tattr: function( elem, name, value ) {\n\t\tvar ret, hooks,\n\t\t\tnType = elem.nodeType;\n\n\t\t// Don't get/set attributes on text, comment and attribute nodes\n\t\tif ( nType === 3 || nType === 8 || nType === 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Fallback to prop when attributes are not supported\n\t\tif ( typeof elem.getAttribute === \"undefined\" ) {\n\t\t\treturn jQuery.prop( elem, name, value );\n\t\t}\n\n\t\t// Attribute hooks are determined by the lowercase version\n\t\t// Grab necessary hook if one is defined\n\t\tif ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {\n\t\t\thooks = jQuery.attrHooks[ name.toLowerCase() ] ||\n\t\t\t\t( jQuery.expr.match.bool.test( name ) ? boolHook : undefined );\n\t\t}\n\n\t\tif ( value !== undefined ) {\n\t\t\tif ( value === null ) {\n\t\t\t\tjQuery.removeAttr( elem, name );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( hooks && \"set\" in hooks &&\n\t\t\t\t( ret = hooks.set( elem, value, name ) ) !== undefined ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\telem.setAttribute( name, value + \"\" );\n\t\t\treturn value;\n\t\t}\n\n\t\tif ( hooks && \"get\" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {\n\t\t\treturn ret;\n\t\t}\n\n\t\tret = jQuery.find.attr( elem, name );\n\n\t\t// Non-existent attributes return null, we normalize to undefined\n\t\treturn ret == null ? undefined : ret;\n\t},\n\n\tattrHooks: {\n\t\ttype: {\n\t\t\tset: function( elem, value ) {\n\t\t\t\tif ( !support.radioValue && value === \"radio\" &&\n\t\t\t\t\tnodeName( elem, \"input\" ) ) {\n\t\t\t\t\tvar val = elem.value;\n\t\t\t\t\telem.setAttribute( \"type\", value );\n\t\t\t\t\tif ( val ) {\n\t\t\t\t\t\telem.value = val;\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tremoveAttr: function( elem, value ) {\n\t\tvar name,\n\t\t\ti = 0,\n\n\t\t\t// Attribute names can contain non-HTML whitespace characters\n\t\t\t// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n\t\t\tattrNames = value && value.match( rnothtmlwhite );\n\n\t\tif ( attrNames && elem.nodeType === 1 ) {\n\t\t\twhile ( ( name = attrNames[ i++ ] ) ) {\n\t\t\t\telem.removeAttribute( name );\n\t\t\t}\n\t\t}\n\t}\n} );\n\n// Hooks for boolean attributes\nboolHook = {\n\tset: function( elem, value, name ) {\n\t\tif ( value === false ) {\n\n\t\t\t// Remove boolean attributes when set to false\n\t\t\tjQuery.removeAttr( elem, name );\n\t\t} else {\n\t\t\telem.setAttribute( name, name );\n\t\t}\n\t\treturn name;\n\t}\n};\n\njQuery.each( jQuery.expr.match.bool.source.match( /\\w+/g ), function( i, name ) {\n\tvar getter = attrHandle[ name ] || jQuery.find.attr;\n\n\tattrHandle[ name ] = function( elem, name, isXML ) {\n\t\tvar ret, handle,\n\t\t\tlowercaseName = name.toLowerCase();\n\n\t\tif ( !isXML ) {\n\n\t\t\t// Avoid an infinite loop by temporarily removing this function from the getter\n\t\t\thandle = attrHandle[ lowercaseName ];\n\t\t\tattrHandle[ lowercaseName ] = ret;\n\t\t\tret = getter( elem, name, isXML ) != null ?\n\t\t\t\tlowercaseName :\n\t\t\t\tnull;\n\t\t\tattrHandle[ lowercaseName ] = handle;\n\t\t}\n\t\treturn ret;\n\t};\n} );\n\n\n\n\nvar rfocusable = /^(?:input|select|textarea|button)$/i,\n\trclickable = /^(?:a|area)$/i;\n\njQuery.fn.extend( {\n\tprop: function( name, value ) {\n\t\treturn access( this, jQuery.prop, name, value, arguments.length > 1 );\n\t},\n\n\tremoveProp: function( name ) {\n\t\treturn this.each( function() {\n\t\t\tdelete this[ jQuery.propFix[ name ] || name ];\n\t\t} );\n\t}\n} );\n\njQuery.extend( {\n\tprop: function( elem, name, value ) {\n\t\tvar ret, hooks,\n\t\t\tnType = elem.nodeType;\n\n\t\t// Don't get/set properties on text, comment and attribute nodes\n\t\tif ( nType === 3 || nType === 8 || nType === 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {\n\n\t\t\t// Fix name and attach hooks\n\t\t\tname = jQuery.propFix[ name ] || name;\n\t\t\thooks = jQuery.propHooks[ name ];\n\t\t}\n\n\t\tif ( value !== undefined ) {\n\t\t\tif ( hooks && \"set\" in hooks &&\n\t\t\t\t( ret = hooks.set( elem, value, name ) ) !== undefined ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\treturn ( elem[ name ] = value );\n\t\t}\n\n\t\tif ( hooks && \"get\" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {\n\t\t\treturn ret;\n\t\t}\n\n\t\treturn elem[ name ];\n\t},\n\n\tpropHooks: {\n\t\ttabIndex: {\n\t\t\tget: function( elem ) {\n\n\t\t\t\t// Support: IE <=9 - 11 only\n\t\t\t\t// elem.tabIndex doesn't always return the\n\t\t\t\t// correct value when it hasn't been explicitly set\n\t\t\t\t// https://web.archive.org/web/20141116233347/http://fluidproject.org/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/\n\t\t\t\t// Use proper attribute retrieval(#12072)\n\t\t\t\tvar tabindex = jQuery.find.attr( elem, \"tabindex\" );\n\n\t\t\t\tif ( tabindex ) {\n\t\t\t\t\treturn parseInt( tabindex, 10 );\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\trfocusable.test( elem.nodeName ) ||\n\t\t\t\t\trclickable.test( elem.nodeName ) &&\n\t\t\t\t\telem.href\n\t\t\t\t) {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}\n\t},\n\n\tpropFix: {\n\t\t\"for\": \"htmlFor\",\n\t\t\"class\": \"className\"\n\t}\n} );\n\n// Support: IE <=11 only\n// Accessing the selectedIndex property\n// forces the browser to respect setting selected\n// on the option\n// The getter ensures a default option is selected\n// when in an optgroup\n// eslint rule \"no-unused-expressions\" is disabled for this code\n// since it considers such accessions noop\nif ( !support.optSelected ) {\n\tjQuery.propHooks.selected = {\n\t\tget: function( elem ) {\n\n\t\t\t/* eslint no-unused-expressions: \"off\" */\n\n\t\t\tvar parent = elem.parentNode;\n\t\t\tif ( parent && parent.parentNode ) {\n\t\t\t\tparent.parentNode.selectedIndex;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tset: function( elem ) {\n\n\t\t\t/* eslint no-unused-expressions: \"off\" */\n\n\t\t\tvar parent = elem.parentNode;\n\t\t\tif ( parent ) {\n\t\t\t\tparent.selectedIndex;\n\n\t\t\t\tif ( parent.parentNode ) {\n\t\t\t\t\tparent.parentNode.selectedIndex;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\njQuery.each( [\n\t\"tabIndex\",\n\t\"readOnly\",\n\t\"maxLength\",\n\t\"cellSpacing\",\n\t\"cellPadding\",\n\t\"rowSpan\",\n\t\"colSpan\",\n\t\"useMap\",\n\t\"frameBorder\",\n\t\"contentEditable\"\n], function() {\n\tjQuery.propFix[ this.toLowerCase() ] = this;\n} );\n\n\n\n\n\t// Strip and collapse whitespace according to HTML spec\n\t// https://infra.spec.whatwg.org/#strip-and-collapse-ascii-whitespace\n\tfunction stripAndCollapse( value ) {\n\t\tvar tokens = value.match( rnothtmlwhite ) || [];\n\t\treturn tokens.join( \" \" );\n\t}\n\n\nfunction getClass( elem ) {\n\treturn elem.getAttribute && elem.getAttribute( \"class\" ) || \"\";\n}\n\nfunction classesToArray( value ) {\n\tif ( Array.isArray( value ) ) {\n\t\treturn value;\n\t}\n\tif ( typeof value === \"string\" ) {\n\t\treturn value.match( rnothtmlwhite ) || [];\n\t}\n\treturn [];\n}\n\njQuery.fn.extend( {\n\taddClass: function( value ) {\n\t\tvar classes, elem, cur, curValue, clazz, j, finalValue,\n\t\t\ti = 0;\n\n\t\tif ( isFunction( value ) ) {\n\t\t\treturn this.each( function( j ) {\n\t\t\t\tjQuery( this ).addClass( value.call( this, j, getClass( this ) ) );\n\t\t\t} );\n\t\t}\n\n\t\tclasses = classesToArray( value );\n\n\t\tif ( classes.length ) {\n\t\t\twhile ( ( elem = this[ i++ ] ) ) {\n\t\t\t\tcurValue = getClass( elem );\n\t\t\t\tcur = elem.nodeType === 1 && ( \" \" + stripAndCollapse( curValue ) + \" \" );\n\n\t\t\t\tif ( cur ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\twhile ( ( clazz = classes[ j++ ] ) ) {\n\t\t\t\t\t\tif ( cur.indexOf( \" \" + clazz + \" \" ) < 0 ) {\n\t\t\t\t\t\t\tcur += clazz + \" \";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Only assign if different to avoid unneeded rendering.\n\t\t\t\t\tfinalValue = stripAndCollapse( cur );\n\t\t\t\t\tif ( curValue !== finalValue ) {\n\t\t\t\t\t\telem.setAttribute( \"class\", finalValue );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tremoveClass: function( value ) {\n\t\tvar classes, elem, cur, curValue, clazz, j, finalValue,\n\t\t\ti = 0;\n\n\t\tif ( isFunction( value ) ) {\n\t\t\treturn this.each( function( j ) {\n\t\t\t\tjQuery( this ).removeClass( value.call( this, j, getClass( this ) ) );\n\t\t\t} );\n\t\t}\n\n\t\tif ( !arguments.length ) {\n\t\t\treturn this.attr( \"class\", \"\" );\n\t\t}\n\n\t\tclasses = classesToArray( value );\n\n\t\tif ( classes.length ) {\n\t\t\twhile ( ( elem = this[ i++ ] ) ) {\n\t\t\t\tcurValue = getClass( elem );\n\n\t\t\t\t// This expression is here for better compressibility (see addClass)\n\t\t\t\tcur = elem.nodeType === 1 && ( \" \" + stripAndCollapse( curValue ) + \" \" );\n\n\t\t\t\tif ( cur ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\twhile ( ( clazz = classes[ j++ ] ) ) {\n\n\t\t\t\t\t\t// Remove *all* instances\n\t\t\t\t\t\twhile ( cur.indexOf( \" \" + clazz + \" \" ) > -1 ) {\n\t\t\t\t\t\t\tcur = cur.replace( \" \" + clazz + \" \", \" \" );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Only assign if different to avoid unneeded rendering.\n\t\t\t\t\tfinalValue = stripAndCollapse( cur );\n\t\t\t\t\tif ( curValue !== finalValue ) {\n\t\t\t\t\t\telem.setAttribute( \"class\", finalValue );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\ttoggleClass: function( value, stateVal ) {\n\t\tvar type = typeof value,\n\t\t\tisValidValue = type === \"string\" || Array.isArray( value );\n\n\t\tif ( typeof stateVal === \"boolean\" && isValidValue ) {\n\t\t\treturn stateVal ? this.addClass( value ) : this.removeClass( value );\n\t\t}\n\n\t\tif ( isFunction( value ) ) {\n\t\t\treturn this.each( function( i ) {\n\t\t\t\tjQuery( this ).toggleClass(\n\t\t\t\t\tvalue.call( this, i, getClass( this ), stateVal ),\n\t\t\t\t\tstateVal\n\t\t\t\t);\n\t\t\t} );\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tvar className, i, self, classNames;\n\n\t\t\tif ( isValidValue ) {\n\n\t\t\t\t// Toggle individual class names\n\t\t\t\ti = 0;\n\t\t\t\tself = jQuery( this );\n\t\t\t\tclassNames = classesToArray( value );\n\n\t\t\t\twhile ( ( className = classNames[ i++ ] ) ) {\n\n\t\t\t\t\t// Check each className given, space separated list\n\t\t\t\t\tif ( self.hasClass( className ) ) {\n\t\t\t\t\t\tself.removeClass( className );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.addClass( className );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t// Toggle whole class name\n\t\t\t} else if ( value === undefined || type === \"boolean\" ) {\n\t\t\t\tclassName = getClass( this );\n\t\t\t\tif ( className ) {\n\n\t\t\t\t\t// Store className if set\n\t\t\t\t\tdataPriv.set( this, \"__className__\", className );\n\t\t\t\t}\n\n\t\t\t\t// If the element has a class name or if we're passed `false`,\n\t\t\t\t// then remove the whole classname (if there was one, the above saved it).\n\t\t\t\t// Otherwise bring back whatever was previously saved (if anything),\n\t\t\t\t// falling back to the empty string if nothing was stored.\n\t\t\t\tif ( this.setAttribute ) {\n\t\t\t\t\tthis.setAttribute( \"class\",\n\t\t\t\t\t\tclassName || value === false ?\n\t\t\t\t\t\t\"\" :\n\t\t\t\t\t\tdataPriv.get( this, \"__className__\" ) || \"\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t},\n\n\thasClass: function( selector ) {\n\t\tvar className, elem,\n\t\t\ti = 0;\n\n\t\tclassName = \" \" + selector + \" \";\n\t\twhile ( ( elem = this[ i++ ] ) ) {\n\t\t\tif ( elem.nodeType === 1 &&\n\t\t\t\t( \" \" + stripAndCollapse( getClass( elem ) ) + \" \" ).indexOf( className ) > -1 ) {\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n} );\n\n\n\n\nvar rreturn = /\\r/g;\n\njQuery.fn.extend( {\n\tval: function( value ) {\n\t\tvar hooks, ret, valueIsFunction,\n\t\t\telem = this[ 0 ];\n\n\t\tif ( !arguments.length ) {\n\t\t\tif ( elem ) {\n\t\t\t\thooks = jQuery.valHooks[ elem.type ] ||\n\t\t\t\t\tjQuery.valHooks[ elem.nodeName.toLowerCase() ];\n\n\t\t\t\tif ( hooks &&\n\t\t\t\t\t\"get\" in hooks &&\n\t\t\t\t\t( ret = hooks.get( elem, \"value\" ) ) !== undefined\n\t\t\t\t) {\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\n\t\t\t\tret = elem.value;\n\n\t\t\t\t// Handle most common string cases\n\t\t\t\tif ( typeof ret === \"string\" ) {\n\t\t\t\t\treturn ret.replace( rreturn, \"\" );\n\t\t\t\t}\n\n\t\t\t\t// Handle cases where value is null/undef or number\n\t\t\t\treturn ret == null ? \"\" : ret;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tvalueIsFunction = isFunction( value );\n\n\t\treturn this.each( function( i ) {\n\t\t\tvar val;\n\n\t\t\tif ( this.nodeType !== 1 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( valueIsFunction ) {\n\t\t\t\tval = value.call( this, i, jQuery( this ).val() );\n\t\t\t} else {\n\t\t\t\tval = value;\n\t\t\t}\n\n\t\t\t// Treat null/undefined as \"\"; convert numbers to string\n\t\t\tif ( val == null ) {\n\t\t\t\tval = \"\";\n\n\t\t\t} else if ( typeof val === \"number\" ) {\n\t\t\t\tval += \"\";\n\n\t\t\t} else if ( Array.isArray( val ) ) {\n\t\t\t\tval = jQuery.map( val, function( value ) {\n\t\t\t\t\treturn value == null ? \"\" : value + \"\";\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\thooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];\n\n\t\t\t// If set returns undefined, fall back to normal setting\n\t\t\tif ( !hooks || !( \"set\" in hooks ) || hooks.set( this, val, \"value\" ) === undefined ) {\n\t\t\t\tthis.value = val;\n\t\t\t}\n\t\t} );\n\t}\n} );\n\njQuery.extend( {\n\tvalHooks: {\n\t\toption: {\n\t\t\tget: function( elem ) {\n\n\t\t\t\tvar val = jQuery.find.attr( elem, \"value\" );\n\t\t\t\treturn val != null ?\n\t\t\t\t\tval :\n\n\t\t\t\t\t// Support: IE <=10 - 11 only\n\t\t\t\t\t// option.text throws exceptions (#14686, #14858)\n\t\t\t\t\t// Strip and collapse whitespace\n\t\t\t\t\t// https://html.spec.whatwg.org/#strip-and-collapse-whitespace\n\t\t\t\t\tstripAndCollapse( jQuery.text( elem ) );\n\t\t\t}\n\t\t},\n\t\tselect: {\n\t\t\tget: function( elem ) {\n\t\t\t\tvar value, option, i,\n\t\t\t\t\toptions = elem.options,\n\t\t\t\t\tindex = elem.selectedIndex,\n\t\t\t\t\tone = elem.type === \"select-one\",\n\t\t\t\t\tvalues = one ? null : [],\n\t\t\t\t\tmax = one ? index + 1 : options.length;\n\n\t\t\t\tif ( index < 0 ) {\n\t\t\t\t\ti = max;\n\n\t\t\t\t} else {\n\t\t\t\t\ti = one ? index : 0;\n\t\t\t\t}\n\n\t\t\t\t// Loop through all the selected options\n\t\t\t\tfor ( ; i < max; i++ ) {\n\t\t\t\t\toption = options[ i ];\n\n\t\t\t\t\t// Support: IE <=9 only\n\t\t\t\t\t// IE8-9 doesn't update selected after form reset (#2551)\n\t\t\t\t\tif ( ( option.selected || i === index ) &&\n\n\t\t\t\t\t\t\t// Don't return options that are disabled or in a disabled optgroup\n\t\t\t\t\t\t\t!option.disabled &&\n\t\t\t\t\t\t\t( !option.parentNode.disabled ||\n\t\t\t\t\t\t\t\t!nodeName( option.parentNode, \"optgroup\" ) ) ) {\n\n\t\t\t\t\t\t// Get the specific value for the option\n\t\t\t\t\t\tvalue = jQuery( option ).val();\n\n\t\t\t\t\t\t// We don't need an array for one selects\n\t\t\t\t\t\tif ( one ) {\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Multi-Selects return an array\n\t\t\t\t\t\tvalues.push( value );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn values;\n\t\t\t},\n\n\t\t\tset: function( elem, value ) {\n\t\t\t\tvar optionSet, option,\n\t\t\t\t\toptions = elem.options,\n\t\t\t\t\tvalues = jQuery.makeArray( value ),\n\t\t\t\t\ti = options.length;\n\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\toption = options[ i ];\n\n\t\t\t\t\t/* eslint-disable no-cond-assign */\n\n\t\t\t\t\tif ( option.selected =\n\t\t\t\t\t\tjQuery.inArray( jQuery.valHooks.option.get( option ), values ) > -1\n\t\t\t\t\t) {\n\t\t\t\t\t\toptionSet = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t/* eslint-enable no-cond-assign */\n\t\t\t\t}\n\n\t\t\t\t// Force browsers to behave consistently when non-matching value is set\n\t\t\t\tif ( !optionSet ) {\n\t\t\t\t\telem.selectedIndex = -1;\n\t\t\t\t}\n\t\t\t\treturn values;\n\t\t\t}\n\t\t}\n\t}\n} );\n\n// Radios and checkboxes getter/setter\njQuery.each( [ \"radio\", \"checkbox\" ], function() {\n\tjQuery.valHooks[ this ] = {\n\t\tset: function( elem, value ) {\n\t\t\tif ( Array.isArray( value ) ) {\n\t\t\t\treturn ( elem.checked = jQuery.inArray( jQuery( elem ).val(), value ) > -1 );\n\t\t\t}\n\t\t}\n\t};\n\tif ( !support.checkOn ) {\n\t\tjQuery.valHooks[ this ].get = function( elem ) {\n\t\t\treturn elem.getAttribute( \"value\" ) === null ? \"on\" : elem.value;\n\t\t};\n\t}\n} );\n\n\n\n\n// Return jQuery for attributes-only inclusion\n\n\nsupport.focusin = \"onfocusin\" in window;\n\n\nvar rfocusMorph = /^(?:focusinfocus|focusoutblur)$/,\n\tstopPropagationCallback = function( e ) {\n\t\te.stopPropagation();\n\t};\n\njQuery.extend( jQuery.event, {\n\n\ttrigger: function( event, data, elem, onlyHandlers ) {\n\n\t\tvar i, cur, tmp, bubbleType, ontype, handle, special, lastElement,\n\t\t\teventPath = [ elem || document ],\n\t\t\ttype = hasOwn.call( event, \"type\" ) ? event.type : event,\n\t\t\tnamespaces = hasOwn.call( event, \"namespace\" ) ? event.namespace.split( \".\" ) : [];\n\n\t\tcur = lastElement = tmp = elem = elem || document;\n\n\t\t// Don't do events on text and comment nodes\n\t\tif ( elem.nodeType === 3 || elem.nodeType === 8 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// focus/blur morphs to focusin/out; ensure we're not firing them right now\n\t\tif ( rfocusMorph.test( type + jQuery.event.triggered ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( type.indexOf( \".\" ) > -1 ) {\n\n\t\t\t// Namespaced trigger; create a regexp to match event type in handle()\n\t\t\tnamespaces = type.split( \".\" );\n\t\t\ttype = namespaces.shift();\n\t\t\tnamespaces.sort();\n\t\t}\n\t\tontype = type.indexOf( \":\" ) < 0 && \"on\" + type;\n\n\t\t// Caller can pass in a jQuery.Event object, Object, or just an event type string\n\t\tevent = event[ jQuery.expando ] ?\n\t\t\tevent :\n\t\t\tnew jQuery.Event( type, typeof event === \"object\" && event );\n\n\t\t// Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)\n\t\tevent.isTrigger = onlyHandlers ? 2 : 3;\n\t\tevent.namespace = namespaces.join( \".\" );\n\t\tevent.rnamespace = event.namespace ?\n\t\t\tnew RegExp( \"(^|\\\\.)\" + namespaces.join( \"\\\\.(?:.*\\\\.|)\" ) + \"(\\\\.|$)\" ) :\n\t\t\tnull;\n\n\t\t// Clean up the event in case it is being reused\n\t\tevent.result = undefined;\n\t\tif ( !event.target ) {\n\t\t\tevent.target = elem;\n\t\t}\n\n\t\t// Clone any incoming data and prepend the event, creating the handler arg list\n\t\tdata = data == null ?\n\t\t\t[ event ] :\n\t\t\tjQuery.makeArray( data, [ event ] );\n\n\t\t// Allow special events to draw outside the lines\n\t\tspecial = jQuery.event.special[ type ] || {};\n\t\tif ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Determine event propagation path in advance, per W3C events spec (#9951)\n\t\t// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)\n\t\tif ( !onlyHandlers && !special.noBubble && !isWindow( elem ) ) {\n\n\t\t\tbubbleType = special.delegateType || type;\n\t\t\tif ( !rfocusMorph.test( bubbleType + type ) ) {\n\t\t\t\tcur = cur.parentNode;\n\t\t\t}\n\t\t\tfor ( ; cur; cur = cur.parentNode ) {\n\t\t\t\teventPath.push( cur );\n\t\t\t\ttmp = cur;\n\t\t\t}\n\n\t\t\t// Only add window if we got to document (e.g., not plain obj or detached DOM)\n\t\t\tif ( tmp === ( elem.ownerDocument || document ) ) {\n\t\t\t\teventPath.push( tmp.defaultView || tmp.parentWindow || window );\n\t\t\t}\n\t\t}\n\n\t\t// Fire handlers on the event path\n\t\ti = 0;\n\t\twhile ( ( cur = eventPath[ i++ ] ) && !event.isPropagationStopped() ) {\n\t\t\tlastElement = cur;\n\t\t\tevent.type = i > 1 ?\n\t\t\t\tbubbleType :\n\t\t\t\tspecial.bindType || type;\n\n\t\t\t// jQuery handler\n\t\t\thandle = ( dataPriv.get( cur, \"events\" ) || {} )[ event.type ] &&\n\t\t\t\tdataPriv.get( cur, \"handle\" );\n\t\t\tif ( handle ) {\n\t\t\t\thandle.apply( cur, data );\n\t\t\t}\n\n\t\t\t// Native handler\n\t\t\thandle = ontype && cur[ ontype ];\n\t\t\tif ( handle && handle.apply && acceptData( cur ) ) {\n\t\t\t\tevent.result = handle.apply( cur, data );\n\t\t\t\tif ( event.result === false ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tevent.type = type;\n\n\t\t// If nobody prevented the default action, do it now\n\t\tif ( !onlyHandlers && !event.isDefaultPrevented() ) {\n\n\t\t\tif ( ( !special._default ||\n\t\t\t\tspecial._default.apply( eventPath.pop(), data ) === false ) &&\n\t\t\t\tacceptData( elem ) ) {\n\n\t\t\t\t// Call a native DOM method on the target with the same name as the event.\n\t\t\t\t// Don't do default actions on window, that's where global variables be (#6170)\n\t\t\t\tif ( ontype && isFunction( elem[ type ] ) && !isWindow( elem ) ) {\n\n\t\t\t\t\t// Don't re-trigger an onFOO event when we call its FOO() method\n\t\t\t\t\ttmp = elem[ ontype ];\n\n\t\t\t\t\tif ( tmp ) {\n\t\t\t\t\t\telem[ ontype ] = null;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Prevent re-triggering of the same event, since we already bubbled it above\n\t\t\t\t\tjQuery.event.triggered = type;\n\n\t\t\t\t\tif ( event.isPropagationStopped() ) {\n\t\t\t\t\t\tlastElement.addEventListener( type, stopPropagationCallback );\n\t\t\t\t\t}\n\n\t\t\t\t\telem[ type ]();\n\n\t\t\t\t\tif ( event.isPropagationStopped() ) {\n\t\t\t\t\t\tlastElement.removeEventListener( type, stopPropagationCallback );\n\t\t\t\t\t}\n\n\t\t\t\t\tjQuery.event.triggered = undefined;\n\n\t\t\t\t\tif ( tmp ) {\n\t\t\t\t\t\telem[ ontype ] = tmp;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn event.result;\n\t},\n\n\t// Piggyback on a donor event to simulate a different one\n\t// Used only for `focus(in | out)` events\n\tsimulate: function( type, elem, event ) {\n\t\tvar e = jQuery.extend(\n\t\t\tnew jQuery.Event(),\n\t\t\tevent,\n\t\t\t{\n\t\t\t\ttype: type,\n\t\t\t\tisSimulated: true\n\t\t\t}\n\t\t);\n\n\t\tjQuery.event.trigger( e, null, elem );\n\t}\n\n} );\n\njQuery.fn.extend( {\n\n\ttrigger: function( type, data ) {\n\t\treturn this.each( function() {\n\t\t\tjQuery.event.trigger( type, data, this );\n\t\t} );\n\t},\n\ttriggerHandler: function( type, data ) {\n\t\tvar elem = this[ 0 ];\n\t\tif ( elem ) {\n\t\t\treturn jQuery.event.trigger( type, data, elem, true );\n\t\t}\n\t}\n} );\n\n\n// Support: Firefox <=44\n// Firefox doesn't have focus(in | out) events\n// Related ticket - https://bugzilla.mozilla.org/show_bug.cgi?id=687787\n//\n// Support: Chrome <=48 - 49, Safari <=9.0 - 9.1\n// focus(in | out) events fire after focus & blur events,\n// which is spec violation - http://www.w3.org/TR/DOM-Level-3-Events/#events-focusevent-event-order\n// Related ticket - https://bugs.chromium.org/p/chromium/issues/detail?id=449857\nif ( !support.focusin ) {\n\tjQuery.each( { focus: \"focusin\", blur: \"focusout\" }, function( orig, fix ) {\n\n\t\t// Attach a single capturing handler on the document while someone wants focusin/focusout\n\t\tvar handler = function( event ) {\n\t\t\tjQuery.event.simulate( fix, event.target, jQuery.event.fix( event ) );\n\t\t};\n\n\t\tjQuery.event.special[ fix ] = {\n\t\t\tsetup: function() {\n\t\t\t\tvar doc = this.ownerDocument || this,\n\t\t\t\t\tattaches = dataPriv.access( doc, fix );\n\n\t\t\t\tif ( !attaches ) {\n\t\t\t\t\tdoc.addEventListener( orig, handler, true );\n\t\t\t\t}\n\t\t\t\tdataPriv.access( doc, fix, ( attaches || 0 ) + 1 );\n\t\t\t},\n\t\t\tteardown: function() {\n\t\t\t\tvar doc = this.ownerDocument || this,\n\t\t\t\t\tattaches = dataPriv.access( doc, fix ) - 1;\n\n\t\t\t\tif ( !attaches ) {\n\t\t\t\t\tdoc.removeEventListener( orig, handler, true );\n\t\t\t\t\tdataPriv.remove( doc, fix );\n\n\t\t\t\t} else {\n\t\t\t\t\tdataPriv.access( doc, fix, attaches );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t} );\n}\nvar location = window.location;\n\nvar nonce = Date.now();\n\nvar rquery = ( /\\?/ );\n\n\n\n// Cross-browser xml parsing\njQuery.parseXML = function( data ) {\n\tvar xml;\n\tif ( !data || typeof data !== \"string\" ) {\n\t\treturn null;\n\t}\n\n\t// Support: IE 9 - 11 only\n\t// IE throws on parseFromString with invalid input.\n\ttry {\n\t\txml = ( new window.DOMParser() ).parseFromString( data, \"text/xml\" );\n\t} catch ( e ) {\n\t\txml = undefined;\n\t}\n\n\tif ( !xml || xml.getElementsByTagName( \"parsererror\" ).length ) {\n\t\tjQuery.error( \"Invalid XML: \" + data );\n\t}\n\treturn xml;\n};\n\n\nvar\n\trbracket = /\\[\\]$/,\n\trCRLF = /\\r?\\n/g,\n\trsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,\n\trsubmittable = /^(?:input|select|textarea|keygen)/i;\n\nfunction buildParams( prefix, obj, traditional, add ) {\n\tvar name;\n\n\tif ( Array.isArray( obj ) ) {\n\n\t\t// Serialize array item.\n\t\tjQuery.each( obj, function( i, v ) {\n\t\t\tif ( traditional || rbracket.test( prefix ) ) {\n\n\t\t\t\t// Treat each array item as a scalar.\n\t\t\t\tadd( prefix, v );\n\n\t\t\t} else {\n\n\t\t\t\t// Item is non-scalar (array or object), encode its numeric index.\n\t\t\t\tbuildParams(\n\t\t\t\t\tprefix + \"[\" + ( typeof v === \"object\" && v != null ? i : \"\" ) + \"]\",\n\t\t\t\t\tv,\n\t\t\t\t\ttraditional,\n\t\t\t\t\tadd\n\t\t\t\t);\n\t\t\t}\n\t\t} );\n\n\t} else if ( !traditional && toType( obj ) === \"object\" ) {\n\n\t\t// Serialize object item.\n\t\tfor ( name in obj ) {\n\t\t\tbuildParams( prefix + \"[\" + name + \"]\", obj[ name ], traditional, add );\n\t\t}\n\n\t} else {\n\n\t\t// Serialize scalar item.\n\t\tadd( prefix, obj );\n\t}\n}\n\n// Serialize an array of form elements or a set of\n// key/values into a query string\njQuery.param = function( a, traditional ) {\n\tvar prefix,\n\t\ts = [],\n\t\tadd = function( key, valueOrFunction ) {\n\n\t\t\t// If value is a function, invoke it and use its return value\n\t\t\tvar value = isFunction( valueOrFunction ) ?\n\t\t\t\tvalueOrFunction() :\n\t\t\t\tvalueOrFunction;\n\n\t\t\ts[ s.length ] = encodeURIComponent( key ) + \"=\" +\n\t\t\t\tencodeURIComponent( value == null ? \"\" : value );\n\t\t};\n\n\t// If an array was passed in, assume that it is an array of form elements.\n\tif ( Array.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {\n\n\t\t// Serialize the form elements\n\t\tjQuery.each( a, function() {\n\t\t\tadd( this.name, this.value );\n\t\t} );\n\n\t} else {\n\n\t\t// If traditional, encode the \"old\" way (the way 1.3.2 or older\n\t\t// did it), otherwise encode params recursively.\n\t\tfor ( prefix in a ) {\n\t\t\tbuildParams( prefix, a[ prefix ], traditional, add );\n\t\t}\n\t}\n\n\t// Return the resulting serialization\n\treturn s.join( \"&\" );\n};\n\njQuery.fn.extend( {\n\tserialize: function() {\n\t\treturn jQuery.param( this.serializeArray() );\n\t},\n\tserializeArray: function() {\n\t\treturn this.map( function() {\n\n\t\t\t// Can add propHook for \"elements\" to filter or add form elements\n\t\t\tvar elements = jQuery.prop( this, \"elements\" );\n\t\t\treturn elements ? jQuery.makeArray( elements ) : this;\n\t\t} )\n\t\t.filter( function() {\n\t\t\tvar type = this.type;\n\n\t\t\t// Use .is( \":disabled\" ) so that fieldset[disabled] works\n\t\t\treturn this.name && !jQuery( this ).is( \":disabled\" ) &&\n\t\t\t\trsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&\n\t\t\t\t( this.checked || !rcheckableType.test( type ) );\n\t\t} )\n\t\t.map( function( i, elem ) {\n\t\t\tvar val = jQuery( this ).val();\n\n\t\t\tif ( val == null ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif ( Array.isArray( val ) ) {\n\t\t\t\treturn jQuery.map( val, function( val ) {\n\t\t\t\t\treturn { name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\treturn { name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n\t\t} ).get();\n\t}\n} );\n\n\nvar\n\tr20 = /%20/g,\n\trhash = /#.*$/,\n\trantiCache = /([?&])_=[^&]*/,\n\trheaders = /^(.*?):[ \\t]*([^\\r\\n]*)$/mg,\n\n\t// #7653, #8125, #8152: local protocol detection\n\trlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,\n\trnoContent = /^(?:GET|HEAD)$/,\n\trprotocol = /^\\/\\//,\n\n\t/* Prefilters\n\t * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)\n\t * 2) These are called:\n\t *    - BEFORE asking for a transport\n\t *    - AFTER param serialization (s.data is a string if s.processData is true)\n\t * 3) key is the dataType\n\t * 4) the catchall symbol \"*\" can be used\n\t * 5) execution will start with transport dataType and THEN continue down to \"*\" if needed\n\t */\n\tprefilters = {},\n\n\t/* Transports bindings\n\t * 1) key is the dataType\n\t * 2) the catchall symbol \"*\" can be used\n\t * 3) selection will start with transport dataType and THEN go to \"*\" if needed\n\t */\n\ttransports = {},\n\n\t// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression\n\tallTypes = \"*/\".concat( \"*\" ),\n\n\t// Anchor tag for parsing the document origin\n\toriginAnchor = document.createElement( \"a\" );\n\toriginAnchor.href = location.href;\n\n// Base \"constructor\" for jQuery.ajaxPrefilter and jQuery.ajaxTransport\nfunction addToPrefiltersOrTransports( structure ) {\n\n\t// dataTypeExpression is optional and defaults to \"*\"\n\treturn function( dataTypeExpression, func ) {\n\n\t\tif ( typeof dataTypeExpression !== \"string\" ) {\n\t\t\tfunc = dataTypeExpression;\n\t\t\tdataTypeExpression = \"*\";\n\t\t}\n\n\t\tvar dataType,\n\t\t\ti = 0,\n\t\t\tdataTypes = dataTypeExpression.toLowerCase().match( rnothtmlwhite ) || [];\n\n\t\tif ( isFunction( func ) ) {\n\n\t\t\t// For each dataType in the dataTypeExpression\n\t\t\twhile ( ( dataType = dataTypes[ i++ ] ) ) {\n\n\t\t\t\t// Prepend if requested\n\t\t\t\tif ( dataType[ 0 ] === \"+\" ) {\n\t\t\t\t\tdataType = dataType.slice( 1 ) || \"*\";\n\t\t\t\t\t( structure[ dataType ] = structure[ dataType ] || [] ).unshift( func );\n\n\t\t\t\t// Otherwise append\n\t\t\t\t} else {\n\t\t\t\t\t( structure[ dataType ] = structure[ dataType ] || [] ).push( func );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\n// Base inspection function for prefilters and transports\nfunction inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {\n\n\tvar inspected = {},\n\t\tseekingTransport = ( structure === transports );\n\n\tfunction inspect( dataType ) {\n\t\tvar selected;\n\t\tinspected[ dataType ] = true;\n\t\tjQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {\n\t\t\tvar dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );\n\t\t\tif ( typeof dataTypeOrTransport === \"string\" &&\n\t\t\t\t!seekingTransport && !inspected[ dataTypeOrTransport ] ) {\n\n\t\t\t\toptions.dataTypes.unshift( dataTypeOrTransport );\n\t\t\t\tinspect( dataTypeOrTransport );\n\t\t\t\treturn false;\n\t\t\t} else if ( seekingTransport ) {\n\t\t\t\treturn !( selected = dataTypeOrTransport );\n\t\t\t}\n\t\t} );\n\t\treturn selected;\n\t}\n\n\treturn inspect( options.dataTypes[ 0 ] ) || !inspected[ \"*\" ] && inspect( \"*\" );\n}\n\n// A special extend for ajax options\n// that takes \"flat\" options (not to be deep extended)\n// Fixes #9887\nfunction ajaxExtend( target, src ) {\n\tvar key, deep,\n\t\tflatOptions = jQuery.ajaxSettings.flatOptions || {};\n\n\tfor ( key in src ) {\n\t\tif ( src[ key ] !== undefined ) {\n\t\t\t( flatOptions[ key ] ? target : ( deep || ( deep = {} ) ) )[ key ] = src[ key ];\n\t\t}\n\t}\n\tif ( deep ) {\n\t\tjQuery.extend( true, target, deep );\n\t}\n\n\treturn target;\n}\n\n/* Handles responses to an ajax request:\n * - finds the right dataType (mediates between content-type and expected dataType)\n * - returns the corresponding response\n */\nfunction ajaxHandleResponses( s, jqXHR, responses ) {\n\n\tvar ct, type, finalDataType, firstDataType,\n\t\tcontents = s.contents,\n\t\tdataTypes = s.dataTypes;\n\n\t// Remove auto dataType and get content-type in the process\n\twhile ( dataTypes[ 0 ] === \"*\" ) {\n\t\tdataTypes.shift();\n\t\tif ( ct === undefined ) {\n\t\t\tct = s.mimeType || jqXHR.getResponseHeader( \"Content-Type\" );\n\t\t}\n\t}\n\n\t// Check if we're dealing with a known content-type\n\tif ( ct ) {\n\t\tfor ( type in contents ) {\n\t\t\tif ( contents[ type ] && contents[ type ].test( ct ) ) {\n\t\t\t\tdataTypes.unshift( type );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Check to see if we have a response for the expected dataType\n\tif ( dataTypes[ 0 ] in responses ) {\n\t\tfinalDataType = dataTypes[ 0 ];\n\t} else {\n\n\t\t// Try convertible dataTypes\n\t\tfor ( type in responses ) {\n\t\t\tif ( !dataTypes[ 0 ] || s.converters[ type + \" \" + dataTypes[ 0 ] ] ) {\n\t\t\t\tfinalDataType = type;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( !firstDataType ) {\n\t\t\t\tfirstDataType = type;\n\t\t\t}\n\t\t}\n\n\t\t// Or just use first one\n\t\tfinalDataType = finalDataType || firstDataType;\n\t}\n\n\t// If we found a dataType\n\t// We add the dataType to the list if needed\n\t// and return the corresponding response\n\tif ( finalDataType ) {\n\t\tif ( finalDataType !== dataTypes[ 0 ] ) {\n\t\t\tdataTypes.unshift( finalDataType );\n\t\t}\n\t\treturn responses[ finalDataType ];\n\t}\n}\n\n/* Chain conversions given the request and the original response\n * Also sets the responseXXX fields on the jqXHR instance\n */\nfunction ajaxConvert( s, response, jqXHR, isSuccess ) {\n\tvar conv2, current, conv, tmp, prev,\n\t\tconverters = {},\n\n\t\t// Work with a copy of dataTypes in case we need to modify it for conversion\n\t\tdataTypes = s.dataTypes.slice();\n\n\t// Create converters map with lowercased keys\n\tif ( dataTypes[ 1 ] ) {\n\t\tfor ( conv in s.converters ) {\n\t\t\tconverters[ conv.toLowerCase() ] = s.converters[ conv ];\n\t\t}\n\t}\n\n\tcurrent = dataTypes.shift();\n\n\t// Convert to each sequential dataType\n\twhile ( current ) {\n\n\t\tif ( s.responseFields[ current ] ) {\n\t\t\tjqXHR[ s.responseFields[ current ] ] = response;\n\t\t}\n\n\t\t// Apply the dataFilter if provided\n\t\tif ( !prev && isSuccess && s.dataFilter ) {\n\t\t\tresponse = s.dataFilter( response, s.dataType );\n\t\t}\n\n\t\tprev = current;\n\t\tcurrent = dataTypes.shift();\n\n\t\tif ( current ) {\n\n\t\t\t// There's only work to do if current dataType is non-auto\n\t\t\tif ( current === \"*\" ) {\n\n\t\t\t\tcurrent = prev;\n\n\t\t\t// Convert response if prev dataType is non-auto and differs from current\n\t\t\t} else if ( prev !== \"*\" && prev !== current ) {\n\n\t\t\t\t// Seek a direct converter\n\t\t\t\tconv = converters[ prev + \" \" + current ] || converters[ \"* \" + current ];\n\n\t\t\t\t// If none found, seek a pair\n\t\t\t\tif ( !conv ) {\n\t\t\t\t\tfor ( conv2 in converters ) {\n\n\t\t\t\t\t\t// If conv2 outputs current\n\t\t\t\t\t\ttmp = conv2.split( \" \" );\n\t\t\t\t\t\tif ( tmp[ 1 ] === current ) {\n\n\t\t\t\t\t\t\t// If prev can be converted to accepted input\n\t\t\t\t\t\t\tconv = converters[ prev + \" \" + tmp[ 0 ] ] ||\n\t\t\t\t\t\t\t\tconverters[ \"* \" + tmp[ 0 ] ];\n\t\t\t\t\t\t\tif ( conv ) {\n\n\t\t\t\t\t\t\t\t// Condense equivalence converters\n\t\t\t\t\t\t\t\tif ( conv === true ) {\n\t\t\t\t\t\t\t\t\tconv = converters[ conv2 ];\n\n\t\t\t\t\t\t\t\t// Otherwise, insert the intermediate dataType\n\t\t\t\t\t\t\t\t} else if ( converters[ conv2 ] !== true ) {\n\t\t\t\t\t\t\t\t\tcurrent = tmp[ 0 ];\n\t\t\t\t\t\t\t\t\tdataTypes.unshift( tmp[ 1 ] );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Apply converter (if not an equivalence)\n\t\t\t\tif ( conv !== true ) {\n\n\t\t\t\t\t// Unless errors are allowed to bubble, catch and return them\n\t\t\t\t\tif ( conv && s.throws ) {\n\t\t\t\t\t\tresponse = conv( response );\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tresponse = conv( response );\n\t\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tstate: \"parsererror\",\n\t\t\t\t\t\t\t\terror: conv ? e : \"No conversion from \" + prev + \" to \" + current\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn { state: \"success\", data: response };\n}\n\njQuery.extend( {\n\n\t// Counter for holding the number of active queries\n\tactive: 0,\n\n\t// Last-Modified header cache for next request\n\tlastModified: {},\n\tetag: {},\n\n\tajaxSettings: {\n\t\turl: location.href,\n\t\ttype: \"GET\",\n\t\tisLocal: rlocalProtocol.test( location.protocol ),\n\t\tglobal: true,\n\t\tprocessData: true,\n\t\tasync: true,\n\t\tcontentType: \"application/x-www-form-urlencoded; charset=UTF-8\",\n\n\t\t/*\n\t\ttimeout: 0,\n\t\tdata: null,\n\t\tdataType: null,\n\t\tusername: null,\n\t\tpassword: null,\n\t\tcache: null,\n\t\tthrows: false,\n\t\ttraditional: false,\n\t\theaders: {},\n\t\t*/\n\n\t\taccepts: {\n\t\t\t\"*\": allTypes,\n\t\t\ttext: \"text/plain\",\n\t\t\thtml: \"text/html\",\n\t\t\txml: \"application/xml, text/xml\",\n\t\t\tjson: \"application/json, text/javascript\"\n\t\t},\n\n\t\tcontents: {\n\t\t\txml: /\\bxml\\b/,\n\t\t\thtml: /\\bhtml/,\n\t\t\tjson: /\\bjson\\b/\n\t\t},\n\n\t\tresponseFields: {\n\t\t\txml: \"responseXML\",\n\t\t\ttext: \"responseText\",\n\t\t\tjson: \"responseJSON\"\n\t\t},\n\n\t\t// Data converters\n\t\t// Keys separate source (or catchall \"*\") and destination types with a single space\n\t\tconverters: {\n\n\t\t\t// Convert anything to text\n\t\t\t\"* text\": String,\n\n\t\t\t// Text to html (true = no transformation)\n\t\t\t\"text html\": true,\n\n\t\t\t// Evaluate text as a json expression\n\t\t\t\"text json\": JSON.parse,\n\n\t\t\t// Parse text as xml\n\t\t\t\"text xml\": jQuery.parseXML\n\t\t},\n\n\t\t// For options that shouldn't be deep extended:\n\t\t// you can add your own custom options here if\n\t\t// and when you create one that shouldn't be\n\t\t// deep extended (see ajaxExtend)\n\t\tflatOptions: {\n\t\t\turl: true,\n\t\t\tcontext: true\n\t\t}\n\t},\n\n\t// Creates a full fledged settings object into target\n\t// with both ajaxSettings and settings fields.\n\t// If target is omitted, writes into ajaxSettings.\n\tajaxSetup: function( target, settings ) {\n\t\treturn settings ?\n\n\t\t\t// Building a settings object\n\t\t\tajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :\n\n\t\t\t// Extending ajaxSettings\n\t\t\tajaxExtend( jQuery.ajaxSettings, target );\n\t},\n\n\tajaxPrefilter: addToPrefiltersOrTransports( prefilters ),\n\tajaxTransport: addToPrefiltersOrTransports( transports ),\n\n\t// Main method\n\tajax: function( url, options ) {\n\n\t\t// If url is an object, simulate pre-1.5 signature\n\t\tif ( typeof url === \"object\" ) {\n\t\t\toptions = url;\n\t\t\turl = undefined;\n\t\t}\n\n\t\t// Force options to be an object\n\t\toptions = options || {};\n\n\t\tvar transport,\n\n\t\t\t// URL without anti-cache param\n\t\t\tcacheURL,\n\n\t\t\t// Response headers\n\t\t\tresponseHeadersString,\n\t\t\tresponseHeaders,\n\n\t\t\t// timeout handle\n\t\t\ttimeoutTimer,\n\n\t\t\t// Url cleanup var\n\t\t\turlAnchor,\n\n\t\t\t// Request state (becomes false upon send and true upon completion)\n\t\t\tcompleted,\n\n\t\t\t// To know if global events are to be dispatched\n\t\t\tfireGlobals,\n\n\t\t\t// Loop variable\n\t\t\ti,\n\n\t\t\t// uncached part of the url\n\t\t\tuncached,\n\n\t\t\t// Create the final options object\n\t\t\ts = jQuery.ajaxSetup( {}, options ),\n\n\t\t\t// Callbacks context\n\t\t\tcallbackContext = s.context || s,\n\n\t\t\t// Context for global events is callbackContext if it is a DOM node or jQuery collection\n\t\t\tglobalEventContext = s.context &&\n\t\t\t\t( callbackContext.nodeType || callbackContext.jquery ) ?\n\t\t\t\t\tjQuery( callbackContext ) :\n\t\t\t\t\tjQuery.event,\n\n\t\t\t// Deferreds\n\t\t\tdeferred = jQuery.Deferred(),\n\t\t\tcompleteDeferred = jQuery.Callbacks( \"once memory\" ),\n\n\t\t\t// Status-dependent callbacks\n\t\t\tstatusCode = s.statusCode || {},\n\n\t\t\t// Headers (they are sent all at once)\n\t\t\trequestHeaders = {},\n\t\t\trequestHeadersNames = {},\n\n\t\t\t// Default abort message\n\t\t\tstrAbort = \"canceled\",\n\n\t\t\t// Fake xhr\n\t\t\tjqXHR = {\n\t\t\t\treadyState: 0,\n\n\t\t\t\t// Builds headers hashtable if needed\n\t\t\t\tgetResponseHeader: function( key ) {\n\t\t\t\t\tvar match;\n\t\t\t\t\tif ( completed ) {\n\t\t\t\t\t\tif ( !responseHeaders ) {\n\t\t\t\t\t\t\tresponseHeaders = {};\n\t\t\t\t\t\t\twhile ( ( match = rheaders.exec( responseHeadersString ) ) ) {\n\t\t\t\t\t\t\t\tresponseHeaders[ match[ 1 ].toLowerCase() ] = match[ 2 ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmatch = responseHeaders[ key.toLowerCase() ];\n\t\t\t\t\t}\n\t\t\t\t\treturn match == null ? null : match;\n\t\t\t\t},\n\n\t\t\t\t// Raw string\n\t\t\t\tgetAllResponseHeaders: function() {\n\t\t\t\t\treturn completed ? responseHeadersString : null;\n\t\t\t\t},\n\n\t\t\t\t// Caches the header\n\t\t\t\tsetRequestHeader: function( name, value ) {\n\t\t\t\t\tif ( completed == null ) {\n\t\t\t\t\t\tname = requestHeadersNames[ name.toLowerCase() ] =\n\t\t\t\t\t\t\trequestHeadersNames[ name.toLowerCase() ] || name;\n\t\t\t\t\t\trequestHeaders[ name ] = value;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Overrides response content-type header\n\t\t\t\toverrideMimeType: function( type ) {\n\t\t\t\t\tif ( completed == null ) {\n\t\t\t\t\t\ts.mimeType = type;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Status-dependent callbacks\n\t\t\t\tstatusCode: function( map ) {\n\t\t\t\t\tvar code;\n\t\t\t\t\tif ( map ) {\n\t\t\t\t\t\tif ( completed ) {\n\n\t\t\t\t\t\t\t// Execute the appropriate callbacks\n\t\t\t\t\t\t\tjqXHR.always( map[ jqXHR.status ] );\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// Lazy-add the new callbacks in a way that preserves old ones\n\t\t\t\t\t\t\tfor ( code in map ) {\n\t\t\t\t\t\t\t\tstatusCode[ code ] = [ statusCode[ code ], map[ code ] ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Cancel the request\n\t\t\t\tabort: function( statusText ) {\n\t\t\t\t\tvar finalText = statusText || strAbort;\n\t\t\t\t\tif ( transport ) {\n\t\t\t\t\t\ttransport.abort( finalText );\n\t\t\t\t\t}\n\t\t\t\t\tdone( 0, finalText );\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t};\n\n\t\t// Attach deferreds\n\t\tdeferred.promise( jqXHR );\n\n\t\t// Add protocol if not provided (prefilters might expect it)\n\t\t// Handle falsy url in the settings object (#10093: consistency with old signature)\n\t\t// We also use the url parameter if available\n\t\ts.url = ( ( url || s.url || location.href ) + \"\" )\n\t\t\t.replace( rprotocol, location.protocol + \"//\" );\n\n\t\t// Alias method option to type as per ticket #12004\n\t\ts.type = options.method || options.type || s.method || s.type;\n\n\t\t// Extract dataTypes list\n\t\ts.dataTypes = ( s.dataType || \"*\" ).toLowerCase().match( rnothtmlwhite ) || [ \"\" ];\n\n\t\t// A cross-domain request is in order when the origin doesn't match the current origin.\n\t\tif ( s.crossDomain == null ) {\n\t\t\turlAnchor = document.createElement( \"a\" );\n\n\t\t\t// Support: IE <=8 - 11, Edge 12 - 15\n\t\t\t// IE throws exception on accessing the href property if url is malformed,\n\t\t\t// e.g. http://example.com:80x/\n\t\t\ttry {\n\t\t\t\turlAnchor.href = s.url;\n\n\t\t\t\t// Support: IE <=8 - 11 only\n\t\t\t\t// Anchor's host property isn't correctly set when s.url is relative\n\t\t\t\turlAnchor.href = urlAnchor.href;\n\t\t\t\ts.crossDomain = originAnchor.protocol + \"//\" + originAnchor.host !==\n\t\t\t\t\turlAnchor.protocol + \"//\" + urlAnchor.host;\n\t\t\t} catch ( e ) {\n\n\t\t\t\t// If there is an error parsing the URL, assume it is crossDomain,\n\t\t\t\t// it can be rejected by the transport if it is invalid\n\t\t\t\ts.crossDomain = true;\n\t\t\t}\n\t\t}\n\n\t\t// Convert data if not already a string\n\t\tif ( s.data && s.processData && typeof s.data !== \"string\" ) {\n\t\t\ts.data = jQuery.param( s.data, s.traditional );\n\t\t}\n\n\t\t// Apply prefilters\n\t\tinspectPrefiltersOrTransports( prefilters, s, options, jqXHR );\n\n\t\t// If request was aborted inside a prefilter, stop there\n\t\tif ( completed ) {\n\t\t\treturn jqXHR;\n\t\t}\n\n\t\t// We can fire global events as of now if asked to\n\t\t// Don't fire events if jQuery.event is undefined in an AMD-usage scenario (#15118)\n\t\tfireGlobals = jQuery.event && s.global;\n\n\t\t// Watch for a new set of requests\n\t\tif ( fireGlobals && jQuery.active++ === 0 ) {\n\t\t\tjQuery.event.trigger( \"ajaxStart\" );\n\t\t}\n\n\t\t// Uppercase the type\n\t\ts.type = s.type.toUpperCase();\n\n\t\t// Determine if request has content\n\t\ts.hasContent = !rnoContent.test( s.type );\n\n\t\t// Save the URL in case we're toying with the If-Modified-Since\n\t\t// and/or If-None-Match header later on\n\t\t// Remove hash to simplify url manipulation\n\t\tcacheURL = s.url.replace( rhash, \"\" );\n\n\t\t// More options handling for requests with no content\n\t\tif ( !s.hasContent ) {\n\n\t\t\t// Remember the hash so we can put it back\n\t\t\tuncached = s.url.slice( cacheURL.length );\n\n\t\t\t// If data is available and should be processed, append data to url\n\t\t\tif ( s.data && ( s.processData || typeof s.data === \"string\" ) ) {\n\t\t\t\tcacheURL += ( rquery.test( cacheURL ) ? \"&\" : \"?\" ) + s.data;\n\n\t\t\t\t// #9682: remove data so that it's not used in an eventual retry\n\t\t\t\tdelete s.data;\n\t\t\t}\n\n\t\t\t// Add or update anti-cache param if needed\n\t\t\tif ( s.cache === false ) {\n\t\t\t\tcacheURL = cacheURL.replace( rantiCache, \"$1\" );\n\t\t\t\tuncached = ( rquery.test( cacheURL ) ? \"&\" : \"?\" ) + \"_=\" + ( nonce++ ) + uncached;\n\t\t\t}\n\n\t\t\t// Put hash and anti-cache on the URL that will be requested (gh-1732)\n\t\t\ts.url = cacheURL + uncached;\n\n\t\t// Change '%20' to '+' if this is encoded form body content (gh-2658)\n\t\t} else if ( s.data && s.processData &&\n\t\t\t( s.contentType || \"\" ).indexOf( \"application/x-www-form-urlencoded\" ) === 0 ) {\n\t\t\ts.data = s.data.replace( r20, \"+\" );\n\t\t}\n\n\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\n\t\tif ( s.ifModified ) {\n\t\t\tif ( jQuery.lastModified[ cacheURL ] ) {\n\t\t\t\tjqXHR.setRequestHeader( \"If-Modified-Since\", jQuery.lastModified[ cacheURL ] );\n\t\t\t}\n\t\t\tif ( jQuery.etag[ cacheURL ] ) {\n\t\t\t\tjqXHR.setRequestHeader( \"If-None-Match\", jQuery.etag[ cacheURL ] );\n\t\t\t}\n\t\t}\n\n\t\t// Set the correct header, if data is being sent\n\t\tif ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {\n\t\t\tjqXHR.setRequestHeader( \"Content-Type\", s.contentType );\n\t\t}\n\n\t\t// Set the Accepts header for the server, depending on the dataType\n\t\tjqXHR.setRequestHeader(\n\t\t\t\"Accept\",\n\t\t\ts.dataTypes[ 0 ] && s.accepts[ s.dataTypes[ 0 ] ] ?\n\t\t\t\ts.accepts[ s.dataTypes[ 0 ] ] +\n\t\t\t\t\t( s.dataTypes[ 0 ] !== \"*\" ? \", \" + allTypes + \"; q=0.01\" : \"\" ) :\n\t\t\t\ts.accepts[ \"*\" ]\n\t\t);\n\n\t\t// Check for headers option\n\t\tfor ( i in s.headers ) {\n\t\t\tjqXHR.setRequestHeader( i, s.headers[ i ] );\n\t\t}\n\n\t\t// Allow custom headers/mimetypes and early abort\n\t\tif ( s.beforeSend &&\n\t\t\t( s.beforeSend.call( callbackContext, jqXHR, s ) === false || completed ) ) {\n\n\t\t\t// Abort if not done already and return\n\t\t\treturn jqXHR.abort();\n\t\t}\n\n\t\t// Aborting is no longer a cancellation\n\t\tstrAbort = \"abort\";\n\n\t\t// Install callbacks on deferreds\n\t\tcompleteDeferred.add( s.complete );\n\t\tjqXHR.done( s.success );\n\t\tjqXHR.fail( s.error );\n\n\t\t// Get transport\n\t\ttransport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );\n\n\t\t// If no transport, we auto-abort\n\t\tif ( !transport ) {\n\t\t\tdone( -1, \"No Transport\" );\n\t\t} else {\n\t\t\tjqXHR.readyState = 1;\n\n\t\t\t// Send global event\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( \"ajaxSend\", [ jqXHR, s ] );\n\t\t\t}\n\n\t\t\t// If request was aborted inside ajaxSend, stop there\n\t\t\tif ( completed ) {\n\t\t\t\treturn jqXHR;\n\t\t\t}\n\n\t\t\t// Timeout\n\t\t\tif ( s.async && s.timeout > 0 ) {\n\t\t\t\ttimeoutTimer = window.setTimeout( function() {\n\t\t\t\t\tjqXHR.abort( \"timeout\" );\n\t\t\t\t}, s.timeout );\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tcompleted = false;\n\t\t\t\ttransport.send( requestHeaders, done );\n\t\t\t} catch ( e ) {\n\n\t\t\t\t// Rethrow post-completion exceptions\n\t\t\t\tif ( completed ) {\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\n\t\t\t\t// Propagate others as results\n\t\t\t\tdone( -1, e );\n\t\t\t}\n\t\t}\n\n\t\t// Callback for when everything is done\n\t\tfunction done( status, nativeStatusText, responses, headers ) {\n\t\t\tvar isSuccess, success, error, response, modified,\n\t\t\t\tstatusText = nativeStatusText;\n\n\t\t\t// Ignore repeat invocations\n\t\t\tif ( completed ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcompleted = true;\n\n\t\t\t// Clear timeout if it exists\n\t\t\tif ( timeoutTimer ) {\n\t\t\t\twindow.clearTimeout( timeoutTimer );\n\t\t\t}\n\n\t\t\t// Dereference transport for early garbage collection\n\t\t\t// (no matter how long the jqXHR object will be used)\n\t\t\ttransport = undefined;\n\n\t\t\t// Cache response headers\n\t\t\tresponseHeadersString = headers || \"\";\n\n\t\t\t// Set readyState\n\t\t\tjqXHR.readyState = status > 0 ? 4 : 0;\n\n\t\t\t// Determine if successful\n\t\t\tisSuccess = status >= 200 && status < 300 || status === 304;\n\n\t\t\t// Get response data\n\t\t\tif ( responses ) {\n\t\t\t\tresponse = ajaxHandleResponses( s, jqXHR, responses );\n\t\t\t}\n\n\t\t\t// Convert no matter what (that way responseXXX fields are always set)\n\t\t\tresponse = ajaxConvert( s, response, jqXHR, isSuccess );\n\n\t\t\t// If successful, handle type chaining\n\t\t\tif ( isSuccess ) {\n\n\t\t\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\n\t\t\t\tif ( s.ifModified ) {\n\t\t\t\t\tmodified = jqXHR.getResponseHeader( \"Last-Modified\" );\n\t\t\t\t\tif ( modified ) {\n\t\t\t\t\t\tjQuery.lastModified[ cacheURL ] = modified;\n\t\t\t\t\t}\n\t\t\t\t\tmodified = jqXHR.getResponseHeader( \"etag\" );\n\t\t\t\t\tif ( modified ) {\n\t\t\t\t\t\tjQuery.etag[ cacheURL ] = modified;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// if no content\n\t\t\t\tif ( status === 204 || s.type === \"HEAD\" ) {\n\t\t\t\t\tstatusText = \"nocontent\";\n\n\t\t\t\t// if not modified\n\t\t\t\t} else if ( status === 304 ) {\n\t\t\t\t\tstatusText = \"notmodified\";\n\n\t\t\t\t// If we have data, let's convert it\n\t\t\t\t} else {\n\t\t\t\t\tstatusText = response.state;\n\t\t\t\t\tsuccess = response.data;\n\t\t\t\t\terror = response.error;\n\t\t\t\t\tisSuccess = !error;\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\t// Extract error from statusText and normalize for non-aborts\n\t\t\t\terror = statusText;\n\t\t\t\tif ( status || !statusText ) {\n\t\t\t\t\tstatusText = \"error\";\n\t\t\t\t\tif ( status < 0 ) {\n\t\t\t\t\t\tstatus = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Set data for the fake xhr object\n\t\t\tjqXHR.status = status;\n\t\t\tjqXHR.statusText = ( nativeStatusText || statusText ) + \"\";\n\n\t\t\t// Success/Error\n\t\t\tif ( isSuccess ) {\n\t\t\t\tdeferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );\n\t\t\t} else {\n\t\t\t\tdeferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );\n\t\t\t}\n\n\t\t\t// Status-dependent callbacks\n\t\t\tjqXHR.statusCode( statusCode );\n\t\t\tstatusCode = undefined;\n\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( isSuccess ? \"ajaxSuccess\" : \"ajaxError\",\n\t\t\t\t\t[ jqXHR, s, isSuccess ? success : error ] );\n\t\t\t}\n\n\t\t\t// Complete\n\t\t\tcompleteDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );\n\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( \"ajaxComplete\", [ jqXHR, s ] );\n\n\t\t\t\t// Handle the global AJAX counter\n\t\t\t\tif ( !( --jQuery.active ) ) {\n\t\t\t\t\tjQuery.event.trigger( \"ajaxStop\" );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn jqXHR;\n\t},\n\n\tgetJSON: function( url, data, callback ) {\n\t\treturn jQuery.get( url, data, callback, \"json\" );\n\t},\n\n\tgetScript: function( url, callback ) {\n\t\treturn jQuery.get( url, undefined, callback, \"script\" );\n\t}\n} );\n\njQuery.each( [ \"get\", \"post\" ], function( i, method ) {\n\tjQuery[ method ] = function( url, data, callback, type ) {\n\n\t\t// Shift arguments if data argument was omitted\n\t\tif ( isFunction( data ) ) {\n\t\t\ttype = type || callback;\n\t\t\tcallback = data;\n\t\t\tdata = undefined;\n\t\t}\n\n\t\t// The url can be an options object (which then must have .url)\n\t\treturn jQuery.ajax( jQuery.extend( {\n\t\t\turl: url,\n\t\t\ttype: method,\n\t\t\tdataType: type,\n\t\t\tdata: data,\n\t\t\tsuccess: callback\n\t\t}, jQuery.isPlainObject( url ) && url ) );\n\t};\n} );\n\n\njQuery._evalUrl = function( url ) {\n\treturn jQuery.ajax( {\n\t\turl: url,\n\n\t\t// Make this explicit, since user can override this through ajaxSetup (#11264)\n\t\ttype: \"GET\",\n\t\tdataType: \"script\",\n\t\tcache: true,\n\t\tasync: false,\n\t\tglobal: false,\n\t\t\"throws\": true\n\t} );\n};\n\n\njQuery.fn.extend( {\n\twrapAll: function( html ) {\n\t\tvar wrap;\n\n\t\tif ( this[ 0 ] ) {\n\t\t\tif ( isFunction( html ) ) {\n\t\t\t\thtml = html.call( this[ 0 ] );\n\t\t\t}\n\n\t\t\t// The elements to wrap the target around\n\t\t\twrap = jQuery( html, this[ 0 ].ownerDocument ).eq( 0 ).clone( true );\n\n\t\t\tif ( this[ 0 ].parentNode ) {\n\t\t\t\twrap.insertBefore( this[ 0 ] );\n\t\t\t}\n\n\t\t\twrap.map( function() {\n\t\t\t\tvar elem = this;\n\n\t\t\t\twhile ( elem.firstElementChild ) {\n\t\t\t\t\telem = elem.firstElementChild;\n\t\t\t\t}\n\n\t\t\t\treturn elem;\n\t\t\t} ).append( this );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\twrapInner: function( html ) {\n\t\tif ( isFunction( html ) ) {\n\t\t\treturn this.each( function( i ) {\n\t\t\t\tjQuery( this ).wrapInner( html.call( this, i ) );\n\t\t\t} );\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tvar self = jQuery( this ),\n\t\t\t\tcontents = self.contents();\n\n\t\t\tif ( contents.length ) {\n\t\t\t\tcontents.wrapAll( html );\n\n\t\t\t} else {\n\t\t\t\tself.append( html );\n\t\t\t}\n\t\t} );\n\t},\n\n\twrap: function( html ) {\n\t\tvar htmlIsFunction = isFunction( html );\n\n\t\treturn this.each( function( i ) {\n\t\t\tjQuery( this ).wrapAll( htmlIsFunction ? html.call( this, i ) : html );\n\t\t} );\n\t},\n\n\tunwrap: function( selector ) {\n\t\tthis.parent( selector ).not( \"body\" ).each( function() {\n\t\t\tjQuery( this ).replaceWith( this.childNodes );\n\t\t} );\n\t\treturn this;\n\t}\n} );\n\n\njQuery.expr.pseudos.hidden = function( elem ) {\n\treturn !jQuery.expr.pseudos.visible( elem );\n};\njQuery.expr.pseudos.visible = function( elem ) {\n\treturn !!( elem.offsetWidth || elem.offsetHeight || elem.getClientRects().length );\n};\n\n\n\n\njQuery.ajaxSettings.xhr = function() {\n\ttry {\n\t\treturn new window.XMLHttpRequest();\n\t} catch ( e ) {}\n};\n\nvar xhrSuccessStatus = {\n\n\t\t// File protocol always yields status code 0, assume 200\n\t\t0: 200,\n\n\t\t// Support: IE <=9 only\n\t\t// #1450: sometimes IE returns 1223 when it should be 204\n\t\t1223: 204\n\t},\n\txhrSupported = jQuery.ajaxSettings.xhr();\n\nsupport.cors = !!xhrSupported && ( \"withCredentials\" in xhrSupported );\nsupport.ajax = xhrSupported = !!xhrSupported;\n\njQuery.ajaxTransport( function( options ) {\n\tvar callback, errorCallback;\n\n\t// Cross domain only allowed if supported through XMLHttpRequest\n\tif ( support.cors || xhrSupported && !options.crossDomain ) {\n\t\treturn {\n\t\t\tsend: function( headers, complete ) {\n\t\t\t\tvar i,\n\t\t\t\t\txhr = options.xhr();\n\n\t\t\t\txhr.open(\n\t\t\t\t\toptions.type,\n\t\t\t\t\toptions.url,\n\t\t\t\t\toptions.async,\n\t\t\t\t\toptions.username,\n\t\t\t\t\toptions.password\n\t\t\t\t);\n\n\t\t\t\t// Apply custom fields if provided\n\t\t\t\tif ( options.xhrFields ) {\n\t\t\t\t\tfor ( i in options.xhrFields ) {\n\t\t\t\t\t\txhr[ i ] = options.xhrFields[ i ];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Override mime type if needed\n\t\t\t\tif ( options.mimeType && xhr.overrideMimeType ) {\n\t\t\t\t\txhr.overrideMimeType( options.mimeType );\n\t\t\t\t}\n\n\t\t\t\t// X-Requested-With header\n\t\t\t\t// For cross-domain requests, seeing as conditions for a preflight are\n\t\t\t\t// akin to a jigsaw puzzle, we simply never set it to be sure.\n\t\t\t\t// (it can always be set on a per-request basis or even using ajaxSetup)\n\t\t\t\t// For same-domain requests, won't change header if already provided.\n\t\t\t\tif ( !options.crossDomain && !headers[ \"X-Requested-With\" ] ) {\n\t\t\t\t\theaders[ \"X-Requested-With\" ] = \"XMLHttpRequest\";\n\t\t\t\t}\n\n\t\t\t\t// Set headers\n\t\t\t\tfor ( i in headers ) {\n\t\t\t\t\txhr.setRequestHeader( i, headers[ i ] );\n\t\t\t\t}\n\n\t\t\t\t// Callback\n\t\t\t\tcallback = function( type ) {\n\t\t\t\t\treturn function() {\n\t\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\t\tcallback = errorCallback = xhr.onload =\n\t\t\t\t\t\t\t\txhr.onerror = xhr.onabort = xhr.ontimeout =\n\t\t\t\t\t\t\t\t\txhr.onreadystatechange = null;\n\n\t\t\t\t\t\t\tif ( type === \"abort\" ) {\n\t\t\t\t\t\t\t\txhr.abort();\n\t\t\t\t\t\t\t} else if ( type === \"error\" ) {\n\n\t\t\t\t\t\t\t\t// Support: IE <=9 only\n\t\t\t\t\t\t\t\t// On a manual native abort, IE9 throws\n\t\t\t\t\t\t\t\t// errors on any property access that is not readyState\n\t\t\t\t\t\t\t\tif ( typeof xhr.status !== \"number\" ) {\n\t\t\t\t\t\t\t\t\tcomplete( 0, \"error\" );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tcomplete(\n\n\t\t\t\t\t\t\t\t\t\t// File: protocol always yields status 0; see #8605, #14207\n\t\t\t\t\t\t\t\t\t\txhr.status,\n\t\t\t\t\t\t\t\t\t\txhr.statusText\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcomplete(\n\t\t\t\t\t\t\t\t\txhrSuccessStatus[ xhr.status ] || xhr.status,\n\t\t\t\t\t\t\t\t\txhr.statusText,\n\n\t\t\t\t\t\t\t\t\t// Support: IE <=9 only\n\t\t\t\t\t\t\t\t\t// IE9 has no XHR2 but throws on binary (trac-11426)\n\t\t\t\t\t\t\t\t\t// For XHR2 non-text, let the caller handle it (gh-2498)\n\t\t\t\t\t\t\t\t\t( xhr.responseType || \"text\" ) !== \"text\"  ||\n\t\t\t\t\t\t\t\t\ttypeof xhr.responseText !== \"string\" ?\n\t\t\t\t\t\t\t\t\t\t{ binary: xhr.response } :\n\t\t\t\t\t\t\t\t\t\t{ text: xhr.responseText },\n\t\t\t\t\t\t\t\t\txhr.getAllResponseHeaders()\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t};\n\n\t\t\t\t// Listen to events\n\t\t\t\txhr.onload = callback();\n\t\t\t\terrorCallback = xhr.onerror = xhr.ontimeout = callback( \"error\" );\n\n\t\t\t\t// Support: IE 9 only\n\t\t\t\t// Use onreadystatechange to replace onabort\n\t\t\t\t// to handle uncaught aborts\n\t\t\t\tif ( xhr.onabort !== undefined ) {\n\t\t\t\t\txhr.onabort = errorCallback;\n\t\t\t\t} else {\n\t\t\t\t\txhr.onreadystatechange = function() {\n\n\t\t\t\t\t\t// Check readyState before timeout as it changes\n\t\t\t\t\t\tif ( xhr.readyState === 4 ) {\n\n\t\t\t\t\t\t\t// Allow onerror to be called first,\n\t\t\t\t\t\t\t// but that will not handle a native abort\n\t\t\t\t\t\t\t// Also, save errorCallback to a variable\n\t\t\t\t\t\t\t// as xhr.onerror cannot be accessed\n\t\t\t\t\t\t\twindow.setTimeout( function() {\n\t\t\t\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\t\t\t\terrorCallback();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\t// Create the abort callback\n\t\t\t\tcallback = callback( \"abort\" );\n\n\t\t\t\ttry {\n\n\t\t\t\t\t// Do send the request (this may raise an exception)\n\t\t\t\t\txhr.send( options.hasContent && options.data || null );\n\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\t// #14683: Only rethrow if this hasn't been notified as an error yet\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tthrow e;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tabort: function() {\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n} );\n\n\n\n\n// Prevent auto-execution of scripts when no explicit dataType was provided (See gh-2432)\njQuery.ajaxPrefilter( function( s ) {\n\tif ( s.crossDomain ) {\n\t\ts.contents.script = false;\n\t}\n} );\n\n// Install script dataType\njQuery.ajaxSetup( {\n\taccepts: {\n\t\tscript: \"text/javascript, application/javascript, \" +\n\t\t\t\"application/ecmascript, application/x-ecmascript\"\n\t},\n\tcontents: {\n\t\tscript: /\\b(?:java|ecma)script\\b/\n\t},\n\tconverters: {\n\t\t\"text script\": function( text ) {\n\t\t\tjQuery.globalEval( text );\n\t\t\treturn text;\n\t\t}\n\t}\n} );\n\n// Handle cache's special case and crossDomain\njQuery.ajaxPrefilter( \"script\", function( s ) {\n\tif ( s.cache === undefined ) {\n\t\ts.cache = false;\n\t}\n\tif ( s.crossDomain ) {\n\t\ts.type = \"GET\";\n\t}\n} );\n\n// Bind script tag hack transport\njQuery.ajaxTransport( \"script\", function( s ) {\n\n\t// This transport only deals with cross domain requests\n\tif ( s.crossDomain ) {\n\t\tvar script, callback;\n\t\treturn {\n\t\t\tsend: function( _, complete ) {\n\t\t\t\tscript = jQuery( \"<script>\" ).prop( {\n\t\t\t\t\tcharset: s.scriptCharset,\n\t\t\t\t\tsrc: s.url\n\t\t\t\t} ).on(\n\t\t\t\t\t\"load error\",\n\t\t\t\t\tcallback = function( evt ) {\n\t\t\t\t\t\tscript.remove();\n\t\t\t\t\t\tcallback = null;\n\t\t\t\t\t\tif ( evt ) {\n\t\t\t\t\t\t\tcomplete( evt.type === \"error\" ? 404 : 200, evt.type );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\t// Use native DOM manipulation to avoid our domManip AJAX trickery\n\t\t\t\tdocument.head.appendChild( script[ 0 ] );\n\t\t\t},\n\t\t\tabort: function() {\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n} );\n\n\n\n\nvar oldCallbacks = [],\n\trjsonp = /(=)\\?(?=&|$)|\\?\\?/;\n\n// Default jsonp settings\njQuery.ajaxSetup( {\n\tjsonp: \"callback\",\n\tjsonpCallback: function() {\n\t\tvar callback = oldCallbacks.pop() || ( jQuery.expando + \"_\" + ( nonce++ ) );\n\t\tthis[ callback ] = true;\n\t\treturn callback;\n\t}\n} );\n\n// Detect, normalize options and install callbacks for jsonp requests\njQuery.ajaxPrefilter( \"json jsonp\", function( s, originalSettings, jqXHR ) {\n\n\tvar callbackName, overwritten, responseContainer,\n\t\tjsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?\n\t\t\t\"url\" :\n\t\t\ttypeof s.data === \"string\" &&\n\t\t\t\t( s.contentType || \"\" )\n\t\t\t\t\t.indexOf( \"application/x-www-form-urlencoded\" ) === 0 &&\n\t\t\t\trjsonp.test( s.data ) && \"data\"\n\t\t);\n\n\t// Handle iff the expected data type is \"jsonp\" or we have a parameter to set\n\tif ( jsonProp || s.dataTypes[ 0 ] === \"jsonp\" ) {\n\n\t\t// Get callback name, remembering preexisting value associated with it\n\t\tcallbackName = s.jsonpCallback = isFunction( s.jsonpCallback ) ?\n\t\t\ts.jsonpCallback() :\n\t\t\ts.jsonpCallback;\n\n\t\t// Insert callback into url or form data\n\t\tif ( jsonProp ) {\n\t\t\ts[ jsonProp ] = s[ jsonProp ].replace( rjsonp, \"$1\" + callbackName );\n\t\t} else if ( s.jsonp !== false ) {\n\t\t\ts.url += ( rquery.test( s.url ) ? \"&\" : \"?\" ) + s.jsonp + \"=\" + callbackName;\n\t\t}\n\n\t\t// Use data converter to retrieve json after script execution\n\t\ts.converters[ \"script json\" ] = function() {\n\t\t\tif ( !responseContainer ) {\n\t\t\t\tjQuery.error( callbackName + \" was not called\" );\n\t\t\t}\n\t\t\treturn responseContainer[ 0 ];\n\t\t};\n\n\t\t// Force json dataType\n\t\ts.dataTypes[ 0 ] = \"json\";\n\n\t\t// Install callback\n\t\toverwritten = window[ callbackName ];\n\t\twindow[ callbackName ] = function() {\n\t\t\tresponseContainer = arguments;\n\t\t};\n\n\t\t// Clean-up function (fires after converters)\n\t\tjqXHR.always( function() {\n\n\t\t\t// If previous value didn't exist - remove it\n\t\t\tif ( overwritten === undefined ) {\n\t\t\t\tjQuery( window ).removeProp( callbackName );\n\n\t\t\t// Otherwise restore preexisting value\n\t\t\t} else {\n\t\t\t\twindow[ callbackName ] = overwritten;\n\t\t\t}\n\n\t\t\t// Save back as free\n\t\t\tif ( s[ callbackName ] ) {\n\n\t\t\t\t// Make sure that re-using the options doesn't screw things around\n\t\t\t\ts.jsonpCallback = originalSettings.jsonpCallback;\n\n\t\t\t\t// Save the callback name for future use\n\t\t\t\toldCallbacks.push( callbackName );\n\t\t\t}\n\n\t\t\t// Call if it was a function and we have a response\n\t\t\tif ( responseContainer && isFunction( overwritten ) ) {\n\t\t\t\toverwritten( responseContainer[ 0 ] );\n\t\t\t}\n\n\t\t\tresponseContainer = overwritten = undefined;\n\t\t} );\n\n\t\t// Delegate to script\n\t\treturn \"script\";\n\t}\n} );\n\n\n\n\n// Support: Safari 8 only\n// In Safari 8 documents created via document.implementation.createHTMLDocument\n// collapse sibling forms: the second one becomes a child of the first one.\n// Because of that, this security measure has to be disabled in Safari 8.\n// https://bugs.webkit.org/show_bug.cgi?id=137337\nsupport.createHTMLDocument = ( function() {\n\tvar body = document.implementation.createHTMLDocument( \"\" ).body;\n\tbody.innerHTML = \"<form></form><form></form>\";\n\treturn body.childNodes.length === 2;\n} )();\n\n\n// Argument \"data\" should be string of html\n// context (optional): If specified, the fragment will be created in this context,\n// defaults to document\n// keepScripts (optional): If true, will include scripts passed in the html string\njQuery.parseHTML = function( data, context, keepScripts ) {\n\tif ( typeof data !== \"string\" ) {\n\t\treturn [];\n\t}\n\tif ( typeof context === \"boolean\" ) {\n\t\tkeepScripts = context;\n\t\tcontext = false;\n\t}\n\n\tvar base, parsed, scripts;\n\n\tif ( !context ) {\n\n\t\t// Stop scripts or inline event handlers from being executed immediately\n\t\t// by using document.implementation\n\t\tif ( support.createHTMLDocument ) {\n\t\t\tcontext = document.implementation.createHTMLDocument( \"\" );\n\n\t\t\t// Set the base href for the created document\n\t\t\t// so any parsed elements with URLs\n\t\t\t// are based on the document's URL (gh-2965)\n\t\t\tbase = context.createElement( \"base\" );\n\t\t\tbase.href = document.location.href;\n\t\t\tcontext.head.appendChild( base );\n\t\t} else {\n\t\t\tcontext = document;\n\t\t}\n\t}\n\n\tparsed = rsingleTag.exec( data );\n\tscripts = !keepScripts && [];\n\n\t// Single tag\n\tif ( parsed ) {\n\t\treturn [ context.createElement( parsed[ 1 ] ) ];\n\t}\n\n\tparsed = buildFragment( [ data ], context, scripts );\n\n\tif ( scripts && scripts.length ) {\n\t\tjQuery( scripts ).remove();\n\t}\n\n\treturn jQuery.merge( [], parsed.childNodes );\n};\n\n\n/**\n * Load a url into a page\n */\njQuery.fn.load = function( url, params, callback ) {\n\tvar selector, type, response,\n\t\tself = this,\n\t\toff = url.indexOf( \" \" );\n\n\tif ( off > -1 ) {\n\t\tselector = stripAndCollapse( url.slice( off ) );\n\t\turl = url.slice( 0, off );\n\t}\n\n\t// If it's a function\n\tif ( isFunction( params ) ) {\n\n\t\t// We assume that it's the callback\n\t\tcallback = params;\n\t\tparams = undefined;\n\n\t// Otherwise, build a param string\n\t} else if ( params && typeof params === \"object\" ) {\n\t\ttype = \"POST\";\n\t}\n\n\t// If we have elements to modify, make the request\n\tif ( self.length > 0 ) {\n\t\tjQuery.ajax( {\n\t\t\turl: url,\n\n\t\t\t// If \"type\" variable is undefined, then \"GET\" method will be used.\n\t\t\t// Make value of this field explicit since\n\t\t\t// user can override it through ajaxSetup method\n\t\t\ttype: type || \"GET\",\n\t\t\tdataType: \"html\",\n\t\t\tdata: params\n\t\t} ).done( function( responseText ) {\n\n\t\t\t// Save response for use in complete callback\n\t\t\tresponse = arguments;\n\n\t\t\tself.html( selector ?\n\n\t\t\t\t// If a selector was specified, locate the right elements in a dummy div\n\t\t\t\t// Exclude scripts to avoid IE 'Permission Denied' errors\n\t\t\t\tjQuery( \"<div>\" ).append( jQuery.parseHTML( responseText ) ).find( selector ) :\n\n\t\t\t\t// Otherwise use the full result\n\t\t\t\tresponseText );\n\n\t\t// If the request succeeds, this function gets \"data\", \"status\", \"jqXHR\"\n\t\t// but they are ignored because response was set above.\n\t\t// If it fails, this function gets \"jqXHR\", \"status\", \"error\"\n\t\t} ).always( callback && function( jqXHR, status ) {\n\t\t\tself.each( function() {\n\t\t\t\tcallback.apply( this, response || [ jqXHR.responseText, status, jqXHR ] );\n\t\t\t} );\n\t\t} );\n\t}\n\n\treturn this;\n};\n\n\n\n\n// Attach a bunch of functions for handling common AJAX events\njQuery.each( [\n\t\"ajaxStart\",\n\t\"ajaxStop\",\n\t\"ajaxComplete\",\n\t\"ajaxError\",\n\t\"ajaxSuccess\",\n\t\"ajaxSend\"\n], function( i, type ) {\n\tjQuery.fn[ type ] = function( fn ) {\n\t\treturn this.on( type, fn );\n\t};\n} );\n\n\n\n\njQuery.expr.pseudos.animated = function( elem ) {\n\treturn jQuery.grep( jQuery.timers, function( fn ) {\n\t\treturn elem === fn.elem;\n\t} ).length;\n};\n\n\n\n\njQuery.offset = {\n\tsetOffset: function( elem, options, i ) {\n\t\tvar curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition,\n\t\t\tposition = jQuery.css( elem, \"position\" ),\n\t\t\tcurElem = jQuery( elem ),\n\t\t\tprops = {};\n\n\t\t// Set position first, in-case top/left are set even on static elem\n\t\tif ( position === \"static\" ) {\n\t\t\telem.style.position = \"relative\";\n\t\t}\n\n\t\tcurOffset = curElem.offset();\n\t\tcurCSSTop = jQuery.css( elem, \"top\" );\n\t\tcurCSSLeft = jQuery.css( elem, \"left\" );\n\t\tcalculatePosition = ( position === \"absolute\" || position === \"fixed\" ) &&\n\t\t\t( curCSSTop + curCSSLeft ).indexOf( \"auto\" ) > -1;\n\n\t\t// Need to be able to calculate position if either\n\t\t// top or left is auto and position is either absolute or fixed\n\t\tif ( calculatePosition ) {\n\t\t\tcurPosition = curElem.position();\n\t\t\tcurTop = curPosition.top;\n\t\t\tcurLeft = curPosition.left;\n\n\t\t} else {\n\t\t\tcurTop = parseFloat( curCSSTop ) || 0;\n\t\t\tcurLeft = parseFloat( curCSSLeft ) || 0;\n\t\t}\n\n\t\tif ( isFunction( options ) ) {\n\n\t\t\t// Use jQuery.extend here to allow modification of coordinates argument (gh-1848)\n\t\t\toptions = options.call( elem, i, jQuery.extend( {}, curOffset ) );\n\t\t}\n\n\t\tif ( options.top != null ) {\n\t\t\tprops.top = ( options.top - curOffset.top ) + curTop;\n\t\t}\n\t\tif ( options.left != null ) {\n\t\t\tprops.left = ( options.left - curOffset.left ) + curLeft;\n\t\t}\n\n\t\tif ( \"using\" in options ) {\n\t\t\toptions.using.call( elem, props );\n\n\t\t} else {\n\t\t\tcurElem.css( props );\n\t\t}\n\t}\n};\n\njQuery.fn.extend( {\n\n\t// offset() relates an element's border box to the document origin\n\toffset: function( options ) {\n\n\t\t// Preserve chaining for setter\n\t\tif ( arguments.length ) {\n\t\t\treturn options === undefined ?\n\t\t\t\tthis :\n\t\t\t\tthis.each( function( i ) {\n\t\t\t\t\tjQuery.offset.setOffset( this, options, i );\n\t\t\t\t} );\n\t\t}\n\n\t\tvar rect, win,\n\t\t\telem = this[ 0 ];\n\n\t\tif ( !elem ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Return zeros for disconnected and hidden (display: none) elements (gh-2310)\n\t\t// Support: IE <=11 only\n\t\t// Running getBoundingClientRect on a\n\t\t// disconnected node in IE throws an error\n\t\tif ( !elem.getClientRects().length ) {\n\t\t\treturn { top: 0, left: 0 };\n\t\t}\n\n\t\t// Get document-relative position by adding viewport scroll to viewport-relative gBCR\n\t\trect = elem.getBoundingClientRect();\n\t\twin = elem.ownerDocument.defaultView;\n\t\treturn {\n\t\t\ttop: rect.top + win.pageYOffset,\n\t\t\tleft: rect.left + win.pageXOffset\n\t\t};\n\t},\n\n\t// position() relates an element's margin box to its offset parent's padding box\n\t// This corresponds to the behavior of CSS absolute positioning\n\tposition: function() {\n\t\tif ( !this[ 0 ] ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar offsetParent, offset, doc,\n\t\t\telem = this[ 0 ],\n\t\t\tparentOffset = { top: 0, left: 0 };\n\n\t\t// position:fixed elements are offset from the viewport, which itself always has zero offset\n\t\tif ( jQuery.css( elem, \"position\" ) === \"fixed\" ) {\n\n\t\t\t// Assume position:fixed implies availability of getBoundingClientRect\n\t\t\toffset = elem.getBoundingClientRect();\n\n\t\t} else {\n\t\t\toffset = this.offset();\n\n\t\t\t// Account for the *real* offset parent, which can be the document or its root element\n\t\t\t// when a statically positioned element is identified\n\t\t\tdoc = elem.ownerDocument;\n\t\t\toffsetParent = elem.offsetParent || doc.documentElement;\n\t\t\twhile ( offsetParent &&\n\t\t\t\t( offsetParent === doc.body || offsetParent === doc.documentElement ) &&\n\t\t\t\tjQuery.css( offsetParent, \"position\" ) === \"static\" ) {\n\n\t\t\t\toffsetParent = offsetParent.parentNode;\n\t\t\t}\n\t\t\tif ( offsetParent && offsetParent !== elem && offsetParent.nodeType === 1 ) {\n\n\t\t\t\t// Incorporate borders into its offset, since they are outside its content origin\n\t\t\t\tparentOffset = jQuery( offsetParent ).offset();\n\t\t\t\tparentOffset.top += jQuery.css( offsetParent, \"borderTopWidth\", true );\n\t\t\t\tparentOffset.left += jQuery.css( offsetParent, \"borderLeftWidth\", true );\n\t\t\t}\n\t\t}\n\n\t\t// Subtract parent offsets and element margins\n\t\treturn {\n\t\t\ttop: offset.top - parentOffset.top - jQuery.css( elem, \"marginTop\", true ),\n\t\t\tleft: offset.left - parentOffset.left - jQuery.css( elem, \"marginLeft\", true )\n\t\t};\n\t},\n\n\t// This method will return documentElement in the following cases:\n\t// 1) For the element inside the iframe without offsetParent, this method will return\n\t//    documentElement of the parent window\n\t// 2) For the hidden or detached element\n\t// 3) For body or html element, i.e. in case of the html node - it will return itself\n\t//\n\t// but those exceptions were never presented as a real life use-cases\n\t// and might be considered as more preferable results.\n\t//\n\t// This logic, however, is not guaranteed and can change at any point in the future\n\toffsetParent: function() {\n\t\treturn this.map( function() {\n\t\t\tvar offsetParent = this.offsetParent;\n\n\t\t\twhile ( offsetParent && jQuery.css( offsetParent, \"position\" ) === \"static\" ) {\n\t\t\t\toffsetParent = offsetParent.offsetParent;\n\t\t\t}\n\n\t\t\treturn offsetParent || documentElement;\n\t\t} );\n\t}\n} );\n\n// Create scrollLeft and scrollTop methods\njQuery.each( { scrollLeft: \"pageXOffset\", scrollTop: \"pageYOffset\" }, function( method, prop ) {\n\tvar top = \"pageYOffset\" === prop;\n\n\tjQuery.fn[ method ] = function( val ) {\n\t\treturn access( this, function( elem, method, val ) {\n\n\t\t\t// Coalesce documents and windows\n\t\t\tvar win;\n\t\t\tif ( isWindow( elem ) ) {\n\t\t\t\twin = elem;\n\t\t\t} else if ( elem.nodeType === 9 ) {\n\t\t\t\twin = elem.defaultView;\n\t\t\t}\n\n\t\t\tif ( val === undefined ) {\n\t\t\t\treturn win ? win[ prop ] : elem[ method ];\n\t\t\t}\n\n\t\t\tif ( win ) {\n\t\t\t\twin.scrollTo(\n\t\t\t\t\t!top ? val : win.pageXOffset,\n\t\t\t\t\ttop ? val : win.pageYOffset\n\t\t\t\t);\n\n\t\t\t} else {\n\t\t\t\telem[ method ] = val;\n\t\t\t}\n\t\t}, method, val, arguments.length );\n\t};\n} );\n\n// Support: Safari <=7 - 9.1, Chrome <=37 - 49\n// Add the top/left cssHooks using jQuery.fn.position\n// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084\n// Blink bug: https://bugs.chromium.org/p/chromium/issues/detail?id=589347\n// getComputedStyle returns percent when specified for top/left/bottom/right;\n// rather than make the css module depend on the offset module, just check for it here\njQuery.each( [ \"top\", \"left\" ], function( i, prop ) {\n\tjQuery.cssHooks[ prop ] = addGetHookIf( support.pixelPosition,\n\t\tfunction( elem, computed ) {\n\t\t\tif ( computed ) {\n\t\t\t\tcomputed = curCSS( elem, prop );\n\n\t\t\t\t// If curCSS returns percentage, fallback to offset\n\t\t\t\treturn rnumnonpx.test( computed ) ?\n\t\t\t\t\tjQuery( elem ).position()[ prop ] + \"px\" :\n\t\t\t\t\tcomputed;\n\t\t\t}\n\t\t}\n\t);\n} );\n\n\n// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods\njQuery.each( { Height: \"height\", Width: \"width\" }, function( name, type ) {\n\tjQuery.each( { padding: \"inner\" + name, content: type, \"\": \"outer\" + name },\n\t\tfunction( defaultExtra, funcName ) {\n\n\t\t// Margin is only for outerHeight, outerWidth\n\t\tjQuery.fn[ funcName ] = function( margin, value ) {\n\t\t\tvar chainable = arguments.length && ( defaultExtra || typeof margin !== \"boolean\" ),\n\t\t\t\textra = defaultExtra || ( margin === true || value === true ? \"margin\" : \"border\" );\n\n\t\t\treturn access( this, function( elem, type, value ) {\n\t\t\t\tvar doc;\n\n\t\t\t\tif ( isWindow( elem ) ) {\n\n\t\t\t\t\t// $( window ).outerWidth/Height return w/h including scrollbars (gh-1729)\n\t\t\t\t\treturn funcName.indexOf( \"outer\" ) === 0 ?\n\t\t\t\t\t\telem[ \"inner\" + name ] :\n\t\t\t\t\t\telem.document.documentElement[ \"client\" + name ];\n\t\t\t\t}\n\n\t\t\t\t// Get document width or height\n\t\t\t\tif ( elem.nodeType === 9 ) {\n\t\t\t\t\tdoc = elem.documentElement;\n\n\t\t\t\t\t// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height],\n\t\t\t\t\t// whichever is greatest\n\t\t\t\t\treturn Math.max(\n\t\t\t\t\t\telem.body[ \"scroll\" + name ], doc[ \"scroll\" + name ],\n\t\t\t\t\t\telem.body[ \"offset\" + name ], doc[ \"offset\" + name ],\n\t\t\t\t\t\tdoc[ \"client\" + name ]\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn value === undefined ?\n\n\t\t\t\t\t// Get width or height on the element, requesting but not forcing parseFloat\n\t\t\t\t\tjQuery.css( elem, type, extra ) :\n\n\t\t\t\t\t// Set width or height on the element\n\t\t\t\t\tjQuery.style( elem, type, value, extra );\n\t\t\t}, type, chainable ? margin : undefined, chainable );\n\t\t};\n\t} );\n} );\n\n\njQuery.each( ( \"blur focus focusin focusout resize scroll click dblclick \" +\n\t\"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave \" +\n\t\"change select submit keydown keypress keyup contextmenu\" ).split( \" \" ),\n\tfunction( i, name ) {\n\n\t// Handle event binding\n\tjQuery.fn[ name ] = function( data, fn ) {\n\t\treturn arguments.length > 0 ?\n\t\t\tthis.on( name, null, data, fn ) :\n\t\t\tthis.trigger( name );\n\t};\n} );\n\njQuery.fn.extend( {\n\thover: function( fnOver, fnOut ) {\n\t\treturn this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );\n\t}\n} );\n\n\n\n\njQuery.fn.extend( {\n\n\tbind: function( types, data, fn ) {\n\t\treturn this.on( types, null, data, fn );\n\t},\n\tunbind: function( types, fn ) {\n\t\treturn this.off( types, null, fn );\n\t},\n\n\tdelegate: function( selector, types, data, fn ) {\n\t\treturn this.on( types, selector, data, fn );\n\t},\n\tundelegate: function( selector, types, fn ) {\n\n\t\t// ( namespace ) or ( selector, types [, fn] )\n\t\treturn arguments.length === 1 ?\n\t\t\tthis.off( selector, \"**\" ) :\n\t\t\tthis.off( types, selector || \"**\", fn );\n\t}\n} );\n\n// Bind a function to a context, optionally partially applying any\n// arguments.\n// jQuery.proxy is deprecated to promote standards (specifically Function#bind)\n// However, it is not slated for removal any time soon\njQuery.proxy = function( fn, context ) {\n\tvar tmp, args, proxy;\n\n\tif ( typeof context === \"string\" ) {\n\t\ttmp = fn[ context ];\n\t\tcontext = fn;\n\t\tfn = tmp;\n\t}\n\n\t// Quick check to determine if target is callable, in the spec\n\t// this throws a TypeError, but we will just return undefined.\n\tif ( !isFunction( fn ) ) {\n\t\treturn undefined;\n\t}\n\n\t// Simulated bind\n\targs = slice.call( arguments, 2 );\n\tproxy = function() {\n\t\treturn fn.apply( context || this, args.concat( slice.call( arguments ) ) );\n\t};\n\n\t// Set the guid of unique handler to the same of original handler, so it can be removed\n\tproxy.guid = fn.guid = fn.guid || jQuery.guid++;\n\n\treturn proxy;\n};\n\njQuery.holdReady = function( hold ) {\n\tif ( hold ) {\n\t\tjQuery.readyWait++;\n\t} else {\n\t\tjQuery.ready( true );\n\t}\n};\njQuery.isArray = Array.isArray;\njQuery.parseJSON = JSON.parse;\njQuery.nodeName = nodeName;\njQuery.isFunction = isFunction;\njQuery.isWindow = isWindow;\njQuery.camelCase = camelCase;\njQuery.type = toType;\n\njQuery.now = Date.now;\n\njQuery.isNumeric = function( obj ) {\n\n\t// As of jQuery 3.0, isNumeric is limited to\n\t// strings and numbers (primitives or objects)\n\t// that can be coerced to finite numbers (gh-2662)\n\tvar type = jQuery.type( obj );\n\treturn ( type === \"number\" || type === \"string\" ) &&\n\n\t\t// parseFloat NaNs numeric-cast false positives (\"\")\n\t\t// ...but misinterprets leading-number strings, particularly hex literals (\"0x...\")\n\t\t// subtraction forces infinities to NaN\n\t\t!isNaN( obj - parseFloat( obj ) );\n};\n\n\n\n\n// Register as a named AMD module, since jQuery can be concatenated with other\n// files that may use define, but not via a proper concatenation script that\n// understands anonymous AMD modules. A named AMD is safest and most robust\n// way to register. Lowercase jquery is used because AMD module names are\n// derived from file names, and jQuery is normally delivered in a lowercase\n// file name. Do this after creating the global so that if an AMD module wants\n// to call noConflict to hide this version of jQuery, it will work.\n\n// Note that for maximum portability, libraries that are not jQuery should\n// declare themselves as anonymous modules, and avoid setting a global if an\n// AMD loader is present. jQuery is a special case. For more information, see\n// https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon\n\nif ( typeof define === \"function\" && define.amd ) {\n\tdefine( \"jquery\", [], function() {\n\t\treturn jQuery;\n\t} );\n}\n\n\n\n\nvar\n\n\t// Map over jQuery in case of overwrite\n\t_jQuery = window.jQuery,\n\n\t// Map over the $ in case of overwrite\n\t_$ = window.$;\n\njQuery.noConflict = function( deep ) {\n\tif ( window.$ === jQuery ) {\n\t\twindow.$ = _$;\n\t}\n\n\tif ( deep && window.jQuery === jQuery ) {\n\t\twindow.jQuery = _jQuery;\n\t}\n\n\treturn jQuery;\n};\n\n// Expose jQuery and $ identifiers, even in AMD\n// (#7102#comment:10, https://github.com/jquery/jquery/pull/557)\n// and CommonJS for browser emulators (#13566)\nif ( !noGlobal ) {\n\twindow.jQuery = window.$ = jQuery;\n}\n\n\n\n\nreturn jQuery;\n} );\n","module.exports = global[\"$\"] = require(\"-!/Users/christophecamensuli/repository/nodefony-stage/node_modules/expose-loader/index.js?jQuery!./jquery.js\");","/**\n * Secure random string generator with custom alphabet.\n *\n * Alphabet must contain 256 symbols or less. Otherwise, the generator\n * will not be secure.\n *\n * @param {generator} random The random bytes generator.\n * @param {string} alphabet Symbols to be used in new random string.\n * @param {size} size The number of symbols in new random string.\n *\n * @return {string} Random string.\n *\n * @example\n * const format = require('nanoid/format')\n *\n * function random (size) {\n *   const result = []\n *   for (let i = 0; i < size; i++) {\n *     result.push(randomByte())\n *   }\n *   return result\n * }\n *\n * format(random, \"abcdef\", 5) //=> \"fbaef\"\n *\n * @name format\n * @function\n */\nmodule.exports = function (random, alphabet, size) {\n  var mask = (2 << Math.log(alphabet.length - 1) / Math.LN2) - 1\n  var step = Math.ceil(1.6 * mask * size / alphabet.length)\n\n  var id = ''\n  while (true) {\n    var bytes = random(step)\n    for (var i = 0; i < step; i++) {\n      var byte = bytes[i] & mask\n      if (alphabet[byte]) {\n        id += alphabet[byte]\n        if (id.length === size) return id\n      }\n    }\n  }\n}\n\n/**\n * @callback generator\n * @param {number} bytes The number of bytes to generate.\n * @return {number[]} Random bytes.\n */\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// Split a filename into [root, dir, basename, ext], unix version\n// 'root' is just a slash, or nothing.\nvar splitPathRe =\n    /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\nvar splitPath = function(filename) {\n  return splitPathRe.exec(filename).slice(1);\n};\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function(path) {\n  var result = splitPath(path),\n      root = result[0],\n      dir = result[1];\n\n  if (!root && !dir) {\n    // No dirname whatsoever\n    return '.';\n  }\n\n  if (dir) {\n    // It has a dirname, strip trailing slash\n    dir = dir.substr(0, dir.length - 1);\n  }\n\n  return root + dir;\n};\n\n\nexports.basename = function(path, ext) {\n  var f = splitPath(path)[2];\n  // TODO: make this comparison case-insensitive on windows?\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\n\nexports.extname = function(path) {\n  return splitPath(path)[3];\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar SDPUtils = require('sdp');\n\nfunction fixStatsType(stat) {\n  return {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  }[stat.type] || stat.type;\n}\n\nfunction writeMediaSection(transceiver, caps, type, stream, dtlsRole) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n      transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n      transceiver.dtlsTransport.getLocalParameters(),\n      type === 'offer' ? 'actpass' : dtlsRole || 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    var trackId = transceiver.rtpSender._initialTrackId ||\n        transceiver.rtpSender.track.id;\n    transceiver.rtpSender._initialTrackId = trackId;\n    // spec.\n    var msid = 'msid:' + (stream ? stream.id : '-') + ' ' +\n        trackId + '\\r\\n';\n    sdp += 'a=' + msid;\n    // for Chrome. Legacy should no longer be required.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n\n    // RTX\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n}\n\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nfunction filterIceServers(iceServers, edgeVersion) {\n  var hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(function(server) {\n    if (server && (server.urls || server.url)) {\n      var urls = server.urls || server.url;\n      if (server.url && !server.urls) {\n        console.warn('RTCIceServer.url is deprecated! Use urls instead.');\n      }\n      var isString = typeof urls === 'string';\n      if (isString) {\n        urls = [urls];\n      }\n      urls = urls.filter(function(url) {\n        var validTurn = url.indexOf('turn:') === 0 &&\n            url.indexOf('transport=udp') !== -1 &&\n            url.indexOf('turn:[') === -1 &&\n            !hasTurn;\n\n        if (validTurn) {\n          hasTurn = true;\n          return true;\n        }\n        return url.indexOf('stun:') === 0 && edgeVersion >= 14393 &&\n            url.indexOf('?transport=udp') === -1;\n      });\n\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n  });\n}\n\n// Determines the intersection of local and remote capabilities.\nfunction getCommonCapabilities(localCapabilities, remoteCapabilities) {\n  var commonCapabilities = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: []\n  };\n\n  var findCodecByPayloadType = function(pt, codecs) {\n    pt = parseInt(pt, 10);\n    for (var i = 0; i < codecs.length; i++) {\n      if (codecs[i].payloadType === pt ||\n          codecs[i].preferredPayloadType === pt) {\n        return codecs[i];\n      }\n    }\n  };\n\n  var rtxCapabilityMatches = function(lRtx, rRtx, lCodecs, rCodecs) {\n    var lCodec = findCodecByPayloadType(lRtx.parameters.apt, lCodecs);\n    var rCodec = findCodecByPayloadType(rRtx.parameters.apt, rCodecs);\n    return lCodec && rCodec &&\n        lCodec.name.toLowerCase() === rCodec.name.toLowerCase();\n  };\n\n  localCapabilities.codecs.forEach(function(lCodec) {\n    for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\n      var rCodec = remoteCapabilities.codecs[i];\n      if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&\n          lCodec.clockRate === rCodec.clockRate) {\n        if (lCodec.name.toLowerCase() === 'rtx' &&\n            lCodec.parameters && rCodec.parameters.apt) {\n          // for RTX we need to find the local rtx that has a apt\n          // which points to the same local codec as the remote one.\n          if (!rtxCapabilityMatches(lCodec, rCodec,\n              localCapabilities.codecs, remoteCapabilities.codecs)) {\n            continue;\n          }\n        }\n        rCodec = JSON.parse(JSON.stringify(rCodec)); // deepcopy\n        // number of channels is the highest common number of channels\n        rCodec.numChannels = Math.min(lCodec.numChannels,\n            rCodec.numChannels);\n        // push rCodec so we reply with offerer payload type\n        commonCapabilities.codecs.push(rCodec);\n\n        // determine common feedback mechanisms\n        rCodec.rtcpFeedback = rCodec.rtcpFeedback.filter(function(fb) {\n          for (var j = 0; j < lCodec.rtcpFeedback.length; j++) {\n            if (lCodec.rtcpFeedback[j].type === fb.type &&\n                lCodec.rtcpFeedback[j].parameter === fb.parameter) {\n              return true;\n            }\n          }\n          return false;\n        });\n        // FIXME: also need to determine .parameters\n        //  see https://github.com/openpeer/ortc/issues/569\n        break;\n      }\n    }\n  });\n\n  localCapabilities.headerExtensions.forEach(function(lHeaderExtension) {\n    for (var i = 0; i < remoteCapabilities.headerExtensions.length;\n         i++) {\n      var rHeaderExtension = remoteCapabilities.headerExtensions[i];\n      if (lHeaderExtension.uri === rHeaderExtension.uri) {\n        commonCapabilities.headerExtensions.push(rHeaderExtension);\n        break;\n      }\n    }\n  });\n\n  // FIXME: fecMechanisms\n  return commonCapabilities;\n}\n\n// is action=setLocalDescription with type allowed in signalingState\nfunction isActionAllowedInSignalingState(action, type, signalingState) {\n  return {\n    offer: {\n      setLocalDescription: ['stable', 'have-local-offer'],\n      setRemoteDescription: ['stable', 'have-remote-offer']\n    },\n    answer: {\n      setLocalDescription: ['have-remote-offer', 'have-local-pranswer'],\n      setRemoteDescription: ['have-local-offer', 'have-remote-pranswer']\n    }\n  }[type][action].indexOf(signalingState) !== -1;\n}\n\nfunction maybeAddCandidate(iceTransport, candidate) {\n  // Edge's internal representation adds some fields therefore\n  // not all fieldѕ are taken into account.\n  var alreadyAdded = iceTransport.getRemoteCandidates()\n      .find(function(remoteCandidate) {\n        return candidate.foundation === remoteCandidate.foundation &&\n            candidate.ip === remoteCandidate.ip &&\n            candidate.port === remoteCandidate.port &&\n            candidate.priority === remoteCandidate.priority &&\n            candidate.protocol === remoteCandidate.protocol &&\n            candidate.type === remoteCandidate.type;\n      });\n  if (!alreadyAdded) {\n    iceTransport.addRemoteCandidate(candidate);\n  }\n  return !alreadyAdded;\n}\n\n\nfunction makeError(name, description) {\n  var e = new Error(description);\n  e.name = name;\n  // legacy error codes from https://heycam.github.io/webidl/#idl-DOMException-error-names\n  e.code = {\n    NotSupportedError: 9,\n    InvalidStateError: 11,\n    InvalidAccessError: 15,\n    TypeError: undefined,\n    OperationError: undefined\n  }[name];\n  return e;\n}\n\nmodule.exports = function(window, edgeVersion) {\n  // https://w3c.github.io/mediacapture-main/#mediastream\n  // Helper function to add the track to the stream and\n  // dispatch the event ourselves.\n  function addTrackToStreamAndFireEvent(track, stream) {\n    stream.addTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('addtrack',\n        {track: track}));\n  }\n\n  function removeTrackFromStreamAndFireEvent(track, stream) {\n    stream.removeTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('removetrack',\n        {track: track}));\n  }\n\n  function fireAddTrack(pc, track, receiver, streams) {\n    var trackEvent = new Event('track');\n    trackEvent.track = track;\n    trackEvent.receiver = receiver;\n    trackEvent.transceiver = {receiver: receiver};\n    trackEvent.streams = streams;\n    window.setTimeout(function() {\n      pc._dispatchEvent('track', trackEvent);\n    });\n  }\n\n  var RTCPeerConnection = function(config) {\n    var pc = this;\n\n    var _eventTarget = document.createDocumentFragment();\n    ['addEventListener', 'removeEventListener', 'dispatchEvent']\n        .forEach(function(method) {\n          pc[method] = _eventTarget[method].bind(_eventTarget);\n        });\n\n    this.canTrickleIceCandidates = null;\n\n    this.needNegotiation = false;\n\n    this.localStreams = [];\n    this.remoteStreams = [];\n\n    this._localDescription = null;\n    this._remoteDescription = null;\n\n    this.signalingState = 'stable';\n    this.iceConnectionState = 'new';\n    this.connectionState = 'new';\n    this.iceGatheringState = 'new';\n\n    config = JSON.parse(JSON.stringify(config || {}));\n\n    this.usingBundle = config.bundlePolicy === 'max-bundle';\n    if (config.rtcpMuxPolicy === 'negotiate') {\n      throw(makeError('NotSupportedError',\n          'rtcpMuxPolicy \\'negotiate\\' is not supported'));\n    } else if (!config.rtcpMuxPolicy) {\n      config.rtcpMuxPolicy = 'require';\n    }\n\n    switch (config.iceTransportPolicy) {\n      case 'all':\n      case 'relay':\n        break;\n      default:\n        config.iceTransportPolicy = 'all';\n        break;\n    }\n\n    switch (config.bundlePolicy) {\n      case 'balanced':\n      case 'max-compat':\n      case 'max-bundle':\n        break;\n      default:\n        config.bundlePolicy = 'balanced';\n        break;\n    }\n\n    config.iceServers = filterIceServers(config.iceServers || [], edgeVersion);\n\n    this._iceGatherers = [];\n    if (config.iceCandidatePoolSize) {\n      for (var i = config.iceCandidatePoolSize; i > 0; i--) {\n        this._iceGatherers.push(new window.RTCIceGatherer({\n          iceServers: config.iceServers,\n          gatherPolicy: config.iceTransportPolicy\n        }));\n      }\n    } else {\n      config.iceCandidatePoolSize = 0;\n    }\n\n    this._config = config;\n\n    // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\n    // everything that is needed to describe a SDP m-line.\n    this.transceivers = [];\n\n    this._sdpSessionId = SDPUtils.generateSessionId();\n    this._sdpSessionVersion = 0;\n\n    this._dtlsRole = undefined; // role for a=setup to use in answers.\n\n    this._isClosed = false;\n  };\n\n  Object.defineProperty(RTCPeerConnection.prototype, 'localDescription', {\n    configurable: true,\n    get: function() {\n      return this._localDescription;\n    }\n  });\n  Object.defineProperty(RTCPeerConnection.prototype, 'remoteDescription', {\n    configurable: true,\n    get: function() {\n      return this._remoteDescription;\n    }\n  });\n\n  // set up event handlers on prototype\n  RTCPeerConnection.prototype.onicecandidate = null;\n  RTCPeerConnection.prototype.onaddstream = null;\n  RTCPeerConnection.prototype.ontrack = null;\n  RTCPeerConnection.prototype.onremovestream = null;\n  RTCPeerConnection.prototype.onsignalingstatechange = null;\n  RTCPeerConnection.prototype.oniceconnectionstatechange = null;\n  RTCPeerConnection.prototype.onconnectionstatechange = null;\n  RTCPeerConnection.prototype.onicegatheringstatechange = null;\n  RTCPeerConnection.prototype.onnegotiationneeded = null;\n  RTCPeerConnection.prototype.ondatachannel = null;\n\n  RTCPeerConnection.prototype._dispatchEvent = function(name, event) {\n    if (this._isClosed) {\n      return;\n    }\n    this.dispatchEvent(event);\n    if (typeof this['on' + name] === 'function') {\n      this['on' + name](event);\n    }\n  };\n\n  RTCPeerConnection.prototype._emitGatheringStateChange = function() {\n    var event = new Event('icegatheringstatechange');\n    this._dispatchEvent('icegatheringstatechange', event);\n  };\n\n  RTCPeerConnection.prototype.getConfiguration = function() {\n    return this._config;\n  };\n\n  RTCPeerConnection.prototype.getLocalStreams = function() {\n    return this.localStreams;\n  };\n\n  RTCPeerConnection.prototype.getRemoteStreams = function() {\n    return this.remoteStreams;\n  };\n\n  // internal helper to create a transceiver object.\n  // (which is not yet the same as the WebRTC 1.0 transceiver)\n  RTCPeerConnection.prototype._createTransceiver = function(kind, doNotAdd) {\n    var hasBundleTransport = this.transceivers.length > 0;\n    var transceiver = {\n      track: null,\n      iceGatherer: null,\n      iceTransport: null,\n      dtlsTransport: null,\n      localCapabilities: null,\n      remoteCapabilities: null,\n      rtpSender: null,\n      rtpReceiver: null,\n      kind: kind,\n      mid: null,\n      sendEncodingParameters: null,\n      recvEncodingParameters: null,\n      stream: null,\n      associatedRemoteMediaStreams: [],\n      wantReceive: true\n    };\n    if (this.usingBundle && hasBundleTransport) {\n      transceiver.iceTransport = this.transceivers[0].iceTransport;\n      transceiver.dtlsTransport = this.transceivers[0].dtlsTransport;\n    } else {\n      var transports = this._createIceAndDtlsTransports();\n      transceiver.iceTransport = transports.iceTransport;\n      transceiver.dtlsTransport = transports.dtlsTransport;\n    }\n    if (!doNotAdd) {\n      this.transceivers.push(transceiver);\n    }\n    return transceiver;\n  };\n\n  RTCPeerConnection.prototype.addTrack = function(track, stream) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError',\n          'Attempted to call addTrack on a closed peerconnection.');\n    }\n\n    var alreadyExists = this.transceivers.find(function(s) {\n      return s.track === track;\n    });\n\n    if (alreadyExists) {\n      throw makeError('InvalidAccessError', 'Track already exists.');\n    }\n\n    var transceiver;\n    for (var i = 0; i < this.transceivers.length; i++) {\n      if (!this.transceivers[i].track &&\n          this.transceivers[i].kind === track.kind) {\n        transceiver = this.transceivers[i];\n      }\n    }\n    if (!transceiver) {\n      transceiver = this._createTransceiver(track.kind);\n    }\n\n    this._maybeFireNegotiationNeeded();\n\n    if (this.localStreams.indexOf(stream) === -1) {\n      this.localStreams.push(stream);\n    }\n\n    transceiver.track = track;\n    transceiver.stream = stream;\n    transceiver.rtpSender = new window.RTCRtpSender(track,\n        transceiver.dtlsTransport);\n    return transceiver.rtpSender;\n  };\n\n  RTCPeerConnection.prototype.addStream = function(stream) {\n    var pc = this;\n    if (edgeVersion >= 15025) {\n      stream.getTracks().forEach(function(track) {\n        pc.addTrack(track, stream);\n      });\n    } else {\n      // Clone is necessary for local demos mostly, attaching directly\n      // to two different senders does not work (build 10547).\n      // Fixed in 15025 (or earlier)\n      var clonedStream = stream.clone();\n      stream.getTracks().forEach(function(track, idx) {\n        var clonedTrack = clonedStream.getTracks()[idx];\n        track.addEventListener('enabled', function(event) {\n          clonedTrack.enabled = event.enabled;\n        });\n      });\n      clonedStream.getTracks().forEach(function(track) {\n        pc.addTrack(track, clonedStream);\n      });\n    }\n  };\n\n  RTCPeerConnection.prototype.removeTrack = function(sender) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError',\n          'Attempted to call removeTrack on a closed peerconnection.');\n    }\n\n    if (!(sender instanceof window.RTCRtpSender)) {\n      throw new TypeError('Argument 1 of RTCPeerConnection.removeTrack ' +\n          'does not implement interface RTCRtpSender.');\n    }\n\n    var transceiver = this.transceivers.find(function(t) {\n      return t.rtpSender === sender;\n    });\n\n    if (!transceiver) {\n      throw makeError('InvalidAccessError',\n          'Sender was not created by this connection.');\n    }\n    var stream = transceiver.stream;\n\n    transceiver.rtpSender.stop();\n    transceiver.rtpSender = null;\n    transceiver.track = null;\n    transceiver.stream = null;\n\n    // remove the stream from the set of local streams\n    var localStreams = this.transceivers.map(function(t) {\n      return t.stream;\n    });\n    if (localStreams.indexOf(stream) === -1 &&\n        this.localStreams.indexOf(stream) > -1) {\n      this.localStreams.splice(this.localStreams.indexOf(stream), 1);\n    }\n\n    this._maybeFireNegotiationNeeded();\n  };\n\n  RTCPeerConnection.prototype.removeStream = function(stream) {\n    var pc = this;\n    stream.getTracks().forEach(function(track) {\n      var sender = pc.getSenders().find(function(s) {\n        return s.track === track;\n      });\n      if (sender) {\n        pc.removeTrack(sender);\n      }\n    });\n  };\n\n  RTCPeerConnection.prototype.getSenders = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpSender;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpSender;\n    });\n  };\n\n  RTCPeerConnection.prototype.getReceivers = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpReceiver;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpReceiver;\n    });\n  };\n\n\n  RTCPeerConnection.prototype._createIceGatherer = function(sdpMLineIndex,\n      usingBundle) {\n    var pc = this;\n    if (usingBundle && sdpMLineIndex > 0) {\n      return this.transceivers[0].iceGatherer;\n    } else if (this._iceGatherers.length) {\n      return this._iceGatherers.shift();\n    }\n    var iceGatherer = new window.RTCIceGatherer({\n      iceServers: this._config.iceServers,\n      gatherPolicy: this._config.iceTransportPolicy\n    });\n    Object.defineProperty(iceGatherer, 'state',\n        {value: 'new', writable: true}\n    );\n\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = [];\n    this.transceivers[sdpMLineIndex].bufferCandidates = function(event) {\n      var end = !event.candidate || Object.keys(event.candidate).length === 0;\n      // polyfill since RTCIceGatherer.state is not implemented in\n      // Edge 10547 yet.\n      iceGatherer.state = end ? 'completed' : 'gathering';\n      if (pc.transceivers[sdpMLineIndex].bufferedCandidateEvents !== null) {\n        pc.transceivers[sdpMLineIndex].bufferedCandidateEvents.push(event);\n      }\n    };\n    iceGatherer.addEventListener('localcandidate',\n      this.transceivers[sdpMLineIndex].bufferCandidates);\n    return iceGatherer;\n  };\n\n  // start gathering from an RTCIceGatherer.\n  RTCPeerConnection.prototype._gather = function(mid, sdpMLineIndex) {\n    var pc = this;\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer.onlocalcandidate) {\n      return;\n    }\n    var bufferedCandidateEvents =\n      this.transceivers[sdpMLineIndex].bufferedCandidateEvents;\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = null;\n    iceGatherer.removeEventListener('localcandidate',\n      this.transceivers[sdpMLineIndex].bufferCandidates);\n    iceGatherer.onlocalcandidate = function(evt) {\n      if (pc.usingBundle && sdpMLineIndex > 0) {\n        // if we know that we use bundle we can drop candidates with\n        // ѕdpMLineIndex > 0. If we don't do this then our state gets\n        // confused since we dispose the extra ice gatherer.\n        return;\n      }\n      var event = new Event('icecandidate');\n      event.candidate = {sdpMid: mid, sdpMLineIndex: sdpMLineIndex};\n\n      var cand = evt.candidate;\n      // Edge emits an empty object for RTCIceCandidateComplete‥\n      var end = !cand || Object.keys(cand).length === 0;\n      if (end) {\n        // polyfill since RTCIceGatherer.state is not implemented in\n        // Edge 10547 yet.\n        if (iceGatherer.state === 'new' || iceGatherer.state === 'gathering') {\n          iceGatherer.state = 'completed';\n        }\n      } else {\n        if (iceGatherer.state === 'new') {\n          iceGatherer.state = 'gathering';\n        }\n        // RTCIceCandidate doesn't have a component, needs to be added\n        cand.component = 1;\n        // also the usernameFragment. TODO: update SDP to take both variants.\n        cand.ufrag = iceGatherer.getLocalParameters().usernameFragment;\n\n        var serializedCandidate = SDPUtils.writeCandidate(cand);\n        event.candidate = Object.assign(event.candidate,\n            SDPUtils.parseCandidate(serializedCandidate));\n\n        event.candidate.candidate = serializedCandidate;\n        event.candidate.toJSON = function() {\n          return {\n            candidate: event.candidate.candidate,\n            sdpMid: event.candidate.sdpMid,\n            sdpMLineIndex: event.candidate.sdpMLineIndex,\n            usernameFragment: event.candidate.usernameFragment\n          };\n        };\n      }\n\n      // update local description.\n      var sections = SDPUtils.getMediaSections(pc._localDescription.sdp);\n      if (!end) {\n        sections[event.candidate.sdpMLineIndex] +=\n            'a=' + event.candidate.candidate + '\\r\\n';\n      } else {\n        sections[event.candidate.sdpMLineIndex] +=\n            'a=end-of-candidates\\r\\n';\n      }\n      pc._localDescription.sdp =\n          SDPUtils.getDescription(pc._localDescription.sdp) +\n          sections.join('');\n      var complete = pc.transceivers.every(function(transceiver) {\n        return transceiver.iceGatherer &&\n            transceiver.iceGatherer.state === 'completed';\n      });\n\n      if (pc.iceGatheringState !== 'gathering') {\n        pc.iceGatheringState = 'gathering';\n        pc._emitGatheringStateChange();\n      }\n\n      // Emit candidate. Also emit null candidate when all gatherers are\n      // complete.\n      if (!end) {\n        pc._dispatchEvent('icecandidate', event);\n      }\n      if (complete) {\n        pc._dispatchEvent('icecandidate', new Event('icecandidate'));\n        pc.iceGatheringState = 'complete';\n        pc._emitGatheringStateChange();\n      }\n    };\n\n    // emit already gathered candidates.\n    window.setTimeout(function() {\n      bufferedCandidateEvents.forEach(function(e) {\n        iceGatherer.onlocalcandidate(e);\n      });\n    }, 0);\n  };\n\n  // Create ICE transport and DTLS transport.\n  RTCPeerConnection.prototype._createIceAndDtlsTransports = function() {\n    var pc = this;\n    var iceTransport = new window.RTCIceTransport(null);\n    iceTransport.onicestatechange = function() {\n      pc._updateIceConnectionState();\n      pc._updateConnectionState();\n    };\n\n    var dtlsTransport = new window.RTCDtlsTransport(iceTransport);\n    dtlsTransport.ondtlsstatechange = function() {\n      pc._updateConnectionState();\n    };\n    dtlsTransport.onerror = function() {\n      // onerror does not set state to failed by itself.\n      Object.defineProperty(dtlsTransport, 'state',\n          {value: 'failed', writable: true});\n      pc._updateConnectionState();\n    };\n\n    return {\n      iceTransport: iceTransport,\n      dtlsTransport: dtlsTransport\n    };\n  };\n\n  // Destroy ICE gatherer, ICE transport and DTLS transport.\n  // Without triggering the callbacks.\n  RTCPeerConnection.prototype._disposeIceAndDtlsTransports = function(\n      sdpMLineIndex) {\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer) {\n      delete iceGatherer.onlocalcandidate;\n      delete this.transceivers[sdpMLineIndex].iceGatherer;\n    }\n    var iceTransport = this.transceivers[sdpMLineIndex].iceTransport;\n    if (iceTransport) {\n      delete iceTransport.onicestatechange;\n      delete this.transceivers[sdpMLineIndex].iceTransport;\n    }\n    var dtlsTransport = this.transceivers[sdpMLineIndex].dtlsTransport;\n    if (dtlsTransport) {\n      delete dtlsTransport.ondtlsstatechange;\n      delete dtlsTransport.onerror;\n      delete this.transceivers[sdpMLineIndex].dtlsTransport;\n    }\n  };\n\n  // Start the RTP Sender and Receiver for a transceiver.\n  RTCPeerConnection.prototype._transceive = function(transceiver,\n      send, recv) {\n    var params = getCommonCapabilities(transceiver.localCapabilities,\n        transceiver.remoteCapabilities);\n    if (send && transceiver.rtpSender) {\n      params.encodings = transceiver.sendEncodingParameters;\n      params.rtcp = {\n        cname: SDPUtils.localCName,\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.recvEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpSender.send(params);\n    }\n    if (recv && transceiver.rtpReceiver && params.codecs.length > 0) {\n      // remove RTX field in Edge 14942\n      if (transceiver.kind === 'video'\n          && transceiver.recvEncodingParameters\n          && edgeVersion < 15019) {\n        transceiver.recvEncodingParameters.forEach(function(p) {\n          delete p.rtx;\n        });\n      }\n      if (transceiver.recvEncodingParameters.length) {\n        params.encodings = transceiver.recvEncodingParameters;\n      } else {\n        params.encodings = [{}];\n      }\n      params.rtcp = {\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.rtcpParameters.cname) {\n        params.rtcp.cname = transceiver.rtcpParameters.cname;\n      }\n      if (transceiver.sendEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpReceiver.receive(params);\n    }\n  };\n\n  RTCPeerConnection.prototype.setLocalDescription = function(description) {\n    var pc = this;\n\n    // Note: pranswer is not supported.\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError',\n          'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setLocalDescription',\n        description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not set local ' + description.type +\n          ' in state ' + pc.signalingState));\n    }\n\n    var sections;\n    var sessionpart;\n    if (description.type === 'offer') {\n      // VERY limited support for SDP munging. Limited to:\n      // * changing the order of codecs\n      sections = SDPUtils.splitSections(description.sdp);\n      sessionpart = sections.shift();\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var caps = SDPUtils.parseRtpParameters(mediaSection);\n        pc.transceivers[sdpMLineIndex].localCapabilities = caps;\n      });\n\n      pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n        pc._gather(transceiver.mid, sdpMLineIndex);\n      });\n    } else if (description.type === 'answer') {\n      sections = SDPUtils.splitSections(pc._remoteDescription.sdp);\n      sessionpart = sections.shift();\n      var isIceLite = SDPUtils.matchPrefix(sessionpart,\n          'a=ice-lite').length > 0;\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var transceiver = pc.transceivers[sdpMLineIndex];\n        var iceGatherer = transceiver.iceGatherer;\n        var iceTransport = transceiver.iceTransport;\n        var dtlsTransport = transceiver.dtlsTransport;\n        var localCapabilities = transceiver.localCapabilities;\n        var remoteCapabilities = transceiver.remoteCapabilities;\n\n        // treat bundle-only as not-rejected.\n        var rejected = SDPUtils.isRejected(mediaSection) &&\n            SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n\n        if (!rejected && !transceiver.rejected) {\n          var remoteIceParameters = SDPUtils.getIceParameters(\n              mediaSection, sessionpart);\n          var remoteDtlsParameters = SDPUtils.getDtlsParameters(\n              mediaSection, sessionpart);\n          if (isIceLite) {\n            remoteDtlsParameters.role = 'server';\n          }\n\n          if (!pc.usingBundle || sdpMLineIndex === 0) {\n            pc._gather(transceiver.mid, sdpMLineIndex);\n            if (iceTransport.state === 'new') {\n              iceTransport.start(iceGatherer, remoteIceParameters,\n                  isIceLite ? 'controlling' : 'controlled');\n            }\n            if (dtlsTransport.state === 'new') {\n              dtlsTransport.start(remoteDtlsParameters);\n            }\n          }\n\n          // Calculate intersection of capabilities.\n          var params = getCommonCapabilities(localCapabilities,\n              remoteCapabilities);\n\n          // Start the RTCRtpSender. The RTCRtpReceiver for this\n          // transceiver has already been started in setRemoteDescription.\n          pc._transceive(transceiver,\n              params.codecs.length > 0,\n              false);\n        }\n      });\n    }\n\n    pc._localDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-local-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.setRemoteDescription = function(description) {\n    var pc = this;\n\n    // Note: pranswer is not supported.\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError',\n          'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setRemoteDescription',\n        description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not set remote ' + description.type +\n          ' in state ' + pc.signalingState));\n    }\n\n    var streams = {};\n    pc.remoteStreams.forEach(function(stream) {\n      streams[stream.id] = stream;\n    });\n    var receiverList = [];\n    var sections = SDPUtils.splitSections(description.sdp);\n    var sessionpart = sections.shift();\n    var isIceLite = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-lite').length > 0;\n    var usingBundle = SDPUtils.matchPrefix(sessionpart,\n        'a=group:BUNDLE ').length > 0;\n    pc.usingBundle = usingBundle;\n    var iceOptions = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-options:')[0];\n    if (iceOptions) {\n      pc.canTrickleIceCandidates = iceOptions.substr(14).split(' ')\n          .indexOf('trickle') >= 0;\n    } else {\n      pc.canTrickleIceCandidates = false;\n    }\n\n    sections.forEach(function(mediaSection, sdpMLineIndex) {\n      var lines = SDPUtils.splitLines(mediaSection);\n      var kind = SDPUtils.getKind(mediaSection);\n      // treat bundle-only as not-rejected.\n      var rejected = SDPUtils.isRejected(mediaSection) &&\n          SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n      var protocol = lines[0].substr(2).split(' ')[2];\n\n      var direction = SDPUtils.getDirection(mediaSection, sessionpart);\n      var remoteMsid = SDPUtils.parseMsid(mediaSection);\n\n      var mid = SDPUtils.getMid(mediaSection) || SDPUtils.generateIdentifier();\n\n      // Reject datachannels which are not implemented yet.\n      if (rejected || (kind === 'application' && (protocol === 'DTLS/SCTP' ||\n          protocol === 'UDP/DTLS/SCTP'))) {\n        // TODO: this is dangerous in the case where a non-rejected m-line\n        //     becomes rejected.\n        pc.transceivers[sdpMLineIndex] = {\n          mid: mid,\n          kind: kind,\n          protocol: protocol,\n          rejected: true\n        };\n        return;\n      }\n\n      if (!rejected && pc.transceivers[sdpMLineIndex] &&\n          pc.transceivers[sdpMLineIndex].rejected) {\n        // recycle a rejected transceiver.\n        pc.transceivers[sdpMLineIndex] = pc._createTransceiver(kind, true);\n      }\n\n      var transceiver;\n      var iceGatherer;\n      var iceTransport;\n      var dtlsTransport;\n      var rtpReceiver;\n      var sendEncodingParameters;\n      var recvEncodingParameters;\n      var localCapabilities;\n\n      var track;\n      // FIXME: ensure the mediaSection has rtcp-mux set.\n      var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\n      var remoteIceParameters;\n      var remoteDtlsParameters;\n      if (!rejected) {\n        remoteIceParameters = SDPUtils.getIceParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters.role = 'client';\n      }\n      recvEncodingParameters =\n          SDPUtils.parseRtpEncodingParameters(mediaSection);\n\n      var rtcpParameters = SDPUtils.parseRtcpParameters(mediaSection);\n\n      var isComplete = SDPUtils.matchPrefix(mediaSection,\n          'a=end-of-candidates', sessionpart).length > 0;\n      var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\n          .map(function(cand) {\n            return SDPUtils.parseCandidate(cand);\n          })\n          .filter(function(cand) {\n            return cand.component === 1;\n          });\n\n      // Check if we can use BUNDLE and dispose transports.\n      if ((description.type === 'offer' || description.type === 'answer') &&\n          !rejected && usingBundle && sdpMLineIndex > 0 &&\n          pc.transceivers[sdpMLineIndex]) {\n        pc._disposeIceAndDtlsTransports(sdpMLineIndex);\n        pc.transceivers[sdpMLineIndex].iceGatherer =\n            pc.transceivers[0].iceGatherer;\n        pc.transceivers[sdpMLineIndex].iceTransport =\n            pc.transceivers[0].iceTransport;\n        pc.transceivers[sdpMLineIndex].dtlsTransport =\n            pc.transceivers[0].dtlsTransport;\n        if (pc.transceivers[sdpMLineIndex].rtpSender) {\n          pc.transceivers[sdpMLineIndex].rtpSender.setTransport(\n              pc.transceivers[0].dtlsTransport);\n        }\n        if (pc.transceivers[sdpMLineIndex].rtpReceiver) {\n          pc.transceivers[sdpMLineIndex].rtpReceiver.setTransport(\n              pc.transceivers[0].dtlsTransport);\n        }\n      }\n      if (description.type === 'offer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex] ||\n            pc._createTransceiver(kind);\n        transceiver.mid = mid;\n\n        if (!transceiver.iceGatherer) {\n          transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n              usingBundle);\n        }\n\n        if (cands.length && transceiver.iceTransport.state === 'new') {\n          if (isComplete && (!usingBundle || sdpMLineIndex === 0)) {\n            transceiver.iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function(candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        localCapabilities = window.RTCRtpReceiver.getCapabilities(kind);\n\n        // filter RTX until additional stuff needed for RTX is implemented\n        // in adapter.js\n        if (edgeVersion < 15019) {\n          localCapabilities.codecs = localCapabilities.codecs.filter(\n              function(codec) {\n                return codec.name !== 'rtx';\n              });\n        }\n\n        sendEncodingParameters = transceiver.sendEncodingParameters || [{\n          ssrc: (2 * sdpMLineIndex + 2) * 1001\n        }];\n\n        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n        var isNewTrack = false;\n        if (direction === 'sendrecv' || direction === 'sendonly') {\n          isNewTrack = !transceiver.rtpReceiver;\n          rtpReceiver = transceiver.rtpReceiver ||\n              new window.RTCRtpReceiver(transceiver.dtlsTransport, kind);\n\n          if (isNewTrack) {\n            var stream;\n            track = rtpReceiver.track;\n            // FIXME: does not work with Plan B.\n            if (remoteMsid && remoteMsid.stream === '-') {\n              // no-op. a stream id of '-' means: no associated stream.\n            } else if (remoteMsid) {\n              if (!streams[remoteMsid.stream]) {\n                streams[remoteMsid.stream] = new window.MediaStream();\n                Object.defineProperty(streams[remoteMsid.stream], 'id', {\n                  get: function() {\n                    return remoteMsid.stream;\n                  }\n                });\n              }\n              Object.defineProperty(track, 'id', {\n                get: function() {\n                  return remoteMsid.track;\n                }\n              });\n              stream = streams[remoteMsid.stream];\n            } else {\n              if (!streams.default) {\n                streams.default = new window.MediaStream();\n              }\n              stream = streams.default;\n            }\n            if (stream) {\n              addTrackToStreamAndFireEvent(track, stream);\n              transceiver.associatedRemoteMediaStreams.push(stream);\n            }\n            receiverList.push([track, rtpReceiver, stream]);\n          }\n        } else if (transceiver.rtpReceiver && transceiver.rtpReceiver.track) {\n          transceiver.associatedRemoteMediaStreams.forEach(function(s) {\n            var nativeTrack = s.getTracks().find(function(t) {\n              return t.id === transceiver.rtpReceiver.track.id;\n            });\n            if (nativeTrack) {\n              removeTrackFromStreamAndFireEvent(nativeTrack, s);\n            }\n          });\n          transceiver.associatedRemoteMediaStreams = [];\n        }\n\n        transceiver.localCapabilities = localCapabilities;\n        transceiver.remoteCapabilities = remoteCapabilities;\n        transceiver.rtpReceiver = rtpReceiver;\n        transceiver.rtcpParameters = rtcpParameters;\n        transceiver.sendEncodingParameters = sendEncodingParameters;\n        transceiver.recvEncodingParameters = recvEncodingParameters;\n\n        // Start the RTCRtpReceiver now. The RTPSender is started in\n        // setLocalDescription.\n        pc._transceive(pc.transceivers[sdpMLineIndex],\n            false,\n            isNewTrack);\n      } else if (description.type === 'answer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex];\n        iceGatherer = transceiver.iceGatherer;\n        iceTransport = transceiver.iceTransport;\n        dtlsTransport = transceiver.dtlsTransport;\n        rtpReceiver = transceiver.rtpReceiver;\n        sendEncodingParameters = transceiver.sendEncodingParameters;\n        localCapabilities = transceiver.localCapabilities;\n\n        pc.transceivers[sdpMLineIndex].recvEncodingParameters =\n            recvEncodingParameters;\n        pc.transceivers[sdpMLineIndex].remoteCapabilities =\n            remoteCapabilities;\n        pc.transceivers[sdpMLineIndex].rtcpParameters = rtcpParameters;\n\n        if (cands.length && iceTransport.state === 'new') {\n          if ((isIceLite || isComplete) &&\n              (!usingBundle || sdpMLineIndex === 0)) {\n            iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function(candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        if (!usingBundle || sdpMLineIndex === 0) {\n          if (iceTransport.state === 'new') {\n            iceTransport.start(iceGatherer, remoteIceParameters,\n                'controlling');\n          }\n          if (dtlsTransport.state === 'new') {\n            dtlsTransport.start(remoteDtlsParameters);\n          }\n        }\n\n        // If the offer contained RTX but the answer did not,\n        // remove RTX from sendEncodingParameters.\n        var commonCapabilities = getCommonCapabilities(\n          transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n\n        var hasRtx = commonCapabilities.codecs.filter(function(c) {\n          return c.name.toLowerCase() === 'rtx';\n        }).length;\n        if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n          delete transceiver.sendEncodingParameters[0].rtx;\n        }\n\n        pc._transceive(transceiver,\n            direction === 'sendrecv' || direction === 'recvonly',\n            direction === 'sendrecv' || direction === 'sendonly');\n\n        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n        if (rtpReceiver &&\n            (direction === 'sendrecv' || direction === 'sendonly')) {\n          track = rtpReceiver.track;\n          if (remoteMsid) {\n            if (!streams[remoteMsid.stream]) {\n              streams[remoteMsid.stream] = new window.MediaStream();\n            }\n            addTrackToStreamAndFireEvent(track, streams[remoteMsid.stream]);\n            receiverList.push([track, rtpReceiver, streams[remoteMsid.stream]]);\n          } else {\n            if (!streams.default) {\n              streams.default = new window.MediaStream();\n            }\n            addTrackToStreamAndFireEvent(track, streams.default);\n            receiverList.push([track, rtpReceiver, streams.default]);\n          }\n        } else {\n          // FIXME: actually the receiver should be created later.\n          delete transceiver.rtpReceiver;\n        }\n      }\n    });\n\n    if (pc._dtlsRole === undefined) {\n      pc._dtlsRole = description.type === 'offer' ? 'active' : 'passive';\n    }\n\n    pc._remoteDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-remote-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n    Object.keys(streams).forEach(function(sid) {\n      var stream = streams[sid];\n      if (stream.getTracks().length) {\n        if (pc.remoteStreams.indexOf(stream) === -1) {\n          pc.remoteStreams.push(stream);\n          var event = new Event('addstream');\n          event.stream = stream;\n          window.setTimeout(function() {\n            pc._dispatchEvent('addstream', event);\n          });\n        }\n\n        receiverList.forEach(function(item) {\n          var track = item[0];\n          var receiver = item[1];\n          if (stream.id !== item[2].id) {\n            return;\n          }\n          fireAddTrack(pc, track, receiver, [stream]);\n        });\n      }\n    });\n    receiverList.forEach(function(item) {\n      if (item[2]) {\n        return;\n      }\n      fireAddTrack(pc, item[0], item[1], []);\n    });\n\n    // check whether addIceCandidate({}) was called within four seconds after\n    // setRemoteDescription.\n    window.setTimeout(function() {\n      if (!(pc && pc.transceivers)) {\n        return;\n      }\n      pc.transceivers.forEach(function(transceiver) {\n        if (transceiver.iceTransport &&\n            transceiver.iceTransport.state === 'new' &&\n            transceiver.iceTransport.getRemoteCandidates().length > 0) {\n          console.warn('Timeout for addRemoteCandidate. Consider sending ' +\n              'an end-of-candidates notification');\n          transceiver.iceTransport.addRemoteCandidate({});\n        }\n      });\n    }, 4000);\n\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.close = function() {\n    this.transceivers.forEach(function(transceiver) {\n      /* not yet\n      if (transceiver.iceGatherer) {\n        transceiver.iceGatherer.close();\n      }\n      */\n      if (transceiver.iceTransport) {\n        transceiver.iceTransport.stop();\n      }\n      if (transceiver.dtlsTransport) {\n        transceiver.dtlsTransport.stop();\n      }\n      if (transceiver.rtpSender) {\n        transceiver.rtpSender.stop();\n      }\n      if (transceiver.rtpReceiver) {\n        transceiver.rtpReceiver.stop();\n      }\n    });\n    // FIXME: clean up tracks, local streams, remote streams, etc\n    this._isClosed = true;\n    this._updateSignalingState('closed');\n  };\n\n  // Update the signaling state.\n  RTCPeerConnection.prototype._updateSignalingState = function(newState) {\n    this.signalingState = newState;\n    var event = new Event('signalingstatechange');\n    this._dispatchEvent('signalingstatechange', event);\n  };\n\n  // Determine whether to fire the negotiationneeded event.\n  RTCPeerConnection.prototype._maybeFireNegotiationNeeded = function() {\n    var pc = this;\n    if (this.signalingState !== 'stable' || this.needNegotiation === true) {\n      return;\n    }\n    this.needNegotiation = true;\n    window.setTimeout(function() {\n      if (pc.needNegotiation) {\n        pc.needNegotiation = false;\n        var event = new Event('negotiationneeded');\n        pc._dispatchEvent('negotiationneeded', event);\n      }\n    }, 0);\n  };\n\n  // Update the ice connection state.\n  RTCPeerConnection.prototype._updateIceConnectionState = function() {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      checking: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function(transceiver) {\n      if (transceiver.iceTransport && !transceiver.rejected) {\n        states[transceiver.iceTransport.state]++;\n      }\n    });\n\n    newState = 'new';\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.checking > 0) {\n      newState = 'checking';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0) {\n      newState = 'connected';\n    } else if (states.completed > 0) {\n      newState = 'completed';\n    }\n\n    if (newState !== this.iceConnectionState) {\n      this.iceConnectionState = newState;\n      var event = new Event('iceconnectionstatechange');\n      this._dispatchEvent('iceconnectionstatechange', event);\n    }\n  };\n\n  // Update the connection state.\n  RTCPeerConnection.prototype._updateConnectionState = function() {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      connecting: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function(transceiver) {\n      if (transceiver.iceTransport && transceiver.dtlsTransport &&\n          !transceiver.rejected) {\n        states[transceiver.iceTransport.state]++;\n        states[transceiver.dtlsTransport.state]++;\n      }\n    });\n    // ICETransport.completed and connected are the same for this purpose.\n    states.connected += states.completed;\n\n    newState = 'new';\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.connecting > 0) {\n      newState = 'connecting';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0) {\n      newState = 'connected';\n    }\n\n    if (newState !== this.connectionState) {\n      this.connectionState = newState;\n      var event = new Event('connectionstatechange');\n      this._dispatchEvent('connectionstatechange', event);\n    }\n  };\n\n  RTCPeerConnection.prototype.createOffer = function() {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createOffer after close'));\n    }\n\n    var numAudioTracks = pc.transceivers.filter(function(t) {\n      return t.kind === 'audio';\n    }).length;\n    var numVideoTracks = pc.transceivers.filter(function(t) {\n      return t.kind === 'video';\n    }).length;\n\n    // Determine number of audio and video tracks we need to send/recv.\n    var offerOptions = arguments[0];\n    if (offerOptions) {\n      // Reject Chrome legacy constraints.\n      if (offerOptions.mandatory || offerOptions.optional) {\n        throw new TypeError(\n            'Legacy mandatory/optional constraints not supported.');\n      }\n      if (offerOptions.offerToReceiveAudio !== undefined) {\n        if (offerOptions.offerToReceiveAudio === true) {\n          numAudioTracks = 1;\n        } else if (offerOptions.offerToReceiveAudio === false) {\n          numAudioTracks = 0;\n        } else {\n          numAudioTracks = offerOptions.offerToReceiveAudio;\n        }\n      }\n      if (offerOptions.offerToReceiveVideo !== undefined) {\n        if (offerOptions.offerToReceiveVideo === true) {\n          numVideoTracks = 1;\n        } else if (offerOptions.offerToReceiveVideo === false) {\n          numVideoTracks = 0;\n        } else {\n          numVideoTracks = offerOptions.offerToReceiveVideo;\n        }\n      }\n    }\n\n    pc.transceivers.forEach(function(transceiver) {\n      if (transceiver.kind === 'audio') {\n        numAudioTracks--;\n        if (numAudioTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      } else if (transceiver.kind === 'video') {\n        numVideoTracks--;\n        if (numVideoTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      }\n    });\n\n    // Create M-lines for recvonly streams.\n    while (numAudioTracks > 0 || numVideoTracks > 0) {\n      if (numAudioTracks > 0) {\n        pc._createTransceiver('audio');\n        numAudioTracks--;\n      }\n      if (numVideoTracks > 0) {\n        pc._createTransceiver('video');\n        numVideoTracks--;\n      }\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n        pc._sdpSessionVersion++);\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      // For each track, create an ice gatherer, ice transport,\n      // dtls transport, potentially rtpsender and rtpreceiver.\n      var track = transceiver.track;\n      var kind = transceiver.kind;\n      var mid = transceiver.mid || SDPUtils.generateIdentifier();\n      transceiver.mid = mid;\n\n      if (!transceiver.iceGatherer) {\n        transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n            pc.usingBundle);\n      }\n\n      var localCapabilities = window.RTCRtpSender.getCapabilities(kind);\n      // filter RTX until additional stuff needed for RTX is implemented\n      // in adapter.js\n      if (edgeVersion < 15019) {\n        localCapabilities.codecs = localCapabilities.codecs.filter(\n            function(codec) {\n              return codec.name !== 'rtx';\n            });\n      }\n      localCapabilities.codecs.forEach(function(codec) {\n        // work around https://bugs.chromium.org/p/webrtc/issues/detail?id=6552\n        // by adding level-asymmetry-allowed=1\n        if (codec.name === 'H264' &&\n            codec.parameters['level-asymmetry-allowed'] === undefined) {\n          codec.parameters['level-asymmetry-allowed'] = '1';\n        }\n\n        // for subsequent offers, we might have to re-use the payload\n        // type of the last offer.\n        if (transceiver.remoteCapabilities &&\n            transceiver.remoteCapabilities.codecs) {\n          transceiver.remoteCapabilities.codecs.forEach(function(remoteCodec) {\n            if (codec.name.toLowerCase() === remoteCodec.name.toLowerCase() &&\n                codec.clockRate === remoteCodec.clockRate) {\n              codec.preferredPayloadType = remoteCodec.payloadType;\n            }\n          });\n        }\n      });\n      localCapabilities.headerExtensions.forEach(function(hdrExt) {\n        var remoteExtensions = transceiver.remoteCapabilities &&\n            transceiver.remoteCapabilities.headerExtensions || [];\n        remoteExtensions.forEach(function(rHdrExt) {\n          if (hdrExt.uri === rHdrExt.uri) {\n            hdrExt.id = rHdrExt.id;\n          }\n        });\n      });\n\n      // generate an ssrc now, to be used later in rtpSender.send\n      var sendEncodingParameters = transceiver.sendEncodingParameters || [{\n        ssrc: (2 * sdpMLineIndex + 1) * 1001\n      }];\n      if (track) {\n        // add RTX\n        if (edgeVersion >= 15019 && kind === 'video' &&\n            !sendEncodingParameters[0].rtx) {\n          sendEncodingParameters[0].rtx = {\n            ssrc: sendEncodingParameters[0].ssrc + 1\n          };\n        }\n      }\n\n      if (transceiver.wantReceive) {\n        transceiver.rtpReceiver = new window.RTCRtpReceiver(\n            transceiver.dtlsTransport, kind);\n      }\n\n      transceiver.localCapabilities = localCapabilities;\n      transceiver.sendEncodingParameters = sendEncodingParameters;\n    });\n\n    // always offer BUNDLE and dispose on return if not supported.\n    if (pc._config.bundlePolicy !== 'max-compat') {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    sdp += 'a=ice-options:trickle\\r\\n';\n\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      sdp += writeMediaSection(transceiver, transceiver.localCapabilities,\n          'offer', transceiver.stream, pc._dtlsRole);\n      sdp += 'a=rtcp-rsize\\r\\n';\n\n      if (transceiver.iceGatherer && pc.iceGatheringState !== 'new' &&\n          (sdpMLineIndex === 0 || !pc.usingBundle)) {\n        transceiver.iceGatherer.getLocalCandidates().forEach(function(cand) {\n          cand.component = 1;\n          sdp += 'a=' + SDPUtils.writeCandidate(cand) + '\\r\\n';\n        });\n\n        if (transceiver.iceGatherer.state === 'completed') {\n          sdp += 'a=end-of-candidates\\r\\n';\n        }\n      }\n    });\n\n    var desc = new window.RTCSessionDescription({\n      type: 'offer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.createAnswer = function() {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createAnswer after close'));\n    }\n\n    if (!(pc.signalingState === 'have-remote-offer' ||\n        pc.signalingState === 'have-local-pranswer')) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createAnswer in signalingState ' + pc.signalingState));\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n        pc._sdpSessionVersion++);\n    if (pc.usingBundle) {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    sdp += 'a=ice-options:trickle\\r\\n';\n\n    var mediaSectionsInOffer = SDPUtils.getMediaSections(\n        pc._remoteDescription.sdp).length;\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      if (sdpMLineIndex + 1 > mediaSectionsInOffer) {\n        return;\n      }\n      if (transceiver.rejected) {\n        if (transceiver.kind === 'application') {\n          if (transceiver.protocol === 'DTLS/SCTP') { // legacy fmt\n            sdp += 'm=application 0 DTLS/SCTP 5000\\r\\n';\n          } else {\n            sdp += 'm=application 0 ' + transceiver.protocol +\n                ' webrtc-datachannel\\r\\n';\n          }\n        } else if (transceiver.kind === 'audio') {\n          sdp += 'm=audio 0 UDP/TLS/RTP/SAVPF 0\\r\\n' +\n              'a=rtpmap:0 PCMU/8000\\r\\n';\n        } else if (transceiver.kind === 'video') {\n          sdp += 'm=video 0 UDP/TLS/RTP/SAVPF 120\\r\\n' +\n              'a=rtpmap:120 VP8/90000\\r\\n';\n        }\n        sdp += 'c=IN IP4 0.0.0.0\\r\\n' +\n            'a=inactive\\r\\n' +\n            'a=mid:' + transceiver.mid + '\\r\\n';\n        return;\n      }\n\n      // FIXME: look at direction.\n      if (transceiver.stream) {\n        var localTrack;\n        if (transceiver.kind === 'audio') {\n          localTrack = transceiver.stream.getAudioTracks()[0];\n        } else if (transceiver.kind === 'video') {\n          localTrack = transceiver.stream.getVideoTracks()[0];\n        }\n        if (localTrack) {\n          // add RTX\n          if (edgeVersion >= 15019 && transceiver.kind === 'video' &&\n              !transceiver.sendEncodingParameters[0].rtx) {\n            transceiver.sendEncodingParameters[0].rtx = {\n              ssrc: transceiver.sendEncodingParameters[0].ssrc + 1\n            };\n          }\n        }\n      }\n\n      // Calculate intersection of capabilities.\n      var commonCapabilities = getCommonCapabilities(\n          transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n\n      var hasRtx = commonCapabilities.codecs.filter(function(c) {\n        return c.name.toLowerCase() === 'rtx';\n      }).length;\n      if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n        delete transceiver.sendEncodingParameters[0].rtx;\n      }\n\n      sdp += writeMediaSection(transceiver, commonCapabilities,\n          'answer', transceiver.stream, pc._dtlsRole);\n      if (transceiver.rtcpParameters &&\n          transceiver.rtcpParameters.reducedSize) {\n        sdp += 'a=rtcp-rsize\\r\\n';\n      }\n    });\n\n    var desc = new window.RTCSessionDescription({\n      type: 'answer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.addIceCandidate = function(candidate) {\n    var pc = this;\n    var sections;\n    if (candidate && !(candidate.sdpMLineIndex !== undefined ||\n        candidate.sdpMid)) {\n      return Promise.reject(new TypeError('sdpMLineIndex or sdpMid required'));\n    }\n\n    // TODO: needs to go into ops queue.\n    return new Promise(function(resolve, reject) {\n      if (!pc._remoteDescription) {\n        return reject(makeError('InvalidStateError',\n            'Can not add ICE candidate without a remote description'));\n      } else if (!candidate || candidate.candidate === '') {\n        for (var j = 0; j < pc.transceivers.length; j++) {\n          if (pc.transceivers[j].rejected) {\n            continue;\n          }\n          pc.transceivers[j].iceTransport.addRemoteCandidate({});\n          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n          sections[j] += 'a=end-of-candidates\\r\\n';\n          pc._remoteDescription.sdp =\n              SDPUtils.getDescription(pc._remoteDescription.sdp) +\n              sections.join('');\n          if (pc.usingBundle) {\n            break;\n          }\n        }\n      } else {\n        var sdpMLineIndex = candidate.sdpMLineIndex;\n        if (candidate.sdpMid) {\n          for (var i = 0; i < pc.transceivers.length; i++) {\n            if (pc.transceivers[i].mid === candidate.sdpMid) {\n              sdpMLineIndex = i;\n              break;\n            }\n          }\n        }\n        var transceiver = pc.transceivers[sdpMLineIndex];\n        if (transceiver) {\n          if (transceiver.rejected) {\n            return resolve();\n          }\n          var cand = Object.keys(candidate.candidate).length > 0 ?\n              SDPUtils.parseCandidate(candidate.candidate) : {};\n          // Ignore Chrome's invalid candidates since Edge does not like them.\n          if (cand.protocol === 'tcp' && (cand.port === 0 || cand.port === 9)) {\n            return resolve();\n          }\n          // Ignore RTCP candidates, we assume RTCP-MUX.\n          if (cand.component && cand.component !== 1) {\n            return resolve();\n          }\n          // when using bundle, avoid adding candidates to the wrong\n          // ice transport. And avoid adding candidates added in the SDP.\n          if (sdpMLineIndex === 0 || (sdpMLineIndex > 0 &&\n              transceiver.iceTransport !== pc.transceivers[0].iceTransport)) {\n            if (!maybeAddCandidate(transceiver.iceTransport, cand)) {\n              return reject(makeError('OperationError',\n                  'Can not add ICE candidate'));\n            }\n          }\n\n          // update the remoteDescription.\n          var candidateString = candidate.candidate.trim();\n          if (candidateString.indexOf('a=') === 0) {\n            candidateString = candidateString.substr(2);\n          }\n          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n          sections[sdpMLineIndex] += 'a=' +\n              (cand.type ? candidateString : 'end-of-candidates')\n              + '\\r\\n';\n          pc._remoteDescription.sdp =\n              SDPUtils.getDescription(pc._remoteDescription.sdp) +\n              sections.join('');\n        } else {\n          return reject(makeError('OperationError',\n              'Can not add ICE candidate'));\n        }\n      }\n      resolve();\n    });\n  };\n\n  RTCPeerConnection.prototype.getStats = function(selector) {\n    if (selector && selector instanceof window.MediaStreamTrack) {\n      var senderOrReceiver = null;\n      this.transceivers.forEach(function(transceiver) {\n        if (transceiver.rtpSender &&\n            transceiver.rtpSender.track === selector) {\n          senderOrReceiver = transceiver.rtpSender;\n        } else if (transceiver.rtpReceiver &&\n            transceiver.rtpReceiver.track === selector) {\n          senderOrReceiver = transceiver.rtpReceiver;\n        }\n      });\n      if (!senderOrReceiver) {\n        throw makeError('InvalidAccessError', 'Invalid selector.');\n      }\n      return senderOrReceiver.getStats();\n    }\n\n    var promises = [];\n    this.transceivers.forEach(function(transceiver) {\n      ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport',\n          'dtlsTransport'].forEach(function(method) {\n            if (transceiver[method]) {\n              promises.push(transceiver[method].getStats());\n            }\n          });\n    });\n    return Promise.all(promises).then(function(allStats) {\n      var results = new Map();\n      allStats.forEach(function(stats) {\n        stats.forEach(function(stat) {\n          results.set(stat.id, stat);\n        });\n      });\n      return results;\n    });\n  };\n\n  // fix low-level stat names and return Map instead of object.\n  var ortcObjects = ['RTCRtpSender', 'RTCRtpReceiver', 'RTCIceGatherer',\n    'RTCIceTransport', 'RTCDtlsTransport'];\n  ortcObjects.forEach(function(ortcObjectName) {\n    var obj = window[ortcObjectName];\n    if (obj && obj.prototype && obj.prototype.getStats) {\n      var nativeGetstats = obj.prototype.getStats;\n      obj.prototype.getStats = function() {\n        return nativeGetstats.apply(this)\n        .then(function(nativeStats) {\n          var mapStats = new Map();\n          Object.keys(nativeStats).forEach(function(id) {\n            nativeStats[id].type = fixStatsType(nativeStats[id]);\n            mapStats.set(id, nativeStats[id]);\n          });\n          return mapStats;\n        });\n      };\n    }\n  });\n\n  // legacy callback shims. Should be moved to adapter.js some days.\n  var methods = ['createOffer', 'createAnswer'];\n  methods.forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[0] === 'function' ||\n          typeof args[1] === 'function') { // legacy\n        return nativeMethod.apply(this, [arguments[2]])\n        .then(function(description) {\n          if (typeof args[0] === 'function') {\n            args[0].apply(null, [description]);\n          }\n        }, function(error) {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null, [error]);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  methods = ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'];\n  methods.forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[1] === 'function' ||\n          typeof args[2] === 'function') { // legacy\n        return nativeMethod.apply(this, arguments)\n        .then(function() {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        }, function(error) {\n          if (typeof args[2] === 'function') {\n            args[2].apply(null, [error]);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  // getStats is special. It doesn't have a spec legacy method yet we support\n  // getStats(something, cb) without error callbacks.\n  ['getStats'].forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[1] === 'function') {\n        return nativeMethod.apply(this, arguments)\n        .then(function() {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  return RTCPeerConnection;\n};\n"," /* eslint-env node */\n'use strict';\n\n// SDP helpers.\nvar SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substr(2, 10);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(function(line) {\n    return line.trim();\n  });\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  var parts = blob.split('\\nm=');\n  return parts.map(function(part, index) {\n    return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n  });\n};\n\n// returns the session description.\nSDPUtils.getDescription = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  return sections && sections[0];\n};\n\n// returns the individual media sections.\nSDPUtils.getMediaSections = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  sections.shift();\n  return sections;\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(function(line) {\n    return line.indexOf(prefix) === 0;\n  });\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\nSDPUtils.parseCandidate = function(line) {\n  var parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  var candidate = {\n    foundation: parts[0],\n    component: parseInt(parts[1], 10),\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    address: parts[4], // address is an alias for ip.\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7]\n  };\n\n  for (var i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      case 'ufrag':\n        candidate.ufrag = parts[i + 1]; // for backward compability.\n        candidate.usernameFragment = parts[i + 1];\n        break;\n      default: // extension handling, in particular ufrag\n        candidate[parts[i]] = parts[i + 1];\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\nSDPUtils.writeCandidate = function(candidate) {\n  var sdp = [];\n  sdp.push(candidate.foundation);\n  sdp.push(candidate.component);\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.address || candidate.ip);\n  sdp.push(candidate.port);\n\n  var type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress);\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort);\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  if (candidate.usernameFragment || candidate.ufrag) {\n    sdp.push('ufrag');\n    sdp.push(candidate.usernameFragment || candidate.ufrag);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n  return line.substr(14).split(' ');\n};\n\n// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  var parts = line.substr(9).split(' ');\n  var parsed = {\n    payloadType: parseInt(parts.shift(), 10) // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  // legacy alias, got renamed back to channels in ORTC.\n  parsed.numChannels = parsed.channels;\n  return parsed;\n};\n\n// Generate an a=rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  var channels = codec.channels || codec.numChannels || 1;\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (channels !== 1 ? '/' + channels : '') + '\\r\\n';\n};\n\n// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n    uri: parts[1]\n  };\n};\n\n// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n          ? '/' + headerExtension.direction\n          : '') +\n      ' ' + headerExtension.uri + '\\r\\n';\n};\n\n// Parses an ftmp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  var parsed = {};\n  var kv;\n  var parts = line.substr(line.indexOf(' ') + 1).split(';');\n  for (var j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  var line = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    var params = [];\n    Object.keys(codec.parameters).forEach(function(param) {\n      if (codec.parameters[param]) {\n        params.push(param + '=' + codec.parameters[param]);\n      } else {\n        params.push(param);\n      }\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' ')\n  };\n};\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  var lines = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(function(fb) {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses an RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  var sp = line.indexOf(' ');\n  var parts = {\n    ssrc: parseInt(line.substr(7, sp - 7), 10)\n  };\n  var colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substr(sp + 1, colon - sp - 1);\n    parts.value = line.substr(colon + 1);\n  } else {\n    parts.attribute = line.substr(sp + 1);\n  }\n  return parts;\n};\n\nSDPUtils.parseSsrcGroup = function(line) {\n  var parts = line.substr(13).split(' ');\n  return {\n    semantics: parts.shift(),\n    ssrcs: parts.map(function(ssrc) {\n      return parseInt(ssrc, 10);\n    })\n  };\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n  var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n  if (mid) {\n    return mid.substr(6);\n  }\n};\n\nSDPUtils.parseFingerprint = function(line) {\n  var parts = line.substr(14).split(' ');\n  return {\n    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n    value: parts[1]\n  };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n      'a=fingerprint:');\n  // Note: a=setup line is ignored since we use the 'auto' role.\n  // Note2: 'algorithm' is not case sensitive except in Edge.\n  return {\n    role: 'auto',\n    fingerprints: lines.map(SDPUtils.parseFingerprint)\n  };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  var sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(function(fp) {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  // Search in session part, too.\n  lines = lines.concat(SDPUtils.splitLines(sessionpart));\n  var iceParameters = {\n    usernameFragment: lines.filter(function(line) {\n      return line.indexOf('a=ice-ufrag:') === 0;\n    })[0].substr(12),\n    password: lines.filter(function(line) {\n      return line.indexOf('a=ice-pwd:') === 0;\n    })[0].substr(10)\n  };\n  return iceParameters;\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  var description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: []\n  };\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    var pt = mline[i];\n    var rtpmapline = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      var codec = SDPUtils.parseRtpMap(rtpmapline);\n      var fmtps = SDPUtils.matchPrefix(\n          mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n          mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  var sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' UDP/TLS/RTP/SAVPF ';\n  sdp += caps.codecs.map(function(codec) {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(function(codec) {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  var maxptime = 0;\n  caps.codecs.forEach(function(codec) {\n    if (codec.maxptime > maxptime) {\n      maxptime = codec.maxptime;\n    }\n  });\n  if (maxptime > 0) {\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n  }\n  sdp += 'a=rtcp-mux\\r\\n';\n\n  if (caps.headerExtensions) {\n    caps.headerExtensions.forEach(function(extension) {\n      sdp += SDPUtils.writeExtmap(extension);\n    });\n  }\n  // FIXME: write fecMechanisms.\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  var encodingParameters = [];\n  var description = SDPUtils.parseRtpParameters(mediaSection);\n  var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n  .map(function(line) {\n    return SDPUtils.parseSsrcMedia(line);\n  })\n  .filter(function(parts) {\n    return parts.attribute === 'cname';\n  });\n  var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  var secondarySsrc;\n\n  var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n  .map(function(line) {\n    var parts = line.substr(17).split(' ');\n    return parts.map(function(part) {\n      return parseInt(part, 10);\n    });\n  });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(function(codec) {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      var encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10)\n      };\n      if (primarySsrc && secondarySsrc) {\n        encParam.rtx = {ssrc: secondarySsrc};\n      }\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: primarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      // use formula from JSEP to convert b=AS to TIAS value.\n      bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95\n          - (50 * 40 * 8);\n    } else {\n      bandwidth = undefined;\n    }\n    encodingParameters.forEach(function(params) {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n  var rtcpParameters = {};\n\n  // Gets the first SSRC. Note tha with RTX there might be multiple\n  // SSRCs.\n  var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n      .map(function(line) {\n        return SDPUtils.parseSsrcMedia(line);\n      })\n      .filter(function(obj) {\n        return obj.attribute === 'cname';\n      })[0];\n  if (remoteSsrc) {\n    rtcpParameters.cname = remoteSsrc.value;\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\n  }\n\n  // Edge uses the compound attribute instead of reducedSize\n  // compound is !reducedSize\n  var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n  rtcpParameters.reducedSize = rsize.length > 0;\n  rtcpParameters.compound = rsize.length === 0;\n\n  // parses the rtcp-mux attrіbute.\n  // Note that Edge does not support unmuxed RTCP.\n  var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n  rtcpParameters.mux = mux.length > 0;\n\n  return rtcpParameters;\n};\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n  var parts;\n  var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n  if (spec.length === 1) {\n    parts = spec[0].substr(7).split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n  var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n  .map(function(line) {\n    return SDPUtils.parseSsrcMedia(line);\n  })\n  .filter(function(msidParts) {\n    return msidParts.attribute === 'msid';\n  });\n  if (planB.length > 0) {\n    parts = planB[0].value.split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n};\n\n// Generate a session ID for SDP.\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n// recommends using a cryptographically random +ve 64-bit value\n// but right now this should be acceptable and within the right range\nSDPUtils.generateSessionId = function() {\n  return Math.random().toString().substr(2, 21);\n};\n\n// Write boilder plate for start of SDP\n// sessId argument is optional - if not supplied it will\n// be generated randomly\n// sessVersion is optional and defaults to 2\n// sessUser is optional and defaults to 'thisisadapterortc'\nSDPUtils.writeSessionBoilerplate = function(sessId, sessVer, sessUser) {\n  var sessionId;\n  var version = sessVer !== undefined ? sessVer : 2;\n  if (sessId) {\n    sessionId = sessId;\n  } else {\n    sessionId = SDPUtils.generateSessionId();\n  }\n  var user = sessUser || 'thisisadapterortc';\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=' + user + ' ' + sessionId + ' ' + version +\n        ' IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\nSDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n      transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n      transceiver.dtlsTransport.getLocalParameters(),\n      type === 'offer' ? 'actpass' : 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.direction) {\n    sdp += 'a=' + transceiver.direction + '\\r\\n';\n  } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    // spec.\n    var msid = 'msid:' + stream.id + ' ' +\n        transceiver.rtpSender.track.id + '\\r\\n';\n    sdp += 'a=' + msid;\n\n    // for Chrome.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  var lines = SDPUtils.splitLines(mediaSection);\n  for (var i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substr(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  return mline[0].substr(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n  return mediaSection.split(' ', 2)[1] === '0';\n};\n\nSDPUtils.parseMLine = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var parts = lines[0].substr(2).split(' ');\n  return {\n    kind: parts[0],\n    port: parseInt(parts[1], 10),\n    protocol: parts[2],\n    fmt: parts.slice(3).join(' ')\n  };\n};\n\nSDPUtils.parseOLine = function(mediaSection) {\n  var line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n  var parts = line.substr(2).split(' ');\n  return {\n    username: parts[0],\n    sessionId: parts[1],\n    sessionVersion: parseInt(parts[2], 10),\n    netType: parts[3],\n    addressType: parts[4],\n    address: parts[5]\n  };\n};\n\n// a very naive interpretation of a valid SDP.\nSDPUtils.isValidSDP = function(blob) {\n  if (typeof blob !== 'string' || blob.length === 0) {\n    return false;\n  }\n  var lines = SDPUtils.splitLines(blob);\n  for (var i = 0; i < lines.length; i++) {\n    if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {\n      return false;\n    }\n    // TODO: check the modifier a bit more.\n  }\n  return true;\n};\n\n// Expose public methods.\nif (typeof module === 'object') {\n  module.exports = SDPUtils;\n}\n","'use strict';\nmodule.exports = require('./lib/index');\n","'use strict';\n\nvar randomFromSeed = require('./random/random-from-seed');\n\nvar ORIGINAL = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-';\nvar alphabet;\nvar previousSeed;\n\nvar shuffled;\n\nfunction reset() {\n    shuffled = false;\n}\n\nfunction setCharacters(_alphabet_) {\n    if (!_alphabet_) {\n        if (alphabet !== ORIGINAL) {\n            alphabet = ORIGINAL;\n            reset();\n        }\n        return;\n    }\n\n    if (_alphabet_ === alphabet) {\n        return;\n    }\n\n    if (_alphabet_.length !== ORIGINAL.length) {\n        throw new Error('Custom alphabet for shortid must be ' + ORIGINAL.length + ' unique characters. You submitted ' + _alphabet_.length + ' characters: ' + _alphabet_);\n    }\n\n    var unique = _alphabet_.split('').filter(function(item, ind, arr){\n       return ind !== arr.lastIndexOf(item);\n    });\n\n    if (unique.length) {\n        throw new Error('Custom alphabet for shortid must be ' + ORIGINAL.length + ' unique characters. These characters were not unique: ' + unique.join(', '));\n    }\n\n    alphabet = _alphabet_;\n    reset();\n}\n\nfunction characters(_alphabet_) {\n    setCharacters(_alphabet_);\n    return alphabet;\n}\n\nfunction setSeed(seed) {\n    randomFromSeed.seed(seed);\n    if (previousSeed !== seed) {\n        reset();\n        previousSeed = seed;\n    }\n}\n\nfunction shuffle() {\n    if (!alphabet) {\n        setCharacters(ORIGINAL);\n    }\n\n    var sourceArray = alphabet.split('');\n    var targetArray = [];\n    var r = randomFromSeed.nextValue();\n    var characterIndex;\n\n    while (sourceArray.length > 0) {\n        r = randomFromSeed.nextValue();\n        characterIndex = Math.floor(r * sourceArray.length);\n        targetArray.push(sourceArray.splice(characterIndex, 1)[0]);\n    }\n    return targetArray.join('');\n}\n\nfunction getShuffled() {\n    if (shuffled) {\n        return shuffled;\n    }\n    shuffled = shuffle();\n    return shuffled;\n}\n\n/**\n * lookup shuffled letter\n * @param index\n * @returns {string}\n */\nfunction lookup(index) {\n    var alphabetShuffled = getShuffled();\n    return alphabetShuffled[index];\n}\n\nfunction get () {\n  return alphabet || ORIGINAL;\n}\n\nmodule.exports = {\n    get: get,\n    characters: characters,\n    seed: setSeed,\n    lookup: lookup,\n    shuffled: getShuffled\n};\n","'use strict';\n\nvar generate = require('./generate');\nvar alphabet = require('./alphabet');\n\n// Ignore all milliseconds before a certain time to reduce the size of the date entropy without sacrificing uniqueness.\n// This number should be updated every year or so to keep the generated id short.\n// To regenerate `new Date() - 0` and bump the version. Always bump the version!\nvar REDUCE_TIME = 1459707606518;\n\n// don't change unless we change the algos or REDUCE_TIME\n// must be an integer and less than 16\nvar version = 6;\n\n// Counter is used when shortid is called multiple times in one second.\nvar counter;\n\n// Remember the last time shortid was called in case counter is needed.\nvar previousSeconds;\n\n/**\n * Generate unique id\n * Returns string id\n */\nfunction build(clusterWorkerId) {\n    var str = '';\n\n    var seconds = Math.floor((Date.now() - REDUCE_TIME) * 0.001);\n\n    if (seconds === previousSeconds) {\n        counter++;\n    } else {\n        counter = 0;\n        previousSeconds = seconds;\n    }\n\n    str = str + generate(version);\n    str = str + generate(clusterWorkerId);\n    if (counter > 0) {\n        str = str + generate(counter);\n    }\n    str = str + generate(seconds);\n    return str;\n}\n\nmodule.exports = build;\n","'use strict';\n\nvar alphabet = require('./alphabet');\nvar random = require('./random/random-byte');\nvar format = require('nanoid/format');\n\nfunction generate(number) {\n    var loopCounter = 0;\n    var done;\n\n    var str = '';\n\n    while (!done) {\n        str = str + format(random, alphabet.get(), 1);\n        done = number < (Math.pow(16, loopCounter + 1 ) );\n        loopCounter++;\n    }\n    return str;\n}\n\nmodule.exports = generate;\n","'use strict';\n\nvar alphabet = require('./alphabet');\nvar build = require('./build');\nvar isValid = require('./is-valid');\n\n// if you are using cluster or multiple servers use this to make each instance\n// has a unique value for worker\n// Note: I don't know if this is automatically set when using third\n// party cluster solutions such as pm2.\nvar clusterWorkerId = require('./util/cluster-worker-id') || 0;\n\n/**\n * Set the seed.\n * Highly recommended if you don't want people to try to figure out your id schema.\n * exposed as shortid.seed(int)\n * @param seed Integer value to seed the random alphabet.  ALWAYS USE THE SAME SEED or you might get overlaps.\n */\nfunction seed(seedValue) {\n    alphabet.seed(seedValue);\n    return module.exports;\n}\n\n/**\n * Set the cluster worker or machine id\n * exposed as shortid.worker(int)\n * @param workerId worker must be positive integer.  Number less than 16 is recommended.\n * returns shortid module so it can be chained.\n */\nfunction worker(workerId) {\n    clusterWorkerId = workerId;\n    return module.exports;\n}\n\n/**\n *\n * sets new characters to use in the alphabet\n * returns the shuffled alphabet\n */\nfunction characters(newCharacters) {\n    if (newCharacters !== undefined) {\n        alphabet.characters(newCharacters);\n    }\n\n    return alphabet.shuffled();\n}\n\n/**\n * Generate unique id\n * Returns string id\n */\nfunction generate() {\n  return build(clusterWorkerId);\n}\n\n// Export all other functions as properties of the generate function\nmodule.exports = generate;\nmodule.exports.generate = generate;\nmodule.exports.seed = seed;\nmodule.exports.worker = worker;\nmodule.exports.characters = characters;\nmodule.exports.isValid = isValid;\n","'use strict';\nvar alphabet = require('./alphabet');\n\nfunction isShortId(id) {\n    if (!id || typeof id !== 'string' || id.length < 6 ) {\n        return false;\n    }\n\n    var nonAlphabetic = new RegExp('[^' +\n      alphabet.get().replace(/[|\\\\{}()[\\]^$+*?.-]/g, '\\\\$&') +\n    ']');\n    return !nonAlphabetic.test(id);\n}\n\nmodule.exports = isShortId;\n","'use strict';\n\nvar crypto = typeof window === 'object' && (window.crypto || window.msCrypto); // IE 11 uses window.msCrypto\n\nvar randomByte;\n\nif (!crypto || !crypto.getRandomValues) {\n    randomByte = function(size) {\n        var bytes = [];\n        for (var i = 0; i < size; i++) {\n            bytes.push(Math.floor(Math.random() * 256));\n        }\n        return bytes;\n    };\n} else {\n    randomByte = function(size) {\n        return crypto.getRandomValues(new Uint8Array(size));\n    };\n}\n\nmodule.exports = randomByte;\n","'use strict';\n\n// Found this seed-based random generator somewhere\n// Based on The Central Randomizer 1.3 (C) 1997 by Paul Houle (houle@msc.cornell.edu)\n\nvar seed = 1;\n\n/**\n * return a random number based on a seed\n * @param seed\n * @returns {number}\n */\nfunction getNextValue() {\n    seed = (seed * 9301 + 49297) % 233280;\n    return seed/(233280.0);\n}\n\nfunction setSeed(_seed_) {\n    seed = _seed_;\n}\n\nmodule.exports = {\n    nextValue: getNextValue,\n    seed: setSeed\n};\n","'use strict';\n\nmodule.exports = 0;\n","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.Twig=t():e.Twig=t()}(global,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=27)}([function(e,t){e.exports=require(\"path\")},function(e,t,r){\"use strict\";e.exports=function(){var e=arguments,t=0,r=function(e,t,r,n){r||(r=\" \");var o=e.length>=t?\"\":new Array(1+t-e.length>>>0).join(r);return n?e+o:o+e},n=function(e,t,n,o,i,s){var a=o-e.length;return a>0&&(e=n||!i?r(e,o,s,n):[e.slice(0,t.length),r(\"\",a,\"0\",!0),e.slice(t.length)].join(\"\")),e},o=function(e,t,o,i,s,a,p){var c=e>>>0;return e=(o=o&&c&&{2:\"0b\",8:\"0\",16:\"0x\"}[t]||\"\")+r(c.toString(t),a||0,\"0\",!1),n(e,o,i,s,p)},i=function(e,t,r,o,i,s){return null!==o&&void 0!==o&&(e=e.slice(0,o)),n(e,\"\",t,r,i,s)};return e[t++].replace(/%%|%(\\d+\\$)?([-+'#0 ]*)(\\*\\d+\\$|\\*|\\d+)?(?:\\.(\\*\\d+\\$|\\*|\\d+))?([scboxXuideEfFgG])/g,function(s,a,p,c,l,u){var f,h,y,d,g;if(\"%%\"===s)return\"%\";var m,x=!1,v=\"\",b=!1,w=!1,k=\" \",_=p.length;for(m=0;m<_;m++)switch(p.charAt(m)){case\" \":v=\" \";break;case\"+\":v=\"+\";break;case\"-\":x=!0;break;case\"'\":k=p.charAt(m+1);break;case\"0\":b=!0,k=\"0\";break;case\"#\":w=!0}if((c=c?\"*\"===c?+e[t++]:\"*\"===c.charAt(0)?+e[c.slice(1,-1)]:+c:0)<0&&(c=-c,x=!0),!isFinite(c))throw new Error(\"sprintf: (minimum-)width must be finite\");switch(l=l?\"*\"===l?+e[t++]:\"*\"===l.charAt(0)?+e[l.slice(1,-1)]:+l:\"fFeE\".indexOf(u)>-1?6:\"d\"===u?0:void 0,g=a?e[a.slice(0,-1)]:e[t++],u){case\"s\":return i(g+\"\",x,c,l,b,k);case\"c\":return i(String.fromCharCode(+g),x,c,l,b);case\"b\":return o(g,2,w,x,c,l,b);case\"o\":return o(g,8,w,x,c,l,b);case\"x\":return o(g,16,w,x,c,l,b);case\"X\":return o(g,16,w,x,c,l,b).toUpperCase();case\"u\":return o(g,10,w,x,c,l,b);case\"i\":case\"d\":return f=+g||0,g=(h=(f=Math.round(f-f%1))<0?\"-\":v)+r(String(Math.abs(f)),l,\"0\",!1),n(g,h,x,c,b);case\"e\":case\"E\":case\"f\":case\"F\":case\"g\":case\"G\":return h=(f=+g)<0?\"-\":v,y=[\"toExponential\",\"toFixed\",\"toPrecision\"][\"efg\".indexOf(u.toLowerCase())],d=[\"toString\",\"toUpperCase\"][\"eEfFgG\".indexOf(u)%2],g=h+Math.abs(f)[y](l),n(g,h,x,c,b)[d]();default:return s}})}},function(e,t){e.exports=function(e){\"use strict\";return e.exports={VERSION:e.VERSION},e.exports.twig=function(t){var r=t.id,n={strict_variables:t.strict_variables||!1,autoescape:null!=t.autoescape&&t.autoescape||!1,allowInlineIncludes:t.allowInlineIncludes||!1,rethrow:t.rethrow||!1,namespaces:t.namespaces};if(e.cache&&r&&e.validateId(r),void 0!==t.debug&&(e.debug=t.debug),void 0!==t.trace&&(e.trace=t.trace),void 0!==t.data)return e.Templates.parsers.twig({data:t.data,path:t.hasOwnProperty(\"path\")?t.path:void 0,module:t.module,id:r,options:n});if(void 0!==t.ref){if(void 0!==t.id)throw new e.Error(\"Both ref and id cannot be set on a twig.js template.\");return e.Templates.load(t.ref)}if(void 0!==t.method){if(!e.Templates.isRegisteredLoader(t.method))throw new e.Error('Loader for \"'+t.method+'\" is not defined.');return e.Templates.loadRemote(t.name||t.href||t.path||r||void 0,{id:r,method:t.method,parser:t.parser||\"twig\",base:t.base,module:t.module,precompiled:t.precompiled,async:t.async,options:n},t.load,t.error)}return void 0!==t.href?e.Templates.loadRemote(t.href,{id:r,method:\"ajax\",parser:t.parser||\"twig\",base:t.base,module:t.module,precompiled:t.precompiled,async:t.async,options:n},t.load,t.error):void 0!==t.path?e.Templates.loadRemote(t.path,{id:r,method:\"fs\",parser:t.parser||\"twig\",base:t.base,module:t.module,precompiled:t.precompiled,async:t.async,options:n},t.load,t.error):void 0},e.exports.extendFilter=function(t,r){e.filter.extend(t,r)},e.exports.extendFunction=function(t,r){e._function.extend(t,r)},e.exports.extendTest=function(t,r){e.test.extend(t,r)},e.exports.extendTag=function(t){e.logic.extend(t)},e.exports.extend=function(t){t(e)},e.exports.compile=function(t,r){var n,o=r.filename,i=r.filename;return n=new e.Template({data:t,path:i,id:o,options:r.settings[\"twig options\"]}),function(e){return n.render(e)}},e.exports.renderFile=function(t,r,n){\"function\"==typeof r&&(n=r,r={});var o=(r=r||{}).settings||{},i=o[\"twig options\"],s={path:t,base:o.views,load:function(e){i&&i.allow_async?e.renderAsync(r).then(function(e){n(null,e)},n):n(null,\"\"+e.render(r))}};if(i)for(var a in i)i.hasOwnProperty(a)&&(s[a]=i[a]);e.exports.twig(s)},e.exports.__express=e.exports.renderFile,e.exports.cache=function(t){e.cache=t},e.exports.path=e.path,e.exports.filters=e.filters,e.exports.Promise=e.Promise,e}},function(e,t){e.exports=function(e){\"use strict\";var t=1,r=2;return e.parseAsync=function(t,r){return e.parse.call(this,t,r,!0)},e.expression.parseAsync=function(t,r,n){return e.expression.parse.call(this,t,r,n,!0)},e.logic.parseAsync=function(t,r,n){return e.logic.parse.call(this,t,r,n,!0)},e.Template.prototype.renderAsync=function(e,t){return this.render(e,t,!0)},e.async={},e.isPromise=function(e){return e&&e.then&&\"function\"==typeof e.then},e.async.potentiallyAsync=function(t,r,n){return r?e.Promise.resolve(n.call(t)):function(t,r,n){var o=n.call(t),i=null,s=!0;if(!e.isPromise(o))return o;if(o.then(function(e){o=e,s=!1}).catch(function(e){i=e}),null!==i)throw i;if(s)throw new e.Error(\"You are using Twig.js in sync mode in combination with async extensions.\");return o}(t,0,n)},e.Thenable=function(e,t,r){this.then=e,this._value=r?t:null,this._state=r||0},e.Thenable.prototype.catch=function(e){return this._state==t?this:this.then(null,e)},e.Thenable.resolvedThen=function(t){try{return e.Promise.resolve(t(this._value))}catch(t){return e.Promise.reject(t)}},e.Thenable.rejectedThen=function(t,r){if(!r||\"function\"!=typeof r)return this;var n=this._value,o=e.attempt(function(){return r(n)},e.Promise.reject);return e.Promise.resolve(o)},e.Promise=function(n){var o=0,i=null,s=function(e,t){o=e,i=t};return function(e,t,r){try{e(t,r)}catch(e){r(e)}}(n,function(e){s(t,e)},function(e){s(r,e)}),o===t?e.Promise.resolve(i):o===r?e.Promise.reject(i):(s=e.FullPromise()).promise},e.FullPromise=function(){var r=null;function n(e){e(a._value)}function o(e,t){t(a._value)}var i=function(e,t){r=function(e,t,r){var n=[t,r,-2];return e?-2==e[2]?e=[e,n]:e.push(n):e=n,e}(r,e,t)};function s(s,p){a._state||(a._value=p,a._state=s,i=s==t?n:o,r&&(-2===r[2]&&(i(r[0],r[1]),r=null),e.forEach(r,function(e){i(e[0],e[1])}),r=null))}var a=new e.Thenable(function(r,n){var o=\"function\"==typeof r;if(a._state==t&&!o)return e.Promise.resolve(a._value);if(a._state===t)return e.attempt(function(){return e.Promise.resolve(r(a._value))},e.Promise.reject);var s=\"function\"==typeof n;return e.Promise(function(t,a){i(o?function(n){e.attempt(function(){t(r(n))},a)}:t,s?function(r){e.attempt(function(){t(n(r))},a)}:a)})});return s.promise=a,s},e.Promise.defaultResolved=new e.Thenable(e.Thenable.resolvedThen,void 0,t),e.Promise.emptyStringResolved=new e.Thenable(e.Thenable.resolvedThen,\"\",t),e.Promise.resolve=function(r){return arguments.length<1||void 0===r?e.Promise.defaultResolved:e.isPromise(r)?r:\"\"===r?e.Promise.emptyStringResolved:new e.Thenable(e.Thenable.resolvedThen,r,t)},e.Promise.reject=function(t){return new e.Thenable(e.Thenable.rejectedThen,t,r)},e.Promise.all=function(r){var n=new Array(r.length);return e.async.forEach(r,function(r,o){if(e.isPromise(r)){if(r._state!=t)return r.then(function(e){n[o]=e});n[o]=r._value}else n[o]=r}).then(function(){return n})},e.async.forEach=function(r,n){var o=r.length,i=0;return function s(){var a=null;do{if(i==o)return e.Promise.resolve();a=n(r[i],i),i++}while(!a||!e.isPromise(a)||a._state==t);return a.then(s)}()},e}},function(e,t){e.exports=function(e){\"use strict\";return e.tests={empty:function(e){if(null===e||void 0===e)return!0;if(\"number\"==typeof e)return!1;if(e.length&&e.length>0)return!1;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},odd:function(e){return e%2==1},even:function(e){return e%2==0},divisibleby:function(e,t){return e%t[0]==0},defined:function(e){return void 0!==e},none:function(e){return null===e},null:function(e){return this.none(e)},\"same as\":function(e,t){return e===t[0]},sameas:function(t,r){return console.warn(\"`sameas` is deprecated use `same as`\"),e.tests[\"same as\"](t,r)},iterable:function(t){return t&&(e.lib.is(\"Array\",t)||e.lib.is(\"Object\",t))}},e.test=function(t,r,n){if(!e.tests[t])throw\"Test \"+t+\" is not defined.\";return e.tests[t](r,n)},e.test.extend=function(t,r){e.tests[t]=r},e}},function(e,t,r){e.exports=function(e){\"use strict\";e.path={};var t=/.::/,n=/@/;return e.path.parsePath=function(r,o){var i=null,s=r.options.namespaces,a=o||\"\";if(s&&\"object\"==typeof s)for(i in s){if(t.test(a))return a=a.replace(i+\"::\",s[i]);if(n.test(a))return a=a.replace(\"@\"+i,s[i])}return e.path.relativePath(r,a)},e.path.relativePath=function(t,n){var o,i,s,a=\"/\",p=[];n=n||\"\";if(t.url)o=void 0!==t.base?t.base+(\"/\"===t.base.charAt(t.base.length-1)?\"\":\"/\"):t.url;else if(t.path){var c=r(0),l=c.sep||a,u=new RegExp(\"^\\\\.{1,2}\"+l.replace(\"\\\\\",\"\\\\\\\\\"));n=n.replace(/\\//g,l),void 0!==t.base&&null==n.match(u)?(n=n.replace(t.base,\"\"),o=t.base+l):o=c.normalize(t.path),o=o.replace(l+l,l),a=l}else{if(!t.name&&!t.id||!t.method||\"fs\"===t.method||\"ajax\"===t.method)throw new e.Error(\"Cannot extend an inline template.\");o=t.base||t.name||t.id}for((i=o.split(a)).pop(),i=i.concat(n.split(a));i.length>0;)\".\"==(s=i.shift())||(\"..\"==s&&p.length>0&&\"..\"!=p[p.length-1]?p.pop():p.push(s));return p.join(a)},e}},function(e,t){e.exports=function(e){\"use strict\";e.Templates.registerParser(\"twig\",function(t){return new e.Template(t)})}},function(e,t){e.exports=function(e){\"use strict\";e.Templates.registerParser(\"source\",function(e){return e.data||\"\"})}},function(e,t){e.exports=function(e){\"use strict\";for(e.logic={},e.logic.type={if_:\"Twig.logic.type.if\",endif:\"Twig.logic.type.endif\",for_:\"Twig.logic.type.for\",endfor:\"Twig.logic.type.endfor\",else_:\"Twig.logic.type.else\",elseif:\"Twig.logic.type.elseif\",set:\"Twig.logic.type.set\",setcapture:\"Twig.logic.type.setcapture\",endset:\"Twig.logic.type.endset\",filter:\"Twig.logic.type.filter\",endfilter:\"Twig.logic.type.endfilter\",shortblock:\"Twig.logic.type.shortblock\",block:\"Twig.logic.type.block\",endblock:\"Twig.logic.type.endblock\",extends_:\"Twig.logic.type.extends\",use:\"Twig.logic.type.use\",include:\"Twig.logic.type.include\",spaceless:\"Twig.logic.type.spaceless\",endspaceless:\"Twig.logic.type.endspaceless\",macro:\"Twig.logic.type.macro\",endmacro:\"Twig.logic.type.endmacro\",import_:\"Twig.logic.type.import\",from:\"Twig.logic.type.from\",embed:\"Twig.logic.type.embed\",endembed:\"Twig.logic.type.endembed\",with:\"Twig.logic.type.with\",endwith:\"Twig.logic.type.endwith\"},e.logic.definitions=[{type:e.logic.type.if_,regex:/^if\\s+([\\s\\S]+)$/,next:[e.logic.type.else_,e.logic.type.elseif,e.logic.type.endif],open:!0,compile:function(t){var r=t.match[1];return t.stack=e.expression.compile.call(this,{type:e.expression.type.expression,value:r}).stack,delete t.match,t},parse:function(t,r,n){var o=this;return e.expression.parseAsync.call(this,t.stack,r).then(function(i){return n=!0,e.lib.boolval(i)?(n=!1,e.parseAsync.call(o,t.output,r)):\"\"}).then(function(e){return{chain:n,output:e}})}},{type:e.logic.type.elseif,regex:/^elseif\\s+([^\\s].*)$/,next:[e.logic.type.else_,e.logic.type.elseif,e.logic.type.endif],open:!1,compile:function(t){var r=t.match[1];return t.stack=e.expression.compile.call(this,{type:e.expression.type.expression,value:r}).stack,delete t.match,t},parse:function(t,r,n){var o=this;return e.expression.parseAsync.call(this,t.stack,r).then(function(i){return n&&e.lib.boolval(i)?(n=!1,e.parseAsync.call(o,t.output,r)):\"\"}).then(function(e){return{chain:n,output:e}})}},{type:e.logic.type.else_,regex:/^else$/,next:[e.logic.type.endif,e.logic.type.endfor],open:!1,parse:function(t,r,n){var o=e.Promise.resolve(\"\");return n&&(o=e.parseAsync.call(this,t.output,r)),o.then(function(e){return{chain:n,output:e}})}},{type:e.logic.type.endif,regex:/^endif$/,next:[],open:!1},{type:e.logic.type.for_,regex:/^for\\s+([a-zA-Z0-9_,\\s]+)\\s+in\\s+([\\S\\s]+?)(?:\\s+if\\s+([^\\s].*))?$/,next:[e.logic.type.else_,e.logic.type.endfor],open:!0,compile:function(t){var r=t.match[1],n=t.match[2],o=t.match[3],i=null;if(t.key_var=null,t.value_var=null,r.indexOf(\",\")>=0){if(2!==(i=r.split(\",\")).length)throw new e.Error(\"Invalid expression in for loop: \"+r);t.key_var=i[0].trim(),t.value_var=i[1].trim()}else t.value_var=r;return t.expression=e.expression.compile.call(this,{type:e.expression.type.expression,value:n}).stack,o&&(t.conditional=e.expression.compile.call(this,{type:e.expression.type.expression,value:o}).stack),delete t.match,t},parse:function(t,r,n){var o,i,s=[],a=0,p=this,c=t.conditional,l=function(n,i){var l=e.ChildContext(r);return l[t.value_var]=i,t.key_var&&(l[t.key_var]=n),l.loop=function(e,t){var n=void 0!==c;return{index:e+1,index0:e,revindex:n?void 0:t-e,revindex0:n?void 0:t-e-1,first:0===e,last:n?void 0:e===t-1,length:n?void 0:t,parent:r}}(a,o),(void 0===c?e.Promise.resolve(!0):e.expression.parseAsync.call(p,c,l)).then(function(r){if(r)return e.parseAsync.call(p,t.output,l).then(function(e){s.push(e),a+=1})}).then(function(){delete l.loop,delete l[t.value_var],delete l[t.key_var],e.merge(r,l,!0)})};return e.expression.parseAsync.call(this,t.expression,r).then(function(t){return e.lib.isArray(t)?(o=t.length,e.async.forEach(t,function(e){return l(a,e)})):e.lib.is(\"Object\",t)?(i=void 0!==t._keys?t._keys:Object.keys(t),o=i.length,e.async.forEach(i,function(e){if(\"_keys\"!==e)return l(e,t[e])})):void 0}).then(function(){return{chain:0===s.length,output:e.output.call(p,s)}})}},{type:e.logic.type.endfor,regex:/^endfor$/,next:[],open:!1},{type:e.logic.type.set,regex:/^set\\s+([a-zA-Z0-9_,\\s]+)\\s*=\\s*([\\s\\S]+)$/,next:[],open:!0,compile:function(t){var r=t.match[1].trim(),n=t.match[2],o=e.expression.compile.call(this,{type:e.expression.type.expression,value:n}).stack;return t.key=r,t.expression=o,delete t.match,t},parse:function(t,r,n){var o=t.key;return e.expression.parseAsync.call(this,t.expression,r).then(function(t){return t===r&&(t=e.lib.copy(t)),r[o]=t,{chain:n,context:r}})}},{type:e.logic.type.setcapture,regex:/^set\\s+([a-zA-Z0-9_,\\s]+)$/,next:[e.logic.type.endset],open:!0,compile:function(e){var t=e.match[1].trim();return e.key=t,delete e.match,e},parse:function(t,r,n){var o=this,i=t.key;return e.parseAsync.call(this,t.output,r).then(function(e){return o.context[i]=e,r[i]=e,{chain:n,context:r}})}},{type:e.logic.type.endset,regex:/^endset$/,next:[],open:!1},{type:e.logic.type.filter,regex:/^filter\\s+(.+)$/,next:[e.logic.type.endfilter],open:!0,compile:function(t){var r=\"|\"+t.match[1].trim();return t.stack=e.expression.compile.call(this,{type:e.expression.type.expression,value:r}).stack,delete t.match,t},parse:function(t,r,n){var o=this;return e.parseAsync.call(this,t.output,r).then(function(n){var i=[{type:e.expression.type.string,value:n}].concat(t.stack);return e.expression.parseAsync.call(o,i,r)}).then(function(e){return{chain:n,output:e}})}},{type:e.logic.type.endfilter,regex:/^endfilter$/,next:[],open:!1},{type:e.logic.type.block,regex:/^block\\s+([a-zA-Z0-9_]+)$/,next:[e.logic.type.endblock],open:!0,compile:function(e){return e.block=e.match[1].trim(),delete e.match,e},parse:function(t,r,n){var o,i=this,s=e.Promise.resolve(),a=e.indexOf(this.importedBlocks,t.block)>-1,p=this.blocks[t.block]&&e.indexOf(this.blocks[t.block],e.placeholders.parent)>-1;return e.forEach(this.parseStack,function(r){r.type==e.logic.type.for_&&(t.overwrite=!0)}),(void 0===this.blocks[t.block]||a||p||t.overwrite)&&(s=(s=t.expression?e.expression.parseAsync.call(this,t.output,r).then(function(t){return e.expression.parseAsync.call(i,{type:e.expression.type.string,value:t},r)}):e.parseAsync.call(this,t.output,r).then(function(t){return e.expression.parseAsync.call(i,{type:e.expression.type.string,value:t},r)})).then(function(r){a&&i.importedBlocks.splice(i.importedBlocks.indexOf(t.block),1),i.blocks[t.block]=p?e.Markup(i.blocks[t.block].replace(e.placeholders.parent,r)):r,i.originalBlockTokens[t.block]={type:t.type,block:t.block,output:t.output,overwrite:!0}})),s.then(function(){return o=i.child.blocks[t.block]?i.child.blocks[t.block]:i.blocks[t.block],{chain:n,output:o}})}},{type:e.logic.type.shortblock,regex:/^block\\s+([a-zA-Z0-9_]+)\\s+(.+)$/,next:[],open:!0,compile:function(t){return t.expression=t.match[2].trim(),t.output=e.expression.compile({type:e.expression.type.expression,value:t.expression}).stack,t.block=t.match[1].trim(),delete t.match,t},parse:function(t,r,n){for(var o=new Array(arguments.length),i=arguments.length;i-- >0;)o[i]=arguments[i];return e.logic.handler[e.logic.type.block].parse.apply(this,o)}},{type:e.logic.type.endblock,regex:/^endblock(?:\\s+([a-zA-Z0-9_]+))?$/,next:[],open:!1},{type:e.logic.type.extends_,regex:/^extends\\s+(.+)$/,next:[],open:!0,compile:function(t){var r=t.match[1].trim();return delete t.match,t.stack=e.expression.compile.call(this,{type:e.expression.type.expression,value:r}).stack,t},parse:function(t,r,n){var o=this,i=e.ChildContext(r);return e.expression.parseAsync.call(this,t.stack,r).then(function(t){return o.extend=t,(t instanceof e.Template?t:o.importFile(t)).renderAsync(i)}).then(function(){return e.lib.extend(r,i),{chain:n,output:\"\"}})}},{type:e.logic.type.use,regex:/^use\\s+(.+)$/,next:[],open:!0,compile:function(t){var r=t.match[1].trim();return delete t.match,t.stack=e.expression.compile.call(this,{type:e.expression.type.expression,value:r}).stack,t},parse:function(t,r,n){var o=this;return e.expression.parseAsync.call(this,t.stack,r).then(function(e){return o.importBlocks(e),{chain:n,output:\"\"}})}},{type:e.logic.type.include,regex:/^include\\s+(.+?)(?:\\s|$)(ignore missing(?:\\s|$))?(?:with\\s+([\\S\\s]+?))?(?:\\s|$)(only)?$/,next:[],open:!0,compile:function(t){var r=t.match,n=r[1].trim(),o=void 0!==r[2],i=r[3],s=void 0!==r[4]&&r[4].length;return delete t.match,t.only=s,t.ignoreMissing=o,t.stack=e.expression.compile.call(this,{type:e.expression.type.expression,value:n}).stack,void 0!==i&&(t.withStack=e.expression.compile.call(this,{type:e.expression.type.expression,value:i.trim()}).stack),t},parse:function(t,r,n){var o=t.only?{}:e.ChildContext(r),i=t.ignoreMissing,s=this,a={chain:n,output:\"\"};return(void 0!==t.withStack?e.expression.parseAsync.call(this,t.withStack,r).then(function(t){e.lib.extend(o,t)}):e.Promise.resolve()).then(function(){return e.expression.parseAsync.call(s,t.stack,r)}).then(function(t){if(t instanceof e.Template)return t.renderAsync(o);try{return s.importFile(t).renderAsync(o)}catch(e){if(i)return\"\";throw e}}).then(function(e){return\"\"!==e&&(a.output=e),a})}},{type:e.logic.type.spaceless,regex:/^spaceless$/,next:[e.logic.type.endspaceless],open:!0,parse:function(t,r,n){return e.parseAsync.call(this,t.output,r).then(function(t){var r=t.replace(/>\\s+</g,\"><\").trim();return r=e.Markup(r),{chain:n,output:r}})}},{type:e.logic.type.endspaceless,regex:/^endspaceless$/,next:[],open:!1},{type:e.logic.type.macro,regex:/^macro\\s+([a-zA-Z0-9_]+)\\s*\\(\\s*((?:[a-zA-Z0-9_]+(?:\\s*=\\s*([\\s\\S]+))?(?:,\\s*)?)*)\\s*\\)$/,next:[e.logic.type.endmacro],open:!0,compile:function(t){var r=t.match[1],n=t.match[2].split(/\\s*,\\s*/),o=n.map(function(e){return e.split(/\\s*=\\s*/)[0]}),i=o.length;if(i>1)for(var s={},a=0;a<i;a++){var p=o[a];if(s[p])throw new e.Error(\"Duplicate arguments for parameter: \"+p);s[p]=1}return t.macroName=r,t.parameters=o,t.defaults=n.reduce(function(t,r){var n=r.split(/\\s*=\\s*/),o=n[0],i=n[1];return t[o]=i?e.expression.compile.call(this,{type:e.expression.type.expression,value:i}).stack:void 0,t},{}),delete t.match,t},parse:function(t,r,n){var o=this;return this.macros[t.macroName]=function(){var n={_self:o.macros},i=Array.prototype.slice.call(arguments);return e.async.forEach(t.parameters,function(o,s){return void 0!==i[s]?(n[o]=i[s],!0):void 0!==t.defaults[o]?e.expression.parseAsync.call(this,t.defaults[o],r).then(function(t){return n[o]=t,e.Promise.resolve()}):(n[o]=void 0,!0)}).then(function(){return e.parseAsync.call(o,t.output,n)})},{chain:n,output:\"\"}}},{type:e.logic.type.endmacro,regex:/^endmacro$/,next:[],open:!1},{type:e.logic.type.import_,regex:/^import\\s+(.+)\\s+as\\s+([a-zA-Z0-9_]+)$/,next:[],open:!0,compile:function(t){var r=t.match[1].trim(),n=t.match[2].trim();return delete t.match,t.expression=r,t.contextName=n,t.stack=e.expression.compile.call(this,{type:e.expression.type.expression,value:r}).stack,t},parse:function(t,r,n){var o=this,i={chain:n,output:\"\"};return\"_self\"===t.expression?(r[t.contextName]=this.macros,e.Promise.resolve(i)):e.expression.parseAsync.call(this,t.stack,r).then(function(e){return o.importFile(e||t.expression)}).then(function(e){return r[t.contextName]=e.renderAsync({},{output:\"macros\"}),i})}},{type:e.logic.type.from,regex:/^from\\s+(.+)\\s+import\\s+([a-zA-Z0-9_, ]+)$/,next:[],open:!0,compile:function(t){for(var r=t.match[1].trim(),n=t.match[2].trim().split(/\\s*,\\s*/),o={},i=0;i<n.length;i++){var s=n[i],a=s.match(/^([a-zA-Z0-9_]+)\\s+as\\s+([a-zA-Z0-9_]+)$/);a?o[a[1].trim()]=a[2].trim():s.match(/^([a-zA-Z0-9_]+)$/)&&(o[s]=s)}return delete t.match,t.expression=r,t.macroNames=o,t.stack=e.expression.compile.call(this,{type:e.expression.type.expression,value:r}).stack,t},parse:function(t,r,n){var o=this,i=e.Promise.resolve(this.macros);return\"_self\"!==t.expression&&(i=e.expression.parseAsync.call(this,t.stack,r).then(function(e){return o.importFile(e||t.expression)}).then(function(e){return e.renderAsync({},{output:\"macros\"})})),i.then(function(e){for(var o in t.macroNames)e.hasOwnProperty(o)&&(r[t.macroNames[o]]=e[o]);return{chain:n,output:\"\"}})}},{type:e.logic.type.embed,regex:/^embed\\s+(.+?)(?:\\s+(ignore missing))?(?:\\s+with\\s+([\\S\\s]+?))?(?:\\s+(only))?$/,next:[e.logic.type.endembed],open:!0,compile:function(t){var r=t.match,n=r[1].trim(),o=void 0!==r[2],i=r[3],s=void 0!==r[4]&&r[4].length;return delete t.match,t.only=s,t.ignoreMissing=o,t.stack=e.expression.compile.call(this,{type:e.expression.type.expression,value:n}).stack,void 0!==i&&(t.withStack=e.expression.compile.call(this,{type:e.expression.type.expression,value:i.trim()}).stack),t},parse:function(t,r,n){var o,i,s={},a=this,p=e.Promise.resolve();if(!t.only)for(o in r)r.hasOwnProperty(o)&&(s[o]=r[o]);return void 0!==t.withStack&&(p=e.expression.parseAsync.call(this,t.withStack,r).then(function(e){for(o in e)e.hasOwnProperty(o)&&(s[o]=e[o])})),p.then(function(){return p=null,e.expression.parseAsync.call(a,t.stack,s)}).then(function(r){if(r instanceof e.Template)i=r;else try{i=a.importFile(r)}catch(e){if(t.ignoreMissing)return\"\";throw a=null,e}return a._blocks=e.lib.copy(a.blocks),a.blocks={},e.parseAsync.call(a,t.output,s).then(function(){return i.renderAsync(s,{blocks:a.blocks})})}).then(function(t){return a.blocks=e.lib.copy(a._blocks),{chain:n,output:t}})}},{type:e.logic.type.endembed,regex:/^endembed$/,next:[],open:!1},{type:e.logic.type.with,regex:/^(?:with\\s+([\\S\\s]+?))(?:\\s|$)(only)?$/,next:[e.logic.type.endwith],open:!0,compile:function(t){var r=t.match,n=r[1],o=void 0!==r[2]&&r[2].length;return delete t.match,t.only=o,void 0!==n&&(t.withStack=e.expression.compile.call(this,{type:e.expression.type.expression,value:n.trim()}).stack),t},parse:function(t,r,n){var o,i={},s=this,a=e.Promise.resolve();return t.only||(i=e.ChildContext(r)),void 0!==t.withStack&&(a=e.expression.parseAsync.call(this,t.withStack,r).then(function(e){for(o in e)e.hasOwnProperty(o)&&(i[o]=e[o])})),a.then(function(){return e.parseAsync.call(s,t.output,i)}).then(function(e){return{chain:n,output:e}})}},{type:e.logic.type.endwith,regex:/^endwith$/,next:[],open:!1}],e.logic.handler={},e.logic.extendType=function(t,r){r=r||\"Twig.logic.type\"+t,e.logic.type[t]=r},e.logic.extend=function(t){if(!t.type)throw new e.Error(\"Unable to extend logic definition. No type provided for \"+t);e.logic.extendType(t.type),e.logic.handler[t.type]=t};e.logic.definitions.length>0;)e.logic.extend(e.logic.definitions.shift());return e.logic.compile=function(t){var r=t.value.trim(),n=e.logic.tokenize.call(this,r),o=e.logic.handler[n.type];return o.compile&&(n=o.compile.call(this,n),e.log.trace(\"Twig.logic.compile: \",\"Compiled logic token to \",n)),n},e.logic.tokenize=function(t){var r=null,n=null,o=null,i=null,s=null,a=null,p=null;for(r in t=t.trim(),e.logic.handler)for(n=e.logic.handler[r].type,i=o=e.logic.handler[r].regex,e.lib.isArray(o)||(i=[o]),s=i.length,a=0;a<s;a++)if(null!==(p=i[a].exec(t)))return e.log.trace(\"Twig.logic.tokenize: \",\"Matched a \",n,\" regular expression of \",p),{type:n,match:p};throw new e.Error(\"Unable to parse '\"+t.trim()+\"'\")},e.logic.parse=function(t,r,n,o){return e.async.potentiallyAsync(this,o,function(){e.log.debug(\"Twig.logic.parse: \",\"Parsing logic token \",t);var o,i=e.logic.handler[t.type],s=this;return i.parse?(s.parseStack.unshift(t),o=i.parse.call(s,t,r||{},n),e.isPromise(o)?o=o.then(function(e){return s.parseStack.shift(),e}):s.parseStack.shift(),o):\"\"})},e}},function(e,t){e.exports=require(\"fs\")},function(e,t,r){e.exports=function(e){\"use strict\";var t,n;try{t=r(9),n=r(0)}catch(e){}e.Templates.registerLoader(\"fs\",function(r,o,i,s){var a,p=null,c=o.precompiled,l=this.parsers[o.parser]||this.parser.twig;if(!t||!n)throw new e.Error('Unsupported platform: Unable to load from file because there is no \"fs\" or \"path\" implementation');var u=function(e,t){e?\"function\"==typeof s&&s(e):(!0===c&&(t=JSON.parse(t)),o.data=t,o.path=o.path||r,a=l.call(this,o),\"function\"==typeof i&&i(a))};if(o.path=o.path||r,o.async)return t.stat(o.path,function(r,n){!r&&n.isFile()?t.readFile(o.path,\"utf8\",u):\"function\"==typeof s&&s(new e.Error(\"Unable to find template file \"+o.path))}),!0;try{if(!t.statSync(o.path).isFile())throw new e.Error(\"Unable to find template file \"+o.path)}catch(t){throw new e.Error(\"Unable to find template file \"+o.path)}return p=t.readFileSync(o.path,\"utf8\"),u(void 0,p),a})}},function(e,t){e.exports=function(e){\"use strict\";e.Templates.registerLoader(\"ajax\",function(t,r,n,o){var i,s,a=r.precompiled,p=this.parsers[r.parser]||this.parser.twig;if(\"undefined\"==typeof XMLHttpRequest)throw new e.Error('Unsupported platform: Unable to do ajax requests because there is no \"XMLHTTPRequest\" implementation');return(s=new XMLHttpRequest).onreadystatechange=function(){var c=null;4===s.readyState&&(200===s.status||window.cordova&&0==s.status?(e.log.debug(\"Got template \",s.responseText),c=!0===a?JSON.parse(s.responseText):s.responseText,r.url=t,r.data=c,i=p.call(this,r),\"function\"==typeof n&&n(i)):\"function\"==typeof o&&o(s))},s.open(\"GET\",t,!!r.async),s.send(),!!r.async||i})}},function(e,t,r){\"use strict\";e.exports=function(e){return!1!==e&&(0!==e&&0!==e&&(\"\"!==e&&\"0\"!==e&&((!Array.isArray(e)||0!==e.length)&&(null!==e&&void 0!==e))))}},function(e,t,r){\"use strict\";e.exports=function(e,t){var r,n,o=[\"Sun\",\"Mon\",\"Tues\",\"Wednes\",\"Thurs\",\"Fri\",\"Satur\",\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],i=/\\\\?(.?)/gi,s=function(e,t){return n[e]?n[e]():t},a=function(e,t){for(e=String(e);e.length<t;)e=\"0\"+e;return e};n={d:function(){return a(n.j(),2)},D:function(){return n.l().slice(0,3)},j:function(){return r.getDate()},l:function(){return o[n.w()]+\"day\"},N:function(){return n.w()||7},S:function(){var e=n.j(),t=e%10;return t<=3&&1===parseInt(e%100/10,10)&&(t=0),[\"st\",\"nd\",\"rd\"][t-1]||\"th\"},w:function(){return r.getDay()},z:function(){var e=new Date(n.Y(),n.n()-1,n.j()),t=new Date(n.Y(),0,1);return Math.round((e-t)/864e5)},W:function(){var e=new Date(n.Y(),n.n()-1,n.j()-n.N()+3),t=new Date(e.getFullYear(),0,4);return a(1+Math.round((e-t)/864e5/7),2)},F:function(){return o[6+n.n()]},m:function(){return a(n.n(),2)},M:function(){return n.F().slice(0,3)},n:function(){return r.getMonth()+1},t:function(){return new Date(n.Y(),n.n(),0).getDate()},L:function(){var e=n.Y();return e%4==0&e%100!=0|e%400==0},o:function(){var e=n.n(),t=n.W();return n.Y()+(12===e&&t<9?1:1===e&&t>9?-1:0)},Y:function(){return r.getFullYear()},y:function(){return n.Y().toString().slice(-2)},a:function(){return r.getHours()>11?\"pm\":\"am\"},A:function(){return n.a().toUpperCase()},B:function(){var e=3600*r.getUTCHours(),t=60*r.getUTCMinutes(),n=r.getUTCSeconds();return a(Math.floor((e+t+n+3600)/86.4)%1e3,3)},g:function(){return n.G()%12||12},G:function(){return r.getHours()},h:function(){return a(n.g(),2)},H:function(){return a(n.G(),2)},i:function(){return a(r.getMinutes(),2)},s:function(){return a(r.getSeconds(),2)},u:function(){return a(1e3*r.getMilliseconds(),6)},e:function(){throw new Error(\"Not supported (see source code of date() for timezone on how to add support)\")},I:function(){return new Date(n.Y(),0)-Date.UTC(n.Y(),0)!=new Date(n.Y(),6)-Date.UTC(n.Y(),6)?1:0},O:function(){var e=r.getTimezoneOffset(),t=Math.abs(e);return(e>0?\"-\":\"+\")+a(100*Math.floor(t/60)+t%60,4)},P:function(){var e=n.O();return e.substr(0,3)+\":\"+e.substr(3,2)},T:function(){return\"UTC\"},Z:function(){return 60*-r.getTimezoneOffset()},c:function(){return\"Y-m-d\\\\TH:i:sP\".replace(i,s)},r:function(){return\"D, d M Y H:i:s O\".replace(i,s)},U:function(){return r/1e3|0}};return function(e,t){return r=void 0===t?new Date:t instanceof Date?new Date(t):new Date(1e3*t),e.replace(i,s)}(e,t)}},function(e,t,r){\"use strict\";e.exports=function(e,t){var r,n,o,i,s,a,p,c,l,u,f;if(!e)return!1;e=e.replace(/^\\s+|\\s+$/g,\"\").replace(/\\s{2,}/g,\" \").replace(/[\\t\\r\\n]/g,\"\").toLowerCase();var h=new RegExp([\"^(\\\\d{1,4})\",\"([\\\\-\\\\.\\\\/:])\",\"(\\\\d{1,2})\",\"([\\\\-\\\\.\\\\/:])\",\"(\\\\d{1,4})\",\"(?:\\\\s(\\\\d{1,2}):(\\\\d{2})?:?(\\\\d{2})?)?\",\"(?:\\\\s([A-Z]+)?)?$\"].join(\"\"));if((n=e.match(h))&&n[2]===n[4])if(n[1]>1901)switch(n[2]){case\"-\":return!(n[3]>12||n[5]>31)&&new Date(n[1],parseInt(n[3],10)-1,n[5],n[6]||0,n[7]||0,n[8]||0,n[9]||0)/1e3;case\".\":return!1;case\"/\":return!(n[3]>12||n[5]>31)&&new Date(n[1],parseInt(n[3],10)-1,n[5],n[6]||0,n[7]||0,n[8]||0,n[9]||0)/1e3}else if(n[5]>1901)switch(n[2]){case\"-\":case\".\":return!(n[3]>12||n[1]>31)&&new Date(n[5],parseInt(n[3],10)-1,n[1],n[6]||0,n[7]||0,n[8]||0,n[9]||0)/1e3;case\"/\":return!(n[1]>12||n[3]>31)&&new Date(n[5],parseInt(n[1],10)-1,n[3],n[6]||0,n[7]||0,n[8]||0,n[9]||0)/1e3}else switch(n[2]){case\"-\":return!(n[3]>12||n[5]>31||n[1]<70&&n[1]>38)&&(i=n[1]>=0&&n[1]<=38?+n[1]+2e3:n[1],new Date(i,parseInt(n[3],10)-1,n[5],n[6]||0,n[7]||0,n[8]||0,n[9]||0)/1e3);case\".\":return n[5]>=70?!(n[3]>12||n[1]>31)&&new Date(n[5],parseInt(n[3],10)-1,n[1],n[6]||0,n[7]||0,n[8]||0,n[9]||0)/1e3:n[5]<60&&!n[6]&&(!(n[1]>23||n[3]>59)&&(o=new Date,new Date(o.getFullYear(),o.getMonth(),o.getDate(),n[1]||0,n[3]||0,n[5]||0,n[9]||0)/1e3));case\"/\":return!(n[1]>12||n[3]>31||n[5]<70&&n[5]>38)&&(i=n[5]>=0&&n[5]<=38?+n[5]+2e3:n[5],new Date(i,parseInt(n[1],10)-1,n[3],n[6]||0,n[7]||0,n[8]||0,n[9]||0)/1e3);case\":\":return!(n[1]>23||n[3]>59||n[5]>59)&&(o=new Date,new Date(o.getFullYear(),o.getMonth(),o.getDate(),n[1]||0,n[3]||0,n[5]||0)/1e3)}if(\"now\"===e)return null===t||isNaN(t)?(new Date).getTime()/1e3|0:0|t;if(!isNaN(r=Date.parse(e)))return r/1e3|0;if(h=new RegExp([\"^([0-9]{4}-[0-9]{2}-[0-9]{2})\",\"[ t]\",\"([0-9]{2}:[0-9]{2}:[0-9]{2}(\\\\.[0-9]+)?)\",\"([\\\\+-][0-9]{2}(:[0-9]{2})?|z)\"].join(\"\")),(n=e.match(h))&&(\"z\"===n[4]?n[4]=\"Z\":n[4].match(/^([+-][0-9]{2})$/)&&(n[4]=n[4]+\":00\"),!isNaN(r=Date.parse(n[1]+\"T\"+n[2]+n[4]))))return r/1e3|0;function y(e){var t=e.split(\" \"),r=t[0],n=t[1].substring(0,3),o=/\\d+/.test(r),i=\"ago\"===t[2],c=(\"last\"===r?-1:1)*(i?-1:1);if(o&&(c*=parseInt(r,10)),p.hasOwnProperty(n)&&!t[1].match(/^mon(day|\\.)?$/i))return s[\"set\"+p[n]](s[\"get\"+p[n]]()+c);if(\"wee\"===n)return s.setDate(s.getDate()+7*c);if(\"next\"===r||\"last\"===r)!function(e,t,r){var n,o=a[t];void 0!==o&&(0==(n=o-s.getDay())?n=7*r:n>0&&\"last\"===e?n-=7:n<0&&\"next\"===e&&(n+=7),s.setDate(s.getDate()+n))}(r,n,c);else if(!o)return!1;return!0}if(s=t?new Date(1e3*t):new Date,a={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},p={yea:\"FullYear\",mon:\"Month\",day:\"Date\",hou:\"Hours\",min:\"Minutes\",sec:\"Seconds\"},u=\"([+-]?\\\\d+\\\\s\"+(l=\"(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\\\.?|monday|mon\\\\.?|tuesday|tue\\\\.?|wednesday|wed\\\\.?|thursday|thu\\\\.?|friday|fri\\\\.?|saturday|sat\\\\.?)\")+\"|(last|next)\\\\s\"+l+\")(\\\\sago)?\",!(n=e.match(new RegExp(u,\"gi\"))))return!1;for(f=0,c=n.length;f<c;f++)if(!y(n[f]))return!1;return s.getTime()/1e3}},function(e,t,r){\"use strict\";e.exports=function(e,t){t=(((t||\"\")+\"\").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join(\"\");return e.replace(/<!--[\\s\\S]*?-->|<\\?(?:php)?[\\s\\S]*?\\?>/gi,\"\").replace(/<\\/?([a-z][a-z0-9]*)\\b[^>]*>/gi,function(e,r){return t.indexOf(\"<\"+r.toLowerCase()+\">\")>-1?e:\"\"})}},function(e,t,r){\"use strict\";var n=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e};e.exports=function(){var e,t,r,o=0,i=arguments,s=i.length,a=function(e){if(\"[object Array]\"===Object.prototype.toString.call(e))return e;var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(e[r]);return t},p=function e(t,r){var o=0,i=0,s=0,p=0,c=0;if(t===r)return 0;if(\"object\"===(void 0===t?\"undefined\":n(t))){if(\"object\"===(void 0===r?\"undefined\":n(r))){if(t=a(t),r=a(r),c=t.length,(p=r.length)>c)return 1;if(p<c)return-1;for(o=0,i=c;o<i;++o){if(1===(s=e(t[o],r[o])))return 1;if(-1===s)return-1}return 0}return-1}return\"object\"===(void 0===r?\"undefined\":n(r))?1:isNaN(r)&&!isNaN(t)?0===t?0:t<0?1:-1:isNaN(t)&&!isNaN(r)?0===r?0:r>0?1:-1:r===t?0:r>t?1:-1};if(0===s)throw new Error(\"At least one value should be passed to min()\");if(1===s){if(\"object\"!==n(i[0]))throw new Error(\"Wrong parameter count for min()\");if(0===(e=a(i[0])).length)throw new Error(\"Array must contain at least one element for min()\")}else e=i;for(t=e[0],o=1,r=e.length;o<r;++o)-1===p(t,e[o])&&(t=e[o]);return t}},function(e,t,r){\"use strict\";var n=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e};e.exports=function(){var e,t,r,o=0,i=arguments,s=i.length,a=function(e){if(\"[object Array]\"===Object.prototype.toString.call(e))return e;var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(e[r]);return t},p=function e(t,r){var o=0,i=0,s=0,p=0,c=0;if(t===r)return 0;if(\"object\"===(void 0===t?\"undefined\":n(t))){if(\"object\"===(void 0===r?\"undefined\":n(r))){if(t=a(t),r=a(r),c=t.length,(p=r.length)>c)return 1;if(p<c)return-1;for(o=0,i=c;o<i;++o){if(1===(s=e(t[o],r[o])))return 1;if(-1===s)return-1}return 0}return-1}return\"object\"===(void 0===r?\"undefined\":n(r))?1:isNaN(r)&&!isNaN(t)?0===t?0:t<0?1:-1:isNaN(t)&&!isNaN(r)?0===r?0:r>0?1:-1:r===t?0:r>t?1:-1};if(0===s)throw new Error(\"At least one value should be passed to max()\");if(1===s){if(\"object\"!==n(i[0]))throw new Error(\"Wrong parameter count for max()\");if(0===(e=a(i[0])).length)throw new Error(\"Array must contain at least one element for max()\")}else e=i;for(t=e[0],o=1,r=e.length;o<r;++o)1===p(t,e[o])&&(t=e[o]);return t}},function(e,t,r){\"use strict\";e.exports=function(e,t,r){var n,o,i,s;if(t|=0,i=(e*=n=Math.pow(10,t))%1==.5*(s=e>0|-(e<0)),o=Math.floor(e),i)switch(r){case\"PHP_ROUND_HALF_DOWN\":e=o+(s<0);break;case\"PHP_ROUND_HALF_EVEN\":e=o+o%2*s;break;case\"PHP_ROUND_HALF_ODD\":e=o+!(o%2);break;default:e=o+(s>0)}return(i?e:Math.round(e))/n}},function(e,t,r){\"use strict\";e.exports=function(e,t){return r(1).apply(this,[e].concat(t))}},function(e,t,r){e.exports=function(e){e.lib={},e.lib.sprintf=r(1),e.lib.vsprintf=r(19),e.lib.round=r(18),e.lib.max=r(17),e.lib.min=r(16),e.lib.strip_tags=r(15),e.lib.strtotime=r(14),e.lib.date=r(13),e.lib.boolval=r(12);var t=Object.prototype.toString;return e.lib.is=function(e,r){return void 0!==r&&null!==r&&(\"Array\"===e&&Array.isArray?Array.isArray(r):t.call(r).slice(8,-1)===e)},e.lib.isArray=Array.isArray||function(e){return\"Array\"===t.call(e).slice(8,-1)},e.lib.copy=function(e){var t,r={};for(t in e)r[t]=e[t];return r},e.lib.extend=function(e,t){var r,n=Object.keys(t||{});for(r=n.length;r--;)e[n[r]]=t[n[r]];return e},e.lib.replaceAll=function(e,t,r){return e.split(t).join(r)},e.lib.chunkArray=function(t,r){var n=[],o=0,i=t.length;if(r<1||!e.lib.is(\"Array\",t))return[];for(;o<i;)n.push(t.slice(o,o+=r));return n},e}},function(e,t){e.exports=function(t){return t.functions={range:function(e,t,r){var n,o,i=[],s=r||1,a=!1;if(isNaN(e)||isNaN(t)?isNaN(e)&&isNaN(t)?(a=!0,n=e.charCodeAt(0),o=t.charCodeAt(0)):(n=isNaN(e)?0:e,o=isNaN(t)?0:t):(n=parseInt(e,10),o=parseInt(t,10)),!(n>o))for(;n<=o;)i.push(a?String.fromCharCode(n):n),n+=s;else for(;n>=o;)i.push(a?String.fromCharCode(n):n),n-=s;return i},cycle:function(e,t){return e[t%e.length]},dump:function(){var e=arguments.length;for(args=new Array(e);e-- >0;)args[e]=arguments[e];var r=0,n=\"\",o=function(e){for(var t=\"\";e>0;)e--,t+=\"  \";return t},i=function(e){n+=o(r),\"object\"==typeof e?s(e):\"function\"==typeof e?n+=\"function()\\n\":\"string\"==typeof e?n+=\"string(\"+e.length+') \"'+e+'\"\\n':\"number\"==typeof e?n+=\"number(\"+e+\")\\n\":\"boolean\"==typeof e&&(n+=\"bool(\"+e+\")\\n\")},s=function(e){var t;if(null===e)n+=\"NULL\\n\";else if(void 0===e)n+=\"undefined\\n\";else if(\"object\"==typeof e){for(t in n+=o(r)+typeof e,r++,n+=\"(\"+function(e){var t,r=0;for(t in e)e.hasOwnProperty(t)&&r++;return r}(e)+\") {\\n\",e)n+=o(r)+\"[\"+t+\"]=> \\n\",i(e[t]);n+=o(--r)+\"}\\n\"}else i(e)};return 0==args.length&&args.push(this.context),t.forEach(args,function(e){s(e)}),n},date:function(e,r){var n;if(void 0===e||null===e||\"\"===e)n=new Date;else if(t.lib.is(\"Date\",e))n=e;else if(t.lib.is(\"String\",e))n=e.match(/^[0-9]+$/)?new Date(1e3*e):new Date(1e3*t.lib.strtotime(e));else{if(!t.lib.is(\"Number\",e))throw new t.Error(\"Unable to parse date \"+e);n=new Date(1e3*e)}return n},block:function(e){return this.originalBlockTokens[e]?t.logic.parse.call(this,this.originalBlockTokens[e],this.context).output:this.blocks[e]},parent:function(){return t.placeholders.parent},attribute:function(e,r,n){return t.lib.is(\"Object\",e)&&e.hasOwnProperty(r)?\"function\"==typeof e[r]?e[r].apply(void 0,n):e[r]:e[r]||void 0},max:function(e){return t.lib.is(\"Object\",e)?(delete e._keys,t.lib.max(e)):t.lib.max.apply(null,arguments)},min:function(e){return t.lib.is(\"Object\",e)?(delete e._keys,t.lib.min(e)):t.lib.min.apply(null,arguments)},template_from_string:function(e){return void 0===e&&(e=\"\"),t.Templates.parsers.twig({options:this.options,data:e})},random:function(e){var r=2147483648;function n(e){var t=Math.floor(Math.random()*r),n=Math.min.call(null,0,e),o=Math.max.call(null,0,e);return n+Math.floor((o-n+1)*t/r)}if(t.lib.is(\"Number\",e))return n(e);if(t.lib.is(\"String\",e))return e.charAt(n(e.length-1));if(t.lib.is(\"Array\",e))return e[n(e.length-1)];if(t.lib.is(\"Object\",e)){var o=Object.keys(e);return e[o[n(o.length-1)]]}return n(r-1)},source:function(r,n){var o,i,s,a=!1;void 0!==e&&void 0!==e.exports&&\"undefined\"==typeof window?(i=\"fs\",s=__dirname+\"/\"+r):(i=\"ajax\",s=r);var p={id:r,path:s,method:i,parser:\"source\",async:!1,fetchTemplateSource:!0};void 0===n&&(n=!1);try{void 0===(o=t.Templates.loadRemote(r,p))||null===o?o=\"\":a=!0}catch(e){t.log.debug(\"Twig.functions.source: \",\"Problem loading template  \",e)}return a||n?o:'Template \"{name}\" is not defined.'.replace(\"{name}\",r)}},t._function=function(e,r,n){if(!t.functions[e])throw\"Unable to find function \"+e;return t.functions[e](r,n)},t._function.extend=function(e,r){t.functions[e]=r},t}},function(e,t){e.exports=function(e){function t(e,t){var r=Object.prototype.toString.call(t).slice(8,-1);return void 0!==t&&null!==t&&r===e}return e.filters={upper:function(e){return\"string\"!=typeof e?e:e.toUpperCase()},lower:function(e){return\"string\"!=typeof e?e:e.toLowerCase()},capitalize:function(e){return\"string\"!=typeof e?e:e.substr(0,1).toUpperCase()+e.toLowerCase().substr(1)},title:function(e){return\"string\"!=typeof e?e:e.toLowerCase().replace(/(^|\\s)([a-z])/g,function(e,t,r){return t+r.toUpperCase()})},length:function(t){return e.lib.is(\"Array\",t)||\"string\"==typeof t?t.length:e.lib.is(\"Object\",t)?void 0===t._keys?Object.keys(t).length:t._keys.length:0},reverse:function(e){if(t(\"Array\",e))return e.reverse();if(t(\"String\",e))return e.split(\"\").reverse().join(\"\");if(t(\"Object\",e)){var r=e._keys||Object.keys(e).reverse();return e._keys=r,e}},sort:function(e){if(t(\"Array\",e))return e.sort();if(t(\"Object\",e)){delete e._keys;var r=Object.keys(e).sort(function(t,r){var n;return e[t]>e[r]==!(e[t]<=e[r])?e[t]>e[r]?1:e[t]<e[r]?-1:0:isNaN(n=parseFloat(e[t]))||isNaN(b1=parseFloat(e[r]))?\"string\"==typeof e[t]?e[t]>e[r].toString()?1:e[t]<e[r].toString()?-1:0:\"string\"==typeof e[r]?e[t].toString()>e[r]?1:e[t].toString()<e[r]?-1:0:null:n>b1?1:n<b1?-1:0});return e._keys=r,e}},keys:function(t){if(void 0!==t&&null!==t){var r=t._keys||Object.keys(t),n=[];return e.forEach(r,function(e){\"_keys\"!==e&&t.hasOwnProperty(e)&&n.push(e)}),n}},url_encode:function(e){if(void 0!==e&&null!==e){var t=encodeURIComponent(e);return t=t.replace(\"'\",\"%27\")}},join:function(r,n){if(void 0!==r&&null!==r){var o=\"\",i=[],s=null;return n&&n[0]&&(o=n[0]),t(\"Array\",r)?i=r:(s=r._keys||Object.keys(r),e.forEach(s,function(e){\"_keys\"!==e&&r.hasOwnProperty(e)&&i.push(r[e])})),i.join(o)}},default:function(t,r){if(void 0!==r&&r.length>1)throw new e.Error(\"default filter expects one argument\");return void 0===t||null===t||\"\"===t?void 0===r?\"\":r[0]:t},json_encode:function(r){if(void 0===r||null===r)return\"null\";if(\"object\"==typeof r&&t(\"Array\",r))return o=[],e.forEach(r,function(t){o.push(e.filters.json_encode(t))}),\"[\"+o.join(\",\")+\"]\";if(\"object\"==typeof r&&t(\"Date\",r))return'\"'+r.toISOString()+'\"';if(\"object\"==typeof r){var n=r._keys||Object.keys(r),o=[];return e.forEach(n,function(t){o.push(JSON.stringify(t)+\":\"+e.filters.json_encode(r[t]))}),\"{\"+o.join(\",\")+\"}\"}return JSON.stringify(r)},merge:function(r,n){var o=[],i=0,s=[];if(t(\"Array\",r)?e.forEach(n,function(e){t(\"Array\",e)||(o={})}):o={},t(\"Array\",o)||(o._keys=[]),t(\"Array\",r)?e.forEach(r,function(e){o._keys&&o._keys.push(i),o[i]=e,i++}):(s=r._keys||Object.keys(r),e.forEach(s,function(e){o[e]=r[e],o._keys.push(e);var t=parseInt(e,10);!isNaN(t)&&t>=i&&(i=t+1)})),e.forEach(n,function(r){t(\"Array\",r)?e.forEach(r,function(e){o._keys&&o._keys.push(i),o[i]=e,i++}):(s=r._keys||Object.keys(r),e.forEach(s,function(e){o[e]||o._keys.push(e),o[e]=r[e];var t=parseInt(e,10);!isNaN(t)&&t>=i&&(i=t+1)}))}),0===n.length)throw new e.Error(\"Filter merge expects at least one parameter\");return o},date:function(t,r){var n=e.functions.date(t),o=r&&r.length?r[0]:\"F j, Y H:i\";return e.lib.date(o,n)},date_modify:function(t,r){if(void 0!==t&&null!==t){if(void 0===r||1!==r.length)throw new e.Error(\"date_modify filter expects 1 argument\");var n,o=r[0];return e.lib.is(\"Date\",t)&&(n=e.lib.strtotime(o,t.getTime()/1e3)),e.lib.is(\"String\",t)&&(n=e.lib.strtotime(o,e.lib.strtotime(t))),e.lib.is(\"Number\",t)&&(n=e.lib.strtotime(o,t)),new Date(1e3*n)}},replace:function(t,r){if(void 0!==t&&null!==t){var n,o=r[0];for(n in o)o.hasOwnProperty(n)&&\"_keys\"!==n&&(t=e.lib.replaceAll(t,n,o[n]));return t}},format:function(t,r){if(void 0!==t&&null!==t)return e.lib.vsprintf(t,r)},striptags:function(t,r){if(void 0!==t&&null!==t)return e.lib.strip_tags(t,r)},escape:function(t,r){if(void 0!==t&&null!==t){var n=\"html\";if(r&&r.length&&!0!==r[0]&&(n=r[0]),\"html\"==n){var o=t.toString().replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/\"/g,\"&quot;\").replace(/'/g,\"&#039;\");return e.Markup(o,\"html\")}if(\"js\"==n){o=t.toString();for(var i=\"\",s=0;s<o.length;s++){if(o[s].match(/^[a-zA-Z0-9,\\._]$/))i+=o[s];else i+=(a=o.charCodeAt(s))<128?\"\\\\x\"+a.toString(16).toUpperCase():e.lib.sprintf(\"\\\\u%04s\",a.toString(16).toUpperCase())}return e.Markup(i,\"js\")}if(\"css\"==n){for(o=t.toString(),i=\"\",s=0;s<o.length;s++){if(o[s].match(/^[a-zA-Z0-9]$/))i+=o[s];else i+=\"\\\\\"+(a=o.charCodeAt(s)).toString(16).toUpperCase()+\" \"}return e.Markup(i,\"css\")}if(\"url\"==n){i=e.filters.url_encode(t);return e.Markup(i,\"url\")}if(\"html_attr\"==n){for(o=t.toString(),i=\"\",s=0;s<o.length;s++)if(o[s].match(/^[a-zA-Z0-9,\\.\\-_]$/))i+=o[s];else if(o[s].match(/^[&<>\"]$/))i+=o[s].replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/\"/g,\"&quot;\");else{var a;i+=(a=o.charCodeAt(s))<=31&&9!=a&&10!=a&&13!=a?\"&#xFFFD;\":a<128?e.lib.sprintf(\"&#x%02s;\",a.toString(16).toUpperCase()):e.lib.sprintf(\"&#x%04s;\",a.toString(16).toUpperCase())}return e.Markup(i,\"html_attr\")}throw new e.Error(\"escape strategy unsupported\")}},e:function(t,r){return e.filters.escape(t,r)},nl2br:function(t){if(void 0!==t&&null!==t){var r=\"<br />BACKSLASH_n_replace\";return t=e.filters.escape(t).replace(/\\r\\n/g,r).replace(/\\r/g,r).replace(/\\n/g,r),t=e.lib.replaceAll(t,\"BACKSLASH_n_replace\",\"\\n\"),e.Markup(t)}},number_format:function(e,t){var r=e,n=t&&t[0]?t[0]:void 0,o=t&&void 0!==t[1]?t[1]:\".\",i=t&&void 0!==t[2]?t[2]:\",\";r=(r+\"\").replace(/[^0-9+\\-Ee.]/g,\"\");var s=isFinite(+r)?+r:0,a=isFinite(+n)?Math.abs(n):0,p=\"\";return(p=(a?function(e,t){var r=Math.pow(10,t);return\"\"+Math.round(e*r)/r}(s,a):\"\"+Math.round(s)).split(\".\"))[0].length>3&&(p[0]=p[0].replace(/\\B(?=(?:\\d{3})+(?!\\d))/g,i)),(p[1]||\"\").length<a&&(p[1]=p[1]||\"\",p[1]+=new Array(a-p[1].length+1).join(\"0\")),p.join(o)},trim:function(e,t){if(void 0!==e&&null!==e){var r,n=\"\"+e;r=t&&t[0]?\"\"+t[0]:\" \\n\\r\\t\\f\\v            ​\\u2028\\u2029　\";for(var o=0;o<n.length;o++)if(-1===r.indexOf(n.charAt(o))){n=n.substring(o);break}for(o=n.length-1;o>=0;o--)if(-1===r.indexOf(n.charAt(o))){n=n.substring(0,o+1);break}return-1===r.indexOf(n.charAt(0))?n:\"\"}},truncate:function(e,t){var r=30,n=!1,o=\"...\";if(e+=\"\",t&&(t[0]&&(r=t[0]),t[1]&&(n=t[1]),t[2]&&(o=t[2])),e.length>r){if(n&&-1===(r=e.indexOf(\" \",r)))return e;e=e.substr(0,r)+o}return e},slice:function(t,r){if(void 0!==t&&null!==t){if(void 0===r||r.length<1)throw new e.Error(\"slice filter expects at least 1 argument\");var n=r[0]||0,o=r.length>1?r[1]:t.length,i=n>=0?n:Math.max(t.length+n,0);if(e.lib.is(\"Array\",t)){for(var s=[],a=i;a<i+o&&a<t.length;a++)s.push(t[a]);return s}if(e.lib.is(\"String\",t))return t.substr(i,o);throw new e.Error(\"slice filter expects value to be an array or string\")}},abs:function(e){if(void 0!==e&&null!==e)return Math.abs(e)},first:function(e){if(t(\"Array\",e))return e[0];if(t(\"Object\",e)){if(\"_keys\"in e)return e[e._keys[0]]}else if(\"string\"==typeof e)return e.substr(0,1)},split:function(t,r){if(void 0!==t&&null!==t){if(void 0===r||r.length<1||r.length>2)throw new e.Error(\"split filter expects 1 or 2 argument\");if(e.lib.is(\"String\",t)){var n=r[0],o=r[1],i=t.split(n);if(void 0===o)return i;if(o<0)return t.split(n,i.length+o);var s=[];if(\"\"==n)for(;i.length>0;){for(var a=\"\",p=0;p<o&&i.length>0;p++)a+=i.shift();s.push(a)}else{for(p=0;p<o-1&&i.length>0;p++)s.push(i.shift());i.length>0&&s.push(i.join(n))}return s}throw new e.Error(\"split filter expects value to be a string\")}},last:function(t){var r;return e.lib.is(\"Object\",t)?t[(r=void 0===t._keys?Object.keys(t):t._keys)[r.length-1]]:t[t.length-1]},raw:function(t){return e.Markup(t)},batch:function(t,r){var n,o,i,s=r.shift(),a=r.shift();if(!e.lib.is(\"Array\",t))throw new e.Error(\"batch filter expects items to be an array\");if(!e.lib.is(\"Number\",s))throw new e.Error(\"batch filter expects size to be a number\");if(s=Math.ceil(s),n=e.lib.chunkArray(t,s),a&&t.length%s!=0){for(i=s-(o=n.pop()).length;i--;)o.push(a);n.push(o)}return n},round:function(t,r){var n=(r=r||[]).length>0?r[0]:0,o=r.length>1?r[1]:\"common\";if(t=parseFloat(t),n&&!e.lib.is(\"Number\",n))throw new e.Error(\"round filter expects precision to be a number\");if(\"common\"===o)return e.lib.round(t,n);if(!e.lib.is(\"Function\",Math[o]))throw new e.Error(\"round filter expects method to be 'floor', 'ceil', or 'common'\");return Math[o](t*Math.pow(10,n))/Math.pow(10,n)}},e.filter=function(t,r,n){if(!e.filters[t])throw\"Unable to find filter \"+t;return e.filters[t].call(this,r,n)},e.filter.extend=function(t,r){e.filters[t]=r},e}},function(e,t){e.exports=function(e){\"use strict\";e.expression.operator={leftToRight:\"leftToRight\",rightToLeft:\"rightToLeft\"};var t=function(e,t){if(void 0===t||null===t)return null;if(void 0!==t.indexOf)return e===t||\"\"!==e&&t.indexOf(e)>-1;var r;for(r in t)if(t.hasOwnProperty(r)&&t[r]===e)return!0;return!1};return e.expression.operator.lookup=function(t,r){switch(t){case\"..\":r.precidence=20,r.associativity=e.expression.operator.leftToRight;break;case\",\":r.precidence=18,r.associativity=e.expression.operator.leftToRight;break;case\"?:\":case\"?\":case\":\":r.precidence=16,r.associativity=e.expression.operator.rightToLeft;break;case\"or\":r.precidence=14,r.associativity=e.expression.operator.leftToRight;break;case\"and\":r.precidence=13,r.associativity=e.expression.operator.leftToRight;break;case\"b-or\":r.precidence=12,r.associativity=e.expression.operator.leftToRight;break;case\"b-xor\":r.precidence=11,r.associativity=e.expression.operator.leftToRight;break;case\"b-and\":r.precidence=10,r.associativity=e.expression.operator.leftToRight;break;case\"==\":case\"!=\":r.precidence=9,r.associativity=e.expression.operator.leftToRight;break;case\"<\":case\"<=\":case\">\":case\">=\":case\"not in\":case\"in\":r.precidence=8,r.associativity=e.expression.operator.leftToRight;break;case\"~\":case\"+\":case\"-\":r.precidence=6,r.associativity=e.expression.operator.leftToRight;break;case\"//\":case\"**\":case\"*\":case\"/\":case\"%\":r.precidence=5,r.associativity=e.expression.operator.leftToRight;break;case\"not\":r.precidence=3,r.associativity=e.expression.operator.rightToLeft;break;default:throw new e.Error(\"Failed to lookup operator: \"+t+\" is an unknown operator.\")}return r.operator=t,r},e.expression.operator.parse=function(r,n){var o,i,s;switch(e.log.trace(\"Twig.expression.operator.parse: \",\"Handling \",r),\"?\"===r&&(s=n.pop()),i=n.pop(),\"not\"!==r&&(o=n.pop()),\"in\"!==r&&\"not in\"!==r&&(o&&Array.isArray(o)&&(o=o.length),i&&Array.isArray(i)&&(i=i.length)),r){case\":\":break;case\"?:\":e.lib.boolval(o)?n.push(o):n.push(i);break;case\"?\":void 0===o&&(o=i,i=s,s=void 0),e.lib.boolval(o)?n.push(i):n.push(s);break;case\"+\":i=parseFloat(i),o=parseFloat(o),n.push(o+i);break;case\"-\":i=parseFloat(i),o=parseFloat(o),n.push(o-i);break;case\"*\":i=parseFloat(i),o=parseFloat(o),n.push(o*i);break;case\"/\":i=parseFloat(i),o=parseFloat(o),n.push(o/i);break;case\"//\":i=parseFloat(i),o=parseFloat(o),n.push(Math.floor(o/i));break;case\"%\":i=parseFloat(i),o=parseFloat(o),n.push(o%i);break;case\"~\":n.push((null!=o?o.toString():\"\")+(null!=i?i.toString():\"\"));break;case\"not\":case\"!\":n.push(!e.lib.boolval(i));break;case\"<\":n.push(o<i);break;case\"<=\":n.push(o<=i);break;case\">\":n.push(o>i);break;case\">=\":n.push(o>=i);break;case\"===\":n.push(o===i);break;case\"==\":n.push(o==i);break;case\"!==\":n.push(o!==i);break;case\"!=\":n.push(o!=i);break;case\"or\":n.push(e.lib.boolval(o)||e.lib.boolval(i));break;case\"b-or\":n.push(o|i);break;case\"b-xor\":n.push(o^i);break;case\"and\":n.push(e.lib.boolval(o)&&e.lib.boolval(i));break;case\"b-and\":n.push(o&i);break;case\"**\":n.push(Math.pow(o,i));break;case\"not in\":n.push(!t(o,i));break;case\"in\":n.push(t(o,i));break;case\"..\":n.push(e.functions.range(o,i));break;default:throw new e.Error(\"Failed to parse operator: \"+r+\" is an unknown operator.\")}},e}},function(e,t,r){e.exports=function(e){\"use strict\";function t(t,r,n){return r?e.expression.parseAsync.call(t,r,n):e.Promise.resolve(!1)}for(e.expression={},r(23)(e),e.expression.reservedWords=[\"true\",\"false\",\"null\",\"TRUE\",\"FALSE\",\"NULL\",\"_context\",\"and\",\"b-and\",\"or\",\"b-or\",\"b-xor\",\"in\",\"not in\",\"if\"],e.expression.type={comma:\"Twig.expression.type.comma\",operator:{unary:\"Twig.expression.type.operator.unary\",binary:\"Twig.expression.type.operator.binary\"},string:\"Twig.expression.type.string\",bool:\"Twig.expression.type.bool\",slice:\"Twig.expression.type.slice\",array:{start:\"Twig.expression.type.array.start\",end:\"Twig.expression.type.array.end\"},object:{start:\"Twig.expression.type.object.start\",end:\"Twig.expression.type.object.end\"},parameter:{start:\"Twig.expression.type.parameter.start\",end:\"Twig.expression.type.parameter.end\"},subexpression:{start:\"Twig.expression.type.subexpression.start\",end:\"Twig.expression.type.subexpression.end\"},key:{period:\"Twig.expression.type.key.period\",brackets:\"Twig.expression.type.key.brackets\"},filter:\"Twig.expression.type.filter\",_function:\"Twig.expression.type._function\",variable:\"Twig.expression.type.variable\",number:\"Twig.expression.type.number\",_null:\"Twig.expression.type.null\",context:\"Twig.expression.type.context\",test:\"Twig.expression.type.test\"},e.expression.set={operations:[e.expression.type.filter,e.expression.type.operator.unary,e.expression.type.operator.binary,e.expression.type.array.end,e.expression.type.object.end,e.expression.type.parameter.end,e.expression.type.subexpression.end,e.expression.type.comma,e.expression.type.test],expressions:[e.expression.type._function,e.expression.type.bool,e.expression.type.string,e.expression.type.variable,e.expression.type.number,e.expression.type._null,e.expression.type.context,e.expression.type.parameter.start,e.expression.type.array.start,e.expression.type.object.start,e.expression.type.subexpression.start,e.expression.type.operator.unary]},e.expression.set.operations_extended=e.expression.set.operations.concat([e.expression.type.key.period,e.expression.type.key.brackets,e.expression.type.slice]),e.expression.fn={compile:{push:function(e,t,r){r.push(e)},push_both:function(e,t,r){r.push(e),t.push(e)}},parse:{push:function(e,t,r){t.push(e)},push_value:function(e,t,r){t.push(e.value)}}},e.expression.definitions=[{type:e.expression.type.test,regex:/^is\\s+(not)?\\s*([a-zA-Z_][a-zA-Z0-9_]*(\\s?as)?)/,next:e.expression.set.operations.concat([e.expression.type.parameter.start]),compile:function(e,t,r){e.filter=e.match[2],e.modifier=e.match[1],delete e.match,delete e.value,r.push(e)},parse:function(r,n,o){var i=n.pop();return t(this,r.params,o).then(function(t){var o=e.test(r.filter,i,t);\"not\"==r.modifier?n.push(!o):n.push(o)})}},{type:e.expression.type.comma,regex:/^,/,next:e.expression.set.expressions.concat([e.expression.type.array.end,e.expression.type.object.end]),compile:function(t,r,n){var o,i=r.length-1;for(delete t.match,delete t.value;i>=0;i--){if((o=r.pop()).type===e.expression.type.object.start||o.type===e.expression.type.parameter.start||o.type===e.expression.type.array.start){r.push(o);break}n.push(o)}n.push(t)}},{type:e.expression.type.number,regex:/^\\-?\\d+(\\.\\d+)?/,next:e.expression.set.operations,compile:function(e,t,r){e.value=Number(e.value),r.push(e)},parse:e.expression.fn.parse.push_value},{type:e.expression.type.operator.binary,regex:/(^\\?\\:|^(b\\-and)|^(b\\-or)|^(b\\-xor)|^[\\+\\-~%\\?]|^[\\:](?!\\d\\])|^[!=]==?|^[!<>]=?|^\\*\\*?|^\\/\\/?|^(and)[\\(|\\s+]|^(or)[\\(|\\s+]|^(in)[\\(|\\s+]|^(not in)[\\(|\\s+]|^\\.\\.)/,next:e.expression.set.expressions,transform:function(e,t){switch(e[0]){case\"and(\":case\"or(\":case\"in(\":case\"not in(\":return t[t.length-1].value=e[2],e[0];default:return\"\"}},compile:function(t,r,n){delete t.match,t.value=t.value.trim();var o=t.value,i=e.expression.operator.lookup(o,t);for(e.log.trace(\"Twig.expression.compile: \",\"Operator: \",i,\" from \",o);r.length>0&&(r[r.length-1].type==e.expression.type.operator.unary||r[r.length-1].type==e.expression.type.operator.binary)&&(i.associativity===e.expression.operator.leftToRight&&i.precidence>=r[r.length-1].precidence||i.associativity===e.expression.operator.rightToLeft&&i.precidence>r[r.length-1].precidence);){var s=r.pop();n.push(s)}if(\":\"===o){if(!r[r.length-1]||\"?\"!==r[r.length-1].value){var a=n.pop();if(a.type===e.expression.type.string||a.type===e.expression.type.variable)t.key=a.value;else if(a.type===e.expression.type.number)t.key=a.value.toString();else{if(!a.expression||a.type!==e.expression.type.parameter.end&&a.type!=e.expression.type.subexpression.end)throw new e.Error(\"Unexpected value before ':' of \"+a.type+\" = \"+a.value);t.params=a.params}return void n.push(t)}}else r.push(i)},parse:function(t,r,n){if(t.key)r.push(t);else{if(t.params)return e.expression.parseAsync.call(this,t.params,n).then(function(e){t.key=e,r.push(t),n.loop||delete t.params});e.expression.operator.parse(t.value,r)}}},{type:e.expression.type.operator.unary,regex:/(^not\\s+)/,next:e.expression.set.expressions,compile:function(t,r,n){delete t.match,t.value=t.value.trim();var o=t.value,i=e.expression.operator.lookup(o,t);for(e.log.trace(\"Twig.expression.compile: \",\"Operator: \",i,\" from \",o);r.length>0&&(r[r.length-1].type==e.expression.type.operator.unary||r[r.length-1].type==e.expression.type.operator.binary)&&(i.associativity===e.expression.operator.leftToRight&&i.precidence>=r[r.length-1].precidence||i.associativity===e.expression.operator.rightToLeft&&i.precidence>r[r.length-1].precidence);){var s=r.pop();n.push(s)}r.push(i)},parse:function(t,r,n){e.expression.operator.parse(t.value,r)}},{type:e.expression.type.string,regex:/^([\"'])(?:(?=(\\\\?))\\2[\\s\\S])*?\\1/,next:e.expression.set.operations_extended,compile:function(t,r,n){var o=t.value;delete t.match,o='\"'===o.substring(0,1)?o.replace('\\\\\"','\"'):o.replace(\"\\\\'\",\"'\"),t.value=o.substring(1,o.length-1).replace(/\\\\n/g,\"\\n\").replace(/\\\\r/g,\"\\r\"),e.log.trace(\"Twig.expression.compile: \",\"String value: \",t.value),n.push(t)},parse:e.expression.fn.parse.push_value},{type:e.expression.type.subexpression.start,regex:/^\\(/,next:e.expression.set.expressions.concat([e.expression.type.subexpression.end]),compile:function(e,t,r){e.value=\"(\",r.push(e),t.push(e)},parse:e.expression.fn.parse.push},{type:e.expression.type.subexpression.end,regex:/^\\)/,next:e.expression.set.operations_extended,validate:function(t,r){for(var n=r.length-1,o=!1,i=!1,s=0;!o&&n>=0;){var a=r[n];(o=a.type===e.expression.type.subexpression.start)&&i&&(i=!1,o=!1),a.type===e.expression.type.parameter.start?s++:a.type===e.expression.type.parameter.end?s--:a.type===e.expression.type.subexpression.end&&(i=!0),n--}return o&&0===s},compile:function(t,r,n){var o,i=t;for(o=r.pop();r.length>0&&o.type!=e.expression.type.subexpression.start;)n.push(o),o=r.pop();for(var s=[];t.type!==e.expression.type.subexpression.start;)s.unshift(t),t=n.pop();s.unshift(t);void 0===(o=r[r.length-1])||o.type!==e.expression.type._function&&o.type!==e.expression.type.filter&&o.type!==e.expression.type.test&&o.type!==e.expression.type.key.brackets?(i.expression=!0,s.pop(),s.shift(),i.params=s,n.push(i)):(i.expression=!1,o.params=s)},parse:function(t,r,n){if(t.expression)return e.expression.parseAsync.call(this,t.params,n).then(function(e){r.push(e)});throw new e.Error(\"Unexpected subexpression end when token is not marked as an expression\")}},{type:e.expression.type.parameter.start,regex:/^\\(/,next:e.expression.set.expressions.concat([e.expression.type.parameter.end]),validate:function(t,r){var n=r[r.length-1];return n&&e.indexOf(e.expression.reservedWords,n.value.trim())<0},compile:e.expression.fn.compile.push_both,parse:e.expression.fn.parse.push},{type:e.expression.type.parameter.end,regex:/^\\)/,next:e.expression.set.operations_extended,compile:function(t,r,n){var o,i=t;for(o=r.pop();r.length>0&&o.type!=e.expression.type.parameter.start;)n.push(o),o=r.pop();for(var s=[];t.type!==e.expression.type.parameter.start;)s.unshift(t),t=n.pop();s.unshift(t);void 0===(t=n[n.length-1])||t.type!==e.expression.type._function&&t.type!==e.expression.type.filter&&t.type!==e.expression.type.test&&t.type!==e.expression.type.key.brackets?(i.expression=!0,s.pop(),s.shift(),i.params=s,n.push(i)):(i.expression=!1,t.params=s)},parse:function(t,r,n){var o=[],i=!1,s=null;if(t.expression)return e.expression.parseAsync.call(this,t.params,n).then(function(e){r.push(e)});for(;r.length>0;){if((s=r.pop())&&s.type&&s.type==e.expression.type.parameter.start){i=!0;break}o.unshift(s)}if(!i)throw new e.Error(\"Expected end of parameter set.\");r.push(o)}},{type:e.expression.type.slice,regex:/^\\[(\\d*\\:\\d*)\\]/,next:e.expression.set.operations_extended,compile:function(e,t,r){var n=e.match[1].split(\":\"),o=n[0]?parseInt(n[0]):void 0,i=n[1]?parseInt(n[1]):void 0;e.value=\"slice\",e.params=[o,i],i||(e.params=[o]),r.push(e)},parse:function(t,r,n){var o=r.pop(),i=t.params;r.push(e.filter.call(this,t.value,o,i))}},{type:e.expression.type.array.start,regex:/^\\[/,next:e.expression.set.expressions.concat([e.expression.type.array.end]),compile:e.expression.fn.compile.push_both,parse:e.expression.fn.parse.push},{type:e.expression.type.array.end,regex:/^\\]/,next:e.expression.set.operations_extended,compile:function(t,r,n){for(var o,i=r.length-1;i>=0&&(o=r.pop()).type!==e.expression.type.array.start;i--)n.push(o);n.push(t)},parse:function(t,r,n){for(var o=[],i=!1,s=null;r.length>0;){if((s=r.pop()).type&&s.type==e.expression.type.array.start){i=!0;break}o.unshift(s)}if(!i)throw new e.Error(\"Expected end of array.\");r.push(o)}},{type:e.expression.type.object.start,regex:/^\\{/,next:e.expression.set.expressions.concat([e.expression.type.object.end]),compile:e.expression.fn.compile.push_both,parse:e.expression.fn.parse.push},{type:e.expression.type.object.end,regex:/^\\}/,next:e.expression.set.operations_extended,compile:function(t,r,n){for(var o,i=r.length-1;i>=0&&(!(o=r.pop())||o.type!==e.expression.type.object.start);i--)n.push(o);n.push(t)},parse:function(t,r,n){for(var o={},i=!1,s=null,a=!1,p=null;r.length>0;){if((s=r.pop())&&s.type&&s.type===e.expression.type.object.start){i=!0;break}if(s&&s.type&&(s.type===e.expression.type.operator.binary||s.type===e.expression.type.operator.unary)&&s.key){if(!a)throw new e.Error(\"Missing value for key '\"+s.key+\"' in object definition.\");o[s.key]=p,void 0===o._keys&&(o._keys=[]),o._keys.unshift(s.key),p=null,a=!1}else a=!0,p=s}if(!i)throw new e.Error(\"Unexpected end of object.\");r.push(o)}},{type:e.expression.type.filter,regex:/^\\|\\s?([a-zA-Z_][a-zA-Z0-9_\\-]*)/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:function(e,t,r){e.value=e.match[1],r.push(e)},parse:function(r,n,o){var i=this,s=n.pop();return t(this,r.params,o).then(function(t){return e.filter.call(i,r.value,s,t)}).then(function(e){n.push(e)})}},{type:e.expression.type._function,regex:/^([a-zA-Z_][a-zA-Z0-9_]*)\\s*\\(/,next:e.expression.type.parameter.start,validate:function(t,r){return t[1]&&e.indexOf(e.expression.reservedWords,t[1])<0},transform:function(e,t){return\"(\"},compile:function(e,t,r){var n=e.match[1];e.fn=n,delete e.match,delete e.value,r.push(e)},parse:function(r,n,o){var i,s=this,a=r.fn;return t(this,r.params,o).then(function(t){if(e.functions[a])i=e.functions[a].apply(s,t);else{if(\"function\"!=typeof o[a])throw new e.Error(a+\" function does not exist and is not defined in the context\");i=o[a].apply(o,t)}return i}).then(function(e){n.push(e)})}},{type:e.expression.type.variable,regex:/^[a-zA-Z_][a-zA-Z0-9_]*/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:e.expression.fn.compile.push,validate:function(t,r){return e.indexOf(e.expression.reservedWords,t[0])<0},parse:function(t,r,n){return e.expression.resolveAsync.call(this,n[t.value],n).then(function(e){r.push(e)})}},{type:e.expression.type.key.period,regex:/^\\.([a-zA-Z0-9_]+)/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:function(e,t,r){e.key=e.match[1],delete e.match,delete e.value,r.push(e)},parse:function(r,n,o,i){var s,a=this,p=r.key,c=n.pop();return t(this,r.params,o).then(function(t){if(null===c||void 0===c){if(a.options.strict_variables)throw new e.Error(\"Can't access a key \"+p+\" on an null or undefined object.\");s=void 0}else{var r=function(e){return e.substr(0,1).toUpperCase()+e.substr(1)};s=\"object\"==typeof c&&p in c?c[p]:void 0!==c[\"get\"+r(p)]?c[\"get\"+r(p)]:void 0!==c[\"is\"+r(p)]?c[\"is\"+r(p)]:void 0}return e.expression.resolveAsync.call(a,s,o,t,i,c)}).then(function(e){n.push(e)})}},{type:e.expression.type.key.brackets,regex:/^\\[([^\\]\\:]*)\\]/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:function(t,r,n){var o=t.match[1];delete t.value,delete t.match,t.stack=e.expression.compile({value:o}).stack,n.push(t)},parse:function(r,n,o,i){var s,a,p=this,c=null;return t(this,r.params,o).then(function(t){return c=t,e.expression.parseAsync.call(p,r.stack,o)}).then(function(t){if(null===(s=n.pop())||void 0===s){if(p.options.strict_variables)throw new e.Error(\"Can't access a key \"+t+\" on an null or undefined object.\");return null}return a=\"object\"==typeof s&&t in s?s[t]:null,e.expression.resolveAsync.call(p,a,s,c,i)}).then(function(e){n.push(e)})}},{type:e.expression.type._null,regex:/^(null|NULL|none|NONE)/,next:e.expression.set.operations,compile:function(e,t,r){delete e.match,e.value=null,r.push(e)},parse:e.expression.fn.parse.push_value},{type:e.expression.type.context,regex:/^_context/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:e.expression.fn.compile.push,parse:function(e,t,r){t.push(r)}},{type:e.expression.type.bool,regex:/^(true|TRUE|false|FALSE)/,next:e.expression.set.operations,compile:function(e,t,r){e.value=\"true\"===e.match[0].toLowerCase(),delete e.match,r.push(e)},parse:e.expression.fn.parse.push_value}],e.expression.resolveAsync=function(t,r,n,o,i){if(\"function\"!=typeof t)return e.Promise.resolve(t);var s=e.Promise.resolve(n);if(o&&o.type===e.expression.type.parameter.end){s=s.then(function(){return o.params&&e.expression.parseAsync.call(this,o.params,r,!0)}).then(function(e){return o.cleanup=!0,e})}return s.then(function(e){return t.apply(i||r,e||[])})},e.expression.resolve=function(t,r,n,o,i){return e.async.potentiallyAsync(this,!1,function(){return e.expression.resolveAsync.call(this,t,r,n,o,i)})},e.expression.handler={},e.expression.extendType=function(t){e.expression.type[t]=\"Twig.expression.type.\"+t},e.expression.extend=function(t){if(!t.type)throw new e.Error(\"Unable to extend logic definition. No type provided for \"+t);e.expression.handler[t.type]=t};e.expression.definitions.length>0;)e.expression.extend(e.expression.definitions.shift());return e.expression.tokenize=function(t){var r,n,o,i,s,a,p=[],c=0,l=null,u=[];for(a=function(){for(var t=arguments.length-2,n=new Array(t);t-- >0;)n[t]=arguments[t];if(e.log.trace(\"Twig.expression.tokenize\",\"Matched a \",r,\" regular expression of \",n),l&&e.indexOf(l,r)<0)return u.push(r+\" cannot follow a \"+p[p.length-1].type+\" at template:\"+c+\" near '\"+n[0].substring(0,20)+\"...'\"),n[0];var o=e.expression.handler[r];return o.validate&&!o.validate(n,p)?n[0]:(u=[],p.push({type:r,value:n[0],match:n}),s=!0,l=i,c+=n[0].length,o.transform?o.transform(n,p):\"\")},e.log.debug(\"Twig.expression.tokenize\",\"Tokenizing expression \",t);t.length>0;){for(r in t=t.trim(),e.expression.handler){if(i=e.expression.handler[r].next,n=e.expression.handler[r].regex,e.log.trace(\"Checking type \",r,\" on \",t),s=!1,e.lib.isArray(n))for(o=n.length;o-- >0;)t=t.replace(n[o],a);else t=t.replace(n,a);if(s)break}if(!s)throw u.length>0?new e.Error(u.join(\" OR \")):new e.Error(\"Unable to parse '\"+t+\"' at template position\"+c)}return e.log.trace(\"Twig.expression.tokenize\",\"Tokenized to \",p),p},e.expression.compile=function(t){var r=t.value,n=e.expression.tokenize(r),o=null,i=[],s=[],a=null;for(e.log.trace(\"Twig.expression.compile: \",\"Compiling \",r);n.length>0;)o=n.shift(),a=e.expression.handler[o.type],e.log.trace(\"Twig.expression.compile: \",\"Compiling \",o),a.compile&&a.compile(o,s,i),e.log.trace(\"Twig.expression.compile: \",\"Stack is\",s),e.log.trace(\"Twig.expression.compile: \",\"Output is\",i);for(;s.length>0;)i.push(s.pop());return e.log.trace(\"Twig.expression.compile: \",\"Final output is\",i),t.stack=i,delete t.value,t},e.expression.parse=function(t,r,n,o){var i=this;e.lib.isArray(t)||(t=[t]);var s=[],a=[],p=e.expression.type.operator.binary;return e.async.potentiallyAsync(this,o,function(){return e.async.forEach(t,function(n,o){var c,l=null,u=null;if(!n.cleanup)return t.length>o+1&&(u=t[o+1]),(l=e.expression.handler[n.type]).parse&&(c=l.parse.call(i,n,s,r,u)),n.type===p&&r.loop&&a.push(n),c}).then(function(){for(var e=a.length,t=null;e-- >0;)(t=a[e]).params&&t.key&&delete t.key;if(n){var r=s.splice(0);s.push(r)}return s.pop()})})},e}},function(e,t){e.exports=function(e){return e.compiler={module:{}},e.compiler.compile=function(t,r){var n,o=JSON.stringify(t.tokens),i=t.id;if(r.module){if(void 0===e.compiler.module[r.module])throw new e.Error(\"Unable to find module type \"+r.module);n=e.compiler.module[r.module](i,o,r.twig)}else n=e.compiler.wrap(i,o);return n},e.compiler.module={amd:function(t,r,n){return'define([\"'+n+'\"], function (Twig) {\\n\\tvar twig, templates;\\ntwig = Twig.twig;\\ntemplates = '+e.compiler.wrap(t,r)+\"\\n\\treturn templates;\\n});\"},node:function(t,r){return'var twig = require(\"twig\").twig;\\nexports.template = '+e.compiler.wrap(t,r)},cjs2:function(t,r,n){return'module.declare([{ twig: \"'+n+'\" }], function (require, exports, module) {\\n\\tvar twig = require(\"twig\").twig;\\n\\texports.template = '+e.compiler.wrap(t,r)+\"\\n});\"}},e.compiler.wrap=function(e,t){return'twig({id:\"'+e.replace('\"','\\\\\"')+'\", data:'+t+\", precompiled: true});\\n\"},e}},function(e,t){e.exports=function(e){\"use strict\";function t(t,r){if(t.options.rethrow)throw\"string\"==typeof r&&(r=new e.Error(r)),\"TwigException\"!=r.type||r.file||(r.file=t.id),r;if(e.log.error(\"Error parsing twig template \"+t.id+\": \"),r.stack?e.log.error(r.stack):e.log.error(r.toString()),e.debug)return r.toString()}return e.trace=!1,e.debug=!1,e.cache=!0,e.noop=function(){},e.placeholders={parent:\"{{|PARENT|}}\"},e.hasIndexOf=Array.prototype.hasOwnProperty(\"indexOf\"),e.indexOf=function(t,r){if(e.hasIndexOf)return t.indexOf(r);if(void 0===t||null===t)throw new TypeError;var n=Object(t),o=n.length>>>0;if(0===o)return-1;var i=0;if(arguments.length>0&&((i=Number(arguments[1]))!=i?i=0:0!==i&&i!==1/0&&i!==-1/0&&(i=(i>0||-1)*Math.floor(Math.abs(i)))),i>=o)return-1;for(var s=i>=0?i:Math.max(o-Math.abs(i),0);s<o;s++)if(s in n&&n[s]===r)return s;return t==r?0:-1},e.forEach=function(e,t,r){if(Array.prototype.forEach)return e.forEach(t,r);var n,o;if(null==e)throw new TypeError(\" this is null or not defined\");var i=Object(e),s=i.length>>>0;if(\"[object Function]\"!={}.toString.call(t))throw new TypeError(t+\" is not a function\");for(r&&(n=r),o=0;o<s;){var a;o in i&&(a=i[o],t.call(n,a,o,i)),o++}},e.merge=function(t,r,n){return e.forEach(Object.keys(r),function(e){(!n||e in t)&&(t[e]=r[e])}),t},e.attempt=function(e,t){try{return e()}catch(e){return t(e)}},e.Error=function(e,t){this.message=e,this.name=\"TwigException\",this.type=\"TwigException\",this.file=t},e.Error.prototype.toString=function(){return this.name+\": \"+this.message},e.log={trace:function(){e.trace&&console&&console.log(Array.prototype.slice.call(arguments))},debug:function(){e.debug&&console&&console.log(Array.prototype.slice.call(arguments))}},\"undefined\"!=typeof console?void 0!==console.error?e.log.error=function(){console.error.apply(console,arguments)}:void 0!==console.log&&(e.log.error=function(){console.log.apply(console,arguments)}):e.log.error=function(){},e.ChildContext=function(t){return e.lib.copy(t)},e.token={},e.token.type={output:\"output\",logic:\"logic\",comment:\"comment\",raw:\"raw\",output_whitespace_pre:\"output_whitespace_pre\",output_whitespace_post:\"output_whitespace_post\",output_whitespace_both:\"output_whitespace_both\",logic_whitespace_pre:\"logic_whitespace_pre\",logic_whitespace_post:\"logic_whitespace_post\",logic_whitespace_both:\"logic_whitespace_both\"},e.token.definitions=[{type:e.token.type.raw,open:\"{% raw %}\",close:\"{% endraw %}\"},{type:e.token.type.raw,open:\"{% verbatim %}\",close:\"{% endverbatim %}\"},{type:e.token.type.output_whitespace_pre,open:\"{{-\",close:\"}}\"},{type:e.token.type.output_whitespace_post,open:\"{{\",close:\"-}}\"},{type:e.token.type.output_whitespace_both,open:\"{{-\",close:\"-}}\"},{type:e.token.type.logic_whitespace_pre,open:\"{%-\",close:\"%}\"},{type:e.token.type.logic_whitespace_post,open:\"{%\",close:\"-%}\"},{type:e.token.type.logic_whitespace_both,open:\"{%-\",close:\"-%}\"},{type:e.token.type.output,open:\"{{\",close:\"}}\"},{type:e.token.type.logic,open:\"{%\",close:\"%}\"},{type:e.token.type.comment,open:\"{#\",close:\"#}\"}],e.token.strings=['\"',\"'\"],e.token.findStart=function(t){var r,n,o,i,s={position:null,def:null},a=null,p=e.token.definitions.length;for(r=0;r<p;r++)n=e.token.definitions[r],o=t.indexOf(n.open),i=t.indexOf(n.close),e.log.trace(\"Twig.token.findStart: \",\"Searching for \",n.open,\" found at \",o),o>=0&&n.open.length!==n.close.length&&i<0||(o>=0&&(null===s.position||o<s.position)?(s.position=o,s.def=n,a=i):o>=0&&null!==s.position&&o===s.position&&(n.open.length>s.def.open.length?(s.position=o,s.def=n,a=i):n.open.length===s.def.open.length&&(n.close.length,s.def.close.length,i>=0&&i<a&&(s.position=o,s.def=n,a=i))));return s},e.token.findEnd=function(t,r,n){for(var o,i,s=null,a=!1,p=0,c=null,l=null,u=null,f=null,h=null,y=null;!a;){if(c=null,l=null,!((u=t.indexOf(r.close,p))>=0))throw new e.Error(\"Unable to find closing bracket '\"+r.close+\"' opened near template position \"+n);if(s=u,a=!0,r.type===e.token.type.comment)break;if(r.type===e.token.type.raw)break;for(i=e.token.strings.length,o=0;o<i;o+=1)(h=t.indexOf(e.token.strings[o],p))>0&&h<u&&(null===c||h<c)&&(c=h,l=e.token.strings[o]);if(null!==c)for(f=c+1,s=null,a=!1;;){if((y=t.indexOf(l,f))<0)throw\"Unclosed string in template\";if(\"\\\\\"!==t.substr(y-1,1)){p=y+1;break}f=y+1}}return s},e.tokenize=function(t){for(var r=[],n=0,o=null,i=null;t.length>0;)if(o=e.token.findStart(t),e.log.trace(\"Twig.tokenize: \",\"Found token: \",o),null!==o.position){if(o.position>0&&r.push({type:e.token.type.raw,value:t.substring(0,o.position)}),t=t.substr(o.position+o.def.open.length),n+=o.position+o.def.open.length,i=e.token.findEnd(t,o.def,n),e.log.trace(\"Twig.tokenize: \",\"Token ends at \",i),r.push({type:o.def.type,value:t.substring(0,i).trim()}),\"\\n\"===t.substr(i+o.def.close.length,1))switch(o.def.type){case\"logic_whitespace_pre\":case\"logic_whitespace_post\":case\"logic_whitespace_both\":case\"logic\":i+=1}t=t.substr(i+o.def.close.length),n+=i+o.def.close.length}else r.push({type:e.token.type.raw,value:t}),t=\"\";return r},e.compile=function(t){var r=this;return e.attempt(function(){for(var n=[],o=[],i=[],s=null,a=null,p=null,c=null,l=null,u=null,f=null,h=null,y=null,d=null,g=null,m=null,x=function(t){e.expression.compile.call(r,t),o.length>0?i.push(t):n.push(t)},v=function(t){if(a=e.logic.compile.call(r,t),d=a.type,g=e.logic.handler[d].open,m=e.logic.handler[d].next,e.log.trace(\"Twig.compile: \",\"Compiled logic token to \",a,\" next is: \",m,\" open is : \",g),void 0!==g&&!g){if(c=o.pop(),f=e.logic.handler[c.type],e.indexOf(f.next,d)<0)throw new Error(d+\" not expected after a \"+c.type);c.output=c.output||[],c.output=c.output.concat(i),i=[],y={type:e.token.type.logic,token:c},o.length>0?i.push(y):n.push(y)}void 0!==m&&m.length>0?(e.log.trace(\"Twig.compile: \",\"Pushing \",a,\" to logic stack.\"),o.length>0&&((c=o.pop()).output=c.output||[],c.output=c.output.concat(i),o.push(c),i=[]),o.push(a)):void 0!==g&&g&&(y={type:e.token.type.logic,token:a},o.length>0?i.push(y):n.push(y))};t.length>0;){switch(s=t.shift(),l=n[n.length-1],u=i[i.length-1],h=t[0],e.log.trace(\"Compiling token \",s),s.type){case e.token.type.raw:o.length>0?i.push(s):n.push(s);break;case e.token.type.logic:v.call(r,s);break;case e.token.type.comment:break;case e.token.type.output:x.call(r,s);break;case e.token.type.logic_whitespace_pre:case e.token.type.logic_whitespace_post:case e.token.type.logic_whitespace_both:case e.token.type.output_whitespace_pre:case e.token.type.output_whitespace_post:case e.token.type.output_whitespace_both:switch(s.type!==e.token.type.output_whitespace_post&&s.type!==e.token.type.logic_whitespace_post&&(l&&l.type===e.token.type.raw&&(n.pop(),null===l.value.match(/^\\s*$/)&&(l.value=l.value.trim(),n.push(l))),u&&u.type===e.token.type.raw&&(i.pop(),null===u.value.match(/^\\s*$/)&&(u.value=u.value.trim(),i.push(u)))),s.type){case e.token.type.output_whitespace_pre:case e.token.type.output_whitespace_post:case e.token.type.output_whitespace_both:x.call(r,s);break;case e.token.type.logic_whitespace_pre:case e.token.type.logic_whitespace_post:case e.token.type.logic_whitespace_both:v.call(r,s)}s.type!==e.token.type.output_whitespace_pre&&s.type!==e.token.type.logic_whitespace_pre&&h&&h.type===e.token.type.raw&&(t.shift(),null===h.value.match(/^\\s*$/)&&(h.value=h.value.trim(),t.unshift(h)))}e.log.trace(\"Twig.compile: \",\" Output: \",n,\" Logic Stack: \",o,\" Pending Output: \",i)}if(o.length>0)throw p=o.pop(),new Error(\"Unable to find an end tag for \"+p.type+\", expecting one of \"+p.next);return n},function(t){if(r.options.rethrow)throw\"TwigException\"!=t.type||t.file||(t.file=r.id),t;e.log.error(\"Error compiling twig template \"+r.id+\": \"),t.stack?e.log.error(t.stack):e.log.error(t.toString())})},e.parse=function(r,n,o){var i,s=this,a=[],p=null,c=!0,l=!0;function u(e){a.push(e)}function f(e){void 0!==e.chain&&(l=e.chain),void 0!==e.context&&(n=e.context),void 0!==e.output&&a.push(e.output)}if(i=e.async.forEach(r,function(t){switch(e.log.debug(\"Twig.parse: \",\"Parsing token: \",t),t.type){case e.token.type.raw:a.push(e.filters.raw(t.value));break;case e.token.type.logic:return e.logic.parseAsync.call(s,t.token,n,l).then(f);case e.token.type.comment:break;case e.token.type.output_whitespace_pre:case e.token.type.output_whitespace_post:case e.token.type.output_whitespace_both:case e.token.type.output:return e.log.debug(\"Twig.parse: \",\"Output token: \",t.stack),e.expression.parseAsync.call(s,t.stack,n).then(u)}}).then(function(){return a=e.output.call(s,a),c=!1,a}).catch(function(e){o&&t(s,e),p=e}),o)return i;if(null!==p)return t(this,p);if(c)throw new e.Error(\"You are using Twig.js in sync mode in combination with async extensions.\");return a},e.prepare=function(t){var r,n;return e.log.debug(\"Twig.prepare: \",\"Tokenizing \",t),n=e.tokenize.call(this,t),e.log.debug(\"Twig.prepare: \",\"Compiling \",n),r=e.compile.call(this,n),e.log.debug(\"Twig.prepare: \",\"Compiled \",r),r},e.output=function(t){var r=this.options.autoescape;if(!r)return t.join(\"\");var n=\"string\"==typeof r?r:\"html\",o=0,i=t.length,s=\"\",a=new Array(i);for(o=0;o<i;o++)(s=t[o])&&!0!==s.twig_markup&&s.twig_markup!=n&&(s=e.filters.escape(s,[n])),a[o]=s;return a.length<1?\"\":e.Markup(a.join(\"\"),!0)},e.Templates={loaders:{},parsers:{},registry:{}},e.validateId=function(t){if(\"prototype\"===t)throw new e.Error(t+\" is not a valid twig identifier\");if(e.cache&&e.Templates.registry.hasOwnProperty(t))throw new e.Error(\"There is already a template with the ID \"+t);return!0},e.Templates.registerLoader=function(t,r,n){if(\"function\"!=typeof r)throw new e.Error(\"Unable to add loader for \"+t+\": Invalid function reference given.\");n&&(r=r.bind(n)),this.loaders[t]=r},e.Templates.unRegisterLoader=function(e){this.isRegisteredLoader(e)&&delete this.loaders[e]},e.Templates.isRegisteredLoader=function(e){return this.loaders.hasOwnProperty(e)},e.Templates.registerParser=function(t,r,n){if(\"function\"!=typeof r)throw new e.Error(\"Unable to add parser for \"+t+\": Invalid function regerence given.\");n&&(r=r.bind(n)),this.parsers[t]=r},e.Templates.unRegisterParser=function(e){this.isRegisteredParser(e)&&delete this.parsers[e]},e.Templates.isRegisteredParser=function(e){return this.parsers.hasOwnProperty(e)},e.Templates.save=function(t){if(void 0===t.id)throw new e.Error(\"Unable to save template with no id\");e.Templates.registry[t.id]=t},e.Templates.load=function(t){return e.Templates.registry.hasOwnProperty(t)?e.Templates.registry[t]:null},e.Templates.loadRemote=function(t,r,n,o){var i=void 0===r.id?t:r.id,s=e.Templates.registry[i];return e.cache&&void 0!==s?(\"function\"==typeof n&&n(s),s):(r.parser=r.parser||\"twig\",r.id=i,void 0===r.async&&(r.async=!0),(this.loaders[r.method]||this.loaders.fs).call(this,t,r,n,o))},e.Template=function(t){var r,n,o,i=t.data,s=t.id,a=t.blocks,p=t.macros||{},c=t.base,l=t.path,u=t.url,f=t.name,h=t.method,y=t.options;this.id=s,this.method=h,this.base=c,this.path=l,this.url=u,this.name=f,this.macros=p,this.options=y,this.reset(a),r=\"String\",n=i,o=Object.prototype.toString.call(n).slice(8,-1),this.tokens=void 0!==n&&null!==n&&o===r?e.prepare.call(this,i):i,void 0!==s&&e.Templates.save(this)},e.Template.prototype.reset=function(t){e.log.debug(\"Twig.Template.reset\",\"Reseting template \"+this.id),this.blocks={},this.importedBlocks=[],this.originalBlockTokens={},this.child={blocks:t||{}},this.extend=null,this.parseStack=[]},e.Template.prototype.render=function(t,r,n){var o=this;return this.context=t||{},this.reset(),r&&r.blocks&&(this.blocks=r.blocks),r&&r.macros&&(this.macros=r.macros),e.async.potentiallyAsync(this,n,function(){return e.parseAsync.call(this,this.tokens,this.context).then(function(t){var n,i;return o.extend?(o.options.allowInlineIncludes&&(n=e.Templates.load(o.extend))&&(n.options=o.options),n||(i=e.path.parsePath(o,o.extend),n=e.Templates.loadRemote(i,{method:o.getLoaderMethod(),base:o.base,async:!1,id:i,options:o.options})),o.parent=n,o.parent.renderAsync(o.context,{blocks:o.blocks})):r?\"blocks\"==r.output?o.blocks:\"macros\"==r.output?o.macros:t:t})})},e.Template.prototype.importFile=function(t){var r,n;if(!this.url&&this.options.allowInlineIncludes){if(t=this.path?e.path.parsePath(this,t):t,!(n=e.Templates.load(t))&&!(n=e.Templates.loadRemote(r,{id:t,method:this.getLoaderMethod(),async:!1,path:t,options:this.options})))throw new e.Error(\"Unable to find the template \"+t);return n.options=this.options,n}return r=e.path.parsePath(this,t),n=e.Templates.loadRemote(r,{method:this.getLoaderMethod(),base:this.base,async:!1,options:this.options,id:r})},e.Template.prototype.importBlocks=function(t,r){var n=this.importFile(t),o=this.context,i=this;r=r||!1,n.render(o),e.forEach(Object.keys(n.blocks),function(e){(r||void 0===i.blocks[e])&&(i.blocks[e]=n.blocks[e],i.importedBlocks.push(e))})},e.Template.prototype.importMacros=function(t){var r=e.path.parsePath(this,t);return e.Templates.loadRemote(r,{method:this.getLoaderMethod(),async:!1,id:r})},e.Template.prototype.getLoaderMethod=function(){return this.path?\"fs\":this.url?\"ajax\":this.method||\"fs\"},e.Template.prototype.compile=function(t){return e.compiler.compile(this,t)},e.Markup=function(e,t){if(\"string\"!=typeof e||e.length<1)return e;var r=new String(e);return r.twig_markup=void 0===t||t,r},e}},function(e,t,r){\n/**\n * Twig.js\n *\n * @copyright 2011-2016 John Roepke and the Twig.js Contributors\n * @license   Available under the BSD 2-Clause License\n * @link      https://github.com/twigjs/twig.js\n */\nvar n={VERSION:\"1.12.0\"};r(26)(n),r(25)(n),r(24)(n),r(22)(n),r(21)(n),r(20)(n),r(11)(n),r(10)(n),r(8)(n),r(7)(n),r(6)(n),r(5)(n),r(4)(n),r(3)(n),r(2)(n),e.exports=n.exports}])});","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n'use strict';\n\nimport {adapterFactory} from './adapter_factory.js';\n\nconst adapter = adapterFactory({window});\nexport default adapter;\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\nimport * as utils from './utils';\n\n  // Browser shims.\nimport * as chromeShim from './chrome/chrome_shim';\nimport * as edgeShim from './edge/edge_shim';\nimport * as firefoxShim from './firefox/firefox_shim';\nimport * as safariShim from './safari/safari_shim';\nimport * as commonShim from './common_shim';\n\n// Shimming starts here.\nexport function adapterFactory({window} = {}, options = {\n  shimChrome: true,\n  shimFirefox: true,\n  shimEdge: true,\n  shimSafari: true,\n}) {\n  // Utils.\n  const logging = utils.log;\n  const browserDetails = utils.detectBrowser(window);\n\n  const adapter = {\n    browserDetails,\n    commonShim,\n    extractVersion: utils.extractVersion,\n    disableLog: utils.disableLog,\n    disableWarnings: utils.disableWarnings\n  };\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection ||\n          !options.shimChrome) {\n        logging('Chrome shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = chromeShim;\n\n      chromeShim.shimGetUserMedia(window);\n      chromeShim.shimMediaStream(window);\n      chromeShim.shimPeerConnection(window);\n      chromeShim.shimOnTrack(window);\n      chromeShim.shimAddTrackRemoveTrack(window);\n      chromeShim.shimGetSendersWithDtmf(window);\n      chromeShim.shimSenderReceiverGetStats(window);\n      chromeShim.fixNegotiationNeeded(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimConnectionState(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection ||\n          !options.shimFirefox) {\n        logging('Firefox shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = firefoxShim;\n\n      firefoxShim.shimGetUserMedia(window);\n      firefoxShim.shimPeerConnection(window);\n      firefoxShim.shimOnTrack(window);\n      firefoxShim.shimRemoveStream(window);\n      firefoxShim.shimSenderGetStats(window);\n      firefoxShim.shimReceiverGetStats(window);\n      firefoxShim.shimRTCDataChannel(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimConnectionState(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n    case 'edge':\n      if (!edgeShim || !edgeShim.shimPeerConnection || !options.shimEdge) {\n        logging('MS edge shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming edge.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = edgeShim;\n\n      edgeShim.shimGetUserMedia(window);\n      edgeShim.shimGetDisplayMedia(window);\n      edgeShim.shimPeerConnection(window);\n      edgeShim.shimReplaceTrack(window);\n\n      // the edge shim implements the full RTCIceCandidate object.\n\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n    case 'safari':\n      if (!safariShim || !options.shimSafari) {\n        logging('Safari shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = safariShim;\n\n      safariShim.shimRTCIceServerUrls(window);\n      safariShim.shimCreateOfferLegacy(window);\n      safariShim.shimCallbacksAPI(window);\n      safariShim.shimLocalStreamsAPI(window);\n      safariShim.shimRemoteStreamsAPI(window);\n      safariShim.shimTrackEventTransceiver(window);\n      safariShim.shimGetUserMedia(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n    default:\n      logging('Unsupported browser!');\n      break;\n  }\n\n  return adapter;\n}\n","\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\nimport * as utils from '../utils.js';\n\n/* iterates the stats graph recursively. */\nfunction walkStats(stats, base, resultSet) {\n  if (!base || resultSet.has(base.id)) {\n    return;\n  }\n  resultSet.set(base.id, base);\n  Object.keys(base).forEach(name => {\n    if (name.endsWith('Id')) {\n      walkStats(stats, stats.get(base[name]), resultSet);\n    } else if (name.endsWith('Ids')) {\n      base[name].forEach(id => {\n        walkStats(stats, stats.get(id), resultSet);\n      });\n    }\n  });\n}\n\n/* filter getStats for a sender/receiver track. */\nfunction filterStats(result, track, outbound) {\n  const streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';\n  const filteredResult = new Map();\n  if (track === null) {\n    return filteredResult;\n  }\n  const trackStats = [];\n  result.forEach(value => {\n    if (value.type === 'track' &&\n        value.trackIdentifier === track.id) {\n      trackStats.push(value);\n    }\n  });\n  trackStats.forEach(trackStat => {\n    result.forEach(stats => {\n      if (stats.type === streamStatsType && stats.trackId === trackStat.id) {\n        walkStats(result, stats, filteredResult);\n      }\n    });\n  });\n  return filteredResult;\n}\n\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimMediaStream(window) {\n  window.MediaStream = window.MediaStream || window.webkitMediaStream;\n}\n\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n      window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n      get() {\n        return this._ontrack;\n      },\n      set(f) {\n        if (this._ontrack) {\n          this.removeEventListener('track', this._ontrack);\n        }\n        this.addEventListener('track', this._ontrack = f);\n      },\n      enumerable: true,\n      configurable: true\n    });\n    const origSetRemoteDescription =\n        window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription = function() {\n      if (!this._ontrackpoly) {\n        this._ontrackpoly = (e) => {\n          // onaddstream does not fire when a track is added to an existing\n          // stream. But stream.onaddtrack is implemented so we use that.\n          e.stream.addEventListener('addtrack', te => {\n            let receiver;\n            if (window.RTCPeerConnection.prototype.getReceivers) {\n              receiver = this.getReceivers()\n                .find(r => r.track && r.track.id === te.track.id);\n            } else {\n              receiver = {track: te.track};\n            }\n\n            const event = new Event('track');\n            event.track = te.track;\n            event.receiver = receiver;\n            event.transceiver = {receiver};\n            event.streams = [e.stream];\n            this.dispatchEvent(event);\n          });\n          e.stream.getTracks().forEach(track => {\n            let receiver;\n            if (window.RTCPeerConnection.prototype.getReceivers) {\n              receiver = this.getReceivers()\n                .find(r => r.track && r.track.id === track.id);\n            } else {\n              receiver = {track};\n            }\n            const event = new Event('track');\n            event.track = track;\n            event.receiver = receiver;\n            event.transceiver = {receiver};\n            event.streams = [e.stream];\n            this.dispatchEvent(event);\n          });\n        };\n        this.addEventListener('addstream', this._ontrackpoly);\n      }\n      return origSetRemoteDescription.apply(this, arguments);\n    };\n  } else {\n    // even if RTCRtpTransceiver is in window, it is only used and\n    // emitted in unified-plan. Unfortunately this means we need\n    // to unconditionally wrap the event.\n    utils.wrapPeerConnectionEvent(window, 'track', e => {\n      if (!e.transceiver) {\n        Object.defineProperty(e, 'transceiver',\n          {value: {receiver: e.receiver}});\n      }\n      return e;\n    });\n  }\n}\n\nexport function shimGetSendersWithDtmf(window) {\n  // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n  if (typeof window === 'object' && window.RTCPeerConnection &&\n      !('getSenders' in window.RTCPeerConnection.prototype) &&\n      'createDTMFSender' in window.RTCPeerConnection.prototype) {\n    const shimSenderWithDtmf = function(pc, track) {\n      return {\n        track,\n        get dtmf() {\n          if (this._dtmf === undefined) {\n            if (track.kind === 'audio') {\n              this._dtmf = pc.createDTMFSender(track);\n            } else {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        },\n        _pc: pc\n      };\n    };\n\n    // augment addTrack when getSenders is not available.\n    if (!window.RTCPeerConnection.prototype.getSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function() {\n        this._senders = this._senders || [];\n        return this._senders.slice(); // return a copy of the internal state.\n      };\n      const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n      window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n        let sender = origAddTrack.apply(this, arguments);\n        if (!sender) {\n          sender = shimSenderWithDtmf(this, track);\n          this._senders.push(sender);\n        }\n        return sender;\n      };\n\n      const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n      window.RTCPeerConnection.prototype.removeTrack = function(sender) {\n        origRemoveTrack.apply(this, arguments);\n        const idx = this._senders.indexOf(sender);\n        if (idx !== -1) {\n          this._senders.splice(idx, 1);\n        }\n      };\n    }\n    const origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function(stream) {\n      this._senders = this._senders || [];\n      origAddStream.apply(this, [stream]);\n      stream.getTracks().forEach(track => {\n        this._senders.push(shimSenderWithDtmf(this, track));\n      });\n    };\n\n    const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream = function(stream) {\n      this._senders = this._senders || [];\n      origRemoveStream.apply(this, [stream]);\n\n      stream.getTracks().forEach(track => {\n        const sender = this._senders.find(s => s.track === track);\n        if (sender) { // remove sender\n          this._senders.splice(this._senders.indexOf(sender), 1);\n        }\n      });\n    };\n  } else if (typeof window === 'object' && window.RTCPeerConnection &&\n             'getSenders' in window.RTCPeerConnection.prototype &&\n             'createDTMFSender' in window.RTCPeerConnection.prototype &&\n             window.RTCRtpSender &&\n             !('dtmf' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    window.RTCPeerConnection.prototype.getSenders = function() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = this._pc.createDTMFSender(this.track);\n          } else {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n}\n\nexport function shimSenderReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender && window.RTCRtpReceiver)) {\n    return;\n  }\n\n  // shim sender stats.\n  if (!('getStats' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    if (origGetSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function() {\n        const senders = origGetSenders.apply(this, []);\n        senders.forEach(sender => sender._pc = this);\n        return senders;\n      };\n    }\n\n    const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n    if (origAddTrack) {\n      window.RTCPeerConnection.prototype.addTrack = function() {\n        const sender = origAddTrack.apply(this, arguments);\n        sender._pc = this;\n        return sender;\n      };\n    }\n    window.RTCRtpSender.prototype.getStats = function() {\n      const sender = this;\n      return this._pc.getStats().then(result =>\n        /* Note: this will include stats of all senders that\n         *   send a track with the same id as sender.track as\n         *   it is not possible to identify the RTCRtpSender.\n         */\n        filterStats(result, sender.track, true));\n    };\n  }\n\n  // shim receiver stats.\n  if (!('getStats' in window.RTCRtpReceiver.prototype)) {\n    const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n    if (origGetReceivers) {\n      window.RTCPeerConnection.prototype.getReceivers = function() {\n        const receivers = origGetReceivers.apply(this, []);\n        receivers.forEach(receiver => receiver._pc = this);\n        return receivers;\n      };\n    }\n    utils.wrapPeerConnectionEvent(window, 'track', e => {\n      e.receiver._pc = e.srcElement;\n      return e;\n    });\n    window.RTCRtpReceiver.prototype.getStats = function() {\n      const receiver = this;\n      return this._pc.getStats().then(result =>\n        filterStats(result, receiver.track, false));\n    };\n  }\n\n  if (!('getStats' in window.RTCRtpSender.prototype &&\n      'getStats' in window.RTCRtpReceiver.prototype)) {\n    return;\n  }\n\n  // shim RTCPeerConnection.getStats(track).\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function() {\n    if (arguments.length > 0 &&\n        arguments[0] instanceof window.MediaStreamTrack) {\n      const track = arguments[0];\n      let sender;\n      let receiver;\n      let err;\n      this.getSenders().forEach(s => {\n        if (s.track === track) {\n          if (sender) {\n            err = true;\n          } else {\n            sender = s;\n          }\n        }\n      });\n      this.getReceivers().forEach(r => {\n        if (r.track === track) {\n          if (receiver) {\n            err = true;\n          } else {\n            receiver = r;\n          }\n        }\n        return r.track === track;\n      });\n      if (err || (sender && receiver)) {\n        return Promise.reject(new DOMException(\n          'There are more than one sender or receiver for the track.',\n          'InvalidAccessError'));\n      } else if (sender) {\n        return sender.getStats();\n      } else if (receiver) {\n        return receiver.getStats();\n      }\n      return Promise.reject(new DOMException(\n        'There is no sender or receiver for the track.',\n        'InvalidAccessError'));\n    }\n    return origGetStats.apply(this, arguments);\n  };\n}\n\nexport function shimAddTrackRemoveTrackWithNative(window) {\n  // shim addTrack/removeTrack with native variants in order to make\n  // the interactions with legacy getLocalStreams behave as in other browsers.\n  // Keeps a mapping stream.id => [stream, rtpsenders...]\n  window.RTCPeerConnection.prototype.getLocalStreams = function() {\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n    return Object.keys(this._shimmedLocalStreams)\n      .map(streamId => this._shimmedLocalStreams[streamId][0]);\n  };\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n    if (!stream) {\n      return origAddTrack.apply(this, arguments);\n    }\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n    const sender = origAddTrack.apply(this, arguments);\n    if (!this._shimmedLocalStreams[stream.id]) {\n      this._shimmedLocalStreams[stream.id] = [stream, sender];\n    } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\n      this._shimmedLocalStreams[stream.id].push(sender);\n    }\n    return sender;\n  };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function(stream) {\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n    });\n    const existingSenders = this.getSenders();\n    origAddStream.apply(this, arguments);\n    const newSenders = this.getSenders()\n      .filter(newSender => existingSenders.indexOf(newSender) === -1);\n    this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream = function(stream) {\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n    delete this._shimmedLocalStreams[stream.id];\n    return origRemoveStream.apply(this, arguments);\n  };\n\n  const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n  window.RTCPeerConnection.prototype.removeTrack = function(sender) {\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n    if (sender) {\n      Object.keys(this._shimmedLocalStreams).forEach(streamId => {\n        const idx = this._shimmedLocalStreams[streamId].indexOf(sender);\n        if (idx !== -1) {\n          this._shimmedLocalStreams[streamId].splice(idx, 1);\n        }\n        if (this._shimmedLocalStreams[streamId].length === 1) {\n          delete this._shimmedLocalStreams[streamId];\n        }\n      });\n    }\n    return origRemoveTrack.apply(this, arguments);\n  };\n}\n\nexport function shimAddTrackRemoveTrack(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  const browserDetails = utils.detectBrowser(window);\n  // shim addTrack and removeTrack.\n  if (window.RTCPeerConnection.prototype.addTrack &&\n      browserDetails.version >= 65) {\n    return shimAddTrackRemoveTrackWithNative(window);\n  }\n\n  // also shim pc.getLocalStreams when addTrack is shimmed\n  // to return the original streams.\n  const origGetLocalStreams = window.RTCPeerConnection.prototype\n      .getLocalStreams;\n  window.RTCPeerConnection.prototype.getLocalStreams = function() {\n    const nativeStreams = origGetLocalStreams.apply(this);\n    this._reverseStreams = this._reverseStreams || {};\n    return nativeStreams.map(stream => this._reverseStreams[stream.id]);\n  };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function(stream) {\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n    });\n    // Add identity mapping for consistency with addTrack.\n    // Unless this is being used with a stream from addTrack.\n    if (!this._reverseStreams[stream.id]) {\n      const newStream = new window.MediaStream(stream.getTracks());\n      this._streams[stream.id] = newStream;\n      this._reverseStreams[newStream.id] = stream;\n      stream = newStream;\n    }\n    origAddStream.apply(this, [stream]);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream = function(stream) {\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n\n    origRemoveStream.apply(this, [(this._streams[stream.id] || stream)]);\n    delete this._reverseStreams[(this._streams[stream.id] ?\n        this._streams[stream.id].id : stream.id)];\n    delete this._streams[stream.id];\n  };\n\n  window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n    if (this.signalingState === 'closed') {\n      throw new DOMException(\n        'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n        'InvalidStateError');\n    }\n    const streams = [].slice.call(arguments, 1);\n    if (streams.length !== 1 ||\n        !streams[0].getTracks().find(t => t === track)) {\n      // this is not fully correct but all we can manage without\n      // [[associated MediaStreams]] internal slot.\n      throw new DOMException(\n        'The adapter.js addTrack polyfill only supports a single ' +\n        ' stream which is associated with the specified track.',\n        'NotSupportedError');\n    }\n\n    const alreadyExists = this.getSenders().find(s => s.track === track);\n    if (alreadyExists) {\n      throw new DOMException('Track already exists.',\n          'InvalidAccessError');\n    }\n\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n    const oldStream = this._streams[stream.id];\n    if (oldStream) {\n      // this is using odd Chrome behaviour, use with caution:\n      // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n      // Note: we rely on the high-level addTrack/dtmf shim to\n      // create the sender with a dtmf sender.\n      oldStream.addTrack(track);\n\n      // Trigger ONN async.\n      Promise.resolve().then(() => {\n        this.dispatchEvent(new Event('negotiationneeded'));\n      });\n    } else {\n      const newStream = new window.MediaStream([track]);\n      this._streams[stream.id] = newStream;\n      this._reverseStreams[newStream.id] = stream;\n      this.addStream(newStream);\n    }\n    return this.getSenders().find(s => s.track === track);\n  };\n\n  // replace the internal stream id with the external one and\n  // vice versa.\n  function replaceInternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(internalStream.id, 'g'),\n          externalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  function replaceExternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(externalStream.id, 'g'),\n          internalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  ['createOffer', 'createAnswer'].forEach(function(method) {\n    const nativeMethod = window.RTCPeerConnection.prototype[method];\n    window.RTCPeerConnection.prototype[method] = function() {\n      const args = arguments;\n      const isLegacyCall = arguments.length &&\n          typeof arguments[0] === 'function';\n      if (isLegacyCall) {\n        return nativeMethod.apply(this, [\n          (description) => {\n            const desc = replaceInternalStreamId(this, description);\n            args[0].apply(null, [desc]);\n          },\n          (err) => {\n            if (args[1]) {\n              args[1].apply(null, err);\n            }\n          }, arguments[2]\n        ]);\n      }\n      return nativeMethod.apply(this, arguments)\n      .then(description => replaceInternalStreamId(this, description));\n    };\n  });\n\n  const origSetLocalDescription =\n      window.RTCPeerConnection.prototype.setLocalDescription;\n  window.RTCPeerConnection.prototype.setLocalDescription = function() {\n    if (!arguments.length || !arguments[0].type) {\n      return origSetLocalDescription.apply(this, arguments);\n    }\n    arguments[0] = replaceExternalStreamId(this, arguments[0]);\n    return origSetLocalDescription.apply(this, arguments);\n  };\n\n  // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n  const origLocalDescription = Object.getOwnPropertyDescriptor(\n      window.RTCPeerConnection.prototype, 'localDescription');\n  Object.defineProperty(window.RTCPeerConnection.prototype,\n      'localDescription', {\n        get() {\n          const description = origLocalDescription.get.apply(this);\n          if (description.type === '') {\n            return description;\n          }\n          return replaceInternalStreamId(this, description);\n        }\n      });\n\n  window.RTCPeerConnection.prototype.removeTrack = function(sender) {\n    if (this.signalingState === 'closed') {\n      throw new DOMException(\n        'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n        'InvalidStateError');\n    }\n    // We can not yet check for sender instanceof RTCRtpSender\n    // since we shim RTPSender. So we check if sender._pc is set.\n    if (!sender._pc) {\n      throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' +\n          'does not implement interface RTCRtpSender.', 'TypeError');\n    }\n    const isLocal = sender._pc === this;\n    if (!isLocal) {\n      throw new DOMException('Sender was not created by this connection.',\n          'InvalidAccessError');\n    }\n\n    // Search for the native stream the senders track belongs to.\n    this._streams = this._streams || {};\n    let stream;\n    Object.keys(this._streams).forEach(streamid => {\n      const hasTrack = this._streams[streamid].getTracks()\n        .find(track => sender.track === track);\n      if (hasTrack) {\n        stream = this._streams[streamid];\n      }\n    });\n\n    if (stream) {\n      if (stream.getTracks().length === 1) {\n        // if this is the last track of the stream, remove the stream. This\n        // takes care of any shimmed _senders.\n        this.removeStream(this._reverseStreams[stream.id]);\n      } else {\n        // relying on the same odd chrome behaviour as above.\n        stream.removeTrack(sender.track);\n      }\n      this.dispatchEvent(new Event('negotiationneeded'));\n    }\n  };\n}\n\nexport function shimPeerConnection(window) {\n  if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.webkitRTCPeerConnection;\n  }\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function(selector,\n      successCallback, errorCallback) {\n    const args = arguments;\n\n    // If selector is a function then we are in the old style stats so just\n    // pass back the original getStats format to avoid breaking old users.\n    if (arguments.length > 0 && typeof selector === 'function') {\n      return origGetStats.apply(this, arguments);\n    }\n\n    // When spec-style getStats is supported, return those when called with\n    // either no arguments or the selector argument is null.\n    if (origGetStats.length === 0 && (arguments.length === 0 ||\n        typeof arguments[0] !== 'function')) {\n      return origGetStats.apply(this, []);\n    }\n\n    const fixChromeStats_ = function(response) {\n      const standardReport = {};\n      const reports = response.result();\n      reports.forEach(report => {\n        const standardStats = {\n          id: report.id,\n          timestamp: report.timestamp,\n          type: {\n            localcandidate: 'local-candidate',\n            remotecandidate: 'remote-candidate'\n          }[report.type] || report.type\n        };\n        report.names().forEach(name => {\n          standardStats[name] = report.stat(name);\n        });\n        standardReport[standardStats.id] = standardStats;\n      });\n\n      return standardReport;\n    };\n\n    // shim getStats with maplike support\n    const makeMapStats = function(stats) {\n      return new Map(Object.keys(stats).map(key => [key, stats[key]]));\n    };\n\n    if (arguments.length >= 2) {\n      const successCallbackWrapper_ = function(response) {\n        args[1](makeMapStats(fixChromeStats_(response)));\n      };\n\n      return origGetStats.apply(this, [successCallbackWrapper_,\n        arguments[0]]);\n    }\n\n    // promise-support\n    return new Promise((resolve, reject) => {\n      origGetStats.apply(this, [\n        function(response) {\n          resolve(makeMapStats(fixChromeStats_(response)));\n        }, reject]);\n    }).then(successCallback, errorCallback);\n  };\n\n  // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n  ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n      .forEach(function(method) {\n        const nativeMethod = window.RTCPeerConnection.prototype[method];\n        window.RTCPeerConnection.prototype[method] = function() {\n          arguments[0] = new ((method === 'addIceCandidate') ?\n              window.RTCIceCandidate :\n              window.RTCSessionDescription)(arguments[0]);\n          return nativeMethod.apply(this, arguments);\n        };\n      });\n\n  // support for addIceCandidate(null or undefined)\n  const nativeAddIceCandidate =\n      window.RTCPeerConnection.prototype.addIceCandidate;\n  window.RTCPeerConnection.prototype.addIceCandidate = function() {\n    if (!arguments[0]) {\n      if (arguments[1]) {\n        arguments[1].apply(null);\n      }\n      return Promise.resolve();\n    }\n    return nativeAddIceCandidate.apply(this, arguments);\n  };\n}\n\nexport function fixNegotiationNeeded(window) {\n  utils.wrapPeerConnectionEvent(window, 'negotiationneeded', e => {\n    const pc = e.target;\n    if (pc.signalingState !== 'stable') {\n      return;\n    }\n    return e;\n  });\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nexport function shimGetDisplayMedia(window, getSourceId) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  // getSourceId is a function that returns a promise resolving with\n  // the sourceId of the screen/window/tab to be shared.\n  if (typeof getSourceId !== 'function') {\n    console.error('shimGetDisplayMedia: getSourceId argument is not ' +\n        'a function');\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia = function(constraints) {\n    return getSourceId(constraints)\n      .then(sourceId => {\n        const widthSpecified = constraints.video && constraints.video.width;\n        const heightSpecified = constraints.video && constraints.video.height;\n        const frameRateSpecified = constraints.video &&\n          constraints.video.frameRate;\n        constraints.video = {\n          mandatory: {\n            chromeMediaSource: 'desktop',\n            chromeMediaSourceId: sourceId,\n            maxFrameRate: frameRateSpecified || 3\n          }\n        };\n        if (widthSpecified) {\n          constraints.video.mandatory.maxWidth = widthSpecified;\n        }\n        if (heightSpecified) {\n          constraints.video.mandatory.maxHeight = heightSpecified;\n        }\n        return window.navigator.mediaDevices.getUserMedia(constraints);\n      });\n  };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nimport * as utils from '../utils.js';\nconst logging = utils.log;\n\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  if (!navigator.mediaDevices) {\n    return;\n  }\n\n  const browserDetails = utils.detectBrowser(window);\n\n  const constraintsToChrome_ = function(c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    const cc = {};\n    Object.keys(c).forEach(key => {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      const r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      const oldname_ = function(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return (name === 'deviceId') ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        let oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(mix => {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  const shimConstraints_ = function(constraints, func) {\n    if (browserDetails.version >= 61) {\n      return func(constraints);\n    }\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && typeof constraints.audio === 'object') {\n      const remap = function(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && typeof constraints.video === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      let face = constraints.video.facingMode;\n      face = face && ((typeof face === 'object') ? face : {ideal: face});\n      const getSupportedFacingModeLies = browserDetails.version < 66;\n\n      if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                    face.ideal === 'user' || face.ideal === 'environment')) &&\n          !(navigator.mediaDevices.getSupportedConstraints &&\n            navigator.mediaDevices.getSupportedConstraints().facingMode &&\n            !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        let matches;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices()\n          .then(devices => {\n            devices = devices.filter(d => d.kind === 'videoinput');\n            let dev = devices.find(d => matches.some(match =>\n              d.label.toLowerCase().includes(match)));\n            if (!dev && devices.length && matches.includes('back')) {\n              dev = devices[devices.length - 1]; // more likely the back cam\n            }\n            if (dev) {\n              constraints.video.deviceId = face.exact ? {exact: dev.deviceId} :\n                                                        {ideal: dev.deviceId};\n            }\n            constraints.video = constraintsToChrome_(constraints.video);\n            logging('chrome: ' + JSON.stringify(constraints));\n            return func(constraints);\n          });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  const shimError_ = function(e) {\n    if (browserDetails.version >= 64) {\n      return e;\n    }\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        PermissionDismissedError: 'NotAllowedError',\n        InvalidStateError: 'NotAllowedError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n        MediaDeviceKillSwitchOn: 'NotAllowedError',\n        TabCaptureError: 'AbortError',\n        ScreenCaptureError: 'AbortError',\n        DeviceCaptureError: 'AbortError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint || e.constraintName,\n      toString() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  const getUserMedia_ = function(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, c => {\n      navigator.webkitGetUserMedia(c, onSuccess, e => {\n        if (onError) {\n          onError(shimError_(e));\n        }\n      });\n    });\n  };\n  navigator.getUserMedia = getUserMedia_.bind(navigator);\n\n  // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n  // function which returns a Promise, it does not accept spec-style\n  // constraints.\n  const origGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n  navigator.mediaDevices.getUserMedia = function(cs) {\n    return shimConstraints_(cs, c => origGetUserMedia(c).then(stream => {\n      if (c.audio && !stream.getAudioTracks().length ||\n          c.video && !stream.getVideoTracks().length) {\n        stream.getTracks().forEach(track => {\n          track.stop();\n        });\n        throw new DOMException('', 'NotFoundError');\n      }\n      return stream;\n    }, e => Promise.reject(shimError_(e))));\n  };\n}\n","/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport SDPUtils from 'sdp';\nimport * as utils from './utils';\n\nexport function shimRTCIceCandidate(window) {\n  // foundation is arbitrarily chosen as an indicator for full support for\n  // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n  if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'foundation' in\n      window.RTCIceCandidate.prototype)) {\n    return;\n  }\n\n  const NativeRTCIceCandidate = window.RTCIceCandidate;\n  window.RTCIceCandidate = function(args) {\n    // Remove the a= which shouldn't be part of the candidate string.\n    if (typeof args === 'object' && args.candidate &&\n        args.candidate.indexOf('a=') === 0) {\n      args = JSON.parse(JSON.stringify(args));\n      args.candidate = args.candidate.substr(2);\n    }\n\n    if (args.candidate && args.candidate.length) {\n      // Augment the native candidate with the parsed fields.\n      const nativeCandidate = new NativeRTCIceCandidate(args);\n      const parsedCandidate = SDPUtils.parseCandidate(args.candidate);\n      const augmentedCandidate = Object.assign(nativeCandidate,\n          parsedCandidate);\n\n      // Add a serializer that does not serialize the extra attributes.\n      augmentedCandidate.toJSON = function() {\n        return {\n          candidate: augmentedCandidate.candidate,\n          sdpMid: augmentedCandidate.sdpMid,\n          sdpMLineIndex: augmentedCandidate.sdpMLineIndex,\n          usernameFragment: augmentedCandidate.usernameFragment,\n        };\n      };\n      return augmentedCandidate;\n    }\n    return new NativeRTCIceCandidate(args);\n  };\n  window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;\n\n  // Hook up the augmented candidate in onicecandidate and\n  // addEventListener('icecandidate', ...)\n  utils.wrapPeerConnectionEvent(window, 'icecandidate', e => {\n    if (e.candidate) {\n      Object.defineProperty(e, 'candidate', {\n        value: new window.RTCIceCandidate(e.candidate),\n        writable: 'false'\n      });\n    }\n    return e;\n  });\n}\n\nexport function shimMaxMessageSize(window) {\n  if (window.RTCSctpTransport || !window.RTCPeerConnection) {\n    return;\n  }\n  const browserDetails = utils.detectBrowser(window);\n\n  if (!('sctp' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\n      get() {\n        return typeof this._sctp === 'undefined' ? null : this._sctp;\n      }\n    });\n  }\n\n  const sctpInDescription = function(description) {\n    const sections = SDPUtils.splitSections(description.sdp);\n    sections.shift();\n    return sections.some(mediaSection => {\n      const mLine = SDPUtils.parseMLine(mediaSection);\n      return mLine && mLine.kind === 'application'\n          && mLine.protocol.indexOf('SCTP') !== -1;\n    });\n  };\n\n  const getRemoteFirefoxVersion = function(description) {\n    // TODO: Is there a better solution for detecting Firefox?\n    const match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n    if (match === null || match.length < 2) {\n      return -1;\n    }\n    const version = parseInt(match[1], 10);\n    // Test for NaN (yes, this is ugly)\n    return version !== version ? -1 : version;\n  };\n\n  const getCanSendMaxMessageSize = function(remoteIsFirefox) {\n    // Every implementation we know can send at least 64 KiB.\n    // Note: Although Chrome is technically able to send up to 256 KiB, the\n    //       data does not reach the other peer reliably.\n    //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n    let canSendMaxMessageSize = 65536;\n    if (browserDetails.browser === 'firefox') {\n      if (browserDetails.version < 57) {\n        if (remoteIsFirefox === -1) {\n          // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n          // fragmentation.\n          canSendMaxMessageSize = 16384;\n        } else {\n          // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n          // messages. Thus, supporting ~2 GiB when sending.\n          canSendMaxMessageSize = 2147483637;\n        }\n      } else if (browserDetails.version < 60) {\n        // Currently, all FF >= 57 will reset the remote maximum message size\n        // to the default value when a data channel is created at a later\n        // stage. :(\n        // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n        canSendMaxMessageSize =\n          browserDetails.version === 57 ? 65535 : 65536;\n      } else {\n        // FF >= 60 supports sending ~2 GiB\n        canSendMaxMessageSize = 2147483637;\n      }\n    }\n    return canSendMaxMessageSize;\n  };\n\n  const getMaxMessageSize = function(description, remoteIsFirefox) {\n    // Note: 65536 bytes is the default value from the SDP spec. Also,\n    //       every implementation we know supports receiving 65536 bytes.\n    let maxMessageSize = 65536;\n\n    // FF 57 has a slightly incorrect default remote max message size, so\n    // we need to adjust it here to avoid a failure when sending.\n    // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n    if (browserDetails.browser === 'firefox'\n         && browserDetails.version === 57) {\n      maxMessageSize = 65535;\n    }\n\n    const match = SDPUtils.matchPrefix(description.sdp,\n      'a=max-message-size:');\n    if (match.length > 0) {\n      maxMessageSize = parseInt(match[0].substr(19), 10);\n    } else if (browserDetails.browser === 'firefox' &&\n                remoteIsFirefox !== -1) {\n      // If the maximum message size is not present in the remote SDP and\n      // both local and remote are Firefox, the remote peer can receive\n      // ~2 GiB.\n      maxMessageSize = 2147483637;\n    }\n    return maxMessageSize;\n  };\n\n  const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription = function() {\n    this._sctp = null;\n\n    if (sctpInDescription(arguments[0])) {\n      // Check if the remote is FF.\n      const isFirefox = getRemoteFirefoxVersion(arguments[0]);\n\n      // Get the maximum message size the local peer is capable of sending\n      const canSendMMS = getCanSendMaxMessageSize(isFirefox);\n\n      // Get the maximum message size of the remote peer.\n      const remoteMMS = getMaxMessageSize(arguments[0], isFirefox);\n\n      // Determine final maximum message size\n      let maxMessageSize;\n      if (canSendMMS === 0 && remoteMMS === 0) {\n        maxMessageSize = Number.POSITIVE_INFINITY;\n      } else if (canSendMMS === 0 || remoteMMS === 0) {\n        maxMessageSize = Math.max(canSendMMS, remoteMMS);\n      } else {\n        maxMessageSize = Math.min(canSendMMS, remoteMMS);\n      }\n\n      // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n      // attribute.\n      const sctp = {};\n      Object.defineProperty(sctp, 'maxMessageSize', {\n        get() {\n          return maxMessageSize;\n        }\n      });\n      this._sctp = sctp;\n    }\n\n    return origSetRemoteDescription.apply(this, arguments);\n  };\n}\n\nexport function shimSendThrowTypeError(window) {\n  if (!(window.RTCPeerConnection &&\n      'createDataChannel' in window.RTCPeerConnection.prototype)) {\n    return;\n  }\n\n  // Note: Although Firefox >= 57 has a native implementation, the maximum\n  //       message size can be reset for all data channels at a later stage.\n  //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\n  function wrapDcSend(dc, pc) {\n    const origDataChannelSend = dc.send;\n    dc.send = function() {\n      const data = arguments[0];\n      const length = data.length || data.size || data.byteLength;\n      if (dc.readyState === 'open' &&\n          pc.sctp && length > pc.sctp.maxMessageSize) {\n        throw new TypeError('Message too large (can send a maximum of ' +\n          pc.sctp.maxMessageSize + ' bytes)');\n      }\n      return origDataChannelSend.apply(dc, arguments);\n    };\n  }\n  const origCreateDataChannel =\n    window.RTCPeerConnection.prototype.createDataChannel;\n  window.RTCPeerConnection.prototype.createDataChannel = function() {\n    const dataChannel = origCreateDataChannel.apply(this, arguments);\n    wrapDcSend(dataChannel, this);\n    return dataChannel;\n  };\n  utils.wrapPeerConnectionEvent(window, 'datachannel', e => {\n    wrapDcSend(e.channel, e.target);\n    return e;\n  });\n}\n\n\n/* shims RTCConnectionState by pretending it is the same as iceConnectionState.\n * See https://bugs.chromium.org/p/webrtc/issues/detail?id=6145#c12\n * for why this is a valid hack in Chrome. In Firefox it is slightly incorrect\n * since DTLS failures would be hidden. See\n * https://bugzilla.mozilla.org/show_bug.cgi?id=1265827\n * for the Firefox tracking bug.\n */\nexport function shimConnectionState(window) {\n  if (!window.RTCPeerConnection ||\n      'connectionState' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  Object.defineProperty(proto, 'connectionState', {\n    get() {\n      return {\n        completed: 'connected',\n        checking: 'connecting'\n      }[this.iceConnectionState] || this.iceConnectionState;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(proto, 'onconnectionstatechange', {\n    get() {\n      return this._onconnectionstatechange || null;\n    },\n    set(cb) {\n      if (this._onconnectionstatechange) {\n        this.removeEventListener('connectionstatechange',\n            this._onconnectionstatechange);\n        delete this._onconnectionstatechange;\n      }\n      if (cb) {\n        this.addEventListener('connectionstatechange',\n            this._onconnectionstatechange = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ['setLocalDescription', 'setRemoteDescription'].forEach((method) => {\n    const origMethod = proto[method];\n    proto[method] = function() {\n      if (!this._connectionstatechangepoly) {\n        this._connectionstatechangepoly = e => {\n          const pc = e.target;\n          if (pc._lastConnectionState !== pc.connectionState) {\n            pc._lastConnectionState = pc.connectionState;\n            const newEvent = new Event('connectionstatechange', e);\n            pc.dispatchEvent(newEvent);\n          }\n          return e;\n        };\n        this.addEventListener('iceconnectionstatechange',\n          this._connectionstatechangepoly);\n      }\n      return origMethod.apply(this, arguments);\n    };\n  });\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\nimport {filterIceServers} from './filtericeservers';\nimport shimRTCPeerConnection from 'rtcpeerconnection-shim';\n\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimPeerConnection(window) {\n  const browserDetails = utils.detectBrowser(window);\n\n  if (window.RTCIceGatherer) {\n    if (!window.RTCIceCandidate) {\n      window.RTCIceCandidate = function(args) {\n        return args;\n      };\n    }\n    if (!window.RTCSessionDescription) {\n      window.RTCSessionDescription = function(args) {\n        return args;\n      };\n    }\n    // this adds an additional event listener to MediaStrackTrack that signals\n    // when a tracks enabled property was changed. Workaround for a bug in\n    // addStream, see below. No longer required in 15025+\n    if (browserDetails.version < 15025) {\n      const origMSTEnabled = Object.getOwnPropertyDescriptor(\n          window.MediaStreamTrack.prototype, 'enabled');\n      Object.defineProperty(window.MediaStreamTrack.prototype, 'enabled', {\n        set(value) {\n          origMSTEnabled.set.call(this, value);\n          const ev = new Event('enabled');\n          ev.enabled = value;\n          this.dispatchEvent(ev);\n        }\n      });\n    }\n  }\n\n  // ORTC defines the DTMF sender a bit different.\n  // https://github.com/w3c/ortc/issues/714\n  if (window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = new window.RTCDtmfSender(this);\n          } else if (this.track.kind === 'video') {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n  // Edge currently only implements the RTCDtmfSender, not the\n  // RTCDTMFSender alias. See http://draft.ortc.org/#rtcdtmfsender2*\n  if (window.RTCDtmfSender && !window.RTCDTMFSender) {\n    window.RTCDTMFSender = window.RTCDtmfSender;\n  }\n\n  const RTCPeerConnectionShim = shimRTCPeerConnection(window,\n      browserDetails.version);\n  window.RTCPeerConnection = function(config) {\n    if (config && config.iceServers) {\n      config.iceServers = filterIceServers(config.iceServers,\n        browserDetails.version);\n      utils.log('ICE servers after filtering:', config.iceServers);\n    }\n    return new RTCPeerConnectionShim(config);\n  };\n  window.RTCPeerConnection.prototype = RTCPeerConnectionShim.prototype;\n}\n\nexport function shimReplaceTrack(window) {\n  // ORTC has replaceTrack -- https://github.com/w3c/ortc/issues/614\n  if (window.RTCRtpSender &&\n      !('replaceTrack' in window.RTCRtpSender.prototype)) {\n    window.RTCRtpSender.prototype.replaceTrack =\n        window.RTCRtpSender.prototype.setTrack;\n  }\n}\n","/*\n *  Copyright (c) 2018 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nexport function filterIceServers(iceServers, edgeVersion) {\n  let hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(server => {\n    if (server && (server.urls || server.url)) {\n      var urls = server.urls || server.url;\n      if (server.url && !server.urls) {\n        utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n      }\n      const isString = typeof urls === 'string';\n      if (isString) {\n        urls = [urls];\n      }\n      urls = urls.filter(url => {\n        // filter STUN unconditionally.\n        if (url.indexOf('stun:') === 0) {\n          return false;\n        }\n\n        const validTurn = url.startsWith('turn') &&\n            !url.startsWith('turn:[') &&\n            url.includes('transport=udp');\n        if (validTurn && !hasTurn) {\n          hasTurn = true;\n          return true;\n        }\n        return validTurn && !hasTurn;\n      });\n\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n  });\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nexport function shimGetDisplayMedia(window) {\n  if (!('getDisplayMedia' in window.navigator)) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    window.navigator.getDisplayMedia.bind(window.navigator.mediaDevices);\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  const shimError_ = function(e) {\n    return {\n      name: {PermissionDeniedError: 'NotAllowedError'}[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint,\n      toString() {\n        return this.name;\n      }\n    };\n  };\n\n  // getUserMedia error shim.\n  const origGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n  navigator.mediaDevices.getUserMedia = function(c) {\n    return origGetUserMedia(c).catch(e => Promise.reject(shimError_(e)));\n  };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      ('receiver' in window.RTCTrackEvent.prototype) &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimPeerConnection(window) {\n  const browserDetails = utils.detectBrowser(window);\n\n  if (typeof window !== 'object' ||\n      !(window.RTCPeerConnection || window.mozRTCPeerConnection)) {\n    return; // probably media.peerconnection.enabled=false in about:config\n  }\n  if (!window.RTCPeerConnection && window.mozRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.mozRTCPeerConnection;\n  }\n\n  // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n  ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n      .forEach(function(method) {\n        const nativeMethod = window.RTCPeerConnection.prototype[method];\n        window.RTCPeerConnection.prototype[method] = function() {\n          arguments[0] = new ((method === 'addIceCandidate') ?\n              window.RTCIceCandidate :\n              window.RTCSessionDescription)(arguments[0]);\n          return nativeMethod.apply(this, arguments);\n        };\n      });\n\n  // support for addIceCandidate(null or undefined)\n  const nativeAddIceCandidate =\n      window.RTCPeerConnection.prototype.addIceCandidate;\n  window.RTCPeerConnection.prototype.addIceCandidate = function() {\n    if (!arguments[0]) {\n      if (arguments[1]) {\n        arguments[1].apply(null);\n      }\n      return Promise.resolve();\n    }\n    return nativeAddIceCandidate.apply(this, arguments);\n  };\n\n  const modernStatsTypes = {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  };\n\n  const nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function(\n    selector,\n    onSucc,\n    onErr\n  ) {\n    return nativeGetStats.apply(this, [selector || null])\n      .then(stats => {\n        if (browserDetails.version < 53 && !onSucc) {\n          // Shim only promise getStats with spec-hyphens in type names\n          // Leave callback version alone; misc old uses of forEach before Map\n          try {\n            stats.forEach(stat => {\n              stat.type = modernStatsTypes[stat.type] || stat.type;\n            });\n          } catch (e) {\n            if (e.name !== 'TypeError') {\n              throw e;\n            }\n            // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n            stats.forEach((stat, i) => {\n              stats.set(i, Object.assign({}, stat, {\n                type: modernStatsTypes[stat.type] || stat.type\n              }));\n            });\n          }\n        }\n        return stats;\n      })\n      .then(onSucc, onErr);\n  };\n}\n\nexport function shimSenderGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {\n    return;\n  }\n  const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n  if (origGetSenders) {\n    window.RTCPeerConnection.prototype.getSenders = function() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n  }\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  if (origAddTrack) {\n    window.RTCPeerConnection.prototype.addTrack = function() {\n      const sender = origAddTrack.apply(this, arguments);\n      sender._pc = this;\n      return sender;\n    };\n  }\n  window.RTCRtpSender.prototype.getStats = function() {\n    return this.track ? this._pc.getStats(this.track) :\n        Promise.resolve(new Map());\n  };\n}\n\nexport function shimReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {\n    return;\n  }\n  const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n  if (origGetReceivers) {\n    window.RTCPeerConnection.prototype.getReceivers = function() {\n      const receivers = origGetReceivers.apply(this, []);\n      receivers.forEach(receiver => receiver._pc = this);\n      return receivers;\n    };\n  }\n  utils.wrapPeerConnectionEvent(window, 'track', e => {\n    e.receiver._pc = e.srcElement;\n    return e;\n  });\n  window.RTCRtpReceiver.prototype.getStats = function() {\n    return this._pc.getStats(this.track);\n  };\n}\n\nexport function shimRemoveStream(window) {\n  if (!window.RTCPeerConnection ||\n      'removeStream' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.removeStream = function(stream) {\n    utils.deprecated('removeStream', 'removeTrack');\n    this.getSenders().forEach(sender => {\n      if (sender.track && stream.getTracks().includes(sender.track)) {\n        this.removeTrack(sender);\n      }\n    });\n  };\n}\n\nexport function shimRTCDataChannel(window) {\n  // rename DataChannel to RTCDataChannel (native fix in FF60):\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851\n  if (window.DataChannel && !window.RTCDataChannel) {\n    window.RTCDataChannel = window.DataChannel;\n  }\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nexport function shimGetDisplayMedia(window, preferredMediaSource) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia = function(constraints) {\n    if (!(constraints && constraints.video)) {\n      const err = new DOMException('getDisplayMedia without video ' +\n          'constraints is undefined');\n      err.name = 'NotFoundError';\n      // from https://heycam.github.io/webidl/#idl-DOMException-error-names\n      err.code = 8;\n      return Promise.reject(err);\n    }\n    if (constraints.video === true) {\n      constraints.video = {mediaSource: preferredMediaSource};\n    } else {\n      constraints.video.mediaSource = preferredMediaSource;\n    }\n    return window.navigator.mediaDevices.getUserMedia(constraints);\n  };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\n\nexport function shimGetUserMedia(window) {\n  const browserDetails = utils.detectBrowser(window);\n  const navigator = window && window.navigator;\n  const MediaStreamTrack = window && window.MediaStreamTrack;\n\n  navigator.getUserMedia = function(constraints, onSuccess, onError) {\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    utils.deprecated('navigator.getUserMedia',\n        'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n\n  if (!(browserDetails.version > 55 &&\n      'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n    const remap = function(obj, a, b) {\n      if (a in obj && !(b in obj)) {\n        obj[b] = obj[a];\n        delete obj[a];\n      }\n    };\n\n    const nativeGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      if (typeof c === 'object' && typeof c.audio === 'object') {\n        c = JSON.parse(JSON.stringify(c));\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n      }\n      return nativeGetUserMedia(c);\n    };\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n      const nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n      MediaStreamTrack.prototype.getSettings = function() {\n        const obj = nativeGetSettings.apply(this, arguments);\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n        return obj;\n      };\n    }\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n      const nativeApplyConstraints =\n        MediaStreamTrack.prototype.applyConstraints;\n      MediaStreamTrack.prototype.applyConstraints = function(c) {\n        if (this.kind === 'audio' && typeof c === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeApplyConstraints.apply(this, [c]);\n      };\n    }\n  }\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\nimport * as utils from '../utils';\n\nexport function shimLocalStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getLocalStreams = function() {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      return this._localStreams;\n    };\n  }\n  if (!('addStream' in window.RTCPeerConnection.prototype)) {\n    const _addTrack = window.RTCPeerConnection.prototype.addTrack;\n    window.RTCPeerConnection.prototype.addStream = function(stream) {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      if (!this._localStreams.includes(stream)) {\n        this._localStreams.push(stream);\n      }\n      stream.getTracks().forEach(track => _addTrack.call(this, track, stream));\n    };\n\n    window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n      if (stream) {\n        if (!this._localStreams) {\n          this._localStreams = [stream];\n        } else if (!this._localStreams.includes(stream)) {\n          this._localStreams.push(stream);\n        }\n      }\n      return _addTrack.call(this, track, stream);\n    };\n  }\n  if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.removeStream = function(stream) {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      const index = this._localStreams.indexOf(stream);\n      if (index === -1) {\n        return;\n      }\n      this._localStreams.splice(index, 1);\n      const tracks = stream.getTracks();\n      this.getSenders().forEach(sender => {\n        if (tracks.includes(sender.track)) {\n          this.removeTrack(sender);\n        }\n      });\n    };\n  }\n}\n\nexport function shimRemoteStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getRemoteStreams = function() {\n      return this._remoteStreams ? this._remoteStreams : [];\n    };\n  }\n  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n      get() {\n        return this._onaddstream;\n      },\n      set(f) {\n        if (this._onaddstream) {\n          this.removeEventListener('addstream', this._onaddstream);\n          this.removeEventListener('track', this._onaddstreampoly);\n        }\n        this.addEventListener('addstream', this._onaddstream = f);\n        this.addEventListener('track', this._onaddstreampoly = (e) => {\n          e.streams.forEach(stream => {\n            if (!this._remoteStreams) {\n              this._remoteStreams = [];\n            }\n            if (this._remoteStreams.includes(stream)) {\n              return;\n            }\n            this._remoteStreams.push(stream);\n            const event = new Event('addstream');\n            event.stream = stream;\n            this.dispatchEvent(event);\n          });\n        });\n      }\n    });\n    const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription = function() {\n      const pc = this;\n      if (!this._onaddstreampoly) {\n        this.addEventListener('track', this._onaddstreampoly = function(e) {\n          e.streams.forEach(stream => {\n            if (!pc._remoteStreams) {\n              pc._remoteStreams = [];\n            }\n            if (pc._remoteStreams.indexOf(stream) >= 0) {\n              return;\n            }\n            pc._remoteStreams.push(stream);\n            const event = new Event('addstream');\n            event.stream = stream;\n            pc.dispatchEvent(event);\n          });\n        });\n      }\n      return origSetRemoteDescription.apply(pc, arguments);\n    };\n  }\n}\n\nexport function shimCallbacksAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  const prototype = window.RTCPeerConnection.prototype;\n  const createOffer = prototype.createOffer;\n  const createAnswer = prototype.createAnswer;\n  const setLocalDescription = prototype.setLocalDescription;\n  const setRemoteDescription = prototype.setRemoteDescription;\n  const addIceCandidate = prototype.addIceCandidate;\n\n  prototype.createOffer = function(successCallback, failureCallback) {\n    const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n    const promise = createOffer.apply(this, [options]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n\n  prototype.createAnswer = function(successCallback, failureCallback) {\n    const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n    const promise = createAnswer.apply(this, [options]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n\n  let withCallback = function(description, successCallback, failureCallback) {\n    const promise = setLocalDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setLocalDescription = withCallback;\n\n  withCallback = function(description, successCallback, failureCallback) {\n    const promise = setRemoteDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setRemoteDescription = withCallback;\n\n  withCallback = function(candidate, successCallback, failureCallback) {\n    const promise = addIceCandidate.apply(this, [candidate]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.addIceCandidate = withCallback;\n}\n\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  if (!navigator.getUserMedia && navigator.mediaDevices &&\n    navigator.mediaDevices.getUserMedia) {\n    navigator.getUserMedia = function(constraints, cb, errcb) {\n      navigator.mediaDevices.getUserMedia(constraints)\n      .then(cb, errcb);\n    }.bind(navigator);\n  }\n}\n\nexport function shimRTCIceServerUrls(window) {\n  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n  const OrigPeerConnection = window.RTCPeerConnection;\n  window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n    if (pcConfig && pcConfig.iceServers) {\n      const newIceServers = [];\n      for (let i = 0; i < pcConfig.iceServers.length; i++) {\n        let server = pcConfig.iceServers[i];\n        if (!server.hasOwnProperty('urls') &&\n            server.hasOwnProperty('url')) {\n          utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n          server = JSON.parse(JSON.stringify(server));\n          server.urls = server.url;\n          delete server.url;\n          newIceServers.push(server);\n        } else {\n          newIceServers.push(pcConfig.iceServers[i]);\n        }\n      }\n      pcConfig.iceServers = newIceServers;\n    }\n    return new OrigPeerConnection(pcConfig, pcConstraints);\n  };\n  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n  // wrap static methods. Currently just generateCertificate.\n  if ('generateCertificate' in window.RTCPeerConnection) {\n    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n      get() {\n        return OrigPeerConnection.generateCertificate;\n      }\n    });\n  }\n}\n\nexport function shimTrackEventTransceiver(window) {\n  // Add event.transceiver member over deprecated event.receiver\n  if (typeof window === 'object' && window.RTCPeerConnection &&\n      ('receiver' in window.RTCTrackEvent.prototype) &&\n      // can't check 'transceiver' in window.RTCTrackEvent.prototype, as it is\n      // defined for some reason even when window.RTCTransceiver is not.\n      !window.RTCTransceiver) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimCreateOfferLegacy(window) {\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer = function(offerOptions) {\n    if (offerOptions) {\n      if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n        // support bit values\n        offerOptions.offerToReceiveAudio = !!offerOptions.offerToReceiveAudio;\n      }\n      const audioTransceiver = this.getTransceivers().find(transceiver =>\n        transceiver.sender.track &&\n        transceiver.sender.track.kind === 'audio');\n      if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n        if (audioTransceiver.direction === 'sendrecv') {\n          if (audioTransceiver.setDirection) {\n            audioTransceiver.setDirection('sendonly');\n          } else {\n            audioTransceiver.direction = 'sendonly';\n          }\n        } else if (audioTransceiver.direction === 'recvonly') {\n          if (audioTransceiver.setDirection) {\n            audioTransceiver.setDirection('inactive');\n          } else {\n            audioTransceiver.direction = 'inactive';\n          }\n        }\n      } else if (offerOptions.offerToReceiveAudio === true &&\n          !audioTransceiver) {\n        this.addTransceiver('audio');\n      }\n\n      if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n        // support bit values\n        offerOptions.offerToReceiveVideo = !!offerOptions.offerToReceiveVideo;\n      }\n      const videoTransceiver = this.getTransceivers().find(transceiver =>\n        transceiver.sender.track &&\n        transceiver.sender.track.kind === 'video');\n      if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n        if (videoTransceiver.direction === 'sendrecv') {\n          if (videoTransceiver.setDirection) {\n            videoTransceiver.setDirection('sendonly');\n          } else {\n            videoTransceiver.direction = 'sendonly';\n          }\n        } else if (videoTransceiver.direction === 'recvonly') {\n          if (videoTransceiver.setDirection) {\n            videoTransceiver.setDirection('inactive');\n          } else {\n            videoTransceiver.direction = 'inactive';\n          }\n        }\n      } else if (offerOptions.offerToReceiveVideo === true &&\n          !videoTransceiver) {\n        this.addTransceiver('video');\n      }\n    }\n    return origCreateOffer.apply(this, arguments);\n  };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nlet logDisabled_ = true;\nlet deprecationWarnings_ = true;\n\n/**\n * Extract browser version out of the provided user agent string.\n *\n * @param {!string} uastring userAgent string.\n * @param {!string} expr Regular expression used as match criteria.\n * @param {!number} pos position in the version string to be returned.\n * @return {!number} browser version.\n */\nexport function extractVersion(uastring, expr, pos) {\n  const match = uastring.match(expr);\n  return match && match.length >= pos && parseInt(match[pos], 10);\n}\n\n// Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object (or false to prevent\n// the event).\nexport function wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  const nativeAddEventListener = proto.addEventListener;\n  proto.addEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap) {\n      return nativeAddEventListener.apply(this, arguments);\n    }\n    const wrappedCallback = (e) => {\n      const modifiedEvent = wrapper(e);\n      if (modifiedEvent) {\n        cb(modifiedEvent);\n      }\n    };\n    this._eventMap = this._eventMap || {};\n    this._eventMap[cb] = wrappedCallback;\n    return nativeAddEventListener.apply(this, [nativeEventName,\n      wrappedCallback]);\n  };\n\n  const nativeRemoveEventListener = proto.removeEventListener;\n  proto.removeEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap || !this._eventMap\n        || !this._eventMap[cb]) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    const unwrappedCb = this._eventMap[cb];\n    delete this._eventMap[cb];\n    return nativeRemoveEventListener.apply(this, [nativeEventName,\n      unwrappedCb]);\n  };\n\n  Object.defineProperty(proto, 'on' + eventNameToWrap, {\n    get() {\n      return this['_on' + eventNameToWrap];\n    },\n    set(cb) {\n      if (this['_on' + eventNameToWrap]) {\n        this.removeEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap]);\n        delete this['_on' + eventNameToWrap];\n      }\n      if (cb) {\n        this.addEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap] = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n}\n\nexport function disableLog(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  logDisabled_ = bool;\n  return (bool) ? 'adapter.js logging disabled' :\n      'adapter.js logging enabled';\n}\n\n/**\n * Disable or enable deprecation warnings\n * @param {!boolean} bool set to true to disable warnings.\n */\nexport function disableWarnings(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  deprecationWarnings_ = !bool;\n  return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n}\n\nexport function log() {\n  if (typeof window === 'object') {\n    if (logDisabled_) {\n      return;\n    }\n    if (typeof console !== 'undefined' && typeof console.log === 'function') {\n      console.log.apply(console, arguments);\n    }\n  }\n}\n\n/**\n * Shows a deprecation warning suggesting the modern and spec-compatible API.\n */\nexport function deprecated(oldMethod, newMethod) {\n  if (!deprecationWarnings_) {\n    return;\n  }\n  console.warn(oldMethod + ' is deprecated, please use ' + newMethod +\n      ' instead.');\n}\n\n/**\n * Browser detector.\n *\n * @return {object} result containing browser and version\n *     properties.\n */\nexport function detectBrowser(window) {\n  const {navigator} = window;\n\n  // Returned result object.\n  const result = {browser: null, version: null};\n\n  // Fail early if it's not a browser\n  if (typeof window === 'undefined' || !window.navigator) {\n    result.browser = 'Not a browser.';\n    return result;\n  }\n\n  if (navigator.mozGetUserMedia) { // Firefox.\n    result.browser = 'firefox';\n    result.version = extractVersion(navigator.userAgent,\n        /Firefox\\/(\\d+)\\./, 1);\n  } else if (navigator.webkitGetUserMedia) {\n    // Chrome, Chromium, Webview, Opera.\n    // Version matches Chrome/WebRTC version.\n    result.browser = 'chrome';\n    result.version = extractVersion(navigator.userAgent,\n        /Chrom(e|ium)\\/(\\d+)\\./, 2);\n  } else if (navigator.mediaDevices &&\n      navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) { // Edge.\n    result.browser = 'edge';\n    result.version = extractVersion(navigator.userAgent,\n        /Edge\\/(\\d+).(\\d+)$/, 2);\n  } else if (window.RTCPeerConnection &&\n      navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) { // Safari.\n    result.browser = 'safari';\n    result.version = extractVersion(navigator.userAgent,\n        /AppleWebKit\\/(\\d+)\\./, 1);\n  } else { // Default fallthrough: not supported.\n    result.browser = 'Not a supported browser.';\n    return result;\n  }\n\n  return result;\n}\n","/*\n *\n *\tThe CeCILL-B License\n *\n *\tCopyright (c) {{ projectYear }}/{{ projectYearNow }} {{authorName}} | {{authorEmail}}\n *\n *\n *\tThis software is a computer program whose purpose is to [describe\n *\tfunctionalities and technical features of your software].\n *\n *\tThis software is governed by the CeCILL-B license under French law and\n *\tabiding by the rules of distribution of free software.  You can  use,\n *\tmodify and/ or redistribute the software under the terms of the CeCILL-B\n *\tlicense as circulated by CEA, CNRS and INRIA at the following URL\n *\t\"http://www.cecill.info\".\n *\n *\tAs a counterpart to the access to the source code and  rights to copy,\n *\tmodify and redistribute granted by the license, users are provided only\n *\twith a limited warranty  and the software's author,  the holder of the\n *\teconomic rights,  and the successive licensors  have only  limited\n *\tliability.\n *\n *\tIn this respect, the user's attention is drawn to the risks associated\n *\twith loading,  using,  modifying and/or developing or reproducing the\n *\tsoftware by the user in light of its specific status of free software,\n *\tthat may mean  that it is complicated to manipulate,  and  that  also\n *\ttherefore means  that it is reserved for developers  and  experienced\n *\tprofessionals having in-depth computer knowledge. Users are therefore\n *\tencouraged to load and test the software's suitability as regards their\n *\trequirements in conditions enabling the security of their systems and/or\n *\tdata to be ensured and,  more generally, to use and operate it in the\n *\tsame conditions as regards security.\n *\n *\tThe fact that you are presently reading this means that you have had\n *\tknowledge of the CeCILL-B license and that you accept its terms.\n *\n */\n\n// CORE\nconst stage = require('./core/stage.es6')();\nrequire('./core/notificationsCenter.es6')(stage);\nrequire('./syslog/syslog.es6')(stage);\nrequire('./kernel/service.es6')(stage);\nrequire('./kernel/container.es6')(stage);\n\n\n// TOOLS\nrequire('./tools/xml.js')(stage);\nrequire('./structs/hash/hash.es6')(stage);\nrequire('./structs/queue/queue.es6')(stage);\n\n// CRYPTO\nrequire('./crypto/base64.js')(stage);\nrequire('./crypto/md5.js')(stage);\n\n// IO\nrequire('./io/io.es6')(stage);\nrequire('./io/authentication/mechanisms/digest-md5/digestMd5.es6')(stage);\nrequire('./io/authentication/sasl/sasl.es6')(stage);\n\n// IO TRANSPORT\nrequire('./io/transports/socket.es6')(stage);\nrequire('./io/transports/websockets/websocket.es6')(stage);\nrequire('./io/transports/in/poll.es6')(stage);\nrequire('./io/transports/in/longPoll.es6')(stage);\n\n// IO PROTOCOLS\nrequire('./io/protocols/bayeux/bayeux.es6')(stage);\nrequire('./io/protocols/sip/sdp.es6')(stage);\nrequire('./io/protocols/sip/sip.es6')(stage);\n\n// IO REALTIME\nrequire('./io/realtime/realtime.es6')(stage);\n\n// MEDIAS\nrequire(\"webrtc-adapter\");\nrequire('./media/media.es6')(stage);\nrequire('./media/webAudio/webaudio.es6')(stage);\nrequire('./media/webrtc/webrtc.es6')(stage);\nrequire('./media/webrtc/user.es6')(stage);\nrequire('./media/webrtc/transaction.es6')(stage);\n\n\n// KERNEL STAGE ( nodefony )\nrequire('./kernel/kernel.es6')(stage);\nrequire('./kernel/appKernel.es6')(stage);\nrequire('./kernel/autoload.es6')(stage);\nrequire('./kernel/controller.es6')(stage);\nrequire('./kernel/locationService.es6')(stage);\nrequire('./kernel/module.es6')(stage);\nrequire('./kernel/routerService.es6')(stage);\nrequire('./kernel/translationService.es6')(stage);\n\n// EXPORT\nmodule.exports = stage;","module.exports = function (stage) {\n\n  'use strict';\n\n  var regListenOn = /^on(.*)$/;\n\n  /**\n   *      Events\n   *\n   *      @class Notification\n   *      @module library\n   *      @param {Object} settings Object to pass to `settingToListen` method\n   *      @param {Object} context  to apply `settingToListen`\n   *\n   *      @example\n   *\n   *\n   */\n  const Notification = class Notification {\n\n    constructor(settings, context) {\n      this.events = {};\n      this.garbageEvent = {};\n      if (settings) {\n        this.settingsToListen(settings, context);\n      }\n    }\n\n    /**\n     *\n     *      @method listen\n     *\n     */\n    listen(context, eventName, callback) {\n      var event = arguments[1];\n      var ContextClosure = this;\n      if (!this.events[eventName]) {\n        this.events[eventName] = [];\n        this.garbageEvent[eventName] = [];\n      }\n      if (typeof callback === 'function') {\n        this.garbageEvent[eventName].push(callback);\n        this.events[eventName].push(function (args) {\n          callback.apply(context, args);\n        });\n      }\n      return function () {\n        Array.prototype.unshift.call(arguments, event);\n        return ContextClosure.fire.apply(ContextClosure, arguments);\n      };\n    }\n\n    on(eventName, callback) {\n      var event = arguments[1];\n      var ContextClosure = this;\n      if (!this.events[eventName]) {\n        this.events[eventName] = [];\n        this.garbageEvent[eventName] = [];\n      }\n      if (typeof callback === 'function') {\n        this.garbageEvent[eventName].push(callback);\n        this.events[eventName].push(function (args) {\n          callback(args);\n        });\n      }\n      return function () {\n        Array.prototype.unshift.call(arguments, event);\n        return ContextClosure.fire.apply(ContextClosure, arguments);\n      };\n    }\n\n    /**\n     *\n     *      @method clearNotifications\n     *\n     */\n    clearNotifications(eventName) {\n      if (eventName) {\n        if (this.events[eventName]) {\n          while (this.events[eventName].length > 0) {\n            this.events[eventName].pop();\n            this.garbageEvent[eventName].pop();\n          }\n          delete this.events[eventName];\n          delete this.garbageEvent[eventName];\n        }\n      } else {\n        delete this.events;\n        delete this.garbageEvent;\n        this.events = {};\n        this.garbageEvent = {};\n      }\n    }\n\n    /**\n     *\n     *      @method fire\n     *\n     */\n    fire(eventName) {\n      var ret = true;\n      if (this.events[eventName]) {\n        var args = Array.prototype.slice.call(arguments, 1);\n        for (var i = 0; i < this.events[eventName].length; i++) {\n          try {\n            ret = this.events[eventName][i](args);\n            if (ret) {\n              break;\n            }\n          } catch (e) {\n            console.log(e);\n            throw new Error(e);\n          }\n        }\n      }\n      return ret;\n    }\n\n    /**\n     *\n     *      @method settingsToListen\n     *\n     */\n    settingsToListen(localSettings, context) {\n      for (var i in localSettings) {\n        var res = regListenOn.exec(i);\n        if (!res) {\n          continue;\n        }\n        this.listen(context || this, res[0], localSettings[i]);\n      }\n    }\n\n    unListen(eventName, callback) {\n      if (this.events[eventName]) {\n        if (callback) {\n          for (var i = 0; i < this.garbageEvent[eventName].length; i++) {\n            if (this.garbageEvent[eventName][i] === callback) {\n              this.events[eventName].splice(i, 1);\n              this.garbageEvent[eventName].splice(i, 1);\n            }\n          }\n        } else {\n          return this.clearNotifications(eventName);\n        }\n      } else {\n        return this.clearNotifications();\n      }\n    }\n  };\n\n  stage.notificationsCenter = {\n    notification: Notification,\n    create: function (settings, context) {\n      return new Notification(settings, context);\n    }\n  };\n\n  return Notification;\n};","module.exports = function () {\n\n  //const config = require(\"../../package.json\");\n  'use strict';\n  const version = require(\"../../package.json\").version;\n\n  // Traf indexOf IE8\n  const arrayProto = Array.prototype;\n\n  const indexOf = function () {\n    if (arrayProto.indexOf) {\n      return arrayProto.indexOf;\n    }\n    arrayProto.indexOf = function (value, startIndex) {\n      var index = (startIndex) === null ? 0 : (startIndex < 0 ? Math.max(0, this.length + startIndex) : startIndex);\n      for (var i = index; i < this.length; i++) {\n        if (i in this && this[i] === value) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    return arrayProto.indexOf;\n  }();\n\n  const typeOf = function (value) {\n    var t = typeof value;\n    if (t === 'object') {\n      if (value === null) {\n        return \"object\";\n      }\n      if (value instanceof Array ||\n        (!(value instanceof Object) &&\n          (Object.prototype.toString.call((value)) === '[object Array]') ||\n          typeof value.length === 'number' &&\n          typeof value.splice !== 'undefined' &&\n          typeof value.propertyIsEnumerable !== 'undefined' &&\n          !value.propertyIsEnumerable('splice')\n        )) {\n        return \"array\";\n      }\n      if (!(value instanceof Object) &&\n        (Object.prototype.toString.call((value)) === '[object Function]' ||\n          typeof value.call !== 'undefined' &&\n          typeof value.propertyIsEnumerable !== 'undefined' &&\n          !value.propertyIsEnumerable('call'))\n      ) {\n        return 'function';\n      }\n      if (value.nodeType === 1) {\n        return \"element\";\n      }\n      if (value.nodeType === 9) {\n        return \"document\";\n      }\n      if (value === window) {\n        return \"window\";\n      }\n      if (value instanceof Date) {\n        return \"date\";\n      }\n      if (value.callee) {\n        return \"arguments\";\n      }\n      if (value instanceof SyntaxError) {\n        return \"SyntaxError\";\n      }\n      if (value instanceof Error) {\n        return \"Error\";\n      }\n    } else {\n      if (t === 'function' && typeof value.call === 'undefined') {\n        return 'object';\n      }\n    }\n    return t;\n  };\n\n  const getBrowser = function () {\n    if (navigator.userAgent.indexOf('MSIE') > -1) {\n      return \"MSIE\";\n    }\n    if (navigator.userAgent.indexOf('Firefox') > -1) {\n      return \"Firefox\";\n    }\n    if (navigator.userAgent.indexOf('Chrome') > -1) {\n      return \"Chrome\";\n    }\n    if (navigator.userAgent.indexOf('Safari') > -1) {\n      return \"Safari\";\n    }\n    if (navigator.userAgent.indexOf('Opera') > -1) {\n      return \"Opera\";\n    }\n    if (navigator.userAgent.indexOf('Iceweasel') > -1) {\n      return \"Firefox\";\n    }\n    return \"undefined\";\n  }();\n\n  const getBrowserVersion = function () {\n\n    if (/MSIE (\\d+\\.\\d+);/.test(navigator.userAgent)) {\n      return parseInt(RegExp.$1, 10);\n    }\n    if (/Firefox[\\/\\s](\\d+\\.\\d+)/.test(navigator.userAgent)) {\n      return parseInt(RegExp.$1, 10);\n    }\n\n    if (/Chrome[\\/\\s](\\d+\\.\\d+)/.test(navigator.userAgent)) {\n      //if (/Chrome[\\/\\s](\\d+\\.\\d+\\.?\\d+)/.test(navigator.userAgent))\n      return parseInt(RegExp.$1, 10);\n    }\n\n    if (/Safari[\\/\\s](\\d+\\.\\d+)/.test(navigator.userAgent)) {\n      if (/Version[\\/\\s](\\d+\\.\\d+)/.test(navigator.userAgent)) {\n        return parseInt(RegExp.$1, 10);\n      }\n    }\n\n    if (/Opera[\\/\\s](\\d+\\.\\d+)/.test(navigator.userAgent)) {\n      if (/Version[\\/\\s](\\d+\\.\\d+)/.test(navigator.userAgent)) {\n        return parseInt(RegExp.$1, 10);\n      }\n    }\n\n    if (/Iceweasel[\\/\\s](\\d+\\.\\d+)/.test(navigator.userAgent)) {\n      return parseInt(RegExp.$1, 10);\n    }\n\n    return \"undefined\";\n  }();\n\n  const useragent = navigator.userAgent.toLowerCase();\n\n  /**\n   *  stage class\n   *  The class is a **`stage client side `** .\n   *  @class stage\n   *  @constructor\n   *  @module library\n   *\n   */\n  const Stage = class Stage {\n\n    constructor() {\n      this.version = version;\n      this.typeOf = typeOf;\n      this.indexOf = indexOf;\n      this.extend = jQuery.extend;\n      this.crypto = {};\n      this.modules = {};\n      this.media = {};\n      this.structs = {};\n      this.controllers = {};\n      this.browser = {\n        navigator: getBrowser,\n        version: getBrowserVersion,\n        Ie: /msie/.test(useragent) && !/opera/.test(useragent),\n        Gecko: navigator.userAgent.indexOf('Gecko') > -1 && navigator.userAgent.indexOf('KHTML') === -1,\n        Webkit: /webkit/.test(useragent),\n        Opera: Object.prototype.toString.call(window.opera) === '[object Opera]',\n        platform: navigator.userAgent.match(/ip(?:ad|od|hone)/) ? 'ios' : (navigator.userAgent.match(/(?:webos|android)/) || navigator.platform.toLowerCase().match(/mac|win|linux/) || ['other'])[0]\n      };\n    }\n\n    register(name, closure) {\n      let reg = null;\n      if (typeof closure === \"function\") {\n        // exec closure\n        reg = closure(this, name);\n      } else {\n        reg = closure;\n      }\n      return this[name] = reg;\n    }\n\n    registerModule(name, closure) {\n      return this.register.call(this.modules, name, closure);\n    }\n\n    registerController(name, closure) {\n      return this.register.call(this.controllers, name, closure);\n    }\n\n    basename(path) {\n      return path.replace(/\\\\/g, '/').replace(/.*\\//, '');\n    }\n\n    dirname(path) {\n      return path.replace(/\\\\/g, '/').replace(/\\/[^\\/]*$/, '');\n    }\n\n  };\n  return new Stage();\n};","/*\n *\n *\n *\n *\n *\n *\n *\n */\n\n\nmodule.exports = function (stage) {\n\n  // private property\n  var _keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n\n  // public method for encoding\n  var encode64 = function (input) {\n    var output = \"\";\n    var chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n    var i = 0;\n\n    input = _utf8_encode(input);\n\n    while (i < input.length) {\n\n      chr1 = input.charCodeAt(i++);\n      chr2 = input.charCodeAt(i++);\n      chr3 = input.charCodeAt(i++);\n\n      enc1 = chr1 >> 2;\n      enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n      enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n      enc4 = chr3 & 63;\n\n      if (isNaN(chr2)) {\n        enc3 = enc4 = 64;\n      } else if (isNaN(chr3)) {\n        enc4 = 64;\n      }\n\n      output = output +\n        _keyStr.charAt(enc1) + _keyStr.charAt(enc2) +\n        _keyStr.charAt(enc3) + _keyStr.charAt(enc4);\n\n    }\n    return output;\n  };\n\n  // public method for decoding\n  var decode64 = function (input) {\n    var output = \"\";\n    var chr1, chr2, chr3;\n    var enc1, enc2, enc3, enc4;\n    var i = 0;\n\n    input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n\n    while (i < input.length) {\n\n      enc1 = _keyStr.indexOf(input.charAt(i++));\n      enc2 = _keyStr.indexOf(input.charAt(i++));\n      enc3 = _keyStr.indexOf(input.charAt(i++));\n      enc4 = _keyStr.indexOf(input.charAt(i++));\n\n      chr1 = (enc1 << 2) | (enc2 >> 4);\n      chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n      chr3 = ((enc3 & 3) << 6) | enc4;\n\n      output = output + String.fromCharCode(chr1);\n\n      if (enc3 != 64) {\n        output = output + String.fromCharCode(chr2);\n      }\n      if (enc4 != 64) {\n        output = output + String.fromCharCode(chr3);\n      }\n\n    }\n\n    if (i != input.length) {\n      throw new Error(\"BASE64_BROKEN : There were invalid base64 characters in the input text.\\n\" +\n        \"Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\\n\" +\n        \"Expect errors in decoding.\");\n    }\n\n    output = _utf8_decode(output);\n\n    return output;\n\n  };\n\n\n  var decode = function (input, arrayBuffer) {\n    //get last chars to see if are valid\n    var lkey1 = _keyStr.indexOf(input.charAt(input.length - 1));\n    var lkey2 = _keyStr.indexOf(input.charAt(input.length - 2));\n\n    var bytes = (input.length / 4) * 3;\n    if (lkey1 == 64) bytes--; //padding chars, so skip\n    if (lkey2 == 64) bytes--; //padding chars, so skip\n\n    var uarray;\n    var chr1, chr2, chr3;\n    var enc1, enc2, enc3, enc4;\n    var i = 0;\n    var j = 0;\n\n    if (arrayBuffer)\n      uarray = new Uint8Array(arrayBuffer);\n    else\n      uarray = new Uint8Array(bytes);\n\n    input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n\n    for (i = 0; i < bytes; i += 3) {\n      //get the 3 octects in 4 ascii chars\n      enc1 = _keyStr.indexOf(input.charAt(j++));\n      enc2 = _keyStr.indexOf(input.charAt(j++));\n      enc3 = _keyStr.indexOf(input.charAt(j++));\n      enc4 = _keyStr.indexOf(input.charAt(j++));\n\n      chr1 = (enc1 << 2) | (enc2 >> 4);\n      chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n      chr3 = ((enc3 & 3) << 6) | enc4;\n\n      uarray[i] = chr1;\n      if (enc3 != 64) uarray[i + 1] = chr2;\n      if (enc4 != 64) uarray[i + 2] = chr3;\n    }\n    return uarray;\n  }\n\n\n\n\n  // private method for UTF-8 encoding\n  var _utf8_encode = function (string) {\n    string = string.replace(/\\r\\n/g, \"\\n\");\n    var utftext = \"\";\n\n    for (var n = 0; n < string.length; n++) {\n\n      var c = string.charCodeAt(n);\n\n      if (c < 128) {\n        utftext += String.fromCharCode(c);\n      } else if ((c > 127) && (c < 2048)) {\n        utftext += String.fromCharCode((c >> 6) | 192);\n        utftext += String.fromCharCode((c & 63) | 128);\n      } else {\n        utftext += String.fromCharCode((c >> 12) | 224);\n        utftext += String.fromCharCode(((c >> 6) & 63) | 128);\n        utftext += String.fromCharCode((c & 63) | 128);\n      };\n\n    };\n    return utftext;\n  };\n\n  // private method for UTF-8 decoding\n  var _utf8_decode = function (utftext) {\n    var string = \"\";\n    var i = 0;\n    var c = 0;\n    //var c1 = 0;\n    var c2 = 0;\n\n    while (i < utftext.length) {\n\n      c = utftext.charCodeAt(i);\n\n      if (c < 128) {\n        string += String.fromCharCode(c);\n        i++;\n      } else if ((c > 191) && (c < 224)) {\n        c2 = utftext.charCodeAt(i + 1);\n        string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));\n        i += 2;\n      } else {\n        c2 = utftext.charCodeAt(i + 1);\n        var c3 = utftext.charCodeAt(i + 2);\n        string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\n        i += 3;\n      }\n\n    }\n    return string;\n  };\n\n\n  /* will return a  Uint8Array type */\n  var decodeArrayBuffer = function (input) {\n    var bytes = (input.length / 4) * 3;\n    var ab = new ArrayBuffer(bytes);\n    decode(input, ab);\n    return ab;\n  };\n\n\n  stage.crypto.base64 = {\n    decodeArrayBuffer: decodeArrayBuffer,\n    encode: encode64,\n    decode: decode64\n  };\n\n  return stage.crypto.base64;\n};","/*\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\n\nmodule.exports = function (stage) {\n\n  /*\n   * Configurable variables. You may need to tweak these to be compatible with\n   * the server-side, but the defaults work in most cases.\n   */\n  var hexcase = 0; /* hex output format. 0 - lowercase; 1 - uppercase        */\n  var b64pad = \"\"; /* base-64 pad character. \"=\" for strict RFC compliance   */\n\n  /*\n   * Perform a simple self-test to see if the VM is working\n   */\n  var md5_vm_test = function () {\n    return rstr2hex(\"abc\").toLowerCase() === \"900150983cd24fb0d6963f7d28e17f72\";\n  };\n\n  /*\n   * Calculate the MD5 of a raw string\n   */\n  var rstr_md5 = function (s) {\n    return binl2rstr(binl_md5(rstr2binl(s), s.length * 8));\n  };\n\n  /*\n   * Calculate the HMAC-MD5, of a key and some data (raw strings)\n   */\n  var rstr_hmac_md5 = function (key, data) {\n    var bkey = rstr2binl(key);\n    if (bkey.length > 16) {\n      bkey = binl_md5(bkey, key.length * 8);\n    }\n    var ipad = Array(16),\n      opad = Array(16);\n    for (var i = 0; i < 16; i++) {\n      ipad[i] = bkey[i] ^ 0x36363636;\n      opad[i] = bkey[i] ^ 0x5C5C5C5C;\n    }\n\n    var hash = binl_md5(ipad.concat(rstr2binl(data)), 512 + data.length * 8);\n    return binl2rstr(binl_md5(opad.concat(hash), 512 + 128));\n  };\n\n  /*\n   * Convert a raw string to a hex string\n   */\n  var rstr2hex = function (input) {\n    //try { hexcase } catch(e) { hexcase=0; }\n    var hex_tab = hexcase ? \"0123456789ABCDEF\" : \"0123456789abcdef\";\n    var output = \"\";\n    var x;\n    for (var i = 0; i < input.length; i++) {\n      x = input.charCodeAt(i);\n      output += hex_tab.charAt((x >>> 4) & 0x0F) + hex_tab.charAt(x & 0x0F);\n    }\n    return output;\n  };\n\n  /*\n   * Convert a raw string to a base-64 string\n   */\n  var rstr2b64 = function (input) {\n    //try { b64pad } catch(e) { b64pad=''; }\n    var tab = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n    var output = \"\";\n    var len = input.length;\n    for (var i = 0; i < len; i += 3) {\n      var triplet = (input.charCodeAt(i) << 16) |\n        (i + 1 < len ? input.charCodeAt(i + 1) << 8 : 0) |\n        (i + 2 < len ? input.charCodeAt(i + 2) : 0);\n      for (var j = 0; j < 4; j++) {\n        if (i * 8 + j * 6 > input.length * 8) {\n          output += b64pad;\n        } else {\n          output += tab.charAt((triplet >>> 6 * (3 - j)) & 0x3F);\n        }\n      }\n    }\n    return output;\n  };\n\n  /*\n   * Convert a raw string to an arbitrary string encoding\n   */\n  var rstr2any = function (input, encoding) {\n    var divisor = encoding.length;\n    var i, j, q, x, quotient;\n\n    /* Convert to an array of 16-bit big-endian values, forming the dividend */\n    var dividend = Array(Math.ceil(input.length / 2));\n    for (i = 0; i < dividend.length; i++) {\n      dividend[i] = (input.charCodeAt(i * 2) << 8) | input.charCodeAt(i * 2 + 1);\n    }\n\n    /*\n     * Repeatedly perform a long division. The binary array forms the dividend,\n     * the length of the encoding is the divisor. Once computed, the quotient\n     * forms the dividend for the next step. All remainders are stored for later\n     * use.\n     */\n    var full_length = Math.ceil(input.length * 8 /\n      (Math.log(encoding.length) / Math.log(2)));\n    var remainders = Array(full_length);\n    for (j = 0; j < full_length; j++) {\n      quotient = Array();\n      x = 0;\n      for (i = 0; i < dividend.length; i++) {\n        x = (x << 16) + dividend[i];\n        q = Math.floor(x / divisor);\n        x -= q * divisor;\n        if (quotient.length > 0 || q > 0) {\n          quotient[quotient.length] = q;\n        }\n      }\n      remainders[j] = x;\n      dividend = quotient;\n    }\n\n    /* Convert the remainders to the output string */\n    var output = \"\";\n    for (i = remainders.length - 1; i >= 0; i--) {\n      output += encoding.charAt(remainders[i]);\n    }\n    return output;\n  };\n\n  /*\n   * Encode a string as utf-8.\n   * For efficiency, this assumes the input is valid utf-16.\n   */\n  var str2rstr_utf8 = function (input) {\n    var output = \"\";\n    var i = -1;\n    var x, y;\n\n    while (++i < input.length) {\n      /* Decode utf-16 surrogate pairs */\n      x = input.charCodeAt(i);\n      y = i + 1 < input.length ? input.charCodeAt(i + 1) : 0;\n      if (0xD800 <= x && x <= 0xDBFF && 0xDC00 <= y && y <= 0xDFFF) {\n        x = 0x10000 + ((x & 0x03FF) << 10) + (y & 0x03FF);\n        i++;\n      }\n\n      /* Encode output as utf-8 */\n      if (x <= 0x7F) {\n        output += String.fromCharCode(x);\n      } else if (x <= 0x7FF) {\n        output += String.fromCharCode(0xC0 | ((x >>> 6) & 0x1F),\n          0x80 | (x & 0x3F));\n      } else if (x <= 0xFFFF) {\n        output += String.fromCharCode(0xE0 | ((x >>> 12) & 0x0F),\n          0x80 | ((x >>> 6) & 0x3F),\n          0x80 | (x & 0x3F));\n      } else if (x <= 0x1FFFFF) {\n        output += String.fromCharCode(0xF0 | ((x >>> 18) & 0x07),\n          0x80 | ((x >>> 12) & 0x3F),\n          0x80 | ((x >>> 6) & 0x3F),\n          0x80 | (x & 0x3F));\n      }\n    }\n    return output;\n  };\n\n  /*\n   * Encode a string as utf-16\n   */\n  var str2rstr_utf16le = function (input) {\n    var output = \"\";\n    for (var i = 0; i < input.length; i++) {\n      output += String.fromCharCode(input.charCodeAt(i) & 0xFF,\n        (input.charCodeAt(i) >>> 8) & 0xFF);\n    }\n    return output;\n  };\n\n  var str2rstr_utf16be = function (input) {\n    var output = \"\";\n    for (var i = 0; i < input.length; i++) {\n      output += String.fromCharCode((input.charCodeAt(i) >>> 8) & 0xFF,\n        input.charCodeAt(i) & 0xFF);\n    }\n    return output;\n  };\n\n  /*\n   * Convert a raw string to an array of little-endian words\n   * Characters >255 have their high-byte silently ignored.\n   */\n  var rstr2binl = function (input) {\n    var output = Array(input.length >> 2);\n    for (var i = 0; i < output.length; i++) {\n      output[i] = 0;\n    }\n    for (var i = 0; i < input.length * 8; i += 8) {\n      output[i >> 5] |= (input.charCodeAt(i / 8) & 0xFF) << (i % 32);\n    }\n    return output;\n  };\n\n  /*\n   * Convert an array of little-endian words to a string\n   */\n  var binl2rstr = function (input) {\n    var output = \"\";\n    for (var i = 0; i < input.length * 32; i += 8) {\n      output += String.fromCharCode((input[i >> 5] >>> (i % 32)) & 0xFF);\n    }\n    return output;\n  };\n\n  /*\n   * Calculate the MD5 of an array of little-endian words, and a bit length.\n   */\n  var binl_md5 = function (x, len) {\n    /* append padding */\n    x[len >> 5] |= 0x80 << ((len) % 32);\n    x[(((len + 64) >>> 9) << 4) + 14] = len;\n\n    var a = 1732584193;\n    var b = -271733879;\n    var c = -1732584194;\n    var d = 271733878;\n\n    for (var i = 0; i < x.length; i += 16) {\n      var olda = a;\n      var oldb = b;\n      var oldc = c;\n      var oldd = d;\n\n      a = md5_ff(a, b, c, d, x[i + 0], 7, -680876936);\n      d = md5_ff(d, a, b, c, x[i + 1], 12, -389564586);\n      c = md5_ff(c, d, a, b, x[i + 2], 17, 606105819);\n      b = md5_ff(b, c, d, a, x[i + 3], 22, -1044525330);\n      a = md5_ff(a, b, c, d, x[i + 4], 7, -176418897);\n      d = md5_ff(d, a, b, c, x[i + 5], 12, 1200080426);\n      c = md5_ff(c, d, a, b, x[i + 6], 17, -1473231341);\n      b = md5_ff(b, c, d, a, x[i + 7], 22, -45705983);\n      a = md5_ff(a, b, c, d, x[i + 8], 7, 1770035416);\n      d = md5_ff(d, a, b, c, x[i + 9], 12, -1958414417);\n      c = md5_ff(c, d, a, b, x[i + 10], 17, -42063);\n      b = md5_ff(b, c, d, a, x[i + 11], 22, -1990404162);\n      a = md5_ff(a, b, c, d, x[i + 12], 7, 1804603682);\n      d = md5_ff(d, a, b, c, x[i + 13], 12, -40341101);\n      c = md5_ff(c, d, a, b, x[i + 14], 17, -1502002290);\n      b = md5_ff(b, c, d, a, x[i + 15], 22, 1236535329);\n\n      a = md5_gg(a, b, c, d, x[i + 1], 5, -165796510);\n      d = md5_gg(d, a, b, c, x[i + 6], 9, -1069501632);\n      c = md5_gg(c, d, a, b, x[i + 11], 14, 643717713);\n      b = md5_gg(b, c, d, a, x[i + 0], 20, -373897302);\n      a = md5_gg(a, b, c, d, x[i + 5], 5, -701558691);\n      d = md5_gg(d, a, b, c, x[i + 10], 9, 38016083);\n      c = md5_gg(c, d, a, b, x[i + 15], 14, -660478335);\n      b = md5_gg(b, c, d, a, x[i + 4], 20, -405537848);\n      a = md5_gg(a, b, c, d, x[i + 9], 5, 568446438);\n      d = md5_gg(d, a, b, c, x[i + 14], 9, -1019803690);\n      c = md5_gg(c, d, a, b, x[i + 3], 14, -187363961);\n      b = md5_gg(b, c, d, a, x[i + 8], 20, 1163531501);\n      a = md5_gg(a, b, c, d, x[i + 13], 5, -1444681467);\n      d = md5_gg(d, a, b, c, x[i + 2], 9, -51403784);\n      c = md5_gg(c, d, a, b, x[i + 7], 14, 1735328473);\n      b = md5_gg(b, c, d, a, x[i + 12], 20, -1926607734);\n\n      a = md5_hh(a, b, c, d, x[i + 5], 4, -378558);\n      d = md5_hh(d, a, b, c, x[i + 8], 11, -2022574463);\n      c = md5_hh(c, d, a, b, x[i + 11], 16, 1839030562);\n      b = md5_hh(b, c, d, a, x[i + 14], 23, -35309556);\n      a = md5_hh(a, b, c, d, x[i + 1], 4, -1530992060);\n      d = md5_hh(d, a, b, c, x[i + 4], 11, 1272893353);\n      c = md5_hh(c, d, a, b, x[i + 7], 16, -155497632);\n      b = md5_hh(b, c, d, a, x[i + 10], 23, -1094730640);\n      a = md5_hh(a, b, c, d, x[i + 13], 4, 681279174);\n      d = md5_hh(d, a, b, c, x[i + 0], 11, -358537222);\n      c = md5_hh(c, d, a, b, x[i + 3], 16, -722521979);\n      b = md5_hh(b, c, d, a, x[i + 6], 23, 76029189);\n      a = md5_hh(a, b, c, d, x[i + 9], 4, -640364487);\n      d = md5_hh(d, a, b, c, x[i + 12], 11, -421815835);\n      c = md5_hh(c, d, a, b, x[i + 15], 16, 530742520);\n      b = md5_hh(b, c, d, a, x[i + 2], 23, -995338651);\n\n      a = md5_ii(a, b, c, d, x[i + 0], 6, -198630844);\n      d = md5_ii(d, a, b, c, x[i + 7], 10, 1126891415);\n      c = md5_ii(c, d, a, b, x[i + 14], 15, -1416354905);\n      b = md5_ii(b, c, d, a, x[i + 5], 21, -57434055);\n      a = md5_ii(a, b, c, d, x[i + 12], 6, 1700485571);\n      d = md5_ii(d, a, b, c, x[i + 3], 10, -1894986606);\n      c = md5_ii(c, d, a, b, x[i + 10], 15, -1051523);\n      b = md5_ii(b, c, d, a, x[i + 1], 21, -2054922799);\n      a = md5_ii(a, b, c, d, x[i + 8], 6, 1873313359);\n      d = md5_ii(d, a, b, c, x[i + 15], 10, -30611744);\n      c = md5_ii(c, d, a, b, x[i + 6], 15, -1560198380);\n      b = md5_ii(b, c, d, a, x[i + 13], 21, 1309151649);\n      a = md5_ii(a, b, c, d, x[i + 4], 6, -145523070);\n      d = md5_ii(d, a, b, c, x[i + 11], 10, -1120210379);\n      c = md5_ii(c, d, a, b, x[i + 2], 15, 718787259);\n      b = md5_ii(b, c, d, a, x[i + 9], 21, -343485551);\n\n      a = safe_add(a, olda);\n      b = safe_add(b, oldb);\n      c = safe_add(c, oldc);\n      d = safe_add(d, oldd);\n    }\n    return Array(a, b, c, d);\n  };\n\n  /*\n   * These functions implement the four basic operations the algorithm uses.\n   */\n  var md5_cmn = function (q, a, b, x, s, t) {\n    return safe_add(bit_rol(safe_add(safe_add(a, q), safe_add(x, t)), s), b);\n  };\n  var md5_ff = function (a, b, c, d, x, s, t) {\n    return md5_cmn((b & c) | ((~b) & d), a, b, x, s, t);\n  };\n  var md5_gg = function (a, b, c, d, x, s, t) {\n    return md5_cmn((b & d) | (c & (~d)), a, b, x, s, t);\n  };\n  var md5_hh = function (a, b, c, d, x, s, t) {\n    return md5_cmn(b ^ c ^ d, a, b, x, s, t);\n  };\n  var md5_ii = function (a, b, c, d, x, s, t) {\n    return md5_cmn(c ^ (b | (~d)), a, b, x, s, t);\n  };\n\n  /*\n   * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n   * to work around bugs in some JS interpreters.\n   */\n  var safe_add = function (x, y) {\n    var lsw = (x & 0xFFFF) + (y & 0xFFFF);\n    var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n    return (msw << 16) | (lsw & 0xFFFF);\n  };\n\n  /*\n   * Bitwise rotate a 32-bit number to the left.\n   */\n  var bit_rol = function (num, cnt) {\n    return (num << cnt) | (num >>> (32 - cnt));\n  };\n\n  stage.crypto.md5 = {\n    hex_md5: function (s) {\n      return rstr2hex(rstr_md5(str2rstr_utf8(s)));\n    },\n    hex_md5_noUTF8: function (s) {\n      return rstr2hex(rstr_md5(s));\n    },\n    str_md5: function (s) {\n      return rstr_md5(str2rstr_utf8(s));\n    },\n    b64_md5: function (s) {\n      return rstr2b64(rstr_md5(str2rstr_utf8(s)));\n    },\n    any_md5: function (s, e) {\n      return rstr2any(rstr_md5(str2rstr_utf8(s)), e);\n    },\n    hex_hmac_md5: function (k, d) {\n      return rstr2hex(rstr_hmac_md5(str2rstr_utf8(k), str2rstr_utf8(d)));\n    },\n    str_hmac_md5: function (k, d) {\n      return rstr_hmac_md5(str2rstr_utf8(k), str2rstr_utf8(d));\n    },\n    b64_hmac_md5: function (k, d) {\n      return rstr2b64(rstr_hmac_md5(str2rstr_utf8(k), str2rstr_utf8(d)));\n    },\n    any_hmac_md5: function (k, d, e) {\n      return rstr2any(rstr_hmac_md5(str2rstr_utf8(k), str2rstr_utf8(d)), e);\n    }\n  };\n  return stage.crypto.md5;\n};","module.exports =  function(stage){\n\n\tvar keyWord= {\n\t\trealm:true,\n\t\tqop:true,\n\t\tcharset:true,\n\t\talgorithm:true,\n\t\tnonce:true\n\t};\n\n\tvar reg =/^([^=]+)=(.+)$/;\n\tvar parserAuthenticate = function(str){\n\t\tvar ret = str.replace(/\"/g,\"\");\n\t\tret = ret.replace(/Digest /g,\"\");\n\t\tvar head = ret.split(\",\");\n\t\tvar obj = {};\n\t\tfor (var i= 0 ; i < head.length ; i++){\n\t\t\tvar res = reg.exec(head[i]);\n\t\t\tif (res && res[1]){\n\t\t\t\tobj[res[1]] = res[2];\n\t\t\t}\n\t\t}\t\n\t\treturn obj;\n\t};\n\n\tvar MD5 = stage.crypto.md5.hex_md5_noUTF8 ;\n\tvar BASE64 = stage.crypto.base64.encode ;\n\tvar DBASE64 = stage.crypto.base64.decode;\n\n\tvar generateA1 = function(username, realm, password, nonce, cnonce){\n\t\tvar A1 = null ;\n\t\tif (cnonce){\n\t\t\tA1 = username + \":\" + realm + \":\" + password + \":\" + nonce+ \":\" + cnonce ;\n\t\t}else{\n\t\t\tA1 = username + \":\" + realm + \":\" + password ;//+ \":\" + nonce ;\n\t\t}\n\t\treturn MD5(A1); \n\t};\n\n\tvar generateA2 = function(method, uri, entity_body, qop){\n\t\tvar A2 = \"\";\n\t\tif( ! qop || qop ===  \"auth\"){\n\t\t\tA2 = method +\":\" + uri ;\n\t\t} else if(qop === \"auth-int\"){\n\t\t\tif( entity_body ){\n\t\t\t\tvar entity = MD5(entity_body);\n\t\t\t\tA2 = method + \":\" + uri + \":\" + entity ; \n\t\t\t}else{\n\t\t\t\tA2 = method + \":\" + uri + \":\" + \"d41d8cd98f00b204e9800998ecf8427e\" ;\n\t\t\t}\n\t\t}\n\t\treturn MD5(A2);\n\t};\n\n\tvar responseDigest = function(A1, nonce, noncecount, cnonce, qop, A2){\n\t\tvar res = \"\";\n\t\tif(qop === \"auth\" || qop === \"auth-int\"){\n\t\t\tres = A1 + \":\" + nonce +\":\" + noncecount +\":\" + cnonce +\":\" + qop + \":\" + A2 ;\n\t\t}else{\n\t\t\tres = A1 + \":\" + nonce + \":\" + A2 ;\n\t\t}\n\t\treturn MD5(res);\n\t};\n\n\t/*\n \t *\n \t */\n\tconst digestMd5 = class digestMd5  {\n\n\t\tconstructor(url, method, headers, body){\n\t\t\tthis.method = method ;\n\t\t\tthis.entity_body = body;\n\t\t\tthis.url = url;\n\t\t\tthis.uri = this.url.requestUri;\n\t\t\tthis.protocol = this.url.protocol.replace(\":\",\"\");\n\t\t\tthis.host = this.url.host;\n\t\t\tswitch (typeof headers){\n\t\t\t\tcase \"object\":\n\t\t\t\t\tthis.parseChallenge(headers);\n \t\t\t\t\tbreak;\t\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error(\"digetMD5 bad format header\");\n\t\t\t}\t\n\t\t}\n\n\t\tparseChallenge (headers){\n\t\t\t//console.log(headers)\n\t\t\tvar parsing = {};\n\t\t\tswitch (typeof headers){\n\t\t\t\tcase \"string\" : \n\t\t\t\t\t//TODO\n\t\t\t\t\tthrow new Error(\"digetMD5 bad format challenge\");\n\t\t\t\tcase \"object\" :\n\t\t\t\t\tfor (var ele in headers ){\n\t\t\t\t\t\tswitch (ele){\n\t\t\t\t\t\t\tcase \"challenge\":\n\t\t\t\t\t\t\t\tif (typeof headers.challenge === \"string\"){\n\t\t\t\t\t\t\t\t\ttry{\n\t\t\t\t\t\t\t\t\t\tthis.challengeB64 = DBASE64(headers.challenge);\n\t\t\t\t\t\t\t\t\t}catch(e){\n\t\t\t\t\t\t\t\t\t\tthis.challengeB64 = headers.challenge ;\n\t\t\t\t\t\t\t\t\t\t//throw new Error(\"DIGEST MD5 ERROR DECODE BAS64\")\t\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tparsing[ele] = headers[ele];\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\t\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error(\"digetMD5 bad format challenge\");\n\t\t\t}\n\t\t\tvar challenge = stage.extend(parserAuthenticate(this.challengeB64), parsing );\n\t\t\t//var challenge = parserAuthenticate(this.challengeB64);\n\t\t\t//console.log(challenge)\n\t\t\tfor (var name in challenge){\n\t\t\t\tif (name in keyWord){\n\t\t\t\t\tthis[name] = challenge[name];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"digestMd5 parser challenge header name dropped: \"+name);\n\t\t\t\t}\t\n\t\t\t}\n\t\t}\n\n\t\tgenerateAuthorization (username, password){\n\n\t\t\tvar line = 'Digest username=\"'+username+'\"';\n\t\t\tif (! this.realm){\n\t\t\t\tthis.realm = username+\"@\"+this.url.host ;\n\t\t\t}\n\n\t\t\tvar res ={\n\t\t\t\tnonce:'\"'+this.nonce+'\"',\n\t\t\t\trealm:'\"'+this.realm+'\"',\n\t\t\t\tresponse:null\n\t\t\t};\n\n\t\t\tthis[\"digest-uri\"] = this.protocol+\"/\"+this.host;\n\t\t\t//this[\"digest-uri\"] = '\"'+this.protocol+\"/\"+this.uri+'\"';\n\n\t\t\tres[\"digest-uri\"] = '\"'+this[\"digest-uri\"]+'\"';\n\n\t\t\t/*if (this.charset){\n\t\t\t  res[\"charset\"]=this.charset;\n\t\t\t  }*/\n\n\t\t\tif (this.qop){\n\t\t\t\tthis.cnonce = BASE64( Math.floor( (Math.random()*100000000)) .toString() ) ;\n\t\t\t\tres[\"cnonce\"]='\"'+this.cnonce+'\"';\n\t\t\t\tres[\"qop\"]=this.qop;\n\t\t\t}\n\t\t\tif (this.opaque){\n\t\t\t\tres[\"opaque\"]=this.opaque;\n\t\t\t}\n\n\t\t\tthis.nc = \"00000001\";\n\t\t\tres[\"nc\"]=this.nc;\n\n\t\t\tthis.A1 = generateA1(username, this.realm, password/*, this.nonce, this.cnonce*/);\t\n\t\t\tthis.A2 = generateA2(this.method, this[\"digest-uri\"], this.entity_body, this.qop);\n\n\n\t\t\tres.response = responseDigest(this.A1, this.nonce, this.nc, this.cnonce, this.qop, this.A2);\t\n\t\t\t// generate Authorization \n\n\t\t\tfor (var ele in res){\n\t\t\t\tline+=\",\"+ele+\"=\"+res[ele];\n\t\t\t}\n\t\t\t//console.log(line)\n\t\t\tvar toSend = BASE64(line);\n\t\t\treturn toSend;\n\n\t\t}\n\t};\n\n\tstage.io.authentication.Digest = digestMd5 ;\n\tstage.io.authentication.mechanisms.Digest = digestMd5 ;\n\treturn digestMd5;\n\n};\n","module.exports =  function(stage){\n\t\n\tvar reg =/^([^=]+)=(.+)$/;\n\tvar parserSasl = function(str){\n\t\t//console.log(str)\n\t\tvar ret = str.replace(/\"/g,\"\");\n\t\tvar head = ret.split(\",\");\n\t\tvar obj = {}\n\t\tfor (var i= 0 ; i < head.length ; i++){\n\t\t\tvar res = reg.exec(head[i])\n\t\t\tif (res && res[1])\n\t\t\t\tobj[res[1]] = res[2]\n\t\t}\t\n\t\treturn obj;\n\t};\n\n\n\tvar Sasl = class Sasl  {\n\n\t\tconstructor(url, method, headers, body){\n\t\t\tthis.method = method;\n\t\t\tthis.url = url;\n\t\t\tthis.name = \"sasl\" ;\n\t\t\tthis.headers = parserSasl(headers);\n\t\t\tthis.body = body ;\n\t\t\tthis.mechanisms = this.headers.mechanisms;\n\t\t\tvar mechanism = this.getBestMechanism(this.mechanisms);\n\t\t\tif (mechanism){\n\t\t\t\tdelete this.headers.mechanisms\n\t\t\t\t\tthis.bestMechanism = mechanism.name\n\t\t\t\t\tthis.mechanism = new mechanism.Class(this.url, this.method, this.headers, this.body);\t\n\t\t\t}else{\n\t\t\t\tthrow new Error(\"SALS mechanism not found\")\t\n\t\t\t}\t\t\n\t\t}\n\n\t\tgetBestMechanism (mechanism){\n\t\t\tvar goodM = null;\n\t\t\tswitch (typeof mechanism){\n\t\t\t\tcase \"object\" :\n\t\t\t\t\tfor (var i= 0 ; i < mechanism.length ; i++){\n\t\t\t\t\t\tif (mechanism[i] in stage.io.authentication.mechanisms){\n\t\t\t\t\t\t\tvar goodM = stage.io.authentication.mechanisms[mechanism[i]];\n\t\t\t\t\t\t\tvar name = mechanism[i];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"string\" :\n\t\t\t\t\t//console.log(mechanism.split(\" \"));\n\t\t\t\t\treturn this.getBestMechanism( mechanism.split(\" \") );\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error(\"FORMAT SALS mechanism bad format\")\n\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tname:name,\n\t\t\t\t\tClass:goodM\n\t\t\t}\n\t\t};\n\n\t\tgetAuthorization (user, password){\n\t\t\treturn  'SASL mechanism=\"'+this.bestMechanism+'\",'+this.mechanism.generateAuthorization(user, password);\n\t\t}\n\n\t};\n\n\tstage.io.authentication.SASL = Sasl ;\n\t\n\treturn Sasl ;\n\n};\n","module.exports = function (stage) {\n\n  'use strict';\n\n  const isSameOrigin = function (url) {\n    var loc = window.location;\n    var a = urlToOject(url);\n    return a.hostname === loc.hostname &&\n      a.port == loc.port &&\n      a.protocol === loc.protocol;\n  };\n\n  const isSecure = function (url) {\n    var loc = window.location;\n    var a = urlToOject(url);\n    return a.protocol === \"https:\";\n  };\n\n  /*\n   *\n   *   CLASS AUTHENTICATE\n   *\n   *\n   *\tEVENTS\n   *\n   *\tonError:\n   *\n   *\n   *\tonSuccess:\n   *\n   *\n   */\n  const authenticate = class authenticate {\n\n    constructor(url, request, settings) {\n      this.url = typeof url === \"object\" ? url : stage.io.urlToOject(url);\n      this.crossDomain = !stage.io.isSameOrigin(url);\n      // notification center\n      this.notificationCenter = stage.notificationsCenter.create(settings);\n      // get header WWW-Authenticate\n      var authenticate = request[\"WWW-Authenticate\"].split(\" \");\n      //  get type authentification\n      var authType = Array.prototype.shift.call(authenticate);\n      var headers = request[\"WWW-Authenticate\"].replace(authType + \" \", \"\");\n      //console.log(authType);\n      this.method = \"POST\";\n      var body = request.body;\n\n      // intance of authentication\n      var auth = this.getAuthenticationType(authType);\n      this.authentication = new auth(this.url, this.method, headers, body);\n      this.ajax = false;\n      if (settings.ajax) {\n        this.ajax = true;\n      }\n    }\n\n    getAuthenticationType(type) {\n      if (type in stage.io.authentication) {\n        return stage.io.authentication[type];\n      } else {\n        throw new Error(\"SSE client can't negociate : \" + type);\n      }\n    }\n\n    register(username, password) {\n      var line = this.authentication.getAuthorization(username, password);\n      this.notificationCenter.fire(\"onRegister\", this, line);\n      if (this.ajax) {\n        $.ajax({\n          type: this.method,\n          url: this.url.href,\n          cache: false,\n          crossDomain: this.crossDomain ? false : true,\n          error: (obj, type, message) => {\n            this.notificationCenter.fire(\"onError\", obj, type, message);\n          },\n          beforeSend: (xhr) => {\n            xhr.setRequestHeader(\"Authorization\", line);\n            //if (this.crossDomain)\n            //xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n          },\n          success: (data, state, obj) => {\n            this.notificationCenter.fire(\"onSuccess\", data, state, obj);\n          }\n        });\n      }\n    }\n  };\n\n  /**\n   * We need our custom method because encodeURIComponent is too aggressive and doesn't follow\n   * http://www.ietf.org/rfc/rfc3986.txt with regards to the character set (pchar) allowed in path\n   * segments:\n   *    segment       = *pchar\n   *    pchar         = unreserved / pct-encoded / sub-delims / \":\" / \"@\"\n   *    pct-encoded   = \"%\" HEXDIG HEXDIG\n   *    unreserved    = ALPHA / DIGIT / \"-\" / \".\" / \"_\" / \"~\"\n   *    sub-delims    = \"!\" / \"$\" / \"&\" / \"'\" / \"(\" / \")\"\n   *                     / \"*\" / \"+\" / \",\" / \";\" / \"=\"\n   */\n  const encodeUriSegment = function (val) {\n    return encodeUriQuery(val, true).\n    replace(/%26/gi, '&').\n    replace(/%3D/gi, '=').\n    replace(/%2B/gi, '+');\n  };\n\n\n  /**\n   * This method is intended for encoding *key* or *value* parts of query component. We need a custom\n   * method because encodeURIComponent is too aggressive and encodes stuff that doesn't have to be\n   * encoded per http://tools.ietf.org/html/rfc3986:\n   *    query       = *( pchar / \"/\" / \"?\" )\n   *    pchar         = unreserved / pct-encoded / sub-delims / \":\" / \"@\"\n   *    unreserved    = ALPHA / DIGIT / \"-\" / \".\" / \"_\" / \"~\"\n   *    pct-encoded   = \"%\" HEXDIG HEXDIG\n   *    sub-delims    = \"!\" / \"$\" / \"&\" / \"'\" / \"(\" / \")\"\n   *                     / \"*\" / \"+\" / \",\" / \";\" / \"=\"\n   */\n  const encodeUriQuery = function (val, pctEncodeSpaces) {\n    return encodeURIComponent(val).\n    replace(/%40/gi, '@').\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%3B/gi, ';').\n    replace(/%20/g, (pctEncodeSpaces ? '%20' : '+'));\n  };\n\n\n  const regSearch = /^\\?(.*)/;\n  const parseKeyValue = function (search) {\n    //console.log(search)\n    var test = regSearch.exec(search);\n    //console.log(test)\n    if (test) {\n      search = test[1];\n    }\n    var obj = {},\n      key_value, key;\n    var tab = (search ||  \"\").split('&');\n    if (tab.length) {\n      for (var i = 0; i < tab.length; i++) {\n        try {\n          var key_value = tab[i].replace(/\\+/g, '%20').split('=');\n          var key = decodeURIComponent(key_value[0]);\n          //console.log(key_value)\n          //console.log(key)\n          if (key) {\n            var val = decodeURIComponent(key_value[1]);\n            if (!Object.prototype.hasOwnProperty.call(obj, key)) {\n              obj[key] = val;\n            } else {\n              switch (stage.typeOf(obj[key])) {\n              case \"array\":\n                obj[key].push(val);\n                break;\n              default:\n                obj[key] = [obj[key], val];\n              }\n            }\n          }\n        } catch (e) {\n          //invalid\n        }\n      }\n    }\n    return obj;\n  };\n\n  const toKeyValue = function (obj) {\n    var parts = [];\n    for (var ele in obj) {\n      switch (stage.typeOf(obj[ele])) {\n      case \"array\":\n        for (var i = 0; i < obj[ele].length; i++) {\n          parts.push(encodeUriQuery(ele, true) + (obj[ele][i] === true ? '' : '=' + encodeUriQuery(obj[ele][i], true)));\n        }\n        break;\n      case \"string\":\n      case \"boolean\":\n        parts.push(encodeUriQuery(ele, true) + (obj[ele] === true ? '' : '=' + encodeUriQuery(obj[ele], true)));\n        break;\n      default:\n        continue;\n      }\n    }\n    return parts.length ? parts.join('&') : '';\n  };\n\n\n  const getHeaderJSON = function (xhr) {\n    var json = xhr.getResponseHeader(\"X-Json\");\n    if (json) {\n      try {\n        return JSON.parse(json);\n      } catch (e) {\n        return json;\n      }\n    }\n    return null;\n  };\n\n  const urlToOject = function (url) {\n    var result = {};\n\n    var anchor = document.createElement('a');\n    anchor.href = url;\n\n    var keys = 'protocol hostname host pathname port search hash href'.split(' ');\n    for (var keyIndex in keys) {\n      var currentKey = keys[keyIndex];\n      result[currentKey] = anchor[currentKey];\n    }\n\n    result.toString = function () {\n      return anchor.href;\n    };\n    result.requestUri = result.pathname + result.search;\n\n    result.basename = result.pathname.replace(/\\\\/g, '/').replace(/.*\\//, '');\n    result.dirname = result.pathname.replace(/\\\\/g, '/').replace(/\\/[^\\/]*$/, '');\n\n    return result;\n  };\n\n  const nativeWebSocket = window.WebSocket ? true : false;\n\n  const transportCore = class transportCore extends stage.notificationsCenter.notification {\n\n    constructor(url, settings, context) {\n      super(settings, context);\n      // Manage Url\n      if (url) {\n        this.url = urlToOject(url);\n        this.crossDomain = !isSameOrigin(url);\n        this.error = null;\n      } else {\n        this.fire(\"onError\", new Error(\"Transport URL not defined\"));\n      }\n    }\n  };\n\n  stage.io = {\n    nativeWebSocket: nativeWebSocket,\n    urlToOject: urlToOject,\n    parseKeyValue: parseKeyValue,\n    toKeyValue: toKeyValue,\n    encodeUriSegment: encodeUriSegment,\n    encodeUriQuery: encodeUriQuery,\n    getHeaderJSON: getHeaderJSON,\n    isSameOrigin: isSameOrigin,\n    isSecure: isSecure,\n    protocols: {},\n    authentication: {\n      authenticate: authenticate,\n      mechanisms: {}\n    },\n    transport: transportCore,\n    transports: {}\n  };\n\n  return stage.io;\n};","module.exports = function (stage) {\n\n  'use strict';\n\n  const clientsCapabilities = function () {\n    var tab = [];\n    var ws = stage.io.nativeWebSocket ? tab.push(\"websocket\") : null;\n    var poll = stage.io.poll ? tab.push(\"poll\") : null;\n    var lpoll = stage.io.longPoll ? tab.push(\"long-polling\") : null;\n    var jsonp = stage.io.jsonp ? tab.push(\"callback-polling\") : null;\n    return tab;\n  }();\n\n  const onHandshakeResponse = function (message) {\n    if (message.successful) {\n      try {\n        var socket = this.getBestConnection(message.supportedConnectionTypes);\n        this.socket = new socket.Class(socket.url);\n        this.socket.onmessage = (message) => {\n          if (message.data) {\n            this.onMessage(message.data);\n          }\n        };\n        this.socket.onopen = () => {\n          this.socket.send(this.connect(message));\n          this.notificationCenter.fire(\"onHandshake\", message, this.socket);\n        };\n        this.socket.onerror = this.notificationCenter.listen(this, \"onError\");\n        this.socket.onclose = (err) => {\n          delete this.socket;\n          this.notificationCenter.fire(\"onClose\", err);\n        };\n      } catch (e) {\n        throw new Error(e);\n      }\n    } else {\n      onError.call(this, message);\n    }\n  };\n\n  const reconnect = function () {\n    this.reconnect = true;\n    this.notificationCenter.fire(\"reConnect\", this);\n  };\n\n  const onConnectResponse = function (message) {\n    if (message.successful) {\n      this.connected = true;\n      this.idconnection = message.clientId;\n      if (message.advice) {\n        for (var ele in message.advice) {\n          switch (ele) {\n          case \"reconnect\":\n            if (message.advice[ele] === \"retry\") {\n              if (!this.reconnect) {\n                this.notificationCenter.listen(this, \"onClose\", reconnect);\n              }\n            }\n            break;\n          }\n        }\n      }\n      this.notificationCenter.fire(\"onConnect\", message);\n    } else {\n      this.connected = false;\n      onError.call(this, message);\n    }\n  };\n\n  const onDisconnectResponse = function (message) {\n    if (message.successful) {\n      if (this.socket) {\n        this.socket.close();\n        this.socket = null;\n        this.notificationCenter.fire(\"onDisconnect\", message);\n      }\n    } else {\n      onError.call(this, message);\n    }\n  };\n\n  const onSubscribeResponse = function (message) {\n    if (message.successful) {\n      this.notificationCenter.fire(\"onSubscribe\", message);\n    } else {\n      onError.call(this, message);\n    }\n  };\n\n  const onUnsubscribeResponse = function (message) {\n    if (message.successful) {\n      this.notificationCenter.fire(\"onUnsubscribe\", message);\n    } else {\n      onError.call(this, message);\n    }\n  };\n\n  const onError = function (message) {\n    if (message.error) {\n      try {\n        switch (stage.typeOf(message.error)) {\n        case \"string\":\n          var res = message.error.split(\":\");\n          var code = res[0];\n          var arg = res[1];\n          var mess = res[2];\n          break;\n        case \"object\":\n          if (message.error) {\n            return onError.call(this, message.error);\n          }\n          break;\n        case \"Error\":\n          message.error = \"500::\" + message.error.message;\n          return onError.call(this, message.error);\n        default:\n          throw new Error(\"Bad protocole error BAYEUX\");\n\n        }\n        return this.notificationCenter.fire(\"onError\", code, arg, mess);\n      } catch (e) {\n        throw new Error(\"Bad protocole error BAYEUX\" + e);\n      }\n    }\n  };\n\n  /*\n   *\tBAYEUX PROTOCOL\n   *\n   */\n  const bayeux = class bayeux {\n\n    constructor(url) {\n      this.name = \"bayeux\";\n      this.notificationCenter = stage.notificationsCenter.create(this.settings, this);\n      this.url = url;\n      this.socket = null;\n      this.connected = false;\n      this.request = {\n        version: \"1.0\"\n      };\n    }\n\n    getBestConnection(supportedConnectionTypes) {\n      if (this.url.protocol === \"https:\" || this.url.protocol === \"wss:\") {\n        this.url.protocol = \"wss:\";\n      } else {\n        this.url.protocol = \"ws:\";\n      }\n      this.socketType = \"WEBSOCKET\";\n      return {\n        Class: window.WebSocket,\n        url: this.url.protocol + \"//\" + this.url.host + this.url.requestUri\n      };\n    }\n\n    build(obj) {\n      var res = [];\n      res.push(obj);\n      return res;\n    }\n\n    handshake() {\n      var req = JSON.stringify(stage.extend({}, this.request, {\n        channel: \"/meta/handshake\",\n        minimumVersion: \"1.0\",\n        supportedConnectionTypes: clientsCapabilities\n      }));\n      return this.send(req);\n    }\n\n    connect(message) {\n      return JSON.stringify({\n        channel: \"/meta/connect\",\n        clientId: message.clientId,\n        connectionType: this.socketType\n      });\n    }\n\n    stopReConnect(message) {\n      this.notificationCenter.unListen(\"onClose\", reconnect);\n    }\n\n    disconnect() {\n      return JSON.stringify({\n        channel: \"/meta/disconnect\",\n        clientId: this.idconnection,\n      });\n    }\n\n    subscribe(name, data) {\n      return JSON.stringify({\n        channel: \"/meta/subscribe\",\n        clientId: this.idconnection,\n        subscription: \"/service/\" + name,\n        data: data\n      });\n    }\n\n    unSubscribe(name, clientId, data) {\n      return JSON.stringify({\n        channel: \"/meta/unsubscribe\",\n        clientId: clientId,\n        subscription: \"/service/\" + name,\n        data: data\n      });\n    }\n\n    sendMessage(service, data, clientId) {\n      return JSON.stringify({\n        channel: \"/service/\" + service,\n        clientId: clientId,\n        id: new Date().getTime(),\n        data: data\n      });\n    }\n\n    onMessage(message) {\n      try {\n        if (typeof message === \"string\") {\n          message = JSON.parse(message);\n        }\n      } catch (e) {\n        message.error = e;\n        onError.call(this, message);\n        return;\n      }\n      switch (message.channel) {\n      case \"/meta/handshake\":\n        return onHandshakeResponse.call(this, message);\n      case \"/meta/connect\":\n        return onConnectResponse.call(this, message);\n      case \"/meta/disconnect\":\n        return onDisconnectResponse.call(this, message);\n      case \"/meta/subscribe\":\n        return onSubscribeResponse.call(this, message);\n      case \"/meta/unsubscribe\":\n        return onUnsubscribeResponse.call(this, message);\n      default:\n        // /some/channel\n        this.notificationCenter.fire(\"onMessage\", message);\n      }\n    }\n\n    send(data) {\n      if (this.socket) {\n        return this.socket.send(data);\n      }\n      return $.ajax({\n        method: 'POST',\n        cache: false,\n        url: this.url.href,\n        dataType: \"json\",\n        contentType: \"application/json\",\n        data: data,\n        success: (data, type, xhr) => {\n          this.onMessage(data);\n        },\n        error: (obj, type, message) => {\n          this.notificationCenter.fire('onError', obj, type, message);\n        }\n      });\n    }\n  };\n\n  stage.io.protocols.bayeux = bayeux;\n  return bayeux;\n};","module.exports = function (stage) {\n\n  'use strict';\n\n\n  const defaultAparser = function (value, block) {\n    if (value) {\n      return value;\n    }\n    return null;\n  };\n\n  const rtpmapParser = function (value, block) {\n    //a=rtpmap:<payload type> <encoding name>/<clock rate>[/<encoding parameters>]\n    if (value) {\n      var obj = {\n        payloadType: null,\n        encodingName: null,\n        clockRate: null,\n        encodingParameters: null,\n        raw: value\n      };\n      var res = value.split(\" \");\n      for (var i = 0; i < res.length; i++) {\n        switch (i) {\n        case 0:\n          obj.payloadType = res[i];\n          break;\n        case 1:\n          var ret = res[i].split(\"/\");\n          obj.encodingName = ret[0];\n          if (ret[1]) {\n            obj.clockRate = ret[1];\n          }\n          if (ret[2]) {\n            obj.encodingParameters = ret[2];\n          }\n          break;\n        }\n      }\n\n      if (!(obj.encodingName in block.rtpmap)) {\n        var index = block.rtpmap.push(obj);\n        block.rtpmap[\"rtpmap_\" + obj.payloadType] = block.rtpmap[index - 1];\n      }\n      return obj;\n    }\n    return null;\n  };\n\n  var candidateParser = function (value, block) {\n    /* a=candidate:0 1 UDP 2122252543 169.254.105.57 65488 typ host\n     * a=candidate:6glsxoSzDfHGkyMz 1 UDP 2130706431 93.20.94.1 35796 typ host\n     * a=candidate:2 1 UDP 1694498815 192.0.2.3 45664 typ srflx raddr 10.0.1.1 rport 8998\n     * a=candidate:86628240 1 udp 2122260223 192.168.10.234 64435 typ host generation 0 network-id 3\n     *\n     *\n     *\n     *\n     *   candidate-attribute   = \"candidate\" \":\"\n     *\t   foundation SP\n     *\t   component-id SP\n     *         transport SP\n     *         priority SP\n     *         connection-address SP     ;from RFC 4566\n     *         port         ;port from RFC 4566 SP\n     *         cand-type\n     *          [SP rel-addr]\n     *          [SP rel-port]\n     *          *(SP extension-att-name SP\n     *               extension-att-value)\n     */\n    if (value) {\n\n      var obj = {\n        foundation: null,\n        componentId: null,\n        transport: null,\n        transportExt: null,\n        priority: null,\n        connectionAddress: null,\n        port: null,\n        candidateType: null,\n        remoteAddr: null,\n        remotePort: null,\n        generation: null,\n        networkId: null,\n        raw: value\n      };\n      var res = value.split(\" \");\n      for (var i = 0; i < res.length; i++) {\n        switch (i) {\n        case 0:\n          obj.foundation = res[i];\n          break;\n        case 1:\n          obj.componentId = res[i];\n          break;\n        case 2:\n          obj.transport = res[i];\n          var ret = res[i].split(\"/\");\n          obj.transport = ret[0];\n          if (ret[1]) {\n            obj.transportExt = ret[1];\n          }\n          break;\n        case 3:\n          obj.priority = res[i];\n          break;\n        case 4:\n          obj.connectionAddress = res[i];\n          break;\n        case 5:\n          obj.port = res[i];\n          break;\n        default:\n          switch (res[i]) {\n          case \"typ\":\n            obj.candidateType = res[i + 1];\n            break;\n          case \"raddr\":\n            obj.remoteAddr = res[i + 1];\n            break;\n          case \"rport\":\n            obj.remotePort = res[i + 1];\n            break;\n          case \"generation\":\n            obj.generation = res[i + 1];\n            break;\n          case \"network-id\":\n            obj.networkId = res[i + 1];\n            break;\n          }\n          break;\n        }\n      }\n      block.candidates.push(obj);\n      return value;\n    }\n    return null;\n  };\n\n  const aAttribute = {\n    \"cat\": defaultAparser,\n    \"keywds\": defaultAparser,\n    \"tool\": defaultAparser,\n    \"ptime\": defaultAparser,\n    \"maxptime\": defaultAparser,\n    \"rtpmap\": rtpmapParser,\n    \"orient\": defaultAparser,\n    \"type\": defaultAparser,\n    \"charset\": defaultAparser,\n    \"sdplang\": defaultAparser,\n    \"lang\": defaultAparser,\n    \"framerate\": defaultAparser,\n    \"quality\": defaultAparser,\n    \"fmtp\": defaultAparser,\n    \"candidate\": candidateParser\n  };\n\n  const aAttributeDirection = {\n    \"recvonly\": defaultAparser,\n    \"sendrecv\": defaultAparser,\n    \"sendonly\": defaultAparser,\n    \"inactive\": defaultAparser\n  };\n\n  /*\n   *\tSDP PROTOCOL\n   *\n   */\n  const parserSdp = class parserSdp {\n\n    constructor(body) {\n      if (!body) {\n        throw new Error(\"SDP parser no data found !! \");\n      }\n      //this.line = body.split(\"\\n\");\n      //this.nbLines = this.line.length ;\n      //this.size = body.length ;\n      this.raw = body;\n      this.blocks = [];\n      this.sessionBlock = null;\n      this.audioBlock = null;\n      this.videoBlock = null;\n      this.detectBlocks();\n      this.parseBlocks();\n    }\n\n    detectBlocks() {\n      var line = this.raw.split(\"\\n\");\n      var nbLines = line.length;\n      var first = 0;\n      var m = null;\n      for (var i = 0; i < nbLines; i++) {\n        var res = line[i].split(\"=\");\n        var key = res[0].replace(/ |\\n|\\r/g, \"\");\n        var value = res[1];\n        let data = null;\n        let size = null;\n        let media = null;\n        let type = null;\n        switch (key) {\n        case \"m\":\n          if (first === 0) {\n            data = line.slice(first, i);\n            size = data.length;\n          } else {\n            data = line.slice(first + 1, i);\n            size = data.length;\n          }\n          let parseM = this.parseMline(m);\n          if (parseM) {\n            media = parseM;\n            type = parseM.media;\n          } else {\n            media = null;\n            type = \"session\";\n          }\n          this.blocks.push({\n            type: type,\n            direction: null,\n            //start\t\t: first,\n            //end\t\t: i,\n            data: data,\n            //size\t\t: size,\n            media: media,\n            information: \"\",\n            attributes: [],\n            bandwidths: [],\n            candidates: [],\n            connection: null,\n            encryption: null\n          });\n          first = i;\n          m = value;\n          break;\n        }\n      }\n      var data = line.slice(first + 1, nbLines);\n      var size = data.length;\n      var media = null;\n      var type = null;\n      var parseM = this.parseMline(m);\n      if (parseM) {\n        media = parseM;\n        type = parseM.media;\n      } else {\n        media = null;\n        type = \"session\";\n      }\n      this.blocks.push({\n        type: type,\n        direction: null,\n        //start\t\t: first,\n        //end\t\t: nbLines,\n        data: data,\n        //size\t\t: size,\n        media: media,\n        information: \"\",\n        attributes: [],\n        bandwidths: [],\n        candidates: [],\n        connection: null,\n        encryption: null\n      });\n    }\n\n    parseMline(data) {\n      // RFC https://tools.ietf.org/html/rfc4566#section-5.14\n      //=<media> <port>/<number of ports> <proto> <fmt> ...\n      let obj = null;\n      if (data) {\n        obj = {\n          media: \"\",\n          port: \"\",\n          nbPort: 0,\n          proto: \"\",\n          fmt: [],\n          raw: data\n        };\n        var res = data.split(\" \");\n        for (var i = 0; i < res.length; i++) {\n          switch (i) {\n          case 0:\n            obj.media = res[i];\n            break;\n          case 1:\n            var ret = res[i].split(\"/\");\n            obj.port = ret[0];\n            if (ret[1]) {\n              obj.nbPort = ret[1];\n            } else {\n              obj.nbPort = 1;\n            }\n            break;\n          case 2:\n            obj.proto = res[i];\n            break;\n          default:\n            obj.fmt.push(res[i]);\n          }\n        }\n        return obj;\n      }\n      return null;\n    }\n\n    parseAline(data, block) {\n      //a=<attribute>:<value>\n      let obj = {};\n      if (!data) {\n        return obj;\n      }\n      let res = data.split(\":\");\n      let attribute = res[0].replace(/ |\\n|\\r/g, \"\");\n      let value = res[1];\n      if (aAttribute[attribute]) {\n        obj[attribute] = aAttribute[attribute](value, block);\n      } else {\n        switch (attribute) {\n        case \"setup\":\n          obj[attribute] = value;\n          block.setup = value;\n          break;\n        default:\n          if (aAttributeDirection[attribute]) {\n            var ele = aAttributeDirection[attribute](attribute, block);\n            obj[attribute] = ele;\n            block.direction = ele;\n          } else {\n            obj[attribute] = value;\n          }\n        }\n      }\n      return obj;\n    }\n\n    parseCline(data) {\n      //c=<nettype> <addrtype> <connection-address>\n      if (data) {\n        var obj = {\n          nettype: null,\n          addrtype: null,\n          address: null,\n          raw: data\n        };\n        var res = data.split(\" \");\n        for (var i = 0; i < res.length; i++) {\n          switch (i) {\n          case 0:\n            obj.nettype = res[i];\n            break;\n          case 1:\n            obj.addrtype = res[i];\n\n            break;\n          case 2:\n            obj.address = res[i];\n            break;\n          }\n        }\n        return obj;\n      }\n      return null;\n    }\n\n    parseOline(data) {\n      //o=<username> <sess-id> <sess-version> <nettype> <addrtype> <unicast-address>\n      let obj = null;\n      if (data) {\n        obj = {\n          username: null,\n          sessId: null,\n          sessVersion: null,\n          nettype: null,\n          addrtype: null,\n          unicastAddr: null,\n          raw: data\n        };\n        let res = data.split(\" \");\n        for (let i = 0; i < res.length; i++) {\n          switch (i) {\n          case 0:\n            obj.username = res[i];\n            break;\n          case 1:\n            obj.sessId = res[i];\n            break;\n          case 2:\n            obj.sessVersion = res[i];\n            break;\n          case 3:\n            obj.nettype = res[i];\n            break;\n          case 4:\n            obj.addrtype = res[i];\n            break;\n          case 5:\n            obj.unicastAddr = res[i];\n            break;\n          }\n        }\n        return obj;\n      }\n      return null;\n    }\n\n    /*\n     *\tTIME DESCRIPTION\n     */\n    parseTline(data) {\n      //t=<start-time> <stop-time>\n      if (data) {\n        var obj = {\n          start: null,\n          stop: null,\n          raw: data\n        };\n        var res = data.split(\" \");\n        for (var i = 0; i < res.length; i++) {\n          switch (i) {\n          case 0:\n            obj.start = res[i];\n            break;\n          case 1:\n            obj.stop = res[i];\n            break;\n          }\n        }\n        return obj;\n      }\n      return null;\n    }\n\n    parseRline(data) {\n      //r=<repeat interval> <active duration> <offsets from start-time>\n      if (data) {\n        var obj = {\n          interval: null,\n          duration: null,\n          offsets: null,\n          raw: data\n        };\n        var res = data.split(\" \");\n        for (var i = 0; i < res.length; i++) {\n          switch (i) {\n          case 0:\n            obj.interval = res[i];\n            break;\n          case 1:\n            obj.duration = res[i];\n            break;\n          case 2:\n            obj.offsets = res[i];\n            break;\n          }\n        }\n        return obj;\n      }\n      return null;\n    }\n\n    /** BLOCK MEDIA\n     *    Media description, if present\n     *  m=  (media name and transport address)\n     *  i= (media title)\n     *  c= (connection information -- optional if included at\n     *     session level)\n     *  b= (zero or more bandwidth information lines)\n     *  k= (encryption key)\n     *  a= (zero or more media attribute lines)\n     */\n    blockMediaParser(block) {\n      block.rtpmap = [];\n      for (var j = 0; j < block.data.length; j++) {\n        var res = block.data[j].split(\"=\");\n        var key = res[0].replace(/ |\\n|\\r/g, \"\");\n        var value = res[1];\n        switch (key) {\n        case \"a\":\n          block.attributes.push(this.parseAline(value, block));\n          break;\n        case \"c\":\n          block.connection = this.parseCline(value);\n          break;\n        case \"i\":\n          block.information = value;\n          break;\n        case \"b\":\n          block.bandwidths.push(value);\n          break;\n        case \"k\":\n          block.encryption = value;\n          break;\n        }\n      }\n      return block;\n    }\n\n    /*  BLOCK SESSION\n     *    session description\n     *  v=  (protocol version)\n     *  o=  (originator and session identifier)\n     *  s=  (session name)\n     *  i= (session information)\n     *  u= (URI of description)\n     *  e= (email address)\n     *  p= (phone number)\n     *  c= (connection information -- not required if included in\n     *     all media)\n     *  b= (zero or more bandwidth information lines)\n     *     One or more time descriptions (\"t=\" and \"r=\" lines; see below)\n     *  z= (time zone adjustments)\n     *  k= (encryption key)\n     *  a= (zero or more session attribute lines)\n     *     Zero or more media descriptions\n     */\n    blockSessionParser(block) {\n      block.protocol = null;\n      block.originator = null;\n      block.timeZone = null;\n      block.sessionName = null;\n      block.originator = null;\n      block.protocol = null;\n      block.uri = null;\n      block.phoneNumber = null;\n      block.email = null;\n      block.timeDescription = null;\n      block.timeRepeat = null;\n\n      for (var j = 0; j < block.data.length; j++) {\n        var res = block.data[j].split(\"=\");\n        var key = res[0].replace(/ |\\n|\\r/g, \"\");\n        var value = res[1];\n        switch (key) {\n        case \"v\":\n          block.protocol = value;\n          break;\n        case \"o\":\n          block.originator = this.parseOline(value);\n          break;\n        case \"s\":\n          block.sessionName = value;\n          break;\n        case \"u\":\n          block.uri = value;\n          break;\n        case \"e\":\n          block.email = value;\n          break;\n        case \"p\":\n          block.phoneNumber = value;\n          break;\n        case \"z\":\n          block.timeZone = value;\n          break;\n        case \"a\":\n          block.attributes.push(this.parseAline(value, block));\n          break;\n        case \"c\":\n          block.connection = this.parseCline(value);\n          break;\n        case \"i\":\n          block.information = value;\n          break;\n        case \"b\":\n          block.bandwidths.push(value);\n          break;\n        case \"k\":\n          block.encryption = value;\n          break;\n          // TIME DESCRIPTION\n        case \"t\":\n          block.timeDescription = this.parseTline(value);\n          break;\n        case \"r\":\n          block.timeRepeat = this.parseRline(value);\n          break;\n        }\n      }\n      return block;\n    }\n\n    parseBlocks() {\n      for (var i = 0; i < this.blocks.length; i++) {\n        switch (this.blocks[i].type) {\n        case \"session\":\n          this.sessionBlock = this.blockSessionParser(this.blocks[i]);\n          break;\n        case \"audio\":\n          this.audioBlock = this.blockMediaParser(this.blocks[i]);\n          break;\n        case \"video\":\n          this.videoBlock = this.blockMediaParser(this.blocks[i]);\n          break;\n        }\n      }\n    }\n  };\n\n  stage.io.protocols.sdp = parserSdp;\n\n  return parserSdp;\n};","module.exports = function (stage) {\n\n  'use strict';\n\n\n  const byteToHex = function (byte) {\n    return ('0' + byte.toString(16)).slice(-2);\n  };\n\n  const generateId = function (len) {\n    var arr = new Uint8Array((len || 40) / 2);\n    window.crypto.getRandomValues(arr);\n    return [].map.call(arr, byteToHex).join(\"\");\n  };\n\n  /*\n   *\n   *\tDIGEST authenticate\n   *\n   *\n   */\n  const stringify = function (value) {\n    return '\"' + value + '\"';\n  };\n\n  const reg = /^([^=]+)=(.+)$/;\n  const parserAuthenticate = function (str) {\n    var ret = str.replace(/\"/g, \"\");\n    ret = ret.replace(/Digest /g, \"\");\n    var head = ret.split(\",\");\n    var obj = [];\n    for (var i = 0; i < head.length; i++) {\n      var res = reg.exec(head[i]);\n      var key = res[1].replace(/ |\\n|\\r/g, \"\");\n      if (res && key) {\n        obj[key] = res[2];\n      }\n    }\n    return obj;\n  };\n\n  const MD5 = stage.crypto.md5.hex_md5_noUTF8;\n  //var BASE64 = stage.crypto.base64.encode ;\n\n  const digest = {\n    generateA1: function (username, realm, password, nonce, cnonce) {\n      var A1 = null;\n      if (cnonce) {\n        A1 = username + \":\" + realm + \":\" + password + \":\" + nonce + \":\" + cnonce;\n      } else {\n        A1 = username + \":\" + realm + \":\" + password; //+ \":\" + nonce ;\n      }\n      //console.log(A1)\n      return MD5(A1);\n    },\n    generateA2: function (method, uri, entity_body, qop) {\n      var A2 = \"\";\n      if (!qop || qop === \"auth\") {\n        A2 = method + \":\" + uri;\n      } else if (qop === \"auth-int\") {\n        if (entity_body) {\n          var entity = MD5(entity_body);\n          A2 = method + \":\" + uri + \":\" + entity;\n        } else {\n          A2 = method + \":\" + uri + \":\" + \"d41d8cd98f00b204e9800998ecf8427e\";\n        }\n      }\n      //console.log(A2)\n      return MD5(A2);\n    },\n    generateResponse: function (A1, nonce, noncecount, cnonce, qop, A2) {\n      var res = \"\";\n      if (qop === \"auth\" || qop === \"auth-int\") {\n        res = A1 + \":\" + nonce + \":\" + noncecount + \":\" + cnonce + \":\" + qop + \":\" + A2;\n      } else {\n        res = A1 + \":\" + nonce + \":\" + A2;\n      }\n      //console.log(res)\n      return MD5(res);\n    }\n  };\n\n\n  const authenticate = class authenticate {\n\n    constructor(dialog, username, password) {\n\n      this.dialog = dialog;\n      this.userName = username;\n      this.password = password;\n      this.uri = \"sip:\" + this.dialog.sip.server;\n      this.realm = \"nodefony.com\";\n      this.nonce = null;\n      this.cnonce = null;\n      this.nonceCount = null;\n      this.qop = null;\n      this.algorithm = null;\n      this.entity_body = null;\n      this.timeout = null;\n      this.unregisterSended = false;\n    }\n\n    register(message, type) {\n      //console.log(\"AUTH REGISTER\")\n      //console.log(message);\n      var head = message.authenticate;\n      if (!head) {\n        head = this.dialog.authenticate;\n      } else {\n        this.dialog.authenticate = head;\n      }\n      this.realm = head.realm;\n      this.nonce = head.nonce;\n      this.cnonce = head.cnonce;\n      this.qop = head.qop;\n      this.algorithm = head.Digestalgorithm ? head.Digestalgorithm : \"md5\";\n      if (message.rawBody) {\n        this.entity_body = message.rawBody;\n      }\n      switch (this.algorithm.toLowerCase()) {\n      case \"md5\":\n        this.response = this.digestMD5(message.method);\n        break;\n      }\n\n      var method = \"\";\n      if (!type) {\n        method = \"Authorization: \";\n      } else {\n        if (type === \"proxy\") {\n          method = \"Proxy-Authorization: \";\n        } else {\n          method = \"Authorization: \";\n        }\n      }\n      var line = \"Digest username=\" + stringify(this.userName) + \", realm=\" + stringify(this.realm) + \", nonce=\" + stringify(this.nonce) + \", uri=\" + stringify(this.uri) + \", algorithm=\" + this.algorithm + \", response=\" + stringify(this.response);\n      this.lineResponse = method + line;\n\n      //var transac = message.transaction ;\n      var transac = this.dialog.createTransaction(message.transaction.to);\n      this.dialog.tagTo = null;\n      //this.dialog.sip.fire(\"onInitCall\", this.dialog.toName, this.dialog, transac);\n      var request = transac.createRequest(this.dialog.body, this.dialog.bodyType);\n      request.header.response = this.lineResponse;\n      request.send();\n      this.dialog.sip.createDialogTimeout(this.dialog);\n      return transac;\n    }\n\n    unregister() {\n      this.dialog.expires = 0;\n      this.dialog.contact = \"*\";\n      let trans = this.dialog.createTransaction(this.dialog.from);\n      this.dialog.to = this.dialog.from;\n      this.dialog.tagTo = null;\n      let request = trans.createRequest();\n      if (this.lineResponse) {\n        request.header.response = this.lineResponse;\n      }\n      this.unregisterSended = true;\n      request.send();\n      return trans;\n    }\n\n\n\n    digestMD5(method) {\n      var A1 = digest.generateA1(this.userName, this.realm, this.password, this.nonce, this.cnonce);\n      var A2 = digest.generateA2(method, this.uri, this.entity_body, this.qop);\n      return digest.generateResponse(A1, this.nonce, this.nonceCount, this.cnonce, this.qop, A2);\n    }\n  };\n\n\n  /*\n   *\n   * CLASS PARSER HEADER SIP\n   *\n   *\n   */\n  //var regContact = /.*<(sip:.*)>(.*)|.*<(sips:.*)>(.*)/g;\n  const regHeaders = {\n    line: /\\r\\n|\\r|\\n/,\n    headName: /: */,\n    Allow: /, */,\n    Via: /; */,\n    CallId: /^(.*)@.*$/,\n    algorithm: /= */,\n    fromTo: /<sip:(.*)@(.*)>/,\n    fromToG: /(.*)?<sip:(.*)@(.*)>/,\n    contact: /.*<(sips?:.*)>(.*)?$/\n  };\n\n  const parsefromTo = function (type, value) {\n    try {\n      var sp = value.split(\";\");\n      this.message[type + \"Tag\"] = null;\n      var res = sp.shift();\n      var res2 = regHeaders.fromTo.exec(res);\n      //console.log(regHeaders.fromToG.exec(res))\n      //console.log(res2)\n      this.message[type + \"Name\"] = (res2.length > 2) ? res2[1].replace(/ |\\n|\\r/g, \"\").replace(/\"/g, \"\") : \"\";\n      this.message[type] = res2[1].replace(\" \", \"\") + \"@\" + res2[2].replace(/ |\\n|\\r/g, \"\");\n      var ret = regHeaders.fromToG.exec(res);\n      if (ret && ret[1]) {\n        var displayName = ret[1].replace(/\"/g, \"\");\n        //this.message[type+\"Name\"] = displayName ;\n        this.message[type + \"NameDisplay\"] = displayName;\n        //console.log(displayName)\n      }\n\n      for (var i = 0; i < sp.length; i++) {\n        var res3 = sp[i].split(\"=\");\n        if (res3[0].replace(/ |\\n|\\r/g, \"\") === \"tag\") {\n          this.message[type + \"Tag\"] = res3[1];\n        } else {\n          this.message[res3[0]] = res3[1];\n        }\n      }\n      return value;\n    } catch (e) {\n      throw e;\n    }\n  };\n\n\n  const headerSip = class headerSip {\n\n    constructor(message, header) {\n      this.rawHeader = {};\n      this.message = message;\n      this.method = null;\n      this.firstLine = null;\n      this.branch = null;\n      this.Via = [];\n      this.routes = [];\n      this.recordRoutes = [];\n      if (header && typeof header === \"string\") {\n        try {\n          this.parse(header);\n        } catch (e) {\n          //throw new Error(\"PARSE ERROR MESSAGE SIP\", 500);\n          throw e;\n        }\n      }\n    }\n\n    parse(header) {\n      var tab = header.split(regHeaders.line);\n      var type = tab.shift();\n      this.firstLine = type.split(\" \");\n      $.each(tab, (Index, ele) => {\n        var res = regHeaders.headName.exec(ele);\n        var size = res[0].length;\n        var headName = res.input.substr(0, res.index);\n        var headValue = res.input.substr(res.index + size);\n        this.rawHeader[headName] = headValue;\n        var func = \"set\" + headName;\n        if (func === \"setVia\") {\n          var index = this.Via.push(headValue);\n          this[headName][index - 1] = this[func](headValue, ele);\n        } else {\n          this[headName] = headValue;\n          if (this[func]) {\n            try {\n              this[headName] = this[func](headValue);\n            } catch (e) {\n              this.message.sip.logger(\"Parse : \" + headName, \"ERROR\");\n              throw e;\n            }\n          }\n        }\n      });\n      if (!this[\"Content-Type\"]) {\n        this.message.contentType = null;\n      } else {\n        this.message.contentType = this[\"Content-Type\"];\n      }\n    }\n\n    setFrom(value) {\n      parsefromTo.call(this, \"from\", value);\n      return value;\n    }\n\n    setTo(value) {\n      parsefromTo.call(this, \"to\", value);\n      return value;\n    }\n\n    \"setWWW-Authenticate\" (value) {\n      this.message.authenticate = parserAuthenticate(value);\n      /*var ele ={};\n\t\t  \tvar res = value.split(\",\")\n\t\t  \tfor (var i=0 ; i < res.length ;i++){\n\t\t  \tvar ret = regHeaders.algorithm.exec(res[i]);\n\t\t  \tvar size = ret[0].length;\n\t\t  \tvar headName = ret.input.substr(0,ret.index).replace(\" \",\"\");\n\t\t  \tvar headValue = ret.input.substr(ret.index+size).replace(/\"/g,\"\");\n\t\t  \tele[headName] = headValue.replace(/\"/g,\"\");\n\t\t  \t}\n\t\t  \tthis.message.authenticate = ele ;*/\n      return value;\n    }\n\n    \"setProxy-Authenticate\" (value) {\n      this.message.authenticate = parserAuthenticate(value);\n      return value;\n    }\n\n    \"setRecord-Route\" (value) {\n      this.recordRoutes.push(value);\n      return value;\n    }\n\n    \"setRoute\" (value) {\n      this.routes.push(value);\n      return value;\n    }\n\n    setDate(value) {\n      try {\n        this.message.date = new Date(value);\n      } catch (e) {\n        this.message.date = value;\n      }\n      return value;\n    }\n\n    \"setCall-ID\" (value) {\n      this.message.callId = value;\n      return value;\n      /*this.callIdRaw = value ;\n\t\t  \tvar res = regHeaders.CallId.exec(value);\n\t\t  \tif (res){\n\t\t  \tthis.message.callId =res[1];\n\t\t  \treturn res[1];\n\n\t\t  \t}else{\n\t\t  \tthis.message.callId =value;\n\t\t  \treturn value;\n\t\t  \t}*/\n    }\n\n    setCSeq(value) {\n      var res = value.split(\" \");\n      this.message.cseq = parseInt(res[0], 10);\n      this.message.method = res[1];\n      return value;\n    }\n\n    setContact(value) {\n      var parseValue = regHeaders.contact.exec(value);\n      if (parseValue) {\n        this.message.contact = parseValue[1];\n        if (parseValue[2]) {\n          var clean = parseValue[2].replace(/^;(.*)/, \"$1\");\n          var sp = clean.split(\";\");\n          for (var i = 0; i < sp.length; i++) {\n            var res = sp[i].split(\"=\");\n            if (!res) {\n              continue;\n            }\n            var name = res[0].toLowerCase();\n            if (name === \"expires\") {\n              this[\"contact-\" + name] = res[1];\n            }\n          }\n        }\n      } else {\n        throw new Error(\"Contact parse error : \" + value);\n      }\n      return value;\n    }\n\n    setAllow(value) {\n      if (value) {\n        return this.Allow.split(regHeaders.Allow);\n      } else {\n        return this.Allow;\n      }\n    }\n\n    setSupported(value) {\n      if (value) {\n        return this.Supported.split(regHeaders.Allow);\n      } else {\n        return this.Supported;\n      }\n    }\n\n    setVia(value, raw) {\n      if (value) {\n        var res = value.split(regHeaders.Via);\n        var obj = {\n          line: Array.prototype.shift.call(res),\n          raw: raw\n        };\n        for (var i = 0; i < res.length; i++) {\n          var tab = res[i].split('=');\n          if (tab) {\n            if (tab[0] === \"branch\") {\n              if (!this.branch) {\n                this.branch = tab[1];\n              }\n            }\n            obj[tab[0]] = tab[1];\n          }\n        }\n        return obj;\n      } else {\n        return value;\n      }\n    }\n  };\n\n\n  /*\n   *\n   * CLASS PARSER BODY SIP\n   *\n   *\n   *\n   */\n  const bodySip = class bodySip {\n\n    constructor(message, body) {\n      this.message = message;\n      this.message.rawBody = body;\n      this.size = this.message.contentLength;\n      if (this.size !== body.length) {\n        throw new Error(\"BAD SIZE SIP BODY \");\n      }\n      if (body) {\n        this.parse(this.message.contentType, body);\n      }\n    }\n\n    parse(type, body) {\n      switch (type) {\n      case \"application/sdp\":\n        this.sdpParser(body);\n        break;\n      case \"application/dtmf-relay\":\n        this.dtmfParser(body);\n        break;\n      default:\n        this.body = body;\n      }\n    }\n\n    sdpParser(body) {\n      // Parser SDP\n      this.body = body || \"\";\n      if (!body) {\n        this.sdp = null;\n      } else {\n        try {\n          this.sdp = new stage.io.protocols.sdp(body);\n          //console.log(this.sdp)\n        } catch (e) {\n          throw e;\n        }\n      }\n    }\n\n    dtmfParser(body) {\n      // Parser DTMF\n      this.body = body || \"\";\n      if (!body) {\n        this.dtmf = null;\n      } else {\n        // Parser dtmf\n        var obj = {};\n        var line = body.split(\"\\n\");\n        for (var i = 0; i < line.length; i++) {\n          var res = line[i].split(\"=\");\n          obj[res[0].replace(/ |\\n|\\r/g, \"\")] = res[1];\n        }\n        this.dtmf = obj;\n      }\n    }\n  };\n\n\n  /*\n   *\n   * CLASS REQUEST\n   *\n   *\n   *\n   */\n  const endline = \"\\r\\n\";\n  const endHeader = \"\\r\\n\\r\\n\";\n\n  const sipRequest = class sipRequest {\n\n    constructor(transaction, bodyMessage, typeBody) {\n      this.transaction = transaction;\n      this[\"request-port\"] = this.transaction.dialog.sip.serverPort;\n\n      this.type = \"request\";\n      this.requestLine = {};\n      this.buildRequestline();\n\n      this.header = {};\n      this.buildHeader();\n\n      this.buildBody(bodyMessage || \"\", typeBody);\n    }\n\n    buildRequestline() {\n      this.requestLine.method = this.transaction.method.toUpperCase();\n      this.requestLine.version = this.transaction.dialog.sip.version;\n    }\n\n    getRequestline(uri) {\n      switch (this.transaction.method) {\n      case \"REGISTER\":\n        this[\"request-uri\"] = \"sip:\" + this.transaction.dialog.sip.server;\n        return this.transaction.method + \" \" + this[\"request-uri\"] + \" \" + this.requestLine.version + endline;\n      case \"INVITE\":\n      case \"BYE\":\n      case \"NOTIFY\":\n      case \"INFO\":\n      case \"CANCEL\":\n      case \"ACK\":\n        this[\"request-uri\"] = this.transaction.dialog[\"request-uri\"];\n        return this.transaction.method + \" \" + this[\"request-uri\"] + \" \" + this.requestLine.version + endline;\n      }\n    }\n\n    buildHeader() {\n      //FIXE ME RPORT IN VIA PARSER\n\n      let rport = this.transaction.dialog.sip.rport;\n      let ip = this.transaction.dialog.sip.publicAddress;\n\n      this.header.via = \"Via: \" + this.transaction.dialog.sip.via + \";\" + \"branch=\" + this.transaction.branch;\n      //if ( rport ){\n      //this.header.via  = \"Via: \"+this.transaction.dialog.sip.version+\"/\"+this.transaction.dialog.sip.settings.transport+\" \" +ip+\":\"+rport+\";\"+\"branch=\"+this.transaction.branch;\n      //}else{\n      //this.header.via  = \"Via: \"+this.transaction.dialog.sip.version+\"/\"+this.transaction.dialog.sip.settings.transport+\" \" +ip+\":\"+this[\"request-port\"]+\";\"+\"branch=\"+this.transaction.branch;\n      //}\n      this.header.cseq = \"CSeq: \" + this.transaction.dialog.cseq + \" \" + this.transaction.method;\n\n      this.header.from = \"From: \" + this.transaction.dialog.from + \";tag=\" + this.transaction.dialog.tagFrom;\n\n      let tagTo = this.transaction.dialog.tagTo ? \";tag=\" + this.transaction.dialog.tagTo : \"\";\n      this.header.to = \"To: \" + this.transaction.to + tagTo;\n\n      this.header.callId = \"Call-ID: \" + this.transaction.dialog.callId;\n      this.header.expires = \"Expires: \" + this.transaction.dialog.expires;\n      this.header.maxForward = \"Max-Forwards: \" + this.transaction.dialog.maxForward;\n      this.header.userAgent = \"User-Agent: \" + this.transaction.dialog.sip.settings.userAgent;\n\n      this.header.contact = \"Contact: \" + this.transaction.dialog.contact;\n\n      if (this.transaction.dialog.routes && this.transaction.dialog.routes.length) {\n        this.header.routes = [];\n        for (let i = this.transaction.dialog.routes.length - 1; i >= 0; i--) {\n          this.header.routes.push(\"Route: \" + this.transaction.dialog.routes[i]);\n        }\n      }\n    }\n\n    getHeader() {\n      var head = \"\";\n      for (var line in this.header) {\n        switch (stage.typeOf(this.header[line])) {\n        case \"string\":\n          head += this.header[line] + endline;\n          break;\n        case \"array\":\n          for (var i = 0; i < this.header[line].length; i++) {\n            head += this.header[line][i] + endline;\n          }\n          break;\n        }\n      }\n      return head;\n    }\n\n    buildBody(body, type) {\n      this.header.contentLength = \"Content-Length: \" + body.length;\n      if (type) {\n        this.header.contentType = \"Content-Type: \" + type;\n      }\n      this.body = body ||  \"\";\n    }\n\n    getBody() {\n      return this.body;\n    }\n\n    getMessage() {\n      //console.log(this.getRequestline() + this.getHeader() + endline + this.getBody())\n      //console.log(this.getRequestline() + this.getHeader() + endline + this.getBody())\n      return this.rawResponse = this.getRequestline() + this.getHeader() + endline + this.getBody();\n    }\n\n    send() {\n      return this.transaction.send(this.getMessage());\n    }\n  };\n\n\n  /*\n   *\n   * CLASS RESPONSE\n   *\n   *\n   *\n   */\n  const codeMessage = {\n    200: \"OK\"\n  };\n\n  const sipResponse = class sipResponse {\n\n    constructor(message, code, messageCode, bodyMessage, typeBody) {\n      this.message = message;\n      this.transaction = message.transaction;\n      this.dialog = message.dialog;\n      this.responseLine = {};\n      this.buildResponseLine(code, messageCode);\n      this.header = []; // message.header.messageHeaders;\n      this.buildHeader(message);\n      this.buildBody(bodyMessage || \"\", typeBody);\n    }\n\n    buildHeader(message) {\n      for (let head in message.rawHeader) {\n        let i = 0;\n        switch (head) {\n        case \"Allow\":\n        case \"Supported\":\n          var ptr = \"\";\n          for (i = 0; i < message.header[head].length; i++) {\n            if (i < message.header[head].length - 1) {\n              ptr += message.header[head][i] + \",\";\n            } else {\n              ptr += message.header[head][i];\n            }\n          }\n          this.header.push(head + \": \" + ptr);\n          break;\n        case \"Via\":\n          if (this.responseLine.code == \"487\") {\n            for (i = 0; i < this.dialog[head].length; i++) {\n              this.header.push(this.dialog[head][i].raw);\n            }\n          } else {\n            for (i = 0; i < message.header[head].length; i++) {\n              this.header.push(message.header[head][i].raw);\n            }\n          }\n          break;\n        case \"User-Agent\":\n          this.header.push(\"User-Agent: \" + this.transaction.dialog.sip.settings.userAgent);\n          break;\n        case \"Contact\":\n          /*var rport = this.transaction.dialog.sip.rport ;\n          var ip = this.transaction.dialog.sip.publicAddress;\n          if ( rport ){\n          \tthis.header.push( \"Contact: <sip:\" +this.transaction.to+\"@\"+ip+\":\"+rport+\";transport=\"+this.transaction.dialog.sip.settings.transport.toLowerCase()+\">\");\n          }else{\n          \tthis.header.push( \"Contact: <sip:\" +this.transaction.to+\"@\"+ip+\";transport=\"+this.transaction.dialog.sip.settings.transport.toLowerCase()+\">\");\n          }*/\n          this.header.push(\"Contact: \" + this.dialog.contact);\n          break;\n        case \"To\":\n          //console.log(message.header[head] )\n          //console.log(this.dialog.sip.displayName )\n          var ret = regHeaders.fromToG.exec(message.header[head]);\n          //console.log(ret)\n          if (ret && (!ret[1])) {\n            //console.log(\"traff to\")\n            message.header[head] = '\"' + this.dialog.sip.displayName + '\"' + message.header[head];\n          }\n          //console.log(message.header[head])\n          if (!message.header[head].match(/;tag=/)) {\n            this.header.push(head + \": \" + message.header[head] + (this.transaction.dialog.tagFrom ? \";tag=\" + this.transaction.dialog.tagFrom : \"\"));\n          } else {\n            this.header.push(head + \": \" + message.header[head]);\n          }\n          break;\n        case \"Record-Route\":\n          for (i = this.message.dialog.routes.length - 1; i >= 0; i--) {\n            this.header.push(head + \": \" + this.message.header.recordRoutes[i]);\n          }\n          break;\n        case \"CSeq\":\n          if (this.responseLine.code == \"487\" && this.dialog.method === \"CANCEL\") {\n            this.header.push(head + \": \" + message.header[head].replace(\"CANCEL\", \"INVITE\"));\n          } else {\n            this.header.push(head + \": \" + message.header[head]);\n          }\n          break;\n        case \"Content-Type\":\n        case \"Organization\":\n        case \"Server\":\n        case \"Content-Length\":\n          break;\n        default:\n          this.header.push(head + \": \" + message.header[head]);\n        }\n      }\n    }\n\n    getHeader() {\n      let head = \"\";\n      for (let line in this.header) {\n        head += this.header[line] + endline;\n      }\n      return head;\n    }\n\n    buildBody(body, type) {\n      this.header.contentLength = \"Content-Length: \" + body.length;\n      if (type) {\n        this.header.contentType = \"Content-Type: \" + type;\n      }\n      this.body = body ||  \"\";\n    }\n\n    getBody() {\n      return this.body;\n    }\n\n    buildResponseLine(code, messageCode) {\n      this.responseLine.method = this.transaction.method.toUpperCase();\n      this.responseLine.version = this.transaction.dialog.sip.version;\n      this.responseLine.code = code;\n      this.responseLine.message = messageCode || codeMessage[code];\n    }\n\n    getResponseline() {\n      if (this.responseLine.method === \"ACK\") {\n        return this.responseLine.method + \" \" + \"sip:\" + this.transaction.from + \"@\" + this.transaction.dialog.sip.server + \" \" + this.responseLine.version + endline;\n      }\n      return this.responseLine.version + \" \" + this.responseLine.code + \" \" + this.responseLine.message + endline;\n    }\n\n    getMessage() {\n      //console.log(\"RESPONSE : \" +this.getResponseline() + this.getHeader() + endline + this.getBody())\n      return this.rawResponse = this.getResponseline() + this.getHeader() + endline + this.getBody();\n    }\n\n    send() {\n      return this.transaction.send(this.getMessage());\n    }\n  };\n\n\n  /*\n   *\n   * CLASS TRANSACTION\n   *\n   *\n   */\n  const generateHex = function () {\n    return Math.floor(Math.random() * 167772150000000).toString(16);\n  };\n\n  const Transaction = class Transaction {\n\n    constructor(to, dialog) {\n      this.dialog = dialog;\n      if (to instanceof Message) {\n        this.hydrate(to);\n      } else {\n        this.to = to;\n        this.from = dialog.from;\n        this.method = dialog.method;\n        this.branch = this.generateBranchId();\n      }\n      this.responses = {};\n      this.requests = {};\n      this.interval = null;\n    }\n\n    hydrate(message) {\n      this.message = message;\n      if (message.type === \"REQUEST\") {\n        this.to = this.dialog.to;\n        this.from = this.dialog.from;\n        this.method = this.dialog.method;\n        this.branch = this.message.header.branch;\n      }\n      if (message.type === \"RESPONSE\") {\n        this.to = this.dialog.to;\n        this.from = this.dialog.from;\n        this.method = this.dialog.method;\n        this.branch = this.message.header.branch;\n      }\n    }\n\n    generateBranchId() {\n      let hex = generateHex();\n      if (hex.length === 12) {\n        return \"z9hG4bK\" + hex;\n      } else {\n        return this.generateBranchId();\n      }\n    }\n\n    createRequest(body, typeBody) {\n      if (this.method !== \"ACK\" && this.method !== \"CANCEL\") {\n        this.dialog.incCseq();\n      }\n      this.request = new sipRequest(this, body || \"\", typeBody);\n      this.message = null;\n      return this.request;\n    }\n\n    createResponse(code, message, body, typeBody) {\n      if (this.method === \"INVITE\" || this.method === \"ACK\") {\n        switch (true) {\n        case code < 200:\n          this.dialog.status = this.dialog.statusCode.EARLY;\n          break;\n        case code < 300:\n          this.dialog.status = this.dialog.statusCode.ESTABLISHED;\n          break;\n        default:\n          this.dialog.status = this.dialog.statusCode.TERMINATED;\n        }\n      }\n      this.response = new sipResponse(this.message, code, message, body, typeBody);\n      return this.response;\n    }\n\n    send(message) {\n      return this.dialog.sip.send(message);\n    }\n\n    cancel() {\n      this.method = \"CANCEL\";\n      this.dialog.routes = null;\n      this.dialog.tagTo = \"\";\n      let request = this.createRequest();\n      request.send();\n      this.dialog.status = this.dialog.statusCode.CANCEL;\n      return request;\n    }\n\n    decline() {\n      let ret = this.createResponse(\n        603,\n        \"Declined\"\n      );\n      ret.send();\n      return ret;\n    }\n\n    clear() {\n      // CLEAR INTERVAL\n      if (this.interval) {\n        clearInterval(this.interval);\n      }\n    }\n  };\n\n  /*\n   *\n   * CLASS DIALOG\n   *\n   */\n  const statusCode = {\n    INITIAL: 0,\n    EARLY: 1, // on 1xx\n    ESTABLISHED: 2, // on 200 ok\n    TERMINATED: 3, // on by\n    CANCEL: 4 // cancel\n  };\n\n  const Dialog = class Dialog {\n\n    constructor(method, sip) {\n      this.sip = sip;\n      this.transactions = {};\n      this.statusCode = statusCode;\n      this.status = this.statusCode.INITIAL;\n      this.routes = null;\n      this.from = this.sip.from;\n      this.maxForward = this.sip.settings.maxForward;\n      this.expires = this.sip.settings.expires;\n      this.tagFrom = this.generateTag();\n      this.cseq = this.generateCseq();\n      this.unregisterSended = false;\n      if (method instanceof Message) {\n        this.hydrate(method);\n      } else {\n        this.method = method;\n        this.callId = this.generateCallId();\n        this.status = this.statusCode.INITIAL;\n        this.to = null;\n        this.tagTo = null;\n      }\n      //this.contact = this.sip.generateContact( null, null, true) ;\n      this.contact = this.sip.contact;\n    }\n\n    hydrate(message) {\n\n      if (message.type === \"REQUEST\") {\n        this.cseq = message.cseq;\n        this.method = message.method;\n        this.callId = message.callId;\n\n        // to\n        if (message.fromNameDisplay) {\n          this.to = '\"' + message.fromNameDisplay + '\"' + \"<sip:\" + message.from + \">\";\n        } else {\n          this.to = \"<sip:\" + message.from + \">\";\n        }\n        this.toName = message.fromName;\n        this.tagTo = message.fromTag || this.generateTag();\n        //from\n        this.tagFrom = message.toTag || this.tagFrom;\n        if (message.toNameDisplay) {\n          this.from = '\"' + message.toNameDisplay + '\"' + '<sip:' + message.to + '>';\n        } else {\n          this.from = \"<sip:\" + message.to + \">\";\n        }\n        this.fromName = message.toName;\n\n\n        // manage routes\n        if (message.header.recordRoutes.length) {\n          this.routes = message.header.recordRoutes.reverse();\n        }\n\n        // FIXME if (  ! this[\"request-uri\"] &&  message.contact )\n        if (message.contact) {\n          //this[\"request-uri\"] =  message.contact + \":\" + message.rport\n          this[\"request-uri\"] = message.contact;\n        }\n\n      }\n      if (message.type === \"RESPONSE\") {\n        this.cseq = message.cseq;\n        if (!this.callId) {\n          this.callId = message.callId;\n        }\n        if (!this.to) {\n          if (message.toNameDisplay) {\n            this.to = '\"' + message.toNameDisplay + '\"' + \"<sip:\" + message.to + \">\";\n          } else {\n            this.to = \"<sip:\" + message.to + \">\";\n          }\n        } else {\n          if (message.toNameDisplay) {\n            this.to = '\"' + message.toNameDisplay + '\"' + \"<sip:\" + message.to + \">\";\n          }\n        }\n\n        if (message.toTag) {\n          this.tagTo = message.toTag;\n        }\n        if (message.fromTag) {\n          this.tagFrom = message.fromTag;\n        }\n        // FIXME if (  ! this[\"request-uri\"] &&  message.contact )\n        if (message.contact) {\n          //this[\"request-uri\"] =  message.contact + \":\" + message.rport\n          this[\"request-uri\"] = message.contact;\n        }\n\n        // manage routes\n        if (message.header.recordRoutes.length) {\n          this.routes = message.header.recordRoutes;\n        }\n      }\n    }\n\n    generateCallId() {\n      return generateId() + \"@nodefony\";\n    }\n\n    generateTag() {\n      return \"nodefony\" + parseInt(Math.random() * 1000000000, 10);\n    }\n\n    generateCseq() {\n      return 1;\n    }\n\n    incCseq() {\n      this.cseq = this.cseq + 1;\n      return this.cseq;\n    }\n\n    getTransaction(id) {\n      if (id in this.transactions) {\n        return this.transactions[id];\n      }\n      return null;\n    }\n\n    createTransaction(to) {\n      this.currentTransaction = new Transaction(to || this.to, this);\n      this.sip.logger(\"SIP NEW TRANSACTION :\" + this.currentTransaction.branch, \"DEBUG\");\n      this.transactions[this.currentTransaction.branch] = this.currentTransaction;\n      return this.currentTransaction;\n    }\n\n    register() {\n      let trans = this.createTransaction(this.from);\n      this.to = this.from;\n      let request = trans.createRequest();\n      request.send();\n      return trans;\n    }\n\n    unregister() {\n      this.expires = 0;\n      this.contact = \"*\";\n      let trans = this.createTransaction(this.from);\n      this.to = this.from;\n      this.tagTo = null;\n      let request = trans.createRequest();\n      request.send();\n      this.unregisterSended = true;\n      return trans;\n    }\n\n    ack( /*message*/ ) {\n      if (!this[\"request-uri\"]) {\n        this[\"request-uri\"] = this.sip[\"request-uri\"];\n      }\n      //this.method = \"ACK\" ;\n      let trans = this.createTransaction();\n      trans.method = \"ACK\";\n      let request = trans.createRequest();\n      request.send();\n      return request;\n    }\n\n    invite(userTo, description, type) {\n\n      if (this.status === this.statusCode.CANCEL) {\n        return null;\n      }\n      this.sip.logger(\"SIP INVITE DIALOG\");\n      if (userTo) {\n        this.to = \"<sip:\" + userTo + \">\";\n      }\n      this.method = \"INVITE\";\n      if (!this[\"request-uri\"]) {\n        this[\"request-uri\"] = \"sip:\" + userTo;\n      }\n\n      if (description.sdp) {\n        this.bodyType = \"application/sdp\";\n        this.body = description.sdp;\n      } else {\n        this.bodyType = type;\n        this.body = description;\n      }\n      let trans = this.createTransaction(this.to);\n      let request = trans.createRequest(this.body, this.bodyType);\n      request.send();\n      return trans;\n\n    }\n\n    notify(userTo, notify, typeNotify) {\n      this.method = \"NOTIFY\";\n      if (userTo) {\n        this.to = \"<sip:\" + userTo + \">\";\n      }\n      if (!this[\"request-uri\"]) {\n        this[\"request-uri\"] = \"sip:\" + userTo;\n      }\n      if (typeNotify) {\n        this.bodyType = typeNotify;\n      }\n      if (notify) {\n        this.body = notify;\n      }\n      let trans = this.createTransaction(this.to);\n      let request = trans.createRequest(this.body, this.bodyType);\n      request.send();\n      return this;\n\n    }\n\n    info(info, typeInfo) {\n      this.method = \"INFO\";\n\n      if (typeInfo) {\n        this.bodyType = typeInfo;\n      }\n      if (info) {\n        this.body = info;\n      }\n      let trans = this.createTransaction(this.to);\n      let request = trans.createRequest(this.body, this.bodyType);\n      request.send();\n      return this;\n\n    }\n\n    bye() {\n      this.method = \"BYE\";\n      let trans = this.createTransaction();\n      let request = trans.createRequest();\n      request.send();\n      return this;\n\n    }\n\n    clear(id) {\n      if (id) {\n        if (this.transactions[id]) {\n          this.transactions[id].clear();\n          delete this.transactions[id];\n        } else {\n          throw new Error(\"TRANSACTION not found :\" + id);\n        }\n      } else {\n        for (let transac in this.transactions) {\n          this.transactions[transac].clear();\n          delete this.transactions[transac];\n        }\n      }\n    }\n  };\n\n\n\n  /*\n   *\n   *\tMESSAGE SIP\n   *\n   *\n   */\n  const firstline = function (firstLine) {\n    let method = firstLine[0];\n    let code = firstLine[1];\n    if (method === \"BYE\" && !code) {\n      code = 200;\n    }\n    let message = \"\";\n    for (let i = 2; i < firstLine.length; i++) {\n      message += firstLine[i] + \" \";\n    }\n    return {\n      method: method,\n      code: code,\n      message: message\n    };\n  };\n\n  const regSIP = /\\r\\n\\r\\n/;\n  const Message = class Message {\n\n    constructor(message, sip) {\n      this.sip = sip;\n      if (message) {\n        this.rawMessage = message;\n        this.header = null;\n        this.body = null;\n        this.statusLine = null;\n        this.contentLength = 0;\n        this.code = null;\n        this.statusLine = \"\";\n        this.split = message.split(regSIP);\n        if (this.split.length && this.split.length <= 2) {\n          try {\n            this.parseHeader();\n            this.contentLength = parseInt(this.header[\"Content-Length\"], 10);\n            this.parseBody();\n            this.statusLine = firstline(this.header.firstLine);\n            this.code = parseInt(this.statusLine.code, 10);\n            this.getType();\n          } catch (e) {\n            throw e;\n          }\n\n          this.rawHeader = this.header.rawHeader;\n          //console.log(this.rawHeader)\n        }\n        this.getDialog();\n        this.getTransaction();\n\n      } else {\n        throw new Error(\"BAD FORMAT MESSAGE SIP no message\", 500);\n      }\n    }\n\n    getType() {\n      if (this.code) {\n        if ((typeof this.code) === \"number\" && !isNaN(this.code)) {\n          this.type = \"RESPONSE\";\n        } else {\n          throw new Error(\"BAD FORMAT MESSAGE SIP message code   \");\n        }\n      } else {\n        if (this.method) {\n          this.type = \"REQUEST\";\n        } else {\n          this.type = null;\n          throw new Error(\"BAD FORMAT MESSAGE SIP message type not defined  \");\n        }\n      }\n    }\n\n    parseBody() {\n      try {\n        if (this.split[1]) {\n          this.body = new bodySip(this, this.split[1]);\n        } else {\n          this.body = new bodySip(this, \"\");\n        }\n      } catch (e) {\n        this.sip.logger(\"SIP parseBody Message :\" + this.split[1], \"ERROR\");\n        throw e;\n      }\n    }\n\n    parseHeader() {\n      if (this.split[0]) {\n        try {\n          this.header = new headerSip(this, this.split[0]);\n        } catch (e) {\n          this.sip.logger(\"SIP parseHeader Message :\" + this.split[0], \"ERROR\");\n          throw e;\n        }\n      } else {\n        throw (\"BAD FORMAT MESSAGE SIP no header \", 500);\n      }\n    }\n\n    getContact() {\n      return this.contact;\n    }\n\n    getHeader() {\n      return this.header;\n    }\n\n    getBody() {\n      return this.body;\n    }\n\n    getStatusLine() {\n      return this.statusLine;\n    }\n\n    getCode() {\n      return this.code;\n    }\n\n    getDialog() {\n      if (this.header[\"Call-ID\"]) {\n        this.dialog = this.sip.getDialog(this.header[\"Call-ID\"]);\n        if (!this.dialog) {\n          this.dialog = this.sip.createDialog(this);\n        } else {\n          this.sip.logger(\"SIP HYDRATE DIALOG :\" + this.dialog.callId, \"DEBUG\");\n          this.dialog.hydrate(this);\n        }\n        return this.dialog;\n      } else {\n        throw new Error(\"BAD FORMAT SIP MESSAGE no Call-ID\", 500);\n      }\n    }\n\n    getTransaction() {\n      if (this.header.branch) {\n        if (!this.dialog) {\n          this.getDialog();\n        }\n        if (this.dialog) {\n          this.transaction = this.dialog.getTransaction(this.header.branch);\n          if (!this.transaction) {\n            this.transaction = this.dialog.createTransaction(this);\n          } else {\n            this.sip.logger(\"SIP HYDRATE TRANSACTION :\" + this.transaction.branch, \"DEBUG\");\n            this.transaction.hydrate(this);\n          }\n        } else {\n          this.transaction = null;\n        }\n        return this.transaction;\n      } else {\n        // TODO CSEQ mandatory\n        this.sip.logger(this.rawMessage, \"ERROR\");\n        throw new Error(\"BAD FORMAT SIP MESSAGE no Branch\", 500);\n      }\n    }\n  };\n\n  /*\n   *\n   *\n   *\tCLASS SIP\n   *\n   *\n   */\n  // entry point response transport\n  const onMessage = function (response) {\n\n    this.logger(response, \"INFO\", \"RECIEVE\");\n    let message = null;\n    let res = null;\n    try {\n      //console.log(this.fragment)\n      if (this.fragment) {\n        this.lastResponse += response;\n        //console.log(this.lastResponse);\n      } else {\n        this.lastResponse = response;\n      }\n      message = new Message(this.lastResponse, this);\n      this.fragment = false;\n    } catch (e) {\n      //console.log(e);\n      // bad split\n      for (let i = 0; i < e.length; i++) {\n        if (e[i]) {\n          try {\n            onMessage.call(this, e[i]);\n            continue;\n          } catch (e) {\n            //console.log(\"FRAGMENTE\")\n            this.fragment = true;\n            return;\n          }\n        }\n      }\n      this.logger(e, \"ERROR\");\n      this.logger(\"SIP DROP : \" + response, \"ERROR\");\n      this.notificationsCenter.fire(\"onDrop\", response);\n      return;\n    }\n    this.fire(\"onMessage\", message.rawMessage);\n\n    switch (message.method) {\n    case \"REGISTER\":\n      this.rport = message.header.Via[0].rport;\n      if (message.dialog) {\n        this.clearDialogTimeout(message.dialog);\n      }\n      if (this.rport) {\n        this[\"request-uri\"] = \"sip:\" + this.userName + \"@\" + this.publicAddress + \":\" + this.rport + \";transport=\" + this.transportType;\n      }\n      switch (message.code) {\n      case 401:\n      case 407:\n        if (this.registered === 200) {\n          if (this.registerInterval) {\n            clearInterval(this.registerInterval);\n          }\n          this.registerInterval = null;\n        } else {\n\n          if (this.registered === 401 || this.registered === 407) {\n            if (this.registerInterval) {\n              clearInterval(this.registerInterval);\n            }\n            this.registerInterval = null;\n            this.registered = null;\n            this.notificationsCenter.fire(\"onError\", this, message);\n            break;\n          }\n          this.registered = message.code;\n        }\n        delete this.authenticateRegister;\n        this.authenticateRegister = null;\n        this.authenticateRegister = new authenticate(message.dialog, this.userName, this.settings.password);\n        this.authenticateRegister.register(message, message.code === 407 ? \"proxy\" : null);\n        break;\n      case 403:\n        if (this.registerInterval) {\n          clearInterval(this.registerInterval);\n        }\n        this.registered = message.code;\n        //console.log(\"Forbidden (bad auth)\")\n        delete this.authenticateRegister;\n        this.authenticateRegister = null;\n        this.notificationsCenter.fire(\"onError\", this, message);\n        break;\n      case 404:\n        if (this.registerInterval) {\n          clearInterval(this.registerInterval);\n        }\n        this.registered = message.code;\n        delete this.authenticateRegister;\n        this.authenticateRegister = null;\n        this.notificationsCenter.fire(\"onError\", this, message);\n        break;\n      case 200:\n        if (this.registerInterval) {\n          clearInterval(this.registerInterval);\n        }\n        if (this.authenticateRegister && this.authenticateRegister.unregisterSended) {\n          this.registered = \"404\";\n          this.notificationsCenter.fire(\"onUnRegister\", this, message);\n          this.clear();\n          return;\n        }\n        if (message.dialog.unregisterSended) {\n          this.registered = \"404\";\n          this.notificationsCenter.fire(\"onUnRegister\", this, message);\n          this.clear();\n          return;\n        }\n        if (this.registered === 401 || this.registered === null) {\n          this.notificationsCenter.fire(\"onRegister\", this, message);\n        }\n        this.registered = message.code;\n\n        let expires = message.header[\"contact-expires\"] ||  this.settings.expires;\n        expires = parseInt(expires, 10) * 900; // 10% (ms)\n        this.registerInterval = setInterval(() => {\n          this.authenticateRegister.register(message);\n          this.notificationsCenter.fire(\"onRenew\", this, this.authenticateRegister, message);\n        }, expires);\n        break;\n      default:\n        this.registered = message.code;\n        delete this.authenticateRegister;\n        this.authenticateRegister = null;\n        //console.log(message);\n        this.notificationsCenter.fire(\"on\" + message.code, this, message);\n        break;\n      }\n      break;\n    case \"INVITE\":\n      //this.rport = message.rport || this.rport;\n      if (message.dialog) {\n        this.clearDialogTimeout(message.dialog);\n      }\n      switch (message.type) {\n      case \"REQUEST\":\n        if (message.dialog.status === message.dialog.statusCode.INITIAL) {\n          this.fire(\"onInitCall\", message.dialog.toName, message.dialog, message.transaction);\n          if (message.header.Via) {\n            message.dialog.Via = message.header.Via;\n          }\n          this.notificationsCenter.fire(\"onInvite\", message, message.dialog);\n        } else {\n          //console.log(message.dialog.statusCode[message.dialog.status])\n          if (message.dialog.status === message.dialog.statusCode.ESTABLISHED) {\n            this.notificationsCenter.fire(\"onInvite\", message, message.dialog);\n          } else {\n            let ret = message.transaction.createResponse(200, \"OK\");\n            ret.send();\n          }\n        }\n        break;\n      case \"RESPONSE\":\n        if (message.code >= 200) {\n          message.dialog.ack(message);\n        }\n        switch (message.code) {\n        case 407:\n        case 401:\n          delete this.authenticate;\n          this.authenticate = null;\n          this.authenticate = new authenticate(message.dialog, this.userName, this.settings.password);\n          var transaction = this.authenticate.register(message, message.code === 407 ? \"proxy\" : null);\n          this.fire(\"onInitCall\", message.dialog.toName, message.dialog, transaction);\n          break;\n        case 180:\n          this.notificationsCenter.fire(\"onRinging\", this, message);\n          message.dialog.status = message.dialog.statusCode.EARLY;\n          break;\n        case 100:\n          this.notificationsCenter.fire(\"onTrying\", this, message);\n          message.dialog.status = message.dialog.statusCode.EARLY;\n          break;\n        case 200:\n          this.notificationsCenter.fire(\"onCall\", message);\n          message.dialog.status = message.dialog.statusCode.ESTABLISHED;\n          break;\n        case 486:\n        case 603:\n          this.notificationsCenter.fire(\"onDecline\", message);\n          break;\n        case 403:\n          this.authenticate = false;\n          this.notificationsCenter.fire(\"onError\", this, message);\n          break;\n        case 487:\n        case 404:\n        case 477:\n        case 480:\n        case 484:\n        case 488:\n          this.notificationsCenter.fire(\"onError\", this, message);\n          break;\n        case 408:\n          this.notificationsCenter.fire(\"onTimeout\", this, message);\n          break;\n        case 500:\n          this.notificationsCenter.fire(\"onError\", this, message);\n          break;\n        default:\n          this.notificationsCenter.fire(\"on\" + message.code, this, message);\n          break;\n        }\n        break;\n      default:\n        // error BAD FORMAT\n      }\n      break;\n    case \"ACK\":\n      //console.log(\"ACK\");\n      //TODO manage interval messages timer retransmission\n      break;\n    case \"BYE\":\n      switch (message.code) {\n      case 200:\n        //console.log(\"200\")\n        this.notificationsCenter.fire(\"onBye\", message);\n        break;\n      default:\n        this.notificationsCenter.fire(\"onBye\", message);\n        if (message.type === \"REQUEST\") {\n          res = message.transaction.createResponse(200, \"OK\");\n          res.send();\n        }\n      }\n      break;\n    case \"INFO\":\n      switch (message.type) {\n      case \"REQUEST\":\n        //console.log(\"SIP   :\"+ message.method + \" \"+\" type: \"+message.contentType );\n        this.notificationsCenter.fire(\"onInfo\", message);\n        res = message.transaction.createResponse(200, \"OK\");\n        res.send();\n        break;\n      case \"RESPONSE\":\n        //console.log(\"SIP   :\"+ message.method + \" \"+\" code:\"+message.code );\n        this.notificationsCenter.fire(\"onDrop\", message);\n        break;\n      }\n      break;\n\n    case \"CANCEL\":\n      switch (message.type) {\n      case \"REQUEST\":\n        this.notificationsCenter.fire(\"onCancel\", message);\n        res = message.transaction.createResponse(200, \"OK\");\n        res.send();\n        message.dialog.status = message.dialog.statusCode.CANCEL;\n        res = message.transaction.createResponse(487, \"Request Terminated\");\n        res.send();\n        message.dialog.status = message.dialog.statusCode.TERMINATED;\n\n        break;\n      case \"RESPONSE\":\n\n        this.notificationsCenter.fire(\"onDrop\", message);\n        break;\n      }\n      break;\n    case \"REFER\":\n      this.logger(\"SIP REFER NOT ALLOWED :\" + message.method, \"WARNING\");\n      this.notificationsCenter.fire(\"onDrop\", message);\n      break;\n    default:\n      this.logger(\"SIP DROP :\" + message.method + \" \" + \" code:\" + message.code, \"WARNING\");\n      this.notificationsCenter.fire(\"onDrop\", message);\n      // TODO RESPONSE WITH METHOD NOT ALLOWED\n    }\n  };\n\n  var onStart = function () {\n    this.fire(\"onStart\", this);\n  };\n\n  var onStop = function () {\n    this.stop();\n  };\n\n  var defaultSettings = {\n    expires: 200, // en secondes\n    maxForward: 70,\n    version: \"SIP/2.0\",\n    userAgent: \"nodefony\",\n    portServer: \"5060\",\n    userName: \"userName\",\n    displayName: \"\",\n    pwd: \"password\",\n    transport: \"TCP\"\n  };\n\n\n  // CLASS\n  const SIP = class SIP extends stage.Service {\n\n    constructor(server, transport, settings) {\n\n      super(\"SIP\", null, null, settings);\n      this.settings = stage.extend({}, defaultSettings, settings);\n      this.dialogs = {};\n      this.version = this.settings.version;\n\n      //\n      this.server = server;\n      this.serverPort = this.settings.portServer;\n\n      this.authenticate = false;\n      this.authenticateRegister = null;\n\n      // REGISTER\n      this.registerInterval = null;\n      this.registerTimeout = {};\n      this.registered = null;\n      this.diagRegister = null;\n\n      // TRANSPORT\n      this.transport = transport;\n      if (this.transport) {\n        this.initTransport();\n      }\n      this.transportType = this.settings.transport.toLowerCase();\n\n      this.contact = null;\n      this.via = null;\n      // IDENTIFIANT\n      //  USER\n      //this.userName = this.settings.userName ;\n      //this.from = \"<sip:\"+this.userName+\"@\"+this.publicAddress+\">\" ;\n      //this.contact = this.generateContact();\n      //this[\"request-uri\"] =  \"sip:\"+this.userName+\"@\"+this.publicAddress+\";transport=\"+this.transportType ;\n    }\n\n    generateInvalid() {\n      return parseInt(Math.random() * 1000000000, 10) + \".nodefony.invalid\";\n    }\n\n    generateVia(addr) {\n      if (this.rport) {\n        return this.version + \"/\" + this.settings.transport + \" \" + addr + \";rport\";\n      } else {\n        return this.version + \"/\" + this.settings.transport + \" \" + addr;\n      }\n    }\n\n    generateContact(userName, password, force, settings) {\n      if (userName) {\n        this.userName = userName;\n        if (settings && settings.displayName) {\n          this.displayName = settings.displayName;\n        } else {\n          this.displayName = userName;\n        }\n        this.from = '\"' + this.displayName + '\"' + '<sip:' + this.userName + '@' + this.publicAddress + '>';\n        this[\"request-uri\"] = \"sip:\" + this.userName + \"@\" + this.publicAddress + \";transport=\" + this.transportType;\n        if (password) {\n          this.settings.password = password;\n        }\n      }\n\n      if (!this.contact || force) {\n        var invalid = null;\n        switch (this.transportType) {\n        case \"ws\":\n        case \"wss\":\n          invalid = this.generateInvalid();\n          this.via = this.generateVia(invalid);\n          if (this.rport) {\n            return '\"' + this.displayName + '\"' + \"<sip:\" + this.userName + \"@\" + invalid + \":\" + this.rport + \";transport=\" + this.transportType + \">\";\n          } else {\n            return '\"' + this.displayName + '\"' + \"<sip:\" + this.userName + \"@\" + invalid + \";transport=\" + this.transportType + \">\";\n          }\n          break;\n        case \"tcp\":\n        case \"udp\":\n          invalid = this.generateInvalid();\n          this.via = this.generateVia(invalid);\n          //this.via = this.generateVia(this.publicAddress);\n          if (this.rport) {\n            return '\"' + this.displayName + '\"' + \"<sip:\" + this.userName + \"@\" + invalid + \":\" + this.rport + \";transport=\" + this.transportType + \">\";\n          } else {\n            return '\"' + this.displayName + '\"' + \"<sip:\" + this.userName + \"@\" + invalid + \";transport=\" + this.transportType + \">\";\n          }\n          break;\n        default:\n          throw new Error(\"SIP TRANSPORT TYPE NOT ALLOWED\");\n        }\n      }\n      return this.contact;\n    }\n\n    getDialog(id) {\n      if (id in this.dialogs) {\n        return this.dialogs[id];\n      }\n      return null;\n    }\n\n    initTransport(transport) {\n      if (transport) {\n        this.transport = transport;\n      }\n\n      // GET REMOTE IP\n      if (this.transport.publicAddress) {\n        this.publicAddress = this.transport.domain.hostname;\n        this.publicAddress = this.server;\n      } else {\n        this.publicAddress = this.server;\n      }\n\n      switch (this.settings.transport) {\n        // realtime nodefony\n      case \"TCP\":\n      case \"UDP\":\n        this.transport.listen(this, \"onSubscribe\", function (service, message) {\n          if (service === \"SIP\" ||  service === \"OPENSIP\") {\n            onStart.call(this, message);\n          }\n        });\n\n        this.transport.listen(this, \"onUnsubscribe\", function (service, message) {\n          if (service === \"SIP\" ||  service === \"OPENSIP\") {\n            onStop.call(this, message);\n          }\n        });\n        this.transport.listen(this, \"onMessage\", function (service, message) {\n          if (service === \"SIP\" ||  service === \"OPENSIP\") {\n            onMessage.call(this, message);\n          }\n        });\n\n        this.transport.listen(this, \"onClose\", function (message) {\n          this.quit(message);\n        });\n        break;\n      case \"WS\":\n      case \"WSS\":\n        this.transport.listen(this, \"onMessage\", function (message) {\n          //this.notificationsCenter.fire(\"onMessage\",message.data);\n          onMessage.call(this, message.data);\n        });\n        this.transport.listen(this, \"onError\", function (message) {\n          this.notificationsCenter.fire(\"onError\", this.transport, message);\n        });\n        this.transport.listen(this, \"onConnect\", function (message) {\n          this.connect(message);\n        });\n        this.transport.listen(this, \"onClose\", function (message) {\n          this.quit(message);\n        });\n        break;\n      default:\n        this.fire(\"onError\", new Error(\"TRANSPORT LAYER NOT DEFINED\"));\n      }\n    }\n\n    clear() {\n      if (this.registerInterval) {\n        clearInterval(this.registerInterval);\n      }\n      if (this.registerTimeout) {\n        this.clearDialogTimeout();\n        delete this.registerTimeout;\n      }\n      //TODO\n      //clean all setinterval\n      for (var dia in this.dialogs) {\n        //this.dialogs[dia].unregister();\n        this.dialogs[dia].clear();\n      }\n      this.notificationsCenter.clearNotifications();\n    }\n\n    quit(message) {\n      this.fire(\"onQuit\", this, message);\n      //this.unregister();\n      this.clear();\n    }\n\n    connect(message) {\n      this.fire(\"onConnect\", this, message);\n    }\n\n    createDialog(method) {\n      var dialog = new Dialog(method, this);\n      this.logger(\"SIP NEW DIALOG :\" + dialog.callId, \"DEBUG\");\n      this.dialogs[dialog.callId] = dialog;\n      return dialog;\n    }\n\n    createDialogTimeout(dialog) {\n      if (dialog) {\n        this.registerTimeout[dialog.callId] = setTimeout(() => {\n          let error = new Error(\" DIALOG ID : \" + dialog.callId + \" TIMEOUT : \" + dialog.method + \"  no response \");\n          this.logger(error, \"ERROR\");\n          this.fire(\"onError\", this, error);\n        }, (parseInt(this.settings.expires, 10) * 900));\n      }\n    }\n    clearDialogTimeout(dialog) {\n      if (dialog) {\n        let id = dialog.callId;\n        if (this.registerTimeout[id]) {\n          clearTimeout(this.registerTimeout[id]);\n          delete this.registerTimeout[id];\n        }\n      } else {\n        for (let ele in this.registerTimeout) {\n          clearTimeout(this.registerTimeout[ele]);\n          delete this.registerTimeout[ele];\n        }\n      }\n    }\n\n    register(userName, password, settings) {\n      this.logger(\"TRY TO REGISTER SIP : \" + userName + password, \"DEBUG\");\n      this.contact = this.generateContact(userName, password, false, settings);\n      this.diagRegister = this.createDialog(\"REGISTER\");\n      this.diagRegister.register();\n      this.createDialogTimeout(this.diagRegister);\n      return this.diagRegister;\n    }\n\n    unregister() {\n      if (this.authenticateRegister && this.registered === 200) {\n        return this.authenticateRegister.unregister();\n      }\n      if (this.diagRegister && this.registered === 200) {\n        return this.diagRegister.unregister();\n      }\n    }\n\n    invite(userTo, description) {\n      var diagInv = this.createDialog(\"INVITE\");\n      var transaction = diagInv.invite(userTo + \"@\" + this.publicAddress, description);\n      diagInv.toName = userTo;\n      this.fire(\"onInitCall\", userTo, diagInv, transaction);\n      return diagInv;\n    }\n\n    notify(userTo, description, type) {\n      var diagNotify = this.createDialog(\"NOTIFY\");\n      diagNotify.notify(userTo + \"@\" + this.publicAddress, description, type);\n      return diagNotify;\n    }\n\n    send(data) {\n      this.logger(data, \"INFO\", \"SEND\");\n      this.fire(\"onSend\", data);\n      this.transport.send(data);\n    }\n\n    bye(callId) {\n      for (let dialog in this.dialogs) {\n        if (callId) {\n          if (this.dialogs[dialog].callId === callId && this.dialogs[dialog].method !== \"REGISTER\" && this.dialogs[dialog].status === this.dialogs[dialog].statusCode.ESTABLISHED) {\n            this.dialogs[dialog].bye();\n            break;\n          }\n        } else {\n          this.dialogs[dialog].bye();\n        }\n      }\n    }\n  };\n\n  stage.io.protocols.sip = SIP;\n  return SIP;\n};","module.exports = function (stage) {\n\n  'use strict';\n\n  const defaultSettings = {\n\n  };\n\n  const settingsSyslog = {\n    moduleName: \"REALTIME\",\n    defaultSeverity: \"INFO\"\n  };\n\n  const send = function (data) {\n    this.protocol.send(data);\n  };\n\n\n  const realtime = class realtime {\n\n    constructor(urlServer, settings) {\n      if (!urlServer) {\n        throw new Error(\"realtime url server is not defined\");\n      }\n      this.settings = stage.extend({}, defaultSettings, settings);\n      this.notificationCenter = stage.notificationsCenter.create(this.settings, this);\n      this.syslog = new stage.syslog(settingsSyslog);\n      this.url = stage.io.urlToOject(urlServer);\n      //this.crossDomain =  ! stage.io.isSameOrigin(this.url.href);\n      this.protocol = new stage.io.protocols.bayeux(this.url);\n      this.services = null;\n      this.subscribedService = {};\n      this.nbSubscribed = 0;\n      this.connected = false;\n      this.publicAddress = null;\n      this.domain = null;\n\n      /*\n       *\tEVENT REALTIME\n       */\n      this.notificationCenter.listen(this, \"onAuthorized\", function () {\n        this.protocol.handshake(this.url.href);\n      });\n\n      /*\n       *\tEVENTS PROTOCOL BAYEUX\n       */\n      this.protocol.notificationCenter.listen(this, \"onMessage\", this.onMessage);\n      this.protocol.notificationCenter.listen(this, \"onHandshake\", function (message, socket) {\n        if (message.ext && message.ext.address) {\n          var addr = JSON.parse(message.ext.address);\n          this.publicAddress = addr.remoteAddress;\n          this.domain = addr.host;\n        }\n        this.notificationCenter.fire(\"onHandshake\", message, socket, this);\n      });\n      this.protocol.notificationCenter.listen(this, \"onConnect\", function (message) {\n        this.services = message.data;\n        this.connected = true;\n        if (message.ext && message.ext.address) {\n          var addr = JSON.parse(message.ext.address);\n          this.publicAddress = addr.remoteAddress;\n          this.domain = addr.host;\n        }\n        this.notificationCenter.fire(\"onConnect\", message, this);\n      });\n      this.protocol.notificationCenter.listen(this, \"onDisconnect\", function (message) {\n        this.services = message.data;\n        this.connected = false;\n        this.notificationCenter.fire(\"onDisconnect\", message, this);\n      });\n      this.protocol.notificationCenter.listen(this, \"reConnect\", function (bayeux) {\n        setTimeout(() => {\n          this.start();\n        }, 60000);\n      });\n      this.protocol.notificationCenter.listen(this, \"onSubscribe\", function (message) {\n        var service = message.subscription.split(\"/\")[2];\n        this.subscribedService[service] = message;\n        this.nbSubscribed++;\n        this.notificationCenter.fire(\"onSubscribe\", service, message, this);\n      });\n      this.protocol.notificationCenter.listen(this, \"onUnsubscribe\", function (message) {\n        var service = message.subscription.split(\"/\")[2];\n        delete this.subscribedService[service];\n        this.nbSubscribed--;\n        this.notificationCenter.fire(\"onUnSubscribe\", service, message, this);\n      });\n      this.protocol.notificationCenter.listen(this, \"onError\", function (code, arg, message) {\n        this.notificationCenter.fire(\"onError\", code, arg, message);\n      });\n      this.protocol.notificationCenter.listen(this, \"onClose\", function (message) {\n        this.connected = false;\n        this.notificationCenter.fire(\"onClose\", message);\n        for (var service in this.subscribedService) {\n          //this.unSubscribe(service);\n          delete this.subscribedService[service];\n        }\n      });\n      //this.start();\n    }\n\n    listen() {\n      return this.notificationCenter.listen.apply(this.notificationCenter, arguments);\n    }\n\n    unListen() {\n      return this.notificationCenter.unListen.apply(this.notificationCenter, arguments);\n    }\n\n    start() {\n      if (this.connected) {\n        //throw new Error(\"connection already started\");\n        this.notificationCenter.fire(\"onError\", 500, this, \"connection already started\");\n        return false;\n      }\n      const statusCode = {\n\n        401: (request, type, message) => {\n          let auth = request.getResponseHeader(\"WWW-Authenticate\");\n          let res = request.responseText;\n          let obj = {\n            \"WWW-Authenticate\": request.getResponseHeader(\"WWW-Authenticate\"),\n            body: request.responseText\n          };\n          this.authenticate = new stage.io.authentication.authenticate(this.url, obj, {\n            ajax: true,\n            onSuccess: (data, type, xhr) => {\n              this.notificationCenter.fire('onAuthorized', data, type, xhr);\n            },\n            onError: (obj, type, message) => {\n              var res = stage.io.getHeaderJSON(obj);\n              if (res) {\n                this.notificationCenter.fire('onError', 401, obj, res);\n              } else {\n                this.notificationCenter.fire('onError', 401, obj, message);\n              }\n            }\n          });\n          this.notificationCenter.fire('onUnauthorized', this.authenticate, this);\n        },\n        404: (obj, type, message) => {\n          // '404 - realtimeD server not available'\n          this.notificationCenter.fire('onError', 404, obj, message);\n        },\n        503: (obj, type, message) => {\n          //  '503 - Service Unavailable'\n          this.notificationCenter.fire('onError', 503, obj, message);\n        }\n      };\n\n      return $.ajax({\n        method: 'GET',\n        cache: false,\n        url: this.url.href,\n        statusCode: statusCode,\n        success: (data, type, xhr) => {\n          this.notificationCenter.fire('onAuthorized', data, type, xhr);\n        },\n        error: (obj, type, message) => {\n          if (obj.status in statusCode) {\n            return;\n          }\n          this.notificationCenter.fire('onError', obj.status, obj, message);\n        }\n      });\n    }\n\n    subscribe(name, data) {\n      if (!this.connected) {\n        this.notificationCenter.fire('onError', 500, this, \"Not connected\");\n        return false;\n      }\n      if (name in this.services) {\n        if (name in this.subscribedService) {\n          this.notificationCenter.fire('onError', 500, this, \"already subscribed\");\n          return false;\n        }\n        return send.call(this, this.protocol.subscribe(name, data));\n      }\n      this.notificationCenter.fire('onError', 500, this, \"service : \" + name + \" not exist\");\n      return false;\n    }\n\n    unSubscribe(name, data) {\n      if (!this.connected) {\n        this.notificationCenter.fire('onError', 500, this, \"Not connected\");\n        return false;\n      }\n      if (name in this.services) {\n\n        if (name in this.subscribedService) {\n          var clientId = this.subscribedService[name].clientId;\n          return send.call(this, this.protocol.unSubscribe(name, clientId, data));\n        } else {\n          this.notificationCenter.fire('onError', 500, this, \"service : \" + name + \" not subcribed\");\n          return false;\n        }\n      }\n      this.notificationCenter.fire('onError', 404, this, \"service : \" + name + \" not exist\");\n      return false;\n    }\n\n    sendMessage(service, data) {\n      if (!this.connected) {\n        this.notificationCenter.fire('onError', 500, this, \"Not connected\");\n        return false;\n      }\n      if (service in this.services) {\n        if (service in this.subscribedService) {\n          var clientId = this.subscribedService[service].clientId;\n          try {\n            var proto = this.protocol.sendMessage(service, data, clientId);\n            send.call(this, proto);\n            return JSON.parse(proto).id;\n          } catch (e) {\n            this.fire(\"onError\", 500, e, e.message);\n          }\n        } else {\n          this.notificationCenter.fire('onError', 500, this, \"service : \" + service + \" not subcribed\");\n          return false;\n        }\n      } else {\n        this.fire(\"onError\", 404, this, \"service :\" + service + \" not exit\");\n      }\n      return false;\n    }\n\n    stop() {\n      if (this.connected) {\n        this.protocol.stopReConnect();\n        for (var service in this.subscribedService) {\n          //this.unSubscribe(service);\n          delete this.subscribedService[service];\n        }\n        return send.call(this, this.protocol.disconnect());\n      }\n      throw new Error(\"connection already stoped\");\n    }\n\n    onMessage(message) {\n      if (message.error) {\n        if (message.channel) {\n          this.notificationCenter.fire(\"onError\", message.error);\n        } else {\n          this.notificationCenter.fire(\"onError\", message.id, message.successful);\n        }\n      } else {\n        if (message.channel) {\n          this.notificationCenter.fire(\"onMessage\", message.channel.split(\"/\")[2], message.data);\n        } else {\n          this.notificationCenter.fire(\"onMessage\", message.id, message.successful);\n        }\n      }\n    }\n  };\n\n  stage.realtime = realtime;\n  return realtime;\n};","module.exports =  function(stage){\n\n\n\tvar defaultSettings = {\n\t\tdelay: 0,\n\t\tasync: false,\n\t\t\n\t\tajax: {\n\t\t\tcache: true,\n\t\t\tdataType: 'json',\n\t\t\ttype: 'GET',\n\t\t\tcontentType: 'application/x-www-form-urlencoded; charset=UTF-8'\n\t\t}\n\t};\n\t\n\tvar pollAction = function(ajaxConfig){\n\t\tajaxConfig.data = this.data.get();\n\t\tthis.transport = jQuery.ajax(ajaxConfig);\n\t};\n\t\n\tvar pollling = function(ajaxConfig){\n\t\t\n\t\tif(this.settings.delay){\n\t\t\tthis.timer = setTimeout(pollAction.bind(this, ajaxConfig), this.settings.delay);\t\n\t\t} else {\n\t\t\tpollAction.call(this, ajaxConfig);\n\t\t}\t\t\n\t};\n\t\n\t/*\n \t *\n \t *\n \t */\n\tvar longPoll = class longPoll extends stage.io.transports.poll  {\n\n\t\tconstructor(url, settings){\n\t\t\tsuper(url, settings);\n\t\t\tthis.settings = stage.extend(true, {}, defaultSettings, settings);\n\t\t}\n\n\t\tstart (){\n\t\t\tvar ajaxConfig = this.buildAjaxSettings();\n\t\t\tthis.transport = null;\n\t\t\tajaxConfig.complete = (xhr, status) => {\n\t\t\t\tpollling.call(this, ajaxConfig);\n\t\t\t};\n\t\t\tpollling.call(this, ajaxConfig);\n\t\t\treturn this;\n\t\t}\n\n\t\tstop (){\n\t\t\tthis.transport.abort();\n\t\t\tthis.transport = null;\n\n\t\t\tif(this.timer){\n\t\t\t\tclearTimeout(this.timer);\n\t\t\t}\n\t\t\tthis.connectState = false;\n\t\t\tthis.fire('onStop', this);\n\t\t\treturn this;\n\t\t}\n\t}\n\n\tstage.io.transports.longPoll = longPoll ;\n\treturn longPoll;\n};\n","module.exports =  function(stage){\n\n\tvar defaultSettings = {\n\t\tdelay: 1000,\n\t\tasync : true,\n\t\t\n\t\tajax: {\n\t\t\tcache: true,\n\t\t\tdataType: 'json',\n\t\t\ttype: 'GET',\n\t\t\tcontentType: 'application/x-www-form-urlencoded; charset=UTF-8'\n\t\t}\n\t};\n\n\tvar pollling = function(ajaxConfig){\n\t\t\n\t\tvar tokenKey = (new Date()).getTime();\n\t\tajaxConfig.data = this.data.get();\n\t\tvar transport = jQuery.ajax(ajaxConfig);\n\t\ttransport.tokenKey = tokenKey;\n\t\tthis.transport[tokenKey] = transport;\n\t};\n\t\n\t/*\n \t *\n \t */\n\tvar httpData = class httpData  {\n\t\tconstructor(contentType, method){\n\t\t\tthis.reset();\n\t\t\tif(contentType) {\n\t\t\t\tthis.contentType = contentType;\n\t\t\t}\n\t\t\tif(method) {\n\t\t\t\tthis.method = method;\n\t\t\t}\n\t\t}\n\n\t\tadd (data, permanent){\n\t\t\tthis[permanent ? \"permanent\" : \"transient\"] = data;\n\t\t}\n\n\t\tget (){\n\n\t    \t\tvar data = (this.transient ? this.transient : this.permanent);\n\t    \t\tthis.transient = '';\n        \t\t//return this.contentType.search('json') >= 0 && typeof(data) == 'object' && this.method.toUpperCase() != 'GET' ? JSON.stringify(data) : data;\n\t    \t\tswitch(this.contentType.split(';')[0].replace(/ /g, '')){\n\t    \t\t\tcase 'application/json':\n\t    \t\t\tcase 'text/json':\n\t    \t\t\t\tif(this.method.toUpperCase() != 'GET' && typeof(data) == 'object'){\n\t    \t\t\t\t\tdata = JSON.stringify(data);\n\t    \t\t\t\t} \n\t    \t\t\t\tbreak;\n\t    \t\t}\n\n\t    \t\treturn data;\n\t\t}\n\n\t\treset (){\n\t    \t\tthis.contentType = '';\n\t    \t\tthis.method = 'GET';\n\t\t\tthis.permanent = '';\n\t\t\tthis.transient = '';\n\t\t}\n\n\t};\n\n\t/*\n\t *\tEVENT :\n\t *\t\tonStart\n\t *\t\tonStop\n\t *\t\tonMessage\n\t *\t\tonError \n\t */\n\tvar poll = class poll extends stage.io.transport  {\n\n\t\tconstructor(url, settings){\n\t\t\tsuper(url, settings);\n\t\t\tthis.settings = jQuery.extend(true, {}, defaultSettings, settings);\n\t\t\tthis.data = new httpData(this.settings.ajax.contentType, this.settings.ajax.type);\n\t\t\tthis.connectState = false;\t\n\t\t}\n\n\t\tbuildAjaxSettings (){\n\n\t\t\tvar settings = jQuery.extend(true, {}, this.settings.ajax,{\n\t\t\t\turl: this.url.href,\n\t\t\t    crossDomain: this.crossDomain,\n\t\t\t    beforeSend: function(xhr){\n\t\t\t\t    if ( ! this.connectState){\n\t\t\t\t\t    this.fire.call(this, \"onStart\", this);\n\t\t\t\t\t    this.connectState = true;\n\t\t\t\t    }\n\t\t\t    }.bind(this),\n\t\t\t    success: function(data, state, xhr){\n\t\t\t\t    this.fire(\"onMessage\", data , this, xhr);\n\t\t\t    }.bind(this),\n\t\t\t    error: function(xhr, status, error){\n\t\t\t\t    switch(status){\n\t\t\t\t\t    case 'abort':\n\t\t\t\t\t\t    this.fire(\"onAbort\", error, this, xhr);\t\n\t\t\t\t\t\t    break;\n\n\t\t\t\t\t    case 'timeout':\n\t\t\t\t\t\t    this.fire(\"onTimeout\", error, this, xhr);\t\n\t\t\t\t\t\t    break;\n\n\t\t\t\t\t    default:\n\t\t\t\t\t\t    this.fire(\"onError\", error, this, xhr);\n\t\t\t\t    }\n\t\t\t    }.bind(this)\n\t\t\t});\n\t\t\treturn settings;\n\t\t}\n\n\t\tstart (){\n\n\t\t\tvar ajaxConfig = this.buildAjaxSettings();\n\n\t\t\tthis.transport = {};\n\t\t\tajaxConfig.complete = function(xhr, status){\n\t\t\t\tif(this.transport[xhr.tokenKey]) delete this.transport[xhr.tokenKey];\n\t\t\t}.bind(this);\n\t\t\tpollling.call(this, ajaxConfig);\n\t\t\tthis.idInterval = setInterval(pollling.bind(this, ajaxConfig), this.settings.delay);\n\n\t\t\treturn this;\n\t\t}\n\n\t\tsetData (data, permanent){\n\t\t\tthis.data.add(data, permanent);\n\t\t\treturn this;\n\t\t}\n\n\t\tstop (){\n\n\t\t\tif (Object.keys(this.transport).length > 0){\n\t\t\t\tfor(var tokenKey in this.transport){\n\t\t\t\t\tthis.transport[tokenKey].abort();\n\t\t\t\t\tdelete this.transport[tokenKey];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.idInterval) {\n\t\t\t\tclearInterval(this.idInterval);\n\t\t\t\tthis.idInterval = null;\n\t\t\t}\n\n\t\t\tthis.connectState = false;\n\n\t\t\tthis.fire('onStop', this);\n\t\t\treturn this;\n\t\t}\n\n\t\tdestroy (){\n\t\t\tthis.close();\n\t\t\treturn this;\n\t\t}\n\t};\t\n\t\n\tstage.io.transports.poll = poll ;\n\treturn poll;\n};\n","module.exports = function (stage) {\n\n  var defaultSettings = {\n    type: \"websocket\" //   websocket | poll | longPoll\n  };\n\n  var bestTransport = function () {\n\n  };\n\n  var socket = class socket extends stage.notificationsCenter.notification {\n\n    constructor(url, localSettings) {\n\n      var settings = stage.extend({}, defaultSettings, localSettings);\n\n      super(settings);\n\n      this.settings = settings;\n\n      switch (this.settings.type) {\n      case \"websocket\":\n        this.socket = stage.io.transports.websocket;\n        break;\n      case \"poll\":\n        this.socket = stage.io.transports.ajax;\n        break;\n      case \"longPoll\":\n        this.socket = stage.io.transports.ajax;\n        break;\n      }\n\n      this.listen(this, \"onConnect\");\n      this.listen(this, \"onClose\");\n      this.listen(this, \"onError\");\n      this.listen(this, \"onMessage\");\n      this.listen(this, \"onTimeout\");\n    }\n\n    write(settings) {\n      this.transport.send();\n    }\n\n    close(settings) {\n      this.transport.close();\n    }\n\n    connect(url, settings) {\n      this.transport = new this.socket(url, settings);\n      this.transport.onmessage = this.listen(this, \"onMessage\");\n    }\n\n    destroy(settings) {\n      this.transport = null;\n      this.clearNotifications();\n    }\n  };\n\n  stage.io.socket = socket;\n  return socket;\n\n};","module.exports = function (stage) {\n\n  /*\n   *\n   */\n  const websocket = class websocket extends stage.io.transport {\n\n    constructor(url, settings) {\n      if (url) {\n        super(url, settings);\n        this.connect(url, settings);\n      } else {\n        super();\n        this.socket = null;\n      }\n    }\n\n    connect(url, settings) {\n      try {\n        this.socket = new WebSocket(url, settings.protocol);\n      } catch (e) {\n        this.fire(\"onError\", e);\n        throw e;\n      }\n      this.socket.onmessage = this.listen(this, \"onMessage\");\n      this.socket.onerror = this.listen(this, \"onError\");\n      this.socket.onopen = this.listen(this, \"onConnect\");\n      this.socket.onclose = this.listen(this, \"onClose\");\n      return this.socket;\n    }\n\n\n    close(url, settings) {\n      this.socket.close();\n    }\n\n    send(data) {\n      this.socket.send(data);\n    }\n\n    destroy(data) {\n      delete this.socket;\n      this.socket = null;\n    }\n  };\n\n  stage.io.transports.websocket = websocket;\n\n  return websocket;\n};","module.exports =  function(stage){\n\n\t'use strict';\n\n\t\t \n\tvar appKernel = class appKernel extends  stage.kernel  {\n\n\t\tconstructor(url, environnement, settings){\n\n\t\t\tswitch (arguments.length){\n\t\t\t\tcase 0 :\n\t\t\t\t\turl = null ;\n\t\t\t\t\tenvironnement = \"prod\" ;\n\t\t\t\t\tsettings = {} ;\n\t\t\t\tbreak;\n\t\t\t\tcase 1 :\n\t\t\t\t\tenvironnement = url ;\n\t\t\t\t\tsettings = {} ;\n\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\tsettings = environnement;\n\t\t\t\t\tenvironnement = url;\n\t\t\t\t\turl = null ;\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tsuper(environnement, settings);\n\t\t\tif ( url ){\n\t\t\t\tthis.loadModule(url,{\n\t\t\t\t\tasync:false\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tthis.fire(\"onBoot\", this);\n\t\t\t}\n\t\t}\n\t};\n\n\tstage.appKernel = appKernel ;\n\treturn appKernel ;\n};\n","const shortId = require('shortid');\n\nmodule.exports =  function(stage){\n\n\t'use strict';\n\n\tvar generateId = function(){\n\t\treturn shortId.generate();\n\t};\n\n\n\tvar loader = function(){\n\t\t\n\t\tvar AJAX = {\n\t\t\tcss : {\n\t\t\t\tmineType :\t\"text/css\",\n\t\t\t\ttag:\t\t\"style\",\n\t\t\t\tmedia:\t\t\"screen\",\n\t\t\t\ttype:\t\t\"stylesheet\",\n\t\t\t\tposition:\t\"HEAD\"\n\t\t\t},\n\t\t\tjs:{\n\t\t\t\tmineType :\t\"text/javascript\",\n\t\t\t\ttag:\t\t\"script\",\n\t\t\t\tposition:\t\"BODY\"\n\t\t\t}\n\t\t};\n\n\t\tvar SCRIPT = {\n\t\t\tcss : {\n\t\t\t\tmineType :\t\"text/css\",\n\t\t\t\ttag:\t\t\"link\",\n\t\t\t\tmedia:\t\t\"screen\",\n\t\t\t\ttype:\t\t\"stylesheet\",\n\t\t\t\tposition:\t\"HEAD\"\n\t\t\t},\n\t\t\tjs:{\n\t\t\t\tmineType :\t\"text/javascript\",\n\t\t\t\ttag:\t\t\"script\",\n\t\t\t\tposition:\t\"BODY\"\n\t\t\t}\n\t\t};\n\n\t\tvar insert = function(position, script){\n\t\t\tswitch(position){\n\t\t\t\tcase \"HEAD\" :\n\t\t\t\t\tvar head = document.getElementsByTagName('head')[0];\n\t\t\t\t\thead.appendChild(script);\n\t\t\t\tbreak;\n\t\t\t\tcase \"BODY\" :\n\t\t\t\t\tvar body = document.getElementsByTagName('body')[0]\n\t\t\t\t\tbody.appendChild(script);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t};\n\n\n\t\treturn function(src, tag , id, transport, callback){\n\t\t\t//if (tag == \"js\") transport = \"ajax\";\n\t\t\t//if (tag == \"css\") transport = \"ajax\";\n\t\t\tswitch (tag){\n\t\t\t\tcase \"js\":\n\t\t\t\t\t/*var def = AJAX[tag];\n\t\t\t\t\tvar script = document.createElement(def.tag);\n\t\t\t\t\tscript.setAttribute('type', def.mineType);\n\t\t\t\t\tscript.setAttribute('id', id + '_'+tag);\n\t\t\t\t\tif ( tag === \"css\" ){\n\t\t\t\t\t\tscript.setAttribute('media', def.media);\n\t\t\t\t\t}\n\t\t\t\t\t$.ajax(src, {\n\t\t\t\t\t\tasync:false,\n\t\t\t\t\t\t//cache:true,\n\t\t\t\t\t\tdataType:\"text\",\n\t\t\t\t\t\tsuccess:function(data, status, xhr){\n\t\t\t\t\t\t\tthis.cache[id] = script ;\n\t\t\t\t\t\t\tinsert(def.position, script);\n\t\t\t\t\t\t\t$(script).text(data);\n\t\t\t\t\t\t\tthis.logger(\"LOAD FILE :\" + src,\"DEBUG\");\n\t\t\t\t\t\t\tcallback(null, xhr);\n\t\t\t\t\t\t}.bind(this),\n\t\t\t\t\t\terror:function(xhr, status, message){\n\t\t\t\t\t\t\tthis.logger(src+\" :\" +message,\"ERROR\");\n\t\t\t\t\t\t\tcallback(message, xhr);\n\t\t\t\t\t\t}.bind(this)\n\t\t\t\t\t});*/\n\t\t\t\t\t \n\t\t\t\t\treturn $.ajax({\n\t\t\t\t\t\turl: src,\n\t\t\t\t\t        async:false,\n\t\t\t\t\t\tdataType: \"script\",\n\t\t\t\t\t\tsuccess: (data, status, xhr) => {\n\t\t\t\t\t\t\t//this.logger(\"LOAD FILE :\" + src,\"DEBUG\");\n\t\t\t\t\t\t\tcallback(null, xhr);\t\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror:(xhr, status, message) => {\n\t\t\t\t\t\t\tthis.logger(src+\" :\" +message,\"ERROR\");\n\t\t\t\t\t\t\tcallback(message, xhr);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\n\n\n\t\t\t\tbreak;\n\t\t\t\tcase \"css\":\n\t\t\t\t\tvar def = SCRIPT[tag];\n\t\t\t\t\tvar script = document.createElement(def.tag);\n\t\t\t\t\tscript.setAttribute('type', def.mineType);\n\t\t\t\t\tscript.setAttribute('id', id + '_'+tag);\n\t\t\t\t\tif ( tag === \"css\" ){\n\t\t\t\t\t\tscript.setAttribute('media', def.media);\n\t\t\t\t\t\tscript.href = src;/*+ '?time=' + id;*/\n\t\t\t\t\t\tscript.rel = def.type;\n\t\t\t\t\t\tscript.async = false;\n\t\t\t\t\t}\n\t\t\t\t\tif (tag === \"js\"){\n\t\t\t\t\t\tscript.src = src;/*+ '?time=' + id;*/\n\t\t\t\t\t\tscript.async = false;\n\t\t\t\t\t}\n\t\t\t\t\tscript.onload = () => {\n\t\t\t\t\t\tthis.cache[id] = script;\n\t\t\t\t\t\tthis.logger(\"LOAD FILE :\" + src,\"DEBUG\");\n\t\t\t\t\t\tcallback(null, script);\n\t\t\t\t\t};\n\t\t\t\t\tscript.onerror = (error) => {\n\t\t\t\t\t\tthis.logger(src ,\"ERROR\");\n\t\t\t\t\t\tcallback(error, script);\n\t\t\t\t\t};\n\t\t\t\t\tinsert(def.position, script);\n\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.logger( new Error (\"autoload  type transport error \"), \"ERROR\" );\n\t\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn script ;\n\t\t}\n\t}();\n\n\n\n\t/*\n \t *\n \t * CLASS AUTOLOAD\n \t *\n \t */\n\tvar defaultSetting = {\n\t\ttransport:\"script\",\n\t\tprefix:null\n\t};\n\n\tvar regType = /(.*)\\.(js)$|(.*)\\.(css)$/;\n\n\tvar autoload = class autoload {\n\n\t\tconstructor(kernel, settings){\n\t\t\tthis.settings = jQuery.extend({}, defaultSetting, settings)\n\t\t\tthis.cache = {};\n\t\t\tthis.prefix = this.settings.prefix  ;\n\t\t\tthis.syslog = kernel.syslog || null ;\n\t\t\tthis.transport = this.settings.transport ;\n\t\t\tthis.logger(\"INITIALIZE AUTOLOAD SERVICE\", \"DEBUG\");\n\t\t}\n\n\t\tload (file, callback){\n\t\t\tvar id = generateId();\n\t\t\tvar res = regType.exec(file);\n\t\t\tif ( ! res) {\n\t\t\t\tthis.logger(\"autoload error type file  \",\"ERROR\")\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tvar script = loader.call(this, file, res[2] || res[4] , id, this.transport, callback)\n\t\t\treturn id \n\t\t}\n\n\t\tlogger (pci, severity, msgid,  msg){\n\t\t\tif (this.syslog){\n\t\t\t\tif (! msgid) msgid = \"AUTOLOADER  \";\n\t\t\t\treturn this.syslog.logger(pci, severity , msgid,  msg);\n\t\t\t}else{\n\t\t\t\tconsole.log(pci);\n\t\t\t}\n\t\t}\n\n\t\tunLoad (id, callback){\n\t\t\tif (id in this.cache){\n\t\t\t\tvar tag = this.cache[id]\n\t\t\t\ttag.parentNode.removeChild(tag);\n\t\t\t\tdelete \tthis.cache[id] ;\t\n\t\t\t\treturn callback(id);\n\t\t\t}else{\n\t\t\t\tthis.logger(\"Autoload unLoad no tag find :\" +id ,\"ERROR\")\n\t\t\t}\n\t\t}\n\t};\n\n\tstage.autoload =  autoload ;\n\treturn autoload ; \n};\n","const shortId = require('shortid');\n\nmodule.exports =  function(stage){\n\n\t'use strict';\n\n\n\tvar ISDefined = function(ele){\n\t\tif (ele !== null && ele !== undefined ){\n\t\t\treturn true ;\n\t\t}\n\t\treturn false;\n\t};\n\n\tvar generateId = function(){\n\t\treturn shortId.generate();\n\t};\n\n\tvar parseParameterString = function(str, value){\n\t\tvar ns = null ; \n\t\tswitch( stage.typeOf(str) ){\n\t\t\tcase \"string\" :\n\t\t\t\treturn parseParameterString.call(this,str.split(\".\") , value);\n\t\t\tcase \"array\" :\n\t\t\t\tswitch(str.length){\n\t\t\t\t\tcase 1 :\n\t\t\t\t\t\tns = Array.prototype.shift.call(str);\n\t\t\t\t\t\tif ( ! this[ns] ){\n\t\t\t\t\t\t\tthis[ns] = value;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif ( ISDefined(value) ){\n\t\t\t\t\t\t\t\tthis[ns] = value ;\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\treturn this[ns];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn value ;\n\t\t\t\t\tdefault :\n\t\t\t\t\t\tns = Array.prototype.shift.call(str);\n\t\t\t\t\t\tif ( ! this[ns] && ISDefined(value)  ){\n\t\t\t\t\t\t\tthis[ns] = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn parseParameterString.call(this[ns], str, value);\t\n\t\t\t\t}\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t}\n\t};\n\n\t/*\n \t *\n \t *\tCONTAINER CLASS\n \t *\n \t */\n\tvar Container = class Container {\n\n\t\tconstructor (services, parameters){\n\t\t\tthis.protoService = function(){};\n\t\t\tthis.protoParameters = function(){};\n\t\t\tthis.scope = {};\n\t\t\tthis.services = new this.protoService();\n\t\t\tif (services && typeof services === \"object\"){\n\t\t\t\tfor (var service in services){\n\t\t\t\t\tthis.set(service, services[service]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.parameters = new this.protoParameters();\n\t\t\tif (parameters && typeof parameters === \"object\"){\n\t\t\t\tfor (var parameter in parameters){\n\t\t\t\t\tthis.set(parameter, parameters[parameter]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlogger (pci, severity, msgid,  msg){\n\t\t\tvar syslog = this.get(\"syslog\");\n\t\t\tif (! msgid) { msgid = \"CONTAINER SERVICES \"; }\n\t\t\treturn syslog.logger(pci, severity, msgid,  msg);\n\t\t}\n\n\t\tset (name, object){\n\t\t\treturn this.protoService.prototype[name] = object;\n\t\t}\n\n\t\tget (name){\n\t\t\tif (name in this.services){\n\t\t\t\treturn this.services[name];\n\t\t\t}\n\t\t\treturn null;\n\t\t\t//this.logger(\"GET : \" + name+\" don't exist\", \"WARNING\");\t\n\t\t}\n\n\t\thas (name){\n\t\t\treturn this.services[name];\n\t\t}\n\n\t\taddScope (name){\n\t\t\tif (! this.scope[name] ){\n\t\t\t\treturn  this.scope[name] = {};\n\t\t\t}\n\t\t\treturn this.scope[name];\n\t\t}\n\n\t\tenterScope (name){\n\t\t\tvar sc = new Scope(name, this);\n\t\t\tthis.scope[name][sc.id] = sc ;\n\t\t\treturn sc;\n\t\t}\n\n\t\tenterScopeExtended (name){\n\t\t\tvar sc = new ExtendedScope(name, this);\n\t\t\tthis.scope[name][sc.id] = sc ;\n\t\t\treturn sc;\n\t\t}\n\n\t\tleaveScope (scope){\n\t\t\tif ( this.scope[scope.name] ){\n\t\t\t\tvar sc = this.scope[scope.name][scope.id];\n\t\t\t\tif (sc){\n\t\t\t\t\tsc.clean();\n\t\t\t\t\t//console.log(\"pass leaveScope \"+ scope.id)\n\t\t\t\t\tdelete this.scope[scope.name][scope.id];\n\t\t\t\t\tsc= null ;\n\t\t\t\t}\n\t\t\t\t//console.log(this.scope)\n\t\t\t}\n\t\t}\n\n\t\tremoveScope (name){\n\t\t\tif ( this.scope[name] ){\n\t\t\t\tfor( var scope in this.scope[name] ){\n\t\t\t\t\tthis.leaveScope(this.scope[name][scope]) ;\n\t\t\t\t}\n\t\t\t\tdelete this.scope[name] ;\n\t\t\t}\n\t\t}\n\n\t\tsetParameters (name, str){\n\t\t\tif (typeof name !== \"string\"){\n\t\t\t\tthis.logger(new Error(\"setParameters : container parameter name must be a string\"));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif ( ! ISDefined(str) ){\n\t\t\t\tthis.logger(new Error(\"setParameters : \"+name+\" container parameter value must be define\"));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif ( parseParameterString.call(this.protoParameters.prototype, name, str) === str ){\n\t\t\t\treturn str;\n\t\t\t}else{\n\t\t\t\tthis.logger(new Error(\"container parameter \"+ name+\" parse error\"));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tgetParameters (name){\n\t\t\tif (typeof name !== \"string\"){\n\t\t\t\tthis.logger(new Error(\"container parameter name must be a string\"));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t//return parseParameterString.call(this.protoParameters.prototype, name, null);  \n\t\t\treturn parseParameterString.call(this.parameters, name, null);  \n\t\t}\n\t};\n\n\t/*\n \t *\n \t *\tSCOPE CLASS\n \t *\n \t */\n\n\tvar Scope = class Scope extends Container {\n\n\t\tconstructor( name, parent){\n    \t\t\tsuper();\n    \t\t\tthis.name = name;\n\t\t\tthis.parent = parent;\n    \t\t\tthis.services = new parent.protoService();\n    \t\t\tthis.parameters = new parent.protoParameters();\n    \t\t\tthis.scope = parent.scope;\n\t\t\tthis.id = generateId();\n\n\t\t}\n\n\t\tset (name, obj){\n    \t\t\tthis.services[name] = obj ;\n    \t\t\treturn super.set(name, obj);\n\t\t}\n\n\t\tclean (){\n\t\t\tthis.services = null ; \n\t\t\tdelete this.services ;\n\t\t\tthis.parameters = null ;\n\t\t\tdelete this.parameters ;\n\t\t}\n\n\t\tsetParameters (name, str){\n\t\t\tif ( parseParameterString.call(this.parameters, name, str) === str ){\n\t\t\t\treturn super.setParameters(name, str);\n\t\t\t}else{\n\t\t\t\tthis.logger(new Error(\"container parameter \"+ name+\" parse error\"));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t};\n\n\t/*\n \t *\n \t *\tExtendedScope CLASS\n \t *\n \t */\n\tvar ExtendedScope = class ExtendedScope extends Container {\n\n\t\tconstructor (name, parent){\n    \t\t\tsuper();\n    \t\t\tthis.name = name;\n\t\t\tthis.parent = parent;\n    \t\t\tthis.services = new parent.protoService();\n    \t\t\tthis.parameters = new parent.protoParameters();\n    \t\t\tthis.scope = parent.scope;\n\t\t\tthis.id = generateId();\n\n\t\t\tthis.protoService = function(){};\n\t\t\tthis.protoService.prototype = stage.extend({},this.parent.protoService.prototype);\n\n\t\t\tthis.protoParameters = function(){};\n\t\t\tthis.protoParameters.prototype = stage.extend({},this.parent.protoParameters.prototype) ;\n\t\t}\n\n\t\tclean (){\n\t\t\tthis.services = null ; \n\t\t\tdelete this.services ;\n\t\t\tthis.parameters = null ;\n\t\t\tdelete this.parameters ;\n\t\t\tthis.protoService = null ;\n\t\t\tthis.protoParameters = null ;\n\t\t}\n\n\n\t\tset (name, obj){\n    \t\t\tthis.services[name] = obj ;\n    \t\t\treturn super.set(name, obj);\n\t\t}\n\n\t\tsetParameters (name, str){\n\t\t\tif ( parseParameterString.call(this.parameters, name, str) === str ){\n\t\t\t\treturn super.setParameters(name, str);\n\t\t\t}else{\n\t\t\t\tthis.logger(new Error(\"container parameter \"+ name+\" parse error\"));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t};\n\t\n\tstage.Container = Container ;\n\treturn Container;\n};\n","module.exports =  function(stage){\n\n\t'use strict';\n\n\n\t/*\n \t *\n \t *\tCLASS CONTROLLER\n \t *\n \t */\n\tvar tabFxEvent = [\"stage-click\", \"stage-dblclick\", \"stage-focus\", \"stage-blur\", \"stage-mouseover\", \"stage-mouseout\", \"stage-mouseenter\", \"stage-mouseleave\", \"stage-change\"];\n\n\tvar Controller = class Controller extends stage.Service{\n\n\t\tconstructor(name, container, module){\n\t\t\tsuper(name, container, container.get(\"notificationsCenter\") );\n\t\t\tthis.module = module ; \n\t\t\tthis.i18n = this.kernel.i18n;\n\t\t\tthis.router = this.kernel.router;\n\t\t}\n\t\t\n\t\tredirect (url){\n\t\t\treturn this.router.redirect.apply(this.router, arguments)\n\t\t}\n\n\t\t/*\n\t \t*\n\t \t*\n\t \t*/\n\t\tforward (pattern, args){\n\t\t\treturn this.router.forward(pattern, args)\n\t\t}\n\n\t\t/*\n\t \t*\n\t \t*\n\t \t*/\n\t\tgenerateUrl (name, variables, absolute){\n\t\t\tif (absolute === true){\n\t\t\t\tvar url = this.router.url().split(\"#\");\n\t\t\t\tabsolute = this.router.url[0];\n\t\t\t}\n\t\t\treturn this.router.generateUrl.apply(this.router, arguments);\n\t\t}\n\n\t\tevalInContext (js, context){\n\t\t\tvar func = function(context) { \n\t\t\t\tvar $controller = context;\n\t\t\t\treturn function(js){\n\t\t\t\t\t\"use strict\";\n\t\t\t\t\treturn eval(js);\n\t\t\t\t}\n\t\t\t}(this);\n\t\t\ttry {\n\t\t\t\treturn func.call( context || this , jQuery.trim( js ));\n\t\t\t}catch(e){\n\t\t\t\tthis.logger(\"DOM PARSER TWIG ERROR \" + e, \"ERROR\");\t\n\t\t\t}\n\t\t}\n\n\n\t\tdomParser (domElement){\n\t\t\tdomElement.find('[' + tabFxEvent.join('],[') + ']').each((index, ele) => {\n\t\t\t\tvar attributes = ele.attributes;\n\t\t\t\tvar jElement = $(ele);\n\t\t\t\tvar ctrl = jElement.closest('[stage-ctrl]');\n\t\t\t\tvar scope = null ;\n\t\t\t\tif(ctrl.length){\n\t\t\t\t\tvar pattern = $(ctrl).attr(\"stage-ctrl\") ;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tscope = this.router.resolvePattern(pattern).controller;\n\t\t\t\t\t}catch (e){\n\t\t\t\t\t\tthis.logger(\"DOM PARSER ERROR : \" + e , \"ERROR\")\n\t\t\t\t\t\treturn ;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tscope = this;\n\t\t\t\t}\n\t\t\t\tfor(var i = 0; i < attributes.length; i++){\n\t\t\t\t\tvar attribute = attributes[i];\n\t\t\t\t\tif(tabFxEvent.indexOf(attribute.name) > -1){\n\t\t\t\t\t\tvar ele = function(){\n\t\t\t\t\t\t\tvar content = attribute.value;\n\t\t\t\t\t\t\tjElement.on(attribute.name.replace('stage-', ''), function(){\n\t\t\t\t\t\t\t\tscope.evalInContext(content, this);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t/*\n\t \t*\n\t \t*\n\t \t*/\n\t\trender (element, partial, type){\n\t\t\tvar ele = $(element);\n\t\t\ttry {\n\t\t\t\tswitch (type){\n\t\t\t\t\tcase \"append\":\n\t\t\t\t\t\tele.append(partial) ;\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"prepend\":\n\t\t\t\t\t\tele.prepend(partial) ;\n\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tele.empty();\n\t\t\t\t\t\tele.html(partial);\n\n\t\t\t\t}\n\t\t\t\treturn this.domParser(ele);\n\t\t\t}catch(e){\n\t\t\t\tthis.logger(\"DOM PARSER TWIG ERROR : \"+e, \"ERROR\") ;\n\t\t\t}\n\n\t\t}\n\n\t\trenderPartial (pattern, obj){\n\t\t\ttry {\n\t\t\t\tvar template = this.module.getTemplatePattern(pattern);\n\t\t\t\treturn template.render(obj);\n\t\t\t}catch(e){\n\t\t\t\tthis.logger(e, \"ERROR\")\n\t\t\t}\n\t\t}\n\t};\n\n\tstage.Controller = Controller ;\n\treturn Controller ;\n};\n","const Twig = require(\"twig\");\n\nmodule.exports =  function(stage){\n\n\t'use strict';\n\n\tvar settingsSyslog = {\n\t\t//rateLimit:100,\n\t\t//burstLimit:10,\n\t\tmoduleName:\"KERNEL\",\n\t\tdefaultSeverity:\"INFO\"\n\t};\n\n\tvar defaultSettings = {\n\t\tdebug:false,\n\t\trouter:true,\n\t\ti18n:true,\n\t\tlocation:{\n\t\t\thtml5Mode:false,\n\t\t\thashPrefix:\"/\"\n\t\t}\n\t};\n\n\tvar defaultEnvEnable = {\n\t\tdev:\t\ttrue,\n\t\tdevelopment:\ttrue,\t\n\t\tprod:\t\ttrue,\n\t\tproduction:\ttrue,\t\n\t};\n\n\n\t/*\n \t *\tOVERRIDE TWIG IMPORT TEMPLATE\n \t */\n\tvar loadRemoteTwig = function(Twig, location, params, callback, error_callback){\n\t\tvar id  = params.id,\n\t\tmethod      = params.method,\n\t\tasync       = params.async,\n\t\tprecompiled = params.precompiled,\n\t\ttemplate    = null;\n\n\t\t// Default to async\n\t\tif (async === undefined) async = true;\n\n\t\t// Default to the URL so the template is cached.\n\t\tif (id === undefined) {\n\t\t\tid = location;\n\t\t}\n\t\tparams.id = id;\n\n\t\t// Check for existing template\n\t\tif (Twig.cache && Twig.Templates.registry.hasOwnProperty(id)) {\n\t\t\t// A template is already saved with the given id.\n\t\t\tif (callback) {\n\t\t\t\tcallback(Twig.Templates.registry[id]);\n\t\t\t}\n\t\t\treturn Twig.Templates.registry[id];\n\t\t}\n\t\t//console.log(params.async)\n\t\t$.ajax({\n\t\t\turl:location,\n\t\t\tasync:async,\n\t\t\tsuccess:(mydata, status, xhr) => {\n\t\t\t\tvar moduleName = this.getModuleName( location )\n\t\t\t        if (precompiled === true) {\n\t\t\t\t\tmydata = JSON.parse(mydata);\n\t\t\t\t}\n\t\t\t\tparams.url = location;\n\t\t\t\tparams.data = mydata;\n\t\t\t\ttemplate = new Twig.Template(params);\n\t\t\t\tif (this.modules[moduleName]){\n\t\t\t\t\tvar module = this.modules[moduleName] ;\n\t\t\t\t\tvar name = module.getTemplateName(location)\n\t\t\t\t\tmodule.registerTemplate(name, template, \"template\")\n\t\t\t\t}\n\t\t\t\tif (callback) {\n\t\t\t\t\tcallback(template);\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: (xrh, status, message) => {\n\t\t\t\terror_callback(xrh, status, message)\n\t\t\t}\n\t\t})\n\t\tif (async === false) {\n\t\t\treturn template;\n\t\t} else {\n\t\t\t// placeholder for now, should eventually return a deferred object.\n\t\t\treturn true;\n\t\t}\t\n\t};\n\n\t/*\n\t*\n\t*\tKERNEL CLASS\t\n\t*/\n\n\tvar Kernel = class Kernel  extends stage.Service {\n\n\t\tconstructor(environment, settings){\n\n\t\t\tsuper(\"KERNEL\",null, null ,{\n\t\t\t\tsyslog:settingsSyslog\n\t\t\t});\n\n\t\t\tthis.container.set(\"kernel\", this);\n\n\t\t\tthis.modules = {};\n\t\t\tthis.settings = stage.extend(true, {}, defaultSettings , settings );\n\n\t\t\tif ( environment in defaultEnvEnable ){\n\t\t\t\tswitch ( environment ){\n\t\t\t\t\tcase \"dev\" :\n\t\t\t\t\tcase \"development\" :\n\t\t\t\t\t\tthis.environment = \"dev\";\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"prod\" :\n\t\t\t\t\tcase \"production\" :\n\t\t\t\t\t\tthis.environment = \"prod\";\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.logger(\"Bad Variable environment :\" + environment,\"WARNING\");\n\t\t\t\tthis.environment = \"prod\";\n\t\t\t}\n\n\t\t\tthis.debug = this.settings.debug ;\n\t\t\tthis.booted = false;\n\t\t\tthis.isDomReady = false;\n\t\t\tthis.uiContainer = null;\n\n\t\t\t// syslog\n\t\t\tthis.initializeLog(settingsSyslog);\n\n\t\t\t// autoloader\n\t\t\tthis.autoloader = new stage.autoload(this, {\n\t\t\t\ttransport:\"script\"\n\t\t\t});\n\t\t\tthis.container.set(\"autoloader\", this.autoloader);\n\n\t\t\t\n\t\t\t// Router\n\t\t\tthis.initRouter();\n\n\t\t\t// template\n\t\t\tthis.initTwig();\n\n\t\t\t// translation i18n\n\t\t\tthis.initTranslation();\n\n\t\t\t// Service REST\n\t\t\tthis.initRest()\n\n\t\t\t// EVENT NATIF\n\t\t\t$(document).ready( this.listen(this, \"onDomReady\", this.domReady) );\n\t\t\t$(window).resize( this.listen(this,\"onResize\") );\n\t\t\t$(window).on( \"unload\",  this.unLoad.bind(this) );\n\t\t\t$(window).on( \"load\", this.onLoad.bind(this) );\n\n\t\t\t//BOOT\t\n\t\t\tthis.listen(this, \"onBoot\" , this.boot)\n\t\t\t//READY\n\t\t\tthis.listen(this, \"onReady\" , this.ready)\n\n\t\t\tthis.notificationsCenter.settingsToListen(this.settings, this);\n\t\t}\n\t\t\n\t\tinitRouter (){\n\t\t\tif ( this.settings.router ){\n\t\t\t\t// location\n\t\t\t\tthis.initLocation();\n\t\t\t\tthis.router = new stage.router(this, this.container);\n\t\t\t\tthis.container.set(\"router\", this.router);\n\t\t\t}\n\t\t}\n\n\t\tinitLocation (){\n\t\t\tthis.locationService = new stage.location(this, this.settings.location) ;\n\t\t\tthis.container.set(\"location\", this.locationService);\n\t\t}\n\n\t\tinitRest (){\n\t\t\tif (stage.Rest) {\n\t\t\t\tthis.restService = new stage.Rest(this.container);\n\t\t\t\tthis.set(\"rest\", this.restService);\n\t\t\t}\n\t\t}\n\n\t\tinitTranslation (){\n\t\t\tif ( this.settings.i18n ){\n\t\t\t\tif ( ! stage.i18n ){\n \t\t       \t\t\tthis.logger(\"you must load transation i18n services js file !!!!!\", \"ERROR\")\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.i18n = new stage.i18n(this, this.container);\n\t\t\t\tthis.container.set(\"i18n\", this.i18n);\n\t\t\t}\n\t\t}\n\n\t\tinitTwig (){\n\t\t\tthis.logger(\"INITIALIZE TWIG SERVICE\", \"DEBUG\");\n\t\t\tif (this.environment === \"dev\"){\n\t\t\t\tTwig.cache = false ;\t\n\t\t\t}\n\t\t\tthis.templateEngine = Twig.twig  ; \n\t\t\t//extended log error traf\n\t\t\tTwig.extend((Twig) => {\n\t\t\t\tTwig.log.error = (message) => {\n\t\t\t\t\tthis.logger(message, \"ERROR\");\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tTwig.extend((Twig) => {\n\t\t\t\tTwig.Templates.loadRemote = loadRemoteTwig.bind(this, Twig) \n\t\t\t});\n\n\t\t\t//extended FUNCTION\n\t\t\tTwig.extendFunction(\"controller\", function() {\n\t\t\t\tvar pattern = Array.prototype.shift.call(arguments);\n\t\t\t\tvar sp = pattern.split(\":\");\n\t\t\t\tvar module = this.getModule(sp[0]);\n\t\t\t\tif (module){\n\t\t\t\t\tvar controller = module.getController(sp[1]);\n\t\t\t\t\tif (controller){\n\t\t\t\t\t\tvar action = sp[2];\n\t\t\t\t\t\tif ( controller[action] ){\n\t\t\t\t\t\t\treturn controller[action].apply(controller, arguments);\t\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t\tthis.container.set(\"twig\", this.templateEngine);\n\t\t\treturn this.templateEngine ;\n\t\t}\n\n\t\tdomReady (){\n\t\t\tif ( ! this.booted ) return ; \n\t\t\tthis.logger(\"domReady\", \"DEBUG\");\n\t\t\tthis.fire(\"onDomLoad\", this);\n\t\t\tvar element = this.uiContainer ? $(this.uiContainer) : $(\"body\");\n\t\t\ttry {\n\t\t\t\tif ( this.modules.app ){\n\t\t\t\t\tthis.modules.app.initialize(element);\t\n\t\t\t\t}\t\t\n\t\t\t\tfor (var module in this.modules){\n\t\t\t\t\tif (module === \"app\") continue;\n\t\t\t\t\tthis.modules[module].initialize(element);\n\t\t\t\t}\t\n\t\t\t\tthis.fire(\"onReady\", this);\n\t\t\t\tthis.isDomReady = true;\n\t\t\t}catch(e){\n\t\t\t\tthis.logger(e,\"ERROR\");\n\t\t\t}\n\t\t}\n\n\t\tonLoad (event){\n\t\t\tthis.fire(\"onLoad\", this, event);\t\n\t\t}\n\n\t\tunLoad (event){\n\t\t\tthis.fire(\"onUnLoad\", this, event);\t\n\t\t}\n\t\n\t\tgetModule (name){\n\t\t\treturn this.modules[name] ;\n\t\t}\n\n\t\tinitializeLog (settings){\n\t\t\tif (this.environment === \"dev\"){\n\t\t\t\t// CRITIC ERROR\n\t\t\t\tthis.syslog.listenWithConditions(this,{\n\t\t\t\t\tseverity:{\n\t\t\t\t\t\tdata:\"CRITIC,ERROR\"\n\t\t\t\t\t}\t\t\n\t\t\t\t},function(pdu){\n\t\t\t\t\tif (pdu.payload.stack ){\n\t\t\t\t\t\tconsole.error( \"SYSLOG \" + pdu.severityName +\" \" + pdu.msgid + \" \"+new Date(pdu.timeStamp) + \" \" + pdu.msg+\" : \"+  pdu.payload.stack);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.error( \"SYSLOG \" + pdu.severityName +\" \" + pdu.msgid + \" \"+new Date(pdu.timeStamp) + \" \" + pdu.msg+\" : \"+  pdu.payload);\t\n\t\t\t\t\t}\n\t\t\t\t\t/*if (pdu.typePayload === \"Error\" ){\n\t\t\t\t\t\tif (pdu.payload.stack ){\n\t\t\t\t\t\t\tconsole.error( \"SYSLOG \" + pdu.severityName +\" \" + pdu.msgid + \" \"+new Date(pdu.timeStamp) + \" \" + pdu.msg+\" : \"+  pdu.payload.stack);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconsole.error( \"SYSLOG \" + pdu.severityName +\" \" + pdu.msgid + \" \"+new Date(pdu.timeStamp) + \" \" + pdu.msg+\" : \"+  pdu.payload);*/\t\n\t\t\t\t});\n\n\t\t\t\t// INFO DEBUG\n\t\t\t\tvar data ;\n\t\t\t\tthis.debug ? data = \"INFO,DEBUG\" : data = \"INFO\" ;\n\t\t\t\tthis.syslog.listenWithConditions(this,{\n\t\t\t\t\tseverity:{\n\t\t\t\t\t\tdata:data\n\t\t\t\t\t}\t\t\n\t\t\t\t},function(pdu){\n\t\t\t\t\tconsole.info( \"SYSLOG \" + pdu.severityName +\" \" + pdu.msgid + \" \"+new Date(pdu.timeStamp) + \" \" + pdu.msg+\" : \"+ pdu.payload);\n\t\t\t\t});\n\t\t\t\tthis.syslog.listenWithConditions(this,{\n\t\t\t\t\tseverity:{\n\t\t\t\t\t\tdata:\"WARNING\"\n\t\t\t\t\t}\t\t\n\t\t\t\t},function(pdu){\n\t\t\t\t\tconsole.warn( \"SYSLOG \" + pdu.severityName +\" \" + pdu.msgid + \" \"+new Date(pdu.timeStamp) + \" \" + pdu.msg+\" : \"+ pdu.payload);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn this.syslog;\n\t\t}\n\n\t\tboot (){\n\t\t\tthis.booted = true;\n\t\t}\n\n\t\tready (){\n\t\t\t//this.fire(\"onUrlChange\", this.router.url() )\n\t\t}\n\n\t\tloadModule (url, settings){\n\t\t\tvar res = stage.io.urlToOject(url);\n\t\t\tvar moduleName = res.basename ;\n\t\t\t\t\t\n\t\t\treturn $.ajax(url,stage.extend( {\n\t\t\t\tcache:false,\n\t\t\t\tmethod:\"GET\",\n\t\t\t\t//async:false,\n\t\t\t\tdataType:\"xml\",\n\t\t\t\tsuccess:(data, status, xhr) => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\t//FIXME try to parse with url\n\t\t\t\t\t\tvar res = stage.xml.parseXml(data);\n\t\t\t\t\t\tvar moduleName = res.module[\"@id\"];\n\t\t\t\t\t\tvar type = res.module[\"@type\"];\n\t\t\t\t\t\tvar moduleSrc = res.module[\"@src\"];\n\t\t\t\t \t\n\t\t\t\t\t\tswitch ( type ){\n\t\t\t\t\t\t\tcase \"application/javascript\" :\n\t\t\t\t\t\t\t\tif ( moduleSrc ){\n\t\t\t\t\t\t\t\t\tif (moduleName in this.modules) {\n\t\t\t\t\t\t\t\t\t\tthis.modules[moduleName].initialize();\n\t\t\t\t\t\t\t\t\t\tthis.modules[moduleName].fire(\"onInitialize\", moduleName);\t\n\t\t\t\t\t\t\t\t\t\tthis.fire(\"onInitializeModule\", moduleName);\t\n\t\t\t\t\t\t\t\t\t} else {\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\tthis.autoloader.load(moduleSrc, (error, transport) => {\n\t\t\t\t\t\t\t\t\t\t\tif (error){\n\t\t\t\t\t\t\t\t\t\t\t\tthis.fire(\"onError\", error);\n\t\t\t\t\t\t\t\t\t\t\t\tthrow error;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tthis.registerModule(moduleName, res);\n\t\t\t\t\t\t\t\t\t\t\tif (moduleName === \"app\")\n\t\t\t\t\t\t\t\t\t\t\t\tthis.fire(\"onBoot\", this);\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}catch(e){\n\t\t\t\t\t\tthis.logger(e, \"ERROR\");\n\t\t\t\t\t\tthis.fire(\"onError\", e);\n\t\t\t\t\t\tthrow e ;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror:(xhr, status, message) => {\n\t\t\t\t\tthis.fire(\"onGetConfigError\", moduleName);\n\t\t\t\t\tthis.fire(\"onError\", message);\t\n\t\t\t\t}\n\t\t\t}, settings))\n\t\t}\n\n\t\tregisterModule (name, xml){\n\t\t\tif (name in stage.modules){\n\t\t\t\tvar kernelcontext = this;\n\t\t\t\tvar Class = stage.modules[name]; //.herite(stage.Module);\n\t\t\t\tthis.container.addScope(name);\n\t\t\t\tClass.prototype.name = name;\n\t\t\t\ttry {\n\t\t\t\t\tif (this.isDomReady){\n\t\t\t\t\t\tthis.modules[name] = new Class(this, xml,{\n\t\t\t\t\t\t\tonReady:() => {\n\t\t\t\t\t\t\t\tif (this.initialize){\n\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\tthis.initialize();\n\t\t\t\t\t\t\t\t\t\tthis.fire(\"onInitialize\", name);\t\n\t\t\t\t\t\t\t\t\t\tkernelcontext.fire(\"onInitializeModule\", name);\n\t\t\t\t\t\t\t\t\t}catch(e){\n\t\t\t\t\t\t\t\t\t\tthis.logger(\"INITIALIZE MODULE : \"+name +\" \"+e, \"ERRROR\");\n\t\t\t\t\t\t\t\t\t\tthrow e;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}});\t\n\t\t\t\t\t\t\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.modules[name] = new Class(this, xml);\n\t\t\t\t\t}\n\t\t\t\t\tthis.container.set(name, this.modules[name]);\n\t\t\t\t}catch(e){\n\t\t\t\t\tthis.logger(\"INSTANCE MODULE : \"+name +\" \"+e, \"ERRROR\")\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tgetModuleName (url){\n\t\t\tvar module = stage.dirname(url);\n\t\t\tvar tab = module.split(\"/\")\n\t\t\treturn tab[tab.indexOf(\"Resources\")-1];\n\t\t}\n\t};\n\n\tstage.kernel = Kernel ;\n\treturn  Kernel;\n};\n","module.exports =  function(stage){\n\n\t'use strict';\n\n\tvar nativeHistory = !!(window.history && window.history.pushState );\n\tvar PATH_MATCH = /^([^\\?#]*)(\\?([^#]*))?(#(.*))?$/;\n\tvar DEFAULT_PORTS = {'http': 80, 'https': 443};\n\n\n\t/*\n \t *\tCLASS BROWSER\n \t *\n \t */\n\n\tvar changeUrl = function(event){\n\t\tvar cache = null ;\n\t\tvar location = this.kernel.locationService ;\n\t\tvar url = this.url();\n\n\t\tif ( ( url === this.lastUrl && url === this.location.href ) && this.lastUrl !== location.initialUrl){ \n\t\t\t//console.log(\" changeUrl PASS SAME\")\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! event ){\n\t\t\tthis.kernel.logger(\" FORCE URL CHANGE BROWER EVENT NOT FIRE\" , \"WARNING\" );\n\t\t\t//console.log(location.url())\n\t\t\tvar newUrl = location.url() ;\n\t\t\tthis.kernel.notificationsCenter.fire(\"onUrlChange\", newUrl , this.lastHash, url ,cache)\n\t\t\tthis.lastUrlr= url;\n\t\t\tthis.lastHash = newUrl ;\n\t\t\treturn ;\n\t\t}\n\t\t//console.log(\"change URL :\" + url +\" IINIT \"+location.initialUrl)\n\t\t//console.log(\"change LAST URL :\" + this.lastUrl)\n\t\tvar parse = location.parse(url);\n\t\t//console.log(location)\n\t\tif ( ! parse ){\n\t\t\tthis.kernel.notificationsCenter.fire(\"onUrlChange\", \"\", this.lastHash, url,  cache)\n\t\t\tthis.lastUrl = \"\";\n\t\t\tthis.lastHash = \"\";\n\t\t\treturn ;\n\t\t}\n\n\t\tvar newUrl = location.url() ;\n\t\t\n\t\tthis.kernel.notificationsCenter.fire(\"onUrlChange\", newUrl, this.lastHash , url ,cache)\n\t\tthis.lastUrl = url;\n\t\tthis.lastHash = newUrl ;\n\t};\n\n\n\tvar myurl = function(options){\n\t\tif (nativeHistory && options.html5Mode){\n\t\t\treturn function (url, replace, state) {\n\t\t\t\t//TODO\n\t\t\t\t/*if (this.location !== window.location) this.location = window.location;\n\t\t\t\tif (this.history !== window.History) this.history = window.History;\n\n\t\t\t\tif (url){\n\t\t\t\t\tthis.kernel.logger(replace ? \"REPLACE URL : \" + url : \"CHANGE URL : \" + url,\"WARNING\")\n\t\t\t\t\t\tthis.history[replace ? 'replaceState' : 'pushState'](state, '', url);\n\t\t\t\t}else{\n\t\t\t\t\treturn this.location.href.replace(/%27/g,\"'\");\t\n\t\t\t\t}*/\n\t\t\t}\n\t\t}else{\n\t\t\treturn function (url, replace, state)  {\n\t\t\t\tif (url){\n\t\t\t\t\tif (this.kernel && this.kernel.get(\"location\") )\n\n\t\t\t\t\tif (this.location !== window.location) this.location = window.location;\n\t\t\t\t\tvar same = ( url === this.lastUrl && url === this.location.href ? true : false );\n\t\t\t\t\tif (this.history !== window.history) this.history = window.history;\n\t\t\t\t\tthis.kernel.logger(replace ? \"REPLACE URL : \" + url : \"CHANGE URL : \" + url,\"WARNING\");\n\t\t\t\t\tif ( same ){\n\t\t\t\t\t\tif  (  url === this.kernel.locationService.initialUrl ){\n\t\t\t\t\t\t\t\t//FORCE changeUrl \n\t\t\t\t\t\t\t\tchangeUrl.call(this)\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn url ;\n\t\t\t\t\t}\n\t\t\t\t\t//console.log(url)\n\t\t\t\t\tif ( replace ){\n\t\t\t\t\t\tthis.location.replace(url);\t\n\t\t\t\t\t\treturn url ;\n\t\t\t\t\t}\n\t\t\t\t\treturn this.location.href = url;\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\treturn this.location.href.replace(/%27/g,\"'\");\t\n\t\t\t\t}\t\t\t\n\t\t\t}\n\t\t}\t\n\t}; \n\n\tvar urlBrowser = null ;\n\tvar browser = class browser {\n\n\t\tconstructor(kernel, settings){\n\t\t\tthis.location = window.location;\n\t\t\tthis.history = window.History;\n\t\t\turlBrowser = myurl.call(this, settings);\n\t\t\tthis.lastUrl = this.url();\n\t\t\tthis.kernel = \tkernel ;\n\t\t\t$(window).bind('hashchange', changeUrl.bind(this)); \n\t\t\t//if (nativeHistory){\n\t\t\t//\t$(window).bind('popstate', changeUrl.bind(this))\n\t\t\t//}\n\t\t}\n\n\t\turl (url, replace, state){\n\t\t\treturn urlBrowser.call(this, url, replace, state);\t\t\n\t\t}\n\n\t};\n\n\n\n\t/*\n \t *\tCLASS LOCATION\n \t *\n \t */\n\n\n\t\n\tvar beginsWith = function(begin, whole) {\n  \t\tif (whole.indexOf(begin) === 0) {\n    \t\t\treturn whole.substr(begin.length);\n  \t\t}\n\t};\n\n\tvar stripHash = function(url){\n\t\tvar index = url.indexOf('#');\n  \t\treturn index == -1 ? url : url.substr(0, index);\n\t};\n\n\n\tvar Location = class Location  extends stage.Service {\n\n\n\t\tconstructor(browser, base, kernel, settings){\n\t\t\tsuper(\"LOCATION\", kernel.container, kernel.notificationsCenter );\n\t\t\tthis.settings = settings\n\t\t\tthis.browser = browser ;\n\t\t\tthis.replace = false ;\n\t\t\t\n\t\t\tthis.initialUrl = this.browser.url();\n\t\t\tthis.base = base\n\t\t\tthis.hashPrefix = \"#\"+this.settings.hashPrefix ;\n\t\t\tthis.proto = this.stripFile(this.base);\n\t\t\tthis.parseAbsoluteUrl(this.initialUrl);\n\t\t\tthis.parse(this.initialUrl);\n\t\t\tthis.logger(\"INITIALIZE LOCATION SERVICE\", \"DEBUG\");\n\n\t\t\t// rewrite hashbang url <> html5 url\n\t\t\t//var abs = this.absUrl();\n\t\t\t//if ( abs != this.initialUrl) {\n\t\t\t//\tthis.browser.url(abs, true);\n\t\t\t//}\n\t\t}\n\t\t\n\t\tabsUrl (){\n\t\t\treturn this._absUrl ;\n\t\t}\n\n\t\turl (url){\n\t\t\tif (typeof url === \"undefined\")\n\t\t\t\treturn this._url;\n\t\t\tvar match = PATH_MATCH.exec(url);\n\t\t\tif (match[1]) this.path(decodeURIComponent(match[1]));\n\t\t\tif (match[2] || match[1]) this.search(match[3] || '');\n\t\t\tthis.hash(match[5] || '');\n\t\t}\n\n\t\tprotocol (){\n\t\t\treturn this._protocol;\t\n\t\t}\n\n\t\thost (){\n\t\t\treturn this._host;\t\n\t\t}\n\n\t\tport (){\n\t\t\treturn this._port ;\t\n\t\t}\n\n\t\tpath (path){\n\t\t\tif (typeof path === \"undefined\"){\n\t\t\t\treturn this._path ;\n\t\t\t}\n\t\t\tthis._path = path ;\n\t\t\ttry {\n\t\t\t\tthis.change();\n\t\t\t}catch(e){\n\t\t\t\tthis.logger(e,\"ERROR\");\n\t\t\t\tthrow e\n\t\t\t}\n\t\t\treturn this._path;\n\t\t}\n\n\t\tsearch (search){\n\t\t\tif (typeof search === \"undefined\"){\n\t\t\t\treturn this._search ;\n\t\t\t}\n\t\t\tthis._search = search ;\n\t\t\ttry {\n\t\t\t\tthis.change();\n\t\t\t}catch(e){\n\t\t\t\tthis.logger(e,\"ERROR\");\n\t\t\t\tthrow e\n\t\t\t}\n\t\t\treturn this._search;\n\n\t\t\t\n\t\t}\n\t\t\n\t\thash (hash){\n\t\t\tif (typeof hash === \"undefined\"){\n\t\t\t\treturn this._hash ;\n\t\t\t}\n\t\t\tthis._hash = hash ;\n\t\t\ttry {\n\t\t\t\tthis.change();\n\t\t\t}catch(e){\n\t\t\t\tthis.logger(e,\"ERROR\");\n\t\t\t\tthrow e\n\t\t\t}\n\t\t\treturn this._hash;\n\t\t}\t\n\n\t\tstate (){\n\t\t\n\t\t}\n\n\t\treplace (value){\n\t\t\tif (value)\n\t\t\t\treturn  this.replace = value ;\t\n\t\t\treturn this.replace ;\n\t\t}\n\n\t\tencodePath (path) {\n  \t\t\tvar segments = path.split('/');\n      \t\t\tvar i = segments.length;\n\n  \t\t\twhile (i--) {\n    \t\t\t\tsegments[i] = stage.io.encodeUriSegment(segments[i]);\n  \t\t\t}\n\n  \t\t\treturn segments.join('/');\n\t\t}\n\n\t\tstripFile (url){\n\t\t\treturn url.substr(0, stripHash(url).lastIndexOf('/') + 1);\n\t\t}\n\t\n\t\t// parsing end URL ex : http://domain.com:port(/path)(?search)(#hash)\n\t\tparseRelativeUrl (relativeUrl){\n\t\t\t//console.log(\"relative :\" + relativeUrl)\n\t\t\tvar prefixed = (relativeUrl.charAt(0) !== '/');\n\t\t\tif (prefixed) {\n\t\t\t\trelativeUrl = '/' + relativeUrl;\n\t\t\t}\n\t\t\tvar resolve = stage.io.urlToOject(relativeUrl);\n\t\t\t//console.log(resolve)\n\t\t\tthis._path = decodeURIComponent(prefixed && resolve.pathname.charAt(0) === '/' ?\n\t\t\t\tresolve.pathname.substring(1) : resolve.pathname);\n\t\t\tthis._search = stage.io.parseKeyValue(resolve.search);\n\t\t\tthis._hash = decodeURIComponent(resolve.hash);\n\n\t\t\t// make sure path starts with '/';\n\t\t\tif (typeof this._path !== \"undefined\" && this._path.charAt(0) != '/') {\n\t\t\t\tthis._path = '/' + this._path;\n\t\t\t}\n\t\t\t//console.log(\"PATH:\" + this._path)\n\t\t}\n\n\t\t// parsing begin URL ex : (http)://(domain.com):(port)\n\t\tparseAbsoluteUrl (absoluteUrl){\n\t\t\tvar resolve = stage.io.urlToOject(absoluteUrl);\n  \t\t\tthis._protocol = resolve.protocol.replace(\":\", \"\");\n  \t\t\tthis._host = resolve.hostname;\n  \t\t\tthis._port = parseInt(resolve.port, 10) || DEFAULT_PORTS[this._protocol] ||null;\n\t\t}\n\t};\n\n\t/**\n \t * LocationHashbangUrl represents url\n \t * This object is exposed as $location service when developer doesn't opt into html5 mode.\n \t * It also serves as the base class for html5 mode fallback on legacy browsers.\n \t *\n \t * @constructor\n \t * @param {string} appBase application base URL\n \t * @param {string} hashPrefix hashbang prefix\n \t*/\n\tvar LocationHashbangUrl = class LocationHashbangUrl extends  Location  {\n\n\t\tconstructor(browser, base, kernel, settings) {\n\t\t\tsuper(browser, base, kernel, settings);\n\t\t}\n\n\t\tparse (url){\n\t\t\t//console.log(\"URL to parse LocationHashbangUrl  :\" + url)\n\t\t\t//console.log(\"base : \" + this.base)\n\t\t\t//console.log(\"beginsWith BASE : \"+beginsWith(this.base, url))\n\t\t\t//console.log(\"beginsWith PROTO  :\"+beginsWith(this.proto, url))\n\t\t\tvar withoutBaseUrl = beginsWith(this.base, url) || beginsWith(this.proto, url);\n\t\t\t//console.log(\"withoutBaseUrl : \" +withoutBaseUrl)\n\t\t\tvar withoutHashUrl = withoutBaseUrl.charAt(0) == '#'\n\t\t\t\t? beginsWith(this.hashPrefix, withoutBaseUrl)\n\t\t\t\t: \"\";\n\n    \t\t\tif (typeof withoutHashUrl !== \"string\") {\n\t\t\t\tthis.logger('Invalid url '+url+', missing hash prefix ' +this.hashPrefix , \"ERROR\");\n      \t\t\t\treturn null; \n    \t\t\t}\n\t\t\t//console.log(\"withoutHashUrl : \" +withoutHashUrl)\n    \t\t\tthis.parseRelativeUrl(withoutHashUrl);\n\t\t\treturn this.change();\n\t\t}\n\t\t\n\t\tchange (){\n\t\t\tvar search = stage.io.toKeyValue(this._search);\n\t\t\t//console.log(this._search)\n\t\t\t//var hash = this._hash ? '#' + stage.io.encodeUriSegment(this._hash) : '';\n\n\t\t\tvar hash = this._hash ? '#' + this._hash : '';\n\n\t\t\t//console.log(this._path)\n\t\t\tthis._url = this.encodePath(this._path) + (search ? '?' + search : '') + hash\t\t\n\t\t\t//console.log(this._url)\n\t\t\t//var temp = (this._url ? this.hashPrefix + this._url : '').replace(\"//\",\"/\");\n\t\t\t//this._absUrl = this.base + temp;\t\n\t\t\t//console.log( this.hashPrefix)\n\t\t\t//console.log( this._url)\n\t\t\tthis._absUrl = this.base + (this._url ? \"#\" + this._url : '');\t\n\t\t\t//console.log(\"URL :\"+ this._url)\n\t\t\t//console.log(\"HASH :\"+ this._hash)\n\t\t\t//console.log(\"ABSURL :\"+ this._absUrl)\n\t\t\t//console.log(\"PATH :\"+ this._path)\n\t\t\treturn this;\n\t\t}\n\t};\n\n\n\t/**\n \t * LocationHashbangInHtml5Url represents url\n \t * This object is exposed as location service when html5 history api is enabled but the browser\n \t * does not support it.\n \t *\n \t * @constructor\n \t * @param {string} appBase application base URL\n \t * @param {string} hashPrefix hashbang prefix\n \t*/\n\tvar LocationHashbangInHtml5Url = class LocationHashbangInHtml5Url extends  LocationHashbangUrl  {\n\n\t\tconstructor(browser, base, kernel, settings){\n\t\t\tsuper(browser, base, kernel, settings);\n\t\t}\n\n\t\tparse (url){\n\t\t\treturn this.change();\n\t\t}\n\t\t\n\t\tchange(){\n\t\t\treturn this;\n\t\t}\n\t};\n\n\t/**\n \t * LocationHtml5Url represents an url\n \t * This object is exposed as location service when HTML5 mode is enabled and supported\n \t *\n \t * @constructor\n \t * @param {string} appBase application base URL\n \t * @param {string} basePrefix url path prefix\n \t*/\n\tvar LocationHtml5Url = class LocationHtml5Url extends Location  {\n\n\t\tconstructor (browser, base, kernel, settings) {\n\t\t\tsuper(browser, base, kernel, settings);\n\t\t}\n\n\t\tparse (url){\n\t\t\tvar pathUrl = beginsWith(this.proto, url);\n\t\t\tif (pathUrl){\n\t\t\t\tthis.parseRelativeUrl(pathUrl);\n\t\t\t}\n\t\t\tif (! this._path)\n\t\t\t\tthis._path = \"/\"\n\t\t\treturn this.change();\n\t\t}\n\t\t\n\t\tchange (){\n\t\t\tvar search = stage.io.toKeyValue(this._search);\n\t\t\tvar hash = this._hash ? '#' + stage.io.encodeUriSegment(this._hash) : '';\n\t\t\tthis._url = this.encodePath(this._path) + (search ? '?' + search : '') + hash;\n\t\t\tthis._absUrl = this.proto + this._url.substr(1);\n\t\t\treturn this\n\t\t}\n\t};\n\n\n\t/*\n \t *\tSERVICE LOCATION\n \t */\n\n\tvar defaultSettings = {\n\t\thtml5Mode:true,\n\t\thashPrefix:\"/\"\n\t};\n\n\tvar serverBase = function (url) {\n\t\treturn url.substring(0, url.indexOf('/', url.indexOf('//') + 2));\n\t};\n\n\tvar service = function(kernel, settings){\n\t\n\t\tvar options = $.extend(defaultSettings, settings)\n\t\t\t\n\t\tvar browserService = new browser(kernel, options);\n\t\tkernel.set(\"browser\", browserService);\n\t\tvar initialUrl = browserService.url();\n\t\tvar baseHref = options.base || \"\" ;\n\t\tvar mode = null ;\n\t\tvar base = null ;\n\n\t\tif (options.html5Mode) {\n\t\t\tmode = nativeHistory ? LocationHtml5Url : LocationHashbangInHtml5Url;\n\t\t\tbase = serverBase(initialUrl) + (baseHref || '/');\n\t\t}else{\n\t\t\tmode = LocationHashbangUrl ;\n\t\t\tbase = stripHash(initialUrl);\n\t\t}\n\t\t\n\t\treturn new mode(browserService, base, kernel, options);\n\t}; \n\t\n\tstage.location = service ;\n\treturn service;\n}\n","module.exports =  function(stage){\n\n\t'use strict';\n\n\t/*\n \t *\n \t *\tModel\n \t *\n \t */\n\n\tvar urlParser = function(container, url, name, template, obj){\n  \t\tvar index = url.indexOf(\"views\") ;\n  \t\tif (index < 0 ){\n    \t\t\tvar text = \"URL TEMPLATE BAD PATH :\" + url ;\n    \t\t\tthis.logger(text ,\"ERROR\")\n    \t\t\t\tthrow new Error(text) ;\n  \t\t}\n  \t\tvar res = url.slice(index+\"views\".length+1).split(\"/\");\n  \t\tres.pop();\n  \t\tif (res.length){\n    \t\t\tvar obj = container ;\n    \t\t\tfor (var i = 0; i<res.length;i++){\n      \t\t\t\tif ( obj[res[i]] ){\n        \t\t\t\tif (i !== res.length-1){\t\n        \t\t\t\t\tobj = obj[res[i]] ;\n        \t\t\t\t}else{\n          \t\t\t\t\tobj[res[i]][name] = template;\n        \t\t\t\t}\n      \t\t\t\t}else{\n        \t\t\t\tif (i !== res.length-1){\n        \t\t\t\t\tobj[res[i]] = {};\t\n        \t\t\t\t\tobj = obj[res[i]] ;\n        \t\t\t\t}else{\n          \t\t\t\t\tobj[res[i]] = {};\n          \t\t\t\t\tobj[res[i]][name] = template;\n        \t\t\t\t}\n      \t\t\t\t}\n    \t\t\t}\n  \t\t}else{\n    \t\t\tcontainer[name] = template ;\n  \t\t}\n\t};\n\n\tvar regI18n = new RegExp(\"^(.*)\\.(.._..)\\.(.*)$\");\n\n\tvar modelModule = class modelModule {\n\n\t\tconstructor(config){\n\t\t\tthis.rootName = \"module\";\n\t\t\tvar documentXml = this.parser(config);\t\t\n\t\t\t//this.name = this.config.name[\"@short\"];\n\t\t\tthis.name = documentXml.module['@id'];\n\t\t}\n\n\t\tparser (ele){\n\t\t\tswitch ( stage.typeOf(ele) ){\n\t\t\t\tcase \"document\" :\n\t\t\t\t\tvar res  = stage.xml.parseXml(ele) ; \n\t\t\t\t\tbreak;\n\t\t\t\tcase \"object\" :\t\n\t\t\t\t\tres = ele ;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( !  res[ this.rootName ]){\n\t\t\t\tthrow new Error (\"BAD MODULE CONFIG \");\n\t\t\t}\n\t\t\tthis.config = res[ this.rootName ] ; \n\t\t\treturn res;\n\t\t}\n\n\t\tregisterScript ( src){\n\t\t\tthis.autoloader.load( src, (error, transport) => {\n\t\t\t\tif (error){\n\t\t\t\t\tthis.logger(error, \"ERROR\");\n \t\t\t       \t\treturn ;\n\t\t\t\t}\n\t\t\t\tthis.logger(\"LOAD SCRIPT : \"+src ,\"DEBUG\");\n\t\t\t});\n\t\t}\n\n\t\tregisterStyle ( src){\n\t\t\tthis.autoloader.load( src, (error, transport) => {\n\t\t\t\tif (error){\n\t\t\t\t\tthis.logger(error, \"ERROR\");\n \t\t\t       \t\treturn ;\n\t\t\t\t}\n\t\t\t\tthis.logger(\"LOAD STYLE : \"+src ,\"DEBUG\");\n\t\t\t});\n\t\t}\n\n\t\tcacheFont ( src){\n\t\t\t$.ajax({\n\t\t\t\tasync: false,\n\t\t\tcache: true,\n\t\t\turl: src,\n\t\t\tbeforeSend:  ( xhr ) =>  {\n\t\t\t\txhr.overrideMimeType(\"application/octet-stream\");\n\t\t\t},\n\t\t\tsuccess: () => {\n\t\t\t\tthis.logger(\"LOAD FONT : \" + src, \"DEBUG\");\n\t\t\t},\n\t\t\terror: (e) => {\n\t\t\t\tconsole.log(e);\n\t\t\t\tthis.logger(src + \" : \" + message, \"ERROR\");\n\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tregisterTemplate (name, src, type){\n\t\t\t//console.log(\"NAME :\" + name)\n\t\t\tswitch(type){\n\t\t\t\tcase \"application/twig\":\n\t\t\t\t\t//var obj = urlParser.call(this, this.templates, src, name);\n\t\t\t\t\tthis.twig({\n\t\t\t\t\t\tid: this.name+\":\"+name,\n\t\t\t\t\thref: src,\n\t\t\t\t\tasync: false,\n\t\t\t\t\t//debug:true,\n\t\t\t\t\tload:(template) => {\n\t\t\t\t\t\turlParser.call(this, this.templates, src, name , template )\n\t\t\t\t\t\tthis.logger(\"LOAD TEMPLATE : \"+name +\" ==>\"+src ,\"DEBUG\");\n\t\t\t\t\t//console.log(this.templates)\n\t\t\t\t\t//obj[name] = template;\n\t\t\t\t\t//console.log(template.extend)\n\t\t\t\t\t//this.templateEngine\n\t\t\t\t\t},\n\t\t\t\t\terror:(xrh, status, message) => {\n\t\t\t\t\t\tthis.logger(\"TEMPLATE :\" + src + \" : \"+ message, \"ERROR\")\n\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"text/html\":\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"application/xml\":\n\t\t\t\tcase \"text/xml\":\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"template\":\n\t\t\t\t\tvar obj = urlParser.call(this, this.templates, src.url, name, src);\n\t\t\t\t\t//obj[name] = src;\n\t\t\t\t\tthis.logger(\"LOAD IMPORT TEMPLATE : \"+name +\" ==>\"+src.url ,\"DEBUG\");\n\t\t\t\t\tbreak;\n\t\t\t\tdefault :\n\t\t\t\t\tthis.registerTemplate( name, src, \"application/twig\" );\n\t\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\n\t\tregisterView (name, src, type){\n\t\t\tswitch(type){\n\t\t\t\tcase \"text/javascript\":\n\t\t\t\tcase \"application/javascript\":\n\t\t\t\t\tthis.autoloader.load( src, (error, transport) => {\n\t\t\t\t\t\tif (error){\n\t\t\t\t\t\t\tthis.logger(error, \"ERROR\");\n\t\t\t\t\t\t\treturn ;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//this.views[name] = new ;\n\t\t\t\t\t\tvar Class = stage.views[name];\n\t\t\t\t\t\tthis.views[name] = new Class(this.container, this);\n\t\t\t\t\t\tthis.logger(\"LOAD VIEW : \"+src ,\"DEBUG\");\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t}\n\t\t}\n\n\t\tregisterController (name, src){\n\t\t\tthis.autoloader.load( src, (error, transport) => {\n\t\t\t\tif (error){\n\t\t\t\t\tthis.logger(error, \"ERROR\")\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t\ttry {\n\t\t\t\t\tvar Class = stage.controllers[name]; \n\t\t\t\t\tthis.controllers[name] = new Class(name, this.container, this);\n\t\t\t\t\tthis.logger(\"LOAD CONTROLLER : \"+name +\" ==>\"+src ,\"DEBUG\");\n\t\t\t\t}catch(e){\n\t\t\t\t\tthrow e ;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tinitialiseRest (name, url, optionsGlobal){\n\t\t\tvar rest = this.kernel.restService ;\n\t\t\tvar ele = rest.addApi(name, url, optionsGlobal);\n\t\t\tthis.kernel.set(name, ele);\n\t\t}\n\n\t\tregisterTranslation (src, type){\n\t\t\tvar service = this.get(\"i18n\");\n\t\t\tif (! service){\n\t\t\t\tthis.logger(\"SERVICE I18N not loaded abort load Translation : \"+src,\"WARNING\");\n\t\t\t\treturn ;\n\t\t\t}\n\t\t\t$.ajax({\n\t\t\t\turl:src,\n\t\t\t\tasync:false,\n\t\t\t\tsuccess:(data, status, xhr) => {\n\t\t\t\t\tvar name = stage.basename(src) ;\n\t\t\t\t\tthis.logger(\"LOAD TRANSLATION \"+ type +\" : \"+name +\" URL = \"+src ,\"DEBUG\");\n\t\t\t\t\tvar res = regI18n.exec(name);\t\n\t\t\t\t\tif ( ! res ){\n\t\t\t\t\t\tthis.logger(\"SERVICE I18N  abort load Translation : \"+src+ \" Bad File name format\",\"WARNING\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar domain = res[1];\n\t\t\t\t\tvar locale = res[2];\n\t\t\t\t\tservice.registerI18n(name, locale, domain, data);\n\t\t\t\t},\n\t\t\t\tdataType: type || \"json\",\n\t\t\t\terror:(xhr, status, err) => {\n\t\t\t\t\tthis.logger(err, \"ERROR\")\n\t\t\t\t}\t\n\t\t\t});\n\t\t}\n\n\t\treader (){\n\t\t\tvar root = this.config;\n\t\t\tfor (var node in this.config){\n\t\t\t\tswitch ( node ){\n\t\t\t\t\tcase \"content\" :\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"controllers\":\n\n\t\t\t\t\t\tvar controllers = root[node].controller;\n\t\t\t\t\t\tif(controllers){\n\t\t\t\t\t\t\tvar tab = stage.typeOf(controllers) === \"object\" ? [controllers] : controllers ;\n\t\t\t\t\t\t\tfor (var i = 0 ; i < tab.length ; i++){\n\t\t\t\t\t\t\t\tvar name = tab[i][\"@name\"];\n\t\t\t\t\t\t\t\tvar src = tab[i][\"@src\"];\n\t\t\t\t\t\t\t\tthis.registerController(name, src)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"views\":\n\t\t\t\t\t\tvar views = root[node].view;\n\t\t\t\t\t\tif(views){\n\t\t\t\t\t\t\tvar tab = stage.typeOf(views) === \"object\" ? [views] : views ;\n\t\t\t\t\t\t\tfor (var i = 0 ; i < tab.length ; i++){\n\t\t\t\t\t\t\t\tvar name = tab[i][\"@name\"];\n\t\t\t\t\t\t\t\tvar src = tab[i][\"@src\"];\n\t\t\t\t\t\t\t\tvar type = tab[i][\"@type\"];\n\t\t\t\t\t\t\t\tthis.registerView(name, src, type);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"modules\":\n\t\t\t\t\t\tvar modules = root[node].module;\n\t\t\t\t\t\tif(modules){\n\t\t\t\t\t\t\tvar tab = stage.typeOf(modules) === \"object\" ? [modules] : modules ;\n\t\t\t\t\t\t\tfor (var i = 0 ; i < tab.length ; i++){\n\t\t\t\t\t\t\t\t//var name = tab[i][\"@name\"];\n\t\t\t\t\t\t\t\tvar url = tab[i][\"@href\"];\n\t\t\t\t\t\t\t\tif ( ! this.isDomReady){\n\t\t\t\t\t\t\t\t\tthis.kernel.listen(this,\"onBoot\",function(url){\n\t\t\t\t\t\t\t\t\t\tthis.kernel.loadModule(url, {\n\t\t\t\t\t\t\t\t\t\t\tasync:false\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}.bind(this, url))\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\tthis.kernel.loadModule(url);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"templates\":\n\t\t\t\t\t\tvar templates = root[node].template;\n\t\t\t\t\t\tif(templates){\n\t\t\t\t\t\t\tvar tab = stage.typeOf(templates) === \"object\" ? [templates] : templates ;\n\t\t\t\t\t\t\tfor (var i = 0 ; i < tab.length ; i++){\n\t\t\t\t\t\t\t\tvar name = tab[i][\"@name\"];\n\n\t\t\t\t\t\t\t\tvar src = tab[i][\"@src\"];\n\t\t\t\t\t\t\t\tvar type = tab[i][\"@type\"];\n\t\t\t\t\t\t\t\tif ( ! name){\n\t\t\t\t\t\t\t\t\tname = this.getTemplateName(src)\t\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.registerTemplate(name, src, type);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"styles\":\n\t\t\t\t\t\tvar styles = root[node].style;\n\t\t\t\t\t\tif(styles){\n\t\t\t\t\t\t\tvar tab = stage.typeOf(styles) === \"object\" ? [styles] : styles ;\n\t\t\t\t\t\t\tfor (var i = 0 ; i < tab.length ; i++){\n\t\t\t\t\t\t\t\tvar src = tab[i][\"@src\"];\n\t\t\t\t\t\t\t\tthis.registerStyle(src);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"scripts\":\n\t\t\t\t\t\tvar scripts = root[node].script;\n\t\t\t\t\t\tif(scripts){\n\t\t\t\t\t\t\tvar tab = stage.typeOf(scripts) === \"object\" ? [scripts] : scripts ;\n\t\t\t\t\t\t\tfor (var i = 0 ; i < tab.length ; i++){\n\t\t\t\t\t\t\t\tvar src = tab[i][\"@src\"];\n\t\t\t\t\t\t\t\tthis.registerScript(src);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"fonts\":\n\t\t\t\t\t\tvar fonts = root[node].font;\n\t\t\t\t\t\tif(fonts){\n\t\t\t\t\t\t\tvar tab = stage.typeOf(fonts) === \"object\" ? [fonts] : fonts ;\n\t\t\t\t\t\t\tfor (var i = 0 ; i < tab.length ; i++){\n\t\t\t\t\t\t\t\tvar src = tab[i][\"@src\"];\n\t\t\t\t\t\t\t\tthis.cacheFont(src);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"translations\":\n\t\t\t\t\t\tvar translations = root[node].translation;\n\t\t\t\t\t\tif(translations){\n\t\t\t\t\t\t\tvar tab = stage.typeOf(translations) === \"object\" ? [translations] : translations ;\n\t\t\t\t\t\t\tfor (var i = 0 ; i < tab.length ; i++){\n\t\t\t\t\t\t\t\tvar src = tab[i][\"@src\"];\n\t\t\t\t\t\t\t\tvar type = tab[i][\"@type\"];\n\t\t\t\t\t\t\t\tthis.registerTranslation(src, type );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"icon\" :\n\t\t\t\t\t\tthis.icon = root[node][\"@src\"];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t/*case \"name\" :\n\t\t\t\t\t\t  console.log(root[node])\n\t\t\t\t\t\t  this.name = root[node][\"@short\"];\n\t\t\t\t\t\t  break;*/\n\t\t\t\t\tcase \"preference\":\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"author\":\n\t\t\t\t\t\tvar author = root[node];\n\t\t\t\t\t\tthis.author = author[\"#text\"];\n\t\t\t\t\t\tthis.emailAuthor = author[\"@email\"];\n\t\t\t\t\t\tthis.authorLink = author[\"@href\"];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"description\":\n\t\t\t\t\t\tthis.description = root[node];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"api\":\n\t\t\t\t\t\t//console.log(root[node]);\n\t\t\t\t\t\tfor(var ele in root[node]){\n\t\t\t\t\t\t\tvar mvc = root[node][ele];\n\t\t\t\t\t\t\tvar tab = stage.typeOf(mvc) === \"object\" ? [mvc] : mvc;\n\t\t\t\t\t\t\tfor(var i = 0; i < tab.length; i++){\n\t\t\t\t\t\t\t\tif(ele === \"rest\"){\n\t\t\t\t\t\t\t\t\tif( this.kernel.restService )\n\t\t\t\t\t\t\t\t\t\tthis.initialiseRest(tab[i][\"@name\"], tab[i][\"@url\"]);\n\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\tthis.logger(\"Api \" + ele + \" SERVICE REST NOT FOUND\" ,\"ERROR\")\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis.logger(\"Api \" + ele + \" not exist for modules\" ,\"ERROR\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"routes\":\n\t\t\t\t\t\tvar routes = root[node].route;\n\t\t\t\t\t\tswitch(stage.typeOf( routes)){\n\t\t\t\t\t\t\tcase \"array\":\n\t\t\t\t\t\t\t\tfor (var i = 0 ;i<routes.length; i++){\n\t\t\t\t\t\t\t\t\tvar id = routes[i][\"@id\"];\n\t\t\t\t\t\t\t\t\tvar path = routes[i][\"@path\"];\n\t\t\t\t\t\t\t\t\tvar defaultParam = {};\n\t\t\t\t\t\t\t\t\tswitch(stage.typeOf( routes[i][\"default\"])){\n\t\t\t\t\t\t\t\t\t\tcase \"array\":\n\t\t\t\t\t\t\t\t\t\t\tfor (var j=0 ;j<routes[i][\"default\"].length;j++){\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultParam[routes[i][\"default\"][j][\"@key\"]] =  routes[i][\"default\"][j][\"#text\"];\n\t\t\t\t\t\t\t\t\t\t\t\t//console.log(defaultParam)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\t\t\t\t\tif (routes[i][\"default\"][\"@key\"])\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultParam[routes[i][\"default\"][\"@key\"]] = routes[i][\"default\"][\"#text\"];\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tthis.routes[id] = this.router.createRoute(id, path, defaultParam);\t\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\t\tfor (var route in routes){\n\t\t\t\t\t\t\t\t\tswitch (route){\n\t\t\t\t\t\t\t\t\t\tcase \"@id\":\n\t\t\t\t\t\t\t\t\t\t\tvar id = routes[route];\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase \"@path\":\n\t\t\t\t\t\t\t\t\t\t\tvar path = routes[route];\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase \"default\":\n\t\t\t\t\t\t\t\t\t\t\tvar defaultParam = {};\n\t\t\t\t\t\t\t\t\t\t\tswitch(stage.typeOf( routes[route] )){\n\t\t\t\t\t\t\t\t\t\t\t\tcase \"array\":\n\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var j=0 ;j<routes[route].length;j++){\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultParam[routes[route][j][\"@key\"]] =  routes[route][j][\"#text\"];\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultParam[routes[route][\"@key\"]] = routes[route][\"#text\"]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.routes[id] = this.router.createRoute(id, path, defaultParam);\n\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\n\t/*\n \t*\n \t*\tCLASS Module\n \t*\n \t*/\n\tvar regPattern = /(.*)Module:(.*):(.*)$/;\n\n\tvar Module = class Module extends  modelModule  {\n\n\t\tconstructor(kernel, config, settings){\n\t\t\tsuper(config);\n\t\t\tthis.kernel = kernel;\n\t\t\tthis.container = kernel.container;\n\t\t\tthis.syslog = this.get(\"syslog\");\n\t\t\tthis.logger(\"REGISTER MODULE \"+this.name, \"DEBUG\");\n\t\t\tthis.autoloader = new stage.autoload(this, {\n\t\t\t\ttransport:\"script\"\n\t\t\t});\n\t\t\tthis.views = {};\n\t\t\tthis.controllers = {};\n\t\t\tthis.templates = {};\n\t\t\tthis.routes = {};\n\n\t\t\tthis.twig = this.get(\"twig\");\n\n\t\t\tthis.setParameters(\"module.\"+this.name, this.config);\n\t\t\tthis.set(this.name, this);\n\t\t\tthis.boot(settings);\n\t\t}\n\n\t\tlisten (){\n\t\t\treturn this.notificationsCenter.listen.apply(this.notificationsCenter, arguments);\n\t\t}\n\n\t\tfire (event){\n\t\t\tthis.logger(event+\" : \"+ this.name , \"DEBUG\", \"EVENT MODULE\")\n\t\t\t\treturn this.notificationsCenter.fire.apply(this.notificationsCenter, arguments);\n\t\t}\n\n\t\tlogger (pci, severity, msgid,  msg){\n\t\t\tif (! msgid) msgid = \"MODULE  \"+this.name;\n\t\t\treturn this.syslog.logger(pci, severity, msgid,  msg);\t\n\t\t}\n\n\t\t/**\n\t \t\t*\t@method get\n\t \t\t*\t@param {String} name of service\n         \t\t*/\n\t\tget (name){\n\t\t\treturn this.container.get(name);\n\t\t}\n\n\t\t/**\n\t \t\t*\t@method set\n\t \t\t*\t@param {String} name of service\n\t \t\t*\t@param {Object} instance of service\n         \t\t*/\n\t\tset (name, obj){\n\t\t\treturn this.container.set(name, obj);\n\t\t}\n\n\t\tsetParameters (name, value){\n\t\t\treturn this.container.setParameters(name, value);\t\n\t\t}\n\n\t\tgetParameters (name){\n\t\t\treturn this.container.getParameters(name);\t\n\t\t}\n\n\t\tgetController (name){\n\t\t\treturn this.controllers[name];\n\t\t}\n\n\t\tgetTemplate (name){\n\t\t\treturn this.templates[name];\n\t\t}\n\n\t\tgetTemplateName (url){\n\t\t\tvar name = stage.basename(url);\n\t\t\tvar index = name.indexOf(\".\");\n\t\t\tif (index < 0)\n\t\t\t\treturn url;\n\t\t\treturn name.slice(0, name.indexOf(\".\") );\n\t\t}\n\n\t\tgetTemplatePattern (pattern){\n\t\t\tvar res  = regPattern.exec(pattern);\n\t\t\tif ( ! res ){\n\t\t\t\tvar txt = \"IN PATTERN :\" + pattern +\" BAD FORMAT \" ;\n\t\t\t\tthis.logger(txt,\"ERROR\")\n\t\t\t\t\tthrow new Error(txt);\n\t\t\t}\n\t\t\tvar moduleName = res[1];\n\t\t\tvar pathName = res[2];\n\t\t\tvar templateName = res[3];\t\n\t\t\tvar module = this.kernel.getModule(moduleName);\n\t\t\tif ( ! module ){\n\t\t\t\tvar txt = \"IN PATTERN :\" + pattern +\" MODULE :\"+ moduleName +\" not defined\" ;\n\t\t\t\tthis.logger(txt,\"ERROR\")\n\t\t\t\t\tthrow new Error(txt);\n\t\t\t}\n\t\t\tvar obj = module.templates ;\n\t\t\tif (pathName !== \"\"){\n\t\t\t\tvar tab = pathName.split(\"/\");\n\t\t\t\tfor (var i = 0 ; i<tab.length ; i++){\n\t\t\t\t\tif (tab[i]){\n\t\t\t\t\t\tif (tab[i] in obj){\n\t\t\t\t\t\t\tobj = obj[tab[i]];\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tvar txt = \"IN PATTERN :\" + pattern +\" pathName :\"+ pathName +\" not defined\" ;\n\t\t\t\t\t\t\tthis.logger(txt,\"ERROR\")\n\t\t\t\t\t\t\t\tthrow new Error(txt);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (templateName !== \"\" ){\n\t\t\t\tvar name = this.getTemplateName(templateName);\n\t\t\t\tif (obj[name]){\n\t\t\t\t\treturn obj[name];\n\t\t\t\t}else{\n\t\t\t\t\tvar txt = \"IN PATTERN :\" + pattern +\" MODULE :\"+ moduleName +\"  template : \"+ templateName +\" not defined\" ;\n\t\t\t\t\tthis.logger(txt,\"ERROR\")\n\t\t\t\t\t\tthrow new Error(txt);\t\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif (obj[\"index\"]){\n\t\t\t\t\treturn obj[\"index\"];\n\t\t\t\t}else{\n\t\t\t\t\tvar txt = \"IN PATTERN :\" + pattern +\" MODULE :\"+ moduleName +\" default template not defined\" ;\n\t\t\t\t\tthis.logger(txt,\"ERROR\")\n\t\t\t\t\t\tthrow new Error(txt);\t\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tgetView (name){\n\t\t\treturn this.views[name];\n\t\t}\n\n\t\tboot (settings){\n\t\t\tthis.logger(\"BOOT \"+ this.name , \"DEBUG\");\n\t\t\tthis.container = this.kernel.container.enterScope(this.name);\n\t\t\tthis.notificationsCenter = stage.notificationsCenter.create(settings,this);\n\t\t\tthis.set(\"notificationsCenter\", this.notificationsCenter);\n\t\t\tthis.router = this.kernel.router ;\n\n\t\t\ttry {\n\t\t\t\tthis.fire(\"onBoot\", this);\t\n\t\t\t\tthis.reader();\n\t\t\t\tthis.fire(\"onReady\",this);\n\t\t\t}catch (e){\n\t\t\t\tthis.logger(\"MODULE : \"+ this.name +\"  \"+e, \"ERROR\");\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t}\n\t};\n\n\tstage.Module = Module; \n\treturn Module ;\n};\n","const  Twig = require(\"twig\");\n\nmodule.exports =  function(stage){\n\n\t'use strict';\n\t\t\t\n\t/*\n \t *\n \t *\tROUTE\n \t *\n \t */\n\n\tvar decode = function(str) {\n\t\ttry {\n\t\t\treturn decodeURIComponent(str);\n\t\t} catch(err) {\n\t\t\treturn str;\n\t\t}\n\t};\n\tvar Route = class Route {\n\n\t\tconstructor(id, path, defaultParams){\n\t\t\tthis.id = id ;\n\t\t\tthis.path = path;\n\t\t\tthis.template = null;\t\n\t\t\tthis.controller =null;\n\t\t\tthis.defaults =  defaultParams;\n\t\t\tthis.variables = [];\n\t\t\tthis.pattern = this.compile();\n\t\t};\n\n\t\tcompile (){\n\t\t\tvar pattern = this.path.replace(/(\\/)?(\\.)?\\{([^}]+)\\}(?:\\(([^)]*)\\))?(\\?)?/g, (match, slash, dot, key, capture, opt, offset) =>  {\n\t\t\t\tvar incl = (this.path[match.length+offset] || '/') === '/';\n\t\t\t\tthis.variables.push(key);\n\t\t\t\treturn (incl ? '(?:' : '')+(slash || '')+(incl ? '' : '(?:')+(dot || '')+'('+(capture || '[^/]+')+'))'+(opt || '');\n\t\t\t});\n\t\t\tpattern = pattern.replace(/([\\/.])/g, '\\\\$1').replace(/\\*/g, '(.+)');\n\t\t\tthis.pattern = new RegExp('^'+pattern+'[\\\\/]?$', 'i');\n\t\t\treturn this.pattern ;\t\n\t\t}\n\n\t\tmatch (url){\n\t\t\tvar res = url.match(this.pattern);\n\t\t\t//console.log(res)\n\t\t\tif (!res) {\n\t\t\t\treturn res;\n\t\t\t}\n\t\t\tvar map = [];\n\t\t\tvar tab = res.slice(1) ;\n\t\t\tfor (var i = 0 ; i<tab.length; i++){\n\t\t\t\tvar k = this.variables[i] || 'wildcard';\n\t\t\t\tvar param = tab[i] && decode(tab[i]);\n\t\t\t\t//var index = map.push( map[k] ? [].concat(map[k]).concat(param) : param );\n\t\t\t\tvar index = map.push( param )\n\t\t\t\tmap[k] = map[index-1] ;\n\n\t\t\t}\n\t\t\tif ( map && map.wildcard) {\n\t\t\t\tmap['*'] = map.wildcard;\n\t\t\t}\n\t\t\treturn map;\n\t\t}\n\t};\n\n\t/*\n \t *\n \t *\tRESOLVER\n \t *\n \t */\n\tvar regModuleName = /^(.*)Module[\\.js]{0,3}$/;\n\tvar Resolver = class Resolver {\n\n\t\tconstructor(container){\n\t\t\tthis.container = container;\n\t\t\tthis.resolve = false;\n\t\t\tthis.kernel = this.container.get(\"kernel\");\n\t\t\tthis.defaultAction = null;\n\t\t\tthis.defaultView = null;\n\t\t\tthis.variables = new Array();\n\t\t\tthis.router = this.container.get(\"router\")\n\t\t\tthis.browser = this.container.get(\"browser\")\n\t\t\t//this.notificationsCenter = this.container.get(\"notificationsCenter\") ;\n\t\t\n\t\t}\n\n\t\tmatch (route, url){\n\t\t\tvar match = route.match(url); \n\t\t\tif ( match ){\n\t\t\t\tthis.variables = match;\n\t\t\t\tthis.url = url;\n\t\t\t\tthis.route = route;\n\t\t\t\tthis.parsePathernController(route.defaults.controller)\n\t\t\t}\t\t\n\t\t\treturn match;\n\t\t}\n\n\n\t\tgetModuleName (str){\n\t\t\tvar ret = regModuleName.exec(str);\n\t\t\tif (ret){\n\t\t\t\treturn  ret[1] ;\n\t\t\t}else{\n\t\t\t\tthrow \"BAD MODULE PATTERN \";\n\t\t\t}\n\t\t}\n\n\t\tgetController (name){\n\t\t\treturn this.module.controllers[name+\"Controller\"];\n\t\t}\n\n\t\tgetAction (name){\n\t\t\tvar ele = name+\"Action\" ;\n\t\t\tif ( ele in this.controller ){\n\t\t\t\treturn this.controller[ele]\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tgetDefaultView (controller, action){\n\t\t\tvar res = this.module.name+\"Module\"+\":\"+controller+\":\"+action+\".html.twig\";\n\t\t\treturn res ; \n\t\t}\n\n\t\tparsePathernController (pattern){\n\t\t\tif (typeof pattern !== \"string\"){\n\t\t\t\tthrow new Error(\"Resolver : pattern : \"+pattern +\" MUST be a string\");\t\n\t\t\t}\n\t\t\tthis.route = this.router.getRouteByPattern(pattern);\n\t\t\tvar tab = pattern.split(\":\")\n\t\t\ttry {\n\t\t\t\tthis.module = this.kernel.getModule( this.getModuleName(tab[0]) );\n\t\t\t}catch(e){\n\t\t\t\tthrow new Error(\"Resolver pattern error module :  \" + pattern + \" : \" +e );\n\t\t\t}\n\t\t\tif ( this.module ){\n\t\t\t\tthis.controller = this.getController(tab[1]);\n\t\t\t\tif ( this.controller ){\n\t\t\t\t\tif (tab[2]){\n\t\t\t\t\t\tthis.action = this.getAction(tab[2]);\n\t\t\t\t\t\tif (! this.action ){\n\t\t\t\t\t\t\tthrow new Error(\"Resolver :In CONTROLLER: \"+ tab[1] +\" ACTION  :\"+tab[2] + \" not exist\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.action = null;\t\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tthrow new Error(\"Resolver :controller not exist :\"+tab[1] );\n\t\t\t\t}\n\t\t\t\tthis.defaultView = this.getDefaultView(tab[1], tab[2] );\n\t\t\t\tthis.resolve = true;\n\t\t\t}else{\n\t\t\t\t//this.logger(\"Resolver : not exist :\"+tab[0] , \"ERROR\")\n\t\t\t\tthrow new Error(\"Resolver : module not exist :\"+tab[0] );\n\t\t\t}\n\t\t}\n\t\t\n\t\tcallController (arg){\n\t\t\ttry{\n\t\t\t\tvar ret = this.action.apply(this.controller, arg || [])\t\n\t\t\t}catch(e){\n\t\t\t\tthis.controller.logger.call(this.controller, e, \"ERROR\");\t\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t\treturn ret;\n\t\t}\n\t};\n\n\t/*\n\t *\tROUTER\n\t */\n\n\tvar cacheState = function(){\n\t\tvar cacheState = window.history.state === undefined ? null : window.history.state;\t\n\t\treturn cacheState ;\n\t}\n\n\tvar nativeHistory = !!(window.history && window.history.pushState );\n\tvar regSerch = /(.*)\\?.*$/;\n\n\tvar service = class service  extends stage.Service {\n\n\t\tconstructor(kernel, container){\n\n\t\t\tsuper(\"ROUTER\", container );\n\t\t\t//this.kernel = kernel ;\n\t\t\t//this.container = container ;\n\t\t\t//this.notificationsCenter = this.container.get(\"notificationsCenter\");\n\t\t\t//this.syslog = kernel.syslog ;\t\n\t\t\tthis.routes = {};\n\t\t\tthis.routePattern = {};\n\t\t\tthis.location = this.get(\"location\");\n\t\t\tthis.browser = this.get(\"browser\");\n\t\t\tthis.logger(\"INITIALIZE ROUTER SERVICE\", \"DEBUG\");\n\n\t\t\t/*\n \t\t \t* Extend Twig js\t\n \t\t \t*/\n\t\t\tTwig.extendFunction(\"path\", (name, variables, host) => {\n\t\t\t\ttry {\n\t\t\t\t\tif (host){\n\t\t\t\t\t\treturn  this.generateUrl.call(this, name, variables, host);\t\n\t\t\t\t\t}else{\n\t\t\t\t\t\tvar generatedPath = this.generateUrl.call(this, name, variables, host);\n\t\t\t\t\t\treturn generatedPath?\"#\"+generatedPath:\"\";\n\t\t\t\t\t}\n\t\t\t\t}catch(e){\n\t\t\t\t\tthis.logger(e.error)\n\t\t\t\t\tthrow e.error\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.notificationsCenter.listen(this,\"onUrlChange\" , (url, lastUrl, absUrl ,cache) => {\n\t\t\t\ttry{\n\t\t\t\t\tvar res = this.resolve(url);\n\t\t\t\t\tif(! res.resolve ){\n\t\t\t\t\t\tthis.forward(\"appModule:app:404\");\n\t\t\t\t\t\treturn ;\n\t\t\t\t\t}\n\t\t\t\t\tvar last = this.resolveRoute(lastUrl) \n\t\t\t\t\tif (last){\n\t\t\t\t\t\tthis.notificationsCenter.fire(\"onRouteChange\",{id:res.route.id, route:res.route, args:res.variables} ,{id:last.route.id, route:last.route, args:last.variables});\n\t\t\t\t\t}\n\t\t\t\t}catch (e){\n\t\t\t\t\tthis.logger(e, \"ERROR\");\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\tcreateRoute (id, path, defaultParams){\n\t\t\tif (id in this.routes ){\n\t\t\t\tthis.logger(\"CREATE ROUTE : \"+ id + \"Already exist \", \"ERROR\");\t\n\t\t\t}\n\t\t\tvar route  = new Route(id, path, defaultParams);\n\t\t\tthis.routes[id] = route;\n\t\t\tthis.routePattern[this.routes[id].defaults.controller] = {\n\t\t\t\troute:this.routes[id],\n \t\t        \tpath:path\t\n\t\t\t}\n\t\t\tthis.logger(\"CREATE ROUTE : \"+ id, \"DEBUG\");\n\t\t\treturn route ;\n\t\t}\n\n\t\tgetRoute (name){\n\t\t\tif (this.routes[name])\n\t\t\t\treturn this.routes[name];\n\t\t\treturn null;\n\t\t}\n\n\t\tresolveRoute (url){\n\t\t\tvar resolver = new Resolver(this.container);\n\t\t\tvar res = [];\n\t\t\tfor (var routes in this.routes){\n\t\t\t\tvar route = this.routes[routes];\n\t\t\t\ttry {\n\t\t\t\t\tres = resolver.match(route, url);\n\t\t\t\t\tif (res){\n\t\t\t\t\t\treturn resolver ; \n\t\t\t\t\t}\n\t\t\t\t}catch(e){\n\t\t\t\t\tcontinue ;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\t\n\t\tresolve (url){\n\t\t\t//console.log(\"RESOLVE \" +url)\n\t\t\t//console.log(regSerch.exec(url) );\n\t\t\tvar test = regSerch.exec(url) ;\n\t\t\tif ( test )\n\t\t\t\turl = test[1] ;\n\t\t\tvar resolver = new Resolver(this.container);\n\t\t\tvar res = [];\n\t\t\tfor (var routes in this.routes){\n\t\t\t\tvar route = this.routes[routes];\n\t\t\t\ttry {\n\t\t\t\t\tres = resolver.match(route, url);\n\t\t\t\t\tif (res){\n\t\t\t\t\t\tthis.notificationsCenter.fire(\"onBeforeAction\", url, resolver );\n\t\t\t\t\t\tvar ret = resolver.callController( res)\n\t\t\t\t\t\tthis.notificationsCenter.fire(\"onAfterAction\", url, resolver, ret );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}catch(e){\n\t\t\t\t\tthis.logger(\"RESOLVE URL : \"+ url + \" \" + e,\"ERROR\")\n\t\t\t\t\tthis.forward(\"appModule:app:500\", [e]);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn resolver;\n\t\t}\n\n\t\tgetRouteByPattern (pattern, args){\n\t\t\t//console.log(pattern)\n\t\t\t//console.log(this.routePattern)\n\t\t\tif (pattern in this.routePattern){\n\t\t\t\t//console.log(\"FIND\")\n\t\t\t\tvar route = this.routePattern[pattern].route ;\n\t\t\t\treturn route;\n\t\t\t}\n\t\t\t\t//console.log(\"NOT FIND\")\n\t\t\treturn null;\n\t\t};\n\n\t\tresolvePattern (pattern){\n\t\t\tvar resolver = new Resolver(this.container);\t\n\t\t\tvar route = resolver.parsePathernController(pattern);\n\t\t\treturn resolver;\n\t\t};\n\n\t\tforward (pattern, args){\n\t\t\tvar resolver = this.resolvePattern(pattern);\n\t\t\tif (resolver.resolve){\n\t\t\t\ttry {\n\t\t\t\t\tif (resolver.route){\n\t\t\t\t\t\tthis.logger(\"FORWARD PATTERN : \"+ pattern + \"  FIND ROUTE ==> REDIRECT \",\"DEBUG\")\n\t\t\t\t\t\tthis.redirect(resolver.route.path);\n\t\t\t\t\t\t//this.location.url(resolver.route.path);\n\t\t\t\t\t\t//this.logger(\"FORWARD PATTERN : \"+ pattern + \" find ROUTE : \"+resolver.route.path +\" redirect to URL :\" + this.location.absUrl(),\"DEBUG\")\n\t\t\t\t\t\t//this.browser.url(this.location.absUrl(), true);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.logger(\"FORWARD PATTERN : \"+ pattern + \"  NO ROUTE FIND  ==> CALL CONTROLLER\"  , \"DEBUG\")\n\t\t\t\t\t\tvar ret = resolver.callController(args);\t\n\t\t\t\t\t}\n\t\t\t\t}catch(e){\n\t\t\t\t\tthis.logger(\"FORWARD \"+ pattern +\" CALL CONTROLER  \"+ resolver.controller.name +\" : \"+e,\"ERROR\")\n\t\t\t\t\tthis.forward(\"appModule:app:500\", [e]);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.logger(\"Router Can't resolve : \"+pattern ,\"ERROR\");\n\t\t\t}\n\t\t\treturn false;\t\n\t\t};\n\t\t\n\t\tredirect (url){\n\t\t\tthis.location.url(url);\n\t\t\tthis.logger(\"REDIRECT URL : \"+ url  +\" BROWSER  URL :\" + this.location.absUrl(),\"DEBUG\")\n\t\t\tthis.browser.url(this.location.absUrl() , true);\n\t\t};\n\t\t\t\n\t\tgenerateUrl (name, variables, host){\n\t\t\tvar route =  this.getRoute(name) ;\n\t\t\tif (! route ){\n\t\t\t\tthis.logger(\"no route to host  :\"+ name, \"WARNING\")\n\t\t\t\t//throw {error:\"no route to host  \"+ name};\n\t\t\t\treturn null ; \n\t\t\t}\n\t\t\tvar path = route.path;\n\t\t\tif ( route.variables.length ){\n\t\t\t\tif (! variables  ){\n\t\t\t\t\tvar txt = \"\";\n\t\t\t\t\tfor (var i= 0 ; i < route.variables.length ;i++ ){\n\t\t\t\t\t\ttxt += \"{\"+route.variables[i]+\"} \";\n\t\t\t\t\t}\n\t\t\t\t\tthis.logger(\"router generate path route '\"+ name + \"' must have variable \"+ txt, \"ERROR\")\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tfor (var ele in variables ){\n\t\t\t\t\tif (ele === \"_keys\") continue ;\n\t\t\t\t\tvar index = route.variables.indexOf(ele);\n\t\t\t\t\tif ( index >= 0 ){\n\t\t\t\t\t\tpath = path.replace(\"{\"+ele+\"}\",  variables[ele]);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.logger(\"router generate path route '\"+ name + \"' don't  have variable \"+ ele, \"WARNING\")\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\t\n\t\t\t\t}\t\n\t\t\t}\n\t\t\tif (host){\n\t\t\t\treturn host+\"#\"+path ;\n\t\t\t}\n\t\t\treturn path ;\n\t\t}\n\t};\n\n\tstage.router = service ;\n\treturn service ; \n\n};\n","module.exports =  function(stage){\n\n\t'use strict';\n\n\tvar settingsSyslog = {\n\t\t//rateLimit:100,\n\t\t//burstLimit:10,\n\t\tmoduleName:\"SERVICE \",\n\t\tdefaultSeverity:\"INFO\"\n\t};\n\n\tvar defaultOptions = {\n\t};\n\n\n\tconst Service = class Service {\n\t\n\t\tconstructor(name, container, notificationsCenter, options ){\n\n\t\t\tif (name){\n\t\t\t\tthis.name = name ;\n\t\t\t}\n\t\t\toptions = stage.extend( {}, defaultOptions, options) ;\n\n\t\t\tif ( container instanceof stage.Container  ){\n\t\t\t\tthis.container = container ;\n\t\t\t}else{\n\t\t\t\tif ( container ){\n\t\t\t\t\tthrow new Error (\"Service stage container not valid must be instance of stage.Container\");\n\t\t\t\t}\n\t\t\t\tthis.container = new stage.Container(); \n\t\t\t\tthis.container.set(\"container\", this.container);\n\t\t\t}\n\t\t\tthis.kernel = this.container.get(\"kernel\");\n\t\t\tthis.syslog = this.container.get(\"syslog\");\n\t\t\tif ( ! this.syslog ){\n\t\t\t\tthis.settingsSyslog = stage.extend({}, settingsSyslog , {\n\t\t\t\t\tmoduleName: this.name\t\n\t\t\t\t},options.syslog || {} );\n\t\t\t\tthis.syslog = new stage.syslog( this.settingsSyslog );\t\n\t\t\t\tthis.set(\"syslog\", this.syslog);\n\t\t\t}else{\n\t\t\t\tthis.settingsSyslog = this.syslog.settings ;\t\n\t\t\t}\n\t\t\tif ( notificationsCenter instanceof stage.notificationsCenter.notification ){\n\t\t\t\tthis.notificationsCenter = notificationsCenter ;\n\t\t\t}else{\n\t\t\t\tif ( notificationsCenter ){\n\t\t\t\t\tthrow new Error (\"Service stage notificationsCenter not valid must be instance of stage.notificationsCenter.notification\");\n\t\t\t\t}\n\t\t\t\tthis.notificationsCenter = this.container.get(\"notificationsCenter\");\n\t\t\t\tif ( ! this.notificationsCenter ){\n\t\t\t\t\tthis.notificationsCenter = stage.notificationsCenter.create(options, this);\n\t\t\t\t\tif (! this.kernel ){\n\t\t\t\t\t\tthis.set(\"notificationsCenter\", this.notificationsCenter);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif ( this.kernel.container !== this.container ){\n\t\t\t\t\t\t\tthis.set(\"notificationsCenter\", this.notificationsCenter);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\t\n\t\t}\n\n\t\tgetName (){\n\t\t\treturn this.name;\n\t\t}\n\n\t\tclean(){\n\t\t\tthis.settingsSyslog = null ;\n\t\t\tdelete this.settingsSyslog ;\n\t\t\tthis.syslog = null  ;\n\t\t\tdelete this.syslog ;\n\t\t\tthis.removeAllListeners();\n\t\t\tthis.notificationsCenter = null ;\n\t\t\tdelete this.notificationsCenter ;\n\t\t\tthis.container = null ;\n\t\t\tdelete this.container ;\n\t\t\tthis.kernel = null ;\n\t\t\tdelete this.kernel ;\n\t\t}\n\t\n\t\tlogger(pci, severity, msgid,  msg){\n\t\t\ttry {\n\t\t\t\tif (! msgid) { msgid = \"SERVICE \" + this.name + \" \"; }\n\t\t\t\treturn this.syslog.logger(pci, severity, msgid,  msg);\t\n\t\t\t}catch(e){\n\t\t\t\tconsole.log(pci);\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t \t*\t@method fire\n\t \t*\t@param {String} event name \n\t \t*\t@param {Arguments} ... arguments to inject  \n         \t*/\n\t\tfire (){\n\t\t\t//this.logger(ev, \"DEBUG\", \"EVENT KERNEL\")\n\t\t\treturn this.notificationsCenter.fire.apply(this.notificationsCenter, arguments);\n\t\t}\n\n\t\t/**\n\t \t*\t@method listen\n\t \t*\t@param {Oject} context\n\t \t*\t@param {String} eventName\n\t \t*\t@param {Function} listener\n         \t*/\n\t\tlisten (){\n\t\t\treturn this.notificationsCenter.listen.apply(this.notificationsCenter, arguments);\n\t\t}\n\n\t\t/**\n\t \t*\t@method removeListener\n\t \t*\t@param {Oject} eventName \n\t \t*\t@param {String} listener\n         \t*/\n\t\tremoveListener (){\n\t\t\treturn this.notificationsCenter.unListen.apply(this.notificationsCenter, arguments);\n\t\t}\n\t\t\n\t\tunListen (){\n\t\t\treturn this.notificationsCenter.unListen.apply(this.notificationsCenter, arguments);\n\t\t}\n\n\n\t\t/**\n\t \t*\t@method removeAllListeners\n         \t*/\n\t\tremoveAllListeners (){\n\t\t\treturn this.notificationsCenter.clearNotifications.apply(this.notificationsCenter, arguments);\n\t\t}\n\n\t\t/**\n\t \t *\t@method get\n\t \t *\t@param {String} name of service\n         \t */\n\t\tget (name){\n\t\t\tif (this.container){\n\t\t\t\treturn this.container.get(name);\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\t/**\n\t \t*\t@method set\n\t \t*\t@param {String} name of service\n\t \t*\t@param {Object} instance of service\n         \t*/\n\t\tset (name, obj){\n\t\t\tif (this.container){\n\t\t\t\treturn this.container.set(name, obj);\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tgetParameters (){\n\t\t\treturn this.container.getParameters.apply(this.container , arguments);\n\t\t}\n\n\t\tsetParameters (){\n\t\t\treturn this.container.setParameters.apply(this.container ,arguments);\n\t\t}\n\n\t\thas (){\n\t\t\treturn this.container.has.apply(this.container ,arguments);\t\n\t\t}\n\t};\n\n\tstage.Service = Service;\t\n\treturn Service ;\n};\n","var Twig = require(\"twig\");\n\nmodule.exports =  function(stage){\n\n\t'use strict';\n\n\n\tvar translate = {};\n\n\n\tvar translateDispo = {\n\t\tfr_FR:\"français\",\n\t\ten_EN:\"english\"\n\t};\n\n\tvar regNavLang = /(..)-?.*/;\n\n\n\tvar service = class service extends stage.Service {\n\n\t\tconstructor(kernel, container){\n\n\t\t\tsuper(\"I18N\", container, container.get(\"notificationsCenter\"));\n\n\t\t\tthis.logger(\"INITIALIZE I18N SERVICE\", \"DEBUG\");\n\n\t\t\tthis.container.setParameters(\"translate\", translate);\n\t\t\tthis.defaultDomain = this.trans_default_domain();\n\t\t\tvar locale = navigator.language || navigator.userLanguage ;\n\t\t\tvar res = regNavLang.exec(locale);\n\t\t\tif (res){\n                                this.defaultLocale = res[1]+\"_\"+locale.toUpperCase();\n\t\t\t}else{\n\t\t\t\tthis.defaultLocale = \"fr_FR\";\t\n\t\t\t}\n\n                        translate[this.defaultLocale] = {};\n\n\t\t\tthis.listen(this, \"onBoot\",() => {\n\t\t\t\tthis.boot();\n\t\t\t})\t\n\t\t}\n\n\t\t\n\t\tboot (){\n\t\t\t//GET APP locale\n\t\t\tif ( this.kernel.modules.app &&  this.container.getParameters(\"module.app\") ){\n\t\t\t\tthis.defaultLocale = this.container.getParameters(\"module.app\").locale || this.defaultLocale;\n\t\t\t}\n\n\t\t\tif  ( ! translate[this.defaultLocale]){\n\t\t\t\ttranslate[this.defaultLocale] = {};\n\t\t\t}\n\n\t\t\tthis.logger(\"DEFAULT LOCALE APPLICATION ==> \" + this.defaultLocale ,\"DEBUG\");\n\t\t\tif (Twig){\n\t\t\t\tTwig.extendFunction(\"getLangs\", this.getLangs.bind(this));\n\t\t\t\tTwig.extendFunction(\"trans_default_domain\", this.trans_default_domain.bind(this));\n\t\t\t\tTwig.extendFilter(\"trans\", this.translation.bind(this));\n\t\t\t\tTwig.extendFunction(\"trans\", this.translation.bind(this));\n\t\t\t\tTwig.extendFilter(\"getLangs\", this.getLangs.bind(this));\n\t\t\t}\n\t\t}\n\n\t\tgetLangs (locale, data){\n\t\t\tvar obj = [];\n\t\t\tfor ( var ele in translateDispo){\n\t\t\t\tobj.push({\n\t\t\t\t\tname:translateDispo[ele],\n\t\t\t\t\tvalue:ele\n\t\t\t\t});\t\n\t\t\t}\n\t\t\treturn obj;\n\t\t}\n\n\n\t\tregisterI18n (name, locale, domain, data){\n\t\t\tif ( locale ){\n\t\t\t\tif( !translate[locale] )\n\t\t\t\t\ttranslate[locale] = stage.extend(true, {}, translate[this.defaultLocale]);\t\n\t\t\t}\n\t\t\tif ( domain ){\n\t\t\t\tif( !translate[locale][domain] ){\n\t\t\t\t\ttranslate[locale][domain] = stage.extend(true, {}, translate[this.defaultLocale][domain]);\n\t\t\t\t}\n\t\t\t\tstage.extend(true, translate[locale][domain], data);\t\t\n\t\t\t}else{\n\t\t\t\tstage.extend(true, translate[locale], data);\t\n\t\t\t} \n\t\t}\n\n\t\ttrans_default_domain (domain){\n\t\t\tif ( ! domain ){\n\t\t\t\treturn this.defaultDomain = \"messages\" ; \n\t\t\t}\n\t\t\treturn this.defaultDomain = domain ;\n\t\t}\n\n\t\t/*\n \t \t*\n \t \t*\n \t \t*\n \t \t*\n \t \t*/\n\t\ttranslation (value, args){\n\t\t\t\n\t\t\tvar defaulDomain = ( args && args[1] ) ? args[1] : this.defaultDomain ;\n\t\t\tvar str = this.container.getParameters(\"translate.\"+this.defaultLocale+\".\"+defaulDomain+\".\"+value) || value;\n\t\t\tif (args){\n\t\t\t\tif (args[0]){\n\t\t\t\t\tfor (var ele in args[0]){\n\t\t\t\t\t\tstr = str.replace(ele, args[0][ele]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn str;\n\t\t}\n\t};\n\n\tstage.i18n = service ;\n\n\treturn service;\n};\n","module.exports = function (stage) {\n\n  'use strict';\n\n  // UDPATER\n  let mediaStream = null;\n  let getMediaStream = null;\n\n  const updaterMedia = function () {\n    // MediaStream\tAPI\n    try {\n      if (stage.browser.Webkit) {\n        getMediaStream = function (stream) {\n          try {\n            return URL.createObjectURL(stream);\n          } catch (e) {\n            return stream;\n          }\n        };\n        mediaStream = webkitMediaStream;\n        // The representation of tracks in a stream is changed in M26.\n        // Unify them for earlier Chrome versions in the coexisting period.\n        if (!webkitMediaStream.prototype.getVideoTracks) {\n          webkitMediaStream.prototype.getVideoTracks = function () {\n            return this.videoTracks;\n          };\n          webkitMediaStream.prototype.getAudioTracks = function () {\n            return this.audioTracks;\n          };\n        }\n        return true;\n      }\n      if (stage.browser.Gecko) {\n\n        getMediaStream = function (stream) {\n          try {\n            return window.URL.createObjectURL(stream);\n          } catch (e) {\n            return stream;\n          }\n        };\n        mediaStream = MediaStream;\n        if (MediaStream && !MediaStream.prototype.getVideoTracks) {\n          MediaStream.prototype.getVideoTracks = function () {\n            return [];\n          };\n        }\n        if (MediaStream && !MediaStream.prototype.getAudioTracks) {\n          MediaStream.prototype.getAudioTracks = function () {\n            return [];\n          };\n        }\n        return true;\n      }\n      if (stage.browser.Opera) {\n        getMediaStream = function (stream) {\n          return stream;\n        };\n        if (!MediaStream.prototype.getVideoTracks) {\n          MediaStream.prototype.getVideoTracks = function () {\n            return [];\n          };\n        }\n        if (!MediaStream.prototype.getAudioTracks) {\n          MediaStream.prototype.getAudioTracks = function () {\n            return [];\n          };\n        }\n        return true;\n      }\n      console.error(\"Browser does not appear to be mediaStream-capable\");\n    } catch (e) {\n      console.error(e);\n    }\n  }();\n\n  /*\n   *\tMEDIA STREAM\n   *\n   */\n  const defaultSettingsStream = {\n    audio: true,\n    video: true\n  };\n\n  const MediaStream = class mediaStream {\n\n    constructor(mediaElement, settings) {\n      this.settings = stage.extend({}, defaultSettingsStream, settings);\n      this.notificationsCenter = stage.notificationsCenter.create(this.settings, this);\n      this.urlStream = null;\n      this.stream = this.settings.stream ? this.setStream(this.settings.stream) : null;\n      this.mediaElement = mediaElement ? mediaElement : null;\n      this.getMediaStream = getMediaStream;\n    }\n\n    getUserMedia(settings, success, error) {\n\n      if (settings) {\n        this.settings = stage.extend({}, defaultSettingsStream, settings);\n        this.notificationsCenter.settingsToListen(settings);\n      }\n      return navigator.getUserMedia({\n          video: this.settings.video,\n          audio: this.settings.audio\n        },\n        (stream) => {\n          this.setStream(stream);\n          if (success) {\n            success(this);\n          }\n          this.notificationsCenter.fire(\"onSucces\", stream, this);\n        },\n        (e) => {\n          if (error) {\n            error(e);\n          }\n          this.notificationsCenter.listen(this, \"onError\");\n        }\n      );\n    }\n\n    setStream(stream) {\n      this.stream = stream;\n      this.urlStream = this.getMediaStream(stream);\n      this.videotracks = this.getVideoTracks();\n      this.audiotracks = this.getAudioTracks();\n      return stream;\n    }\n\n    stop() {\n      if (this.stream) {\n        this.stream.stop();\n      }\n    }\n\n    attachMediaStream(element) {\n      this.mediaElement = element || this.mediaElement;\n      this.mediaElement.srcObject = this.stream;\n      this.mediaElement.play();\n      /*this.mediaElement.onloadedmetadata = (e) => {\n        if (e) {\n          this.notificationsCenter.fire(\"onError\", e);\n        }\n        this.mediaElement.play();\n      };*/\n    }\n\n    reattachMediaStream(stream) {\n      this.stream = stream;\n      this.attachMediaStream(this.mediaElement);\n    }\n\n    getVideoTracks() {\n      return this.stream.getVideoTracks();\n    }\n\n    getAudioTracks() {\n      return this.stream.getAudioTracks();\n    }\n\n    /*startRecording (stream){\n    \tvar mediaStreamSource = this.audioContext.createMediaStreamSource(stream);\n    \tconsole.log(mediaStreamSource);\n    \tmediaStreamSource.connect(this.audioContext.destination);\n    \tthis.recorder = new Recorder(mediaStreamSource);\n    }\n    stopRecording (){\n    \tthis.recorder.stop();\n    \tthis.recorder.exportWAV((stream) => {\n    \t\tthis.recordSource = window.URL.createObjectURL(stream);\n    \t});\n    }*/\n  };\n\n  stage.extend(stage.media, {\n    mediaStream: MediaStream,\n  });\n\n  return stage.media;\n};","module.exports = function (stage) {\n\n  'use strict';\n\n  let audioContext = null;\n\n  const webAudioApi = function () {\n    audioContext = window.AudioContext || window.webkitAudioContext;\n    if (audioContext) {\n      return true;\n    }\n    return false;\n  }();\n\n  /*\n   *\n   *\n   *\tMEDIA MIX\n   *\n   *\n   */\n  const mixSettings = {};\n\n  const mediaMix = class mediaMix {\n\n    constructor(settings) {\n\n      this.audioBus = {};\n      this.nbBus = 0;\n      this.settings = stage.extend({}, mixSettings, settings);\n      this.eventsManager = new stage.notificationsCenter.create(this.settings, this);\n\n      this.createAudioBus(\"MASTER\", {\n        panner: true,\n        analyser: true\n      });\n      this.masterBus = this.audioBus.MASTER;\n\n      this.tracks = this.masterBus.tracks;\n      this.audioContext = this.masterBus.audioContext;\n      this.muted = this.masterBus.muted;\n      this.panner = this.masterBus.audioNodes.panner;\n      this.analyserLeft = this.masterBus.audioNodes.analyserLeft;\n      this.analyserRight = this.masterBus.audioNodes.analyserRight;\n      this.gain = this.masterBus.audioNodes.gain;\n\n      this.connect(this.audioContext.destination);\n    }\n\n    listen() {\n      return this.eventsManager.listen.apply(this.eventsManager, arguments);\n    }\n\n    unListen() {\n      return this.eventsManager.unListen.apply(this.eventsManager, arguments);\n    }\n\n    fire() {\n      return this.eventsManager.fire.apply(this.eventsManager, arguments);\n    }\n\n    createAudioBus(name, settings) {\n      let bus = null;\n      try {\n        bus = new audioBus(name, this, settings);\n      } catch (e) {\n        throw e;\n      }\n      this.audioBus[name] = bus;\n      this.nbBus++;\n      bus.listen(this, \"onCreateTrack\", function (track, bus) {\n        this.fire(\"onCreateTrack\", track, bus, this);\n      });\n      bus.listen(this, \"onRemoveTrack\", function (track, bus) {\n        this.fire(\"onRemoveTrack\", track, bus, this);\n      });\n      return bus;\n    }\n\n    removeAudioBus(bus) {\n      var ele = null;\n      switch (true) {\n      case bus instanceof audioBus:\n\n        break;\n      case typeof track === \"number\":\n      case typeof track === \"string\":\n\n        break;\n      }\n      if (!ele) {\n        throw new Error(\"remove bus : this bus doesn't exist in  mixer  \");\n      }\n      return true;\n    }\n\n    connect(audioNode) {\n      this.destination = audioNode;\n      var ret = this.masterBus.connect(audioNode);\n      this.fire(\"onConnect\", audioNode, this);\n      return ret;\n    }\n\n    disconnect() {\n      this.masterBus.disconnect();\n      this.destination = null;\n      this.fire(\"onDisconnect\", this);\n    }\n\n    setGain(value) {\n      this.masterBus.setGain(value);\n      return this;\n    }\n\n    getGain() {\n      return this.masterBus.getGain();\n    }\n\n    mute() {\n      this.masterBus.mute();\n      this.muted = this.masterBus.muted;\n      return this;\n    }\n\n    unmute() {\n      this.masterBus.unmute();\n      this.muted = this.masterBus.muted;\n      return this;\n    }\n\n    createTrack(media, settings) {\n      return this.masterBus.createTrack(media, settings);\n    }\n\n    removeTrack(track) {\n      return this.masterBus.removeTrack(track);\n    }\n\n    playTracks(time, loop) {\n      for (var i = 0; i < this.tracks.length; i++) {\n        this.tracks[i].play(time, loop);\n      }\n    }\n\n    createGain() {\n      return this.audioContext.createGain();\n    }\n\n    createPanner() {\n      return this.audioContext.createPanner();\n    }\n\n    createStereoPanner() {\n      return this.audioContext.createStereoPanner();\n    }\n\n    createFilter() {\n      return this.audioContext.createBiquadFilter();\n    }\n\n    createAnalyser() {\n      return this.audioContext.createAnalyser();\n    }\n\n    createChannelSplitter(nbChannel) {\n      return this.audioContext.createChannelSplitter(nbChannel);\n    }\n\n    createChannelMerger(nbChannel) {\n      return this.audioContext.createChannelMerger(nbChannel);\n    }\n\n    createOscillator() {\n      return this.audioContext.createOscillator();\n    }\n  };\n\n  /*\n   *\n   *\tCLASS AUDIOBUS\n   *\n   */\n  const defaultAudioBusSettings = {\n    panner: false,\n    analyser: false\n  };\n\n  const audioBus = class audioBus {\n\n    constructor(name, mixer, settings) {\n      this.name = name;\n      this.mixer = mixer;\n      this.settings = stage.extend({}, defaultAudioBusSettings, settings);\n      this.eventsManager = stage.notificationsCenter.create(this.settings, this);\n      this.audioContext = new audioContext();\n      this.tracks = [];\n      this.nbTracks = 0;\n      this.audioNodes = {};\n      this.in = null;\n      this.out = null;\n      this.destination = null;\n      this.muted = false;\n      this.createNodes();\n    }\n\n    listen() {\n      return this.eventsManager.listen.apply(this.eventsManager, arguments);\n    }\n\n    unListen() {\n      return this.eventsManager.unListen.apply(this.eventsManager, arguments);\n    }\n\n    fire() {\n      return this.eventsManager.fire.apply(this.eventsManager, arguments);\n    }\n\n    createNodes() {\n      // mute\n      this.audioNodes.mute = this.createGain();\n      this.in = this.audioNodes.mute;\n\n      // gain\n      this.audioNodes.gain = this.createGain();\n      this.in.connect(this.audioNodes.gain);\n      this.out = this.audioNodes.gain;\n\n      // analyseur stéreo\n      if (this.settings.analyser) {\n        this.audioNodes.splitter = this.createChannelSplitter(2);\n        this.out.connect(this.audioNodes.splitter);\n        this.audioNodes.analyserLeft = this.createAnalyser();\n        this.audioNodes.analyserLeft.smoothingTimeConstant = 0.85;\n        this.audioNodes.splitter.connect(this.audioNodes.analyserLeft, 0, 0);\n\n        this.audioNodes.analyserRight = this.createAnalyser();\n        this.audioNodes.analyserRight.smoothingTimeConstant = 0.85;\n        this.audioNodes.splitter.connect(this.audioNodes.analyserRight, 1, 0);\n      }\n\n      // panoramique\n      if (this.settings.panner) {\n        this.audioNodes.panner = this.createStereoPanner();\n        this.out.connect(this.audioNodes.panner);\n        this.out = this.audioNodes.panner;\n      }\n    }\n\n    connect(audioNode) {\n      this.destination = audioNode;\n      this.out.connect(audioNode);\n      this.fire(\"onConnect\", audioNode, this);\n    }\n\n    disconnect() {\n      if (this.destination) {\n        this.out.disconnect(this.destination);\n        this.destination = null;\n        this.fire(\"onDisconnect\", this);\n      }\n    }\n\n    setGain(value) {\n      //this.audioNodes.gain.gain.value = value;\n      this.audioNodes.gain.gain.setValueAtTime(value, this.audioContext.currentTime + 1);\n      this.fire(\"onSetGain\", value);\n      return this;\n    }\n\n    getGain() {\n      return this.audioNodes.gain.gain.value;\n    }\n\n    mute() {\n      //this.audioNodes.mute.gain.value = 0;\n      this.audioNodes.mute.gain.setValueAtTime(0, this.audioContext.currentTime + 1);\n\n      this.muted = true;\n      this.fire(\"onMute\", this);\n      return this;\n    }\n\n    unmute() {\n      //this.audioNodes.mute.gain.value = 1;\n      this.audioNodes.mute.gain.setValueAtTime(1, this.audioContext.currentTime + 1);\n      this.muted = false;\n      this.fire(\"onUnMute\", this);\n      return this;\n    }\n\n    createGain() {\n      return this.audioContext.createGain();\n    }\n\n    createPanner() {\n      return this.audioContext.createPanner();\n    }\n\n    createStereoPanner() {\n      return this.audioContext.createStereoPanner();\n    }\n\n    createFilter() {\n      return this.audioContext.createBiquadFilter();\n    }\n\n    createAnalyser() {\n      return this.audioContext.createAnalyser();\n    }\n\n    createChannelSplitter(nbChannel) {\n      return this.audioContext.createChannelSplitter(nbChannel);\n    }\n\n    createChannelMerger(nbChannel) {\n      return this.audioContext.createChannelMerger(nbChannel);\n    }\n\n    createOscillator() {\n      return this.audioContext.createOscillator();\n    }\n\n    createMediaStreamDestination() {\n      var destination = this.audioContext.createMediaStreamDestination();\n      this.disconnect();\n      this.connect(destination);\n      return destination;\n    }\n\n    createTrack(media, settings) {\n      var track = new Track(media, this, settings);\n      this.tracks.push(track);\n      this.nbTracks++;\n      this.fire(\"onCreateTrack\", track, this);\n      return track;\n    }\n\n    removeTrack(track) {\n      let ele = null;\n      let name = null;\n      switch (true) {\n      case track instanceof Track:\n        for (let i = 0; i < this.tracks.length; i++) {\n          if (this.tracks[i] === track) {\n            name = track.name;\n            track.pause();\n            track.disconnect();\n            // remove from tab\n            ele = this.tracks.splice(i, 1);\n            this.nbTracks--;\n            this.fire(\"onRemoveTrack\", ele[0], this);\n            delete ele[0];\n            break;\n          }\n        }\n        break;\n      case typeof track === \"number\":\n      case typeof track === \"string\":\n        name = track;\n        for (let i = 0; i < this.tracks.length; i++) {\n          if (this.tracks[i].name === name) {\n            this.tracks[i].pause();\n            this.tracks[i].disconnect();\n            // remove from tab\n            ele = this.tracks.splice(i, 1);\n            this.nbTracks--;\n            this.fire(\"onRemoveTrack\", ele[0], this);\n            delete ele[0];\n            break;\n          }\n        }\n        break;\n      }\n      if (!ele) {\n        throw new Error(\"this track doesn't exist in  bus : \" + this.name);\n      }\n      return true;\n    }\n  };\n\n\n  /*\n   *\n   *\tTRACK\n   *\n   *\n   */\n  const trackSettings = {\n    gain: true,\n    panner: true,\n    filter: false,\n    analyser: false,\n    connect: true,\n  };\n\n  const Track = class Track {\n\n    constructor(media, bus, settings) {\n      this.media = media;\n      this.bus = bus;\n      this.settings = stage.extend({}, trackSettings, settings);\n      this.audioNodes = {};\n      this.audioBus = {};\n      this.transport = null;\n      this.context = bus.audioContext;\n\n      this.source = null;\n      this.buffer = null;\n      this.out = null;\n      this.in = null;\n\n      this.name = this.settings.name;\n      this.id = this.generateId();\n\n      this.sync = 0;\n      this.retry = 0;\n      this.ready = false;\n      this.muted = false;\n      this.currentTime = 0;\n      this.eventsManager = stage.notificationsCenter.create(this.settings, this);\n      this.createNodes();\n\n      if (this.settings.connect) {\n        this.connect(this.bus.in);\n      }\n\n      this.listen(this, \"onReady\", function () {\n        this.bus.mixer.fire('onReadyTrack', this.bus, this);\n      });\n\n      let type = stage.typeOf(media);\n      let error = null;\n      switch (type) {\n      case \"object\":\n        switch (true) {\n        case media instanceof stage.media.mediaStream:\n          this.mediaType = \"stream\";\n          this.buffer = media.stream;\n          this.url = stage.io.urlToOject(media.urlStream);\n          this.ready = true;\n          this.fire(\"onReady\", this);\n          break;\n        case media instanceof AudioNode:\n          this.mediaType = \"audioNode\";\n          this.buffer = media;\n          this.ready = true;\n          this.fire(\"onReady\", this);\n          break;\n        default:\n          error = new Error(\"media type not allowed \");\n          this.fire(\"onError\", error);\n          throw error;\n        }\n        break;\n      case \"element\":\n        this.mediaType = \"element\";\n        /*this.media.onloadstart = () => {\n        \tconsole.log(\"loadstart\");\n        }\n        this.media.onloadeddata = () => {\n        \tconsole.log(\"onloadeddata\");\n        }*/\n        this.media.oncanplay = () => {\n          this.connectSource(this.media);\n          this.ready = true;\n          this.fire(\"onReady\", this);\n        };\n        break;\n      case \"string\":\n        this.url = stage.io.urlToOject(media);\n        this.load(media);\n        break;\n      default:\n        error = new Error(\"Track media type error\");\n        this.fire(\"onError\", error);\n        throw error;\n      }\n    }\n\n    generateId() {\n      return parseInt(Math.random() * 1000000000, 10);\n    }\n\n    setName(name) {\n      this.name = name;\n    }\n\n    listen() {\n      return this.eventsManager.listen.apply(this.eventsManager, arguments);\n    }\n\n    unListen() {\n      return this.eventsManager.unListen.apply(this.eventsManager, arguments);\n    }\n\n    fire() {\n      return this.eventsManager.fire.apply(this.eventsManager, arguments);\n    }\n\n    createNodes() {\n\n      this.audioNodes.mute = this.bus.createGain();\n      this.in = this.audioNodes.mute;\n      this.out = this.audioNodes.mute;\n\n      if (this.settings.gain) {\n        this.audioNodes.gain = this.bus.createGain();\n        this.out.connect(this.audioNodes.gain);\n        this.out = this.audioNodes.gain;\n      }\n      if (this.settings.filter) {\n        this.audioNodes.filter = this.bus.createFilter();\n        this.out.connect(this.audioNodes.filter);\n        this.out = this.audioNodes.filter;\n      }\n\n      if (this.settings.panner) {\n        this.audioNodes.panner = this.bus.createStereoPanner();\n        this.out.connect(this.audioNodes.panner);\n        this.out = this.audioNodes.panner;\n      }\n      if (this.settings.analyser) {\n        this.audioNodes.analyser = this.bus.createAnalyser();\n        this.audioNodes.analyser.smoothingTimeConstant = 0.85;\n        this.out.connect(this.audioNodes.analyser);\n      }\n    }\n\n    setGain(value) {\n      //this.audioNodes.gain.gain.value = value;\n      this.audioNodes.gain.gain.setValueAtTime(value, this.context.currentTime + 1);\n      this.fire(\"onSetGain\", value);\n      return this;\n    }\n\n    getGain() {\n      return this.audioNodes.gain.gain.value;\n    }\n\n    mute() {\n      //this.audioNodes.mute.gain.value = 0;\n      this.audioNodes.mute.gain.setValueAtTime(0, this.context.currentTime + 1);\n      this.muted = true;\n      this.fire(\"onMute\", this);\n      return this;\n    }\n\n    unmute() {\n      //this.audioNodes.mute.gain.value = 1;\n      this.audioNodes.mute.gain.setValueAtTime(1, this.context.currentTime + 1);\n      this.muted = false;\n      this.fire(\"onUnMute\", this);\n      return this;\n    }\n\n    pause(when) {\n      switch (this.mediaType) {\n      case \"element\":\n        this.media.pause();\n        this.fire(\"onPause\", this);\n        break;\n      default:\n        if (this.source) {\n          if (this.source.node && this.source.playbackState === this.source.node.PLAYING_STATE) {\n            this.source.node.stop(when || 0);\n          }\n          this.disconnectSource();\n          this.fire(\"onPause\", this);\n        }\n      }\n      return this;\n    }\n\n    play(time, loop) {\n      switch (this.mediaType) {\n      case \"element\":\n        this.media.play();\n        this.fire(\"onPlay\", this);\n        break;\n      default:\n        this.pause().connectSource();\n        if (loop) {\n          this.source.loop = true;\n        }\n        if (this.source.noteOn) {\n          this.source.noteOn(this.context.currentTime, time);\n        }\n        if (this.source.start) {\n          this.source.start(this.context.currentTime, time);\n        }\n      }\n      this.fire(\"onPlay\", this);\n      return this;\n    }\n\n    connectSource() {\n      this.source = this.createSource();\n      this.source.connect(this.in);\n    }\n\n    disconnectSource() {\n      this.source.disconnect(this.in);\n      this.source = null;\n      this.fire(\"onDisconnectSource\", this);\n    }\n\n    connect(audioNode) {\n      this.destination = audioNode;\n      this.out.connect(audioNode);\n      this.fire(\"onConnect\", audioNode, this);\n    }\n\n    disconnect() {\n      this.out.disconnect(this.destination);\n      this.destination = null;\n      this.fire(\"onDisconnect\", this);\n    }\n\n    createSource(buffer) {\n      //console.log(arguments);\n      let source = null;\n      switch (this.mediaType) {\n      case \"audioNode\":\n        source = buffer ||  this.buffer;\n        break;\n      case \"video\":\n      case \"audio\":\n        source = this.context.createBufferSource();\n        source.buffer = buffer ||  this.buffer;\n        break;\n      case \"decode\":\n        this.rawBuffer = buffer;\n        this.urlStream = URL.createObjectURL(new Blob([this.rawBuffer]));\n        this.context.decodeAudioData(buffer,\n          (decoded) => {\n            this.buffer = decoded;\n            this.ready = true;\n            this.fire(\"onReady\", this);\n          },\n          (error) => {\n            this.eventsManager.fire(\"onError\", this, error);\n            // only on error attempt to sync on frame boundary\n            //if(this.syncStream()) this.createSource(type, buffer);\n          }\n        );\n        break;\n      case \"stream\":\n        source = this.context.createMediaStreamSource(buffer ||  this.buffer);\n        break;\n      case \"element\":\n        source = this.context.createMediaElementSource(this.media);\n        break;\n      }\n      return source;\n    }\n\n    syncStream() {\n      var buf8 = new Uint8Array(this.buffer);\n      Uint8Array.prototype.indexOf = Array.prototype.indexOf;\n      var i = this.sync,\n        b = buf8;\n      while (1) {\n        this.retry++;\n        //nodeGain\n        i = b.indexOf(0xFF, i);\n        if (i === -1 || (b[i + 1] & 0xE0 === 0xE0)) {\n          break;\n        }\n        i++;\n      }\n      if (i !== -1) {\n        var tmp = this.buffer.slice(i); //carefull there it returns copy\n        delete(this.buffer);\n        this.buffer = null;\n        this.buffer = tmp;\n        this.sync = i;\n        return true;\n      }\n      return false;\n    }\n\n    load(url) {\n      this.transport = new XMLHttpRequest();\n      this.transport.open(\"GET\", url, true);\n      this.transport.responseType = \"arraybuffer\";\n      this.transport.onload = () => {\n        // Asynchronously decode the audio file data in request.response\n        this.mediaType = \"decode\";\n        this.createSource(this.transport.response);\n        this.contentType = this.transport.getResponseHeader(\"content-type\").split(\";\")[0];\n        switch (this.contentType) {\n        case (/audio\\/.*/.test(this.contentType) ? this.contentType : null):\n          this.mediaType = \"audio\";\n          break;\n        case (/video\\/.*/.test(this.contentType) ? this.contentType : null):\n          this.mediaType = \"video\";\n          break;\n        }\n      };\n\n      this.transport.onerror = () => {\n        console.error('BufferLoader: XHR error');\n      };\n\n      this.transport.send();\n    }\n  };\n\n  stage.extend(stage.media, {\n    webAudioApi: webAudioApi,\n    mediaMix: mediaMix,\n    Track: Track,\n    audioBus: audioBus\n  });\n\n  return stage.media;\n};","'use strict';\n\nmodule.exports = function (stage) {\n\n  // CALLBACK SDP PARSER\n  const parseSdp = function (description) {\n    var sdpLines = description.sdp.split('\\r\\n');\n    var newline = \"\";\n    // Search for m line.\n    for (var i = 0; i < sdpLines.length; i++) {\n      var line = sdpLines[i];\n      switch (description.type) {\n      case \"offer\":\n        /*if (line.search('a=crypto') !== -1) {\n          console.log(\"PARSE SDP DELETE CRYPTO \");\n          continue ;\n        }*/\n        /*if (line.search('a=setup:actpass') !== -1) {\n          console.log(\"PARSE SDP REPLACE setup :  actpass by active  \");\n          line = line.replace(\"a=setup:actpass\", \"a=setup:active\")\n        }*/\n        break;\n      case \"answer\":\n        /*if (line.search('a=crypto') !== -1) {\n          console.log(\"PARSE SDP DELETE CRYPTO \");\n          continue ;\n        }*/\n        /*if (line.search('a=setup:actpass') !== -1) {\n          console.log(\"PARSE SDP REPLACE setup :  actpass by active  \");\n          line = line.replace(\"a=setup:actpass\", \"a=setup:active\")\n        }*/\n        break;\n      }\n      if (i === sdpLines.length - 1) {\n        newline += line;\n      } else {\n        newline += line + \"\\r\\n\";\n      }\n    }\n    description.sdp = newline;\n    return description;\n  };\n\n  /*\n   *\n   *  CLASS TRANSACTION WEBRTC\n   *\n   */\n  const Transaction = class Transaction extends stage.Service {\n    constructor(webrtc, from, to, dialog, settings) {\n      super(\"WEBRTC TRANSACTION\", webrtc.container, stage.notificationsCenter.create(settings || {}));\n      this.webrtc = webrtc;\n      //this.notificationsCenter = stage.notificationsCenter.create(settings || {}, this);\n      this.dialog = dialog ||  null;\n      this.error = null;\n      if (this.dialog) {\n        this.callId = this.dialog.callId;\n      }\n      this.protocol = webrtc.protocol;\n      this.from = from;\n      try {\n        if (to instanceof stage.media.userMedia) {\n          this.to = to;\n        } else {\n          this.to = new stage.media.userMedia(to, settings);\n        }\n      } catch (e) {\n        throw e;\n      }\n      this.asyncCandidates = this.webrtc.settings.asyncCandidates;\n\n      this.logger(\"CREATE TRANSATION WEBRTC\", \"DEBUG\");\n      this.RTCPeerConnection = this.createPeerConnection();\n      this.RTCPeerConnection.addStream(this.from.stream);\n\n      // MANAGE DTMF\n      this.dtmfSender = null;\n      if (this.webrtc.settings.dtmf) {\n        try {\n          this.initDtmfSender(this.from.stream);\n          this.webrtc.listen(this, \"onKeyPress\", this.sendDtmf);\n          // FIXME TRY TO RECEIVE DTMF RTP-EVENT\n          /*this.webrtc.listen(this, \"onRemoteStream\",function(event, mediaStream, transaction){\n            this.logger( \"DTMF setRemoteStream\", \"DEBUG\")\n            this.initDtmfReceiver( this.from.stream );\n          });*/\n        } catch (e) {\n          this.webrtc.logger(e, \"ERROR\");\n          throw e;\n        }\n      }\n\n      // MANAGE CANDIDATES\n      this.candidates = [];\n      this.listen(this, \"onIcecandidate\", function (transaction, candidates, peerConnection) {\n        //console.log(\" onIcecandidate : \" + peerConnection.localDescription.type )\n        let to = null;\n        if (this.asyncCandidates && this.candidates.length) {\n          //console.log( message.dailog)\n          to = this.dialog.to.replace(\"<sip:\", \"\").replace(\">\", \"\");\n          this.logger(\"CANDIDATE TO\" + to, \"DEBUG\");\n          this.logger(\"CANDIDATE TO\" + this.to.name, \"DEBUG\");\n          this.dialog.invite(to, JSON.stringify(this.candidates), \"ice/candidate\");\n        } else {\n          if (peerConnection.localDescription.type === \"offer\") {\n            this.sessionDescription = parseSdp.call(this, peerConnection.localDescription);\n            if (this.dialog) {\n              to = this.dialog.to.replace(\"<sip:\", \"\").replace(\">\", \"\");\n              this.logger(\"CANDIDATE TO\" + to, \"DEBUG\");\n              this.logger(\"CANDIDATE TO\" + this.to.name, \"DEBUG\");\n              this.dialog.invite(to, this.sessionDescription);\n            } else {\n              this.dialog = this.webrtc.protocol.invite(this.to.name, this.sessionDescription);\n              this.callId = this.dialog.callId;\n              this.webrtc.fire(\"onInvite\", this, this.to, this.sessionDescription);\n            }\n          }\n          if (peerConnection.localDescription.type === \"answer\") {\n            this.sessionDescription = peerConnection.localDescription;\n            if (this.sessionDescription && !(this.error)) {\n              this.fire(\"onCreateAnwser\", this.to, this.sessionDescription, this, this.dialog);\n            }\n          }\n        }\n      });\n\n      this.listen(this, \"onCreateAnwser\", function (to, sessionDescription, webrtcTransaction, diag) {\n        var response = this.dialog.currentTransaction.createResponse(200, \"OK\", this.sessionDescription.sdp, \"application/sdp\");\n        response.send();\n      });\n    }\n\n    createPeerConnection() {\n      try {\n        // CREATE PeerConnection\n        this.logger(this.webrtc.settings.optional, \"DEBUG\");\n        //console.log(this.webrtc.settings.optional)\n        this.RTCPeerConnection = new RTCPeerConnection(this.webrtc.settings.optional);\n\n        // MANAGE EVENT CANDIDATES\n        this.RTCPeerConnection.onicecandidate = (event) => {\n          // FIX firefox fire many time onicecandidate  iceGatheringState === complete\n          let old = this.iceGatheringState;\n          if (event.target) {\n            this.iceGatheringState = event.target.iceGatheringState || this.RTCPeerConnection.iceGatheringState;\n          } else {\n            this.iceGatheringState = this.RTCPeerConnection.iceGatheringState;\n          }\n          let type = this.RTCPeerConnection.localDescription.type;\n          //console.log(this.iceGatheringState)\n          //console.log(type)\n          if (type === \"offer\" && this.iceGatheringState === 'complete' && old !== \"complete\") {\n            //console.log(\"PASSS CANDIDATE\")\n            this.fire(\"onIcecandidate\", this, this.candidates, this.RTCPeerConnection);\n          } else if (event && event.candidate === null) {\n            // candidates null !!!\n          } else {\n            this.logger(\"WEBRTC : ADD CANDIDATE\", \"DEBUG\");\n            if (event.candidate) {\n              this.candidates.push(event.candidate);\n            }\n            if (type === \"answer\") {\n              this.fire(\"onIcecandidate\", this, this.candidates, this.RTCPeerConnection);\n              this.RTCPeerConnection.onicecandidate = null;\n            }\n          }\n        };\n\n        // MANAGE STREAM\n        this.RTCPeerConnection.onaddstream = (event) => {\n          //console.log(event)\n          this.setRemoteStream(event);\n          this.logger(\"WEBRTC : ADD STREAM \", \"DEBUG\");\n        };\n        return this.RTCPeerConnection;\n      } catch (e) {\n        this.logger(e, \"ERROR\");\n        this.webrtc.fire(\"onError\", this, e);\n      }\n    }\n\n    // FIXME TRY TO RECEIVE DTMF RTP-EVENT\n    /*initDtmfReceiver (mediaStream){\n      console.log(this.RTCPeerConnection)\n      if ( ! this.RTCPeerConnection.createDTMFSender ) {\n        throw new Error(\" RTCPeerConnection method createDTMFSender() !!!! which is not support by this browser\");\n      }\n        if (mediaStream !== null) {\n        try {\n          var remoteAudioTrack = mediaStream.getAudioTracks()[0];\n          var dtmfSender = this.RTCPeerConnection.createDTMFSender(remoteAudioTrack);\n          dtmfSender.ontonechange = (tone) => {\n            this.logger(\"dtmfOnToneChange\", \"DEBUG\") ;\n            this.webrtc.fire(\"dtmfOnToneChange\", tone , this);\n          };\n        }catch(e){\n          throw e ;\n        }\n\n        } else {\n        throw new Error( 'No local stream to create DTMF Sender', 500)\n        }\n    }*/\n\n    initDtmfSender(mediaStream) {\n\n      switch (this.webrtc.settings.dtmf) {\n      case \"SIP-INFO\":\n        var func = function () {};\n        func.prototype.insertDTMF = (key, duration, gap) => {\n          var description = \"Signal=\" + key + \"\\nDuration=\" + duration;\n          var type = \"application/dtmf-relay\";\n          this.dialog.info(description, type);\n        };\n        this.dtmfSender = new func();\n        break;\n      case \"RTP-EVENT\":\n        if (!this.RTCPeerConnection.createDTMFSender) {\n          throw new Error(\" RTCPeerConnection method createDTMFSender() !!!! which is not support by this browser\", 500);\n        }\n        if (mediaStream !== null) {\n          var localAudioTrack = mediaStream.getAudioTracks()[0];\n          this.dtmfSender = this.RTCPeerConnection.createDTMFSender(localAudioTrack);\n          this.dtmfSender.ontonechange = (tone) => {\n            this.webrtc.fire(\"dtmfOnToneChange\", tone, this);\n          };\n\n        } else {\n          throw new Error('No local stream to create DTMF Sender', 500);\n        }\n        break;\n      }\n    }\n\n    sendDtmf(code, key, event) {\n      if (this.dialog.status !== this.dialog.statusCode.ESTABLISHED) {\n        return;\n      }\n      if (this.dtmfSender) {\n        var duration = 500;\n        var gap = 50;\n        this.logger('DTMF SEND ' + key + '  duration :  ' + duration + ' gap :  ' + gap, \"DEBUG\");\n        return this.dtmfSender.insertDTMF(key, duration, gap);\n      }\n      throw new Error(\" DTMF SENDER not ready\");\n    }\n\n    createOffer() {\n      return this.RTCPeerConnection.createOffer((sessionDescription) => {\n          try {\n            this.sessionDescription = parseSdp.call(this, sessionDescription);\n            this.from.setDescription(this.RTCPeerConnection.setLocalDescription(this.sessionDescription, () => {\n                // ASYNC CANDIDATES\n                if (this.asyncCandidates) {\n                  // INVITE\n                  this.dialog = this.webrtc.protocol.invite(this.to.name, this.sessionDescription);\n                  this.callId = this.dialog.callId;\n                  this.webrtc.fire(\"onInvite\", this, this.to, this.sessionDescription);\n                } else {\n                  // SYNC CANDIDATES\n                  /*this.webrtc.listen(this, \"onIcecandidate\" , function(transaction, candidates, peerConnection){\n                    if ( peerConnection.localDescription.type == \"offer\" ){\n                      this.sessionDescription = parseSdp.call(this, peerConnection.localDescription ) ;\n                      if ( this.dialog ){\n                        var to = this.dialog.to.replace(\"<sip:\", \"\").replace(\">\",\"\") ;\n                        this.dialog.invite(to, this.sessionDescription);\n                      }else{\n                        this.dialog = this.webrtc.protocol.invite(this.to.name, this.sessionDescription);\n                        this.webrtc.fire(\"onInvite\", this, this.to.name, this.sessionDescription );\n                        this.callId = this.dialog.callId ;\n                      }\n                    }\n                  })*/\n                }\n              },\n              (error) => {\n                this.error = error;\n                this.webrtc.fire(\"onError\", this, error);\n              }));\n          } catch (e) {\n            throw e;\n          }\n        },\n        (error) => {\n          this.webrtc.fire(\"onError\", this, error);\n        },\n        this.from.settings.constraintsOffer);\n    }\n\n    setRemoteStream(event) {\n      if (event) {\n        //console.log(event.stream.getVideoTracks());\n        this.to.createMediaStream(null, null);\n        this.to.mediaStream.setStream(event.stream);\n        var type = this.RTCPeerConnection.remoteDescription.type;\n        if (event.type === \"video\" ||  event.type === \"addstream\") {\n          this.webrtc.notificationsCenter.fire(\"onRemoteStream\", type, event, this.to.mediaStream, this);\n        }\n      }\n      return this.to.createMediaStream;\n    }\n\n    setRemoteDescription(type, user, description, dialog) {\n      //console.log(\"setRemoteDescription\")\n      this.currentTransaction = dialog.currentTransaction;\n      let desc = {\n        type: type,\n        sdp: description\n      };\n      //console.log( desc );\n      let remoteDesc = parseSdp.call(this, desc);\n      let ClassDesc = new RTCSessionDescription(remoteDesc);\n\n      this.remoteDescription = this.RTCPeerConnection.setRemoteDescription(\n        ClassDesc,\n        () => {\n          if (this.RTCPeerConnection.remoteDescription.type === \"offer\") {\n            //console.log(\"WEBRTC : onRemoteDescription \");\n            //this.doAnswer(dialog);\n            this.webrtc.fire(\"onOffer\", this.webrtc, this);\n            this.webrtc.fire(\"onRemoteDescription\", this.from, this, this.to);\n          } else {\n            this.webrtc.fire(\"onOffHook\", this, dialog);\n          }\n        },\n        (error) => {\n          this.error = error;\n          this.webrtc.fire(\"onError\", this, error);\n        }\n      );\n      return this.remoteDescription;\n    }\n\n    doAnswer(dialog) {\n      return this.RTCPeerConnection.createAnswer(\n        (sessionDescription) => {\n          this.from.setDescription(sessionDescription);\n          this.RTCPeerConnection.setLocalDescription(sessionDescription, () => {\n              this.sessionDescription = sessionDescription;\n              if (this.asyncCandidates) {\n                this.fire(\"onCreateAnwser\", this.to, this.sessionDescription, this, dialog);\n              }\n              this.webrtc.fire(\"onOffHook\", this, dialog);\n            },\n            (error) => {\n              this.error = error;\n              this.webrtc.fire(\"onError\", this, error);\n            });\n        },\n        // error\n        (e) => {\n          this.error = e;\n          this.webrtc.fire(\"onError\", this, e);\n        },\n        this.from.settings.constraints\n      );\n    }\n\n    bye() {\n      if (this.dialog) {\n        this.dialog.bye();\n      }\n    }\n\n    cancel() {\n      if (this.currentTransaction) {\n        this.currentTransaction.cancel();\n      }\n      this.webrtc.closeTransaction(this, this.to.name);\n    }\n\n    decline() {\n      if (this.currentTransaction) {\n        this.currentTransaction.decline();\n      }\n      this.webrtc.closeTransaction(this, this.to.name);\n    }\n\n    close() {\n      this.logger(\"WEBRTC CLOSE TRANSACTION  : \" + this.callId, \"DEBUG\");\n      if (this.RTCPeerConnection) {\n        this.RTCPeerConnection.close();\n      } else {\n        this.logger(\"WEBRTC  TRANSACTION ALREADY CLOSED : \" + this.callId, \"WARNING\");\n      }\n      if (this.webrtc) {\n        this.webrtc.unListen(\"onKeyPress\", this.sendDtmf);\n      }\n      this.clear();\n      return this;\n    }\n\n    clear() {\n      if (this.RTCPeerConnection) {\n        this.RTCPeerConnection = null;\n        delete this.RTCPeerConnection;\n      }\n      if (this.webrtc) {\n        this.webrtc = null;\n        delete this.webrtc;\n      }\n      if (this.currentTransaction) {\n        this.currentTransaction = null;\n        delete this.currentTransaction;\n      }\n      if (this.candidates) {\n        this.candidates = null;\n        delete this.candidates;\n      }\n      if (this.dialog) {\n        this.dialog = null;\n        delete this.dialog;\n      }\n      if (this.from) {\n        this.from = null;\n        delete this.from;\n      }\n      if (this.to) {\n        this.to = null;\n        delete this.to;\n      }\n      if (this.error) {\n        this.error = null;\n        delete this.error;\n      }\n    }\n  };\n\n  stage.extend(stage.media, {\n    webrtcTransaction: Transaction\n  });\n  return Transaction;\n\n};","'use strict';\nmodule.exports = function (stage) {\n\n  /*\n   *\n   *  CLASS USER\n   *\n   */\n  const userSettings = {\n    constraintsOffer: {\n      mandatory: {\n        'OfferToReceiveAudio': true,\n        'OfferToReceiveVideo': true\n      }\n    },\n    //constraintsOffer: stage.browser.Gecko ? {'mandatory': {'MozDontOfferDataChannel':true}} : null\n    displayName: \"\"\n  };\n\n  const User = class User {\n\n    constructor(userName, settings) {\n      this.name = userName;\n\n      this.settings = stage.extend(true, {}, userSettings, settings);\n\n      this.displayName = this.settings.displayName || userName;\n\n      this.audio = this.settings.constraintsOffer.mandatory.OfferToReceiveAudio;\n      this.video = this.settings.constraintsOffer.mandatory.OfferToReceiveVideo;\n      this.mediaStream = null;\n      this.description = \"\";\n\n    }\n\n    createMediaStream(succesCallback, errorMedia) {\n      this.mediaStream = new stage.media.mediaStream(null, {\n        audio: this.audio,\n        video: this.video,\n        onSucces: succesCallback,\n        onError: errorMedia\n      });\n      return this.mediaStream;\n    }\n\n    setDescription(desc) {\n      this.description = desc;\n    }\n  };\n\n  stage.extend(stage.media, {\n    userMedia: User\n  });\n  return User;\n};","'use strict';\nmodule.exports = function (stage) {\n\n  /*\n   *\n   *  CLASS WEBRTC\n   *\n   */\n  const defaultSettings = {\n    audio: true,\n    video: true,\n    protocol: \"SIP\",\n    sipPort: 5060,\n    sipTransport: \"WSS\",\n    dtmf: \"SIP-INFO\", // \"SIP-INFO\", \"RTP-EVENT\"\n    /*\n     * STUN  => { iceServers: [{ url: ! stage.browser.Gecko ? 'stun:stun.l.google.com:19302' : 'stun:23.21.150.121'}] }\n     * TURN  => { iceServers: [{ url: \"turn:webrtc%40live.com@numb.viagenie.ca\", credential: \"\"}] }\n     */\n    iceServers: [],\n     \n    optional: stage.browser.Gecko ? {\n      'DtlsSrtpKeyAgreement': 'true'\n    } : {\n      'DtlsSrtpKeyAgreement': 'true',\n      'rtcpMuxPolicy': 'negotiate'\n    },\n    asyncCandidates: false\n  };\n\n\n  const WebRtc = class WebRtc extends stage.Service {\n\n    constructor(server, transport, settings) {\n\n      super(\"WEBRTC\", null, null, settings);\n      this.settings = stage.extend(true, {}, defaultSettings, settings);\n      this.settings.optional.iceServers = this.settings.iceServers;\n      this.protocol = null;\n      this.socketState = \"close\";\n      this.transactions = {};\n      //this.users = {};\n      this.transport = this.connect(transport);\n      if (this.transport && this.transport.publicAddress) {\n        this.publicAddress = this.transport.publicAddress;\n        //this.publicAddress = server;\n        //this.publicAddress = this.transport.domain;\n      }\n      this.server = server;\n      this.init();\n    }\n\n    init() {\n      delete this.protocol;\n      this.protocol = null;\n\n      // EVENTS WEBRTC\n      this.listen(this, \"onInvite\", function (transaction, userTo, description) {\n        this.transactions[transaction.callId] = transaction;\n      });\n\n      this.listen(this, \"onOffer\", function (webrtc, transaction) {\n        this.transactions[transaction.callId] = transaction;\n      });\n\n      this.listen(this, \"onAccept\", function (webrtc, transac) {\n        transac.doAnswer(transac.dialog);\n        //transac.setRemoteDescription(\"offer\", transac.to, transac.to.description, transac.dialog);\n      });\n\n      this.listen(this, \"onDeclineOffer\", function (webrtc, transac) {\n\n        var ret = transac.dialog.currentTransaction.createResponse(\n          603,\n          \"Declined\"\n        );\n        ret.send();\n\n        /*var ret = message.transaction.createResponse(\n          603,\n          \"Declined\"\n        );\n        ret.send();*/\n        this.closeTransaction(transac);\n      });\n\n      // MANAGE PROTOCOL\n      switch (this.settings.protocol) {\n      case \"SIP\":\n        this.protocol = new stage.io.protocols.sip(this.server, this.transport, {\n          portServer: this.settings.sipPort,\n          transport: this.settings.sipTransport,\n        });\n\n        this.protocol.listen(this, \"onRegister\", function (sip, message) {\n          switch (message.code) {\n          case 200:\n            this.user.createMediaStream((stream) => {\n              this.user.stream = stream;\n              this.notificationsCenter.fire(\"onMediaSucces\", this.user.mediaStream, this.user);\n            }, (e) => {\n              this.notificationsCenter.fire(\"onError\", this, e);\n            });\n            this.notificationsCenter.fire(\"onRegister\", this.user, this);\n            break;\n          default:\n            this.notificationsCenter.fire(\"onError\", this.protocol, message);\n            break;\n          }\n        });\n\n        this.protocol.listen(this, \"onUnRegister\", function (sip, message) {\n          this.fire(\"onUnRegister\", sip, message);\n        });\n\n        this.protocol.listen(this, \"onRinging\", function (sip, message) {\n          var transaction = this.transactions[message.callId];\n          if (transaction) {\n            this.notificationsCenter.fire(\"onRinging\", message.toName, transaction);\n          }\n        });\n\n        this.protocol.listen(this, \"onTrying\", function (sip, message) {\n          var transaction = this.transactions[message.callId];\n          if (transaction) {\n            this.notificationsCenter.fire(\"onTrying\", message.toName, transaction);\n          }\n        });\n\n        this.protocol.listen(this, \"onInfo\", function (message) {\n          var transaction = this.transactions[message.callId];\n          //console.log(message);\n          if (message.contentType === \"application/dtmf-relay\") {\n            this.fire(\"onDtmf\", message.body.dtmf, transaction);\n          }\n        });\n\n        this.protocol.listen(this, \"onCancel\", function (message) {\n          var transaction = this.transactions[message.callId];\n          if (transaction) {\n            this.notificationsCenter.fire(\"onCancel\", message.body.body, transaction);\n            this.closeTransaction(transaction, message.fromName);\n          }\n        });\n\n        this.protocol.listen(this, \"onInvite\", function (message, dialog) {\n          let res = null;\n          let transac = null;\n          switch (message.header[\"Content-Type\"]) {\n          case \"application/sdp\":\n            if (message.rawBody) {\n\n              if (dialog.status === dialog.statusCode.INITIAL) {\n\n                // TODO MANAGE MULTI CALL\n                res = message.transaction.createResponse(100, \"trying\");\n                res.send();\n\n                // transaction WEBRTC\n                try {\n                  transac = this.createTransaction(message.fromName, dialog, {\n                    displayName: message.fromNameDisplay || \"\"\n                  });\n                  transac.to.setDescription(message.rawBody);\n                } catch (e) {\n                  res = message.transaction.createResponse(500, e.message || e);\n                  res.send();\n                  return;\n                }\n\n                res = message.transaction.createResponse(180, \"Ringing\");\n                res.send();\n\n                try {\n                  transac.setRemoteDescription(\"offer\", transac.to, transac.to.description, transac.dialog);\n                } catch (e) {\n                  res = message.transaction.createResponse(500, e.message || e);\n                  res.send();\n                }\n\n                return;\n              }\n              if (dialog.status === dialog.statusCode.ESTABLISHED) {\n                // HOLD THE LINE\n                message.transaction.decline();\n              }\n            }\n            break;\n          case \"ice/candidate\":\n            if (message.rawBody) {\n              var transaction = this.transactions[message.callId];\n              let ret = null;\n              if (!transaction) {\n                ret = message.transaction.createResponse(500, \"no transaction \");\n                ret.send();\n                return;\n              }\n              res = JSON.parse(message.rawBody);\n              ret = message.transaction.createResponse(100, \"trying\");\n              ret.send();\n              for (let i = 0; i < res.length; i++) {\n                var candidate = new RTCIceCandidate(res[i]);\n                transaction.RTCPeerConnection.addIceCandidate(candidate,\n                  () => {\n                    this.logger(\"WEBRTC remote CANDIDATES   \" + res[i].candidate, \"DEBUG\");\n                  },\n                  (e) => {\n                    console.log(e);\n                    this.logger(\"WEBRTC Error CANDIDATES \" + res[i].candidate, \"ERROR\");\n                  }\n                );\n              }\n              if (transaction.candidates.length) {\n                ret = message.transaction.createResponse(200, \"OK\", JSON.stringify(transaction.candidates), \"ice/candidate\");\n                ret.send();\n                transaction.candidates = [];\n              } else {\n                ret = message.transaction.createResponse(200, \"OK\");\n                ret.send();\n                //transaction.candidates= [];\n                /*this.listen(this, \"onIcecandidate\" , function(transaction, candidates, peerConnection){\n                  var ret = message.transaction.createResponse(200, \"OK\", JSON.stringify(transaction.candidates), \"ice/candidate\");\n                  ret.send();\n                  transaction.candidates= [];\n                });*/\n              }\n            }\n            break;\n          default:\n            this.notificationsCenter.fire(\"onError\", this.protocol, message);\n\n          }\n        });\n\n        this.protocol.listen(this, \"onTimeout\", function (sip, message) {\n          this.notificationsCenter.fire(\"onTimeout\", message.method, 408, message);\n          var transac = this.transactions[message.callId];\n          if (transac) {\n            this.closeTransaction(transac, transac.to.name);\n          }\n        });\n\n        this.protocol.listen(this, \"onDecline\", function (message) {\n          if (message.callId in this.transactions) {\n            var transac = this.transactions[message.callId];\n            this.fire(\"onDecline\", this, transac);\n            this.closeTransaction(transac);\n          }\n        });\n\n        this.protocol.listen(this, \"onError\", function (Class, message) {\n          this.notificationsCenter.fire(\"onError\", Class, message);\n          var transac = this.transactions[message.callId];\n          if (transac) {\n            this.closeTransaction(transac, transac.to.name);\n          }\n        });\n\n        this.protocol.listen(this, \"onQuit\", function (protocol) {\n          this.fire(\"onQuit\", this);\n          this.close();\n        });\n\n        this.protocol.listen(this, \"onInitCall\", function (to, dialog, transaction) {\n          if (dialog.callId in this.transactions) {\n            var transac = this.transactions[dialog.callId];\n            transac.currentTransaction = transaction;\n            this.notificationsCenter.fire(\"onInitCall\", transac);\n          }\n        });\n\n        this.protocol.listen(this, \"onBye\", function (message) {\n          let transac = null;\n          let name = null;\n          if (message.callId in this.transactions) {\n            transac = this.transactions[message.callId];\n            name = message.fromName;\n          }\n          if (transac) {\n            this.notificationsCenter.fire(\"onOnHook\", transac, message);\n            this.closeTransaction(transac, name);\n          } else {\n            // WHEN USER LOCAL STOP REGISTRATION\n            if (message.fromName === this.user.name) {\n              this.close();\n            }\n          }\n        });\n\n        this.protocol.listen(this, \"onCall\", function (message) {\n          var transac = this.transactions[message.callId];\n          if (message.toNameDisplay) {\n            transac.to.displayName = message.toNameDisplay;\n          }\n          //var from = this.users[message.toName];\n          if (message.dialog.status === message.dialog.statusCode.EARLY && message.header[\"Content-Type\"] === \"application/sdp\") {\n            this.notificationsCenter.fire(\"onAnwer\", message);\n            transac.to.setDescription(message.rawBody);\n            transac.setRemoteDescription(\"answer\", transac.to, message.rawBody, message.dialog);\n            /*if ( this.settings.asyncCandidates && transac.candidates.length){\n              //console.log( message.dailog)\n              message.dialog.invite(message.to, JSON.stringify(transac.candidates), \"ice/candidate\")\n            }*/\n            //this.notificationsCenter.fire( \"onOffHook\", transac , message );\n          } else {\n\n          }\n          if (message.header[\"Content-Type\"] === \"ice/candidate\") {\n            if (transac.candidates.length) {\n              var res = JSON.parse(message.rawBody);\n              for (let i = 0; i < res.length; i++) {\n                var candidate = new RTCIceCandidate(res[i]);\n                transac.RTCPeerConnection.addIceCandidate(candidate,\n                  () => {\n                    //console.log(\"Succes Candidate\")\n                    this.logger(\"WEBRTC ADD remote CANDIDATES :  \" + res[i].candidate);\n                  },\n                  (e) => {\n                    console.log(e);\n                    this.logger(\"WEBRTC Error CANDIDATES \" + res[i].candidate, \"ERROR\");\n                  }\n                );\n              }\n            }\n          }\n        });\n\n        this.protocol.listen(this, \"onMessage\", function (message) {\n          this.fire(\"onMessage\", message);\n        });\n\n        this.protocol.listen(this, \"onSend\", function (message) {\n          this.fire(\"onSend\", message);\n        });\n\n        this.listen(this, \"onError\", function (Class, error) {\n          switch (true) {\n          case (Class instanceof WebRtc):\n            break;\n          case (Class instanceof stage.media.webrtcTransaction):\n            //console.log(Class.currentTransaction )\n            if (Class.currentTransaction) {\n              var response = Class.currentTransaction.createResponse(500, error.message || error);\n              response.send();\n            }\n            this.closeTransaction(Class, Class.to.name);\n            break;\n          case (Class instanceof Error):\n            break;\n          }\n        });\n        break;\n      default:\n        throw new Error(\"WEBRTC Protocol not found \");\n      }\n    }\n\n    connect(transport) {\n      //console.log(transport instanceof stage.realtime  )\n      if (transport) {\n        transport.listen(this, \"onConnect\", function () {\n          this.socketState = \"open\";\n        });\n        transport.listen(this, \"onClose\", function () {\n          this.socketState = \"close\";\n        });\n        return transport;\n      }\n    }\n\n    createTransaction(userTo, dialog, settings) {\n      try {\n        let transaction = new stage.media.webrtcTransaction(this, this.user, userTo, dialog, settings);\n        return transaction;\n      } catch (e) {\n        this.fire(\"onError\", this, e);\n        throw e;\n      }\n    }\n\n    unRegister() {\n      if (this.protocol) {\n        this.protocol.unregister();\n      }\n      //console.log( \"WEBRTC unregister\")\n      this.close();\n    }\n\n    register(userName, password, settings) {\n      this.user = new stage.media.userMedia(userName, settings);\n      this.protocol.register(userName, password, settings);\n    }\n\n\n    createOffer(userTo) {\n      var to = new stage.media.userMedia(userTo);\n      //this.users[userTo] = to ;\n      var transac = this.createTransaction(to);\n      transac.createOffer();\n      return transac;\n    }\n\n    acceptOffer(transaction) {\n      this.fire(\"onAccept\", this, transaction);\n      return transaction;\n    }\n\n    declineOffer(transaction) {\n      this.fire(\"onDeclineOffer\", this, transaction);\n      return transaction;\n    }\n\n    closeTransaction(transation, name) {\n      if (transation) {\n        transation.close();\n        delete this.transactions[transation.callId];\n        //delete this.users[name];\n      }\n    }\n\n    close() {\n      this.fire(\"onClose\", this);\n      setTimeout(() => {\n        this.clean();\n      }, 2000);\n    }\n\n    clean() {\n      this.cleanTransactions();\n      if (this.protocol) {\n        this.protocol.clear();\n        this.protocol = null;\n        delete this.protocol;\n      }\n      this.notificationsCenter.clearNotifications();\n    }\n\n    cleanTransactions() {\n      for (let trans in this.transactions) {\n        try {\n          this.transactions[trans].bye();\n          this.transactions[trans].close();\n        } catch (e) {\n          this.logger(e, \"ERROR\");\n        }\n        delete this.transactions[trans];\n      }\n    }\n\n    quit() {\n      this.protocol.bye();\n    }\n  };\n\n  stage.media.webrtc = WebRtc;\n  return WebRtc;\n};","module.exports =  function(stage){\n\n\t'use strict';\n\n\n\tvar ea = function(){\n\t\tif (stage.browser.Ie){\n\t\t\treturn function(callback){\n\t\t\t\tvar iterator = 0;\n\t\t\t\tfor (var key in this.data) {\n\t\t\t\t\t//if ( ! Array.prototype[key] ){\n\t\t\t\t\tif ( this.data.hasOwnProperty(key) ){\n\t\t\t\t\t\tvar value = this.data[key]; \n\t\t\t\t\t\tvar pair = [key, value];\n\t\t\t\t\t\tpair.key = key;\n\t\t\t\t\t\tpair.value = value;\n\t\t\t\t\t\tcallback(pair, iterator);\n\t\t\t\t\t}\n\t\t\t\t\titerator++;\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\treturn function(callback){\n\t\t\t\tvar iterator = 0;\n\t\t\t\tfor (var key in this.data) {\n\t\t\t\t\tvar value = this.data[key]; \n\t\t\t\t\tvar pair = [key, value];\n\t\t\t\t\tpair.key = key;\n\t\t\t\t\tpair.value = value;\n\t\t\t\t\tcallback(pair, iterator);\n\t\t\t\t\titerator++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}();\n\n\n\t\n\tvar struct = class struct {\n\n\t\tconstructor(data){\n\t\t\tthis.data = stage.typeOf(data) === \"object\" ? stage.extend(true, {}, data) : {} ;\n\t\t}\n\n\n\t\tget (key){\n\t\t\tif ((key === null) || (key === undefined)){\n\t\t\t\treturn this.data;\n\t\t\t}\n\t\t\tif ( (key in this.data)){\n\t\t\t\treturn this.data[key];\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tset (key, value){\n\t\t\tif ((key !== null) || (key !== undefined)){\n\t\t\t\treturn this.data[key] = value;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tunset (key){\n\t\t\tif (key in this.data){\n\t\t\t\tdelete this.data[key];\n\t\t\t\treturn true\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\thasKey (key){\n\t\t\tif (key in this.data){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tclear (){\n\t\t\tthis.data = {};\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\tclone (){\n\t\t\treturn stage.extend(true, {}, this.data);\n\t\t}\n\n\t\t//TODO\n\t\tinspect (){\n\t\t\t\n\t\t}\n\n\t\t//TODO\n\t\tkeys (){\n\t\t}\n\n\t\t//TODO\n\t\tvalues (){\n\t\t}\n\n\t\teach (){\n\t\t\treturn ea.apply(this, arguments);\t\n\t\t}\n\n\t\tclone (){\n\t\t\treturn  new struct(this.data);\n\t\t}\n\n\t\ttoObject (key){\n\t\t\treturn stage.extend(true, {}, this.data) ;\n\t\t}\n\n\n\t\tmerge (hash){\n\t\t\tthis.data = stage.extend(true, {}, this.data, hash) ;\n\t\t}\n\n\t\ttoJson (key){\n\t\t\tif (key)\n\t\t\t\treturn stage.json.stringify(this.get(key));\n\t\t\treturn stage.json.stringify(this.data);\n\t\t}\n\n\t\t//TODO\n\t\ttoQueryString (){\n\n\t\t}\n\n\t};\n\n\tvar obj = {\n\t\tstruct:struct,\n\t\tlocal:{\n\t\t\tcreateHash:function(data){\n\t\t\t\treturn new struct(data);\n\t\t\t}\n\t\t}\n\t};\n\n\tstage.structs.hash = obj ;\n\treturn obj;\n};\n","module.exports =  function(stage){\n\n\t'use strict';\n\n\n\tvar defaultSettings = {\n\t\ttype:\"FIFO\",\t\n\t\tactive:true\n\t};\n\n\n\tvar codeError = {\n\t\tempty:0,\n\t\tnotFound:1,\n\t\tstopped:2\n\t};\n\n\t/*\n \t*\n \t*\n \t*\n \t*  EVENTS QUEUE : \n \t*\tonQueued(queue) :\t// fire when add value to queue\n \t*\tonDeQueued(queue) :\t// fire when add value to queue\n \t*\tonRunStart:(queue)\t// fire when begin to run along the queue\n \t*\tonRunFinish:(queue)\t// fire when finish to run along the queue\n \t*\tonError(queue, error, errorCode):\t// fire when an error \n \t*\n \t*  ERROR CODES :\n \t*\t0 : \tempty\n \t*\t1 :\tnotFound\n \t*\t2 :\tstopped\n \t*\n \t*  SETTINGS : default\n \t*\ttype : \"FIFO\"  // \"LIFO\"\n \t*\n \t*\n \t*\n \t*/\n\tvar struct = class struct {\n\n\t\tconstructor(localSettings){\n\t\t\t// Manage settings\n\t\t\tthis.settings = stage.extend( true, {}, defaultSettings, localSettings);\n\t\t\tthis.data = [];\n\t\t\tthis.error= null;\n\t\t\tthis.eventsQueue = stage.createEventsManager();\n\t\t}\n\n\t\tlisten (context, eventName, callback){\n\t\t\treturn this.eventsQueue.listen(context, eventName, callback);\n\t\t}\n\t\t\n\t\t// TODO LIFO\n\t\tenqueue (value){\n\t\t\tif (this.settings.active){\n\t\t\t\tvar ret = this.data.push(value);\n\t\t\t\tthis.eventsQueue.fireEvent(\"onQueued\",this);\n\t\t\t\treturn ret;\n\t\t\t}else{\n\t\t\t\tthis.error = new Error(\"QUEUE is stoped\");\n\t\t\t\tthis.eventsQueue.fireEvent(\"onError\",this, this.error, codeError.stopped);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t\tremove (data){\n\t\t\tif (this.isEmpty()) {\n\t\t\t\tthis.error = new Error(\"QUEUE is empty\")\n\t\t\t\tthis.eventsQueue.fireEvent(\"onError\",this, this.error, codeError.empty);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tif (stage.array.contain(this.data, data) )\n\t\t\t\treturn stage.array.remove(this.data, data)\n\t\t\tthis.error = new Error(data+\" Not found\");\n\t\t\tthis.eventsQueue.fireEvent(\"onError\",this, this.error, codeError.notFound);\n\t\t\treturn null;\n\t\t}\n\n\t\t// TODO LIFO\n\t\tdequeue (){\n\t\t\tif (this.settings.active){\n\t\t\t\tif (this.isEmpty()) {\n\t\t\t\t\tthis.error = new Error(\"QUEUE is empty\")\n\t\t\t\t\tthis.eventsQueue.fireEvent(\"onError\",this, this.error, codeError.empty);\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tvar value = this.data[0];\n\t\t\t\tstage.array.removeIndexOf(this.data,0);\n\t\t\t\tthis.eventsQueue.fireEvent(\"onDeQueued\",this);\n\t\t\t\treturn value;\n\t\t\t}else{\n\t\t\t\tthis.error = new Error(\"QUEUE is stoped\")\n\t\t\t\tthis.eventsQueue.fireEvent(\"onError\",this, this.error, codeError.stopped);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\n\t\tpeek (data){\n\t\t\tif (this.isEmpty()) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn this.data[0];\n\t\t}\n\n\t\tpurge (){\n\t\t\tthis.data.length = 0;\n\t\t}\n\n\t\tisEmpty (){\n\t\t\treturn this.data.length === 0;\n\t\t}\n\n\t\tcount (){\n\t\t\treturn this.data.length;\n\t\t}\n\n\t\tgetQueue () {\n\t\t\treturn this.data;\n\t\t}\n\n\t\tstart () {\n\t\t\tthis.settings.active = true;\n\t\t}\n\n\t\tstop (){\n\t\t\tthis.settings.active = false;\n\t\t}\n\n\t\trun (callback) {\n\t\t\tif (this.settings.active){\n\t\t\t\tthis.eventsQueue.fireEvent(\"onRunStart\",this);\n\t\t\t\tstage.each(this.data,callback)\n\t\t\t\tthis.eventsQueue.fireEvent(\"onRunFinish\",this);\n\t\t\t}else{\n\t\t\t\tthis.error = new Error(\"QUEUE is stoped\")\n\t\t\t\tthis.eventsQueue.fireEvent(\"onError\",this, this.error, codeError.stopped);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t};\n\n\n\n\tvar createStruct = function(localSettings){\n\t\tvar Structs = new struct(localSettings);\t\n\t\tStructs.eventsQueue.settingsToListen(localSettings)\t\n\t\tif(Structs.error){\t\t\t\n\t\t\tStructs.eventsQueue.fireEvent(\"onError\", Structs, Structs.error);\n\t\t\treturn Structs;\n\t\t}\t\n\t\treturn Structs;\n\t};\n\n\tvar obj = {\n\t\tstruct:struct,\n\t\tlocal:{\n\t\t\tcreateQueue:function(localSettings){\n\t\t\t\tif (! localSettings){\n\t\t\t\t\tlocalSettings = {};\n\t\t\t\t}\n\t\t\t\treturn createStruct(localSettings);\n\t\t\t}\n\t\t}\n\t};\n\n\tstage.structs.queues = obj ;\n\treturn obj;\n\n};\n","/*\n *\n *\n *\n */\nmodule.exports = function (stage) {\n\n  'use strict';\n  /*\n   * default settings\n   * <pre>\n   *   moduleName:      \"stage\"\n   *   maxStack:        100\n   *   rateLimit:       false\n   *   burstLimit:      3\n   *   defaultSeverity: \"DEBUG\"\n   *   checkConditions: \"&&\"\n   *   async:         false\n   *\n   * </pre>\n   */\n  var defaultSettings = {\n    moduleName: \"SYSLOG\",\n    maxStack: 100,\n    rateLimit: false,\n    burstLimit: 3,\n    defaultSeverity: \"DEBUG\",\n    checkConditions: \"&&\",\n    async: false\n  };\n\n  /*\n   * Severity syslog\n   * <pre>\n   *    EMERGENCY   = 0\n   *    ALERT       = 1\n   *    CRITIC      = 2\n   *    ERROR       = 3\n   *    WARNING     = 4\n   *    NOTICE      = 5\n   *    INFO        = 6\n   *    DEBUG       = 7\n   * </pre>\n   */\n  var sysLogSeverity = [\n    \"EMERGENCY\",\n    \"ALERT\",\n    \"CRITIC\",\n    \"ERROR\",\n    \"WARNING\",\n    \"NOTICE\",\n    \"INFO\",\n    \"DEBUG\"\n  ];\n  sysLogSeverity[\"EMERGENCY\"] = 0;\n  sysLogSeverity[\"ALERT\"] = 1;\n  sysLogSeverity[\"CRITIC\"] = 2;\n  sysLogSeverity[\"ERROR\"] = 3;\n  sysLogSeverity[\"WARNING\"] = 4;\n  sysLogSeverity[\"NOTICE\"] = 5;\n  sysLogSeverity[\"INFO\"] = 6;\n  sysLogSeverity[\"DEBUG\"] = 7;\n\n  /**\n   *  Protocol Data Unit\n   * @class  PDU\n   * @constructor\n   * @module library\n   * @return {PDU}\n   */\n  var guid = 0;\n  var PDU = class PDU {\n    constructor(pci, severity, moduleName, msgid, msg, date) {\n      /* timeStamp @type Date*/\n      this.timeStamp = new Date(date).getTime() || new Date().getTime();\n      /* uid */\n      this.uid = ++guid;\n      /* severity */\n      this.severity = translateSeverity(severity);\n      /* severityName */\n      this.severityName = sysLogSeverity[this.severity];\n      /* typePayload */\n      this.typePayload = stage.typeOf(pci);\n      /*\n       * protocole controle information\n       * @type Void\n       */\n      this.payload = pci;\n      /* moduleName */\n      this.moduleName = moduleName;\n      /* msgid */\n      this.msgid = msgid || \"\";\n      /* msg */\n      this.msg = msg || \"\";\n    }\n\n    /**\n     * Get Date in string format\n     * @method getDate\n     * @return {String} a date in string format .\n     */\n    getDate() {\n      return new Date(this.timeStamp).toTimeString();\n    }\n\n    /**\n     * get a string representating the PDU protocole\n     * @method toString\n     * @return {String}  .\n     */\n    toString() {\n      return \"TimeStamp:\" + this.getDate() +\n        \"  Log:\" + this.payload +\n        \"  ModuleName:\" + this.moduleName +\n        \"  SeverityName:\" + this.severityName +\n        \"  MessageID:\" + this.msgid +\n        \"  UID:\" + this.uid +\n        \"  Message:\" + this.msg;\n    }\n\n    parseJson(str) {\n      var json = null;\n      try {\n        json = JSON.parse(str);\n        for (var ele in json) {\n          if (ele in this) {\n            this[ele] = json[ele];\n          }\n        }\n      } catch (e) {\n        throw e;\n      }\n      return json;\n    }\n  };\n\n  var operators = {\n    \"<\": function (ele1, ele2) {\n      return ele1 < ele2\n    },\n    \">\": function (ele1, ele2) {\n      return ele1 > ele2\n    },\n    \"<=\": function (ele1, ele2) {\n      return ele1 <= ele2\n    },\n    \">=\": function (ele1, ele2) {\n      return ele1 >= ele2\n    },\n    \"==\": function (ele1, ele2) {\n      return ele1 === ele2\n    },\n    \"!=\": function (ele1, ele2) {\n      return ele1 !== ele2\n    },\n    \"RegExp\": function (ele1, ele2) {\n      return (ele2.test(ele1))\n    }\n  }\n\n  var conditionsObj = {\n    severity: function (pdu, condition) {\n      if (condition.operator !== \"==\") {\n        //console.log(pdu.severity);\n        //console.log(condition.data)\n        return operators[condition.operator](pdu.severity, condition.data)\n      } else {\n        for (var sev in condition.data) {\n          if (sev === pdu.severityName)\n            return true\n        }\n      }\n      return false\n    },\n    msgid: function (pdu, condition) {\n      if (condition.operator !== \"==\") {\n        return operators[condition.operator](pdu.msgid, condition.data)\n      } else {\n        for (var sev in condition.data) {\n          if (sev === pdu.msgid)\n            return true\n        }\n      }\n      return false\n    },\n    date: function (pdu, condition) {\n      return operators[condition.operator](pdu.timeStamp, condition.data)\n    }\n  }\n\n  var logicCondition = {\n    \"&&\": function (myConditions, pdu) {\n      var res = null\n      for (var ele in myConditions) {\n        var res = conditionsObj[ele](pdu, myConditions[ele])\n        //console.log(\"condition :\" +ele +\"  \"+res)\n        if (!res) {\n          break;\n        }\n      }\n      return res\n    },\n    \"||\": function (myConditions, pdu) {\n      var res = null\n      for (var ele in myConditions) {\n        var res = conditionsObj[ele](pdu, myConditions[ele])\n        if (res) {\n          break;\n        }\n      }\n      return res\n    }\n  }\n\n  var checkFormatSeverity = function (ele) {\n    var res = false;\n    switch (stage.typeOf(ele)) {\n    case \"string\":\n      res = ele.split(/,| /);\n      break;\n    case \"number\":\n      res = ele;\n      break;\n    default:\n      throw new Error(\"checkFormatSeverity bad format \" + stage.typeOf(ele) + \" : \" + ele);\n    }\n    return res;\n  }\n\n  var checkFormatDate = function (ele) {\n    var res = false;\n    switch (stage.typeOf(ele)) {\n    case \"date\":\n      res = ele.getTime();\n      break;\n    case \"string\":\n      res = new Date(ele);\n      break;\n    default:\n      throw new Error(\"checkFormatDate bad format \" + stage.typeOf(ele) + \" : \" + ele);\n    }\n    return res;\n  }\n\n  var checkFormatMsgId = function (ele) {\n    var res = false;\n    switch (stage.typeOf(ele)) {\n    case \"string\":\n      res = ele.split(/,| /);\n      break;\n    case \"number\":\n      res = ele;\n      break;\n    case \"object\":\n      if (ele instanceof RegExp) {\n        res = ele;\n      }\n      break;\n    default:\n      throw new Error(\"checkFormatMsgId bad format \" + stage.typeOf(ele) + \" : \" + ele);\n    }\n    return res;\n\n  }\n\n  var severityToString = function (severity) {\n    var myint = parseInt(severity, 10);\n    if (!isNaN(myint)) {\n      var ele = sysLogSeverity[myint];\n    } else {\n      var ele = severity;\n    }\n    if (ele in sysLogSeverity)\n      return ele;\n    return false;\n  };\n\n\n  var sanitizeConditions = function (settingsCondition) {\n    var res = true;\n    if (stage.typeOf(settingsCondition) !== \"object\")\n      return false;\n    for (var ele in settingsCondition) {\n      if (!ele in conditionsObj) {\n        return false;\n      }\n      var condi = settingsCondition[ele];\n\n      if (condi.operator && !(condi.operator in operators)) {\n        throw new Error(\"Contitions bad operator : \" + condi.operator);\n      }\n      if (condi.data) {\n        switch (ele) {\n        case \"severity\":\n          if (condi.operator) {\n            res = checkFormatSeverity(condi.data);\n            if (res !== false) {\n              condi.data = sysLogSeverity[severityToString(res[0])];\n            } else {\n              return false\n            }\n          } else {\n            condi.operator = \"==\";\n            res = checkFormatSeverity(condi.data);\n            if (res !== false) {\n              condi.data = {};\n              if (stage.typeOf(res) === \"array\") {\n                for (var i = 0; i < res.length; i++) {\n                  var mySeverity = severityToString(res[i]);\n                  if (mySeverity) {\n                    condi.data[mySeverity] = sysLogSeverity[mySeverity];\n                  } else {\n                    return false;\n                  }\n                }\n              } else {\n                return false;\n              }\n            } else {\n              return false\n            }\n          }\n          break;\n        case \"msgid\":\n          if (!condi.operator) {\n            condi.operator = \"==\";\n          }\n          res = checkFormatMsgId(condi.data);\n          if (res !== false) {\n            if (stage.typeOf(res) === \"array\") {\n              condi.data = {};\n              for (var i = 0; i < res.length; i++) {\n                condi.data[res[i]] = \"||\";\n              }\n            } else {\n              condi.data = res;\n            }\n          } else {\n            return false\n          }\n          break;\n        case \"date\":\n          res = checkFormatDate(condi.data);\n          if (res)\n            condi.data = res;\n          else\n            return false;\n          break;\n        default:\n          return false;\n        }\n      } else {\n        return false;\n      }\n    }\n    return settingsCondition;\n    //console.log(settingsCondition);\n  };\n\n\n  var translateSeverity = function (severity) {\n    if (severity in sysLogSeverity) {\n      if (typeof severity === 'number')\n        var myseverity = sysLogSeverity[sysLogSeverity[severity]]\n      else\n        var myseverity = sysLogSeverity[severity];\n    } else {\n      if (!severity)\n        return null;\n      else\n        throw new Error(\"not stage syslog severity :\" + severity);\n    }\n    return myseverity;\n  };\n\n  var createPDU = function (payload, severity, moduleName, msgid, msg) {\n    if (!severity) {\n      var myseverity = sysLogSeverity[this.settings.defaultSeverity];\n    } else {\n      var myseverity = severity;\n    }\n    return new PDU(payload, myseverity,\n      moduleName,\n      msgid,\n      msg);\n  };\n\n  /**\n   * A class for product log in stage.\n   * @example\n   *\n   *    var ERROR_DEFINE = {\n   *       '-101': 'I18N string'\n   *    };\n   *\n   *    var settings = {\n   *        rateLimit:100,\n   *        burstLimit:10,\n   *        moduleName:\"LIVE\",\n   *        defaultSeverity:\"ERROR\"\n   *    };\n   *\n   *    var logIntance = new stage.syslog(settings);\n   *\n   *\n   *    controller.logIntance.listen(context,function(pdu){\n   *        logView(pdu)\n   *    } )\n   *\n   *    controller.logIntance.listenWithConditions(context,{\n   *        checkConditions: \"&&\",\n   *        severity:{\n   *            data:\"CRITIC,ERROR\"\n   *            //data:\"1,7\"\n   *        },\n   *        date:{\n   *            operator:\">=\",\n   *            data:new Date()\n   *        },\n   *        msgid:{\n   *            data:\"myFunction\"\n   *        }\n   *\n   *\n   *    },function(pdu){\n   *        logView(pdu)\n   *    } )\n   *\n   *\n   *    var myFunction = function(error){\n   *        controller.logIntance.logger(error, \"ERROR\", \"myFunction\", ERROR_DEFINE[error] );\n   *    }\n   *\n   *\n   *\n   *    @class syslog\n   *    @module library\n   *    @constructor\n   *    @param {Object} settings The settings to extend.\n   *    @return syslog\n   */\n  var syslog = class syslog extends stage.notificationsCenter.notification {\n\n    constructor(settings) {\n\n      super(settings);\n      /**\n       * extended settings\n       * @property settings\n       * @type Object\n       * @see defaultSettings\n       */\n      this.settings = stage.extend({}, defaultSettings, settings);\n      /**\n       * ring buffer structure container instances of PDU\n       * @property ringStack\n       * @type Array\n       */\n      this.ringStack = new Array();\n      /**\n       * Ratelimit  Management log printed\n       * @property burstPrinted\n       * @type Number\n       */\n      this.burstPrinted = 0;\n      /**\n       * Ratelimit  Management log dropped\n       * @property missed\n       * @type Number\n       */\n      this.missed = 0;\n      /**\n       * Management log invalid\n       * @property invalid\n       * @type Number\n       */\n      this.invalid = 0;\n\n      /**\n       * Counter log valid\n       * @property valid\n       * @type Number\n       */\n      this.valid = 0;\n      /**\n       * Ratelimit  Management begin of burst\n       * @property start\n       * @private\n       * @type Number\n       */\n      this.start = 0;\n\n      this.fire = this.settings.async ? super.fireAsync : super.fire;\n    }\n\n    pushStack(pdu) {\n      if (this.ringStack.length === this.settings.maxStack) {\n        this.ringStack.shift();\n      }\n      var index = this.ringStack.push(pdu);\n      //console.log(this);\n      this.valid++;\n      return index;\n    }\n\n    /**\n     * logger message\n     * @method logger\n     * @param {void} payload payload for log. protocole controle information\n     * @param {Number || String} severity severity syslog like.\n     * @param {String} msgid informations for message. example(Name of function for debug)\n     * @param {String} msg  message to add in log. example (I18N)\n     */\n    logger(payload, severity, msgid, msg) {\n      if (this.settings.rateLimit) {\n        var now = new Date().getTime();\n        this.start = this.start || now;\n        if (now > this.start + this.settings.rateLimit) {\n          this.burstPrinted = 0;\n          this.missed = 0;\n          this.start = 0;\n        }\n        if (this.settings.burstLimit && this.settings.burstLimit > this.burstPrinted) {\n          try {\n            if (payload instanceof PDU) {\n              var pdu = payload\n            } else {\n              var pdu = createPDU.call(this, payload, severity, this.settings.moduleName, msgid, msg);\n            }\n          } catch (e) {\n            console.error(e);\n            this.invalid++;\n            return \"INVALID\"\n          }\n          this.pushStack(pdu);\n          this.fire(\"onLog\", pdu);\n          this.burstPrinted++;\n          return \"ACCEPTED\";\n        }\n        this.missed++;\n        return \"DROPPED\";\n      } else {\n        try {\n          if (payload instanceof PDU) {\n            var pdu = payload;\n          } else {\n            var pdu = createPDU.call(this, payload, severity, this.settings.moduleName, msgid, msg);\n          }\n        } catch (e) {\n          console.error(e);\n          this.invalid++;\n          return \"INVALID\";\n        }\n        this.pushStack(pdu);\n        this.fire(\"onLog\", pdu);\n        return \"ACCEPTED\";\n      }\n    }\n\n    /**\n     * Clear stack of logs\n     *\n     * @method clearLogStack\n     *\n     *\n     *\n     */\n    clearLogStack() {\n      this.ringStack.length = 0;\n    }\n\n    /**\n     * get hitory of stack\n     * @method getLogStack\n     * @param {Number} start .\n     * @param {Number} end .\n     * @return {array} new array between start end\n     * @return {PDU} pdu\n     */\n    getLogStack(start, end, contition) {\n      if (contition) {\n        var stack = this.getLogs(contition);\n      } else {\n        var stack = this.ringStack;\n      }\n      if (arguments.length === 0)\n        return stack[stack.length - 1];\n      if (!end)\n        return stack.slice(start);\n      if (start === end)\n        return stack[stack.length - start - 1];\n      return stack.slice(start, end);\n    }\n\n\n    /**\n     * get logs with conditions\n     * @method getLogs\n     * @param {Object} conditions .\n     * @return {array} new array with matches conditions\n     */\n    getLogs(conditions, stack) {\n      var myStack = stack || this.ringStack;\n      if (conditions.checkConditions && conditions.checkConditions in logicCondition) {\n        var myFuncCondition = logicCondition[conditions.checkConditions];\n        delete conditions.checkConditions;\n      } else {\n        var myFuncCondition = logicCondition[this.settings.checkConditions];\n      }\n      var tab = [];\n      try {\n        var Conditions = sanitizeConditions(conditions);\n      } catch (e) {\n        throw new Error(\"registreNotification conditions format error: \" + e);\n      }\n      if (Conditions) {\n        for (var i = 0; i < myStack.length; i++) {\n          var res = myFuncCondition(Conditions, myStack[i])\n          if (res)\n            tab.push(myStack[i]);\n        }\n      }\n      return tab;\n    }\n\n\n    /**\n     * take the stack and build a JSON string\n     * @method logToJson\n     * @return {String} string in JSON format\n     */\n    logToJson(conditions) {\n      if (conditions)\n        var stack = this.getLogs(conditions)\n      else\n        var stack = this.ringStack\n      return JSON.stringify(stack);\n    }\n\n    /**\n     * load the stack as JSON string\n     * @method loadStack\n     * @param {Object} json or string stack serialize\n     * @param {boolean} fire conditions events  .\n     * @param {function} callback before fire conditions events\n     * @return {String}\n     */\n    loadStack(stack, doEvent, beforeConditions) {\n      if (!stack)\n        throw new Error(\"syslog loadStack : not stack in arguments \")\n      switch (stage.typeOf(stack)) {\n      case \"string\":\n        try {\n          //console.log(stack);\n          var st = JSON.parse(stack);\n          return arguments.callee.call(this, st, doEvent);\n        } catch (e) {\n          throw e;\n        }\n        break;\n      case \"array\":\n      case \"object\":\n        try {\n          for (var i = 0; i < stack.length; i++) {\n            var pdu = new PDU(stack[i].payload, stack[i].severity, stack[i].moduleName || this.settings.moduleName, stack[i].msgid, stack[i].msg, stack[i].timeStamp)\n            this.pushStack(pdu);\n\n            if (doEvent) {\n              if (beforeConditions && typeof beforeConditions === \"function\")\n                beforeConditions.call(this, pdu, stack[i]);\n              this.fire(\"onLog\", pdu);\n            }\n          }\n        } catch (e) {\n          throw e;\n        }\n        break;\n      default:\n        throw new Error(\"syslog loadStack : bad stack in arguments type\")\n      };\n      return st || stack;\n    }\n\n\n    /**\n     *\n     *    @method  listenWithConditions\n     *\n     */\n    listenWithConditions(context, conditions, callback) {\n      if (conditions.checkConditions && conditions.checkConditions in logicCondition) {\n        var myFuncCondition = logicCondition[conditions.checkConditions];\n        delete conditions.checkConditions;\n      } else {\n        var myFuncCondition = logicCondition[this.settings.checkConditions];\n      }\n      try {\n        var Conditions = sanitizeConditions(conditions);\n      } catch (e) {\n        throw new Error(\"registreNotification conditions format error: \" + e);\n      }\n      if (Conditions) {\n        var func = function (pdu) {\n          var res = myFuncCondition(Conditions, pdu);\n          if (res) {\n            callback.apply(context || this, arguments)\n          }\n        };\n        super.listen(this, \"onLog\", func);\n        return func;\n      }\n    }\n\n  }\n  stage.syslog = syslog;\n  stage.PDU = PDU;\n  return syslog;\n};","/*\n *\n *\n *\n *\n *\n *\n *\n */\n\nmodule.exports = function(stage){\n\n\t/**\n   \t* \\brief changes the given string to XML doc.\n   \t*\n   \t* \\param string an XML string\n   \t* \\return  the document  node root\n   \t*/\n  \tvar stringToDocumentXML = function(){\n\n\t\tif ( ! document.implementation.createDocument){\n\t\t\treturn function(str){\n\t\t\t\tvar doc = createDocument();\n\t\t\t\tdoc.async=\"false\";\n\t\t\t\tdoc.loadXML(str);\n\t\t\t\treturn doc;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn function(str){\n    \t\t\ttry{\n\t\t\t\tvar oDomDoc = (new DOMParser()).parseFromString(str, 'application/xml');\n      \t\t\t}catch(e){\n\t\t\t\tthrow Error('xml function stringToDocumentXML : '+e);\n      \t\t\t}\n\t\t\treturn oDomDoc;\n\t\t}\n  \t}();\n  \t\n  \tvar getDocumentRoot = function(doc){ \n\t\tvar type = stage.typeOf(doc);\n\t\tif ( type === \"document\" ){\n\t\t\treturn (doc.documentElement || doc.childNodes[0]);\t\t\n\t\t}\n\t\tif ( type === \"element\" ){\n\t\t\tvar myDoc = doc.ownerDocument ;\n\t\t\treturn (myDoc.documentElement || myDoc.childNodes[0]);\n\t\t}\n  \t};\n\n\n\n\n\n\t//parseXML\n\tvar parseXml = function( xml ){\n\t\tswitch (stage.typeOf(xml)){\n\t\t\tcase \"string\":\n\t\t\t\tvar root = getDocumentRoot(stringToDocumentXML(xml));\n\t\t\tbreak;\n\t\t\tcase \"document\":\n\t\t\t\tvar root = getDocumentRoot(xml);\n\t\t\tbreak;\n\t\t\tcase \"element\":\n\t\t\t\tvar root = xml;\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"parseXml  bad type arguments\");\n\t\t\n\t\t}\n\t\treturn parseDOM( root );\n\t};\n\n\tvar __force_array = null;\n\tvar parseDOM = function(root){\n\t\tif ( ! root ) return null;\n\t\tvar force_array = null;\n\t\t__force_array = {};\n        \tif ( force_array ) {\n            \t\tfor( var i=0; i<force_array.length; i++ ) {\n                \t\t__force_array[force_array[i]] = 1;\n            \t\t}\n        \t}\n\n        \tvar json = parseNode( root );   // parse root node\n        \tif ( __force_array[root.nodeName] ) {\n            \t\tjson = [ json ];\n        \t}\n        \tif ( root.nodeType != 11 ) {            // DOCUMENT_FRAGMENT_NODE\n            \t\tvar tmp = {};\n            \t\ttmp[root.nodeName] = json;          // root nodeName\n            \t\tjson = tmp;\n        \t}\n        \treturn json;\n\t};\n\n\n\tvar attr_prefix =\"@\";\n\tvar name_space = \":\";\n\tvar parseNode = function(node){\n\t\tif ( ! node ) return null;\n\t\tswitch( node.nodeType ){\n\t\t\t// COMMENT_NODE\n\t\t\tcase 7:\n\t\t\t\treturn null;\n\t\t\t// TEXT_NODE \n\t\t\tcase 3:\n\t\t\t// CDATA_SECTION_NODE\n\t\t\tcase 4:\n\t\t\t\tif ( node.nodeValue.match( /[^\\x00-\\x20]/ ) )\n\t\t\t\t\treturn node.nodeValue;\n\t\t\t\treturn null;\n\t\t\tbreak;\t\t\n\t\t}\n\t\tvar ret = null;\n\t\tvar data = {};\t\n\n\t\t// parse Attributes \n\t\tif ( node.attributes && node.attributes.length ){\n\t\t\tret = {};\n\t\t\tfor ( var i=0; i<node.attributes.length; i++ ) {\n\t\t\t\tvar key = node.attributes[i].nodeName;\n                \t\tif ( typeof(key) !== \"string\" ) continue;\n                \t\tvar val =  node.attributes[i].value || node.attributes[i].nodeValue;\n                \t\tif ( ! val ) continue;\n                \t\tkey = attr_prefix + key;\n                \t\tif ( typeof(data[key]) == \"undefined\" ) data[key] = 0;\n                \t\tdata[key] ++;\n\t\t\t\taddNode( ret, key, data[key], val );\n\t\t\t}\n\t\t\t//console.log(data)\n\t\t}\n\n\t\tif ( node.childNodes && node.childNodes.length ) {\n            \t\tvar textonly = true;\n            \t\tif ( ret ) textonly = false;        // some attributes exists\n            \t\tfor ( var i=0; i<node.childNodes.length && textonly; i++ ) {\n                \t\tvar ntype = node.childNodes[i].nodeType;\n                \t\tif ( ntype == 3 || ntype == 4 ) continue;\n                \t\ttextonly = false;\n            \t\t}\n            \t\tif ( textonly ) {\n                \t\tif ( ! ret ) ret = \"\";\n                \t\tfor ( var i=0; i<node.childNodes.length; i++ ) {\n                    \t\t\tret += node.childNodes[i].nodeValue;\n                \t\t}\n            \t\t} else {\n                \t\tif ( ! ret ) ret = {};\n                \t\tfor ( var i=0; i<node.childNodes.length; i++ ) {\n                    \t\t\tvar key = node.childNodes[i].nodeName;\n                    \t\t\tif ( typeof(key) !== \"string\" ) continue;\n                    \t\t\tvar val = parseNode( node.childNodes[i] );\n                    \t\t\tif ( ! val ) continue;\n                    \t\t\tif ( typeof(data[key]) === \"undefined\" ) data[key] = 0;\n                    \t\t\tdata[key] ++;\n                    \t\t\taddNode( ret, key, data[key], val );\n                \t\t}\n            \t\t}\n        \t}\n\t\treturn ret;\n\t};\n\n\tvar addNode = function ( hash, key, cnts, val ) {\n        \tkey = removeColon(key);\n        \tif ( __force_array && __force_array[key] ) {\n            \t\tif ( cnts == 1 ) hash[key] = [];\n            \t\thash[key][hash[key].length] = val;      // push\n        \t} else if ( cnts == 1 ) {                   // 1st sibling\n            \t\thash[key] = val;\n        \t} else if ( cnts == 2 ) {                   // 2nd sibling\n            \t\thash[key] = [ hash[key], val ];\n        \t} else {                                    // 3rd sibling and more\n            \t\thash[key][hash[key].length] = val;\n        \t}\n\t};\n\t\n\tvar removeColon = function(name){\n\t\treturn name ? (name.replace(':',name_space)): name;\n\t};\n\n\treturn stage.xml =  {\n\t\tparseXml:parseXml,\n\t\t//parseNode:parseDOM,\n\t  \tstringToDocumentXML : stringToDocumentXML ,\n\t  \t//getDocumentRoot :getDocumentRoot\n\t}\n};\n","/* (ignored) */"],"sourceRoot":""}