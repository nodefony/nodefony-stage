{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap f24412cd425b8597abeb","webpack:///./~/jquery/dist/jquery.js?7ccb","webpack:///./~/webrtc-adapter/src/js/utils.js","webpack:///./~/shortid/lib/alphabet.js","webpack:///./~/path-browserify/index.js","webpack:///./~/twig/twig.js","webpack:///fs (ignored)","webpack:///./~/shortid/index.js","webpack:///./~/shortid/lib/encode.js","webpack:///(webpack)/buildin/global.js","webpack:///(webpack)/buildin/module.js","webpack:///./src/core/notificationsCenter.es6","webpack:///./src/core/stage.es6","webpack:///./src/crypto/base64.js","webpack:///./src/crypto/md5.js","webpack:///./src/io/authentication/mechanisms/digest-md5/digestMd5.es6","webpack:///./src/io/authentication/sasl/sasl.es6","webpack:///./src/io/io.es6","webpack:///./src/io/protocols/bayeux/bayeux.es6","webpack:///./src/io/protocols/sip/sdp.es6","webpack:///./src/io/protocols/sip/sip.es6","webpack:///./src/io/realtime/realtime.es6","webpack:///./src/io/transports/in/longPoll.es6","webpack:///./src/io/transports/in/poll.es6","webpack:///./src/io/transports/socket.es6","webpack:///./src/io/transports/websockets/websocket.es6","webpack:///./src/kernel/appKernel.es6","webpack:///./src/kernel/autoload.es6","webpack:///./src/kernel/container.es6","webpack:///./src/kernel/controller.es6","webpack:///./src/kernel/kernel.es6","webpack:///./src/kernel/locationService.es6","webpack:///./src/kernel/module.es6","webpack:///./src/kernel/routerService.es6","webpack:///./src/kernel/service.es6","webpack:///./src/kernel/translationService.es6","webpack:///./src/media/media.es6","webpack:///./src/media/webrtc/webrtc.es6","webpack:///./src/structs/hash/hash.es6","webpack:///./src/structs/queue/queue.es6","webpack:///./src/syslog/syslog.es6","webpack:///./src/tools/xml.js","webpack:///./~/process/browser.js","webpack:///./~/sdp/sdp.js","webpack:///./~/shortid/lib/build.js","webpack:///./~/shortid/lib/decode.js","webpack:///./~/shortid/lib/index.js","webpack:///./~/shortid/lib/is-valid.js","webpack:///./~/shortid/lib/random/random-byte-browser.js","webpack:///./~/shortid/lib/random/random-from-seed.js","webpack:///./~/shortid/lib/util/cluster-worker-id-browser.js","webpack:///./~/webrtc-adapter/src/js/adapter_core.js","webpack:///./~/webrtc-adapter/src/js/chrome/chrome_shim.js","webpack:///./~/webrtc-adapter/src/js/chrome/getusermedia.js","webpack:///./~/webrtc-adapter/src/js/edge/edge_shim.js","webpack:///./~/webrtc-adapter/src/js/edge/getusermedia.js","webpack:///./~/webrtc-adapter/src/js/firefox/firefox_shim.js","webpack:///./~/webrtc-adapter/src/js/firefox/getusermedia.js","webpack:///./~/webrtc-adapter/src/js/safari/safari_shim.js","webpack:///./src/core.js","webpack:///./~/jquery/dist/jquery.js","webpack:///./~/jquery/dist/jquery.js?ec37"],"names":["logDisabled_","utils","disableLog","bool","Error","log","window","console","apply","arguments","extractVersion","uastring","expr","pos","match","length","parseInt","detectBrowser","result","browser","version","navigator","mozGetUserMedia","userAgent","webkitGetUserMedia","webkitRTCPeerConnection","mediaDevices","shimCreateObjectURL","HTMLMediaElement","prototype","undefined","nativeCreateObjectURL","URL","createObjectURL","bind","nativeRevokeObjectURL","revokeObjectURL","streams","Map","newId","stream","url","set","delete","dsc","Object","getOwnPropertyDescriptor","defineProperty","get","srcObject","nativeSetAttribute","setAttribute","toLowerCase","module","exports","browserDetails","randomFromSeed","require","ORIGINAL","alphabet","previousSeed","shuffled","reset","setCharacters","_alphabet_","unique","split","filter","item","ind","arr","lastIndexOf","join","characters","setSeed","seed","shuffle","sourceArray","targetArray","r","nextValue","characterIndex","Math","floor","push","splice","getShuffled","lookup","index","alphabetShuffled","normalizeArray","parts","allowAboveRoot","up","i","last","unshift","splitPathRe","splitPath","filename","exec","slice","resolve","resolvedPath","resolvedAbsolute","path","process","cwd","TypeError","charAt","p","normalize","isAbsolute","trailingSlash","substr","paths","Array","call","relative","from","to","trim","start","end","fromParts","toParts","min","samePartsLength","outputParts","concat","sep","delimiter","dirname","root","dir","basename","ext","f","extname","xs","res","str","len","webpackUniversalModuleDefinition","factory","webpackLoadOptionalExternalModule","e","__WEBPACK_EXTERNAL_MODULE_19__","__WEBPACK_EXTERNAL_MODULE_20__","modules","installedModules","__webpack_require__","moduleId","id","loaded","m","c","Twig","VERSION","trace","debug","cache","noop","placeholders","parent","indexOf","searchElement","hasOwnProperty","t","n","Number","Infinity","abs","k","max","forEach","callback","thisArg","T","O","toString","kValue","merge","target","source","onlyChanged","keys","key","message","name","type","output","error","ChildContext","context","token","logic","comment","raw","output_whitespace_pre","output_whitespace_post","output_whitespace_both","logic_whitespace_pre","logic_whitespace_post","logic_whitespace_both","definitions","open","close","strings","findStart","template","position","close_position","def","token_template","first_key_position","close_key_position","findEnd","token_def","found","offset","str_pos","str_found","end_offset","this_str_pos","end_str_pos","l","tokenize","tokens","error_offset","found_token","value","substring","compile","stack","intermediate_output","logic_token","unclosed_token","prev_token","prev_output","prev_intermediate_output","prev_template","next_token","tok_output","next","compile_output","expression","compile_logic","handler","pop","shift","ex","options","rethrow","parse","allow_async","that","err","is_async","promise","chain","handleException","async","parseToken","filters","parseAsync","then","o","catch","prepare","data","raw_tokens","autoescape","strategy","escaped_output","twig_markup","escape","Markup","Templates","loaders","parsers","registry","validateId","registerLoader","method_name","func","scope","unRegisterLoader","isRegisteredLoader","registerParser","unRegisterParser","isRegisteredParser","save","load","loadRemote","location","params","error_callback","loader","parser","method","fs","is","obj","clas","Template","blocks","macros","base","importedBlocks","originalBlockTokens","child","extend","render","cb","ext_template","allowInlineIncludes","parsePath","getLoaderMethod","renderAsync","v","importFile","file","sub_template","importBlocks","override","importMacros","remoteTemplate","compiler","content","String","JSON","stringify","twig","wrap","amd","pathToTwig","node","cjs2","replace","parseParams","Promise","reservedWords","comma","operator","unary","binary","string","array","object","parameter","subexpression","period","brackets","_function","variable","number","_null","test","operations","expressions","operations_extended","fn","push_both","push_value","regex","modifier","stack_token","transform","associativity","leftToRight","precidence","rightToLeft","temp","key_token","loop","validate","found_subexpression_start","next_subexpression_start_invalid","unclosed_parameter_count","end_token","param_stack","is_expression","new_array","array_ended","last_token","sliceRange","sliceStart","sliceEnd","input","new_object","object_ended","token_key","has_value","_keys","functions","resolveAsync","strict_variables","capitalize","toUpperCase","parameters","tokens_are_parameters","cleanup","extendType","definition","exp_offset","regex_array","token_next","match_found","invalid_matches","match_function","raw_token","loop_token_fixups","loop_token_fixup","containment","a","b","el","isArray","lib","boolval","parseFloat","pow","range","upper","lower","title","p1","p2","reverse","sort","sorted_keys","a1","a2","isNaN","b1","keyset","url_encode","encodeURIComponent","join_str","json_encode","arr_index","param","val","int_key","date","format","date_modify","modifyText","time","strtotime","getTime","Date","pairs","tag","replaceAll","vsprintf","striptags","strip_tags","raw_value","char_code","charCodeAt","sprintf","nl2br","linebreak_tag","br","number_format","decimals","dec","isFinite","prec","s","toFixedFix","round","whitespace","truncate","preserve","separator","startIndex","first","limit","limitedSplit","batch","items","size","fill","missing","ceil","chunkArray","precision","TEMPLATE_NOT_FOUND_MESSAGE","low","high","step","matrix","inival","endval","plus","walker","chars","fromCharCode","cycle","dump","EOL","indentChar","indentTimes","out","args","indent","times","displayVar","dumpVar","dateObj","block","attribute","values","template_from_string","random","LIMIT_INT31","getRandomNumber","limits","ignore_missing","templateSource","templateFound","isNodeEnvironment","__dirname","fetchTemplateSource","copy","src","add","search","returnVal","x","_pad","chr","leftJustify","padding","justify","prefix","minWidth","zeroPad","customPadChar","diff","_formatBaseX","_formatString","doFormat","valueIndex","flags","textTransform","positivePrefix","prefixBaseX","flagsl","j","mode","isHalf","sgn","_typeof","Symbol","iterator","constructor","ar","retVal","argv","argc","_obj2Array","_compare","current","tmp","nl","cl","allowed","tags","commentsAndPhpTags","$0","$1","text","now","parsed","today","year","days","ranges","fail","pattern","RegExp","getFullYear","getMonth","getDate","lastNext","day","getDay","setDate","splt","typeIsNumber","ago","num","timestamp","jsdate","txtWords","formatChr","formatChrCb","d","D","w","N","S","z","Y","W","F","M","L","y","getHours","A","B","H","getUTCHours","getUTCMinutes","getUTCSeconds","g","G","h","getMinutes","getSeconds","u","getMilliseconds","msg","I","UTC","tzo","getTimezoneOffset","P","Z","U","_date","mixedVar","xmlhttp","precompiled","XMLHttpRequest","onreadystatechange","readyState","status","cordova","responseText","send","loadTemplateFn","stat","stats","isFile","readFile","statSync","readFileSync","if_","endif","for_","endfor","else_","elseif","setcapture","endset","endfilter","shortblock","endblock","extends_","use","include","spaceless","endspaceless","macro","endmacro","import_","embed","endembed","key_value","conditional","kv_split","key_var","value_var","continue_chain","buildLoop","isConditional","index0","revindex","revindex0","inner_context","condition","expression_stack","unfiltered","block_output","isImported","hasParent","overwrite","innerContext","ignoreMissing","withContext","only","withStack","rBetweenTagSpaces","macroName","macroContext","_self","prop","contextName","macroExpressions","macroNames","macroMatch","token_template_type","token_type","token_regex","isPromise","namespaces","relativePath","base_path","sep_chr","new_path","tests","empty","odd","even","divisibleby","defined","none","sameas","warn","iterable","executor","state","handlers","changeState","newState","notify","onResolve","onReject","append","reject","onResolved","onRejected","run","done","ready","hasResolved","hasRejected","all","promises","results","forEachAsync","arg_index","callbacks","iterate","ref","href","extendFilter","extendFunction","extendTest","extendTag","markup","settings","renderFile","views","view_options","option","__express","randomByte","encode","loopCounter","Function","eval","webpackPolyfill","deprecate","children","enumerable","stage","regListenOn","Notification","events","garbageEvent","settingsToListen","eventName","event","ContextClosure","fire","ret","localSettings","listen","clearNotifications","notificationsCenter","notification","create","arrayProto","typeOf","propertyIsEnumerable","nodeType","callee","SyntaxError","getBrowser","getBrowserVersion","useragent","Stage","jQuery","crypto","media","structs","controllers","Ie","Gecko","Webkit","Opera","opera","platform","closure","register","_keyStr","encode64","chr1","chr2","chr3","enc1","enc2","enc3","enc4","_utf8_encode","decode64","_utf8_decode","decode","arrayBuffer","lkey1","lkey2","bytes","uarray","Uint8Array","utftext","c2","c3","decodeArrayBuffer","ab","ArrayBuffer","base64","hexcase","b64pad","md5_vm_test","rstr2hex","rstr_md5","binl2rstr","binl_md5","rstr2binl","rstr_hmac_md5","bkey","ipad","opad","hash","hex_tab","rstr2b64","tab","triplet","rstr2any","encoding","divisor","q","quotient","dividend","full_length","remainders","str2rstr_utf8","str2rstr_utf16le","str2rstr_utf16be","olda","oldb","oldc","oldd","md5_ff","md5_gg","md5_hh","md5_ii","safe_add","md5_cmn","bit_rol","lsw","msw","cnt","md5","hex_md5","hex_md5_noUTF8","str_md5","b64_md5","any_md5","hex_hmac_md5","str_hmac_md5","b64_hmac_md5","any_hmac_md5","keyWord","realm","qop","charset","algorithm","nonce","reg","parserAuthenticate","head","MD5","BASE64","DBASE64","generateA1","username","password","cnonce","A1","generateA2","uri","entity_body","A2","entity","responseDigest","noncecount","digestMd5","headers","body","requestUri","protocol","host","parseChallenge","parsing","ele","challenge","challengeB64","line","response","opaque","nc","toSend","io","authentication","Digest","mechanisms","parserSasl","Sasl","mechanism","getBestMechanism","bestMechanism","Class","goodM","user","generateAuthorization","SASL","isSameOrigin","loc","urlToOject","hostname","port","isSecure","authenticate","request","crossDomain","notificationCenter","authType","auth","getAuthenticationType","ajax","getAuthorization","$","beforeSend","xhr","setRequestHeader","success","encodeUriSegment","encodeUriQuery","pctEncodeSpaces","regSearch","parseKeyValue","decodeURIComponent","toKeyValue","getHeaderJSON","json","getResponseHeader","anchor","document","createElement","keyIndex","currentKey","pathname","nativeWebSocket","WebSocket","transportCore","protocols","transport","transports","clientsCapabilities","ws","poll","lpoll","longPoll","jsonp","onHandshakeResponse","successful","socket","getBestConnection","supportedConnectionTypes","onmessage","onMessage","onopen","connect","onerror","onclose","onError","reconnect","onConnectResponse","connected","idconnection","clientId","advice","onDisconnectResponse","onSubscribeResponse","onUnsubscribeResponse","code","arg","mess","bayeux","socketType","req","channel","minimumVersion","connectionType","unListen","subscription","service","dataType","contentType","defaultAparser","rtpmapParser","payloadType","encodingName","clockRate","encodingParameters","rtpmap","candidateParser","foundation","componentId","transportExt","priority","connectionAddress","candidateType","remoteAddr","remotePort","generation","networkId","candidates","aAttribute","aAttributeDirection","parserSdp","sessionBlock","audioBlock","videoBlock","detectBlocks","parseBlocks","nbLines","parseM","parseMline","direction","information","attributes","bandwidths","connection","encryption","nbPort","proto","fmt","nettype","addrtype","address","sessId","sessVersion","unicastAddr","stop","interval","duration","offsets","parseAline","parseCline","originator","parseOline","sessionName","email","phoneNumber","timeZone","timeDescription","parseTline","timeRepeat","parseRline","blockSessionParser","blockMediaParser","sdp","digest","generateResponse","dialog","userName","sip","server","nonceCount","Digestalgorithm","rawBody","digestMD5","lineResponse","transac","createTransaction","transaction","tagTo","createRequest","bodyType","header","regHeaders","headName","Allow","Via","CallId","fromTo","fromToG","parsefromTo","sp","res2","displayName","res3","headerSip","rawHeader","firstLine","branch","routes","recordRoutes","each","Index","headValue","callId","cseq","regContact","parseValue","contact","Supported","bodySip","contentLength","sdpParser","dtmfParser","dtmf","endline","endHeader","sipRequest","bodyMessage","typeBody","serverPort","requestLine","buildRequestline","buildHeader","buildBody","rport","ip","publicAddress","via","tagFrom","expires","maxForward","rawResponse","getRequestline","getHeader","getBody","getMessage","codeMessage","sipResponse","messageCode","responseLine","buildResponseLine","ptr","getResponseline","generateHex","Transaction","Message","hydrate","generateBranchId","responses","requests","hex","incCseq","statusCode","EARLY","ESTABLISHED","TERMINATED","CANCEL","createResponse","clearInterval","INITIAL","Dialog","transactions","generateTag","generateCseq","generateCallId","fromNameDisplay","toName","fromName","fromTag","toTag","toNameDisplay","currentTransaction","trans","userTo","description","typeNotify","info","typeInfo","clear","firstline","regSIP","rawMessage","statusLine","parseHeader","parseBody","getType","getDialog","getTransaction","createDialog","fragment","lastResponse","transportType","registered","registerInterval","setInterval","ack","onStart","onStop","defaultSettings","portServer","pwd","SIP","dialogs","initTransport","addr","force","invalid","generateInvalid","generateVia","domain","quit","dia","unregister","generateContact","diagRegister","diagInv","invite","diagNotify","bye","settingsSyslog","moduleName","defaultSeverity","realtime","urlServer","syslog","services","subscribedService","nbSubscribed","handshake","remoteAddress","setTimeout","onSuccess","subscribe","unSubscribe","sendMessage","stopReConnect","disconnect","delay","pollAction","ajaxConfig","pollling","timer","buildAjaxSettings","complete","abort","clearTimeout","connectState","tokenKey","httpData","permanent","transient","idInterval","bestTransport","websocket","appKernel","environnement","loadModule","kernel","shortId","generateId","generate","AJAX","css","mineType","js","SCRIPT","insert","script","getElementsByTagName","appendChild","logger","rel","onload","defaultSetting","regType","autoload","pci","severity","msgid","parentNode","removeChild","ISDefined","parseParameterString","ns","Container","protoService","protoParameters","sc","Scope","ExtendedScope","clean","leaveScope","tabFxEvent","Controller","container","i18n","router","redirect","forward","variables","absolute","generateUrl","$controller","domElement","find","jElement","ctrl","closest","attr","resolvePattern","controller","on","evalInContext","element","partial","prepend","html","domParser","getTemplatePattern","Service","html5Mode","hashPrefix","defaultEnvEnable","dev","development","prod","production","loadRemoteTwig","mydata","getModuleName","getTemplateName","registerTemplate","xrh","Kernel","environment","booted","isDomReady","uiContainer","initializeLog","autoloader","initRouter","initTwig","initTranslation","initRest","domReady","resize","unLoad","onLoad","boot","initLocation","locationService","Rest","restService","templateEngine","getModule","getController","action","app","initialize","listenWithConditions","pdu","payload","severityName","timeStamp","xml","parseXml","moduleSrc","registerModule","kernelcontext","addScope","onReady","nativeHistory","history","pushState","PATH_MATCH","DEFAULT_PORTS","changeUrl","lastUrl","initialUrl","newUrl","lastHash","lastUrlr","myurl","same","urlBrowser","History","beginsWith","begin","whole","stripHash","Location","stripFile","parseAbsoluteUrl","_absUrl","_url","_protocol","_host","_port","_path","change","_search","_hash","segments","relativeUrl","prefixed","absoluteUrl","LocationHashbangUrl","withoutBaseUrl","withoutHashUrl","parseRelativeUrl","encodePath","LocationHashbangInHtml5Url","LocationHtml5Url","pathUrl","serverBase","browserService","baseHref","urlParser","regI18n","modelModule","config","rootName","documentXml","overrideMimeType","templates","optionsGlobal","rest","addApi","locale","registerI18n","registerController","view","registerView","styles","style","registerStyle","scripts","registerScript","fonts","font","cacheFont","translations","translation","registerTranslation","icon","author","emailAuthor","authorLink","mvc","initialiseRest","route","defaultParam","createRoute","regPattern","Module","setParameters","getParameters","txt","pathName","templateName","enterScope","reader","Route","defaultParams","defaults","slash","dot","capture","opt","incl","map","wildcard","regModuleName","Resolver","defaultAction","defaultView","parsePathernController","getRouteByPattern","getAction","getDefaultView","cacheState","regSerch","routePattern","generatedPath","absUrl","resolveRoute","resolver","callController","getRoute","defaultOptions","removeAllListeners","has","translate","translateDispo","fr_FR","en_EN","regNavLang","defaultDomain","trans_default_domain","language","userLanguage","defaultLocale","getLangs","defaulDomain","audioContext","webAudioApi","AudioContext","webkitAudioContext","mediaStream","getMediaStream","updaterMedia","webkitMediaStream","getVideoTracks","videoTracks","getAudioTracks","audioTracks","MediaStream","defaultSettingsStream","audio","video","mediaElement","urlStream","setStream","getUserMedia","videotracks","audiotracks","play","attachMediaStream","trackSettings","gain","panner","analyser","Track","bus","audioNodes","audioBus","buffer","in","sync","retry","muted","currentTime","eventsManager","createNodes","mixer","mediaType","AudioNode","oncanplay","connectSource","createGain","createFilter","createStereoPanner","createAnalyser","smoothingTimeConstant","mute","when","pause","playbackState","PLAYING_STATE","disconnectSource","noteOn","createSource","audioNode","destination","createBufferSource","rawBuffer","Blob","decodeAudioData","decoded","createMediaStreamSource","createMediaElementSource","buf8","nodeGain","responseType","defaultAudioBusSettings","tracks","nbTracks","createChannelSplitter","createPanner","createBiquadFilter","nbChannel","createChannelMerger","createOscillator","createMediaStreamDestination","track","mixSettings","mediaMix","nbBus","createAudioBus","masterBus","analyserLeft","analyserRight","setGain","getGain","unmute","createTrack","removeTrack","parseSdp","sdpLines","newline","userSettings","constraints","mandatory","User","OfferToReceiveAudio","OfferToReceiveVideo","succesCallback","errorMedia","onSucces","desc","webrtc","asyncCandidates","RTCPeerConnection","createPeerConnection","addStream","dtmfSender","initDtmfSender","sendDtmf","peerConnection","localDescription","sessionDescription","webrtcTransaction","diag","iceServers","optional","onicecandidate","old","iceGatheringState","candidate","onaddstream","setRemoteStream","insertDTMF","gap","createDTMFSender","localAudioTrack","ontonechange","tone","createOffer","setDescription","setLocalDescription","constraintsOffer","createMediaStream","remoteDescription","remoteDesc","ClassDesc","RTCSessionDescription","setRemoteDescription","createAnswer","cancel","closeTransaction","decline","sipPort","sipTransport","WebRtc","socketState","init","doAnswer","RTCIceCandidate","addIceCandidate","transation","userMedia","ea","pair","struct","local","createHash","active","codeError","notFound","stopped","eventsQueue","createEventsManager","fireEvent","isEmpty","contain","remove","removeIndexOf","createStruct","Structs","createQueue","queues","maxStack","rateLimit","burstLimit","checkConditions","sysLogSeverity","guid","PDU","uid","translateSeverity","typePayload","toTimeString","operators","ele1","ele2","conditionsObj","sev","logicCondition","myConditions","checkFormatSeverity","checkFormatDate","checkFormatMsgId","severityToString","myint","sanitizeConditions","settingsCondition","condi","mySeverity","myseverity","createPDU","ringStack","burstPrinted","missed","valid","pushStack","contition","getLogs","conditions","myStack","myFuncCondition","Conditions","doEvent","beforeConditions","st","stringToDocumentXML","implementation","createDocument","doc","loadXML","oDomDoc","DOMParser","parseFromString","getDocumentRoot","documentElement","childNodes","myDoc","ownerDocument","parseDOM","__force_array","force_array","parseNode","nodeName","attr_prefix","name_space","nodeValue","addNode","textonly","ntype","cnts","removeColon","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","drainQueue","timeout","nextTick","Item","env","versions","addListener","once","off","removeListener","emit","binding","chdir","umask","SDPUtils","generateIdentifier","localCName","splitLines","blob","splitSections","part","matchPrefix","parseCandidate","component","relatedAddress","relatedPort","tcpType","writeCandidate","parseRtpMap","numChannels","writeRtpMap","codec","pt","preferredPayloadType","parseExtmap","writeExtmap","headerExtension","preferredId","parseFmtp","kv","writeFmtp","parseRtcpFb","writeRtcpFb","lines","rtcpFeedback","fb","parseSsrcMedia","ssrc","colon","getDtlsParameters","mediaSection","sessionpart","fpLine","dtlsParameters","role","fingerprints","writeDtlsParameters","setupType","fp","getIceParameters","iceParameters","usernameFragment","writeIceParameters","parseRtpParameters","codecs","headerExtensions","fecMechanisms","rtcp","mline","rtpmapline","fmtps","writeRtpDescription","kind","caps","maxptime","extension","parseRtpEncodingParameters","hasRed","hasUlpfec","ssrcs","primarySsrc","secondarySsrc","flows","apt","encParam","codecPayloadType","rtx","fec","bandwidth","maxBitrate","parseRtcpParameters","rtcpParameters","cname","remoteSsrc","rsize","reducedSize","compound","mux","parseMsid","spec","planB","writeSessionBoilerplate","writeMediaSection","transceiver","iceGatherer","getLocalParameters","dtlsTransport","mid","rtpSender","rtpReceiver","msid","sendEncodingParameters","getDirection","getKind","isRejected","REDUCE_TIME","counter","previousSeconds","build","clusterWorkerId","seconds","worker","isValid","seedValue","workerId","newCharacters","isShortId","msCrypto","getRandomValues","dest","getNextValue","_seed_","logging","chromeShim","edgeShim","firefoxShim","safariShim","shimPeerConnection","browserShim","shimGetUserMedia","shimMediaStream","shimSourceObject","shimOnTrack","shimGetSendersWithDtmf","_ontrack","self","removeEventListener","_ontrackpoly","addEventListener","te","Event","receiver","dispatchEvent","getTracks","getSenders","_senders","origAddStream","origRemoveStream","removeStream","pc","_dtmf","sender","_srcObject","pcConfig","pcConstraints","iceTransportPolicy","iceTransports","generateCertificate","origGetStats","getStats","selector","successCallback","errorCallback","fixChromeStats_","standardReport","reports","report","standardStats","localcandidate","remotecandidate","names","makeMapStats","successCallbackWrapper_","nativeMethod","opts","nativeAddIceCandidate","constraintsToChrome_","cc","ideal","exact","oldname_","oc","mix","advanced","shimConstraints_","face","facingMode","getSupportedFacingModeLies","getSupportedConstraints","enumerateDevices","devices","back","label","deviceId","shimError_","PermissionDeniedError","ConstraintNotSatisfiedError","constraint","constraintName","getUserMedia_","getUserMediaPromise_","kinds","MediaStreamTrack","getSources","device","groupId","echoCancellation","frameRate","height","width","origGetUserMedia","cs","DOMException","sortTracks","filterIceServers","hasTurn","urls","isString","validTurn","RTCIceGatherer","origMSTEnabled","ev","enabled","_eventTarget","createDocumentFragment","ontrack","onremovestream","onsignalingstatechange","oniceconnectionstatechange","onicegatheringstatechange","onnegotiationneeded","ondatachannel","localStreams","remoteStreams","getLocalStreams","getRemoteStreams","signalingState","iceConnectionState","iceOptions","gatherPolicy","usingBundle","bundlePolicy","_config","transceivers","_localIceCandidatesBuffer","_emitGatheringStateChange","_emitBufferedCandidates","sections","sdpMLineIndex","every","iceGatheringStateChange","getConfiguration","clonedStream","clone","idx","clonedTrack","_maybeFireNegotiationNeeded","getReceivers","_getCommonCapabilities","localCapabilities","remoteCapabilities","commonCapabilities","findCodecByPayloadType","rtxCapabilityMatches","lRtx","rRtx","lCodecs","rCodecs","lCodec","rCodec","lHeaderExtension","rHeaderExtension","_createIceAndDtlsTransports","iceTransport","RTCIceTransport","onlocalcandidate","evt","sdpMid","cand","_pendingOffer","onicestatechange","_updateConnectionState","RTCDtlsTransport","ondtlsstatechange","_transceive","recv","encodings","recvEncodingParameters","receive","isIceLite","rejected","isDatachannel","remoteIceParameters","remoteDtlsParameters","_updateSignalingState","hasCallback","receiverList","isComplete","cands","setRemoteCandidates","RTCRtpReceiver","getCapabilities","addTrack","localTrack","RTCRtpSender","trackEvent","states","closed","connecting","checking","completed","failed","disconnected","new","offerOptions","numAudioTracks","numVideoTracks","offerToReceiveAudio","offerToReceiveVideo","wantReceive","addRemoteCandidate","mLineIndex","fixStatsType","inboundrtp","outboundrtp","candidatepair","mozSrcObject","mozRTCPeerConnection","newIceServers","newServer","credential","mozRTCSessionDescription","mozRTCIceCandidate","modernStatsTypes","nativeGetStats","onSucc","onErr","assign","SecurityError","constraintsToFF37_","infos","orgEnumerateDevices","errcb","global","noGlobal","getProto","getPrototypeOf","class2type","hasOwn","fnToString","ObjectFunctionString","support","DOMEval","rtrim","rmsPrefix","rdashAlpha","fcamelCase","letter","jquery","toArray","elems","prevObject","elem","eq","copyIsArray","deep","isFunction","isPlainObject","expando","isReady","isWindow","isNumeric","Ctor","isEmptyObject","globalEval","camelCase","isArrayLike","makeArray","inArray","second","grep","invert","callbackInverse","matches","callbackExpect","proxy","Sizzle","Expr","getText","isXML","select","outermostContext","sortInput","hasDuplicate","setDocument","docElem","documentIsHTML","rbuggyQSA","rbuggyMatches","contains","preferredDoc","dirruns","classCache","createCache","tokenCache","compilerCache","sortOrder","push_native","list","booleans","identifier","pseudos","rwhitespace","rcomma","rcombinators","rattributeQuotes","rpseudo","ridentifier","matchExpr","rinputs","rheader","rnative","rquickExpr","rsibling","runescape","funescape","_","escaped","escapedWhitespace","rcssescape","fcssescape","ch","asCodePoint","unloadHandler","disabledAncestor","addCombinator","disabled","els","nid","groups","newSelector","newContext","getElementById","getElementsByClassName","qsa","getAttribute","toSelector","testContext","querySelectorAll","qsaError","removeAttribute","cacheLength","markFunction","assert","addHandle","attrs","attrHandle","siblingCheck","cur","sourceIndex","nextSibling","createInputPseudo","createButtonPseudo","createDisabledPseudo","isDisabled","createPositionalPseudo","argument","matchIndexes","hasCompare","subWindow","top","attachEvent","className","createComment","getById","getElementsByName","attrId","getAttributeNode","innerHTML","matchesSelector","webkitMatchesSelector","mozMatchesSelector","oMatchesSelector","msMatchesSelector","disconnectedMatch","compareDocumentPosition","adown","bup","compare","sortDetached","aup","ap","bp","elements","specified","sel","uniqueSort","duplicates","detectDuplicates","sortStable","textContent","firstChild","selectors","createPseudo","preFilter","excess","unquoted","nodeNameSelector","check","what","simple","ofType","uniqueCache","outerCache","nodeIndex","useCache","lastChild","uniqueID","pseudo","setFilters","matched","matcher","unmatched","innerText","lang","elemLang","activeElement","hasFocus","tabIndex","checked","selected","selectedIndex","radio","checkbox","image","submit","parseOnly","soFar","preFilters","cached","combinator","skip","checkNonElements","doneName","oldCache","newCache","elementMatcher","matchers","multipleContexts","contexts","condense","newUnmatched","mapped","setMatcher","postFilter","postFinder","postSelector","preMap","postMap","preexisting","matcherIn","matcherOut","matcherFromTokens","checkContext","leadingRelative","implicitRelative","matchContext","matchAnyContext","matcherFromGroupMatchers","elementMatchers","setMatchers","bySet","byElement","superMatcher","outermost","matchedCount","setMatched","contextBackup","dirrunsUnique","compiled","defaultValue","isXMLDoc","escapeSelector","until","siblings","rneedsContext","needsContext","rsingleTag","risSimple","winnow","qualifier","not","rootjQuery","parseHTML","rparentsprev","guaranteedUnique","contents","prev","targets","prevAll","addBack","sibling","parents","parentsUntil","nextAll","nextUntil","prevUntil","contentDocument","rnothtmlwhite","createOptions","flag","Callbacks","firing","memory","fired","locked","firingIndex","stopOnFalse","disable","lock","fireWith","Identity","Thrower","adoptValue","Deferred","tuples","always","deferred","pipe","fns","newDefer","tuple","returned","progress","onFulfilled","onProgress","maxDepth","depth","special","mightThrow","notifyWith","resolveWith","exceptionHook","stackTrace","rejectWith","getStackHook","stateString","singleValue","remaining","resolveContexts","resolveValues","master","updateFunc","rerrorNames","readyException","readyList","readyWait","holdReady","hold","wait","doScroll","access","chainable","emptyGet","bulk","acceptData","owner","Data","configurable","hasData","dataPriv","dataUser","rbrace","rmultiDash","getData","dataAttr","removeData","_data","_removeData","dequeue","startLength","hooks","_queueHooks","setter","clearQueue","count","defer","pnum","rcssNum","cssExpand","isHiddenWithinTree","display","swap","adjustCSS","valueParts","tween","adjusted","scale","maxIterations","currentValue","initial","unit","cssNumber","initialInUnit","defaultDisplayMap","getDefaultDisplay","showHide","show","hide","toggle","rcheckableType","rtagName","rscriptType","wrapMap","thead","col","tr","td","_default","optgroup","tbody","tfoot","colgroup","caption","th","getAll","setGlobalEval","refElements","rhtml","buildFragment","selection","ignored","nodes","createTextNode","htmlPrefilter","div","checkClone","cloneNode","noCloneChecked","rkeyEvent","rmouseEvent","rtypenamespace","returnTrue","returnFalse","safeActiveElement","types","one","origFn","handleObjIn","eventHandle","handleObj","origType","elemData","handle","triggered","dispatch","delegateType","bindType","namespace","delegateCount","setup","mappedTypes","origCount","teardown","removeEvent","nativeEvent","fix","handlerQueue","delegateTarget","preDispatch","isPropagationStopped","currentTarget","isImmediatePropagationStopped","rnamespace","preventDefault","stopPropagation","postDispatch","matchedHandlers","matchedSelectors","button","addProp","hook","originalEvent","writable","noBubble","focus","trigger","blur","click","beforeunload","returnValue","props","isDefaultPrevented","defaultPrevented","relatedTarget","isSimulated","stopImmediatePropagation","altKey","bubbles","cancelable","changedTouches","ctrlKey","detail","eventPhase","metaKey","pageX","pageY","shiftKey","charCode","keyCode","buttons","clientX","clientY","offsetX","offsetY","pointerId","pointerType","screenX","screenY","targetTouches","toElement","touches","which","mouseenter","mouseleave","pointerenter","pointerleave","orig","related","rxhtmlTag","rnoInnerhtml","rchecked","rscriptTypeMasked","rcleanScript","manipulationTarget","disableScript","restoreScript","cloneCopyEvent","pdataOld","pdataCur","udataOld","udataCur","fixInput","domManip","collection","hasScripts","iNoClone","_evalUrl","keepData","cleanData","dataAndEvents","deepDataAndEvents","srcElements","destElements","inPage","detach","insertBefore","before","after","replaceWith","replaceChild","appendTo","prependTo","insertAfter","original","rmargin","rnumnonpx","getStyles","opener","getComputedStyle","computeStyleTests","cssText","divStyle","pixelPositionVal","reliableMarginLeftVal","marginLeft","boxSizingReliableVal","marginRight","pixelMarginRightVal","backgroundClip","clearCloneStyle","pixelPosition","boxSizingReliable","pixelMarginRight","reliableMarginLeft","curCSS","computed","maxWidth","getPropertyValue","addGetHookIf","conditionFn","hookFn","rdisplayswap","cssShow","visibility","cssNormalTransform","letterSpacing","fontWeight","cssPrefixes","emptyStyle","vendorPropName","capName","setPositiveNumber","subtract","augmentWidthOrHeight","extra","isBorderBox","getWidthOrHeight","valueIsBorderBox","getClientRects","getBoundingClientRect","cssHooks","opacity","cssProps","origName","left","margin","border","suffix","expand","expanded","Tween","easing","propHooks","percent","eased","fx","scrollTop","scrollLeft","linear","swing","cos","PI","fxNow","timerId","rfxtypes","rrun","raf","requestAnimationFrame","tick","createFxNow","genFx","includeWidth","createTween","animation","Animation","tweeners","defaultPrefilter","oldfire","propTween","restoreDisplay","isBox","anim","hidden","dataShow","unqueued","overflow","overflowX","overflowY","propFilter","specialEasing","properties","prefilters","startTime","tweens","originalProperties","originalOptions","gotoEnd","tweener","prefilter","speed","speeds","fadeTo","animate","optall","doAnimation","finish","stopQueue","timers","cssFn","slideDown","slideUp","slideToggle","fadeIn","fadeOut","fadeToggle","cancelAnimationFrame","slow","fast","checkOn","optSelected","radioValue","boolHook","removeAttr","nType","attrHooks","attrNames","getter","lowercaseName","rfocusable","rclickable","removeProp","propFix","tabindex","stripAndCollapse","getClass","addClass","classes","curValue","clazz","finalValue","removeClass","toggleClass","stateVal","classNames","hasClass","rreturn","valHooks","optionSet","rfocusMorph","onlyHandlers","bubbleType","ontype","eventPath","isTrigger","parentWindow","simulate","triggerHandler","hover","fnOver","fnOut","focusin","attaches","rquery","parseXML","rbracket","rCRLF","rsubmitterTypes","rsubmittable","buildParams","traditional","valueOrFunction","serialize","serializeArray","r20","rhash","rantiCache","rheaders","rlocalProtocol","rnoContent","rprotocol","allTypes","originAnchor","addToPrefiltersOrTransports","structure","dataTypeExpression","dataTypes","inspectPrefiltersOrTransports","jqXHR","inspected","seekingTransport","inspect","prefilterOrFactory","dataTypeOrTransport","ajaxExtend","flatOptions","ajaxSettings","ajaxHandleResponses","ct","finalDataType","firstDataType","mimeType","converters","ajaxConvert","isSuccess","conv2","conv","responseFields","dataFilter","throws","lastModified","etag","isLocal","processData","accepts","ajaxSetup","ajaxPrefilter","ajaxTransport","cacheURL","responseHeadersString","responseHeaders","timeoutTimer","urlAnchor","fireGlobals","uncached","callbackContext","globalEventContext","completeDeferred","requestHeaders","requestHeadersNames","strAbort","getAllResponseHeaders","statusText","finalText","hasContent","ifModified","nativeStatusText","modified","getJSON","getScript","wrapAll","firstElementChild","wrapInner","unwrap","visible","offsetWidth","offsetHeight","xhrSuccessStatus","xhrSupported","cors","xhrFields","onabort","scriptCharset","oldCallbacks","rjsonp","jsonpCallback","originalSettings","callbackName","overwritten","responseContainer","jsonProp","createHTMLDocument","keepScripts","animated","getWindow","setOffset","curPosition","curLeft","curCSSTop","curTop","curOffset","curCSSLeft","calculatePosition","curElem","using","win","rect","pageYOffset","clientTop","pageXOffset","clientLeft","offsetParent","parentOffset","scrollTo","Height","Width","defaultExtra","funcName","unbind","delegate","undelegate","parseJSON","define","_jQuery","_$","noConflict"],"mappings":"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","file":"stage.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"stage\"] = factory();\n\telse\n\t\troot[\"stage\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 58);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f24412cd425b8597abeb","module.exports = global[\"$\"] = require(\"-!/Users/cci/repository/nodefony-stage/node_modules/expose-loader/index.js?jQuery!/Users/cci/repository/nodefony-stage/node_modules/babel-loader/lib/index.js??ref--8-0!./jquery.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/jquery/dist/jquery.js\n// module id = 0\n// module chunks = 0","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar logDisabled_ = true;\n\n// Utility methods.\nvar utils = {\n  disableLog: function(bool) {\n    if (typeof bool !== 'boolean') {\n      return new Error('Argument type: ' + typeof bool +\n          '. Please use a boolean.');\n    }\n    logDisabled_ = bool;\n    return (bool) ? 'adapter.js logging disabled' :\n        'adapter.js logging enabled';\n  },\n\n  log: function() {\n    if (typeof window === 'object') {\n      if (logDisabled_) {\n        return;\n      }\n      if (typeof console !== 'undefined' && typeof console.log === 'function') {\n        console.log.apply(console, arguments);\n      }\n    }\n  },\n\n  /**\n   * Extract browser version out of the provided user agent string.\n   *\n   * @param {!string} uastring userAgent string.\n   * @param {!string} expr Regular expression used as match criteria.\n   * @param {!number} pos position in the version string to be returned.\n   * @return {!number} browser version.\n   */\n  extractVersion: function(uastring, expr, pos) {\n    var match = uastring.match(expr);\n    return match && match.length >= pos && parseInt(match[pos], 10);\n  },\n\n  /**\n   * Browser detector.\n   *\n   * @return {object} result containing browser and version\n   *     properties.\n   */\n  detectBrowser: function() {\n    // Returned result object.\n    var result = {};\n    result.browser = null;\n    result.version = null;\n\n    // Fail early if it's not a browser\n    if (typeof window === 'undefined' || !window.navigator) {\n      result.browser = 'Not a browser.';\n      return result;\n    }\n\n    // Firefox.\n    if (navigator.mozGetUserMedia) {\n      result.browser = 'firefox';\n      result.version = this.extractVersion(navigator.userAgent,\n          /Firefox\\/(\\d+)\\./, 1);\n    } else if (navigator.webkitGetUserMedia) {\n      // Chrome, Chromium, Webview, Opera, all use the chrome shim for now\n      if (window.webkitRTCPeerConnection) {\n        result.browser = 'chrome';\n        result.version = this.extractVersion(navigator.userAgent,\n          /Chrom(e|ium)\\/(\\d+)\\./, 2);\n      } else { // Safari (in an unpublished version) or unknown webkit-based.\n        if (navigator.userAgent.match(/Version\\/(\\d+).(\\d+)/)) {\n          result.browser = 'safari';\n          result.version = this.extractVersion(navigator.userAgent,\n            /AppleWebKit\\/(\\d+)\\./, 1);\n        } else { // unknown webkit-based browser.\n          result.browser = 'Unsupported webkit-based browser ' +\n              'with GUM support but no WebRTC support.';\n          return result;\n        }\n      }\n    } else if (navigator.mediaDevices &&\n        navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) { // Edge.\n      result.browser = 'edge';\n      result.version = this.extractVersion(navigator.userAgent,\n          /Edge\\/(\\d+).(\\d+)$/, 2);\n    } else if (navigator.mediaDevices &&\n        navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) {\n        // Safari, with webkitGetUserMedia removed.\n      result.browser = 'safari';\n      result.version = this.extractVersion(navigator.userAgent,\n          /AppleWebKit\\/(\\d+)\\./, 1);\n    } else { // Default fallthrough: not supported.\n      result.browser = 'Not a supported browser.';\n      return result;\n    }\n\n    return result;\n  },\n\n  // shimCreateObjectURL must be called before shimSourceObject to avoid loop.\n\n  shimCreateObjectURL: function() {\n    if (!(typeof window === 'object' && window.HTMLMediaElement &&\n          'srcObject' in window.HTMLMediaElement.prototype)) {\n      // Only shim CreateObjectURL using srcObject if srcObject exists.\n      return undefined;\n    }\n\n    var nativeCreateObjectURL = URL.createObjectURL.bind(URL);\n    var nativeRevokeObjectURL = URL.revokeObjectURL.bind(URL);\n    var streams = new Map(), newId = 0;\n\n    URL.createObjectURL = function(stream) {\n      if ('getTracks' in stream) {\n        var url = 'polyblob:' + (++newId);\n        streams.set(url, stream);\n        console.log('URL.createObjectURL(stream) is deprecated! ' +\n                    'Use elem.srcObject = stream instead!');\n        return url;\n      }\n      return nativeCreateObjectURL(stream);\n    };\n    URL.revokeObjectURL = function(url) {\n      nativeRevokeObjectURL(url);\n      streams.delete(url);\n    };\n\n    var dsc = Object.getOwnPropertyDescriptor(window.HTMLMediaElement.prototype,\n                                              'src');\n    Object.defineProperty(window.HTMLMediaElement.prototype, 'src', {\n      get: function() {\n        return dsc.get.apply(this);\n      },\n      set: function(url) {\n        this.srcObject = streams.get(url) || null;\n        return dsc.set.apply(this, [url]);\n      }\n    });\n\n    var nativeSetAttribute = HTMLMediaElement.prototype.setAttribute;\n    HTMLMediaElement.prototype.setAttribute = function() {\n      if (arguments.length === 2 &&\n          ('' + arguments[0]).toLowerCase() === 'src') {\n        this.srcObject = streams.get(arguments[1]) || null;\n      }\n      return nativeSetAttribute.apply(this, arguments);\n    };\n  }\n};\n\n// Export.\nmodule.exports = {\n  log: utils.log,\n  disableLog: utils.disableLog,\n  browserDetails: utils.detectBrowser(),\n  extractVersion: utils.extractVersion,\n  shimCreateObjectURL: utils.shimCreateObjectURL,\n  detectBrowser: utils.detectBrowser.bind(utils)\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/webrtc-adapter/src/js/utils.js","'use strict';\n\nvar randomFromSeed = require('./random/random-from-seed');\n\nvar ORIGINAL = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-';\nvar alphabet;\nvar previousSeed;\n\nvar shuffled;\n\nfunction reset() {\n    shuffled = false;\n}\n\nfunction setCharacters(_alphabet_) {\n    if (!_alphabet_) {\n        if (alphabet !== ORIGINAL) {\n            alphabet = ORIGINAL;\n            reset();\n        }\n        return;\n    }\n\n    if (_alphabet_ === alphabet) {\n        return;\n    }\n\n    if (_alphabet_.length !== ORIGINAL.length) {\n        throw new Error('Custom alphabet for shortid must be ' + ORIGINAL.length + ' unique characters. You submitted ' + _alphabet_.length + ' characters: ' + _alphabet_);\n    }\n\n    var unique = _alphabet_.split('').filter(function(item, ind, arr){\n       return ind !== arr.lastIndexOf(item);\n    });\n\n    if (unique.length) {\n        throw new Error('Custom alphabet for shortid must be ' + ORIGINAL.length + ' unique characters. These characters were not unique: ' + unique.join(', '));\n    }\n\n    alphabet = _alphabet_;\n    reset();\n}\n\nfunction characters(_alphabet_) {\n    setCharacters(_alphabet_);\n    return alphabet;\n}\n\nfunction setSeed(seed) {\n    randomFromSeed.seed(seed);\n    if (previousSeed !== seed) {\n        reset();\n        previousSeed = seed;\n    }\n}\n\nfunction shuffle() {\n    if (!alphabet) {\n        setCharacters(ORIGINAL);\n    }\n\n    var sourceArray = alphabet.split('');\n    var targetArray = [];\n    var r = randomFromSeed.nextValue();\n    var characterIndex;\n\n    while (sourceArray.length > 0) {\n        r = randomFromSeed.nextValue();\n        characterIndex = Math.floor(r * sourceArray.length);\n        targetArray.push(sourceArray.splice(characterIndex, 1)[0]);\n    }\n    return targetArray.join('');\n}\n\nfunction getShuffled() {\n    if (shuffled) {\n        return shuffled;\n    }\n    shuffled = shuffle();\n    return shuffled;\n}\n\n/**\n * lookup shuffled letter\n * @param index\n * @returns {string}\n */\nfunction lookup(index) {\n    var alphabetShuffled = getShuffled();\n    return alphabetShuffled[index];\n}\n\nmodule.exports = {\n    characters: characters,\n    seed: setSeed,\n    lookup: lookup,\n    shuffled: getShuffled\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/shortid/lib/alphabet.js","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// Split a filename into [root, dir, basename, ext], unix version\n// 'root' is just a slash, or nothing.\nvar splitPathRe =\n    /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\nvar splitPath = function(filename) {\n  return splitPathRe.exec(filename).slice(1);\n};\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function(path) {\n  var result = splitPath(path),\n      root = result[0],\n      dir = result[1];\n\n  if (!root && !dir) {\n    // No dirname whatsoever\n    return '.';\n  }\n\n  if (dir) {\n    // It has a dirname, strip trailing slash\n    dir = dir.substr(0, dir.length - 1);\n  }\n\n  return root + dir;\n};\n\n\nexports.basename = function(path, ext) {\n  var f = splitPath(path)[2];\n  // TODO: make this comparison case-insensitive on windows?\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\n\nexports.extname = function(path) {\n  return splitPath(path)[3];\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n\n\n\n// WEBPACK FOOTER //\n// ./~/path-browserify/index.js","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory((function webpackLoadOptionalExternalModule() { try { return require(\"fs\"); } catch(e) {} }()), require(\"path\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"fs\", \"path\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Twig\"] = factory((function webpackLoadOptionalExternalModule() { try { return require(\"fs\"); } catch(e) {} }()), require(\"path\"));\n\telse\n\t\troot[\"Twig\"] = factory(root[\"fs\"], root[\"path\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_19__, __WEBPACK_EXTERNAL_MODULE_20__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * Twig.js\n\t *\n\t * @copyright 2011-2016 John Roepke and the Twig.js Contributors\n\t * @license   Available under the BSD 2-Clause License\n\t * @link      https://github.com/twigjs/twig.js\n\t */\n\n\tvar Twig = {\n\t    VERSION: '0.10.2'\n\t};\n\n\t__webpack_require__(1)(Twig);\n\t__webpack_require__(2)(Twig);\n\t__webpack_require__(3)(Twig);\n\t__webpack_require__(5)(Twig);\n\t__webpack_require__(6)(Twig);\n\t__webpack_require__(7)(Twig);\n\t__webpack_require__(17)(Twig);\n\t__webpack_require__(18)(Twig);\n\t__webpack_require__(21)(Twig);\n\t__webpack_require__(22)(Twig);\n\t__webpack_require__(23)(Twig);\n\t__webpack_require__(24)(Twig);\n\t__webpack_require__(25)(Twig);\n\t__webpack_require__(26)(Twig);\n\t__webpack_require__(27)(Twig);\n\n\tmodule.exports = Twig.exports;\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t// ## twig.core.js\n\t//\n\t// This file handles template level tokenizing, compiling and parsing.\n\tmodule.exports = function (Twig) {\n\t    \"use strict\";\n\n\t    Twig.trace = false;\n\t    Twig.debug = false;\n\n\t    // Default caching to true for the improved performance it offers\n\t    Twig.cache = true;\n\n\t    Twig.noop = function() {};\n\n\t    Twig.placeholders = {\n\t        parent: \"{{|PARENT|}}\"\n\t    };\n\n\t    /**\n\t     * Fallback for Array.indexOf for IE8 et al\n\t     */\n\t    Twig.indexOf = function (arr, searchElement /*, fromIndex */ ) {\n\t        if (Array.prototype.hasOwnProperty(\"indexOf\")) {\n\t            return arr.indexOf(searchElement);\n\t        }\n\t        if (arr === void 0 || arr === null) {\n\t            throw new TypeError();\n\t        }\n\t        var t = Object(arr);\n\t        var len = t.length >>> 0;\n\t        if (len === 0) {\n\t            return -1;\n\t        }\n\t        var n = 0;\n\t        if (arguments.length > 0) {\n\t            n = Number(arguments[1]);\n\t            if (n !== n) { // shortcut for verifying if it's NaN\n\t                n = 0;\n\t            } else if (n !== 0 && n !== Infinity && n !== -Infinity) {\n\t                n = (n > 0 || -1) * Math.floor(Math.abs(n));\n\t            }\n\t        }\n\t        if (n >= len) {\n\t            // console.log(\"indexOf not found1 \", JSON.stringify(searchElement), JSON.stringify(arr));\n\t            return -1;\n\t        }\n\t        var k = n >= 0 ? n : Math.max(len - Math.abs(n), 0);\n\t        for (; k < len; k++) {\n\t            if (k in t && t[k] === searchElement) {\n\t                return k;\n\t            }\n\t        }\n\t        if (arr == searchElement) {\n\t            return 0;\n\t        }\n\t        // console.log(\"indexOf not found2 \", JSON.stringify(searchElement), JSON.stringify(arr));\n\n\t        return -1;\n\t    }\n\n\t    Twig.forEach = function (arr, callback, thisArg) {\n\t        if (Array.prototype.forEach ) {\n\t            return arr.forEach(callback, thisArg);\n\t        }\n\n\t        var T, k;\n\n\t        if ( arr == null ) {\n\t          throw new TypeError( \" this is null or not defined\" );\n\t        }\n\n\t        // 1. Let O be the result of calling ToObject passing the |this| value as the argument.\n\t        var O = Object(arr);\n\n\t        // 2. Let lenValue be the result of calling the Get internal method of O with the argument \"length\".\n\t        // 3. Let len be ToUint32(lenValue).\n\t        var len = O.length >>> 0; // Hack to convert O.length to a UInt32\n\n\t        // 4. If IsCallable(callback) is false, throw a TypeError exception.\n\t        // See: http://es5.github.com/#x9.11\n\t        if ( {}.toString.call(callback) != \"[object Function]\" ) {\n\t          throw new TypeError( callback + \" is not a function\" );\n\t        }\n\n\t        // 5. If thisArg was supplied, let T be thisArg; else let T be undefined.\n\t        if ( thisArg ) {\n\t          T = thisArg;\n\t        }\n\n\t        // 6. Let k be 0\n\t        k = 0;\n\n\t        // 7. Repeat, while k < len\n\t        while( k < len ) {\n\n\t          var kValue;\n\n\t          // a. Let Pk be ToString(k).\n\t          //   This is implicit for LHS operands of the in operator\n\t          // b. Let kPresent be the result of calling the HasProperty internal method of O with argument Pk.\n\t          //   This step can be combined with c\n\t          // c. If kPresent is true, then\n\t          if ( k in O ) {\n\n\t            // i. Let kValue be the result of calling the Get internal method of O with argument Pk.\n\t            kValue = O[ k ];\n\n\t            // ii. Call the Call internal method of callback with T as the this value and\n\t            // argument list containing kValue, k, and O.\n\t            callback.call( T, kValue, k, O );\n\t          }\n\t          // d. Increase k by 1.\n\t          k++;\n\t        }\n\t        // 8. return undefined\n\t    };\n\n\t    Twig.merge = function(target, source, onlyChanged) {\n\t        Twig.forEach(Object.keys(source), function (key) {\n\t            if (onlyChanged && !(key in target)) {\n\t                return;\n\t            }\n\n\t            target[key] = source[key]\n\t        });\n\n\t        return target;\n\t    };\n\n\t    /**\n\t     * Exception thrown by twig.js.\n\t     */\n\t    Twig.Error = function(message) {\n\t       this.message = message;\n\t       this.name = \"TwigException\";\n\t       this.type = \"TwigException\";\n\t    };\n\n\t    /**\n\t     * Get the string representation of a Twig error.\n\t     */\n\t    Twig.Error.prototype.toString = function() {\n\t        var output = this.name + \": \" + this.message;\n\n\t        return output;\n\t    };\n\n\t    /**\n\t     * Wrapper for logging to the console.\n\t     */\n\t    Twig.log = {\n\t        trace: function() {if (Twig.trace && console) {console.log(Array.prototype.slice.call(arguments));}},\n\t        debug: function() {if (Twig.debug && console) {console.log(Array.prototype.slice.call(arguments));}}\n\t    };\n\n\n\t    if (typeof console !== \"undefined\") {\n\t        if (typeof console.error !== \"undefined\") {\n\t            Twig.log.error = function() {\n\t                console.error.apply(console, arguments);\n\t            }\n\t        } else if (typeof console.log !== \"undefined\") {\n\t            Twig.log.error = function() {\n\t                console.log.apply(console, arguments);\n\t            }\n\t        }\n\t    } else {\n\t        Twig.log.error = function(){};\n\t    }\n\n\t    /**\n\t     * Wrapper for child context objects in Twig.\n\t     *\n\t     * @param {Object} context Values to initialize the context with.\n\t     */\n\t    Twig.ChildContext = function(context) {\n\t        var ChildContext = function ChildContext() {};\n\t        ChildContext.prototype = context;\n\t        return new ChildContext();\n\t    };\n\n\t    /**\n\t     * Container for methods related to handling high level template tokens\n\t     *      (for example: {{ expression }}, {% logic %}, {# comment #}, raw data)\n\t     */\n\t    Twig.token = {};\n\n\t    /**\n\t     * Token types.\n\t     */\n\t    Twig.token.type = {\n\t        output:                 'output',\n\t        logic:                  'logic',\n\t        comment:                'comment',\n\t        raw:                    'raw',\n\t        output_whitespace_pre:  'output_whitespace_pre',\n\t        output_whitespace_post: 'output_whitespace_post',\n\t        output_whitespace_both: 'output_whitespace_both',\n\t        logic_whitespace_pre:   'logic_whitespace_pre',\n\t        logic_whitespace_post:  'logic_whitespace_post',\n\t        logic_whitespace_both:  'logic_whitespace_both'\n\t    };\n\n\t    /**\n\t     * Token syntax definitions.\n\t     */\n\t    Twig.token.definitions = [\n\t        {\n\t            type: Twig.token.type.raw,\n\t            open: '{% raw %}',\n\t            close: '{% endraw %}'\n\t        },\n\t        {\n\t            type: Twig.token.type.raw,\n\t            open: '{% verbatim %}',\n\t            close: '{% endverbatim %}'\n\t        },\n\t        // *Whitespace type tokens*\n\t        //\n\t        // These typically take the form `{{- expression -}}` or `{{- expression }}` or `{{ expression -}}`.\n\t        {\n\t            type: Twig.token.type.output_whitespace_pre,\n\t            open: '{{-',\n\t            close: '}}'\n\t        },\n\t        {\n\t            type: Twig.token.type.output_whitespace_post,\n\t            open: '{{',\n\t            close: '-}}'\n\t        },\n\t        {\n\t            type: Twig.token.type.output_whitespace_both,\n\t            open: '{{-',\n\t            close: '-}}'\n\t        },\n\t        {\n\t            type: Twig.token.type.logic_whitespace_pre,\n\t            open: '{%-',\n\t            close: '%}'\n\t        },\n\t        {\n\t            type: Twig.token.type.logic_whitespace_post,\n\t            open: '{%',\n\t            close: '-%}'\n\t        },\n\t        {\n\t            type: Twig.token.type.logic_whitespace_both,\n\t            open: '{%-',\n\t            close: '-%}'\n\t        },\n\t        // *Output type tokens*\n\t        //\n\t        // These typically take the form `{{ expression }}`.\n\t        {\n\t            type: Twig.token.type.output,\n\t            open: '{{',\n\t            close: '}}'\n\t        },\n\t        // *Logic type tokens*\n\t        //\n\t        // These typically take a form like `{% if expression %}` or `{% endif %}`\n\t        {\n\t            type: Twig.token.type.logic,\n\t            open: '{%',\n\t            close: '%}'\n\t        },\n\t        // *Comment type tokens*\n\t        //\n\t        // These take the form `{# anything #}`\n\t        {\n\t            type: Twig.token.type.comment,\n\t            open: '{#',\n\t            close: '#}'\n\t        }\n\t    ];\n\n\n\t    /**\n\t     * What characters start \"strings\" in token definitions. We need this to ignore token close\n\t     * strings inside an expression.\n\t     */\n\t    Twig.token.strings = ['\"', \"'\"];\n\n\t    Twig.token.findStart = function (template) {\n\t        var output = {\n\t                position: null,\n\t                close_position: null,\n\t                def: null\n\t            },\n\t            i,\n\t            token_template,\n\t            first_key_position,\n\t            close_key_position;\n\n\t        for (i=0;i<Twig.token.definitions.length;i++) {\n\t            token_template = Twig.token.definitions[i];\n\t            first_key_position = template.indexOf(token_template.open);\n\t            close_key_position = template.indexOf(token_template.close);\n\n\t            Twig.log.trace(\"Twig.token.findStart: \", \"Searching for \", token_template.open, \" found at \", first_key_position);\n\n\t            //Special handling for mismatched tokens\n\t            if (first_key_position >= 0) {\n\t                //This token matches the template\n\t                if (token_template.open.length !== token_template.close.length) {\n\t                    //This token has mismatched closing and opening tags\n\t                    if (close_key_position < 0) {\n\t                        //This token's closing tag does not match the template\n\t                        continue;\n\t                    }\n\t                }\n\t            }\n\t            // Does this token occur before any other types?\n\t            if (first_key_position >= 0 && (output.position === null || first_key_position < output.position)) {\n\t                output.position = first_key_position;\n\t                output.def = token_template;\n\t                output.close_position = close_key_position;\n\t            } else if (first_key_position >= 0 && output.position !== null && first_key_position === output.position) {\n\t                /*This token exactly matches another token,\n\t                greedily match to check if this token has a greater specificity*/\n\t                if (token_template.open.length > output.def.open.length) {\n\t                    //This token's opening tag is more specific than the previous match\n\t                    output.position = first_key_position;\n\t                    output.def = token_template;\n\t                    output.close_position = close_key_position;\n\t                } else if (token_template.open.length === output.def.open.length) {\n\t                    if (token_template.close.length > output.def.close.length) {\n\t                        //This token's opening tag is as specific as the previous match,\n\t                        //but the closing tag has greater specificity\n\t                        if (close_key_position >= 0 && close_key_position < output.close_position) {\n\t                            //This token's closing tag exists in the template,\n\t                            //and it occurs sooner than the previous match\n\t                            output.position = first_key_position;\n\t                            output.def = token_template;\n\t                            output.close_position = close_key_position;\n\t                        }\n\t                    } else if (close_key_position >= 0 && close_key_position < output.close_position) {\n\t                        //This token's closing tag is not more specific than the previous match,\n\t                        //but it occurs sooner than the previous match\n\t                        output.position = first_key_position;\n\t                        output.def = token_template;\n\t                        output.close_position = close_key_position;\n\t                    }\n\t                }\n\t            }\n\t        }\n\n\t        delete output['close_position'];\n\n\t        return output;\n\t    };\n\n\t    Twig.token.findEnd = function (template, token_def, start) {\n\t        var end = null,\n\t            found = false,\n\t            offset = 0,\n\n\t            // String position variables\n\t            str_pos = null,\n\t            str_found = null,\n\t            pos = null,\n\t            end_offset = null,\n\t            this_str_pos = null,\n\t            end_str_pos = null,\n\n\t            // For loop variables\n\t            i,\n\t            l;\n\n\t        while (!found) {\n\t            str_pos = null;\n\t            str_found = null;\n\t            pos = template.indexOf(token_def.close, offset);\n\n\t            if (pos >= 0) {\n\t                end = pos;\n\t                found = true;\n\t            } else {\n\t                // throw an exception\n\t                throw new Twig.Error(\"Unable to find closing bracket '\" + token_def.close +\n\t                                \"'\" + \" opened near template position \" + start);\n\t            }\n\n\t            // Ignore quotes within comments; just look for the next comment close sequence,\n\t            // regardless of what comes before it. https://github.com/justjohn/twig.js/issues/95\n\t            if (token_def.type === Twig.token.type.comment) {\n\t              break;\n\t            }\n\t            // Ignore quotes within raw tag\n\t            // Fixes #283\n\t            if (token_def.type === Twig.token.type.raw) {\n\t                break;\n\t            }\n\n\t            l = Twig.token.strings.length;\n\t            for (i = 0; i < l; i += 1) {\n\t                this_str_pos = template.indexOf(Twig.token.strings[i], offset);\n\n\t                if (this_str_pos > 0 && this_str_pos < pos &&\n\t                        (str_pos === null || this_str_pos < str_pos)) {\n\t                    str_pos = this_str_pos;\n\t                    str_found = Twig.token.strings[i];\n\t                }\n\t            }\n\n\t            // We found a string before the end of the token, now find the string's end and set the search offset to it\n\t            if (str_pos !== null) {\n\t                end_offset = str_pos + 1;\n\t                end = null;\n\t                found = false;\n\t                while (true) {\n\t                    end_str_pos = template.indexOf(str_found, end_offset);\n\t                    if (end_str_pos < 0) {\n\t                        throw \"Unclosed string in template\";\n\t                    }\n\t                    // Ignore escaped quotes\n\t                    if (template.substr(end_str_pos - 1, 1) !== \"\\\\\") {\n\t                        offset = end_str_pos + 1;\n\t                        break;\n\t                    } else {\n\t                        end_offset = end_str_pos + 1;\n\t                    }\n\t                }\n\t            }\n\t        }\n\t        return end;\n\t    };\n\n\t    /**\n\t     * Convert a template into high-level tokens.\n\t     */\n\t    Twig.tokenize = function (template) {\n\t        var tokens = [],\n\t            // An offset for reporting errors locations in the template.\n\t            error_offset = 0,\n\n\t            // The start and type of the first token found in the template.\n\t            found_token = null,\n\t            // The end position of the matched token.\n\t            end = null;\n\n\t        while (template.length > 0) {\n\t            // Find the first occurance of any token type in the template\n\t            found_token = Twig.token.findStart(template);\n\n\t            Twig.log.trace(\"Twig.tokenize: \", \"Found token: \", found_token);\n\n\t            if (found_token.position !== null) {\n\t                // Add a raw type token for anything before the start of the token\n\t                if (found_token.position > 0) {\n\t                    tokens.push({\n\t                        type: Twig.token.type.raw,\n\t                        value: template.substring(0, found_token.position)\n\t                    });\n\t                }\n\t                template = template.substr(found_token.position + found_token.def.open.length);\n\t                error_offset += found_token.position + found_token.def.open.length;\n\n\t                // Find the end of the token\n\t                end = Twig.token.findEnd(template, found_token.def, error_offset);\n\n\t                Twig.log.trace(\"Twig.tokenize: \", \"Token ends at \", end);\n\n\t                tokens.push({\n\t                    type:  found_token.def.type,\n\t                    value: template.substring(0, end).trim()\n\t                });\n\n\t                if (template.substr( end + found_token.def.close.length, 1 ) === \"\\n\") {\n\t                    switch (found_token.def.type) {\n\t                        case \"logic_whitespace_pre\":\n\t                        case \"logic_whitespace_post\":\n\t                        case \"logic_whitespace_both\":\n\t                        case \"logic\":\n\t                            // Newlines directly after logic tokens are ignored\n\t                            end += 1;\n\t                            break;\n\t                    }\n\t                }\n\n\t                template = template.substr(end + found_token.def.close.length);\n\n\t                // Increment the position in the template\n\t                error_offset += end + found_token.def.close.length;\n\n\t            } else {\n\t                // No more tokens -> add the rest of the template as a raw-type token\n\t                tokens.push({\n\t                    type: Twig.token.type.raw,\n\t                    value: template\n\t                });\n\t                template = '';\n\t            }\n\t        }\n\n\t        return tokens;\n\t    };\n\n\n\t    Twig.compile = function (tokens) {\n\t        try {\n\n\t            // Output and intermediate stacks\n\t            var output = [],\n\t                stack = [],\n\t                // The tokens between open and close tags\n\t                intermediate_output = [],\n\n\t                token = null,\n\t                logic_token = null,\n\t                unclosed_token = null,\n\t                // Temporary previous token.\n\t                prev_token = null,\n\t                // Temporary previous output.\n\t                prev_output = null,\n\t                // Temporary previous intermediate output.\n\t                prev_intermediate_output = null,\n\t                // The previous token's template\n\t                prev_template = null,\n\t                // Token lookahead\n\t                next_token = null,\n\t                // The output token\n\t                tok_output = null,\n\n\t                // Logic Token values\n\t                type = null,\n\t                open = null,\n\t                next = null;\n\n\t            var compile_output = function(token) {\n\t                Twig.expression.compile.apply(this, [token]);\n\t                if (stack.length > 0) {\n\t                    intermediate_output.push(token);\n\t                } else {\n\t                    output.push(token);\n\t                }\n\t            };\n\n\t            var compile_logic = function(token) {\n\t                // Compile the logic token\n\t                logic_token = Twig.logic.compile.apply(this, [token]);\n\n\t                type = logic_token.type;\n\t                open = Twig.logic.handler[type].open;\n\t                next = Twig.logic.handler[type].next;\n\n\t                Twig.log.trace(\"Twig.compile: \", \"Compiled logic token to \", logic_token,\n\t                                                 \" next is: \", next, \" open is : \", open);\n\n\t                // Not a standalone token, check logic stack to see if this is expected\n\t                if (open !== undefined && !open) {\n\t                    prev_token = stack.pop();\n\t                    prev_template = Twig.logic.handler[prev_token.type];\n\n\t                    if (Twig.indexOf(prev_template.next, type) < 0) {\n\t                        throw new Error(type + \" not expected after a \" + prev_token.type);\n\t                    }\n\n\t                    prev_token.output = prev_token.output || [];\n\n\t                    prev_token.output = prev_token.output.concat(intermediate_output);\n\t                    intermediate_output = [];\n\n\t                    tok_output = {\n\t                        type: Twig.token.type.logic,\n\t                        token: prev_token\n\t                    };\n\t                    if (stack.length > 0) {\n\t                        intermediate_output.push(tok_output);\n\t                    } else {\n\t                        output.push(tok_output);\n\t                    }\n\t                }\n\n\t                // This token requires additional tokens to complete the logic structure.\n\t                if (next !== undefined && next.length > 0) {\n\t                    Twig.log.trace(\"Twig.compile: \", \"Pushing \", logic_token, \" to logic stack.\");\n\n\t                    if (stack.length > 0) {\n\t                        // Put any currently held output into the output list of the logic operator\n\t                        // currently at the head of the stack before we push a new one on.\n\t                        prev_token = stack.pop();\n\t                        prev_token.output = prev_token.output || [];\n\t                        prev_token.output = prev_token.output.concat(intermediate_output);\n\t                        stack.push(prev_token);\n\t                        intermediate_output = [];\n\t                    }\n\n\t                    // Push the new logic token onto the logic stack\n\t                    stack.push(logic_token);\n\n\t                } else if (open !== undefined && open) {\n\t                    tok_output = {\n\t                        type: Twig.token.type.logic,\n\t                        token: logic_token\n\t                    };\n\t                    // Standalone token (like {% set ... %}\n\t                    if (stack.length > 0) {\n\t                        intermediate_output.push(tok_output);\n\t                    } else {\n\t                        output.push(tok_output);\n\t                    }\n\t                }\n\t            };\n\n\t            while (tokens.length > 0) {\n\t                token = tokens.shift();\n\t                prev_output = output[output.length - 1];\n\t                prev_intermediate_output = intermediate_output[intermediate_output.length - 1];\n\t                next_token = tokens[0];\n\t                Twig.log.trace(\"Compiling token \", token);\n\t                switch (token.type) {\n\t                    case Twig.token.type.raw:\n\t                        if (stack.length > 0) {\n\t                            intermediate_output.push(token);\n\t                        } else {\n\t                            output.push(token);\n\t                        }\n\t                        break;\n\n\t                    case Twig.token.type.logic:\n\t                        compile_logic.call(this, token);\n\t                        break;\n\n\t                    // Do nothing, comments should be ignored\n\t                    case Twig.token.type.comment:\n\t                        break;\n\n\t                    case Twig.token.type.output:\n\t                        compile_output.call(this, token);\n\t                        break;\n\n\t                    //Kill whitespace ahead and behind this token\n\t                    case Twig.token.type.logic_whitespace_pre:\n\t                    case Twig.token.type.logic_whitespace_post:\n\t                    case Twig.token.type.logic_whitespace_both:\n\t                    case Twig.token.type.output_whitespace_pre:\n\t                    case Twig.token.type.output_whitespace_post:\n\t                    case Twig.token.type.output_whitespace_both:\n\t                        if (token.type !== Twig.token.type.output_whitespace_post && token.type !== Twig.token.type.logic_whitespace_post) {\n\t                            if (prev_output) {\n\t                                //If the previous output is raw, pop it off\n\t                                if (prev_output.type === Twig.token.type.raw) {\n\t                                    output.pop();\n\n\t                                    //If the previous output is not just whitespace, trim it\n\t                                    if (prev_output.value.match(/^\\s*$/) === null) {\n\t                                        prev_output.value = prev_output.value.trim();\n\t                                        //Repush the previous output\n\t                                        output.push(prev_output);\n\t                                    }\n\t                                }\n\t                            }\n\n\t                            if (prev_intermediate_output) {\n\t                                //If the previous intermediate output is raw, pop it off\n\t                                if (prev_intermediate_output.type === Twig.token.type.raw) {\n\t                                    intermediate_output.pop();\n\n\t                                    //If the previous output is not just whitespace, trim it\n\t                                    if (prev_intermediate_output.value.match(/^\\s*$/) === null) {\n\t                                        prev_intermediate_output.value = prev_intermediate_output.value.trim();\n\t                                        //Repush the previous intermediate output\n\t                                        intermediate_output.push(prev_intermediate_output);\n\t                                    }\n\t                                }\n\t                            }\n\t                        }\n\n\t                        //Compile this token\n\t                        switch (token.type) {\n\t                            case Twig.token.type.output_whitespace_pre:\n\t                            case Twig.token.type.output_whitespace_post:\n\t                            case Twig.token.type.output_whitespace_both:\n\t                                compile_output.call(this, token);\n\t                                break;\n\t                            case Twig.token.type.logic_whitespace_pre:\n\t                            case Twig.token.type.logic_whitespace_post:\n\t                            case Twig.token.type.logic_whitespace_both:\n\t                                compile_logic.call(this, token);\n\t                                break;\n\t                        }\n\n\t                        if (token.type !== Twig.token.type.output_whitespace_pre && token.type !== Twig.token.type.logic_whitespace_pre) {\n\t                            if (next_token) {\n\t                                //If the next token is raw, shift it out\n\t                                if (next_token.type === Twig.token.type.raw) {\n\t                                    tokens.shift();\n\n\t                                    //If the next token is not just whitespace, trim it\n\t                                    if (next_token.value.match(/^\\s*$/) === null) {\n\t                                        next_token.value = next_token.value.trim();\n\t                                        //Unshift the next token\n\t                                        tokens.unshift(next_token);\n\t                                    }\n\t                                }\n\t                            }\n\t                        }\n\n\t                        break;\n\t                }\n\n\t                Twig.log.trace(\"Twig.compile: \", \" Output: \", output,\n\t                                                 \" Logic Stack: \", stack,\n\t                                                 \" Pending Output: \", intermediate_output );\n\t            }\n\n\t            // Verify that there are no logic tokens left in the stack.\n\t            if (stack.length > 0) {\n\t                unclosed_token = stack.pop();\n\t                throw new Error(\"Unable to find an end tag for \" + unclosed_token.type +\n\t                                \", expecting one of \" + unclosed_token.next);\n\t            }\n\t            return output;\n\t        } catch (ex) {\n\t            if (this.options.rethrow) {\n\t                throw ex\n\t            }\n\t            else {\n\t                Twig.log.error(\"Error compiling twig template \" + this.id + \": \");\n\t                if (ex.stack) {\n\t                    Twig.log.error(ex.stack);\n\t                } else {\n\t                    Twig.log.error(ex.toString());\n\t                }\n\t            }\n\t        }\n\t    };\n\n\t    /**\n\t     * Parse a compiled template.\n\t     *\n\t     * @param {Array} tokens The compiled tokens.\n\t     * @param {Object} context The render context.\n\t     *\n\t     * @return {string} The parsed template.\n\t     */\n\t    Twig.parse = function (tokens, context, allow_async) {\n\t        var that = this,\n\t            output = [],\n\n\t            // Store any error that might be thrown by the promise chain.\n\t            err = null,\n\n\t            // This will be set to is_async if template renders synchronously\n\t            is_async = true,\n\t            promise = null,\n\n\t            // Track logic chains\n\t            chain = true;\n\n\n\t        function handleException(ex) {\n\t            if (that.options.rethrow) {\n\t                throw ex;\n\t            }\n\t            else {\n\t                Twig.log.error(\"Error parsing twig template \" + that.id + \": \");\n\t                if (ex.stack) {\n\t                    Twig.log.error(ex.stack);\n\t                } else {\n\t                    Twig.log.error(ex.toString());\n\t                }\n\n\t                if (Twig.debug) {\n\t                    return ex.toString();\n\t                }\n\t            }\n\t        }\n\n\t        promise = Twig.async.forEach(tokens, function parseToken(token) {\n\t            Twig.log.debug(\"Twig.parse: \", \"Parsing token: \", token);\n\n\t            switch (token.type) {\n\t                case Twig.token.type.raw:\n\t                    output.push(Twig.filters.raw(token.value));\n\t                    break;\n\n\t                case Twig.token.type.logic:\n\t                    var logic_token = token.token;\n\n\t                    return Twig.logic.parseAsync.apply(that, [logic_token, context, chain])\n\t                    .then(function(logic) {\n\t                        if (logic.chain !== undefined) {\n\t                            chain = logic.chain;\n\t                        }\n\t                        if (logic.context !== undefined) {\n\t                            context = logic.context;\n\t                        }\n\t                        if (logic.output !== undefined) {\n\t                            output.push(logic.output);\n\t                        }\n\t                    });\n\t                    break;\n\n\t                case Twig.token.type.comment:\n\t                    // Do nothing, comments should be ignored\n\t                    break;\n\n\t                //Fall through whitespace to output\n\t                case Twig.token.type.output_whitespace_pre:\n\t                case Twig.token.type.output_whitespace_post:\n\t                case Twig.token.type.output_whitespace_both:\n\t                case Twig.token.type.output:\n\t                    Twig.log.debug(\"Twig.parse: \", \"Output token: \", token.stack);\n\t                    // Parse the given expression in the given context\n\t                    return Twig.expression.parseAsync.apply(that, [token.stack, context])\n\t                    .then(function(o) {\n\t                        output.push(o);\n\t                    });\n\t            }\n\t        })\n\t        .then(function() {\n\t            output = Twig.output.apply(that, [output]);\n\t            is_async = false;\n\t            return output;\n\t        })\n\t        .catch(function(e) {\n\t            if (allow_async)\n\t                handleException(e);\n\n\t            err = e;\n\t        });\n\n\t        // If `allow_async` we will always return a promise since we do not\n\t        // know in advance if we are going to run asynchronously or not.\n\t        if (allow_async)\n\t            return promise;\n\n\t        // Handle errors here if we fail synchronously.\n\t        if (err !== null)\n\t            return handleException(err);\n\n\t        // If `allow_async` is not true we should not allow the user\n\t        // to use asynchronous functions or filters.\n\t        if (is_async)\n\t            throw new Twig.Error('You are using Twig.js in sync mode in combination with async extensions.');\n\n\t        return output;\n\t    };\n\n\t    /**\n\t     * Tokenize and compile a string template.\n\t     *\n\t     * @param {string} data The template.\n\t     *\n\t     * @return {Array} The compiled tokens.\n\t     */\n\t    Twig.prepare = function(data) {\n\t        var tokens, raw_tokens;\n\n\t        // Tokenize\n\t        Twig.log.debug(\"Twig.prepare: \", \"Tokenizing \", data);\n\t        raw_tokens = Twig.tokenize.apply(this, [data]);\n\n\t        // Compile\n\t        Twig.log.debug(\"Twig.prepare: \", \"Compiling \", raw_tokens);\n\t        tokens = Twig.compile.apply(this, [raw_tokens]);\n\n\t        Twig.log.debug(\"Twig.prepare: \", \"Compiled \", tokens);\n\n\t        return tokens;\n\t    };\n\n\t    /**\n\t     * Join the output token's stack and escape it if needed\n\t     *\n\t     * @param {Array} Output token's stack\n\t     *\n\t     * @return {string|String} Autoescaped output\n\t     */\n\t    Twig.output = function(output) {\n\t        if (!this.options.autoescape) {\n\t            return output.join(\"\");\n\t        }\n\n\t        var strategy = 'html';\n\t        if(typeof this.options.autoescape == 'string')\n\t            strategy = this.options.autoescape;\n\n\t        // [].map would be better but it's not supported by IE8-\n\t        var escaped_output = [];\n\t        Twig.forEach(output, function (str) {\n\t            if (str && (str.twig_markup !== true && str.twig_markup != strategy)) {\n\t                str = Twig.filters.escape(str, [ strategy ]);\n\t            }\n\t            escaped_output.push(str);\n\t        });\n\t        return Twig.Markup(escaped_output.join(\"\"));\n\t    }\n\n\t    // Namespace for template storage and retrieval\n\t    Twig.Templates = {\n\t        /**\n\t         * Registered template loaders - use Twig.Templates.registerLoader to add supported loaders\n\t         * @type {Object}\n\t         */\n\t        loaders: {},\n\n\t        /**\n\t         * Registered template parsers - use Twig.Templates.registerParser to add supported parsers\n\t         * @type {Object}\n\t         */\n\t        parsers: {},\n\n\t        /**\n\t         * Cached / loaded templates\n\t         * @type {Object}\n\t         */\n\t        registry: {}\n\t    };\n\n\t    /**\n\t     * Is this id valid for a twig template?\n\t     *\n\t     * @param {string} id The ID to check.\n\t     *\n\t     * @throws {Twig.Error} If the ID is invalid or used.\n\t     * @return {boolean} True if the ID is valid.\n\t     */\n\t    Twig.validateId = function(id) {\n\t        if (id === \"prototype\") {\n\t            throw new Twig.Error(id + \" is not a valid twig identifier\");\n\t        } else if (Twig.cache && Twig.Templates.registry.hasOwnProperty(id)) {\n\t            throw new Twig.Error(\"There is already a template with the ID \" + id);\n\t        }\n\t        return true;\n\t    }\n\n\t    /**\n\t     * Register a template loader\n\t     *\n\t     * @example\n\t     * Twig.extend(function(Twig) {\n\t     *    Twig.Templates.registerLoader('custom_loader', function(location, params, callback, error_callback) {\n\t     *        // ... load the template ...\n\t     *        params.data = loadedTemplateData;\n\t     *        // create and return the template\n\t     *        var template = new Twig.Template(params);\n\t     *        if (typeof callback === 'function') {\n\t     *            callback(template);\n\t     *        }\n\t     *        return template;\n\t     *    });\n\t     * });\n\t     *\n\t     * @param {String} method_name The method this loader is intended for (ajax, fs)\n\t     * @param {Function} func The function to execute when loading the template\n\t     * @param {Object|undefined} scope Optional scope parameter to bind func to\n\t     *\n\t     * @throws Twig.Error\n\t     *\n\t     * @return {void}\n\t     */\n\t    Twig.Templates.registerLoader = function(method_name, func, scope) {\n\t        if (typeof func !== 'function') {\n\t            throw new Twig.Error('Unable to add loader for ' + method_name + ': Invalid function reference given.');\n\t        }\n\t        if (scope) {\n\t            func = func.bind(scope);\n\t        }\n\t        this.loaders[method_name] = func;\n\t    };\n\n\t    /**\n\t     * Remove a registered loader\n\t     *\n\t     * @param {String} method_name The method name for the loader you wish to remove\n\t     *\n\t     * @return {void}\n\t     */\n\t    Twig.Templates.unRegisterLoader = function(method_name) {\n\t        if (this.isRegisteredLoader(method_name)) {\n\t            delete this.loaders[method_name];\n\t        }\n\t    };\n\n\t    /**\n\t     * See if a loader is registered by its method name\n\t     *\n\t     * @param {String} method_name The name of the loader you are looking for\n\t     *\n\t     * @return {boolean}\n\t     */\n\t    Twig.Templates.isRegisteredLoader = function(method_name) {\n\t        return this.loaders.hasOwnProperty(method_name);\n\t    };\n\n\t    /**\n\t     * Register a template parser\n\t     *\n\t     * @example\n\t     * Twig.extend(function(Twig) {\n\t     *    Twig.Templates.registerParser('custom_parser', function(params) {\n\t     *        // this template source can be accessed in params.data\n\t     *        var template = params.data\n\t     *\n\t     *        // ... custom process that modifies the template\n\t     *\n\t     *        // return the parsed template\n\t     *        return template;\n\t     *    });\n\t     * });\n\t     *\n\t     * @param {String} method_name The method this parser is intended for (twig, source)\n\t     * @param {Function} func The function to execute when parsing the template\n\t     * @param {Object|undefined} scope Optional scope parameter to bind func to\n\t     *\n\t     * @throws Twig.Error\n\t     *\n\t     * @return {void}\n\t     */\n\t    Twig.Templates.registerParser = function(method_name, func, scope) {\n\t        if (typeof func !== 'function') {\n\t            throw new Twig.Error('Unable to add parser for ' + method_name + ': Invalid function regerence given.');\n\t        }\n\n\t        if (scope) {\n\t            func = func.bind(scope);\n\t        }\n\n\t        this.parsers[method_name] = func;\n\t    };\n\n\t    /**\n\t     * Remove a registered parser\n\t     *\n\t     * @param {String} method_name The method name for the parser you wish to remove\n\t     *\n\t     * @return {void}\n\t     */\n\t    Twig.Templates.unRegisterParser = function(method_name) {\n\t        if (this.isRegisteredParser(method_name)) {\n\t            delete this.parsers[method_name];\n\t        }\n\t    };\n\n\t    /**\n\t     * See if a parser is registered by its method name\n\t     *\n\t     * @param {String} method_name The name of the parser you are looking for\n\t     *\n\t     * @return {boolean}\n\t     */\n\t    Twig.Templates.isRegisteredParser = function(method_name) {\n\t        return this.parsers.hasOwnProperty(method_name);\n\t    };\n\n\t    /**\n\t     * Save a template object to the store.\n\t     *\n\t     * @param {Twig.Template} template   The twig.js template to store.\n\t     */\n\t    Twig.Templates.save = function(template) {\n\t        if (template.id === undefined) {\n\t            throw new Twig.Error(\"Unable to save template with no id\");\n\t        }\n\t        Twig.Templates.registry[template.id] = template;\n\t    };\n\n\t    /**\n\t     * Load a previously saved template from the store.\n\t     *\n\t     * @param {string} id   The ID of the template to load.\n\t     *\n\t     * @return {Twig.Template} A twig.js template stored with the provided ID.\n\t     */\n\t    Twig.Templates.load = function(id) {\n\t        if (!Twig.Templates.registry.hasOwnProperty(id)) {\n\t            return null;\n\t        }\n\t        return Twig.Templates.registry[id];\n\t    };\n\n\t    /**\n\t     * Load a template from a remote location using AJAX and saves in with the given ID.\n\t     *\n\t     * Available parameters:\n\t     *\n\t     *      async:       Should the HTTP request be performed asynchronously.\n\t     *                      Defaults to true.\n\t     *      method:      What method should be used to load the template\n\t     *                      (fs or ajax)\n\t     *      parser:      What method should be used to parse the template\n\t     *                      (twig or source)\n\t     *      precompiled: Has the template already been compiled.\n\t     *\n\t     * @param {string} location  The remote URL to load as a template.\n\t     * @param {Object} params The template parameters.\n\t     * @param {function} callback  A callback triggered when the template finishes loading.\n\t     * @param {function} error_callback  A callback triggered if an error occurs loading the template.\n\t     *\n\t     *\n\t     */\n\t    Twig.Templates.loadRemote = function(location, params, callback, error_callback) {\n\t        var loader;\n\n\t        // Default to async\n\t        if (params.async === undefined) {\n\t            params.async = true;\n\t        }\n\n\t        // Default to the URL so the template is cached.\n\t        if (params.id === undefined) {\n\t            params.id = location;\n\t        }\n\n\t        // Check for existing template\n\t        if (Twig.cache && Twig.Templates.registry.hasOwnProperty(params.id)) {\n\t            // A template is already saved with the given id.\n\t            if (typeof callback === 'function') {\n\t                callback(Twig.Templates.registry[params.id]);\n\t            }\n\t            // TODO: if async, return deferred promise\n\t            return Twig.Templates.registry[params.id];\n\t        }\n\n\t        //if the parser name hasn't been set, default it to twig\n\t        params.parser = params.parser || 'twig';\n\n\t        // Assume 'fs' if the loader is not defined\n\t        loader = this.loaders[params.method] || this.loaders.fs;\n\t        return loader.apply(this, arguments);\n\t    };\n\n\t    // Determine object type\n\t    function is(type, obj) {\n\t        var clas = Object.prototype.toString.call(obj).slice(8, -1);\n\t        return obj !== undefined && obj !== null && clas === type;\n\t    }\n\n\t    /**\n\t     * Create a new twig.js template.\n\t     *\n\t     * Parameters: {\n\t     *      data:   The template, either pre-compiled tokens or a string template\n\t     *      id:     The name of this template\n\t     *      blocks: Any pre-existing block from a child template\n\t     * }\n\t     *\n\t     * @param {Object} params The template parameters.\n\t     */\n\t    Twig.Template = function ( params ) {\n\t        var data = params.data,\n\t            id = params.id,\n\t            blocks = params.blocks,\n\t            macros = params.macros || {},\n\t            base = params.base,\n\t            path = params.path,\n\t            url = params.url,\n\t            name = params.name,\n\t            method = params.method,\n\t            // parser options\n\t            options = params.options;\n\n\t        // # What is stored in a Twig.Template\n\t        //\n\t        // The Twig Template hold several chucks of data.\n\t        //\n\t        //     {\n\t        //          id:     The token ID (if any)\n\t        //          tokens: The list of tokens that makes up this template.\n\t        //          blocks: The list of block this template contains.\n\t        //          base:   The base template (if any)\n\t        //            options:  {\n\t        //                Compiler/parser options\n\t        //\n\t        //                strict_variables: true/false\n\t        //                    Should missing variable/keys emit an error message. If false, they default to null.\n\t        //            }\n\t        //     }\n\t        //\n\n\t        this.id     = id;\n\t        this.method = method;\n\t        this.base   = base;\n\t        this.path   = path;\n\t        this.url    = url;\n\t        this.name   = name;\n\t        this.macros = macros;\n\t        this.options = options;\n\n\t        this.reset(blocks);\n\n\t        if (is('String', data)) {\n\t            this.tokens = Twig.prepare.apply(this, [data]);\n\t        } else {\n\t            this.tokens = data;\n\t        }\n\n\t        if (id !== undefined) {\n\t            Twig.Templates.save(this);\n\t        }\n\t    };\n\n\t    Twig.Template.prototype.reset = function(blocks) {\n\t        Twig.log.debug(\"Twig.Template.reset\", \"Reseting template \" + this.id);\n\t        this.blocks = {};\n\t        this.importedBlocks = [];\n\t        this.originalBlockTokens = {};\n\t        this.child = {\n\t            blocks: blocks || {}\n\t        };\n\t        this.extend = null;\n\t    };\n\n\t    Twig.Template.prototype.render = function (context, params, allow_async) {\n\t        params = params || {};\n\n\t        var that = this,\n\n\t            // Store any error that might be thrown by the promise chain.\n\t            err = null,\n\n\t            // This will be set to is_async if template renders synchronously\n\t            is_async = true,\n\t            promise = null,\n\n\t            result,\n\t            url;\n\n\t        this.context = context || {};\n\n\t        // Clear any previous state\n\t        this.reset();\n\t        if (params.blocks) {\n\t            this.blocks = params.blocks;\n\t        }\n\t        if (params.macros) {\n\t            this.macros = params.macros;\n\t        }\n\n\t        var cb = function(output) {\n\t            // Does this template extend another\n\t            if (that.extend) {\n\t                var ext_template;\n\n\t                // check if the template is provided inline\n\t                if ( that.options.allowInlineIncludes ) {\n\t                    ext_template = Twig.Templates.load(that.extend);\n\t                    if ( ext_template ) {\n\t                        ext_template.options = that.options;\n\t                    }\n\t                }\n\n\t                // check for the template file via include\n\t                if (!ext_template) {\n\t                    url = Twig.path.parsePath(that, that.extend);\n\n\t                    ext_template = Twig.Templates.loadRemote(url, {\n\t                        method: that.getLoaderMethod(),\n\t                        base: that.base,\n\t                        async:  false,\n\t                        id:     url,\n\t                        options: that.options\n\t                    });\n\t                }\n\n\t                that.parent = ext_template;\n\n\t                return that.parent.renderAsync(that.context, {\n\t                    blocks: that.blocks\n\t                });\n\t            }\n\n\t            if (params.output == 'blocks') {\n\t                return that.blocks;\n\t            } else if (params.output == 'macros') {\n\t                return that.macros;\n\t            } else {\n\t                return output;\n\t            }\n\t        };\n\n\t        promise = Twig.parseAsync.apply(this, [this.tokens, this.context])\n\t        .then(cb)\n\t        .then(function(v) {\n\t            is_async = false;\n\t            result = v;\n\t            return v;\n\t        })\n\t        .catch(function(e) {\n\t            if (allow_async)\n\t                throw e;\n\n\t            err = e;\n\t        })\n\n\t        // If `allow_async` we will always return a promise since we do not\n\t        // know in advance if we are going to run asynchronously or not.\n\t        if (allow_async)\n\t            return promise;\n\n\t        // Handle errors here if we fail synchronously.\n\t        if (err !== null)\n\t            throw err;\n\n\t        // If `allow_async` is not true we should not allow the user\n\t        // to use asynchronous functions or filters.\n\t        if (is_async)\n\t            throw new Twig.Error('You are using Twig.js in sync mode in combination with async extensions.');\n\n\t        return result;\n\t    };\n\n\t    Twig.Template.prototype.importFile = function(file) {\n\t        var url, sub_template;\n\t        if (!this.url && this.options.allowInlineIncludes) {\n\t            file = this.path ? Twig.path.parsePath(this, file) : file;\n\t            sub_template = Twig.Templates.load(file);\n\n\t            if (!sub_template) {\n\t                sub_template = Twig.Templates.loadRemote(url, {\n\t                    id: file,\n\t                    method: this.getLoaderMethod(),\n\t                    async: false,\n\t                    path: file,\n\t                    options: this.options\n\t                });\n\n\t                if (!sub_template) {\n\t                    throw new Twig.Error(\"Unable to find the template \" + file);\n\t                }\n\t            }\n\n\t            sub_template.options = this.options;\n\n\t            return sub_template;\n\t        }\n\n\t        url = Twig.path.parsePath(this, file);\n\n\t        // Load blocks from an external file\n\t        sub_template = Twig.Templates.loadRemote(url, {\n\t            method: this.getLoaderMethod(),\n\t            base: this.base,\n\t            async: false,\n\t            options: this.options,\n\t            id: url\n\t        });\n\n\t        return sub_template;\n\t    };\n\n\t    Twig.Template.prototype.importBlocks = function(file, override) {\n\t        var sub_template = this.importFile(file),\n\t            context = this.context,\n\t            that = this,\n\t            key;\n\n\t        override = override || false;\n\n\t        sub_template.render(context);\n\n\t        // Mixin blocks\n\t        Twig.forEach(Object.keys(sub_template.blocks), function(key) {\n\t            if (override || that.blocks[key] === undefined) {\n\t                that.blocks[key] = sub_template.blocks[key];\n\t                that.importedBlocks.push(key);\n\t            }\n\t        });\n\t    };\n\n\t    Twig.Template.prototype.importMacros = function(file) {\n\t        var url = Twig.path.parsePath(this, file);\n\n\t        // load remote template\n\t        var remoteTemplate = Twig.Templates.loadRemote(url, {\n\t            method: this.getLoaderMethod(),\n\t            async: false,\n\t            id: url\n\t        });\n\n\t        return remoteTemplate;\n\t    };\n\n\t    Twig.Template.prototype.getLoaderMethod = function() {\n\t        if (this.path) {\n\t            return 'fs';\n\t        }\n\t        if (this.url) {\n\t            return 'ajax';\n\t        }\n\t        return this.method || 'fs';\n\t    };\n\n\t    Twig.Template.prototype.compile = function(options) {\n\t        // compile the template into raw JS\n\t        return Twig.compiler.compile(this, options);\n\t    };\n\n\t    /**\n\t     * Create safe output\n\t     *\n\t     * @param {string} Content safe to output\n\t     *\n\t     * @return {String} Content wrapped into a String\n\t     */\n\n\t    Twig.Markup = function(content, strategy) {\n\t        if(typeof strategy == 'undefined') {\n\t            strategy = true;\n\t        }\n\n\t        if (typeof content === 'string' && content.length > 0) {\n\t            content = new String(content);\n\t            content.twig_markup = strategy;\n\t        }\n\t        return content;\n\t    };\n\n\t    return Twig;\n\n\t};\n\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t// ## twig.compiler.js\n\t//\n\t// This file handles compiling templates into JS\n\tmodule.exports = function (Twig) {\n\t    /**\n\t     * Namespace for compilation.\n\t     */\n\t    Twig.compiler = {\n\t        module: {}\n\t    };\n\n\t    // Compile a Twig Template to output.\n\t    Twig.compiler.compile = function(template, options) {\n\t        // Get tokens\n\t        var tokens = JSON.stringify(template.tokens)\n\t            , id = template.id\n\t            , output;\n\n\t        if (options.module) {\n\t            if (Twig.compiler.module[options.module] === undefined) {\n\t                throw new Twig.Error(\"Unable to find module type \" + options.module);\n\t            }\n\t            output = Twig.compiler.module[options.module](id, tokens, options.twig);\n\t        } else {\n\t            output = Twig.compiler.wrap(id, tokens);\n\t        }\n\t        return output;\n\t    };\n\n\t    Twig.compiler.module = {\n\t        amd: function(id, tokens, pathToTwig) {\n\t            return 'define([\"' + pathToTwig + '\"], function (Twig) {\\n\\tvar twig, templates;\\ntwig = Twig.twig;\\ntemplates = ' + Twig.compiler.wrap(id, tokens) + '\\n\\treturn templates;\\n});';\n\t        }\n\t        , node: function(id, tokens) {\n\t            return 'var twig = require(\"twig\").twig;\\n'\n\t                + 'exports.template = ' + Twig.compiler.wrap(id, tokens)\n\t        }\n\t        , cjs2: function(id, tokens, pathToTwig) {\n\t            return 'module.declare([{ twig: \"' + pathToTwig + '\" }], function (require, exports, module) {\\n'\n\t                        + '\\tvar twig = require(\"twig\").twig;\\n'\n\t                        + '\\texports.template = ' + Twig.compiler.wrap(id, tokens)\n\t                    + '\\n});'\n\t        }\n\t    };\n\n\t    Twig.compiler.wrap = function(id, tokens) {\n\t        return 'twig({id:\"'+id.replace('\"', '\\\\\"')+'\", data:'+tokens+', precompiled: true});\\n';\n\t    };\n\n\t    return Twig;\n\t};\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// ## twig.expression.js\n\t//\n\t// This file handles tokenizing, compiling and parsing expressions.\n\tmodule.exports = function (Twig) {\n\t    \"use strict\";\n\n\t    function parseParams(thisArg, params, context) {\n\t        if (params)\n\t            return Twig.expression.parseAsync.apply(thisArg, [params, context]);\n\n\t        return Twig.Promise.resolve(false);\n\t    }\n\n\t    /**\n\t     * Namespace for expression handling.\n\t     */\n\t    Twig.expression = { };\n\n\t    __webpack_require__(4)(Twig);\n\n\t    /**\n\t     * Reserved word that can't be used as variable names.\n\t     */\n\t    Twig.expression.reservedWords = [\n\t        \"true\", \"false\", \"null\", \"TRUE\", \"FALSE\", \"NULL\", \"_context\", \"and\", \"b-and\", \"or\", \"b-or\", \"b-xor\", \"in\", \"not in\", \"if\"\n\t    ];\n\n\t    /**\n\t     * The type of tokens used in expressions.\n\t     */\n\t    Twig.expression.type = {\n\t        comma:      'Twig.expression.type.comma',\n\t        operator: {\n\t            unary:  'Twig.expression.type.operator.unary',\n\t            binary: 'Twig.expression.type.operator.binary'\n\t        },\n\t        string:     'Twig.expression.type.string',\n\t        bool:       'Twig.expression.type.bool',\n\t        slice:      'Twig.expression.type.slice',\n\t        array: {\n\t            start:  'Twig.expression.type.array.start',\n\t            end:    'Twig.expression.type.array.end'\n\t        },\n\t        object: {\n\t            start:  'Twig.expression.type.object.start',\n\t            end:    'Twig.expression.type.object.end'\n\t        },\n\t        parameter: {\n\t            start:  'Twig.expression.type.parameter.start',\n\t            end:    'Twig.expression.type.parameter.end'\n\t        },\n\t        subexpression: {\n\t            start:  'Twig.expression.type.subexpression.start',\n\t            end:    'Twig.expression.type.subexpression.end'\n\t        },\n\t        key: {\n\t            period:   'Twig.expression.type.key.period',\n\t            brackets: 'Twig.expression.type.key.brackets'\n\t        },\n\t        filter:     'Twig.expression.type.filter',\n\t        _function:  'Twig.expression.type._function',\n\t        variable:   'Twig.expression.type.variable',\n\t        number:     'Twig.expression.type.number',\n\t        _null:     'Twig.expression.type.null',\n\t        context:    'Twig.expression.type.context',\n\t        test:       'Twig.expression.type.test'\n\t    };\n\n\t    Twig.expression.set = {\n\t        // What can follow an expression (in general)\n\t        operations: [\n\t            Twig.expression.type.filter,\n\t            Twig.expression.type.operator.unary,\n\t            Twig.expression.type.operator.binary,\n\t            Twig.expression.type.array.end,\n\t            Twig.expression.type.object.end,\n\t            Twig.expression.type.parameter.end,\n\t            Twig.expression.type.subexpression.end,\n\t            Twig.expression.type.comma,\n\t            Twig.expression.type.test\n\t        ],\n\t        expressions: [\n\t            Twig.expression.type._function,\n\t            Twig.expression.type.bool,\n\t            Twig.expression.type.string,\n\t            Twig.expression.type.variable,\n\t            Twig.expression.type.number,\n\t            Twig.expression.type._null,\n\t            Twig.expression.type.context,\n\t            Twig.expression.type.parameter.start,\n\t            Twig.expression.type.array.start,\n\t            Twig.expression.type.object.start,\n\t            Twig.expression.type.subexpression.start,\n\t            Twig.expression.type.operator.unary\n\t        ]\n\t    };\n\n\t    // Most expressions allow a '.' or '[' after them, so we provide a convenience set\n\t    Twig.expression.set.operations_extended = Twig.expression.set.operations.concat([\n\t                    Twig.expression.type.key.period,\n\t                    Twig.expression.type.key.brackets,\n\t                    Twig.expression.type.slice]);\n\n\t    // Some commonly used compile and parse functions.\n\t    Twig.expression.fn = {\n\t        compile: {\n\t            push: function(token, stack, output) {\n\t                output.push(token);\n\t            },\n\t            push_both: function(token, stack, output) {\n\t                output.push(token);\n\t                stack.push(token);\n\t            }\n\t        },\n\t        parse: {\n\t            push: function(token, stack, context) {\n\t                stack.push(token);\n\t            },\n\t            push_value: function(token, stack, context) {\n\t                stack.push(token.value);\n\t            }\n\t        }\n\t    };\n\n\t    // The regular expressions and compile/parse logic used to match tokens in expressions.\n\t    //\n\t    // Properties:\n\t    //\n\t    //      type:  The type of expression this matches\n\t    //\n\t    //      regex: One or more regular expressions that matche the format of the token.\n\t    //\n\t    //      next:  Valid tokens that can occur next in the expression.\n\t    //\n\t    // Functions:\n\t    //\n\t    //      compile: A function that compiles the raw regular expression match into a token.\n\t    //\n\t    //      parse:   A function that parses the compiled token into output.\n\t    //\n\t    Twig.expression.definitions = [\n\t        {\n\t            type: Twig.expression.type.test,\n\t            regex: /^is\\s+(not)?\\s*([a-zA-Z_][a-zA-Z0-9_]*(\\s?as)?)/,\n\t            next: Twig.expression.set.operations.concat([Twig.expression.type.parameter.start]),\n\t            compile: function(token, stack, output) {\n\t                token.filter   = token.match[2];\n\t                token.modifier = token.match[1];\n\t                delete token.match;\n\t                delete token.value;\n\t                output.push(token);\n\t            },\n\t            parse: function(token, stack, context) {\n\t                var value = stack.pop();\n\n\t                return parseParams(this, token.params, context)\n\t                .then(function(params) {\n\t                    var result = Twig.test(token.filter, value, params);\n\n\t                    if (token.modifier == 'not') {\n\t                        stack.push(!result);\n\t                    } else {\n\t                        stack.push(result);\n\t                    }\n\t                });\n\t            }\n\t        },\n\t        {\n\t            type: Twig.expression.type.comma,\n\t            // Match a comma\n\t            regex: /^,/,\n\t            next: Twig.expression.set.expressions.concat([Twig.expression.type.array.end, Twig.expression.type.object.end]),\n\t            compile: function(token, stack, output) {\n\t                var i = stack.length - 1,\n\t                    stack_token;\n\n\t                delete token.match;\n\t                delete token.value;\n\n\t                // pop tokens off the stack until the start of the object\n\t                for(;i >= 0; i--) {\n\t                    stack_token = stack.pop();\n\t                    if (stack_token.type === Twig.expression.type.object.start\n\t                            || stack_token.type === Twig.expression.type.parameter.start\n\t                            || stack_token.type === Twig.expression.type.array.start) {\n\t                        stack.push(stack_token);\n\t                        break;\n\t                    }\n\t                    output.push(stack_token);\n\t                }\n\t                output.push(token);\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * Match a number (integer or decimal)\n\t             */\n\t            type: Twig.expression.type.number,\n\t            // match a number\n\t            regex: /^\\-?\\d+(\\.\\d+)?/,\n\t            next: Twig.expression.set.operations,\n\t            compile: function(token, stack, output) {\n\t                token.value = Number(token.value);\n\t                output.push(token);\n\t            },\n\t            parse: Twig.expression.fn.parse.push_value\n\t        },\n\t        {\n\t            type: Twig.expression.type.operator.binary,\n\t            // Match any of ?:, +, *, /, -, %, ~, <, <=, >, >=, !=, ==, **, ?, :, and, b-and, or, b-or, b-xor, in, not in\n\t            // and, or, in, not in can be followed by a space or parenthesis\n\t            regex: /(^\\?\\:|^(b\\-and)|^(b\\-or)|^(b\\-xor)|^[\\+\\-~%\\?]|^[\\:](?!\\d\\])|^[!=]==?|^[!<>]=?|^\\*\\*?|^\\/\\/?|^(and)[\\(|\\s+]|^(or)[\\(|\\s+]|^(in)[\\(|\\s+]|^(not in)[\\(|\\s+]|^\\.\\.)/,\n\t            next: Twig.expression.set.expressions,\n\t            transform: function(match, tokens) {\n\t                switch(match[0]) {\n\t                    case 'and(':\n\t                    case 'or(':\n\t                    case 'in(':\n\t                    case 'not in(':\n\t                        //Strip off the ( if it exists\n\t                        tokens[tokens.length - 1].value = match[2];\n\t                        return match[0];\n\t                        break;\n\t                    default:\n\t                        return '';\n\t                }\n\t            },\n\t            compile: function(token, stack, output) {\n\t                delete token.match;\n\n\t                token.value = token.value.trim();\n\t                var value = token.value,\n\t                    operator = Twig.expression.operator.lookup(value, token);\n\n\t                Twig.log.trace(\"Twig.expression.compile: \", \"Operator: \", operator, \" from \", value);\n\n\t                while (stack.length > 0 &&\n\t                       (stack[stack.length-1].type == Twig.expression.type.operator.unary || stack[stack.length-1].type == Twig.expression.type.operator.binary) &&\n\t                            (\n\t                                (operator.associativity === Twig.expression.operator.leftToRight &&\n\t                                 operator.precidence    >= stack[stack.length-1].precidence) ||\n\n\t                                (operator.associativity === Twig.expression.operator.rightToLeft &&\n\t                                 operator.precidence    >  stack[stack.length-1].precidence)\n\t                            )\n\t                       ) {\n\t                     var temp = stack.pop();\n\t                     output.push(temp);\n\t                }\n\n\t                if (value === \":\") {\n\t                    // Check if this is a ternary or object key being set\n\t                    if (stack[stack.length - 1] && stack[stack.length-1].value === \"?\") {\n\t                        // Continue as normal for a ternary\n\t                    } else {\n\t                        // This is not a ternary so we push the token to the output where it can be handled\n\t                        //   when the assocated object is closed.\n\t                        var key_token = output.pop();\n\n\t                        if (key_token.type === Twig.expression.type.string ||\n\t                                key_token.type === Twig.expression.type.variable) {\n\t                            token.key = key_token.value;\n\t                        } else if (key_token.type === Twig.expression.type.number) {\n\t                            // Convert integer keys into string keys\n\t                            token.key = key_token.value.toString();\n\t                        } else if (key_token.expression &&\n\t                            (key_token.type === Twig.expression.type.parameter.end ||\n\t                            key_token.type == Twig.expression.type.subexpression.end)) {\n\t                            token.params = key_token.params;\n\t                        } else {\n\t                            throw new Twig.Error(\"Unexpected value before ':' of \" + key_token.type + \" = \" + key_token.value);\n\t                        }\n\n\t                        output.push(token);\n\t                        return;\n\t                    }\n\t                } else {\n\t                    stack.push(operator);\n\t                }\n\t            },\n\t            parse: function(token, stack, context) {\n\t                if (token.key) {\n\t                    // handle ternary ':' operator\n\t                    stack.push(token);\n\t                } else if (token.params) {\n\t                    // handle \"{(expression):value}\"\n\t                    return Twig.expression.parseAsync.apply(this, [token.params, context])\n\t                    .then(function(key) {\n\t                        token.key = key;\n\t                        stack.push(token);\n\n\t                        //If we're in a loop, we might need token.params later, especially in this form of \"(expression):value\"\n\t                        if (!context.loop) {\n\t                            delete(token.params);\n\t                        }\n\t                    });\n\t                } else {\n\t                    Twig.expression.operator.parse(token.value, stack);\n\t                }\n\t            }\n\t        },\n\t        {\n\t            type: Twig.expression.type.operator.unary,\n\t            // Match any of not\n\t            regex: /(^not\\s+)/,\n\t            next: Twig.expression.set.expressions,\n\t            compile: function(token, stack, output) {\n\t                delete token.match;\n\n\t                token.value = token.value.trim();\n\t                var value = token.value,\n\t                    operator = Twig.expression.operator.lookup(value, token);\n\n\t                Twig.log.trace(\"Twig.expression.compile: \", \"Operator: \", operator, \" from \", value);\n\n\t                while (stack.length > 0 &&\n\t                       (stack[stack.length-1].type == Twig.expression.type.operator.unary || stack[stack.length-1].type == Twig.expression.type.operator.binary) &&\n\t                            (\n\t                                (operator.associativity === Twig.expression.operator.leftToRight &&\n\t                                 operator.precidence    >= stack[stack.length-1].precidence) ||\n\n\t                                (operator.associativity === Twig.expression.operator.rightToLeft &&\n\t                                 operator.precidence    >  stack[stack.length-1].precidence)\n\t                            )\n\t                       ) {\n\t                     var temp = stack.pop();\n\t                     output.push(temp);\n\t                }\n\n\t                stack.push(operator);\n\t            },\n\t            parse: function(token, stack, context) {\n\t                Twig.expression.operator.parse(token.value, stack);\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * Match a string. This is anything between a pair of single or double quotes.\n\t             */\n\t            type: Twig.expression.type.string,\n\t            // See: http://blog.stevenlevithan.com/archives/match-quoted-string\n\t            regex: /^([\"'])(?:(?=(\\\\?))\\2[\\s\\S])*?\\1/,\n\t            next: Twig.expression.set.operations_extended,\n\t            compile: function(token, stack, output) {\n\t                var value = token.value;\n\t                delete token.match\n\n\t                // Remove the quotes from the string\n\t                if (value.substring(0, 1) === '\"') {\n\t                    value = value.replace('\\\\\"', '\"');\n\t                } else {\n\t                    value = value.replace(\"\\\\'\", \"'\");\n\t                }\n\t                token.value = value.substring(1, value.length-1).replace( /\\\\n/g, \"\\n\" ).replace( /\\\\r/g, \"\\r\" );\n\t                Twig.log.trace(\"Twig.expression.compile: \", \"String value: \", token.value);\n\t                output.push(token);\n\t            },\n\t            parse: Twig.expression.fn.parse.push_value\n\t        },\n\t        {\n\t            /**\n\t             * Match a subexpression set start.\n\t             */\n\t            type: Twig.expression.type.subexpression.start,\n\t            regex: /^\\(/,\n\t            next: Twig.expression.set.expressions.concat([Twig.expression.type.subexpression.end]),\n\t            compile: function(token, stack, output) {\n\t                token.value = '(';\n\t                output.push(token);\n\t                stack.push(token);\n\t            },\n\t            parse: Twig.expression.fn.parse.push\n\t        },\n\t        {\n\t            /**\n\t             * Match a subexpression set end.\n\t             */\n\t            type: Twig.expression.type.subexpression.end,\n\t            regex: /^\\)/,\n\t            next: Twig.expression.set.operations_extended,\n\t            validate: function(match, tokens) {\n\t                // Iterate back through previous tokens to ensure we follow a subexpression start\n\t                var i = tokens.length - 1,\n\t                    found_subexpression_start = false,\n\t                    next_subexpression_start_invalid = false,\n\t                    unclosed_parameter_count = 0;\n\n\t                while(!found_subexpression_start && i >= 0) {\n\t                    var token = tokens[i];\n\n\t                    found_subexpression_start = token.type === Twig.expression.type.subexpression.start;\n\n\t                    // If we have previously found a subexpression end, then this subexpression start is the start of\n\t                    // that subexpression, not the subexpression we are searching for\n\t                    if (found_subexpression_start && next_subexpression_start_invalid) {\n\t                        next_subexpression_start_invalid = false;\n\t                        found_subexpression_start = false;\n\t                    }\n\n\t                    // Count parameter tokens to ensure we dont return truthy for a parameter opener\n\t                    if (token.type === Twig.expression.type.parameter.start) {\n\t                        unclosed_parameter_count++;\n\t                    } else if (token.type === Twig.expression.type.parameter.end) {\n\t                        unclosed_parameter_count--;\n\t                    } else if (token.type === Twig.expression.type.subexpression.end) {\n\t                        next_subexpression_start_invalid = true;\n\t                    }\n\n\t                    i--;\n\t                }\n\n\t                // If we found unclosed parameters, return false\n\t                // If we didnt find subexpression start, return false\n\t                // Otherwise return true\n\n\t                return (found_subexpression_start && (unclosed_parameter_count === 0));\n\t            },\n\t            compile: function(token, stack, output) {\n\t                // This is basically a copy of parameter end compilation\n\t                var stack_token,\n\t                    end_token = token;\n\n\t                stack_token = stack.pop();\n\t                while(stack.length > 0 && stack_token.type != Twig.expression.type.subexpression.start) {\n\t                    output.push(stack_token);\n\t                    stack_token = stack.pop();\n\t                }\n\n\t                // Move contents of parens into preceding filter\n\t                var param_stack = [];\n\t                while(token.type !== Twig.expression.type.subexpression.start) {\n\t                    // Add token to arguments stack\n\t                    param_stack.unshift(token);\n\t                    token = output.pop();\n\t                }\n\n\t                param_stack.unshift(token);\n\n\t                var is_expression = false;\n\n\t                //If the token at the top of the *stack* is a function token, pop it onto the output queue.\n\t                // Get the token preceding the parameters\n\t                stack_token = stack[stack.length-1];\n\n\t                if (stack_token === undefined ||\n\t                    (stack_token.type !== Twig.expression.type._function &&\n\t                    stack_token.type !== Twig.expression.type.filter &&\n\t                    stack_token.type !== Twig.expression.type.test &&\n\t                    stack_token.type !== Twig.expression.type.key.brackets)) {\n\n\t                    end_token.expression = true;\n\n\t                    // remove start and end token from stack\n\t                    param_stack.pop();\n\t                    param_stack.shift();\n\n\t                    end_token.params = param_stack;\n\n\t                    output.push(end_token);\n\t                } else {\n\t                    // This should never be hit\n\t                    end_token.expression = false;\n\t                    stack_token.params = param_stack;\n\t                }\n\t            },\n\t            parse: function(token, stack, context) {\n\t                var new_array = [],\n\t                    array_ended = false,\n\t                    value = null;\n\n\t                if (token.expression) {\n\t                    return Twig.expression.parseAsync.apply(this, [token.params, context])\n\t                    .then(function(value) {\n\t                        stack.push(value);\n\t                    });\n\t                } else {\n\t                    throw new Twig.Error(\"Unexpected subexpression end when token is not marked as an expression\");\n\t                }\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * Match a parameter set start.\n\t             */\n\t            type: Twig.expression.type.parameter.start,\n\t            regex: /^\\(/,\n\t            next: Twig.expression.set.expressions.concat([Twig.expression.type.parameter.end]),\n\t            validate: function(match, tokens) {\n\t                var last_token = tokens[tokens.length - 1];\n\t                // We can't use the regex to test if we follow a space because expression is trimmed\n\t                return last_token && (Twig.indexOf(Twig.expression.reservedWords, last_token.value.trim()) < 0);\n\t            },\n\t            compile: Twig.expression.fn.compile.push_both,\n\t            parse: Twig.expression.fn.parse.push\n\t        },\n\t        {\n\t            /**\n\t             * Match a parameter set end.\n\t             */\n\t            type: Twig.expression.type.parameter.end,\n\t            regex: /^\\)/,\n\t            next: Twig.expression.set.operations_extended,\n\t            compile: function(token, stack, output) {\n\t                var stack_token,\n\t                    end_token = token;\n\n\t                stack_token = stack.pop();\n\t                while(stack.length > 0 && stack_token.type != Twig.expression.type.parameter.start) {\n\t                    output.push(stack_token);\n\t                    stack_token = stack.pop();\n\t                }\n\n\t                // Move contents of parens into preceding filter\n\t                var param_stack = [];\n\t                while(token.type !== Twig.expression.type.parameter.start) {\n\t                    // Add token to arguments stack\n\t                    param_stack.unshift(token);\n\t                    token = output.pop();\n\t                }\n\t                param_stack.unshift(token);\n\n\t                var is_expression = false;\n\n\t                // Get the token preceding the parameters\n\t                token = output[output.length-1];\n\n\t                if (token === undefined ||\n\t                    (token.type !== Twig.expression.type._function &&\n\t                    token.type !== Twig.expression.type.filter &&\n\t                    token.type !== Twig.expression.type.test &&\n\t                    token.type !== Twig.expression.type.key.brackets)) {\n\n\t                    end_token.expression = true;\n\n\t                    // remove start and end token from stack\n\t                    param_stack.pop();\n\t                    param_stack.shift();\n\n\t                    end_token.params = param_stack;\n\n\t                    output.push(end_token);\n\n\t                } else {\n\t                    end_token.expression = false;\n\t                    token.params = param_stack;\n\t                }\n\t            },\n\t            parse: function(token, stack, context) {\n\t                var new_array = [],\n\t                    array_ended = false,\n\t                    value = null;\n\n\t                if (token.expression) {\n\t                    return Twig.expression.parseAsync.apply(this, [token.params, context])\n\t                    .then(function(value) {\n\t                        stack.push(value);\n\t                    });\n\t                } else {\n\n\t                    while (stack.length > 0) {\n\t                        value = stack.pop();\n\t                        // Push values into the array until the start of the array\n\t                        if (value && value.type && value.type == Twig.expression.type.parameter.start) {\n\t                            array_ended = true;\n\t                            break;\n\t                        }\n\t                        new_array.unshift(value);\n\t                    }\n\n\t                    if (!array_ended) {\n\t                        throw new Twig.Error(\"Expected end of parameter set.\");\n\t                    }\n\n\t                    stack.push(new_array);\n\t                }\n\t            }\n\t        },\n\t        {\n\t            type: Twig.expression.type.slice,\n\t            regex: /^\\[(\\d*\\:\\d*)\\]/,\n\t            next: Twig.expression.set.operations_extended,\n\t            compile: function(token, stack, output) {\n\t                var sliceRange = token.match[1].split(':');\n\n\t                //sliceStart can be undefined when we pass parameters to the slice filter later\n\t                var sliceStart = (sliceRange[0]) ? parseInt(sliceRange[0]) : undefined;\n\t                var sliceEnd = (sliceRange[1]) ? parseInt(sliceRange[1]) : undefined;\n\n\t                token.value = 'slice';\n\t                token.params = [sliceStart, sliceEnd];\n\n\t                //sliceEnd can't be undefined as the slice filter doesn't check for this, but it does check the length\n\t                //of the params array, so just shorten it.\n\t                if (!sliceEnd) {\n\t                    token.params = [sliceStart];\n\t                }\n\n\t                output.push(token);\n\t            },\n\t            parse: function(token, stack, context) {\n\t                var input = stack.pop(),\n\t                    params = token.params;\n\n\t                stack.push(Twig.filter.apply(this, [token.value, input, params]));\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * Match an array start.\n\t             */\n\t            type: Twig.expression.type.array.start,\n\t            regex: /^\\[/,\n\t            next: Twig.expression.set.expressions.concat([Twig.expression.type.array.end]),\n\t            compile: Twig.expression.fn.compile.push_both,\n\t            parse: Twig.expression.fn.parse.push\n\t        },\n\t        {\n\t            /**\n\t             * Match an array end.\n\t             */\n\t            type: Twig.expression.type.array.end,\n\t            regex: /^\\]/,\n\t            next: Twig.expression.set.operations_extended,\n\t            compile: function(token, stack, output) {\n\t                var i = stack.length - 1,\n\t                    stack_token;\n\t                // pop tokens off the stack until the start of the object\n\t                for(;i >= 0; i--) {\n\t                    stack_token = stack.pop();\n\t                    if (stack_token.type === Twig.expression.type.array.start) {\n\t                        break;\n\t                    }\n\t                    output.push(stack_token);\n\t                }\n\t                output.push(token);\n\t            },\n\t            parse: function(token, stack, context) {\n\t                var new_array = [],\n\t                    array_ended = false,\n\t                    value = null;\n\n\t                while (stack.length > 0) {\n\t                    value = stack.pop();\n\t                    // Push values into the array until the start of the array\n\t                    if (value.type && value.type == Twig.expression.type.array.start) {\n\t                        array_ended = true;\n\t                        break;\n\t                    }\n\t                    new_array.unshift(value);\n\t                }\n\t                if (!array_ended) {\n\t                    throw new Twig.Error(\"Expected end of array.\");\n\t                }\n\n\t                stack.push(new_array);\n\t            }\n\t        },\n\t        // Token that represents the start of a hash map '}'\n\t        //\n\t        // Hash maps take the form:\n\t        //    { \"key\": 'value', \"another_key\": item }\n\t        //\n\t        // Keys must be quoted (either single or double) and values can be any expression.\n\t        {\n\t            type: Twig.expression.type.object.start,\n\t            regex: /^\\{/,\n\t            next: Twig.expression.set.expressions.concat([Twig.expression.type.object.end]),\n\t            compile: Twig.expression.fn.compile.push_both,\n\t            parse: Twig.expression.fn.parse.push\n\t        },\n\n\t        // Token that represents the end of a Hash Map '}'\n\t        //\n\t        // This is where the logic for building the internal\n\t        // representation of a hash map is defined.\n\t        {\n\t            type: Twig.expression.type.object.end,\n\t            regex: /^\\}/,\n\t            next: Twig.expression.set.operations_extended,\n\t            compile: function(token, stack, output) {\n\t                var i = stack.length-1,\n\t                    stack_token;\n\n\t                // pop tokens off the stack until the start of the object\n\t                for(;i >= 0; i--) {\n\t                    stack_token = stack.pop();\n\t                    if (stack_token && stack_token.type === Twig.expression.type.object.start) {\n\t                        break;\n\t                    }\n\t                    output.push(stack_token);\n\t                }\n\t                output.push(token);\n\t            },\n\t            parse: function(end_token, stack, context) {\n\t                var new_object = {},\n\t                    object_ended = false,\n\t                    token = null,\n\t                    token_key = null,\n\t                    has_value = false,\n\t                    value = null;\n\n\t                while (stack.length > 0) {\n\t                    token = stack.pop();\n\t                    // Push values into the array until the start of the object\n\t                    if (token && token.type && token.type === Twig.expression.type.object.start) {\n\t                        object_ended = true;\n\t                        break;\n\t                    }\n\t                    if (token && token.type && (token.type === Twig.expression.type.operator.binary || token.type === Twig.expression.type.operator.unary) && token.key) {\n\t                        if (!has_value) {\n\t                            throw new Twig.Error(\"Missing value for key '\" + token.key + \"' in object definition.\");\n\t                        }\n\t                        new_object[token.key] = value;\n\n\t                        // Preserve the order that elements are added to the map\n\t                        // This is necessary since JavaScript objects don't\n\t                        // guarantee the order of keys\n\t                        if (new_object._keys === undefined) new_object._keys = [];\n\t                        new_object._keys.unshift(token.key);\n\n\t                        // reset value check\n\t                        value = null;\n\t                        has_value = false;\n\n\t                    } else {\n\t                        has_value = true;\n\t                        value = token;\n\t                    }\n\t                }\n\t                if (!object_ended) {\n\t                    throw new Twig.Error(\"Unexpected end of object.\");\n\t                }\n\n\t                stack.push(new_object);\n\t            }\n\t        },\n\n\t        // Token representing a filter\n\t        //\n\t        // Filters can follow any expression and take the form:\n\t        //    expression|filter(optional, args)\n\t        //\n\t        // Filter parsing is done in the Twig.filters namespace.\n\t        {\n\t            type: Twig.expression.type.filter,\n\t            // match a | then a letter or _, then any number of letters, numbers, _ or -\n\t            regex: /^\\|\\s?([a-zA-Z_][a-zA-Z0-9_\\-]*)/,\n\t            next: Twig.expression.set.operations_extended.concat([\n\t                    Twig.expression.type.parameter.start]),\n\t            compile: function(token, stack, output) {\n\t                token.value = token.match[1];\n\t                output.push(token);\n\t            },\n\t            parse: function(token, stack, context) {\n\t                var that = this,\n\t                    input = stack.pop();\n\n\t                return parseParams(this, token.params, context)\n\t                .then(function(params) {\n\t                    return Twig.filter.apply(that, [token.value, input, params]);\n\t                })\n\t                .then(function(value) {\n\t                    stack.push(value);\n\t                });\n\t            }\n\t        },\n\t        {\n\t            type: Twig.expression.type._function,\n\t            // match any letter or _, then any number of letters, numbers, _ or - followed by (\n\t            regex: /^([a-zA-Z_][a-zA-Z0-9_]*)\\s*\\(/,\n\t            next: Twig.expression.type.parameter.start,\n\t            validate: function(match, tokens) {\n\t                // Make sure this function is not a reserved word\n\t                return match[1] && (Twig.indexOf(Twig.expression.reservedWords, match[1]) < 0);\n\t            },\n\t            transform: function(match, tokens) {\n\t                return '(';\n\t            },\n\t            compile: function(token, stack, output) {\n\t                var fn = token.match[1];\n\t                token.fn = fn;\n\t                // cleanup token\n\t                delete token.match;\n\t                delete token.value;\n\n\t                output.push(token);\n\t            },\n\t            parse: function(token, stack, context) {\n\n\t                var that = this,\n\t                    fn = token.fn,\n\t                    value;\n\n\t                return parseParams(this, token.params, context)\n\t                .then(function(params) {\n\t                    if (Twig.functions[fn]) {\n\t                        // Get the function from the built-in functions\n\t                        value = Twig.functions[fn].apply(that, params);\n\n\t                    } else if (typeof context[fn] == 'function') {\n\t                        // Get the function from the user/context defined functions\n\t                        value = context[fn].apply(context, params);\n\n\t                    } else {\n\t                        throw new Twig.Error(fn + ' function does not exist and is not defined in the context');\n\t                    }\n\n\t                    return value;\n\t                })\n\t                .then(function(result) {\n\t                    stack.push(result);\n\t                });\n\t            }\n\t        },\n\n\t        // Token representing a variable.\n\t        //\n\t        // Variables can contain letters, numbers, underscores and\n\t        // dashes, but must start with a letter or underscore.\n\t        //\n\t        // Variables are retrieved from the render context and take\n\t        // the value of 'undefined' if the given variable doesn't\n\t        // exist in the context.\n\t        {\n\t            type: Twig.expression.type.variable,\n\t            // match any letter or _, then any number of letters, numbers, _ or -\n\t            regex: /^[a-zA-Z_][a-zA-Z0-9_]*/,\n\t            next: Twig.expression.set.operations_extended.concat([\n\t                    Twig.expression.type.parameter.start]),\n\t            compile: Twig.expression.fn.compile.push,\n\t            validate: function(match, tokens) {\n\t                return (Twig.indexOf(Twig.expression.reservedWords, match[0]) < 0);\n\t            },\n\t            parse: function(token, stack, context) {\n\t                // Get the variable from the context\n\t                return Twig.expression.resolveAsync.apply(this, [context[token.value], context])\n\t                .then(function(value) {\n\t                    stack.push(value);\n\t                });\n\t            }\n\t        },\n\t        {\n\t            type: Twig.expression.type.key.period,\n\t            regex: /^\\.([a-zA-Z0-9_]+)/,\n\t            next: Twig.expression.set.operations_extended.concat([\n\t                    Twig.expression.type.parameter.start]),\n\t            compile: function(token, stack, output) {\n\t                token.key = token.match[1];\n\t                delete token.match;\n\t                delete token.value;\n\n\t                output.push(token);\n\t            },\n\t            parse: function(token, stack, context, next_token) {\n\t                var that = this,\n\t                    key = token.key,\n\t                    object = stack.pop(),\n\t                    value;\n\n\t                return parseParams(this, token.params, context)\n\t                .then(function(params) {\n\t                    if (object === null || object === undefined) {\n\t                        if (that.options.strict_variables) {\n\t                            throw new Twig.Error(\"Can't access a key \" + key + \" on an null or undefined object.\");\n\t                        } else {\n\t                            value = undefined;\n\t                        }\n\t                    } else {\n\t                        var capitalize = function (value) {\n\t                            return value.substr(0, 1).toUpperCase() + value.substr(1);\n\t                        };\n\n\t                        // Get the variable from the context\n\t                        if (typeof object === 'object' && key in object) {\n\t                            value = object[key];\n\t                        } else if (object[\"get\" + capitalize(key)] !== undefined) {\n\t                            value = object[\"get\" + capitalize(key)];\n\t                        } else if (object[\"is\" + capitalize(key)] !== undefined) {\n\t                            value = object[\"is\" + capitalize(key)];\n\t                        } else {\n\t                            value = undefined;\n\t                        }\n\t                    }\n\n\t                    // When resolving an expression we need to pass next_token in case the expression is a function\n\t                    return Twig.expression.resolveAsync.apply(that, [value, context, params, next_token, object]);\n\t                })\n\t                .then(function(result) {\n\t                    stack.push(result);\n\t                });\n\t            }\n\t        },\n\t        {\n\t            type: Twig.expression.type.key.brackets,\n\t            regex: /^\\[([^\\]\\:]*)\\]/,\n\t            next: Twig.expression.set.operations_extended.concat([\n\t                    Twig.expression.type.parameter.start]),\n\t            compile: function(token, stack, output) {\n\t                var match = token.match[1];\n\t                delete token.value;\n\t                delete token.match;\n\n\t                // The expression stack for the key\n\t                token.stack = Twig.expression.compile({\n\t                    value: match\n\t                }).stack;\n\n\t                output.push(token);\n\t            },\n\t            parse: function(token, stack, context, next_token) {\n\t                // Evaluate key\n\t                var that = this,\n\t                    params = null,\n\t                    object,\n\t                    value;\n\n\t                return parseParams(this, token.params, context)\n\t                .then(function(parameters) {\n\t                    params = parameters;\n\t                    return Twig.expression.parseAsync.apply(that, [token.stack, context]);\n\t                })\n\t                .then(function(key) {\n\t                    object = stack.pop();\n\n\t                    if (object === null || object === undefined) {\n\t                        if (that.options.strict_variables) {\n\t                            throw new Twig.Error(\"Can't access a key \" + key + \" on an null or undefined object.\");\n\t                        } else {\n\t                            return null;\n\t                        }\n\t                    }\n\n\t                    // Get the variable from the context\n\t                    if (typeof object === 'object' && key in object) {\n\t                        value = object[key];\n\t                    } else {\n\t                        value = null;\n\t                    }\n\n\t                    // When resolving an expression we need to pass next_token in case the expression is a function\n\t                    return Twig.expression.resolveAsync.apply(that, [value, object, params, next_token]);\n\t                })\n\t                .then(function(result) {\n\t                    stack.push(result);\n\t                });\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * Match a null value.\n\t             */\n\t            type: Twig.expression.type._null,\n\t            // match a number\n\t            regex: /^(null|NULL|none|NONE)/,\n\t            next: Twig.expression.set.operations,\n\t            compile: function(token, stack, output) {\n\t                delete token.match;\n\t                token.value = null;\n\t                output.push(token);\n\t            },\n\t            parse: Twig.expression.fn.parse.push_value\n\t        },\n\t        {\n\t            /**\n\t             * Match the context\n\t             */\n\t            type: Twig.expression.type.context,\n\t            regex: /^_context/,\n\t            next: Twig.expression.set.operations_extended.concat([\n\t                    Twig.expression.type.parameter.start]),\n\t            compile: Twig.expression.fn.compile.push,\n\t            parse: function(token, stack, context) {\n\t                stack.push(context);\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * Match a boolean\n\t             */\n\t            type: Twig.expression.type.bool,\n\t            regex: /^(true|TRUE|false|FALSE)/,\n\t            next: Twig.expression.set.operations,\n\t            compile: function(token, stack, output) {\n\t                token.value = (token.match[0].toLowerCase( ) === \"true\");\n\t                delete token.match;\n\t                output.push(token);\n\t            },\n\t            parse: Twig.expression.fn.parse.push_value\n\t        }\n\t    ];\n\n\t    /**\n\t     * Resolve a context value.\n\t     *\n\t     * If the value is a function, it is executed with a context parameter.\n\t     *\n\t     * @param {string} key The context object key.\n\t     * @param {Object} context The render context.\n\t     */\n\t    Twig.expression.resolveAsync = function(value, context, params, next_token, object) {\n\t        if (typeof value == 'function') {\n\t            var promise = Twig.Promise.resolve(params);\n\n\t            /*\n\t            If value is a function, it will have been impossible during the compile stage to determine that a following\n\t            set of parentheses were parameters for this function.\n\n\t            Those parentheses will have therefore been marked as an expression, with their own parameters, which really\n\t            belong to this function.\n\n\t            Those parameters will also need parsing in case they are actually an expression to pass as parameters.\n\t             */\n\t            if (next_token && next_token.type === Twig.expression.type.parameter.end) {\n\t                //When parsing these parameters, we need to get them all back, not just the last item on the stack.\n\t                var tokens_are_parameters = true;\n\n\t                promise = promise.then(function() {\n\t                    return next_token.params && Twig.expression.parseAsync.apply(this, [next_token.params, context, tokens_are_parameters]);\n\t                })\n\t                .then(function(p) {\n\t                    //Clean up the parentheses tokens on the next loop\n\t                    next_token.cleanup = true;\n\n\t                    return p;\n\t                });\n\t            }\n\n\t            return promise.then(function(params) {\n\t                return value.apply(object || context, params || []);\n\t            });\n\t        } else {\n\t            return Twig.Promise.resolve(value);\n\t        }\n\t    };\n\n\t    Twig.expression.resolve = function(value, context, params, next_token, object) {\n\t        var is_async = true,\n\t            result;\n\n\t        Twig.expression.resolveAsync.apply(this, [value, context, params, next_token, object])\n\t        .then(function(r) {\n\t            is_async = false;\n\t            result = r;\n\t        });\n\n\t        if (is_async)\n\t            throw new Twig.Error('You are using Twig.js in sync mode in combination with async extensions.');\n\n\t        return result;\n\t    }\n\n\t    /**\n\t     * Registry for logic handlers.\n\t     */\n\t    Twig.expression.handler = {};\n\n\t    /**\n\t     * Define a new expression type, available at Twig.logic.type.{type}\n\t     *\n\t     * @param {string} type The name of the new type.\n\t     */\n\t    Twig.expression.extendType = function (type) {\n\t        Twig.expression.type[type] = \"Twig.expression.type.\" + type;\n\t    };\n\n\t    /**\n\t     * Extend the expression parsing functionality with a new definition.\n\t     *\n\t     * Token definitions follow this format:\n\t     *  {\n\t     *      type:     One of Twig.expression.type.[type], either pre-defined or added using\n\t     *                    Twig.expression.extendType\n\t     *\n\t     *      next:     Array of types from Twig.expression.type that can follow this token,\n\t     *\n\t     *      regex:    A regex or array of regex's that should match the token.\n\t     *\n\t     *      compile: function(token, stack, output) called when this token is being compiled.\n\t     *                   Should return an object with stack and output set.\n\t     *\n\t     *      parse:   function(token, stack, context) called when this token is being parsed.\n\t     *                   Should return an object with stack and context set.\n\t     *  }\n\t     *\n\t     * @param {Object} definition A token definition.\n\t     */\n\t    Twig.expression.extend = function (definition) {\n\t        if (!definition.type) {\n\t            throw new Twig.Error(\"Unable to extend logic definition. No type provided for \" + definition);\n\t        }\n\t        Twig.expression.handler[definition.type] = definition;\n\t    };\n\n\t    // Extend with built-in expressions\n\t    while (Twig.expression.definitions.length > 0) {\n\t        Twig.expression.extend(Twig.expression.definitions.shift());\n\t    }\n\n\t    /**\n\t     * Break an expression into tokens defined in Twig.expression.definitions.\n\t     *\n\t     * @param {string} expression The string to tokenize.\n\t     *\n\t     * @return {Array} An array of tokens.\n\t     */\n\t    Twig.expression.tokenize = function (expression) {\n\t        var tokens = [],\n\t            // Keep an offset of the location in the expression for error messages.\n\t            exp_offset = 0,\n\t            // The valid next tokens of the previous token\n\t            next = null,\n\t            // Match information\n\t            type, regex, regex_array,\n\t            // The possible next token for the match\n\t            token_next,\n\t            // Has a match been found from the definitions\n\t            match_found, invalid_matches = [], match_function;\n\n\t        match_function = function () {\n\t            var match = Array.prototype.slice.apply(arguments),\n\t                string = match.pop(),\n\t                offset = match.pop();\n\n\t            Twig.log.trace(\"Twig.expression.tokenize\",\n\t                           \"Matched a \", type, \" regular expression of \", match);\n\n\t            if (next && Twig.indexOf(next, type) < 0) {\n\t                invalid_matches.push(\n\t                    type + \" cannot follow a \" + tokens[tokens.length - 1].type +\n\t                           \" at template:\" + exp_offset + \" near '\" + match[0].substring(0, 20) +\n\t                           \"...'\"\n\t                );\n\t                // Not a match, don't change the expression\n\t                return match[0];\n\t            }\n\n\t            // Validate the token if a validation function is provided\n\t            if (Twig.expression.handler[type].validate &&\n\t                    !Twig.expression.handler[type].validate(match, tokens)) {\n\t                return match[0];\n\t            }\n\n\t            invalid_matches = [];\n\n\t            tokens.push({\n\t                type:  type,\n\t                value: match[0],\n\t                match: match\n\t            });\n\n\t            match_found = true;\n\t            next = token_next;\n\t            exp_offset += match[0].length;\n\n\t            // Does the token need to return output back to the expression string\n\t            // e.g. a function match of cycle( might return the '(' back to the expression\n\t            // This allows look-ahead to differentiate between token types (e.g. functions and variable names)\n\t            if (Twig.expression.handler[type].transform) {\n\t                return Twig.expression.handler[type].transform(match, tokens);\n\t            }\n\t            return '';\n\t        };\n\n\t        Twig.log.debug(\"Twig.expression.tokenize\", \"Tokenizing expression \", expression);\n\n\t        while (expression.length > 0) {\n\t            expression = expression.trim();\n\t            for (type in Twig.expression.handler) {\n\t                if (Twig.expression.handler.hasOwnProperty(type)) {\n\t                    token_next = Twig.expression.handler[type].next;\n\t                    regex = Twig.expression.handler[type].regex;\n\t                    Twig.log.trace(\"Checking type \", type, \" on \", expression);\n\t                    if (regex instanceof Array) {\n\t                        regex_array = regex;\n\t                    } else {\n\t                        regex_array = [regex];\n\t                    }\n\n\t                    match_found = false;\n\t                    while (regex_array.length > 0) {\n\t                        regex = regex_array.pop();\n\t                        expression = expression.replace(regex, match_function);\n\t                    }\n\t                    // An expression token has been matched. Break the for loop and start trying to\n\t                    //  match the next template (if expression isn't empty.)\n\t                    if (match_found) {\n\t                        break;\n\t                    }\n\t                }\n\t            }\n\t            if (!match_found) {\n\t                if (invalid_matches.length > 0) {\n\t                    throw new Twig.Error(invalid_matches.join(\" OR \"));\n\t                } else {\n\t                    throw new Twig.Error(\"Unable to parse '\" + expression + \"' at template position\" + exp_offset);\n\t                }\n\t            }\n\t        }\n\n\t        Twig.log.trace(\"Twig.expression.tokenize\", \"Tokenized to \", tokens);\n\t        return tokens;\n\t    };\n\n\t    /**\n\t     * Compile an expression token.\n\t     *\n\t     * @param {Object} raw_token The uncompiled token.\n\t     *\n\t     * @return {Object} The compiled token.\n\t     */\n\t    Twig.expression.compile = function (raw_token) {\n\t        var expression = raw_token.value,\n\t            // Tokenize expression\n\t            tokens = Twig.expression.tokenize(expression),\n\t            token = null,\n\t            output = [],\n\t            stack = [],\n\t            token_template = null;\n\n\t        Twig.log.trace(\"Twig.expression.compile: \", \"Compiling \", expression);\n\n\t        // Push tokens into RPN stack using the Shunting-yard algorithm\n\t        // See http://en.wikipedia.org/wiki/Shunting_yard_algorithm\n\n\t        while (tokens.length > 0) {\n\t            token = tokens.shift();\n\t            token_template = Twig.expression.handler[token.type];\n\n\t            Twig.log.trace(\"Twig.expression.compile: \", \"Compiling \", token);\n\n\t            // Compile the template\n\t            token_template.compile && token_template.compile(token, stack, output);\n\n\t            Twig.log.trace(\"Twig.expression.compile: \", \"Stack is\", stack);\n\t            Twig.log.trace(\"Twig.expression.compile: \", \"Output is\", output);\n\t        }\n\n\t        while(stack.length > 0) {\n\t            output.push(stack.pop());\n\t        }\n\n\t        Twig.log.trace(\"Twig.expression.compile: \", \"Final output is\", output);\n\n\t        raw_token.stack = output;\n\t        delete raw_token.value;\n\n\t        return raw_token;\n\t    };\n\n\n\t    /**\n\t     * Parse an RPN expression stack within a context.\n\t     *\n\t     * @param {Array} tokens An array of compiled expression tokens.\n\t     * @param {Object} context The render context to parse the tokens with.\n\t     *\n\t     * @return {Object} The result of parsing all the tokens. The result\n\t     *                  can be anything, String, Array, Object, etc... based on\n\t     *                  the given expression.\n\t     */\n\t    Twig.expression.parse = function (tokens, context, tokens_are_parameters, allow_async) {\n\t        var that = this;\n\n\t        // If the token isn't an array, make it one.\n\t        if (!(tokens instanceof Array)) {\n\t            tokens = [tokens];\n\t        }\n\n\t        // The output stack\n\t        var stack = [],\n\t            next_token,\n\t            output = null,\n\t            promise = null,\n\t            is_async = true,\n\t            token_template = null,\n\t            loop_token_fixups = [];\n\n\t        promise = Twig.async.forEach(tokens, function (token, index) {\n\t            //If the token is marked for cleanup, we don't need to parse it\n\t            if (token.cleanup) {\n\t                return;\n\t            }\n\n\t            var result = null;\n\n\t            //Determine the token that follows this one so that we can pass it to the parser\n\t            if (tokens.length > index + 1) {\n\t                next_token = tokens[index + 1];\n\t            }\n\n\t            token_template = Twig.expression.handler[token.type];\n\n\t            if (token_template.parse)\n\t                result = token_template.parse.apply(that, [token, stack, context, next_token]);\n\n\t            //Store any binary tokens for later if we are in a loop.\n\t            if (context.loop && token.type === Twig.expression.type.operator.binary) {\n\t                loop_token_fixups.push(token);\n\t            }\n\n\t            return result;\n\t        })\n\t        .then(function() {\n\t            //Check every fixup and remove \"key\" as long as they still have \"params\". This covers the use case where\n\t            //a \":\" operator is used in a loop with a \"(expression):\" statement. We need to be able to evaluate the expression\n\t            Twig.forEach(loop_token_fixups, function (loop_token_fixup) {\n\t                if (loop_token_fixup.params && loop_token_fixup.key) {\n\t                    delete loop_token_fixup[\"key\"];\n\t                }\n\t            });\n\n\t            //If parse has been called with a set of tokens that are parameters, we need to return the whole stack,\n\t            //wrapped in an Array.\n\t            if (tokens_are_parameters) {\n\t                var params = [];\n\t                while (stack.length > 0) {\n\t                    params.unshift(stack.pop());\n\t                }\n\n\t                stack.push(params);\n\t            }\n\n\t            if (allow_async)\n\t                return Twig.Promise.resolve(stack.pop());\n\t        })\n\t        .then(function(v) {\n\t            is_async = false;\n\t            return v;\n\t        });\n\n\t        if (allow_async)\n\t            return promise;\n\n\t        if (is_async)\n\t            throw new Twig.Error('You are using Twig.js in sync mode in combination with async extensions.');\n\n\t        // Pop the final value off the stack\n\t        return stack.pop();\n\t    };\n\n\t    return Twig;\n\n\t};\n\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t// ## twig.expression.operator.js\n\t//\n\t// This file handles operator lookups and parsing.\n\tmodule.exports = function (Twig) {\n\t    \"use strict\";\n\n\t    /**\n\t     * Operator associativity constants.\n\t     */\n\t    Twig.expression.operator = {\n\t        leftToRight: 'leftToRight',\n\t        rightToLeft: 'rightToLeft'\n\t    };\n\n\t    var containment = function(a, b) {\n\t        if (b === undefined || b === null) {\n\t            return null;\n\t        } else if (b.indexOf !== undefined) {\n\t            // String\n\t            return a === b || a !== '' && b.indexOf(a) > -1;\n\t        } else {\n\t            var el;\n\t            for (el in b) {\n\t                if (b.hasOwnProperty(el) && b[el] === a) {\n\t                    return true;\n\t                }\n\t            }\n\t            return false;\n\t        }\n\t    };\n\n\t    /**\n\t     * Get the precidence and associativity of an operator. These follow the order that C/C++ use.\n\t     * See http://en.wikipedia.org/wiki/Operators_in_C_and_C++ for the table of values.\n\t     */\n\t    Twig.expression.operator.lookup = function (operator, token) {\n\t        switch (operator) {\n\t            case \"..\":\n\t                token.precidence = 20;\n\t                token.associativity = Twig.expression.operator.leftToRight;\n\t                break;\n\n\t            case ',':\n\t                token.precidence = 18;\n\t                token.associativity = Twig.expression.operator.leftToRight;\n\t                break;\n\n\t            // Ternary\n\t            case '?:':\n\t            case '?':\n\t            case ':':\n\t                token.precidence = 16;\n\t                token.associativity = Twig.expression.operator.rightToLeft;\n\t                break;\n\n\t            case 'or':\n\t                token.precidence = 14;\n\t                token.associativity = Twig.expression.operator.leftToRight;\n\t                break;\n\n\t            case 'and':\n\t                token.precidence = 13;\n\t                token.associativity = Twig.expression.operator.leftToRight;\n\t                break;\n\n\t            case 'b-or':\n\t                token.precidence = 12;\n\t                token.associativity = Twig.expression.operator.leftToRight;\n\t                break;\n\n\t            case 'b-xor':\n\t                token.precidence = 11;\n\t                token.associativity = Twig.expression.operator.leftToRight;\n\t                break;\n\n\t            case 'b-and':\n\t                token.precidence = 10;\n\t                token.associativity = Twig.expression.operator.leftToRight;\n\t                break;\n\n\t            case '==':\n\t            case '!=':\n\t                token.precidence = 9;\n\t                token.associativity = Twig.expression.operator.leftToRight;\n\t                break;\n\n\t            case '<':\n\t            case '<=':\n\t            case '>':\n\t            case '>=':\n\t            case 'not in':\n\t            case 'in':\n\t                token.precidence = 8;\n\t                token.associativity = Twig.expression.operator.leftToRight;\n\t                break;\n\n\t            case '~': // String concatination\n\t            case '+':\n\t            case '-':\n\t                token.precidence = 6;\n\t                token.associativity = Twig.expression.operator.leftToRight;\n\t                break;\n\n\t            case '//':\n\t            case '**':\n\t            case '*':\n\t            case '/':\n\t            case '%':\n\t                token.precidence = 5;\n\t                token.associativity = Twig.expression.operator.leftToRight;\n\t                break;\n\n\t            case 'not':\n\t                token.precidence = 3;\n\t                token.associativity = Twig.expression.operator.rightToLeft;\n\t                break;\n\n\t            default:\n\t                throw new Twig.Error(\"Failed to lookup operator: \" + operator + \" is an unknown operator.\");\n\t        }\n\t        token.operator = operator;\n\t        return token;\n\t    };\n\n\t    /**\n\t     * Handle operations on the RPN stack.\n\t     *\n\t     * Returns the updated stack.\n\t     */\n\t    Twig.expression.operator.parse = function (operator, stack) {\n\t        Twig.log.trace(\"Twig.expression.operator.parse: \", \"Handling \", operator);\n\t        var a, b, c;\n\n\t        if (operator === '?') {\n\t            c = stack.pop();\n\t        }\n\n\t        b = stack.pop();\n\t        if (operator !== 'not') {\n\t            a = stack.pop();\n\t        }\n\n\t        if (operator !== 'in' && operator !== 'not in') {\n\t            if (a && Array.isArray(a)) {\n\t                a = a.length;\n\t            }\n\n\t            if (b && Array.isArray(b)) {\n\t                b = b.length;\n\t            }\n\t        }\n\n\t        switch (operator) {\n\t            case ':':\n\t                // Ignore\n\t                break;\n\n\t            case '?:':\n\t                if (Twig.lib.boolval(a)) {\n\t                    stack.push(a);\n\t                } else {\n\t                    stack.push(b);\n\t                }\n\t                break;\n\t            case '?':\n\t                if (a === undefined) {\n\t                    //An extended ternary.\n\t                    a = b;\n\t                    b = c;\n\t                    c = undefined;\n\t                }\n\n\t                if (Twig.lib.boolval(a)) {\n\t                    stack.push(b);\n\t                } else {\n\t                    stack.push(c);\n\t                }\n\t                break;\n\n\t            case '+':\n\t                b = parseFloat(b);\n\t                a = parseFloat(a);\n\t                stack.push(a + b);\n\t                break;\n\n\t            case '-':\n\t                b = parseFloat(b);\n\t                a = parseFloat(a);\n\t                stack.push(a - b);\n\t                break;\n\n\t            case '*':\n\t                b = parseFloat(b);\n\t                a = parseFloat(a);\n\t                stack.push(a * b);\n\t                break;\n\n\t            case '/':\n\t                b = parseFloat(b);\n\t                a = parseFloat(a);\n\t                stack.push(a / b);\n\t                break;\n\n\t            case '//':\n\t                b = parseFloat(b);\n\t                a = parseFloat(a);\n\t                stack.push(Math.floor(a / b));\n\t                break;\n\n\t            case '%':\n\t                b = parseFloat(b);\n\t                a = parseFloat(a);\n\t                stack.push(a % b);\n\t                break;\n\n\t            case '~':\n\t                stack.push( (a != null ? a.toString() : \"\")\n\t                          + (b != null ? b.toString() : \"\") );\n\t                break;\n\n\t            case 'not':\n\t            case '!':\n\t                stack.push(!Twig.lib.boolval(b));\n\t                break;\n\n\t            case '<':\n\t                stack.push(a < b);\n\t                break;\n\n\t            case '<=':\n\t                stack.push(a <= b);\n\t                break;\n\n\t            case '>':\n\t                stack.push(a > b);\n\t                break;\n\n\t            case '>=':\n\t                stack.push(a >= b);\n\t                break;\n\n\t            case '===':\n\t                stack.push(a === b);\n\t                break;\n\n\t            case '==':\n\t                stack.push(a == b);\n\t                break;\n\n\t            case '!==':\n\t                stack.push(a !== b);\n\t                break;\n\n\t            case '!=':\n\t                stack.push(a != b);\n\t                break;\n\n\t            case 'or':\n\t                stack.push(a || b);\n\t                break;\n\n\t            case 'b-or':\n\t                stack.push(a | b);\n\t                break;\n\n\t            case 'b-xor':\n\t                stack.push(a ^ b);\n\t                break;\n\n\t            case 'and':\n\t                stack.push(a && b);\n\t                break;\n\n\t            case 'b-and':\n\t                stack.push(a & b);\n\t                break;\n\n\t            case '**':\n\t                stack.push(Math.pow(a, b));\n\t                break;\n\n\t            case 'not in':\n\t                stack.push( !containment(a, b) );\n\t                break;\n\n\t            case 'in':\n\t                stack.push( containment(a, b) );\n\t                break;\n\n\t            case '..':\n\t                stack.push( Twig.functions.range(a, b) );\n\t                break;\n\n\t            default:\n\t                debugger;\n\t                throw new Twig.Error(\"Failed to parse operator: \" + operator + \" is an unknown operator.\");\n\t        }\n\t    };\n\n\t    return Twig;\n\n\t};\n\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t// ## twig.filters.js\n\t//\n\t// This file handles parsing filters.\n\tmodule.exports = function (Twig) {\n\n\t    // Determine object type\n\t    function is(type, obj) {\n\t        var clas = Object.prototype.toString.call(obj).slice(8, -1);\n\t        return obj !== undefined && obj !== null && clas === type;\n\t    }\n\n\t    Twig.filters = {\n\t        // String Filters\n\t        upper:  function(value) {\n\t            if ( typeof value !== \"string\" ) {\n\t               return value;\n\t            }\n\n\t            return value.toUpperCase();\n\t        },\n\t        lower: function(value) {\n\t            if ( typeof value !== \"string\" ) {\n\t               return value;\n\t            }\n\n\t            return value.toLowerCase();\n\t        },\n\t        capitalize: function(value) {\n\t            if ( typeof value !== \"string\" ) {\n\t                 return value;\n\t            }\n\n\t            return value.substr(0, 1).toUpperCase() + value.toLowerCase().substr(1);\n\t        },\n\t        title: function(value) {\n\t            if ( typeof value !== \"string\" ) {\n\t               return value;\n\t            }\n\n\t            return value.toLowerCase().replace( /(^|\\s)([a-z])/g , function(m, p1, p2){\n\t                return p1 + p2.toUpperCase();\n\t            });\n\t        },\n\t        length: function(value) {\n\t            if (Twig.lib.is(\"Array\", value) || typeof value === \"string\") {\n\t                return value.length;\n\t            } else if (Twig.lib.is(\"Object\", value)) {\n\t                if (value._keys === undefined) {\n\t                    return Object.keys(value).length;\n\t                } else {\n\t                    return value._keys.length;\n\t                }\n\t            } else {\n\t                return 0;\n\t            }\n\t        },\n\n\t        // Array/Object Filters\n\t        reverse: function(value) {\n\t            if (is(\"Array\", value)) {\n\t                return value.reverse();\n\t            } else if (is(\"String\", value)) {\n\t                return value.split(\"\").reverse().join(\"\");\n\t            } else if (is(\"Object\", value)) {\n\t                var keys = value._keys || Object.keys(value).reverse();\n\t                value._keys = keys;\n\t                return value;\n\t            }\n\t        },\n\t        sort: function(value) {\n\t            if (is(\"Array\", value)) {\n\t                return value.sort();\n\t            } else if (is('Object', value)) {\n\t                // Sorting objects isn't obvious since the order of\n\t                // returned keys isn't guaranteed in JavaScript.\n\t                // Because of this we use a \"hidden\" key called _keys to\n\t                // store the keys in the order we want to return them.\n\n\t                delete value._keys;\n\t                var keys = Object.keys(value),\n\t                    sorted_keys = keys.sort(function(a, b) {\n\t                        var a1, a2;\n\n\t                        // if a and b are comparable, we're fine :-)\n\t                        if((value[a] > value[b]) == !(value[a] <= value[b])) {\n\t                            return value[a] > value[b] ? 1 :\n\t\t\t\t           value[a] < value[b] ? -1 :\n\t\t\t\t\t   0;\n\t                        }\n\t                        // if a and b can be parsed as numbers, we can compare\n\t                        // their numeric value\n\t                        else if(!isNaN(a1 = parseFloat(value[a])) &&\n\t                                !isNaN(b1 = parseFloat(value[b]))) {\n\t                            return a1 > b1 ? 1 :\n\t\t\t\t           a1 < b1 ? -1 :\n\t\t\t\t\t   0;\n\t                        }\n\t                        // if one of the values is a string, we convert the\n\t                        // other value to string as well\n\t                        else if(typeof value[a] == 'string') {\n\t                            return value[a] > value[b].toString() ? 1 :\n\t                                   value[a] < value[b].toString() ? -1 :\n\t\t\t\t\t   0;\n\t                        }\n\t                        else if(typeof value[b] == 'string') {\n\t                            return value[a].toString() > value[b] ? 1 :\n\t                                   value[a].toString() < value[b] ? -1 :\n\t\t\t\t\t   0;\n\t                        }\n\t                        // everything failed - return 'null' as sign, that\n\t                        // the values are not comparable\n\t                        else {\n\t                            return null;\n\t                        }\n\t                    });\n\t                value._keys = sorted_keys;\n\t                return value;\n\t            }\n\t        },\n\t        keys: function(value) {\n\t            if (value === undefined || value === null){\n\t                return;\n\t           }\n\n\t            var keyset = value._keys || Object.keys(value),\n\t                output = [];\n\n\t            Twig.forEach(keyset, function(key) {\n\t                if (key === \"_keys\") return; // Ignore the _keys property\n\t                if (value.hasOwnProperty(key)) {\n\t                    output.push(key);\n\t                }\n\t            });\n\t            return output;\n\t        },\n\t        url_encode: function(value) {\n\t            if (value === undefined || value === null){\n\t                return;\n\t            }\n\n\t            var result = encodeURIComponent(value);\n\t            result = result.replace(\"'\", \"%27\");\n\t            return result;\n\t        },\n\t        join: function(value, params) {\n\t            if (value === undefined || value === null){\n\t                return;\n\t            }\n\n\t            var join_str = \"\",\n\t                output = [],\n\t                keyset = null;\n\n\t            if (params && params[0]) {\n\t                join_str = params[0];\n\t            }\n\t            if (is(\"Array\", value)) {\n\t                output = value;\n\t            } else {\n\t                keyset = value._keys || Object.keys(value);\n\t                Twig.forEach(keyset, function(key) {\n\t                    if (key === \"_keys\") return; // Ignore the _keys property\n\t                    if (value.hasOwnProperty(key)) {\n\t                        output.push(value[key]);\n\t                    }\n\t                });\n\t            }\n\t            return output.join(join_str);\n\t        },\n\t        \"default\": function(value, params) {\n\t            if (params !== undefined && params.length > 1) {\n\t                throw new Twig.Error(\"default filter expects one argument\");\n\t            }\n\t            if (value === undefined || value === null || value === '' ) {\n\t                if (params === undefined) {\n\t                    return '';\n\t                }\n\n\t                return params[0];\n\t            } else {\n\t                return value;\n\t            }\n\t        },\n\t        json_encode: function(value) {\n\t            if(value === undefined || value === null) {\n\t                return \"null\";\n\t            }\n\t            else if ((typeof value == 'object') && (is(\"Array\", value))) {\n\t                output = [];\n\n\t                Twig.forEach(value, function(v) {\n\t                    output.push(Twig.filters.json_encode(v));\n\t                });\n\n\t                return \"[\" + output.join(\",\") + \"]\";\n\t            }\n\t            else if (typeof value == 'object') {\n\t                var keyset = value._keys || Object.keys(value),\n\t                output = [];\n\n\t                Twig.forEach(keyset, function(key) {\n\t                    output.push(JSON.stringify(key) + \":\" + Twig.filters.json_encode(value[key]));\n\t                });\n\n\t                return \"{\" + output.join(\",\") + \"}\";\n\t            }\n\t            else {\n\t                return JSON.stringify(value);\n\t            }\n\t        },\n\t        merge: function(value, params) {\n\t            var obj = [],\n\t                arr_index = 0,\n\t                keyset = [];\n\n\t            // Check to see if all the objects being merged are arrays\n\t            if (!is(\"Array\", value)) {\n\t                // Create obj as an Object\n\t                obj = { };\n\t            } else {\n\t                Twig.forEach(params, function(param) {\n\t                    if (!is(\"Array\", param)) {\n\t                        obj = { };\n\t                    }\n\t                });\n\t            }\n\t            if (!is(\"Array\", obj)) {\n\t                obj._keys = [];\n\t            }\n\n\t            if (is(\"Array\", value)) {\n\t                Twig.forEach(value, function(val) {\n\t                    if (obj._keys) obj._keys.push(arr_index);\n\t                    obj[arr_index] = val;\n\t                    arr_index++;\n\t                });\n\t            } else {\n\t                keyset = value._keys || Object.keys(value);\n\t                Twig.forEach(keyset, function(key) {\n\t                    obj[key] = value[key];\n\t                    obj._keys.push(key);\n\n\t                    // Handle edge case where a number index in an object is greater than\n\t                    //   the array counter. In such a case, the array counter is increased\n\t                    //   one past the index.\n\t                    //\n\t                    // Example {{ [\"a\", \"b\"]|merge({\"4\":\"value\"}, [\"c\", \"d\"])\n\t                    // Without this, d would have an index of \"4\" and overwrite the value\n\t                    //   of \"value\"\n\t                    var int_key = parseInt(key, 10);\n\t                    if (!isNaN(int_key) && int_key >= arr_index) {\n\t                        arr_index = int_key + 1;\n\t                    }\n\t                });\n\t            }\n\n\t            // mixin the merge arrays\n\t            Twig.forEach(params, function(param) {\n\t                if (is(\"Array\", param)) {\n\t                    Twig.forEach(param, function(val) {\n\t                        if (obj._keys) obj._keys.push(arr_index);\n\t                        obj[arr_index] = val;\n\t                        arr_index++;\n\t                    });\n\t                } else {\n\t                    keyset = param._keys || Object.keys(param);\n\t                    Twig.forEach(keyset, function(key) {\n\t                        if (!obj[key]) obj._keys.push(key);\n\t                        obj[key] = param[key];\n\n\t                        var int_key = parseInt(key, 10);\n\t                        if (!isNaN(int_key) && int_key >= arr_index) {\n\t                            arr_index = int_key + 1;\n\t                        }\n\t                    });\n\t                }\n\t            });\n\t            if (params.length === 0) {\n\t                throw new Twig.Error(\"Filter merge expects at least one parameter\");\n\t            }\n\n\t            return obj;\n\t        },\n\t        date: function(value, params) {\n\t            var date = Twig.functions.date(value);\n\t            var format = params && params.length ? params[0] : 'F j, Y H:i';\n\t            return Twig.lib.date(format, date);\n\t        },\n\n\t        date_modify: function(value, params) {\n\t            if (value === undefined || value === null) {\n\t                return;\n\t            }\n\t            if (params === undefined || params.length !== 1) {\n\t                throw new Twig.Error(\"date_modify filter expects 1 argument\");\n\t            }\n\n\t            var modifyText = params[0], time;\n\n\t            if (Twig.lib.is(\"Date\", value)) {\n\t                time = Twig.lib.strtotime(modifyText, value.getTime() / 1000);\n\t            }\n\t            if (Twig.lib.is(\"String\", value)) {\n\t                time = Twig.lib.strtotime(modifyText, Twig.lib.strtotime(value));\n\t            }\n\t            if (Twig.lib.is(\"Number\", value)) {\n\t                time = Twig.lib.strtotime(modifyText, value);\n\t            }\n\n\t            return new Date(time * 1000);\n\t        },\n\n\t        replace: function(value, params) {\n\t            if (value === undefined||value === null){\n\t                return;\n\t            }\n\n\t            var pairs = params[0],\n\t                tag;\n\t            for (tag in pairs) {\n\t                if (pairs.hasOwnProperty(tag) && tag !== \"_keys\") {\n\t                    value = Twig.lib.replaceAll(value, tag, pairs[tag]);\n\t                }\n\t            }\n\t            return value;\n\t        },\n\n\t        format: function(value, params) {\n\t            if (value === undefined || value === null){\n\t                return;\n\t            }\n\n\t            return Twig.lib.vsprintf(value, params);\n\t        },\n\n\t        striptags: function(value) {\n\t            if (value === undefined || value === null){\n\t                return;\n\t            }\n\n\t            return Twig.lib.strip_tags(value);\n\t        },\n\n\t        escape: function(value, params) {\n\t            if (value === undefined|| value === null){\n\t                return;\n\t            }\n\n\t            var strategy = \"html\";\n\t            if(params && params.length && params[0] !== true)\n\t                strategy = params[0];\n\n\t            if(strategy == \"html\") {\n\t                var raw_value = value.toString().replace(/&/g, \"&amp;\")\n\t                            .replace(/</g, \"&lt;\")\n\t                            .replace(/>/g, \"&gt;\")\n\t                            .replace(/\"/g, \"&quot;\")\n\t                            .replace(/'/g, \"&#039;\");\n\t                return Twig.Markup(raw_value, 'html');\n\t            } else if(strategy == \"js\") {\n\t                var raw_value = value.toString();\n\t                var result = \"\";\n\n\t                for(var i = 0; i < raw_value.length; i++) {\n\t                    if(raw_value[i].match(/^[a-zA-Z0-9,\\._]$/))\n\t                        result += raw_value[i];\n\t                    else {\n\t                        var char_code = raw_value.charCodeAt(i);\n\n\t                        if(char_code < 0x80)\n\t                            result += \"\\\\x\" + char_code.toString(16).toUpperCase();\n\t                        else\n\t                            result += Twig.lib.sprintf(\"\\\\u%04s\", char_code.toString(16).toUpperCase());\n\t                    }\n\t                }\n\n\t                return Twig.Markup(result, 'js');\n\t            } else if(strategy == \"css\") {\n\t                var raw_value = value.toString();\n\t                var result = \"\";\n\n\t                for(var i = 0; i < raw_value.length; i++) {\n\t                    if(raw_value[i].match(/^[a-zA-Z0-9]$/))\n\t                        result += raw_value[i];\n\t                    else {\n\t                        var char_code = raw_value.charCodeAt(i);\n\t                        result += \"\\\\\" + char_code.toString(16).toUpperCase() + \" \";\n\t                    }\n\t                }\n\n\t                return Twig.Markup(result, 'css');\n\t            } else if(strategy == \"url\") {\n\t                var result = Twig.filters.url_encode(value);\n\t                return Twig.Markup(result, 'url');\n\t            } else if(strategy == \"html_attr\") {\n\t                var raw_value = value.toString();\n\t                var result = \"\";\n\n\t                for(var i = 0; i < raw_value.length; i++) {\n\t                    if(raw_value[i].match(/^[a-zA-Z0-9,\\.\\-_]$/))\n\t                        result += raw_value[i];\n\t                    else if(raw_value[i].match(/^[&<>\"]$/))\n\t                        result += raw_value[i].replace(/&/g, \"&amp;\")\n\t                                .replace(/</g, \"&lt;\")\n\t                                .replace(/>/g, \"&gt;\")\n\t                                .replace(/\"/g, \"&quot;\");\n\t                    else {\n\t                        var char_code = raw_value.charCodeAt(i);\n\n\t                        // The following replaces characters undefined in HTML with\n\t                        // the hex entity for the Unicode replacement character.\n\t                        if(char_code <= 0x1f && char_code != 0x09 && char_code != 0x0a && char_code != 0x0d)\n\t                            result += \"&#xFFFD;\";\n\t                        else if(char_code < 0x80)\n\t                            result += Twig.lib.sprintf(\"&#x%02s;\", char_code.toString(16).toUpperCase());\n\t                        else\n\t                            result += Twig.lib.sprintf(\"&#x%04s;\", char_code.toString(16).toUpperCase());\n\t                    }\n\t                }\n\n\t                return Twig.Markup(result, 'html_attr');\n\t            } else {\n\t                throw new Twig.Error(\"escape strategy unsupported\");\n\t            }\n\t        },\n\n\t        /* Alias of escape */\n\t        \"e\": function(value, params) {\n\t            return Twig.filters.escape(value, params);\n\t        },\n\n\t        nl2br: function(value) {\n\t            if (value === undefined || value === null){\n\t                return;\n\t            }\n\t            var linebreak_tag = \"BACKSLASH_n_replace\",\n\t                br = \"<br />\" + linebreak_tag;\n\n\t            value = Twig.filters.escape(value)\n\t                        .replace(/\\r\\n/g, br)\n\t                        .replace(/\\r/g, br)\n\t                        .replace(/\\n/g, br);\n\n\t            value = Twig.lib.replaceAll(value, linebreak_tag, \"\\n\");\n\n\t            return Twig.Markup(value);\n\t        },\n\n\t        /**\n\t         * Adapted from: http://phpjs.org/functions/number_format:481\n\t         */\n\t        number_format: function(value, params) {\n\t            var number = value,\n\t                decimals = (params && params[0]) ? params[0] : undefined,\n\t                dec      = (params && params[1] !== undefined) ? params[1] : \".\",\n\t                sep      = (params && params[2] !== undefined) ? params[2] : \",\";\n\n\t            number = (number + '').replace(/[^0-9+\\-Ee.]/g, '');\n\t            var n = !isFinite(+number) ? 0 : +number,\n\t                prec = !isFinite(+decimals) ? 0 : Math.abs(decimals),\n\t                s = '',\n\t                toFixedFix = function (n, prec) {\n\t                    var k = Math.pow(10, prec);\n\t                    return '' + Math.round(n * k) / k;\n\t                };\n\t            // Fix for IE parseFloat(0.55).toFixed(0) = 0;\n\t            s = (prec ? toFixedFix(n, prec) : '' + Math.round(n)).split('.');\n\t            if (s[0].length > 3) {\n\t                s[0] = s[0].replace(/\\B(?=(?:\\d{3})+(?!\\d))/g, sep);\n\t            }\n\t            if ((s[1] || '').length < prec) {\n\t                s[1] = s[1] || '';\n\t                s[1] += new Array(prec - s[1].length + 1).join('0');\n\t            }\n\t            return s.join(dec);\n\t        },\n\n\t        trim: function(value, params) {\n\t            if (value === undefined|| value === null){\n\t                return;\n\t            }\n\n\t            var str = Twig.filters.escape( '' + value ),\n\t                whitespace;\n\t            if ( params && params[0] ) {\n\t                whitespace = '' + params[0];\n\t            } else {\n\t                whitespace = ' \\n\\r\\t\\f\\x0b\\xa0\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u200b\\u2028\\u2029\\u3000';\n\t            }\n\t            for (var i = 0; i < str.length; i++) {\n\t                if (whitespace.indexOf(str.charAt(i)) === -1) {\n\t                    str = str.substring(i);\n\t                    break;\n\t                }\n\t            }\n\t            for (i = str.length - 1; i >= 0; i--) {\n\t                if (whitespace.indexOf(str.charAt(i)) === -1) {\n\t                    str = str.substring(0, i + 1);\n\t                    break;\n\t                }\n\t            }\n\t            return whitespace.indexOf(str.charAt(0)) === -1 ? str : '';\n\t        },\n\n\t        truncate: function (value, params) {\n\t            var length = 30,\n\t                preserve = false,\n\t                separator = '...';\n\n\t            value =  value + '';\n\t            if (params) {\n\t                if (params[0]) {\n\t                    length = params[0];\n\t                }\n\t                if (params[1]) {\n\t                    preserve = params[1];\n\t                }\n\t                if (params[2]) {\n\t                    separator = params[2];\n\t                }\n\t            }\n\n\t            if (value.length > length) {\n\n\t                if (preserve) {\n\t                    length = value.indexOf(' ', length);\n\t                    if (length === -1) {\n\t                        return value;\n\t                    }\n\t                }\n\n\t                value =  value.substr(0, length) + separator;\n\t            }\n\n\t            return value;\n\t        },\n\n\t        slice: function(value, params) {\n\t            if (value === undefined || value === null) {\n\t                return;\n\t            }\n\t            if (params === undefined || params.length < 1) {\n\t                throw new Twig.Error(\"slice filter expects at least 1 argument\");\n\t            }\n\n\t            // default to start of string\n\t            var start = params[0] || 0;\n\t            // default to length of string\n\t            var length = params.length > 1 ? params[1] : value.length;\n\t            // handle negative start values\n\t            var startIndex = start >= 0 ? start : Math.max( value.length + start, 0 );\n\n\t            if (Twig.lib.is(\"Array\", value)) {\n\t                var output = [];\n\t                for (var i = startIndex; i < startIndex + length && i < value.length; i++) {\n\t                    output.push(value[i]);\n\t                }\n\t                return output;\n\t            } else if (Twig.lib.is(\"String\", value)) {\n\t                return value.substr(startIndex, length);\n\t            } else {\n\t                throw new Twig.Error(\"slice filter expects value to be an array or string\");\n\t            }\n\t        },\n\n\t        abs: function(value) {\n\t            if (value === undefined || value === null) {\n\t                return;\n\t            }\n\n\t            return Math.abs(value);\n\t        },\n\n\t        first: function(value) {\n\t            if (is(\"Array\", value)) {\n\t                return value[0];\n\t            } else if (is(\"Object\", value)) {\n\t                if ('_keys' in value) {\n\t                    return value[value._keys[0]];\n\t                }\n\t            } else if ( typeof value === \"string\" ) {\n\t                return value.substr(0, 1);\n\t            }\n\n\t            return;\n\t        },\n\n\t        split: function(value, params) {\n\t            if (value === undefined || value === null) {\n\t                return;\n\t            }\n\t            if (params === undefined || params.length < 1 || params.length > 2) {\n\t                throw new Twig.Error(\"split filter expects 1 or 2 argument\");\n\t            }\n\t            if (Twig.lib.is(\"String\", value)) {\n\t                var delimiter = params[0],\n\t                    limit = params[1],\n\t                    split = value.split(delimiter);\n\n\t                if (limit === undefined) {\n\n\t                    return split;\n\n\t                } else if (limit < 0) {\n\n\t                    return value.split(delimiter, split.length + limit);\n\n\t                } else {\n\n\t                    var limitedSplit = [];\n\n\t                    if (delimiter == '') {\n\t                        // empty delimiter\n\t                        // \"aabbcc\"|split('', 2)\n\t                        //     -> ['aa', 'bb', 'cc']\n\n\t                        while(split.length > 0) {\n\t                            var temp = \"\";\n\t                            for (var i=0; i<limit && split.length > 0; i++) {\n\t                                temp += split.shift();\n\t                            }\n\t                            limitedSplit.push(temp);\n\t                        }\n\n\t                    } else {\n\t                        // non-empty delimiter\n\t                        // \"one,two,three,four,five\"|split(',', 3)\n\t                        //     -> ['one', 'two', 'three,four,five']\n\n\t                        for (var i=0; i<limit-1 && split.length > 0; i++) {\n\t                            limitedSplit.push(split.shift());\n\t                        }\n\n\t                        if (split.length > 0) {\n\t                            limitedSplit.push(split.join(delimiter));\n\t                        }\n\t                    }\n\n\t                    return limitedSplit;\n\t                }\n\n\t            } else {\n\t                throw new Twig.Error(\"split filter expects value to be a string\");\n\t            }\n\t        },\n\t        last: function(value) {\n\t            if (Twig.lib.is('Object', value)) {\n\t                var keys;\n\n\t                if (value._keys === undefined) {\n\t                    keys = Object.keys(value);\n\t                } else {\n\t                    keys = value._keys;\n\t                }\n\n\t                return value[keys[keys.length - 1]];\n\t            }\n\n\t            // string|array\n\t            return value[value.length - 1];\n\t        },\n\t        raw: function(value) {\n\t            return Twig.Markup(value);\n\t        },\n\t        batch: function(items, params) {\n\t            var size = params.shift(),\n\t                fill = params.shift(),\n\t                result,\n\t                last,\n\t                missing;\n\n\t            if (!Twig.lib.is(\"Array\", items)) {\n\t                throw new Twig.Error(\"batch filter expects items to be an array\");\n\t            }\n\n\t            if (!Twig.lib.is(\"Number\", size)) {\n\t                throw new Twig.Error(\"batch filter expects size to be a number\");\n\t            }\n\n\t            size = Math.ceil(size);\n\n\t            result = Twig.lib.chunkArray(items, size);\n\n\t            if (fill && items.length % size != 0) {\n\t                last = result.pop();\n\t                missing = size - last.length;\n\n\t                while (missing--) {\n\t                    last.push(fill);\n\t                }\n\n\t                result.push(last);\n\t            }\n\n\t            return result;\n\t        },\n\t        round: function(value, params) {\n\t            params = params || [];\n\n\t            var precision = params.length > 0 ? params[0] : 0,\n\t                method = params.length > 1 ? params[1] : \"common\";\n\n\t            value = parseFloat(value);\n\n\t            if(precision && !Twig.lib.is(\"Number\", precision)) {\n\t                throw new Twig.Error(\"round filter expects precision to be a number\");\n\t            }\n\n\t            if (method === \"common\") {\n\t                return Twig.lib.round(value, precision);\n\t            }\n\n\t            if(!Twig.lib.is(\"Function\", Math[method])) {\n\t                throw new Twig.Error(\"round filter expects method to be 'floor', 'ceil', or 'common'\");\n\t            }\n\n\t            return Math[method](value * Math.pow(10, precision)) / Math.pow(10, precision);\n\t        }\n\t    };\n\n\t    Twig.filter = function(filter, value, params) {\n\t        if (!Twig.filters[filter]) {\n\t            throw \"Unable to find filter \" + filter;\n\t        }\n\t        return Twig.filters[filter].apply(this, [value, params]);\n\t    };\n\n\t    Twig.filter.extend = function(filter, definition) {\n\t        Twig.filters[filter] = definition;\n\t    };\n\n\t    return Twig;\n\n\t};\n\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t// ## twig.functions.js\n\t//\n\t// This file handles parsing filters.\n\tmodule.exports = function (Twig) {\n\t    /**\n\t     * @constant\n\t     * @type {string}\n\t     */\n\t    var TEMPLATE_NOT_FOUND_MESSAGE = 'Template \"{name}\" is not defined.';\n\n\t    // Determine object type\n\t    function is(type, obj) {\n\t        var clas = Object.prototype.toString.call(obj).slice(8, -1);\n\t        return obj !== undefined && obj !== null && clas === type;\n\t    }\n\n\t    Twig.functions = {\n\t        //  attribute, block, constant, date, dump, parent, random,.\n\n\t        // Range function from http://phpjs.org/functions/range:499\n\t        // Used under an MIT License\n\t        range: function (low, high, step) {\n\t            // http://kevin.vanzonneveld.net\n\t            // +   original by: Waldo Malqui Silva\n\t            // *     example 1: range ( 0, 12 );\n\t            // *     returns 1: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]\n\t            // *     example 2: range( 0, 100, 10 );\n\t            // *     returns 2: [0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100]\n\t            // *     example 3: range( 'a', 'i' );\n\t            // *     returns 3: ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i']\n\t            // *     example 4: range( 'c', 'a' );\n\t            // *     returns 4: ['c', 'b', 'a']\n\t            var matrix = [];\n\t            var inival, endval, plus;\n\t            var walker = step || 1;\n\t            var chars = false;\n\n\t            if (!isNaN(low) && !isNaN(high)) {\n\t                inival = parseInt(low, 10);\n\t                endval = parseInt(high, 10);\n\t            } else if (isNaN(low) && isNaN(high)) {\n\t                chars = true;\n\t                inival = low.charCodeAt(0);\n\t                endval = high.charCodeAt(0);\n\t            } else {\n\t                inival = (isNaN(low) ? 0 : low);\n\t                endval = (isNaN(high) ? 0 : high);\n\t            }\n\n\t            plus = ((inival > endval) ? false : true);\n\t            if (plus) {\n\t                while (inival <= endval) {\n\t                    matrix.push(((chars) ? String.fromCharCode(inival) : inival));\n\t                    inival += walker;\n\t                }\n\t            } else {\n\t                while (inival >= endval) {\n\t                    matrix.push(((chars) ? String.fromCharCode(inival) : inival));\n\t                    inival -= walker;\n\t                }\n\t            }\n\n\t            return matrix;\n\t        },\n\t        cycle: function(arr, i) {\n\t            var pos = i % arr.length;\n\t            return arr[pos];\n\t        },\n\t        dump: function() {\n\t            var EOL = '\\n',\n\t                indentChar = '  ',\n\t                indentTimes = 0,\n\t                out = '',\n\t                args = Array.prototype.slice.call(arguments),\n\t                indent = function(times) {\n\t                    var ind  = '';\n\t                    while (times > 0) {\n\t                        times--;\n\t                        ind += indentChar;\n\t                    }\n\t                    return ind;\n\t                },\n\t                displayVar = function(variable) {\n\t                    out += indent(indentTimes);\n\t                    if (typeof(variable) === 'object') {\n\t                        dumpVar(variable);\n\t                    } else if (typeof(variable) === 'function') {\n\t                        out += 'function()' + EOL;\n\t                    } else if (typeof(variable) === 'string') {\n\t                        out += 'string(' + variable.length + ') \"' + variable + '\"' + EOL;\n\t                    } else if (typeof(variable) === 'number') {\n\t                        out += 'number(' + variable + ')' + EOL;\n\t                    } else if (typeof(variable) === 'boolean') {\n\t                        out += 'bool(' + variable + ')' + EOL;\n\t                    }\n\t                },\n\t                dumpVar = function(variable) {\n\t                    var i;\n\t                    if (variable === null) {\n\t                        out += 'NULL' + EOL;\n\t                    } else if (variable === undefined) {\n\t                        out += 'undefined' + EOL;\n\t                    } else if (typeof variable === 'object') {\n\t                        out += indent(indentTimes) + typeof(variable);\n\t                        indentTimes++;\n\t                        out += '(' + (function(obj) {\n\t                            var size = 0, key;\n\t                            for (key in obj) {\n\t                                if (obj.hasOwnProperty(key)) {\n\t                                    size++;\n\t                                }\n\t                            }\n\t                            return size;\n\t                        })(variable) + ') {' + EOL;\n\t                        for (i in variable) {\n\t                            out += indent(indentTimes) + '[' + i + ']=> ' + EOL;\n\t                            displayVar(variable[i]);\n\t                        }\n\t                        indentTimes--;\n\t                        out += indent(indentTimes) + '}' + EOL;\n\t                    } else {\n\t                        displayVar(variable);\n\t                    }\n\t                };\n\n\t            // handle no argument case by dumping the entire render context\n\t            if (args.length == 0) args.push(this.context);\n\n\t            Twig.forEach(args, function(variable) {\n\t                dumpVar(variable);\n\t            });\n\n\t            return out;\n\t        },\n\t        date: function(date, time) {\n\t            var dateObj;\n\t            if (date === undefined || date === null || date === \"\") {\n\t                dateObj = new Date();\n\t            } else if (Twig.lib.is(\"Date\", date)) {\n\t                dateObj = date;\n\t            } else if (Twig.lib.is(\"String\", date)) {\n\t                if (date.match(/^[0-9]+$/)) {\n\t                    dateObj = new Date(date * 1000);\n\t                }\n\t                else {\n\t                    dateObj = new Date(Twig.lib.strtotime(date) * 1000);\n\t                }\n\t            } else if (Twig.lib.is(\"Number\", date)) {\n\t                // timestamp\n\t                dateObj = new Date(date * 1000);\n\t            } else {\n\t                throw new Twig.Error(\"Unable to parse date \" + date);\n\t            }\n\t            return dateObj;\n\t        },\n\t        block: function(block) {\n\t            if (this.originalBlockTokens[block]) {\n\t                return Twig.logic.parse.apply(this, [this.originalBlockTokens[block], this.context]).output;\n\t            } else {\n\t                return this.blocks[block];\n\t            }\n\t        },\n\t        parent: function() {\n\t            // Add a placeholder\n\t            return Twig.placeholders.parent;\n\t        },\n\t        attribute: function(object, method, params) {\n\t            if (Twig.lib.is('Object', object)) {\n\t                if (object.hasOwnProperty(method)) {\n\t                    if (typeof object[method] === \"function\") {\n\t                        return object[method].apply(undefined, params);\n\t                    }\n\t                    else {\n\t                        return object[method];\n\t                    }\n\t                }\n\t            }\n\t            // Array will return element 0-index\n\t            return object[method] || undefined;\n\t        },\n\t        max: function(values) {\n\t            if(Twig.lib.is(\"Object\", values)) {\n\t                delete values[\"_keys\"];\n\t                return Twig.lib.max(values);\n\t            }\n\n\t            return Twig.lib.max.apply(null, arguments);\n\t        },\n\t        min: function(values) {\n\t            if(Twig.lib.is(\"Object\", values)) {\n\t                delete values[\"_keys\"];\n\t                return Twig.lib.min(values);\n\t            }\n\n\t            return Twig.lib.min.apply(null, arguments);\n\t        },\n\t        template_from_string: function(template) {\n\t            if (template === undefined) {\n\t                template = '';\n\t            }\n\t            return Twig.Templates.parsers.twig({\n\t                options: this.options,\n\t                data: template\n\t            });\n\t        },\n\t        random: function(value) {\n\t            var LIMIT_INT31 = 0x80000000;\n\n\t            function getRandomNumber(n) {\n\t                var random = Math.floor(Math.random() * LIMIT_INT31);\n\t                var limits = [0, n];\n\t                var min = Math.min.apply(null, limits),\n\t                    max = Math.max.apply(null, limits);\n\t                return min + Math.floor((max - min + 1) * random / LIMIT_INT31);\n\t            }\n\n\t            if(Twig.lib.is(\"Number\", value)) {\n\t                return getRandomNumber(value);\n\t            }\n\n\t            if(Twig.lib.is(\"String\", value)) {\n\t                return value.charAt(getRandomNumber(value.length-1));\n\t            }\n\n\t            if(Twig.lib.is(\"Array\", value)) {\n\t                return value[getRandomNumber(value.length-1)];\n\t            }\n\n\t            if(Twig.lib.is(\"Object\", value)) {\n\t                var keys = Object.keys(value);\n\t                return value[keys[getRandomNumber(keys.length-1)]];\n\t            }\n\n\t            return getRandomNumber(LIMIT_INT31-1);\n\t        },\n\n\t        /**\n\t         * Returns the content of a template without rendering it\n\t         * @param {string} name\n\t         * @param {boolean} [ignore_missing=false]\n\t         * @returns {string}\n\t         */\n\t        source: function(name, ignore_missing) {\n\t            var templateSource;\n\t            var templateFound = false;\n\t            var isNodeEnvironment = typeof module !== 'undefined' && typeof module.exports !== 'undefined' && typeof window === 'undefined';\n\t            var loader;\n\t            var path;\n\n\t            //if we are running in a node.js environment, set the loader to 'fs' and ensure the\n\t            // path is relative to the CWD of the running script\n\t            //else, set the loader to 'ajax' and set the path to the value of name\n\t            if (isNodeEnvironment) {\n\t                loader = 'fs';\n\t                path = __dirname + '/' + name;\n\t            } else {\n\t                loader = 'ajax';\n\t                path = name;\n\t            }\n\n\t            //build the params object\n\t            var params = {\n\t                id: name,\n\t                path: path,\n\t                method: loader,\n\t                parser: 'source',\n\t                async: false,\n\t                fetchTemplateSource: true\n\t            };\n\n\t            //default ignore_missing to false\n\t            if (typeof ignore_missing === 'undefined') {\n\t                ignore_missing = false;\n\t            }\n\n\t            //try to load the remote template\n\t            //\n\t            //on exception, log it\n\t            try {\n\t                templateSource = Twig.Templates.loadRemote(name, params);\n\n\t                //if the template is undefined or null, set the template to an empty string and do NOT flip the\n\t                // boolean indicating we found the template\n\t                //\n\t                //else, all is good! flip the boolean indicating we found the template\n\t                if (typeof templateSource === 'undefined' || templateSource === null) {\n\t                    templateSource = '';\n\t                } else {\n\t                    templateFound = true;\n\t                }\n\t            } catch (e) {\n\t                Twig.log.debug('Twig.functions.source: ', 'Problem loading template  ', e);\n\t            }\n\n\t            //if the template was NOT found AND we are not ignoring missing templates, return the same message\n\t            // that is returned by the PHP implementation of the twig source() function\n\t            //\n\t            //else, return the template source\n\t            if (!templateFound && !ignore_missing) {\n\t                return TEMPLATE_NOT_FOUND_MESSAGE.replace('{name}', name);\n\t            } else {\n\t                return templateSource;\n\t            }\n\t        }\n\t    };\n\n\t    Twig._function = function(_function, value, params) {\n\t        if (!Twig.functions[_function]) {\n\t            throw \"Unable to find function \" + _function;\n\t        }\n\t        return Twig.functions[_function](value, params);\n\t    };\n\n\t    Twig._function.extend = function(_function, definition) {\n\t        Twig.functions[_function] = definition;\n\t    };\n\n\t    return Twig;\n\n\t};\n\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// ## twig.lib.js\n\t//\n\t// This file contains 3rd party libraries used within twig.\n\t//\n\t// Copies of the licenses for the code included here can be found in the\n\t// LICENSES.md file.\n\t//\n\n\tmodule.exports = function(Twig) {\n\n\t    // Namespace for libraries\n\t    Twig.lib = { };\n\n\t    Twig.lib.sprintf = __webpack_require__(8);\n\t    Twig.lib.vsprintf = __webpack_require__(9);\n\t    Twig.lib.round = __webpack_require__(10);\n\t    Twig.lib.max = __webpack_require__(11);\n\t    Twig.lib.min = __webpack_require__(12);\n\t    Twig.lib.strip_tags = __webpack_require__(13);\n\t    Twig.lib.strtotime = __webpack_require__(14);\n\t    Twig.lib.date = __webpack_require__(15);\n\t    Twig.lib.boolval = __webpack_require__(16);\n\n\t    Twig.lib.is = function(type, obj) {\n\t        var clas = Object.prototype.toString.call(obj).slice(8, -1);\n\t        return obj !== undefined && obj !== null && clas === type;\n\t    };\n\n\t    // shallow-copy an object\n\t    Twig.lib.copy = function(src) {\n\t        var target = {},\n\t            key;\n\t        for (key in src)\n\t            target[key] = src[key];\n\n\t        return target;\n\t    };\n\n\t    Twig.lib.extend = function (src, add) {\n\t        var keys = Object.keys(add),\n\t            i;\n\n\t        i = keys.length;\n\n\t        while (i--) {\n\t            src[keys[i]] = add[keys[i]];\n\t        }\n\n\t        return src;\n\t    };\n\n\t    Twig.lib.replaceAll = function(string, search, replace) {\n\t        return string.split(search).join(replace);\n\t    };\n\n\t    // chunk an array (arr) into arrays of (size) items, returns an array of arrays, or an empty array on invalid input\n\t    Twig.lib.chunkArray = function (arr, size) {\n\t        var returnVal = [],\n\t            x = 0,\n\t            len = arr.length;\n\n\t        if (size < 1 || !Twig.lib.is(\"Array\", arr)) {\n\t            return [];\n\t        }\n\n\t        while (x < len) {\n\t            returnVal.push(arr.slice(x, x += size));\n\t        }\n\n\t        return returnVal;\n\t    };\n\n\t    return Twig;\n\t};\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\n\tmodule.exports = function sprintf() {\n\t  //  discuss at: http://locutus.io/php/sprintf/\n\t  // original by: Ash Searle (http://hexmen.com/blog/)\n\t  // improved by: Michael White (http://getsprink.com)\n\t  // improved by: Jack\n\t  // improved by: Kevin van Zonneveld (http://kvz.io)\n\t  // improved by: Kevin van Zonneveld (http://kvz.io)\n\t  // improved by: Kevin van Zonneveld (http://kvz.io)\n\t  // improved by: Dj\n\t  // improved by: Allidylls\n\t  //    input by: Paulo Freitas\n\t  //    input by: Brett Zamir (http://brett-zamir.me)\n\t  //   example 1: sprintf(\"%01.2f\", 123.1)\n\t  //   returns 1: '123.10'\n\t  //   example 2: sprintf(\"[%10s]\", 'monkey')\n\t  //   returns 2: '[    monkey]'\n\t  //   example 3: sprintf(\"[%'#10s]\", 'monkey')\n\t  //   returns 3: '[####monkey]'\n\t  //   example 4: sprintf(\"%d\", 123456789012345)\n\t  //   returns 4: '123456789012345'\n\t  //   example 5: sprintf('%-03s', 'E')\n\t  //   returns 5: 'E00'\n\n\t  var regex = /%%|%(\\d+\\$)?([-+'#0 ]*)(\\*\\d+\\$|\\*|\\d+)?(?:\\.(\\*\\d+\\$|\\*|\\d+))?([scboxXuideEfFgG])/g;\n\t  var a = arguments;\n\t  var i = 0;\n\t  var format = a[i++];\n\n\t  var _pad = function _pad(str, len, chr, leftJustify) {\n\t    if (!chr) {\n\t      chr = ' ';\n\t    }\n\t    var padding = str.length >= len ? '' : new Array(1 + len - str.length >>> 0).join(chr);\n\t    return leftJustify ? str + padding : padding + str;\n\t  };\n\n\t  var justify = function justify(value, prefix, leftJustify, minWidth, zeroPad, customPadChar) {\n\t    var diff = minWidth - value.length;\n\t    if (diff > 0) {\n\t      if (leftJustify || !zeroPad) {\n\t        value = _pad(value, minWidth, customPadChar, leftJustify);\n\t      } else {\n\t        value = [value.slice(0, prefix.length), _pad('', diff, '0', true), value.slice(prefix.length)].join('');\n\t      }\n\t    }\n\t    return value;\n\t  };\n\n\t  var _formatBaseX = function _formatBaseX(value, base, prefix, leftJustify, minWidth, precision, zeroPad) {\n\t    // Note: casts negative numbers to positive ones\n\t    var number = value >>> 0;\n\t    prefix = prefix && number && {\n\t      '2': '0b',\n\t      '8': '0',\n\t      '16': '0x'\n\t    }[base] || '';\n\t    value = prefix + _pad(number.toString(base), precision || 0, '0', false);\n\t    return justify(value, prefix, leftJustify, minWidth, zeroPad);\n\t  };\n\n\t  // _formatString()\n\t  var _formatString = function _formatString(value, leftJustify, minWidth, precision, zeroPad, customPadChar) {\n\t    if (precision !== null && precision !== undefined) {\n\t      value = value.slice(0, precision);\n\t    }\n\t    return justify(value, '', leftJustify, minWidth, zeroPad, customPadChar);\n\t  };\n\n\t  // doFormat()\n\t  var doFormat = function doFormat(substring, valueIndex, flags, minWidth, precision, type) {\n\t    var number, prefix, method, textTransform, value;\n\n\t    if (substring === '%%') {\n\t      return '%';\n\t    }\n\n\t    // parse flags\n\t    var leftJustify = false;\n\t    var positivePrefix = '';\n\t    var zeroPad = false;\n\t    var prefixBaseX = false;\n\t    var customPadChar = ' ';\n\t    var flagsl = flags.length;\n\t    var j;\n\t    for (j = 0; j < flagsl; j++) {\n\t      switch (flags.charAt(j)) {\n\t        case ' ':\n\t          positivePrefix = ' ';\n\t          break;\n\t        case '+':\n\t          positivePrefix = '+';\n\t          break;\n\t        case '-':\n\t          leftJustify = true;\n\t          break;\n\t        case \"'\":\n\t          customPadChar = flags.charAt(j + 1);\n\t          break;\n\t        case '0':\n\t          zeroPad = true;\n\t          customPadChar = '0';\n\t          break;\n\t        case '#':\n\t          prefixBaseX = true;\n\t          break;\n\t      }\n\t    }\n\n\t    // parameters may be null, undefined, empty-string or real valued\n\t    // we want to ignore null, undefined and empty-string values\n\t    if (!minWidth) {\n\t      minWidth = 0;\n\t    } else if (minWidth === '*') {\n\t      minWidth = +a[i++];\n\t    } else if (minWidth.charAt(0) === '*') {\n\t      minWidth = +a[minWidth.slice(1, -1)];\n\t    } else {\n\t      minWidth = +minWidth;\n\t    }\n\n\t    // Note: undocumented perl feature:\n\t    if (minWidth < 0) {\n\t      minWidth = -minWidth;\n\t      leftJustify = true;\n\t    }\n\n\t    if (!isFinite(minWidth)) {\n\t      throw new Error('sprintf: (minimum-)width must be finite');\n\t    }\n\n\t    if (!precision) {\n\t      precision = 'fFeE'.indexOf(type) > -1 ? 6 : type === 'd' ? 0 : undefined;\n\t    } else if (precision === '*') {\n\t      precision = +a[i++];\n\t    } else if (precision.charAt(0) === '*') {\n\t      precision = +a[precision.slice(1, -1)];\n\t    } else {\n\t      precision = +precision;\n\t    }\n\n\t    // grab value using valueIndex if required?\n\t    value = valueIndex ? a[valueIndex.slice(0, -1)] : a[i++];\n\n\t    switch (type) {\n\t      case 's':\n\t        return _formatString(value + '', leftJustify, minWidth, precision, zeroPad, customPadChar);\n\t      case 'c':\n\t        return _formatString(String.fromCharCode(+value), leftJustify, minWidth, precision, zeroPad);\n\t      case 'b':\n\t        return _formatBaseX(value, 2, prefixBaseX, leftJustify, minWidth, precision, zeroPad);\n\t      case 'o':\n\t        return _formatBaseX(value, 8, prefixBaseX, leftJustify, minWidth, precision, zeroPad);\n\t      case 'x':\n\t        return _formatBaseX(value, 16, prefixBaseX, leftJustify, minWidth, precision, zeroPad);\n\t      case 'X':\n\t        return _formatBaseX(value, 16, prefixBaseX, leftJustify, minWidth, precision, zeroPad).toUpperCase();\n\t      case 'u':\n\t        return _formatBaseX(value, 10, prefixBaseX, leftJustify, minWidth, precision, zeroPad);\n\t      case 'i':\n\t      case 'd':\n\t        number = +value || 0;\n\t        // Plain Math.round doesn't just truncate\n\t        number = Math.round(number - number % 1);\n\t        prefix = number < 0 ? '-' : positivePrefix;\n\t        value = prefix + _pad(String(Math.abs(number)), precision, '0', false);\n\t        return justify(value, prefix, leftJustify, minWidth, zeroPad);\n\t      case 'e':\n\t      case 'E':\n\t      case 'f': // @todo: Should handle locales (as per setlocale)\n\t      case 'F':\n\t      case 'g':\n\t      case 'G':\n\t        number = +value;\n\t        prefix = number < 0 ? '-' : positivePrefix;\n\t        method = ['toExponential', 'toFixed', 'toPrecision']['efg'.indexOf(type.toLowerCase())];\n\t        textTransform = ['toString', 'toUpperCase']['eEfFgG'.indexOf(type) % 2];\n\t        value = prefix + Math.abs(number)[method](precision);\n\t        return justify(value, prefix, leftJustify, minWidth, zeroPad)[textTransform]();\n\t      default:\n\t        return substring;\n\t    }\n\t  };\n\n\t  return format.replace(regex, doFormat);\n\t};\n\t//# sourceMappingURL=sprintf.js.map\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tmodule.exports = function vsprintf(format, args) {\n\t  //  discuss at: http://locutus.io/php/vsprintf/\n\t  // original by: ejsanders\n\t  //   example 1: vsprintf('%04d-%02d-%02d', [1988, 8, 1])\n\t  //   returns 1: '1988-08-01'\n\n\t  var sprintf = __webpack_require__(8);\n\n\t  return sprintf.apply(this, [format].concat(args));\n\t};\n\t//# sourceMappingURL=vsprintf.js.map\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\n\tmodule.exports = function round(value, precision, mode) {\n\t  //  discuss at: http://locutus.io/php/round/\n\t  // original by: Philip Peterson\n\t  //  revised by: Onno Marsman (https://twitter.com/onnomarsman)\n\t  //  revised by: T.Wild\n\t  //  revised by: Rafał Kukawski (http://blog.kukawski.pl)\n\t  //    input by: Greenseed\n\t  //    input by: meo\n\t  //    input by: William\n\t  //    input by: Josep Sanz (http://www.ws3.es/)\n\t  // bugfixed by: Brett Zamir (http://brett-zamir.me)\n\t  //      note 1: Great work. Ideas for improvement:\n\t  //      note 1: - code more compliant with developer guidelines\n\t  //      note 1: - for implementing PHP constant arguments look at\n\t  //      note 1: the pathinfo() function, it offers the greatest\n\t  //      note 1: flexibility & compatibility possible\n\t  //   example 1: round(1241757, -3)\n\t  //   returns 1: 1242000\n\t  //   example 2: round(3.6)\n\t  //   returns 2: 4\n\t  //   example 3: round(2.835, 2)\n\t  //   returns 3: 2.84\n\t  //   example 4: round(1.1749999999999, 2)\n\t  //   returns 4: 1.17\n\t  //   example 5: round(58551.799999999996, 2)\n\t  //   returns 5: 58551.8\n\n\t  var m, f, isHalf, sgn; // helper variables\n\t  // making sure precision is integer\n\t  precision |= 0;\n\t  m = Math.pow(10, precision);\n\t  value *= m;\n\t  // sign of the number\n\t  sgn = value > 0 | -(value < 0);\n\t  isHalf = value % 1 === 0.5 * sgn;\n\t  f = Math.floor(value);\n\n\t  if (isHalf) {\n\t    switch (mode) {\n\t      case 'PHP_ROUND_HALF_DOWN':\n\t        // rounds .5 toward zero\n\t        value = f + (sgn < 0);\n\t        break;\n\t      case 'PHP_ROUND_HALF_EVEN':\n\t        // rouds .5 towards the next even integer\n\t        value = f + f % 2 * sgn;\n\t        break;\n\t      case 'PHP_ROUND_HALF_ODD':\n\t        // rounds .5 towards the next odd integer\n\t        value = f + !(f % 2);\n\t        break;\n\t      default:\n\t        // rounds .5 away from zero\n\t        value = f + (sgn > 0);\n\t    }\n\t  }\n\n\t  return (isHalf ? value : Math.round(value)) / m;\n\t};\n\t//# sourceMappingURL=round.js.map\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n\tmodule.exports = function max() {\n\t  //  discuss at: http://locutus.io/php/max/\n\t  // original by: Onno Marsman (https://twitter.com/onnomarsman)\n\t  //  revised by: Onno Marsman (https://twitter.com/onnomarsman)\n\t  // improved by: Jack\n\t  //      note 1: Long code cause we're aiming for maximum PHP compatibility\n\t  //   example 1: max(1, 3, 5, 6, 7)\n\t  //   returns 1: 7\n\t  //   example 2: max([2, 4, 5])\n\t  //   returns 2: 5\n\t  //   example 3: max(0, 'hello')\n\t  //   returns 3: 0\n\t  //   example 4: max('hello', 0)\n\t  //   returns 4: 'hello'\n\t  //   example 5: max(-1, 'hello')\n\t  //   returns 5: 'hello'\n\t  //   example 6: max([2, 4, 8], [2, 5, 7])\n\t  //   returns 6: [2, 5, 7]\n\n\t  var ar;\n\t  var retVal;\n\t  var i = 0;\n\t  var n = 0;\n\t  var argv = arguments;\n\t  var argc = argv.length;\n\t  var _obj2Array = function _obj2Array(obj) {\n\t    if (Object.prototype.toString.call(obj) === '[object Array]') {\n\t      return obj;\n\t    } else {\n\t      var ar = [];\n\t      for (var i in obj) {\n\t        if (obj.hasOwnProperty(i)) {\n\t          ar.push(obj[i]);\n\t        }\n\t      }\n\t      return ar;\n\t    }\n\t  };\n\t  var _compare = function _compare(current, next) {\n\t    var i = 0;\n\t    var n = 0;\n\t    var tmp = 0;\n\t    var nl = 0;\n\t    var cl = 0;\n\n\t    if (current === next) {\n\t      return 0;\n\t    } else if ((typeof current === 'undefined' ? 'undefined' : _typeof(current)) === 'object') {\n\t      if ((typeof next === 'undefined' ? 'undefined' : _typeof(next)) === 'object') {\n\t        current = _obj2Array(current);\n\t        next = _obj2Array(next);\n\t        cl = current.length;\n\t        nl = next.length;\n\t        if (nl > cl) {\n\t          return 1;\n\t        } else if (nl < cl) {\n\t          return -1;\n\t        }\n\t        for (i = 0, n = cl; i < n; ++i) {\n\t          tmp = _compare(current[i], next[i]);\n\t          if (tmp === 1) {\n\t            return 1;\n\t          } else if (tmp === -1) {\n\t            return -1;\n\t          }\n\t        }\n\t        return 0;\n\t      }\n\t      return -1;\n\t    } else if ((typeof next === 'undefined' ? 'undefined' : _typeof(next)) === 'object') {\n\t      return 1;\n\t    } else if (isNaN(next) && !isNaN(current)) {\n\t      if (current === 0) {\n\t        return 0;\n\t      }\n\t      return current < 0 ? 1 : -1;\n\t    } else if (isNaN(current) && !isNaN(next)) {\n\t      if (next === 0) {\n\t        return 0;\n\t      }\n\t      return next > 0 ? 1 : -1;\n\t    }\n\n\t    if (next === current) {\n\t      return 0;\n\t    }\n\n\t    return next > current ? 1 : -1;\n\t  };\n\n\t  if (argc === 0) {\n\t    throw new Error('At least one value should be passed to max()');\n\t  } else if (argc === 1) {\n\t    if (_typeof(argv[0]) === 'object') {\n\t      ar = _obj2Array(argv[0]);\n\t    } else {\n\t      throw new Error('Wrong parameter count for max()');\n\t    }\n\t    if (ar.length === 0) {\n\t      throw new Error('Array must contain at least one element for max()');\n\t    }\n\t  } else {\n\t    ar = argv;\n\t  }\n\n\t  retVal = ar[0];\n\t  for (i = 1, n = ar.length; i < n; ++i) {\n\t    if (_compare(retVal, ar[i]) === 1) {\n\t      retVal = ar[i];\n\t    }\n\t  }\n\n\t  return retVal;\n\t};\n\t//# sourceMappingURL=max.js.map\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n\tmodule.exports = function min() {\n\t  //  discuss at: http://locutus.io/php/min/\n\t  // original by: Onno Marsman (https://twitter.com/onnomarsman)\n\t  //  revised by: Onno Marsman (https://twitter.com/onnomarsman)\n\t  // improved by: Jack\n\t  //      note 1: Long code cause we're aiming for maximum PHP compatibility\n\t  //   example 1: min(1, 3, 5, 6, 7)\n\t  //   returns 1: 1\n\t  //   example 2: min([2, 4, 5])\n\t  //   returns 2: 2\n\t  //   example 3: min(0, 'hello')\n\t  //   returns 3: 0\n\t  //   example 4: min('hello', 0)\n\t  //   returns 4: 'hello'\n\t  //   example 5: min(-1, 'hello')\n\t  //   returns 5: -1\n\t  //   example 6: min([2, 4, 8], [2, 5, 7])\n\t  //   returns 6: [2, 4, 8]\n\n\t  var ar;\n\t  var retVal;\n\t  var i = 0;\n\t  var n = 0;\n\t  var argv = arguments;\n\t  var argc = argv.length;\n\t  var _obj2Array = function _obj2Array(obj) {\n\t    if (Object.prototype.toString.call(obj) === '[object Array]') {\n\t      return obj;\n\t    }\n\t    var ar = [];\n\t    for (var i in obj) {\n\t      if (obj.hasOwnProperty(i)) {\n\t        ar.push(obj[i]);\n\t      }\n\t    }\n\t    return ar;\n\t  };\n\n\t  var _compare = function _compare(current, next) {\n\t    var i = 0;\n\t    var n = 0;\n\t    var tmp = 0;\n\t    var nl = 0;\n\t    var cl = 0;\n\n\t    if (current === next) {\n\t      return 0;\n\t    } else if ((typeof current === 'undefined' ? 'undefined' : _typeof(current)) === 'object') {\n\t      if ((typeof next === 'undefined' ? 'undefined' : _typeof(next)) === 'object') {\n\t        current = _obj2Array(current);\n\t        next = _obj2Array(next);\n\t        cl = current.length;\n\t        nl = next.length;\n\t        if (nl > cl) {\n\t          return 1;\n\t        } else if (nl < cl) {\n\t          return -1;\n\t        }\n\t        for (i = 0, n = cl; i < n; ++i) {\n\t          tmp = _compare(current[i], next[i]);\n\t          if (tmp === 1) {\n\t            return 1;\n\t          } else if (tmp === -1) {\n\t            return -1;\n\t          }\n\t        }\n\t        return 0;\n\t      }\n\t      return -1;\n\t    } else if ((typeof next === 'undefined' ? 'undefined' : _typeof(next)) === 'object') {\n\t      return 1;\n\t    } else if (isNaN(next) && !isNaN(current)) {\n\t      if (current === 0) {\n\t        return 0;\n\t      }\n\t      return current < 0 ? 1 : -1;\n\t    } else if (isNaN(current) && !isNaN(next)) {\n\t      if (next === 0) {\n\t        return 0;\n\t      }\n\t      return next > 0 ? 1 : -1;\n\t    }\n\n\t    if (next === current) {\n\t      return 0;\n\t    }\n\n\t    return next > current ? 1 : -1;\n\t  };\n\n\t  if (argc === 0) {\n\t    throw new Error('At least one value should be passed to min()');\n\t  } else if (argc === 1) {\n\t    if (_typeof(argv[0]) === 'object') {\n\t      ar = _obj2Array(argv[0]);\n\t    } else {\n\t      throw new Error('Wrong parameter count for min()');\n\t    }\n\n\t    if (ar.length === 0) {\n\t      throw new Error('Array must contain at least one element for min()');\n\t    }\n\t  } else {\n\t    ar = argv;\n\t  }\n\n\t  retVal = ar[0];\n\n\t  for (i = 1, n = ar.length; i < n; ++i) {\n\t    if (_compare(retVal, ar[i]) === -1) {\n\t      retVal = ar[i];\n\t    }\n\t  }\n\n\t  return retVal;\n\t};\n\t//# sourceMappingURL=min.js.map\n\n/***/ },\n/* 13 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\n\tmodule.exports = function strip_tags(input, allowed) {\n\t  // eslint-disable-line camelcase\n\t  //  discuss at: http://locutus.io/php/strip_tags/\n\t  // original by: Kevin van Zonneveld (http://kvz.io)\n\t  // improved by: Luke Godfrey\n\t  // improved by: Kevin van Zonneveld (http://kvz.io)\n\t  //    input by: Pul\n\t  //    input by: Alex\n\t  //    input by: Marc Palau\n\t  //    input by: Brett Zamir (http://brett-zamir.me)\n\t  //    input by: Bobby Drake\n\t  //    input by: Evertjan Garretsen\n\t  // bugfixed by: Kevin van Zonneveld (http://kvz.io)\n\t  // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman)\n\t  // bugfixed by: Kevin van Zonneveld (http://kvz.io)\n\t  // bugfixed by: Kevin van Zonneveld (http://kvz.io)\n\t  // bugfixed by: Eric Nagel\n\t  // bugfixed by: Kevin van Zonneveld (http://kvz.io)\n\t  // bugfixed by: Tomasz Wesolowski\n\t  //  revised by: Rafał Kukawski (http://blog.kukawski.pl)\n\t  //   example 1: strip_tags('<p>Kevin</p> <br /><b>van</b> <i>Zonneveld</i>', '<i><b>')\n\t  //   returns 1: 'Kevin <b>van</b> <i>Zonneveld</i>'\n\t  //   example 2: strip_tags('<p>Kevin <img src=\"someimage.png\" onmouseover=\"someFunction()\">van <i>Zonneveld</i></p>', '<p>')\n\t  //   returns 2: '<p>Kevin van Zonneveld</p>'\n\t  //   example 3: strip_tags(\"<a href='http://kvz.io'>Kevin van Zonneveld</a>\", \"<a>\")\n\t  //   returns 3: \"<a href='http://kvz.io'>Kevin van Zonneveld</a>\"\n\t  //   example 4: strip_tags('1 < 5 5 > 1')\n\t  //   returns 4: '1 < 5 5 > 1'\n\t  //   example 5: strip_tags('1 <br/> 1')\n\t  //   returns 5: '1  1'\n\t  //   example 6: strip_tags('1 <br/> 1', '<br>')\n\t  //   returns 6: '1 <br/> 1'\n\t  //   example 7: strip_tags('1 <br/> 1', '<br><br/>')\n\t  //   returns 7: '1 <br/> 1'\n\n\t  // making sure the allowed arg is a string containing only tags in lowercase (<a><b><c>)\n\t  allowed = (((allowed || '') + '').toLowerCase().match(/<[a-z][a-z0-9]*>/g) || []).join('');\n\n\t  var tags = /<\\/?([a-z][a-z0-9]*)\\b[^>]*>/gi;\n\t  var commentsAndPhpTags = /<!--[\\s\\S]*?-->|<\\?(?:php)?[\\s\\S]*?\\?>/gi;\n\n\t  return input.replace(commentsAndPhpTags, '').replace(tags, function ($0, $1) {\n\t    return allowed.indexOf('<' + $1.toLowerCase() + '>') > -1 ? $0 : '';\n\t  });\n\t};\n\t//# sourceMappingURL=strip_tags.js.map\n\n/***/ },\n/* 14 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\n\tmodule.exports = function strtotime(text, now) {\n\t  //  discuss at: http://locutus.io/php/strtotime/\n\t  // original by: Caio Ariede (http://caioariede.com)\n\t  // improved by: Kevin van Zonneveld (http://kvz.io)\n\t  // improved by: Caio Ariede (http://caioariede.com)\n\t  // improved by: A. Matías Quezada (http://amatiasq.com)\n\t  // improved by: preuter\n\t  // improved by: Brett Zamir (http://brett-zamir.me)\n\t  // improved by: Mirko Faber\n\t  //    input by: David\n\t  // bugfixed by: Wagner B. Soares\n\t  // bugfixed by: Artur Tchernychev\n\t  // bugfixed by: Stephan Bösch-Plepelits (http://github.com/plepe)\n\t  //      note 1: Examples all have a fixed timestamp to prevent\n\t  //      note 1: tests to fail because of variable time(zones)\n\t  //   example 1: strtotime('+1 day', 1129633200)\n\t  //   returns 1: 1129719600\n\t  //   example 2: strtotime('+1 week 2 days 4 hours 2 seconds', 1129633200)\n\t  //   returns 2: 1130425202\n\t  //   example 3: strtotime('last month', 1129633200)\n\t  //   returns 3: 1127041200\n\t  //   example 4: strtotime('2009-05-04 08:30:00 GMT')\n\t  //   returns 4: 1241425800\n\t  //   example 5: strtotime('2009-05-04 08:30:00+00')\n\t  //   returns 5: 1241425800\n\t  //   example 6: strtotime('2009-05-04 08:30:00+02:00')\n\t  //   returns 6: 1241418600\n\t  //   example 7: strtotime('2009-05-04T08:30:00Z')\n\t  //   returns 7: 1241425800\n\n\t  var parsed;\n\t  var match;\n\t  var today;\n\t  var year;\n\t  var date;\n\t  var days;\n\t  var ranges;\n\t  var len;\n\t  var times;\n\t  var regex;\n\t  var i;\n\t  var fail = false;\n\n\t  if (!text) {\n\t    return fail;\n\t  }\n\n\t  // Unecessary spaces\n\t  text = text.replace(/^\\s+|\\s+$/g, '').replace(/\\s{2,}/g, ' ').replace(/[\\t\\r\\n]/g, '').toLowerCase();\n\n\t  // in contrast to php, js Date.parse function interprets:\n\t  // dates given as yyyy-mm-dd as in timezone: UTC,\n\t  // dates with \".\" or \"-\" as MDY instead of DMY\n\t  // dates with two-digit years differently\n\t  // etc...etc...\n\t  // ...therefore we manually parse lots of common date formats\n\t  var pattern = new RegExp(['^(\\\\d{1,4})', '([\\\\-\\\\.\\\\/:])', '(\\\\d{1,2})', '([\\\\-\\\\.\\\\/:])', '(\\\\d{1,4})', '(?:\\\\s(\\\\d{1,2}):(\\\\d{2})?:?(\\\\d{2})?)?', '(?:\\\\s([A-Z]+)?)?$'].join(''));\n\t  match = text.match(pattern);\n\n\t  if (match && match[2] === match[4]) {\n\t    if (match[1] > 1901) {\n\t      switch (match[2]) {\n\t        case '-':\n\t          // YYYY-M-D\n\t          if (match[3] > 12 || match[5] > 31) {\n\t            return fail;\n\t          }\n\n\t          return new Date(match[1], parseInt(match[3], 10) - 1, match[5], match[6] || 0, match[7] || 0, match[8] || 0, match[9] || 0) / 1000;\n\t        case '.':\n\t          // YYYY.M.D is not parsed by strtotime()\n\t          return fail;\n\t        case '/':\n\t          // YYYY/M/D\n\t          if (match[3] > 12 || match[5] > 31) {\n\t            return fail;\n\t          }\n\n\t          return new Date(match[1], parseInt(match[3], 10) - 1, match[5], match[6] || 0, match[7] || 0, match[8] || 0, match[9] || 0) / 1000;\n\t      }\n\t    } else if (match[5] > 1901) {\n\t      switch (match[2]) {\n\t        case '-':\n\t          // D-M-YYYY\n\t          if (match[3] > 12 || match[1] > 31) {\n\t            return fail;\n\t          }\n\n\t          return new Date(match[5], parseInt(match[3], 10) - 1, match[1], match[6] || 0, match[7] || 0, match[8] || 0, match[9] || 0) / 1000;\n\t        case '.':\n\t          // D.M.YYYY\n\t          if (match[3] > 12 || match[1] > 31) {\n\t            return fail;\n\t          }\n\n\t          return new Date(match[5], parseInt(match[3], 10) - 1, match[1], match[6] || 0, match[7] || 0, match[8] || 0, match[9] || 0) / 1000;\n\t        case '/':\n\t          // M/D/YYYY\n\t          if (match[1] > 12 || match[3] > 31) {\n\t            return fail;\n\t          }\n\n\t          return new Date(match[5], parseInt(match[1], 10) - 1, match[3], match[6] || 0, match[7] || 0, match[8] || 0, match[9] || 0) / 1000;\n\t      }\n\t    } else {\n\t      switch (match[2]) {\n\t        case '-':\n\t          // YY-M-D\n\t          if (match[3] > 12 || match[5] > 31 || match[1] < 70 && match[1] > 38) {\n\t            return fail;\n\t          }\n\n\t          year = match[1] >= 0 && match[1] <= 38 ? +match[1] + 2000 : match[1];\n\t          return new Date(year, parseInt(match[3], 10) - 1, match[5], match[6] || 0, match[7] || 0, match[8] || 0, match[9] || 0) / 1000;\n\t        case '.':\n\t          // D.M.YY or H.MM.SS\n\t          if (match[5] >= 70) {\n\t            // D.M.YY\n\t            if (match[3] > 12 || match[1] > 31) {\n\t              return fail;\n\t            }\n\n\t            return new Date(match[5], parseInt(match[3], 10) - 1, match[1], match[6] || 0, match[7] || 0, match[8] || 0, match[9] || 0) / 1000;\n\t          }\n\t          if (match[5] < 60 && !match[6]) {\n\t            // H.MM.SS\n\t            if (match[1] > 23 || match[3] > 59) {\n\t              return fail;\n\t            }\n\n\t            today = new Date();\n\t            return new Date(today.getFullYear(), today.getMonth(), today.getDate(), match[1] || 0, match[3] || 0, match[5] || 0, match[9] || 0) / 1000;\n\t          }\n\n\t          // invalid format, cannot be parsed\n\t          return fail;\n\t        case '/':\n\t          // M/D/YY\n\t          if (match[1] > 12 || match[3] > 31 || match[5] < 70 && match[5] > 38) {\n\t            return fail;\n\t          }\n\n\t          year = match[5] >= 0 && match[5] <= 38 ? +match[5] + 2000 : match[5];\n\t          return new Date(year, parseInt(match[1], 10) - 1, match[3], match[6] || 0, match[7] || 0, match[8] || 0, match[9] || 0) / 1000;\n\t        case ':':\n\t          // HH:MM:SS\n\t          if (match[1] > 23 || match[3] > 59 || match[5] > 59) {\n\t            return fail;\n\t          }\n\n\t          today = new Date();\n\t          return new Date(today.getFullYear(), today.getMonth(), today.getDate(), match[1] || 0, match[3] || 0, match[5] || 0) / 1000;\n\t      }\n\t    }\n\t  }\n\n\t  // other formats and \"now\" should be parsed by Date.parse()\n\t  if (text === 'now') {\n\t    return now === null || isNaN(now) ? new Date().getTime() / 1000 | 0 : now | 0;\n\t  }\n\t  if (!isNaN(parsed = Date.parse(text))) {\n\t    return parsed / 1000 | 0;\n\t  }\n\t  // Browsers !== Chrome have problems parsing ISO 8601 date strings, as they do\n\t  // not accept lower case characters, space, or shortened time zones.\n\t  // Therefore, fix these problems and try again.\n\t  // Examples:\n\t  //   2015-04-15 20:33:59+02\n\t  //   2015-04-15 20:33:59z\n\t  //   2015-04-15t20:33:59+02:00\n\t  pattern = new RegExp(['^([0-9]{4}-[0-9]{2}-[0-9]{2})', '[ t]', '([0-9]{2}:[0-9]{2}:[0-9]{2}(\\\\.[0-9]+)?)', '([\\\\+-][0-9]{2}(:[0-9]{2})?|z)'].join(''));\n\t  match = text.match(pattern);\n\t  if (match) {\n\t    // @todo: time zone information\n\t    if (match[4] === 'z') {\n\t      match[4] = 'Z';\n\t    } else if (match[4].match(/^([+-][0-9]{2})$/)) {\n\t      match[4] = match[4] + ':00';\n\t    }\n\n\t    if (!isNaN(parsed = Date.parse(match[1] + 'T' + match[2] + match[4]))) {\n\t      return parsed / 1000 | 0;\n\t    }\n\t  }\n\n\t  date = now ? new Date(now * 1000) : new Date();\n\t  days = {\n\t    'sun': 0,\n\t    'mon': 1,\n\t    'tue': 2,\n\t    'wed': 3,\n\t    'thu': 4,\n\t    'fri': 5,\n\t    'sat': 6\n\t  };\n\t  ranges = {\n\t    'yea': 'FullYear',\n\t    'mon': 'Month',\n\t    'day': 'Date',\n\t    'hou': 'Hours',\n\t    'min': 'Minutes',\n\t    'sec': 'Seconds'\n\t  };\n\n\t  function lastNext(type, range, modifier) {\n\t    var diff;\n\t    var day = days[range];\n\n\t    if (typeof day !== 'undefined') {\n\t      diff = day - date.getDay();\n\n\t      if (diff === 0) {\n\t        diff = 7 * modifier;\n\t      } else if (diff > 0 && type === 'last') {\n\t        diff -= 7;\n\t      } else if (diff < 0 && type === 'next') {\n\t        diff += 7;\n\t      }\n\n\t      date.setDate(date.getDate() + diff);\n\t    }\n\t  }\n\n\t  function process(val) {\n\t    // @todo: Reconcile this with regex using \\s, taking into account\n\t    // browser issues with split and regexes\n\t    var splt = val.split(' ');\n\t    var type = splt[0];\n\t    var range = splt[1].substring(0, 3);\n\t    var typeIsNumber = /\\d+/.test(type);\n\t    var ago = splt[2] === 'ago';\n\t    var num = (type === 'last' ? -1 : 1) * (ago ? -1 : 1);\n\n\t    if (typeIsNumber) {\n\t      num *= parseInt(type, 10);\n\t    }\n\n\t    if (ranges.hasOwnProperty(range) && !splt[1].match(/^mon(day|\\.)?$/i)) {\n\t      return date['set' + ranges[range]](date['get' + ranges[range]]() + num);\n\t    }\n\n\t    if (range === 'wee') {\n\t      return date.setDate(date.getDate() + num * 7);\n\t    }\n\n\t    if (type === 'next' || type === 'last') {\n\t      lastNext(type, range, num);\n\t    } else if (!typeIsNumber) {\n\t      return false;\n\t    }\n\n\t    return true;\n\t  }\n\n\t  times = '(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec' + '|sunday|sun\\\\.?|monday|mon\\\\.?|tuesday|tue\\\\.?|wednesday|wed\\\\.?' + '|thursday|thu\\\\.?|friday|fri\\\\.?|saturday|sat\\\\.?)';\n\t  regex = '([+-]?\\\\d+\\\\s' + times + '|' + '(last|next)\\\\s' + times + ')(\\\\sago)?';\n\n\t  match = text.match(new RegExp(regex, 'gi'));\n\t  if (!match) {\n\t    return fail;\n\t  }\n\n\t  for (i = 0, len = match.length; i < len; i++) {\n\t    if (!process(match[i])) {\n\t      return fail;\n\t    }\n\t  }\n\n\t  return date.getTime() / 1000;\n\t};\n\t//# sourceMappingURL=strtotime.js.map\n\n/***/ },\n/* 15 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\n\tmodule.exports = function date(format, timestamp) {\n\t  //  discuss at: http://locutus.io/php/date/\n\t  // original by: Carlos R. L. Rodrigues (http://www.jsfromhell.com)\n\t  // original by: gettimeofday\n\t  //    parts by: Peter-Paul Koch (http://www.quirksmode.org/js/beat.html)\n\t  // improved by: Kevin van Zonneveld (http://kvz.io)\n\t  // improved by: MeEtc (http://yass.meetcweb.com)\n\t  // improved by: Brad Touesnard\n\t  // improved by: Tim Wiel\n\t  // improved by: Bryan Elliott\n\t  // improved by: David Randall\n\t  // improved by: Theriault (https://github.com/Theriault)\n\t  // improved by: Theriault (https://github.com/Theriault)\n\t  // improved by: Brett Zamir (http://brett-zamir.me)\n\t  // improved by: Theriault (https://github.com/Theriault)\n\t  // improved by: Thomas Beaucourt (http://www.webapp.fr)\n\t  // improved by: JT\n\t  // improved by: Theriault (https://github.com/Theriault)\n\t  // improved by: Rafał Kukawski (http://blog.kukawski.pl)\n\t  // improved by: Theriault (https://github.com/Theriault)\n\t  //    input by: Brett Zamir (http://brett-zamir.me)\n\t  //    input by: majak\n\t  //    input by: Alex\n\t  //    input by: Martin\n\t  //    input by: Alex Wilson\n\t  //    input by: Haravikk\n\t  // bugfixed by: Kevin van Zonneveld (http://kvz.io)\n\t  // bugfixed by: majak\n\t  // bugfixed by: Kevin van Zonneveld (http://kvz.io)\n\t  // bugfixed by: Brett Zamir (http://brett-zamir.me)\n\t  // bugfixed by: omid (http://locutus.io/php/380:380#comment_137122)\n\t  // bugfixed by: Chris (http://www.devotis.nl/)\n\t  //      note 1: Uses global: locutus to store the default timezone\n\t  //      note 1: Although the function potentially allows timezone info\n\t  //      note 1: (see notes), it currently does not set\n\t  //      note 1: per a timezone specified by date_default_timezone_set(). Implementers might use\n\t  //      note 1: $locutus.currentTimezoneOffset and\n\t  //      note 1: $locutus.currentTimezoneDST set by that function\n\t  //      note 1: in order to adjust the dates in this function\n\t  //      note 1: (or our other date functions!) accordingly\n\t  //   example 1: date('H:m:s \\\\m \\\\i\\\\s \\\\m\\\\o\\\\n\\\\t\\\\h', 1062402400)\n\t  //   returns 1: '07:09:40 m is month'\n\t  //   example 2: date('F j, Y, g:i a', 1062462400)\n\t  //   returns 2: 'September 2, 2003, 12:26 am'\n\t  //   example 3: date('Y W o', 1062462400)\n\t  //   returns 3: '2003 36 2003'\n\t  //   example 4: var $x = date('Y m d', (new Date()).getTime() / 1000)\n\t  //   example 4: $x = $x + ''\n\t  //   example 4: var $result = $x.length // 2009 01 09\n\t  //   returns 4: 10\n\t  //   example 5: date('W', 1104534000)\n\t  //   returns 5: '52'\n\t  //   example 6: date('B t', 1104534000)\n\t  //   returns 6: '999 31'\n\t  //   example 7: date('W U', 1293750000.82); // 2010-12-31\n\t  //   returns 7: '52 1293750000'\n\t  //   example 8: date('W', 1293836400); // 2011-01-01\n\t  //   returns 8: '52'\n\t  //   example 9: date('W Y-m-d', 1293974054); // 2011-01-02\n\t  //   returns 9: '52 2011-01-02'\n\t  //        test: skip-1 skip-2 skip-5\n\n\t  var jsdate, f;\n\t  // Keep this here (works, but for code commented-out below for file size reasons)\n\t  // var tal= [];\n\t  var txtWords = ['Sun', 'Mon', 'Tues', 'Wednes', 'Thurs', 'Fri', 'Satur', 'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n\t  // trailing backslash -> (dropped)\n\t  // a backslash followed by any character (including backslash) -> the character\n\t  // empty string -> empty string\n\t  var formatChr = /\\\\?(.?)/gi;\n\t  var formatChrCb = function formatChrCb(t, s) {\n\t    return f[t] ? f[t]() : s;\n\t  };\n\t  var _pad = function _pad(n, c) {\n\t    n = String(n);\n\t    while (n.length < c) {\n\t      n = '0' + n;\n\t    }\n\t    return n;\n\t  };\n\t  f = {\n\t    // Day\n\t    d: function d() {\n\t      // Day of month w/leading 0; 01..31\n\t      return _pad(f.j(), 2);\n\t    },\n\t    D: function D() {\n\t      // Shorthand day name; Mon...Sun\n\t      return f.l().slice(0, 3);\n\t    },\n\t    j: function j() {\n\t      // Day of month; 1..31\n\t      return jsdate.getDate();\n\t    },\n\t    l: function l() {\n\t      // Full day name; Monday...Sunday\n\t      return txtWords[f.w()] + 'day';\n\t    },\n\t    N: function N() {\n\t      // ISO-8601 day of week; 1[Mon]..7[Sun]\n\t      return f.w() || 7;\n\t    },\n\t    S: function S() {\n\t      // Ordinal suffix for day of month; st, nd, rd, th\n\t      var j = f.j();\n\t      var i = j % 10;\n\t      if (i <= 3 && parseInt(j % 100 / 10, 10) === 1) {\n\t        i = 0;\n\t      }\n\t      return ['st', 'nd', 'rd'][i - 1] || 'th';\n\t    },\n\t    w: function w() {\n\t      // Day of week; 0[Sun]..6[Sat]\n\t      return jsdate.getDay();\n\t    },\n\t    z: function z() {\n\t      // Day of year; 0..365\n\t      var a = new Date(f.Y(), f.n() - 1, f.j());\n\t      var b = new Date(f.Y(), 0, 1);\n\t      return Math.round((a - b) / 864e5);\n\t    },\n\n\t    // Week\n\t    W: function W() {\n\t      // ISO-8601 week number\n\t      var a = new Date(f.Y(), f.n() - 1, f.j() - f.N() + 3);\n\t      var b = new Date(a.getFullYear(), 0, 4);\n\t      return _pad(1 + Math.round((a - b) / 864e5 / 7), 2);\n\t    },\n\n\t    // Month\n\t    F: function F() {\n\t      // Full month name; January...December\n\t      return txtWords[6 + f.n()];\n\t    },\n\t    m: function m() {\n\t      // Month w/leading 0; 01...12\n\t      return _pad(f.n(), 2);\n\t    },\n\t    M: function M() {\n\t      // Shorthand month name; Jan...Dec\n\t      return f.F().slice(0, 3);\n\t    },\n\t    n: function n() {\n\t      // Month; 1...12\n\t      return jsdate.getMonth() + 1;\n\t    },\n\t    t: function t() {\n\t      // Days in month; 28...31\n\t      return new Date(f.Y(), f.n(), 0).getDate();\n\t    },\n\n\t    // Year\n\t    L: function L() {\n\t      // Is leap year?; 0 or 1\n\t      var j = f.Y();\n\t      return j % 4 === 0 & j % 100 !== 0 | j % 400 === 0;\n\t    },\n\t    o: function o() {\n\t      // ISO-8601 year\n\t      var n = f.n();\n\t      var W = f.W();\n\t      var Y = f.Y();\n\t      return Y + (n === 12 && W < 9 ? 1 : n === 1 && W > 9 ? -1 : 0);\n\t    },\n\t    Y: function Y() {\n\t      // Full year; e.g. 1980...2010\n\t      return jsdate.getFullYear();\n\t    },\n\t    y: function y() {\n\t      // Last two digits of year; 00...99\n\t      return f.Y().toString().slice(-2);\n\t    },\n\n\t    // Time\n\t    a: function a() {\n\t      // am or pm\n\t      return jsdate.getHours() > 11 ? 'pm' : 'am';\n\t    },\n\t    A: function A() {\n\t      // AM or PM\n\t      return f.a().toUpperCase();\n\t    },\n\t    B: function B() {\n\t      // Swatch Internet time; 000..999\n\t      var H = jsdate.getUTCHours() * 36e2;\n\t      // Hours\n\t      var i = jsdate.getUTCMinutes() * 60;\n\t      // Minutes\n\t      // Seconds\n\t      var s = jsdate.getUTCSeconds();\n\t      return _pad(Math.floor((H + i + s + 36e2) / 86.4) % 1e3, 3);\n\t    },\n\t    g: function g() {\n\t      // 12-Hours; 1..12\n\t      return f.G() % 12 || 12;\n\t    },\n\t    G: function G() {\n\t      // 24-Hours; 0..23\n\t      return jsdate.getHours();\n\t    },\n\t    h: function h() {\n\t      // 12-Hours w/leading 0; 01..12\n\t      return _pad(f.g(), 2);\n\t    },\n\t    H: function H() {\n\t      // 24-Hours w/leading 0; 00..23\n\t      return _pad(f.G(), 2);\n\t    },\n\t    i: function i() {\n\t      // Minutes w/leading 0; 00..59\n\t      return _pad(jsdate.getMinutes(), 2);\n\t    },\n\t    s: function s() {\n\t      // Seconds w/leading 0; 00..59\n\t      return _pad(jsdate.getSeconds(), 2);\n\t    },\n\t    u: function u() {\n\t      // Microseconds; 000000-999000\n\t      return _pad(jsdate.getMilliseconds() * 1000, 6);\n\t    },\n\n\t    // Timezone\n\t    e: function e() {\n\t      // Timezone identifier; e.g. Atlantic/Azores, ...\n\t      // The following works, but requires inclusion of the very large\n\t      // timezone_abbreviations_list() function.\n\t      /*              return that.date_default_timezone_get();\n\t       */\n\t      var msg = 'Not supported (see source code of date() for timezone on how to add support)';\n\t      throw new Error(msg);\n\t    },\n\t    I: function I() {\n\t      // DST observed?; 0 or 1\n\t      // Compares Jan 1 minus Jan 1 UTC to Jul 1 minus Jul 1 UTC.\n\t      // If they are not equal, then DST is observed.\n\t      var a = new Date(f.Y(), 0);\n\t      // Jan 1\n\t      var c = Date.UTC(f.Y(), 0);\n\t      // Jan 1 UTC\n\t      var b = new Date(f.Y(), 6);\n\t      // Jul 1\n\t      // Jul 1 UTC\n\t      var d = Date.UTC(f.Y(), 6);\n\t      return a - c !== b - d ? 1 : 0;\n\t    },\n\t    O: function O() {\n\t      // Difference to GMT in hour format; e.g. +0200\n\t      var tzo = jsdate.getTimezoneOffset();\n\t      var a = Math.abs(tzo);\n\t      return (tzo > 0 ? '-' : '+') + _pad(Math.floor(a / 60) * 100 + a % 60, 4);\n\t    },\n\t    P: function P() {\n\t      // Difference to GMT w/colon; e.g. +02:00\n\t      var O = f.O();\n\t      return O.substr(0, 3) + ':' + O.substr(3, 2);\n\t    },\n\t    T: function T() {\n\t      // The following works, but requires inclusion of the very\n\t      // large timezone_abbreviations_list() function.\n\t      /*              var abbr, i, os, _default;\n\t      if (!tal.length) {\n\t        tal = that.timezone_abbreviations_list();\n\t      }\n\t      if ($locutus && $locutus.default_timezone) {\n\t        _default = $locutus.default_timezone;\n\t        for (abbr in tal) {\n\t          for (i = 0; i < tal[abbr].length; i++) {\n\t            if (tal[abbr][i].timezone_id === _default) {\n\t              return abbr.toUpperCase();\n\t            }\n\t          }\n\t        }\n\t      }\n\t      for (abbr in tal) {\n\t        for (i = 0; i < tal[abbr].length; i++) {\n\t          os = -jsdate.getTimezoneOffset() * 60;\n\t          if (tal[abbr][i].offset === os) {\n\t            return abbr.toUpperCase();\n\t          }\n\t        }\n\t      }\n\t      */\n\t      return 'UTC';\n\t    },\n\t    Z: function Z() {\n\t      // Timezone offset in seconds (-43200...50400)\n\t      return -jsdate.getTimezoneOffset() * 60;\n\t    },\n\n\t    // Full Date/Time\n\t    c: function c() {\n\t      // ISO-8601 date.\n\t      return 'Y-m-d\\\\TH:i:sP'.replace(formatChr, formatChrCb);\n\t    },\n\t    r: function r() {\n\t      // RFC 2822\n\t      return 'D, d M Y H:i:s O'.replace(formatChr, formatChrCb);\n\t    },\n\t    U: function U() {\n\t      // Seconds since UNIX epoch\n\t      return jsdate / 1000 | 0;\n\t    }\n\t  };\n\n\t  var _date = function _date(format, timestamp) {\n\t    jsdate = timestamp === undefined ? new Date() // Not provided\n\t    : timestamp instanceof Date ? new Date(timestamp) // JS Date()\n\t    : new Date(timestamp * 1000) // UNIX timestamp (auto-convert to int)\n\t    ;\n\t    return format.replace(formatChr, formatChrCb);\n\t  };\n\n\t  return _date(format, timestamp);\n\t};\n\t//# sourceMappingURL=date.js.map\n\n/***/ },\n/* 16 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\n\tmodule.exports = function boolval(mixedVar) {\n\t  // original by: Will Rowe\n\t  //   example 1: boolval(true)\n\t  //   returns 1: true\n\t  //   example 2: boolval(false)\n\t  //   returns 2: false\n\t  //   example 3: boolval(0)\n\t  //   returns 3: false\n\t  //   example 4: boolval(0.0)\n\t  //   returns 4: false\n\t  //   example 5: boolval('')\n\t  //   returns 5: false\n\t  //   example 6: boolval('0')\n\t  //   returns 6: false\n\t  //   example 7: boolval([])\n\t  //   returns 7: false\n\t  //   example 8: boolval('')\n\t  //   returns 8: false\n\t  //   example 9: boolval(null)\n\t  //   returns 9: false\n\t  //   example 10: boolval(undefined)\n\t  //   returns 10: false\n\t  //   example 11: boolval('true')\n\t  //   returns 11: true\n\n\t  if (mixedVar === false) {\n\t    return false;\n\t  }\n\n\t  if (mixedVar === 0 || mixedVar === 0.0) {\n\t    return false;\n\t  }\n\n\t  if (mixedVar === '' || mixedVar === '0') {\n\t    return false;\n\t  }\n\n\t  if (Array.isArray(mixedVar) && mixedVar.length === 0) {\n\t    return false;\n\t  }\n\n\t  if (mixedVar === null || mixedVar === undefined) {\n\t    return false;\n\t  }\n\n\t  return true;\n\t};\n\t//# sourceMappingURL=boolval.js.map\n\n/***/ },\n/* 17 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(Twig) {\n\t    'use strict';\n\n\t    Twig.Templates.registerLoader('ajax', function(location, params, callback, error_callback) {\n\t        var template,\n\t            xmlhttp,\n\t            precompiled = params.precompiled,\n\t            parser = this.parsers[params.parser] || this.parser.twig;\n\n\t        if (typeof XMLHttpRequest === \"undefined\") {\n\t            throw new Twig.Error('Unsupported platform: Unable to do ajax requests ' +\n\t                                 'because there is no \"XMLHTTPRequest\" implementation');\n\t        }\n\n\t        xmlhttp = new XMLHttpRequest();\n\t        xmlhttp.onreadystatechange = function() {\n\t            var data = null;\n\n\t            if(xmlhttp.readyState === 4) {\n\t                if (xmlhttp.status === 200 || (window.cordova && xmlhttp.status == 0)) {\n\t                    Twig.log.debug(\"Got template \", xmlhttp.responseText);\n\n\t                    if (precompiled === true) {\n\t                        data = JSON.parse(xmlhttp.responseText);\n\t                    } else {\n\t                        data = xmlhttp.responseText;\n\t                    }\n\n\t                    params.url = location;\n\t                    params.data = data;\n\n\t                    template = parser.call(this, params);\n\n\t                    if (typeof callback === 'function') {\n\t                        callback(template);\n\t                    }\n\t                } else {\n\t                    if (typeof error_callback === 'function') {\n\t                        error_callback(xmlhttp);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        xmlhttp.open(\"GET\", location, !!params.async);\n\t        xmlhttp.send();\n\n\t        if (params.async) {\n\t            // TODO: return deferred promise\n\t            return true;\n\t        } else {\n\t            return template;\n\t        }\n\t    });\n\n\t};\n\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = function(Twig) {\n\t    'use strict';\n\n\t    var fs, path;\n\n\t    try {\n\t    \t// require lib dependencies at runtime\n\t    \tfs = __webpack_require__(19);\n\t    \tpath = __webpack_require__(20);\n\t    } catch (e) {\n\t    \t// NOTE: this is in a try/catch to avoid errors cross platform\n\t    }\n\n\t    Twig.Templates.registerLoader('fs', function(location, params, callback, error_callback) {\n\t        var template,\n\t            data = null,\n\t            precompiled = params.precompiled,\n\t            parser = this.parsers[params.parser] || this.parser.twig;\n\n\t        if (!fs || !path) {\n\t            throw new Twig.Error('Unsupported platform: Unable to load from file ' +\n\t                                 'because there is no \"fs\" or \"path\" implementation');\n\t        }\n\n\t        var loadTemplateFn = function(err, data) {\n\t            if (err) {\n\t                if (typeof error_callback === 'function') {\n\t                    error_callback(err);\n\t                }\n\t                return;\n\t            }\n\n\t            if (precompiled === true) {\n\t                data = JSON.parse(data);\n\t            }\n\n\t            params.data = data;\n\t            params.path = params.path || location;\n\n\t            // template is in data\n\t            template = parser.call(this, params);\n\n\t            if (typeof callback === 'function') {\n\t                callback(template);\n\t            }\n\t        };\n\t        params.path = params.path || location;\n\n\t        if (params.async) {\n\t            fs.stat(params.path, function (err, stats) {\n\t                if (err || !stats.isFile()) {\n\t                    if (typeof error_callback === 'function') {\n\t                        error_callback(new Twig.Error('Unable to find template file ' + params.path));\n\t                    }\n\t                    return;\n\t                }\n\t                fs.readFile(params.path, 'utf8', loadTemplateFn);\n\t            });\n\t            // TODO: return deferred promise\n\t            return true;\n\t        } else {\n\t            try {\n\t                if (!fs.statSync(params.path).isFile()) {\n\t                    throw new Twig.Error('Unable to find template file ' + params.path);\n\t                }\n\t            } catch (err) {\n\t                throw new Twig.Error('Unable to find template file ' + params.path);\n\t            }\n\t            data = fs.readFileSync(params.path, 'utf8');\n\t            loadTemplateFn(undefined, data);\n\t            return template\n\t        }\n\t    });\n\n\t};\n\n\n/***/ },\n/* 19 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"fs\");\n\n/***/ },\n/* 20 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"path\");\n\n/***/ },\n/* 21 */\n/***/ function(module, exports) {\n\n\t// ## twig.logic.js\n\t//\n\t// This file handles tokenizing, compiling and parsing logic tokens. {% ... %}\n\tmodule.exports = function (Twig) {\n\t    \"use strict\";\n\n\t    /**\n\t     * Namespace for logic handling.\n\t     */\n\t    Twig.logic = {};\n\n\t    /**\n\t     * Logic token types.\n\t     */\n\t    Twig.logic.type = {\n\t        if_:       'Twig.logic.type.if',\n\t        endif:     'Twig.logic.type.endif',\n\t        for_:      'Twig.logic.type.for',\n\t        endfor:    'Twig.logic.type.endfor',\n\t        else_:     'Twig.logic.type.else',\n\t        elseif:    'Twig.logic.type.elseif',\n\t        set:       'Twig.logic.type.set',\n\t        setcapture:'Twig.logic.type.setcapture',\n\t        endset:    'Twig.logic.type.endset',\n\t        filter:    'Twig.logic.type.filter',\n\t        endfilter: 'Twig.logic.type.endfilter',\n\t        shortblock: 'Twig.logic.type.shortblock',\n\t        block:     'Twig.logic.type.block',\n\t        endblock:  'Twig.logic.type.endblock',\n\t        extends_:  'Twig.logic.type.extends',\n\t        use:       'Twig.logic.type.use',\n\t        include:   'Twig.logic.type.include',\n\t        spaceless: 'Twig.logic.type.spaceless',\n\t        endspaceless: 'Twig.logic.type.endspaceless',\n\t        macro:     'Twig.logic.type.macro',\n\t        endmacro:  'Twig.logic.type.endmacro',\n\t        import_:   'Twig.logic.type.import',\n\t        from:      'Twig.logic.type.from',\n\t        embed:     'Twig.logic.type.embed',\n\t        endembed:  'Twig.logic.type.endembed'\n\t    };\n\n\n\t    // Regular expressions for handling logic tokens.\n\t    //\n\t    // Properties:\n\t    //\n\t    //      type:  The type of expression this matches\n\t    //\n\t    //      regex: A regular expression that matches the format of the token\n\t    //\n\t    //      next:  What logic tokens (if any) pop this token off the logic stack. If empty, the\n\t    //             logic token is assumed to not require an end tag and isn't push onto the stack.\n\t    //\n\t    //      open:  Does this tag open a logic expression or is it standalone. For example,\n\t    //             {% endif %} cannot exist without an opening {% if ... %} tag, so open = false.\n\t    //\n\t    //  Functions:\n\t    //\n\t    //      compile: A function that handles compiling the token into an output token ready for\n\t    //               parsing with the parse function.\n\t    //\n\t    //      parse:   A function that parses the compiled token into output (HTML / whatever the\n\t    //               template represents).\n\t    Twig.logic.definitions = [\n\t        {\n\t            /**\n\t             * If type logic tokens.\n\t             *\n\t             *  Format: {% if expression %}\n\t             */\n\t            type: Twig.logic.type.if_,\n\t            regex: /^if\\s+([\\s\\S]+)$/,\n\t            next: [\n\t                Twig.logic.type.else_,\n\t                Twig.logic.type.elseif,\n\t                Twig.logic.type.endif\n\t            ],\n\t            open: true,\n\t            compile: function (token) {\n\t                var expression = token.match[1];\n\t                // Compile the expression.\n\t                token.stack = Twig.expression.compile.apply(this, [{\n\t                    type:  Twig.expression.type.expression,\n\t                    value: expression\n\t                }]).stack;\n\t                delete token.match;\n\t                return token;\n\t            },\n\t            parse: function (token, context, chain) {\n\t                var that = this;\n\n\t                return Twig.expression.parseAsync.apply(this, [token.stack, context])\n\t                .then(function(result) {\n\t                    chain = true;\n\n\t                    if (Twig.lib.boolval(result)) {\n\t                        chain = false;\n\n\t                        return Twig.parseAsync.apply(that, [token.output, context]);\n\t                    }\n\n\t                    return '';\n\t                })\n\t                .then(function(output) {\n\t                    return {\n\t                        chain: chain,\n\t                        output: output\n\t                    };\n\t                });\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * Else if type logic tokens.\n\t             *\n\t             *  Format: {% elseif expression %}\n\t             */\n\t            type: Twig.logic.type.elseif,\n\t            regex: /^elseif\\s+([^\\s].*)$/,\n\t            next: [\n\t                Twig.logic.type.else_,\n\t                Twig.logic.type.elseif,\n\t                Twig.logic.type.endif\n\t            ],\n\t            open: false,\n\t            compile: function (token) {\n\t                var expression = token.match[1];\n\t                // Compile the expression.\n\t                token.stack = Twig.expression.compile.apply(this, [{\n\t                    type:  Twig.expression.type.expression,\n\t                    value: expression\n\t                }]).stack;\n\t                delete token.match;\n\t                return token;\n\t            },\n\t            parse: function (token, context, chain) {\n\t                var that = this;\n\n\t                return Twig.expression.parseAsync.apply(this, [token.stack, context])\n\t                .then(function(result) {\n\t                    if (chain && Twig.lib.boolval(result)) {\n\t                        chain = false;\n\n\t                        return Twig.parseAsync.apply(that, [token.output, context]);\n\t                    }\n\n\t                    return '';\n\t                })\n\t                .then(function(output) {\n\t                    return {\n\t                        chain: chain,\n\t                        output: output\n\t                    }\n\t                });\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * Else if type logic tokens.\n\t             *\n\t             *  Format: {% elseif expression %}\n\t             */\n\t            type: Twig.logic.type.else_,\n\t            regex: /^else$/,\n\t            next: [\n\t                Twig.logic.type.endif,\n\t                Twig.logic.type.endfor\n\t            ],\n\t            open: false,\n\t            parse: function (token, context, chain) {\n\t                var promise = Twig.Promise.resolve('');\n\n\t                if (chain) {\n\t                    promise = Twig.parseAsync.apply(this, [token.output, context]);\n\t                }\n\n\t                return promise.then(function(output) {\n\t                    return {\n\t                        chain: chain,\n\t                        output: output\n\t                    };\n\t                });\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * End if type logic tokens.\n\t             *\n\t             *  Format: {% endif %}\n\t             */\n\t            type: Twig.logic.type.endif,\n\t            regex: /^endif$/,\n\t            next: [ ],\n\t            open: false\n\t        },\n\t        {\n\t            /**\n\t             * For type logic tokens.\n\t             *\n\t             *  Format: {% for expression %}\n\t             */\n\t            type: Twig.logic.type.for_,\n\t            regex: /^for\\s+([a-zA-Z0-9_,\\s]+)\\s+in\\s+([^\\s].*?)(?:\\s+if\\s+([^\\s].*))?$/,\n\t            next: [\n\t                Twig.logic.type.else_,\n\t                Twig.logic.type.endfor\n\t            ],\n\t            open: true,\n\t            compile: function (token) {\n\t                var key_value = token.match[1],\n\t                    expression = token.match[2],\n\t                    conditional = token.match[3],\n\t                    kv_split = null;\n\n\t                token.key_var = null;\n\t                token.value_var = null;\n\n\t                if (key_value.indexOf(\",\") >= 0) {\n\t                    kv_split = key_value.split(',');\n\t                    if (kv_split.length === 2) {\n\t                        token.key_var = kv_split[0].trim();\n\t                        token.value_var = kv_split[1].trim();\n\t                    } else {\n\t                        throw new Twig.Error(\"Invalid expression in for loop: \" + key_value);\n\t                    }\n\t                } else {\n\t                    token.value_var = key_value;\n\t                }\n\n\t                // Valid expressions for a for loop\n\t                //   for item     in expression\n\t                //   for key,item in expression\n\n\t                // Compile the expression.\n\t                token.expression = Twig.expression.compile.apply(this, [{\n\t                    type:  Twig.expression.type.expression,\n\t                    value: expression\n\t                }]).stack;\n\n\t                // Compile the conditional (if available)\n\t                if (conditional) {\n\t                    token.conditional = Twig.expression.compile.apply(this, [{\n\t                        type:  Twig.expression.type.expression,\n\t                        value: conditional\n\t                    }]).stack;\n\t                }\n\n\t                delete token.match;\n\t                return token;\n\t            },\n\t            parse: function (token, context, continue_chain) {\n\t                // Parse expression\n\t                var output = [],\n\t                    len,\n\t                    index = 0,\n\t                    keyset,\n\t                    that = this,\n\t                    conditional = token.conditional,\n\t                    buildLoop = function(index, len) {\n\t                        var isConditional = conditional !== undefined;\n\t                        return {\n\t                            index: index+1,\n\t                            index0: index,\n\t                            revindex: isConditional?undefined:len-index,\n\t                            revindex0: isConditional?undefined:len-index-1,\n\t                            first: (index === 0),\n\t                            last: isConditional?undefined:(index === len-1),\n\t                            length: isConditional?undefined:len,\n\t                            parent: context\n\t                        };\n\t                    },\n\t                    // run once for each iteration of the loop\n\t                    loop = function(key, value) {\n\t                        var inner_context = Twig.ChildContext(context);\n\n\t                        inner_context[token.value_var] = value;\n\n\t                        if (token.key_var) {\n\t                            inner_context[token.key_var] = key;\n\t                        }\n\n\t                        // Loop object\n\t                        inner_context.loop = buildLoop(index, len);\n\n\t                        var promise = conditional === undefined ?\n\t                            Twig.Promise.resolve(true) :\n\t                            Twig.expression.parseAsync.apply(that, [conditional, inner_context]);\n\n\t                        promise.then(function(condition) {\n\t                            if (!condition)\n\t                                return;\n\n\t                            return Twig.parseAsync.apply(that, [token.output, inner_context])\n\t                            .then(function(o) {\n\t                                output.push(o);\n\t                                index += 1;\n\t                            });\n\t                        })\n\t                        .then(function() {\n\t                            // Delete loop-related variables from the context\n\t                            delete inner_context['loop'];\n\t                            delete inner_context[token.value_var];\n\t                            delete inner_context[token.key_var];\n\n\t                            // Merge in values that exist in context but have changed\n\t                            // in inner_context.\n\t                            Twig.merge(context, inner_context, true);\n\t                        });\n\t                    };\n\n\n\t                return Twig.expression.parseAsync.apply(this, [token.expression, context])\n\t                .then(function(result) {\n\t                    if (Twig.lib.is('Array', result)) {\n\t                        len = result.length;\n\t                        Twig.async.forEach(result, function (value) {\n\t                            var key = index;\n\n\t                            return loop(key, value);\n\t                        });\n\t                    } else if (Twig.lib.is('Object', result)) {\n\t                        if (result._keys !== undefined) {\n\t                            keyset = result._keys;\n\t                        } else {\n\t                            keyset = Object.keys(result);\n\t                        }\n\t                        len = keyset.length;\n\t                        Twig.forEach(keyset, function(key) {\n\t                            // Ignore the _keys property, it's internal to twig.js\n\t                            if (key === \"_keys\") return;\n\n\t                            loop(key,  result[key]);\n\t                        });\n\t                    }\n\n\t                    // Only allow else statements if no output was generated\n\t                    continue_chain = (output.length === 0);\n\n\t                    return {\n\t                        chain: continue_chain,\n\t                        output: Twig.output.apply(that, [output])\n\t                    };\n\t                });\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * End if type logic tokens.\n\t             *\n\t             *  Format: {% endif %}\n\t             */\n\t            type: Twig.logic.type.endfor,\n\t            regex: /^endfor$/,\n\t            next: [ ],\n\t            open: false\n\t        },\n\t        {\n\t            /**\n\t             * Set type logic tokens.\n\t             *\n\t             *  Format: {% set key = expression %}\n\t             */\n\t            type: Twig.logic.type.set,\n\t            regex: /^set\\s+([a-zA-Z0-9_,\\s]+)\\s*=\\s*([\\s\\S]+)$/,\n\t            next: [ ],\n\t            open: true,\n\t            compile: function (token) {\n\t                var key = token.match[1].trim(),\n\t                    expression = token.match[2],\n\t                    // Compile the expression.\n\t                    expression_stack  = Twig.expression.compile.apply(this, [{\n\t                        type:  Twig.expression.type.expression,\n\t                        value: expression\n\t                    }]).stack;\n\n\t                token.key = key;\n\t                token.expression = expression_stack;\n\n\t                delete token.match;\n\t                return token;\n\t            },\n\t            parse: function (token, context, continue_chain) {\n\t                var key = token.key;\n\n\t                return Twig.expression.parseAsync.apply(this, [token.expression, context])\n\t                .then(function(value) {\n\t                    if (value === context) {\n\t                        /*  If storing the context in a variable, it needs to be a clone of the current state of context.\n\t                            Otherwise we have a context with infinite recursion.\n\t                            Fixes #341\n\t                        */\n\t                        value = Twig.lib.copy(value);\n\t                    }\n\n\t                    context[key] = value;\n\n\t                    return {\n\t                        chain: continue_chain,\n\t                        context: context\n\t                    };\n\t                });\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * Set capture type logic tokens.\n\t             *\n\t             *  Format: {% set key %}\n\t             */\n\t            type: Twig.logic.type.setcapture,\n\t            regex: /^set\\s+([a-zA-Z0-9_,\\s]+)$/,\n\t            next: [\n\t                Twig.logic.type.endset\n\t            ],\n\t            open: true,\n\t            compile: function (token) {\n\t                var key = token.match[1].trim();\n\n\t                token.key = key;\n\n\t                delete token.match;\n\t                return token;\n\t            },\n\t            parse: function (token, context, continue_chain) {\n\t                var that = this,\n\t                    key = token.key;\n\n\t                return Twig.parseAsync.apply(this, [token.output, context])\n\t                .then(function(value) {\n\t                    // set on both the global and local context\n\t                    that.context[key] = value;\n\t                    context[key] = value;\n\n\t                    return {\n\t                        chain: continue_chain,\n\t                        context: context\n\t                    };\n\t                });\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * End set type block logic tokens.\n\t             *\n\t             *  Format: {% endset %}\n\t             */\n\t            type: Twig.logic.type.endset,\n\t            regex: /^endset$/,\n\t            next: [ ],\n\t            open: false\n\t        },\n\t        {\n\t            /**\n\t             * Filter logic tokens.\n\t             *\n\t             *  Format: {% filter upper %} or {% filter lower|escape %}\n\t             */\n\t            type: Twig.logic.type.filter,\n\t            regex: /^filter\\s+(.+)$/,\n\t            next: [\n\t                Twig.logic.type.endfilter\n\t            ],\n\t            open: true,\n\t            compile: function (token) {\n\t                var expression = \"|\" + token.match[1].trim();\n\t                // Compile the expression.\n\t                token.stack = Twig.expression.compile.apply(this, [{\n\t                    type:  Twig.expression.type.expression,\n\t                    value: expression\n\t                }]).stack;\n\t                delete token.match;\n\t                return token;\n\t            },\n\t            parse: function (token, context, chain) {\n\t                return Twig.parseAsync.apply(this, [token.output, context])\n\t                .then(function(unfiltered) {\n\t                    var stack = [{\n\t                        type: Twig.expression.type.string,\n\t                        value: unfiltered\n\t                    }].concat(token.stack);\n\n\t                    return Twig.expression.parseAsync.apply(that, [stack, context]);\n\t                })\n\t                .then(function(output) {\n\t                    return {\n\t                        chain: chain,\n\t                        output: output\n\t                    }\n\t                });\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * End filter logic tokens.\n\t             *\n\t             *  Format: {% endfilter %}\n\t             */\n\t            type: Twig.logic.type.endfilter,\n\t            regex: /^endfilter$/,\n\t            next: [ ],\n\t            open: false\n\t        },\n\t        {\n\t            /**\n\t             * Block logic tokens.\n\t             *\n\t             *  Format: {% block title %}\n\t             */\n\t            type: Twig.logic.type.block,\n\t            regex: /^block\\s+([a-zA-Z0-9_]+)$/,\n\t            next: [\n\t                Twig.logic.type.endblock\n\t            ],\n\t            open: true,\n\t            compile: function (token) {\n\t                token.block = token.match[1].trim();\n\t                delete token.match;\n\t                return token;\n\t            },\n\t            parse: function (token, context, chain) {\n\t                var that = this,\n\t                    block_output,\n\t                    output,\n\t                    promise = Twig.Promise.resolve(),\n\t                    isImported = Twig.indexOf(this.importedBlocks, token.block) > -1,\n\t                    hasParent = this.blocks[token.block] && Twig.indexOf(this.blocks[token.block], Twig.placeholders.parent) > -1;\n\n\t                // Don't override previous blocks unless they're imported with \"use\"\n\t                // Loops should be exempted as well.\n\t                if (this.blocks[token.block] === undefined || isImported || hasParent || context.loop || token.overwrite) {\n\t                    if (token.expression) {\n\t                        promise = Twig.expression.parseAsync.apply(this, [token.output, context])\n\t                        .then(function(value) {\n\t                            return Twig.expression.parseAsync.apply(that, [{\n\t                                type: Twig.expression.type.string,\n\t                                value: value\n\t                            }, context]);\n\t                        });\n\t                    } else {\n\t                        promise = Twig.parseAsync.apply(this, [token.output, context])\n\t                        .then(function(value) {\n\t                            return Twig.expression.parseAsync.apply(that, [{\n\t                                type: Twig.expression.type.string,\n\t                                value: value\n\t                            }, context]);\n\t                        });\n\t                    }\n\n\t                    promise = promise.then(function(block_output) {\n\t                        if (isImported) {\n\t                            // once the block is overridden, remove it from the list of imported blocks\n\t                            that.importedBlocks.splice(that.importedBlocks.indexOf(token.block), 1);\n\t                        }\n\n\t                        if (hasParent) {\n\t                            that.blocks[token.block] = Twig.Markup(that.blocks[token.block].replace(Twig.placeholders.parent, block_output));\n\t                        } else {\n\t                            that.blocks[token.block] = block_output;\n\t                        }\n\n\t                        that.originalBlockTokens[token.block] = {\n\t                            type: token.type,\n\t                            block: token.block,\n\t                            output: token.output,\n\t                            overwrite: true\n\t                        };\n\t                    });\n\t                }\n\n\t                return promise.then(function() {\n\t                    // Check if a child block has been set from a template extending this one.\n\t                    if (that.child.blocks[token.block]) {\n\t                        output = that.child.blocks[token.block];\n\t                    } else {\n\t                        output = that.blocks[token.block];\n\t                    }\n\n\t                    return {\n\t                        chain: chain,\n\t                        output: output\n\t                    };\n\t                });\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * Block shorthand logic tokens.\n\t             *\n\t             *  Format: {% block title expression %}\n\t             */\n\t            type: Twig.logic.type.shortblock,\n\t            regex: /^block\\s+([a-zA-Z0-9_]+)\\s+(.+)$/,\n\t            next: [ ],\n\t            open: true,\n\t            compile: function (token) {\n\t                token.expression = token.match[2].trim();\n\n\t                token.output = Twig.expression.compile({\n\t                    type: Twig.expression.type.expression,\n\t                    value: token.expression\n\t                }).stack;\n\n\t                token.block = token.match[1].trim();\n\t                delete token.match;\n\t                return token;\n\t            },\n\t            parse: function (token, context, chain) {\n\t                return Twig.logic.handler[Twig.logic.type.block].parse.apply(this, arguments);\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * End block logic tokens.\n\t             *\n\t             *  Format: {% endblock %}\n\t             */\n\t            type: Twig.logic.type.endblock,\n\t            regex: /^endblock(?:\\s+([a-zA-Z0-9_]+))?$/,\n\t            next: [ ],\n\t            open: false\n\t        },\n\t        {\n\t            /**\n\t             * Block logic tokens.\n\t             *\n\t             *  Format: {% extends \"template.twig\" %}\n\t             */\n\t            type: Twig.logic.type.extends_,\n\t            regex: /^extends\\s+(.+)$/,\n\t            next: [ ],\n\t            open: true,\n\t            compile: function (token) {\n\t                var expression = token.match[1].trim();\n\t                delete token.match;\n\n\t                token.stack   = Twig.expression.compile.apply(this, [{\n\t                    type:  Twig.expression.type.expression,\n\t                    value: expression\n\t                }]).stack;\n\n\t                return token;\n\t            },\n\t            parse: function (token, context, chain) {\n\t                var template,\n\t                    that = this,\n\t                    innerContext = Twig.ChildContext(context);\n\n\t                // Resolve filename\n\t                return Twig.expression.parseAsync.apply(this, [token.stack, context])\n\t                .then(function(file) {\n\t                    // Set parent template\n\t                    that.extend = file;\n\n\t                    if (file instanceof Twig.Template) {\n\t                        template = file;\n\t                    } else {\n\t                        // Import file\n\t                        template = that.importFile(file);\n\t                    }\n\n\t                    // Render the template in case it puts anything in its context\n\t                    return template.renderAsync(innerContext);\n\t                })\n\t                .then(function() {\n\t                    // Extend the parent context with the extended context\n\t                    Twig.lib.extend(context, innerContext);\n\n\t                    return {\n\t                        chain: chain,\n\t                        output: ''\n\t                    };\n\t                });\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * Block logic tokens.\n\t             *\n\t             *  Format: {% use \"template.twig\" %}\n\t             */\n\t            type: Twig.logic.type.use,\n\t            regex: /^use\\s+(.+)$/,\n\t            next: [ ],\n\t            open: true,\n\t            compile: function (token) {\n\t                var expression = token.match[1].trim();\n\t                delete token.match;\n\n\t                token.stack = Twig.expression.compile.apply(this, [{\n\t                    type:  Twig.expression.type.expression,\n\t                    value: expression\n\t                }]).stack;\n\n\t                return token;\n\t            },\n\t            parse: function (token, context, chain) {\n\t                var that = this;\n\n\t                // Resolve filename\n\t                return Twig.expression.parseAsync.apply(this, [token.stack, context])\n\t                .then(function(file) {\n\t                    // Import blocks\n\t                    that.importBlocks(file);\n\n\t                    return {\n\t                        chain: chain,\n\t                        output: ''\n\t                    };\n\t                });\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * Block logic tokens.\n\t             *\n\t             *  Format: {% includes \"template.twig\" [with {some: 'values'} only] %}\n\t             */\n\t            type: Twig.logic.type.include,\n\t            regex: /^include\\s+(.+?)(?:\\s|$)(ignore missing(?:\\s|$))?(?:with\\s+([\\S\\s]+?))?(?:\\s|$)(only)?$/,\n\t            next: [ ],\n\t            open: true,\n\t            compile: function (token) {\n\t                var match = token.match,\n\t                    expression = match[1].trim(),\n\t                    ignoreMissing = match[2] !== undefined,\n\t                    withContext = match[3],\n\t                    only = ((match[4] !== undefined) && match[4].length);\n\n\t                delete token.match;\n\n\t                token.only = only;\n\t                token.ignoreMissing = ignoreMissing;\n\n\t                token.stack = Twig.expression.compile.apply(this, [{\n\t                    type:  Twig.expression.type.expression,\n\t                    value: expression\n\t                }]).stack;\n\n\t                if (withContext !== undefined) {\n\t                    token.withStack = Twig.expression.compile.apply(this, [{\n\t                        type:  Twig.expression.type.expression,\n\t                        value: withContext.trim()\n\t                    }]).stack;\n\t                }\n\n\t                return token;\n\t            },\n\t            parse: function (token, context, chain) {\n\t                // Resolve filename\n\t                var innerContext = {},\n\t                    i,\n\t                    template,\n\t                    that = this,\n\t                    promise = Twig.Promise.resolve();\n\n\t                if (!token.only) {\n\t                    innerContext = Twig.ChildContext(context);\n\t                }\n\n\t                if (token.withStack !== undefined) {\n\t                    promise = Twig.expression.parseAsync.apply(this, [token.withStack, context])\n\t                    .then(function(withContext) {\n\t                        for (i in withContext) {\n\t                            if (withContext.hasOwnProperty(i))\n\t                                innerContext[i] = withContext[i];\n\t                        }\n\t                    });\n\t                }\n\n\t                return promise\n\t                .then(function() {\n\t                    return Twig.expression.parseAsync.apply(that, [token.stack, context]);\n\t                })\n\t                .then(function(file) {\n\t                    if (file instanceof Twig.Template) {\n\t                        template = file;\n\t                    } else {\n\t                        // Import file\n\t                        try {\n\t                            template = that.importFile(file);\n\t                        } catch (err) {\n\t                            if (token.ignoreMissing) {\n\t                                return '';\n\t                            }\n\n\t                            throw err;\n\t                        }\n\t                    }\n\n\t                    return template.renderAsync(innerContext);\n\t                })\n\t                .then(function(output) {\n\t                    return {\n\t                        chain: chain,\n\t                        output: output\n\t                    };\n\t                });\n\t            }\n\t        },\n\t        {\n\t            type: Twig.logic.type.spaceless,\n\t            regex: /^spaceless$/,\n\t            next: [\n\t                Twig.logic.type.endspaceless\n\t            ],\n\t            open: true,\n\n\t            // Parse the html and return it without any spaces between tags\n\t            parse: function (token, context, chain) {\n\t                // Parse the output without any filter\n\t                return Twig.parseAsync.apply(this, [token.output, context])\n\t                .then(function(unfiltered) {\n\t                    var // A regular expression to find closing and opening tags with spaces between them\n\t                        rBetweenTagSpaces = />\\s+</g,\n\t                        // Replace all space between closing and opening html tags\n\t                        output = unfiltered.replace(rBetweenTagSpaces,'><').trim();\n\t                        // Rewrap output as a Twig.Markup\n\t                        output = Twig.Markup(output);\n\t                    return {\n\t                        chain: chain,\n\t                        output: output\n\t                    };\n\t                });\n\t            }\n\t        },\n\n\t        // Add the {% endspaceless %} token\n\t        {\n\t            type: Twig.logic.type.endspaceless,\n\t            regex: /^endspaceless$/,\n\t            next: [ ],\n\t            open: false\n\t        },\n\t        {\n\t            /**\n\t             * Macro logic tokens.\n\t             *\n\t             * Format: {% maro input(name, value, type, size) %}\n\t             *\n\t             */\n\t            type: Twig.logic.type.macro,\n\t            regex: /^macro\\s+([a-zA-Z0-9_]+)\\s*\\(\\s*((?:[a-zA-Z0-9_]+(?:,\\s*)?)*)\\s*\\)$/,\n\t            next: [\n\t                Twig.logic.type.endmacro\n\t            ],\n\t            open: true,\n\t            compile: function (token) {\n\t                var macroName = token.match[1],\n\t                    parameters = token.match[2].split(/[\\s,]+/);\n\n\t                //TODO: Clean up duplicate check\n\t                for (var i=0; i<parameters.length; i++) {\n\t                    for (var j=0; j<parameters.length; j++){\n\t                        if (parameters[i] === parameters[j] && i !== j) {\n\t                            throw new Twig.Error(\"Duplicate arguments for parameter: \"+ parameters[i]);\n\t                        }\n\t                    }\n\t                }\n\n\t                token.macroName = macroName;\n\t                token.parameters = parameters;\n\n\t                delete token.match;\n\t                return token;\n\t            },\n\t            parse: function (token, context, chain) {\n\t                var template = this;\n\t                this.macros[token.macroName] = function() {\n\t                    // Pass global context and other macros\n\t                    var macroContext = {\n\t                        _self: template.macros\n\t                    }\n\t                    // Add parameters from context to macroContext\n\t                    for (var i=0; i<token.parameters.length; i++) {\n\t                        var prop = token.parameters[i];\n\t                        if(typeof arguments[i] !== 'undefined') {\n\t                            macroContext[prop] = arguments[i];\n\t                        } else {\n\t                            macroContext[prop] = undefined;\n\t                        }\n\t                    }\n\n\t                    // Render\n\t                    return Twig.parseAsync.apply(template, [token.output, macroContext]);\n\t                };\n\n\t                return {\n\t                    chain: chain,\n\t                    output: ''\n\t                };\n\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * End macro logic tokens.\n\t             *\n\t             * Format: {% endmacro %}\n\t             */\n\t             type: Twig.logic.type.endmacro,\n\t             regex: /^endmacro$/,\n\t             next: [ ],\n\t             open: false\n\t        },\n\t        {\n\t            /*\n\t            * import logic tokens.\n\t            *\n\t            * Format: {% import \"template.twig\" as form %}\n\t            */\n\t            type: Twig.logic.type.import_,\n\t            regex: /^import\\s+(.+)\\s+as\\s+([a-zA-Z0-9_]+)$/,\n\t            next: [ ],\n\t            open: true,\n\t            compile: function (token) {\n\t                var expression = token.match[1].trim(),\n\t                    contextName = token.match[2].trim();\n\t                delete token.match;\n\n\t                token.expression = expression;\n\t                token.contextName = contextName;\n\n\t                token.stack = Twig.expression.compile.apply(this, [{\n\t                    type: Twig.expression.type.expression,\n\t                    value: expression\n\t                }]).stack;\n\n\t                return token;\n\t            },\n\t            parse: function (token, context, chain) {\n\t                var that = this,\n\t                    output = { chain: chain, output: '' };\n\n\t                if (token.expression === '_self') {\n\t                    context[token.contextName] = this.macros;\n\t                    return Twig.Promise.resolve(output);\n\t                }\n\n\t                return Twig.expression.parseAsync.apply(this, [token.stack, context])\n\t                .then(function(file) {\n\t                    return that.importFile(file || token.expression);\n\t                })\n\t                .then(function(template) {\n\t                    context[token.contextName] = template.renderAsync({}, {output: 'macros'});\n\n\t                    return output;\n\t                });\n\t            }\n\t        },\n\t        {\n\t            /*\n\t            * from logic tokens.\n\t            *\n\t            * Format: {% from \"template.twig\" import func as form %}\n\t            */\n\t            type: Twig.logic.type.from,\n\t            regex: /^from\\s+(.+)\\s+import\\s+([a-zA-Z0-9_, ]+)$/,\n\t            next: [ ],\n\t            open: true,\n\t            compile: function (token) {\n\t                var expression = token.match[1].trim(),\n\t                    macroExpressions = token.match[2].trim().split(/\\s*,\\s*/),\n\t                    macroNames = {};\n\n\t                for (var i=0; i<macroExpressions.length; i++) {\n\t                    var res = macroExpressions[i];\n\n\t                    // match function as variable\n\t                    var macroMatch = res.match(/^([a-zA-Z0-9_]+)\\s+as\\s+([a-zA-Z0-9_]+)$/);\n\t                    if (macroMatch) {\n\t                        macroNames[macroMatch[1].trim()] = macroMatch[2].trim();\n\t                    }\n\t                    else if (res.match(/^([a-zA-Z0-9_]+)$/)) {\n\t                        macroNames[res] = res;\n\t                    }\n\t                    else {\n\t                        // ignore import\n\t                    }\n\n\t                }\n\n\t                delete token.match;\n\n\t                token.expression = expression;\n\t                token.macroNames = macroNames;\n\n\t                token.stack = Twig.expression.compile.apply(this, [{\n\t                    type: Twig.expression.type.expression,\n\t                    value: expression\n\t                }]).stack;\n\n\t                return token;\n\t            },\n\t            parse: function (token, context, chain) {\n\t                var that = this,\n\t                    promise = Twig.Promise.resolve(this.macros);\n\n\t                if (token.expression !== \"_self\") {\n\t                    promise = Twig.expression.parseAsync.apply(this, [token.stack, context])\n\t                    .then(function(file) {\n\t                        return that.importFile(file || token.expression);\n\t                    })\n\t                    .then(function(template) {\n\t                        return template.renderAsync({}, {output: 'macros'});\n\t                    });\n\t                }\n\n\t                return promise\n\t                .then(function(macros) {\n\t                    for (var macroName in token.macroNames) {\n\t                        if (macros.hasOwnProperty(macroName)) {\n\t                            context[token.macroNames[macroName]] = macros[macroName];\n\t                        }\n\t                    }\n\n\t                    return {\n\t                        chain: chain,\n\t                        output: ''\n\t                    }\n\t                });\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * The embed tag combines the behaviour of include and extends.\n\t             * It allows you to include another template's contents, just like include does.\n\t             *\n\t             *  Format: {% embed \"template.twig\" [with {some: 'values'} only] %}\n\t             */\n\t            type: Twig.logic.type.embed,\n\t            regex: /^embed\\s+(.+?)(?:\\s|$)(ignore missing(?:\\s|$))?(?:with\\s+([\\S\\s]+?))?(?:\\s|$)(only)?$/,\n\t            next: [\n\t                Twig.logic.type.endembed\n\t            ],\n\t            open: true,\n\t            compile: function (token) {\n\t                var match = token.match,\n\t                    expression = match[1].trim(),\n\t                    ignoreMissing = match[2] !== undefined,\n\t                    withContext = match[3],\n\t                    only = ((match[4] !== undefined) && match[4].length);\n\n\t                delete token.match;\n\n\t                token.only = only;\n\t                token.ignoreMissing = ignoreMissing;\n\n\t                token.stack = Twig.expression.compile.apply(this, [{\n\t                    type:  Twig.expression.type.expression,\n\t                    value: expression\n\t                }]).stack;\n\n\t                if (withContext !== undefined) {\n\t                    token.withStack = Twig.expression.compile.apply(this, [{\n\t                        type:  Twig.expression.type.expression,\n\t                        value: withContext.trim()\n\t                    }]).stack;\n\t                }\n\n\t                return token;\n\t            },\n\t            parse: function (token, context, chain) {\n\t                // Resolve filename\n\t                var innerContext = {},\n\t                    that = this,\n\t                    i,\n\t                    template,\n\t                    promise = Twig.Promise.resolve();\n\n\t                if (!token.only) {\n\t                    for (i in context) {\n\t                        if (context.hasOwnProperty(i))\n\t                            innerContext[i] = context[i];\n\t                    }\n\t                }\n\n\t                if (token.withStack !== undefined) {\n\t                    promise = Twig.expression.parseAsync.apply(this, [token.withStack, context])\n\t                    .then(function(withContext) {\n\t                        for (i in withContext) {\n\t                            if (withContext.hasOwnProperty(i))\n\t                                innerContext[i] = withContext[i];\n\t                        }\n\t                    });\n\t                }\n\n\t                return promise.then(function() {\n\t                    return Twig.expression.parseAsync.apply(that, [token.stack, innerContext]);\n\t                })\n\t                .then(function(file) {\n\t                    if (file instanceof Twig.Template) {\n\t                        template = file;\n\t                    } else {\n\t                        // Import file\n\t                        try {\n\t                            template = that.importFile(file);\n\t                        } catch (err) {\n\t                            if (token.ignoreMissing) {\n\t                                return '';\n\t                            }\n\n\t                            throw err;\n\t                        }\n\t                    }\n\n\t                    // reset previous blocks\n\t                    that.blocks = {};\n\n\t                    // parse tokens. output will be not used\n\t                    return Twig.parseAsync.apply(that, [token.output, innerContext])\n\t                    .then(function() {\n\t                        // render tempalte with blocks defined in embed block\n\t                        return template.renderAsync(innerContext, {'blocks':that.blocks});\n\t                    });\n\t                })\n\t                .then(function(output) {\n\t                    return {\n\t                        chain: chain,\n\t                        output: output\n\t                    };\n\t                });\n\t            }\n\t        },\n\t        /* Add the {% endembed %} token\n\t         *\n\t         */\n\t        {\n\t            type: Twig.logic.type.endembed,\n\t            regex: /^endembed$/,\n\t            next: [ ],\n\t            open: false\n\t        }\n\n\t    ];\n\n\n\t    /**\n\t     * Registry for logic handlers.\n\t     */\n\t    Twig.logic.handler = {};\n\n\t    /**\n\t     * Define a new token type, available at Twig.logic.type.{type}\n\t     */\n\t    Twig.logic.extendType = function (type, value) {\n\t        value = value || (\"Twig.logic.type\" + type);\n\t        Twig.logic.type[type] = value;\n\t    };\n\n\t    /**\n\t     * Extend the logic parsing functionality with a new token definition.\n\t     *\n\t     * // Define a new tag\n\t     * Twig.logic.extend({\n\t     *     type: Twig.logic.type.{type},\n\t     *     // The pattern to match for this token\n\t     *     regex: ...,\n\t     *     // What token types can follow this token, leave blank if any.\n\t     *     next: [ ... ]\n\t     *     // Create and return compiled version of the token\n\t     *     compile: function(token) { ... }\n\t     *     // Parse the compiled token with the context provided by the render call\n\t     *     //   and whether this token chain is complete.\n\t     *     parse: function(token, context, chain) { ... }\n\t     * });\n\t     *\n\t     * @param {Object} definition The new logic expression.\n\t     */\n\t    Twig.logic.extend = function (definition) {\n\n\t        if (!definition.type) {\n\t            throw new Twig.Error(\"Unable to extend logic definition. No type provided for \" + definition);\n\t        } else {\n\t            Twig.logic.extendType(definition.type);\n\t        }\n\t        Twig.logic.handler[definition.type] = definition;\n\t    };\n\n\t    // Extend with built-in expressions\n\t    while (Twig.logic.definitions.length > 0) {\n\t        Twig.logic.extend(Twig.logic.definitions.shift());\n\t    }\n\n\t    /**\n\t     * Compile a logic token into an object ready for parsing.\n\t     *\n\t     * @param {Object} raw_token An uncompiled logic token.\n\t     *\n\t     * @return {Object} A compiled logic token, ready for parsing.\n\t     */\n\t    Twig.logic.compile = function (raw_token) {\n\t        var expression = raw_token.value.trim(),\n\t            token = Twig.logic.tokenize.apply(this, [expression]),\n\t            token_template = Twig.logic.handler[token.type];\n\n\t        // Check if the token needs compiling\n\t        if (token_template.compile) {\n\t            token = token_template.compile.apply(this, [token]);\n\t            Twig.log.trace(\"Twig.logic.compile: \", \"Compiled logic token to \", token);\n\t        }\n\n\t        return token;\n\t    };\n\n\t    /**\n\t     * Tokenize logic expressions. This function matches token expressions against regular\n\t     * expressions provided in token definitions provided with Twig.logic.extend.\n\t     *\n\t     * @param {string} expression the logic token expression to tokenize\n\t     *                (i.e. what's between {% and %})\n\t     *\n\t     * @return {Object} The matched token with type set to the token type and match to the regex match.\n\t     */\n\t    Twig.logic.tokenize = function (expression) {\n\t        var token = {},\n\t            token_template_type = null,\n\t            token_type = null,\n\t            token_regex = null,\n\t            regex_array = null,\n\t            regex = null,\n\t            match = null;\n\n\t        // Ignore whitespace around expressions.\n\t        expression = expression.trim();\n\n\t        for (token_template_type in Twig.logic.handler) {\n\t            if (Twig.logic.handler.hasOwnProperty(token_template_type)) {\n\t                // Get the type and regex for this template type\n\t                token_type = Twig.logic.handler[token_template_type].type;\n\t                token_regex = Twig.logic.handler[token_template_type].regex;\n\n\t                // Handle multiple regular expressions per type.\n\t                regex_array = [];\n\t                if (token_regex instanceof Array) {\n\t                    regex_array = token_regex;\n\t                } else {\n\t                    regex_array.push(token_regex);\n\t                }\n\n\t                // Check regular expressions in the order they were specified in the definition.\n\t                while (regex_array.length > 0) {\n\t                    regex = regex_array.shift();\n\t                    match = regex.exec(expression.trim());\n\t                    if (match !== null) {\n\t                        token.type  = token_type;\n\t                        token.match = match;\n\t                        Twig.log.trace(\"Twig.logic.tokenize: \", \"Matched a \", token_type, \" regular expression of \", match);\n\t                        return token;\n\t                    }\n\t                }\n\t            }\n\t        }\n\n\t        // No regex matches\n\t        throw new Twig.Error(\"Unable to parse '\" + expression.trim() + \"'\");\n\t    };\n\n\t    /**\n\t     * Parse a logic token within a given context.\n\t     *\n\t     * What are logic chains?\n\t     *      Logic chains represent a series of tokens that are connected,\n\t     *          for example:\n\t     *          {% if ... %} {% else %} {% endif %}\n\t     *\n\t     *      The chain parameter is used to signify if a chain is open of closed.\n\t     *      open:\n\t     *          More tokens in this chain should be parsed.\n\t     *      closed:\n\t     *          This token chain has completed parsing and any additional\n\t     *          tokens (else, elseif, etc...) should be ignored.\n\t     *\n\t     * @param {Object} token The compiled token.\n\t     * @param {Object} context The render context.\n\t     * @param {boolean} chain Is this an open logic chain. If false, that means a\n\t     *                        chain is closed and no further cases should be parsed.\n\t     */\n\t    Twig.logic.parse = function (token, context, chain, allow_async) {\n\t        var output = '',\n\t            promise,\n\t            is_async = true,\n\t            token_template;\n\n\t        context = context || { };\n\n\t        Twig.log.debug(\"Twig.logic.parse: \", \"Parsing logic token \", token);\n\n\t        token_template = Twig.logic.handler[token.type];\n\n\t        if (token_template.parse) {\n\t            output = token_template.parse.apply(this, [token, context, chain]);\n\t        }\n\n\t        promise = Twig.isPromise(output) ? output : Twig.Promise.resolve(output);\n\n\t        promise.then(function(o) {\n\t            is_async = false;\n\t            output = o;\n\t        });\n\n\t        if (allow_async)\n\t            return promise || Twig.Promise.resolve(output);\n\n\t        if (is_async)\n\t            throw new Twig.Error('You are using Twig.js in sync mode in combination with async extensions.');\n\n\t        return output;\n\t    };\n\n\t    return Twig;\n\n\t};\n\n\n/***/ },\n/* 22 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(Twig) {\n\t    'use strict';\n\n\t    Twig.Templates.registerParser('source', function(params) {\n\t        return params.data || '';\n\t    });\n\t};\n\n\n/***/ },\n/* 23 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(Twig) {\n\t    'use strict';\n\n\t    Twig.Templates.registerParser('twig', function(params) {\n\t        return new Twig.Template(params);\n\t    });\n\t};\n\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// ## twig.path.js\n\t//\n\t// This file handles path parsing\n\tmodule.exports = function (Twig) {\n\t    \"use strict\";\n\n\t    /**\n\t     * Namespace for path handling.\n\t     */\n\t    Twig.path = {};\n\n\t    /**\n\t     * Generate the canonical version of a url based on the given base path and file path and in\n\t     * the previously registered namespaces.\n\t     *\n\t     * @param  {string} template The Twig Template\n\t     * @param  {string} file     The file path, may be relative and may contain namespaces.\n\t     *\n\t     * @return {string}          The canonical version of the path\n\t     */\n\t     Twig.path.parsePath = function(template, file) {\n\t        var namespaces = null,\n\t            file = file || \"\";\n\n\t        if (typeof template === 'object' && typeof template.options === 'object') {\n\t            namespaces = template.options.namespaces;\n\t        }\n\n\t        if (typeof namespaces === 'object' && (file.indexOf('::') > 0) || file.indexOf('@') >= 0){\n\t            for (var k in namespaces){\n\t                if (namespaces.hasOwnProperty(k)) {\n\t                    file = file.replace(k + '::', namespaces[k]);\n\t                    file = file.replace('@' + k, namespaces[k]);\n\t                }\n\t            }\n\n\t            return file;\n\t        }\n\n\t        return Twig.path.relativePath(template, file);\n\t    };\n\n\t    /**\n\t     * Generate the relative canonical version of a url based on the given base path and file path.\n\t     *\n\t     * @param {Twig.Template} template The Twig.Template.\n\t     * @param {string} file The file path, relative to the base path.\n\t     *\n\t     * @return {string} The canonical version of the path.\n\t     */\n\t    Twig.path.relativePath = function(template, file) {\n\t        var base,\n\t            base_path,\n\t            sep_chr = \"/\",\n\t            new_path = [],\n\t            file = file || \"\",\n\t            val;\n\n\t        if (template.url) {\n\t            if (typeof template.base !== 'undefined') {\n\t                base = template.base + ((template.base.charAt(template.base.length-1) === '/') ? '' : '/');\n\t            } else {\n\t                base = template.url;\n\t            }\n\t        } else if (template.path) {\n\t            // Get the system-specific path separator\n\t            var path = __webpack_require__(20),\n\t                sep = path.sep || sep_chr,\n\t                relative = new RegExp(\"^\\\\.{1,2}\" + sep.replace(\"\\\\\", \"\\\\\\\\\"));\n\t            file = file.replace(/\\//g, sep);\n\n\t            if (template.base !== undefined && file.match(relative) == null) {\n\t                file = file.replace(template.base, '');\n\t                base = template.base + sep;\n\t            } else {\n\t                base = path.normalize(template.path);\n\t            }\n\n\t            base = base.replace(sep+sep, sep);\n\t            sep_chr = sep;\n\t        } else if ((template.name || template.id) && template.method && template.method !== 'fs' && template.method !== 'ajax') {\n\t            // Custom registered loader\n\t            base = template.base || template.name || template.id;\n\t        } else {\n\t            throw new Twig.Error(\"Cannot extend an inline template.\");\n\t        }\n\n\t        base_path = base.split(sep_chr);\n\n\t        // Remove file from url\n\t        base_path.pop();\n\t        base_path = base_path.concat(file.split(sep_chr));\n\n\t        while (base_path.length > 0) {\n\t            val = base_path.shift();\n\t            if (val == \".\") {\n\t                // Ignore\n\t            } else if (val == \"..\" && new_path.length > 0 && new_path[new_path.length-1] != \"..\") {\n\t                new_path.pop();\n\t            } else {\n\t                new_path.push(val);\n\t            }\n\t        }\n\n\t        return new_path.join(sep_chr);\n\t    };\n\n\t    return Twig;\n\t};\n\n\n/***/ },\n/* 25 */\n/***/ function(module, exports) {\n\n\t// ## twig.tests.js\n\t//\n\t// This file handles expression tests. (is empty, is not defined, etc...)\n\tmodule.exports = function (Twig) {\n\t    \"use strict\";\n\t    Twig.tests = {\n\t        empty: function(value) {\n\t            if (value === null || value === undefined) return true;\n\t            // Handler numbers\n\t            if (typeof value === \"number\") return false; // numbers are never \"empty\"\n\t            // Handle strings and arrays\n\t            if (value.length && value.length > 0) return false;\n\t            // Handle objects\n\t            for (var key in value) {\n\t                if (value.hasOwnProperty(key)) return false;\n\t            }\n\t            return true;\n\t        },\n\t        odd: function(value) {\n\t            return value % 2 === 1;\n\t        },\n\t        even: function(value) {\n\t            return value % 2 === 0;\n\t        },\n\t        divisibleby: function(value, params) {\n\t            return value % params[0] === 0;\n\t        },\n\t        defined: function(value) {\n\t            return value !== undefined;\n\t        },\n\t        none: function(value) {\n\t            return value === null;\n\t        },\n\t        'null': function(value) {\n\t            return this.none(value); // Alias of none\n\t        },\n\t        'same as': function(value, params) {\n\t            return value === params[0];\n\t        },\n\t        sameas: function(value, params) {\n\t            console.warn('`sameas` is deprecated use `same as`');\n\t            return Twig.tests['same as'](value, params);\n\t        },\n\t        iterable: function(value) {\n\t            return value && (Twig.lib.is(\"Array\", value) || Twig.lib.is(\"Object\", value));\n\t        }\n\t        /*\n\t        constant ?\n\t         */\n\t    };\n\n\t    Twig.test = function(test, value, params) {\n\t        if (!Twig.tests[test]) {\n\t            throw \"Test \" + test + \" is not defined.\";\n\t        }\n\t        return Twig.tests[test](value, params);\n\t    };\n\n\t    Twig.test.extend = function(test, definition) {\n\t        Twig.tests[test] = definition;\n\t    };\n\n\t    return Twig;\n\t};\n\n\n/***/ },\n/* 26 */\n/***/ function(module, exports) {\n\n\t// ## twig.async.js\n\t//\n\t// This file handles asynchronous tasks within twig.\n\tmodule.exports = function (Twig) {\n\t    \"use strict\";\n\n\t    Twig.parseAsync = function (tokens, context) {\n\t        return Twig.parse.apply(this, [tokens, context, true]);\n\t    }\n\n\t    Twig.expression.parseAsync = function (tokens, context, tokens_are_parameters) {\n\t        return Twig.expression.parse.apply(this, [tokens, context, tokens_are_parameters, true]);\n\t    }\n\n\t    Twig.logic.parseAsync = function (token, context, chain) {\n\t        return Twig.logic.parse.apply(this, [token, context, chain, true]);\n\t    }\n\n\t    Twig.Template.prototype.renderAsync = function (context, params) {\n\t        return this.render(context, params, true);\n\t    }\n\n\t    Twig.async = {};\n\n\t    /**\n\t     * Checks for `thenable` objects\n\t     */\n\t    Twig.isPromise = function(obj) {\n\t        return obj && (typeof obj.then == 'function');\n\t    }\n\n\t    /**\n\t     * An alternate implementation of a Promise that does not fully follow\n\t     * the spec, but instead works fully synchronous while still being\n\t     * thenable.\n\t     *\n\t     * These promises can be mixed with regular promises at which point\n\t     * the synchronous behaviour is lost.\n\t     */\n\t    Twig.Promise = function(executor) {\n\t        // State\n\t        var state = 'unknown';\n\t        var value = null;\n\t        var handlers = null;\n\n\t        function changeState(newState, v) {\n\t            state = newState;\n\t            value = v;\n\t            notify();\n\t        };\n\t        function onResolve(v) { changeState('resolve', v); }\n\t        function onReject(e) { changeState('reject', e); }\n\n\t        function notify() {\n\t            if (!handlers) return;\n\n\t            Twig.forEach(handlers, function(h) {\n\t                append(h.resolve, h.reject);\n\t            });\n\t            handlers = null;\n\t        }\n\n\t        function append(onResolved, onRejected) {\n\t            var h = {\n\t                resolve: onResolved,\n\t                reject: onRejected\n\t            };\n\n\t            // The promise has yet to be rejected or resolved.\n\t            if (state == 'unknown') {\n\t                handlers = handlers || [];\n\t                return handlers.push(h);\n\t            }\n\n\t            // The state has been changed to either resolve, or reject\n\t            // which means we should call the handler.\n\t            if (h[state])\n\t                h[state](value);\n\t        }\n\n\t        function run(fn, resolve, reject) {\n\t            var done = false;\n\t            try {\n\t                fn(function(v) {\n\t                    if (done) return;\n\t                    done = true;\n\t                    resolve(v);\n\t                }, function(e) {\n\t                    if (done) return;\n\t                    done = true;\n\t                    reject(e);\n\t                });\n\t            } catch(e) {\n\t                done = true;\n\t                reject(e);\n\t            }\n\t        }\n\n\t        function ready(result) {\n\t            try {\n\t                if (!Twig.isPromise(result)) {\n\t                    return onResolve(result);\n\t                }\n\n\t                run(result.then.bind(result), ready, onReject);\n\t            } catch (e) {\n\t                onReject(e);\n\t            }\n\t        }\n\n\t        run(executor, ready, onReject);\n\n\t        return {\n\t            then: function(onResolved, onRejected) {\n\t                var hasResolved = typeof onResolved == 'function';\n\t                var hasRejected = typeof onRejected == 'function';\n\n\t                return new Twig.Promise(function(resolve, reject) {\n\t                    append(function(result) {\n\t                        if (hasResolved) {\n\t                            try {\n\t                                resolve(onResolved(result));\n\t                            } catch (e) {\n\t                                reject(e);\n\t                            }\n\t                        } else {\n\t                            resolve(result);\n\t                        }\n\t                    }, function(err) {\n\t                        if (hasRejected) {\n\t                            try {\n\t                                resolve(onRejected(err));\n\t                            } catch (e) {\n\t                                reject(e);\n\t                            }\n\t                        } else {\n\t                            reject(err);\n\t                        }\n\t                    });\n\t                });\n\t            },\n\t            catch: function(onRejected) {\n\t                return this.then(null, onRejected);\n\t            }\n\t        };\n\t    }\n\n\t    Twig.Promise.resolve = function(value) {\n\t        return new Twig.Promise(function(resolve) {\n\t            resolve(value);\n\t        });\n\t    };\n\n\t    Twig.Promise.reject = function(e) {\n\t        return new Twig.Promise(function(resolve, reject) {\n\t            reject(e);\n\t        });\n\t    };\n\n\t    Twig.Promise.all = function(promises) {\n\t        const results = [];\n\n\t        return Twig.async.forEach(promises, function(p, index) {\n\t            if (!Twig.isPromise(p)) {\n\t                results[index] = p;\n\t                return;\n\t            }\n\n\t            return p.then(function(v) {\n\t                results[index] = v;\n\t            });\n\t        })\n\t        .then(function() {\n\t            return results;\n\t        });\n\t    };\n\n\t    /**\n\t    * Go over each item in a fashion compatible with Twig.forEach,\n\t    * allow the function to return a promise or call the third argument\n\t    * to signal it is finished.\n\t    *\n\t    * Each item in the array will be called sequentially.\n\t    */\n\t    Twig.async.forEach = function forEachAsync(arr, callback) {\n\t        var arg_index = 0;\n\t        var callbacks = {};\n\t        var promise = new Twig.Promise(function(resolve, reject) {\n\t            callbacks = {\n\t                resolve: resolve,\n\t                reject: reject\n\t            };\n\t        });\n\n\t        function fail(err) {\n\t            callbacks.reject(err);\n\t        }\n\n\t        function next(value) {\n\t            if (!Twig.isPromise(value))\n\t                return iterate();\n\n\t            value.then(next, fail);\n\t        }\n\n\t        function iterate() {\n\t            var index = arg_index++;\n\n\t            if (index == arr.length) {\n\t                callbacks.resolve();\n\t                return;\n\t            }\n\n\t            next(callback(arr[index], index));\n\t        }\n\n\t        iterate();\n\n\t        return promise;\n\t    };\n\n\t    return Twig;\n\n\t};\n\n\n/***/ },\n/* 27 */\n/***/ function(module, exports) {\n\n\t// ## twig.exports.js\n\t//\n\t// This file provides extension points and other hooks into the twig functionality.\n\n\tmodule.exports = function (Twig) {\n\t    \"use strict\";\n\t    Twig.exports = {\n\t        VERSION: Twig.VERSION\n\t    };\n\n\t    /**\n\t     * Create and compile a twig.js template.\n\t     *\n\t     * @param {Object} param Paramteres for creating a Twig template.\n\t     *\n\t     * @return {Twig.Template} A Twig template ready for rendering.\n\t     */\n\t    Twig.exports.twig = function twig(params) {\n\t        'use strict';\n\t        var id = params.id,\n\t            options = {\n\t                strict_variables: params.strict_variables || false,\n\t                // TODO: turn autoscape on in the next major version\n\t                autoescape: params.autoescape != null && params.autoescape || false,\n\t                allowInlineIncludes: params.allowInlineIncludes || false,\n\t                rethrow: params.rethrow || false,\n\t                namespaces: params.namespaces\n\t            };\n\n\t        if (Twig.cache && id) {\n\t            Twig.validateId(id);\n\t        }\n\n\t        if (params.debug !== undefined) {\n\t            Twig.debug = params.debug;\n\t        }\n\t        if (params.trace !== undefined) {\n\t            Twig.trace = params.trace;\n\t        }\n\n\t        if (params.data !== undefined) {\n\t            return Twig.Templates.parsers.twig({\n\t                data: params.data,\n\t                path: params.hasOwnProperty('path') ? params.path : undefined,\n\t                module: params.module,\n\t                id:   id,\n\t                options: options\n\t            });\n\n\t        } else if (params.ref !== undefined) {\n\t            if (params.id !== undefined) {\n\t                throw new Twig.Error(\"Both ref and id cannot be set on a twig.js template.\");\n\t            }\n\t            return Twig.Templates.load(params.ref);\n\t        \n\t        } else if (params.method !== undefined) {\n\t            if (!Twig.Templates.isRegisteredLoader(params.method)) {\n\t                throw new Twig.Error('Loader for \"' + params.method + '\" is not defined.');\n\t            }\n\t            return Twig.Templates.loadRemote(params.name || params.href || params.path || id || undefined, {\n\t                id: id,\n\t                method: params.method,\n\t                parser: params.parser || 'twig',\n\t                base: params.base,\n\t                module: params.module,\n\t                precompiled: params.precompiled,\n\t                async: params.async,\n\t                options: options\n\n\t            }, params.load, params.error);\n\n\t        } else if (params.href !== undefined) {\n\t            return Twig.Templates.loadRemote(params.href, {\n\t                id: id,\n\t                method: 'ajax',\n\t                parser: params.parser || 'twig',\n\t                base: params.base,\n\t                module: params.module,\n\t                precompiled: params.precompiled,\n\t                async: params.async,\n\t                options: options\n\n\t            }, params.load, params.error);\n\n\t        } else if (params.path !== undefined) {\n\t            return Twig.Templates.loadRemote(params.path, {\n\t                id: id,\n\t                method: 'fs',\n\t                parser: params.parser || 'twig',\n\t                base: params.base,\n\t                module: params.module,\n\t                precompiled: params.precompiled,\n\t                async: params.async,\n\t                options: options\n\n\t            }, params.load, params.error);\n\t        }\n\t    };\n\n\t    // Extend Twig with a new filter.\n\t    Twig.exports.extendFilter = function(filter, definition) {\n\t        Twig.filter.extend(filter, definition);\n\t    };\n\n\t    // Extend Twig with a new function.\n\t    Twig.exports.extendFunction = function(fn, definition) {\n\t        Twig._function.extend(fn, definition);\n\t    };\n\n\t    // Extend Twig with a new test.\n\t    Twig.exports.extendTest = function(test, definition) {\n\t        Twig.test.extend(test, definition);\n\t    };\n\n\t    // Extend Twig with a new definition.\n\t    Twig.exports.extendTag = function(definition) {\n\t        Twig.logic.extend(definition);\n\t    };\n\n\t    // Provide an environment for extending Twig core.\n\t    // Calls fn with the internal Twig object.\n\t    Twig.exports.extend = function(fn) {\n\t        fn(Twig);\n\t    };\n\n\n\t    /**\n\t     * Provide an extension for use with express 2.\n\t     *\n\t     * @param {string} markup The template markup.\n\t     * @param {array} options The express options.\n\t     *\n\t     * @return {string} The rendered template.\n\t     */\n\t    Twig.exports.compile = function(markup, options) {\n\t        var id = options.filename,\n\t            path = options.filename,\n\t            template;\n\n\t        // Try to load the template from the cache\n\t        template = new Twig.Template({\n\t            data: markup,\n\t            path: path,\n\t            id: id,\n\t            options: options.settings['twig options']\n\t        }); // Twig.Templates.load(id) ||\n\n\t        return function(context) {\n\t            return template.render(context);\n\t        };\n\t    };\n\n\t    /**\n\t     * Provide an extension for use with express 3.\n\t     *\n\t     * @param {string} path The location of the template file on disk.\n\t     * @param {Object|Function} The options or callback.\n\t     * @param {Function} fn callback.\n\t     * \n\t     * @throws Twig.Error\n\t     */\n\t    Twig.exports.renderFile = function(path, options, fn) {\n\t        // handle callback in options\n\t        if (typeof options === 'function') {\n\t            fn = options;\n\t            options = {};\n\t        }\n\n\t        options = options || {};\n\n\t        var settings = options.settings || {};\n\n\t        var params = {\n\t            path: path,\n\t            base: settings.views,\n\t            load: function(template) {\n\t                // render and return template as a simple string, see https://github.com/twigjs/twig.js/pull/348 for more information\n\t                fn(null, '' + template.render(options));\n\t            }\n\t        };\n\n\t        // mixin any options provided to the express app.\n\t        var view_options = settings['twig options'];\n\n\t        if (view_options) {\n\t            for (var option in view_options) {\n\t                if (view_options.hasOwnProperty(option)) {\n\t                    params[option] = view_options[option];\n\t                }\n\t            }\n\t        }\n\n\t        Twig.exports.twig(params);\n\t    };\n\n\t    // Express 3 handler\n\t    Twig.exports.__express = Twig.exports.renderFile;\n\n\t    /**\n\t     * Shoud Twig.js cache templates.\n\t     * Disable during development to see changes to templates without\n\t     * reloading, and disable in production to improve performance.\n\t     *\n\t     * @param {boolean} cache\n\t     */\n\t    Twig.exports.cache = function(cache) {\n\t        Twig.cache = cache;\n\t    };\n\n\t    //We need to export the path module so we can effectively test it\n\t    Twig.exports.path = Twig.path;\n\n\t    //Export our filters.\n\t    //Resolves #307\n\t    Twig.exports.filters = Twig.filters;\n\n\t    return Twig;\n\t};\n\n\n/***/ }\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// ./~/twig/twig.js","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// fs (ignored)\n// module id = 5\n// module chunks = 0","'use strict';\nmodule.exports = require('./lib/index');\n\n\n\n// WEBPACK FOOTER //\n// ./~/shortid/index.js","'use strict';\n\nvar randomByte = require('./random/random-byte');\n\nfunction encode(lookup, number) {\n    var loopCounter = 0;\n    var done;\n\n    var str = '';\n\n    while (!done) {\n        str = str + lookup( ( (number >> (4 * loopCounter)) & 0x0f ) | randomByte() );\n        done = number < (Math.pow(16, loopCounter + 1 ) );\n        loopCounter++;\n    }\n    return str;\n}\n\nmodule.exports = encode;\n\n\n\n// WEBPACK FOOTER //\n// ./~/shortid/lib/encode.js","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\n} catch(e) {\n\t// This works if the window reference is available\n\tif(typeof window === \"object\")\n\t\tg = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n\n\n// WEBPACK FOOTER //\n// (webpack)/buildin/global.js","module.exports = function(module) {\n\tif(!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif(!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n\n\n\n// WEBPACK FOOTER //\n// (webpack)/buildin/module.js","module.exports =  function(stage){\n \n\t'use strict';\n  \n        var regListenOn = /^on(.*)$/;\n   \n       /**\n         *      Events  \n         *\n         *      @class Notification\n         *      @module library\n         *      @param {Object} settings Object to pass to `settingToListen` method\n         *      @param {Object} context  to apply `settingToListen` \n         *\n         *      @example\n         *\n         *      \n         */\n\t const Notification = class Notification  {\n\t\t\n\t\tconstructor(settings, context){\n\t\t\tthis.events = {};\n                \tthis.garbageEvent = {};\n                \tif (settings) {\n                        \tthis.settingsToListen(settings, context);\n                \t}\n\t\t}\n\n\t\t/**\n         \t *\n         \t *      @method listen \n         \t *\n         \t */\n\t\tlisten (context, eventName, callback){\n\t\t\tvar event = arguments[1];\n                \tvar ContextClosure = this;\n                \tif (! this.events[eventName]) {\n                        \tthis.events[eventName] = [];\n                        \tthis.garbageEvent[eventName] = [];\n                \t}\n                \tif (typeof callback === 'function') {\n                        \tthis.garbageEvent[eventName].push(callback);\n                        \tthis.events[eventName].push(function(args) {\n                                \tcallback.apply(context, args);\n                        \t});\n                \t}\n                \treturn function() {\n                        \tArray.prototype.unshift.call(arguments, event);\n                        \treturn ContextClosure.fire.apply(ContextClosure, arguments);\n                \t};\n\t\t}\n\n\t\t/**\n         \t *\n         \t *      @method clearNotifications \n         \t *\n         \t */\n        \tclearNotifications (eventName) {\n                \tif (eventName){\n                        \tif (this.events[eventName]) {\n                                \twhile (this.events[eventName].length > 0) {\n                                        \tthis.events[eventName].pop();\n                                        \tthis.garbageEvent[eventName].pop();\n                                \t}\n                                \tdelete this.events[eventName];\n                                \tdelete this.garbageEvent[eventName];\n                        \t}\n                \t}else{\n                        \tdelete this.events ;\n                        \tdelete this.garbageEvent ;\n                        \tthis.events = {};\n                        \tthis.garbageEvent = {};\n                \t}\n        \t}\n\n\t\t/**\n         \t *\n         \t *      @method fire \n         \t *\n         \t */\n        \tfire (eventName) {\n                \tvar ret = true;\n                \tif (this.events[eventName]) {\n                        \tvar args = Array.prototype.slice.call(arguments, 1);\n                        \tfor (var i = 0; i < this.events[eventName].length; i++) {\n                                \ttry {\n                                        \tret = this.events[eventName][i](args);\n                                        \tif (ret) {\n                                                \tbreak;\n                                        \t}\n                                \t} catch (e) {\n\t\t\t\t\t\tconsole.log(e)\n                                        \tthrow new Error(e);\n                                \t}\n                        \t}\n                \t}\n                \treturn ret;\n        \t}\n\n        \t/**\n         \t *\n         \t *      @method settingsToListen \n         \t *\n         \t */\n        \tsettingsToListen (localSettings, context) {\n                \tfor (var i in localSettings) {\n                        \tvar res = regListenOn.exec(i);\n                        \tif (!res){\n                                \tcontinue;\n\t\t\t\t}\n                        \tthis.listen(context || this, res[0], localSettings[i]);\n                \t}\n        \t}\n\n        \tunListen (eventName, callback){\n\t\t\tif ( this.events[eventName] ){\n\t\t\t\tif (callback){\n                        \t\tfor (var i=0 ; i < this.garbageEvent[eventName].length ; i++){\n                                \t\tif ( this.garbageEvent[eventName][i] === callback ){\n\t\t\t\t\t\t\tthis.events[eventName].splice(i, 1);\n\t\t\t\t\t\t\tthis.garbageEvent[eventName].splice(i, 1);\n                                \t\t}\n                        \t\t}\n\t\t\t\t}else{\n\t\t\t\t\treturn this.clearNotifications(eventName);\t\n\t\t\t\t}\n                \t}else{\n\t\t\t\treturn this.clearNotifications();\t\n\t\t\t}\n        \t}\n\t}\n\n        stage.notificationsCenter = {\n                notification:Notification,\n                create: function(settings, context) {\n                        return new Notification(settings, context);\n                }\n        };\n\n\treturn Notification ;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/notificationsCenter.es6","module.exports = function (){\n\n\t'use strict';\n\n\tvar version = \"0.0.1\";\n\n\t// Traf indexOf IE8 \n\tvar arrayProto = Array.prototype;\n\n\tvar indexOf = function(){\n\t\tif (arrayProto.indexOf){\n\t\t\treturn ;\t\t\n\t\t}\n\t\tarrayProto.indexOf =  function( value, startIndex){\n\t\t\tvar index = ( startIndex ) === null ? 0 : (startIndex < 0 ? Math.max(0, this.length + startIndex) : startIndex);\n\t\t\tfor (var i = index; i < this.length; i++) {\n\t\t\t\tif (i in this && this[i] === value){\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn -1;\n\t\t};\n\t}();\n\n\tvar typeOf = function(value){\n\t\tvar t = typeof value;\n\t\tif (t === 'object'){\n\t\t\tif (value === null ) {return \"object\";}\n\t\t\tif (value instanceof Array ||\n\t\t\t\t(!(value instanceof Object) &&\n           \t\t\t\t(Object.prototype.toString.call((value)) === '[object Array]') ||\n           \t\t\t\ttypeof value.length === 'number' &&\n           \t\t\t\ttypeof value.splice !== 'undefined' &&\n           \t\t\t\ttypeof value.propertyIsEnumerable !== 'undefined' &&\n           \t\t\t\t!value.propertyIsEnumerable('splice')\n          \t\t\t)){\n\t\t\t\treturn \"array\";\n\t\t\t}\n\t\t\tif (!(value instanceof Object) &&\n          \t\t\t(Object.prototype.toString.call((value)) === '[object Function]' ||\n          \t\t\t\ttypeof value.call !== 'undefined' &&\n          \t\t\t\ttypeof value.propertyIsEnumerable !== 'undefined' &&\n          \t\t\t\t!value.propertyIsEnumerable('call'))\n\t\t\t) {\n        \t\t\treturn 'function';\n      \t\t\t}\n\t\t\tif (value.nodeType === 1 ){\n\t\t\t\treturn \"element\";\n\t\t\t}\n\t\t\tif (value.nodeType === 9){\n\t\t\t\treturn \"document\";\n\t\t\t}\n\t\t\tif (value === window){\n\t\t\t\treturn \"window\";\n\t\t\t}\n\t\t\tif (value instanceof Date){\n\t\t\t\treturn \"date\";\n\t\t\t}\n\t\t\tif (value.callee){\n\t\t\t\treturn \"arguments\";\n\t\t\t}\n\t\t\tif (value instanceof SyntaxError){\n\t\t\t\treturn \"SyntaxError\";\n\t\t\t}\n\t\t\tif (value instanceof Error){\n\t\t\t\treturn \"Error\";\n\t\t\t}\n\t\t} else {\n\t\t\tif (t === 'function' && typeof value.call === 'undefined') {\n    \t\t\t\treturn 'object';\n\t\t\t}\n\t\t}\n  \t\treturn t;\n\t};\n\n\tvar getBrowser = function(){\n\t\tif (navigator.userAgent.indexOf('MSIE') > -1){\n\t\t\treturn \"MSIE\";\n\t\t}\n\t\tif (navigator.userAgent.indexOf('Firefox') > -1){\n\t\t\treturn \"Firefox\";\n\t\t}\n\t\tif (navigator.userAgent.indexOf('Chrome') > -1){\n\t\t\treturn \"Chrome\";\n\t\t}\n\t\tif (navigator.userAgent.indexOf('Safari') > -1){\n\t\t\treturn \"Safari\";\n\t\t}\n\t\tif (navigator.userAgent.indexOf('Opera') > -1){\n\t\t\treturn \"Opera\";\n\t\t}\n\t\tif (navigator.userAgent.indexOf('Iceweasel') > -1){\n\t\t\treturn \"Firefox\";\n\t\t}\n\t\treturn \"undefined\";\n\t}();\n\n\tvar getBrowserVersion = function(){\n\n\t\tif (/MSIE (\\d+\\.\\d+);/.test(navigator.userAgent)){\n\t\t\treturn parseInt(RegExp.$1, 10);\n\t\t}\n\t\tif (/Firefox[\\/\\s](\\d+\\.\\d+)/.test(navigator.userAgent)){\n\t\t\treturn parseInt(RegExp.$1, 10);\n\t\t}\n\n\t\tif (/Chrome[\\/\\s](\\d+\\.\\d+)/.test(navigator.userAgent)){\n\t\t//if (/Chrome[\\/\\s](\\d+\\.\\d+\\.?\\d+)/.test(navigator.userAgent))\n\t\t\treturn parseInt(RegExp.$1,10);\n\t\t}\n\n\t\tif (/Safari[\\/\\s](\\d+\\.\\d+)/.test(navigator.userAgent)){\n\t\t\tif (/Version[\\/\\s](\\d+\\.\\d+)/.test(navigator.userAgent)){\n\t\t\t\treturn parseInt(RegExp.$1,10);\n\t\t\t}\n\t\t}\n\n\t\tif (/Opera[\\/\\s](\\d+\\.\\d+)/.test(navigator.userAgent)){\n\t\t\tif (/Version[\\/\\s](\\d+\\.\\d+)/.test(navigator.userAgent)){\n\t\t\t\treturn parseInt(RegExp.$1,10);\n\t\t\t}\n\t\t}\n\n\t\tif (/Iceweasel[\\/\\s](\\d+\\.\\d+)/.test(navigator.userAgent)){\n\t\t\treturn parseInt(RegExp.$1, 10);\n\t\t}\n\n\t\treturn \"undefined\"; \n\t}();\n\n\tvar useragent = navigator.userAgent.toLowerCase();\n\n\t/**\n\t *\tstage class   \n\t *\tThe class is a **`stage client side `** .\n\t *\t@class stage\n\t *\t@constructor\n\t *\t@module library\n\t *\t\n\t */\n\tvar Stage = class Stage  {\n\n\t\tconstructor(){\n\t\t\tthis.version = version; \n\t\t\tthis.typeOf = typeOf ;\n\t\t\tthis.extend = jQuery.extend ;\n\t\t\tthis.crypto = {};\n\t\t\tthis.modules = {};\n\t\t\tthis.media = {};\n\t\t\tthis.structs ={} ;\n\t\t\tthis.controllers = {};\n\t\t\tthis.browser = {\n\t\t\t\tnavigator:getBrowser,\n\t\t\t\tversion:getBrowserVersion,\n\t\t\t\tIe:/msie/.test( useragent ) && !/opera/.test( useragent ),\n\t\t\t\tGecko:navigator.userAgent.indexOf('Gecko') > -1 && navigator.userAgent.indexOf('KHTML') === -1,\n\t\t\t\tWebkit:/webkit/.test( useragent ),\n\t\t\t\tOpera:Object.prototype.toString.call(window.opera) === '[object Opera]',\n\t\t\t\tplatform:navigator.userAgent.match(/ip(?:ad|od|hone)/) ? 'ios' : (navigator.userAgent.match(/(?:webos|android)/) || navigator.platform.toLowerCase().match(/mac|win|linux/) || ['other'])[0]\n\t\t\t};\n\t\t}\n\n\t\tregister (name, closure){\n\t\t\tif (typeof closure === \"function\") {\n\t\t\t\t// exec closure \n\t\t\t\tvar register = closure(this, name);\n\t\t\t} else {\n\t\t\t\tvar register = closure;\n\t\t\t}\n\t\t\treturn this[name] = register;\n\t\t}\n\n\t\tregisterModule (name, closure){\n\t\t\treturn this.register.call(this.modules, name, closure);\n\t\t}\n\n\t\tregisterController (name, closure){\n\t\t\treturn this.register.call(this.controllers, name, closure);\n\t\t}\n\n\t\tbasename (path) {\n\t\t\treturn path.replace(/\\\\/g,'/').replace( /.*\\//, '' );\n\t\t}\n\n\t\tdirname (path) {\n\t\t\treturn path.replace(/\\\\/g,'/').replace(/\\/[^\\/]*$/, '');\n\t\t}\n\n\t};\n\treturn  new Stage();\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/stage.es6","/*\n *\n *\n *\n *\n *\n *\n *\n */\n\n\nmodule.exports =  function(stage){\n\n\t// private property\n\tvar _keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n\n\t// public method for encoding\n\tvar encode64 = function (input) {\n\t\tvar output = \"\";\n\t\tvar chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n\t\tvar i = 0;\n\n\t\tinput = _utf8_encode(input);\n\n\t\twhile (i < input.length) {\n\n\t\t\tchr1 = input.charCodeAt(i++);\n\t\t\tchr2 = input.charCodeAt(i++);\n\t\t\tchr3 = input.charCodeAt(i++);\n\n\t\t\tenc1 = chr1 >> 2;\n\t\t\tenc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n\t\t\tenc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n\t\t\tenc4 = chr3 & 63;\n\n\t\t\tif (isNaN(chr2)) {\n        \t\t\tenc3 = enc4 = 64;\n\t\t\t} else if (isNaN(chr3)) {\n        \t\t\tenc4 = 64;\n\t\t\t}\n\n\t\t\toutput = output +\n\t\t\t_keyStr.charAt(enc1) + _keyStr.charAt(enc2) +\n\t\t\t_keyStr.charAt(enc3) + _keyStr.charAt(enc4);\n\n\t\t}\n\t\treturn output;\n\t};\n\n    \t// public method for decoding\n\tvar decode64 = function (input) {\n        \t var output = \"\";\n        \t var chr1, chr2, chr3;\n        \t var enc1, enc2, enc3, enc4;\n        \t var i = 0;\n\n        \t input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n\n        \t while (i < input.length) {\n\n            \t\t enc1 = _keyStr.indexOf(input.charAt(i++));\n            \t\t enc2 = _keyStr.indexOf(input.charAt(i++));\n            \t\t enc3 = _keyStr.indexOf(input.charAt(i++));\n            \t\t enc4 = _keyStr.indexOf(input.charAt(i++));\n\n            \t\t chr1 = (enc1 << 2) | (enc2 >> 4);\n            \t\t chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n            \t\t chr3 = ((enc3 & 3) << 6) | enc4;\n\n            \t\t output = output + String.fromCharCode(chr1);\n\n            \t\t if (enc3 != 64) {\n                \t\t output = output + String.fromCharCode(chr2);\n            \t\t }\n            \t\t if (enc4 != 64) {\n                \t\t output = output + String.fromCharCode(chr3);\n            \t\t }\n\n        \t }\n\n        \t if (i != input.length) {\n\t\t\t throw new Error (\"BASE64_BROKEN : There were invalid base64 characters in the input text.\\n\" +\n\t              \t\t\t\"Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\\n\" +\n\t              \t\t\t\"Expect errors in decoding.\");\n        \t }\n\n        \t output = _utf8_decode(output);\n\n        \t return output;\n\n    \t };\n\n\t\n\tvar decode =  function(input, arrayBuffer) {\n\t\t//get last chars to see if are valid\n\t\tvar lkey1 = _keyStr.indexOf(input.charAt(input.length-1));\t\t \n\t\tvar lkey2 = _keyStr.indexOf(input.charAt(input.length-2));\t\t \n\n\t\tvar bytes = (input.length/4) * 3;\n\t\tif (lkey1 == 64) bytes--; //padding chars, so skip\n\t\tif (lkey2 == 64) bytes--; //padding chars, so skip\n\n\t\tvar uarray;\n\t\tvar chr1, chr2, chr3;\n\t\tvar enc1, enc2, enc3, enc4;\n\t\tvar i = 0;\n\t\tvar j = 0;\n\n\t\tif (arrayBuffer)\n\t\t\tuarray = new Uint8Array(arrayBuffer);\n\t\telse\n\t\t\tuarray = new Uint8Array(bytes);\n\n\t\tinput = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n\n\t\tfor (i=0; i<bytes; i+=3) {\t\n\t\t\t//get the 3 octects in 4 ascii chars\n\t\t\tenc1 = _keyStr.indexOf(input.charAt(j++));\n\t\t\tenc2 = _keyStr.indexOf(input.charAt(j++));\n\t\t\tenc3 = _keyStr.indexOf(input.charAt(j++));\n\t\t\tenc4 = _keyStr.indexOf(input.charAt(j++));\n\n\t\t\tchr1 = (enc1 << 2) | (enc2 >> 4);\n\t\t\tchr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n\t\t\tchr3 = ((enc3 & 3) << 6) | enc4;\n\n\t\t\tuarray[i] = chr1;\t\t\t\n\t\t\tif (enc3 != 64) uarray[i+1] = chr2;\n\t\t\tif (enc4 != 64) uarray[i+2] = chr3;\n\t\t}\n\t\treturn uarray;\t\n\t}\n\n\n\n\n    \t // private method for UTF-8 encoding\n\tvar _utf8_encode = function (string) {\n        \tstring = string.replace(/\\r\\n/g,\"\\n\");\n        \tvar utftext = \"\";\n\n        \tfor (var n = 0; n < string.length; n++) {\n\n            \t\tvar c = string.charCodeAt(n);\n\n            \t\tif (c < 128) {\n                \t\tutftext += String.fromCharCode(c);\n            \t\t}\n            \t\telse if((c > 127) && (c < 2048)) {\n                \t\tutftext += String.fromCharCode((c >> 6) | 192);\n                \t\tutftext += String.fromCharCode((c & 63) | 128);\n            \t\t}\n            \t\telse {\n                \t\tutftext += String.fromCharCode((c >> 12) | 224);\n                \t\tutftext += String.fromCharCode(((c >> 6) & 63) | 128);\n                \t\tutftext += String.fromCharCode((c & 63) | 128);\n            \t\t};\n\n        \t};\n        \treturn utftext;\n    \t};\n\n    \t// private method for UTF-8 decoding\n\tvar _utf8_decode = function(utftext){\n        \tvar string = \"\";\n        \tvar i = 0;\n        \tvar c = 0;\n\t\t//var c1 = 0;\n\t\tvar c2 = 0;\n\n        \twhile ( i < utftext.length ) {\n\n            \t\tc = utftext.charCodeAt(i);\n\n            \t\tif (c < 128) {\n                \t\tstring += String.fromCharCode(c);\n                \t\ti++;\n            \t\t}\n            \t\telse if((c > 191) && (c < 224)) {\n                \t\tc2 = utftext.charCodeAt(i+1);\n                \t\tstring += String.fromCharCode(((c & 31) << 6) | (c2 & 63));\n                \t\ti += 2;\n            \t\t}\n            \t\telse {\n                \t\tc2 = utftext.charCodeAt(i+1);\n                \t\tvar c3 = utftext.charCodeAt(i+2);\n                \t\tstring += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\n                \t\ti += 3;\n            \t\t}\n\n        \t}\n        \treturn string;\n    \t};\n\n\n\t/* will return a  Uint8Array type */\n\tvar decodeArrayBuffer =  function(input) {\n\t\tvar bytes = (input.length/4) * 3;\n\t\tvar ab = new ArrayBuffer(bytes);\n\t\tdecode(input, ab);\n\t\treturn ab;\n\t};\n\n\n\tstage.crypto.base64 =  {\n\t\tdecodeArrayBuffer:decodeArrayBuffer,\n\t\tencode:encode64,\n\t\tdecode:decode64\n\t};\n\n\treturn stage.crypto.base64 ;\n};\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/crypto/base64.js","/*\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\n\nmodule.exports =  function(stage){\n\n\t/*\n \t * Configurable variables. You may need to tweak these to be compatible with\n \t * the server-side, but the defaults work in most cases.\n \t */\n\tvar hexcase = 0;   /* hex output format. 0 - lowercase; 1 - uppercase        */\n\tvar b64pad  = \"\";  /* base-64 pad character. \"=\" for strict RFC compliance   */\n\n\t/*\n \t * Perform a simple self-test to see if the VM is working\n \t */\n\tvar md5_vm_test = function()\n\t{\n  \t\treturn rstr2hex(\"abc\").toLowerCase() === \"900150983cd24fb0d6963f7d28e17f72\";\n\t};\n\n\t/*\n \t* Calculate the MD5 of a raw string\n \t*/\n\tvar rstr_md5 = function(s)\n\t{\n  \t\treturn binl2rstr(binl_md5(rstr2binl(s), s.length * 8));\n\t};\n\n\t/*\n \t* Calculate the HMAC-MD5, of a key and some data (raw strings)\n \t*/\n\tvar rstr_hmac_md5 = function (key, data)\n\t{\n  \t\tvar bkey = rstr2binl(key);\n  \t\tif(bkey.length > 16) {\n\t\t\tbkey = binl_md5(bkey, key.length * 8);\n\t\t}\n  \t\tvar ipad = Array(16), opad = Array(16);\n  \t\tfor(var i = 0; i < 16; i++)\n  \t\t{\n    \t\t\tipad[i] = bkey[i] ^ 0x36363636;\n    \t\t\topad[i] = bkey[i] ^ 0x5C5C5C5C;\n  \t\t}\n\n  \t\tvar hash = binl_md5(ipad.concat(rstr2binl(data)), 512 + data.length * 8);\n  \t\treturn binl2rstr(binl_md5(opad.concat(hash), 512 + 128));\n\t};\n\n\t/*\n \t * Convert a raw string to a hex string\n \t */\n\tvar rstr2hex = function(input)\n\t{\n  \t\t//try { hexcase } catch(e) { hexcase=0; }\n  \t\tvar hex_tab = hexcase ? \"0123456789ABCDEF\" : \"0123456789abcdef\";\n  \t\tvar output = \"\";\n  \t\tvar x;\n  \t\tfor(var i = 0; i < input.length; i++)\n  \t\t{\n    \t\t\tx = input.charCodeAt(i);\n    \t\t\toutput += hex_tab.charAt((x >>> 4) & 0x0F) + hex_tab.charAt( x  & 0x0F);\n  \t\t}\n  \t\treturn output;\n\t};\n\n\t/*\n \t * Convert a raw string to a base-64 string\n \t */\n\tvar rstr2b64 = function(input)\n\t{\n  \t\t//try { b64pad } catch(e) { b64pad=''; }\n  \t\tvar tab = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n  \t\tvar output = \"\";\n  \t\tvar len = input.length;\n  \t\tfor(var i = 0; i < len; i += 3)\n  \t\t{\n    \t\t\tvar triplet = (input.charCodeAt(i) << 16)\n                \t\t| (i + 1 < len ? input.charCodeAt(i+1) << 8 : 0)\n                \t\t| (i + 2 < len ? input.charCodeAt(i+2)      : 0);\n    \t\t\tfor(var j = 0; j < 4; j++)\n    \t\t\t{\n      \t\t\t\tif(i * 8 + j * 6 > input.length * 8){\n\t\t\t\t\toutput += b64pad;\n      \t\t\t\t}else {\n\t\t\t\t\toutput += tab.charAt((triplet >>> 6*(3-j)) & 0x3F);\n\t\t\t\t}\n    \t\t\t}\n  \t\t}\n  \t\treturn output;\n\t};\n\n\t/*\n \t * Convert a raw string to an arbitrary string encoding\n \t */\n\tvar rstr2any = function (input, encoding)\n\t{\n  \t\tvar divisor = encoding.length;\n  \t\tvar i, j, q, x, quotient;\n\n  \t\t/* Convert to an array of 16-bit big-endian values, forming the dividend */\n  \t\tvar dividend = Array(Math.ceil(input.length / 2));\n  \t\tfor(i = 0; i < dividend.length; i++)\n  \t\t{\n    \t\t\tdividend[i] = (input.charCodeAt(i * 2) << 8) | input.charCodeAt(i * 2 + 1);\n  \t\t}\n\n  \t\t/*\n   \t\t * Repeatedly perform a long division. The binary array forms the dividend,\n   \t\t * the length of the encoding is the divisor. Once computed, the quotient\n   \t\t * forms the dividend for the next step. All remainders are stored for later\n   \t\t * use.\n   \t\t */\n  \t\tvar full_length = Math.ceil(input.length * 8 /\n                                (Math.log(encoding.length) / Math.log(2)));\n  \t\tvar remainders = Array(full_length);\n  \t\tfor(j = 0; j < full_length; j++)\n  \t\t{\n    \t\t\tquotient = Array();\n    \t\t\tx = 0;\n    \t\t\tfor(i = 0; i < dividend.length; i++)\n    \t\t\t{\n      \t\t\t\tx = (x << 16) + dividend[i];\n      \t\t\t\tq = Math.floor(x / divisor);\n      \t\t\t\tx -= q * divisor;\n      \t\t\t\tif(quotient.length > 0 || q > 0){\n        \t\t\t\tquotient[quotient.length] = q;\n\t\t\t\t}\n    \t\t\t}\n    \t\t\tremainders[j] = x;\n    \t\t\tdividend = quotient;\n  \t\t}\n\n  \t\t/* Convert the remainders to the output string */\n  \t\tvar output = \"\";\n  \t\tfor(i = remainders.length - 1; i >= 0; i--){\n    \t\t\toutput += encoding.charAt(remainders[i]);\n\t\t}\n  \t\treturn output;\n\t};\n\t\n\t/*\n \t * Encode a string as utf-8.\n \t * For efficiency, this assumes the input is valid utf-16.\n \t */\n\tvar str2rstr_utf8 = function (input)\n\t{\n  \t\tvar output = \"\";\n  \t\tvar i = -1;\n  \t\tvar x, y;\n\n  \t\twhile(++i < input.length)\n  \t\t{\n    \t\t\t/* Decode utf-16 surrogate pairs */\n    \t\t\tx = input.charCodeAt(i);\n    \t\t\ty = i + 1 < input.length ? input.charCodeAt(i + 1) : 0;\n    \t\t\tif(0xD800 <= x && x <= 0xDBFF && 0xDC00 <= y && y <= 0xDFFF)\n    \t\t\t{\n      \t\t\t\tx = 0x10000 + ((x & 0x03FF) << 10) + (y & 0x03FF);\n      \t\t\t\ti++;\n    \t\t\t}\n\n    \t\t\t/* Encode output as utf-8 */\n    \t\t\tif(x <= 0x7F){\n      \t\t\t\toutput += String.fromCharCode(x);\n    \t\t\t}else if(x <= 0x7FF){\n      \t\t\t\toutput += String.fromCharCode(0xC0 | ((x >>> 6 ) & 0x1F),\n                                    \t\t0x80 | ( x         & 0x3F));\n    \t\t\t}else if(x <= 0xFFFF){\n      \t\t\t\toutput += String.fromCharCode(0xE0 | ((x >>> 12) & 0x0F),\n                                    \t\t0x80 | ((x >>> 6 ) & 0x3F),\n                                    \t\t0x80 | ( x         & 0x3F));\n    \t\t\t}else if(x <= 0x1FFFFF){\n      \t\t\t\toutput += String.fromCharCode(0xF0 | ((x >>> 18) & 0x07),\n                                    \t\t0x80 | ((x >>> 12) & 0x3F),\n                                    \t\t0x80 | ((x >>> 6 ) & 0x3F),\n                                    \t\t0x80 | ( x         & 0x3F));\n\t\t\t}\n  \t\t}\n  \t\treturn output;\n\t};\n\n\t/*\n \t * Encode a string as utf-16\n \t */\n\tvar str2rstr_utf16le = function (input)\n\t{\n  \t\tvar output = \"\";\n  \t\tfor(var i = 0; i < input.length; i++){\n    \t\t\toutput += String.fromCharCode( input.charCodeAt(i)        & 0xFF,\n                                  \t(input.charCodeAt(i) >>> 8) & 0xFF);\n\t\t}\n  \t\treturn output;\n\t};\n\n\tvar str2rstr_utf16be = function (input)\n\t{\n  \t\tvar output = \"\";\n  \t\tfor(var i = 0; i < input.length; i++){\n    \t\t\toutput += String.fromCharCode((input.charCodeAt(i) >>> 8) & 0xFF,\n                                   \tinput.charCodeAt(i)        & 0xFF);\n\t\t}\n  \t\treturn output;\n\t};\n\n\t/*\n \t * Convert a raw string to an array of little-endian words\n \t * Characters >255 have their high-byte silently ignored.\n \t */\n\tvar rstr2binl = function (input)\n\t{\n  \t\tvar output = Array(input.length >> 2);\n  \t\tfor(var i = 0; i < output.length; i++){\n    \t\t\toutput[i] = 0;\n\t\t}\n  \t\tfor(var i = 0; i < input.length * 8; i += 8){\n    \t\t\toutput[i>>5] |= (input.charCodeAt(i / 8) & 0xFF) << (i%32);\n\t\t}\n  \t\treturn output;\n\t};\n\n\t/*\n \t * Convert an array of little-endian words to a string\n \t */\n\tvar binl2rstr = function (input)\n\t{\n  \t\tvar output = \"\";\n  \t\tfor(var i = 0; i < input.length * 32; i += 8){\n    \t\t\toutput += String.fromCharCode((input[i>>5] >>> (i % 32)) & 0xFF);\n\t\t}\n  \t\treturn output;\n\t};\n\n\t/*\n \t * Calculate the MD5 of an array of little-endian words, and a bit length.\n \t */\n\tvar binl_md5 = function (x, len)\n\t{\n  \t\t/* append padding */\n  \t\tx[len >> 5] |= 0x80 << ((len) % 32);\n  \t\tx[(((len + 64) >>> 9) << 4) + 14] = len;\n\n  \t\tvar a =  1732584193;\n  \t\tvar b = -271733879;\n  \t\tvar c = -1732584194;\n  \t\tvar d =  271733878;\n\n  \t\tfor(var i = 0; i < x.length; i += 16)\n  \t\t{\n    \t\t\tvar olda = a;\n    \t\t\tvar oldb = b;\n    \t\t\tvar oldc = c;\n    \t\t\tvar oldd = d;\n\n    \t\t\ta = md5_ff(a, b, c, d, x[i+ 0], 7 , -680876936);\n    \t\t\td = md5_ff(d, a, b, c, x[i+ 1], 12, -389564586);\n    \t\t\tc = md5_ff(c, d, a, b, x[i+ 2], 17,  606105819);\n    \t\t\tb = md5_ff(b, c, d, a, x[i+ 3], 22, -1044525330);\n    \t\t\ta = md5_ff(a, b, c, d, x[i+ 4], 7 , -176418897);\n    \t\t\td = md5_ff(d, a, b, c, x[i+ 5], 12,  1200080426);\n    \t\t\tc = md5_ff(c, d, a, b, x[i+ 6], 17, -1473231341);\n    \t\t\tb = md5_ff(b, c, d, a, x[i+ 7], 22, -45705983);\n    \t\t\ta = md5_ff(a, b, c, d, x[i+ 8], 7 ,  1770035416);\n    \t\t\td = md5_ff(d, a, b, c, x[i+ 9], 12, -1958414417);\n    \t\t\tc = md5_ff(c, d, a, b, x[i+10], 17, -42063);\n    \t\t\tb = md5_ff(b, c, d, a, x[i+11], 22, -1990404162);\n    \t\t\ta = md5_ff(a, b, c, d, x[i+12], 7 ,  1804603682);\n    \t\t\td = md5_ff(d, a, b, c, x[i+13], 12, -40341101);\n    \t\t\tc = md5_ff(c, d, a, b, x[i+14], 17, -1502002290);\n    \t\t\tb = md5_ff(b, c, d, a, x[i+15], 22,  1236535329);\n\n    \t\t\ta = md5_gg(a, b, c, d, x[i+ 1], 5 , -165796510);\n    \t\t\td = md5_gg(d, a, b, c, x[i+ 6], 9 , -1069501632);\n    \t\t\tc = md5_gg(c, d, a, b, x[i+11], 14,  643717713);\n    \t\t\tb = md5_gg(b, c, d, a, x[i+ 0], 20, -373897302);\n    \t\t\ta = md5_gg(a, b, c, d, x[i+ 5], 5 , -701558691);\n    \t\t\td = md5_gg(d, a, b, c, x[i+10], 9 ,  38016083);\n    \t\t\tc = md5_gg(c, d, a, b, x[i+15], 14, -660478335);\n    \t\t\tb = md5_gg(b, c, d, a, x[i+ 4], 20, -405537848);\n    \t\t\ta = md5_gg(a, b, c, d, x[i+ 9], 5 ,  568446438);\n    \t\t\td = md5_gg(d, a, b, c, x[i+14], 9 , -1019803690);\n    \t\t\tc = md5_gg(c, d, a, b, x[i+ 3], 14, -187363961);\n    \t\t\tb = md5_gg(b, c, d, a, x[i+ 8], 20,  1163531501);\n    \t\t\ta = md5_gg(a, b, c, d, x[i+13], 5 , -1444681467);\n    \t\t\td = md5_gg(d, a, b, c, x[i+ 2], 9 , -51403784);\n    \t\t\tc = md5_gg(c, d, a, b, x[i+ 7], 14,  1735328473);\n    \t\t\tb = md5_gg(b, c, d, a, x[i+12], 20, -1926607734);\n\n    \t\t\ta = md5_hh(a, b, c, d, x[i+ 5], 4 , -378558);\n    \t\t\td = md5_hh(d, a, b, c, x[i+ 8], 11, -2022574463);\n    \t\t\tc = md5_hh(c, d, a, b, x[i+11], 16,  1839030562);\n    \t\t\tb = md5_hh(b, c, d, a, x[i+14], 23, -35309556);\n    \t\t\ta = md5_hh(a, b, c, d, x[i+ 1], 4 , -1530992060);\n    \t\t\td = md5_hh(d, a, b, c, x[i+ 4], 11,  1272893353);\n    \t\t\tc = md5_hh(c, d, a, b, x[i+ 7], 16, -155497632);\n    \t\t\tb = md5_hh(b, c, d, a, x[i+10], 23, -1094730640);\n    \t\t\ta = md5_hh(a, b, c, d, x[i+13], 4 ,  681279174);\n    \t\t\td = md5_hh(d, a, b, c, x[i+ 0], 11, -358537222);\n    \t\t\tc = md5_hh(c, d, a, b, x[i+ 3], 16, -722521979);\n    \t\t\tb = md5_hh(b, c, d, a, x[i+ 6], 23,  76029189);\n    \t\t\ta = md5_hh(a, b, c, d, x[i+ 9], 4 , -640364487);\n    \t\t\td = md5_hh(d, a, b, c, x[i+12], 11, -421815835);\n    \t\t\tc = md5_hh(c, d, a, b, x[i+15], 16,  530742520);\n    \t\t\tb = md5_hh(b, c, d, a, x[i+ 2], 23, -995338651);\n\n    \t\t\ta = md5_ii(a, b, c, d, x[i+ 0], 6 , -198630844);\n    \t\t\td = md5_ii(d, a, b, c, x[i+ 7], 10,  1126891415);\n    \t\t\tc = md5_ii(c, d, a, b, x[i+14], 15, -1416354905);\n    \t\t\tb = md5_ii(b, c, d, a, x[i+ 5], 21, -57434055);\n    \t\t\ta = md5_ii(a, b, c, d, x[i+12], 6 ,  1700485571);\n    \t\t\td = md5_ii(d, a, b, c, x[i+ 3], 10, -1894986606);\n    \t\t\tc = md5_ii(c, d, a, b, x[i+10], 15, -1051523);\n    \t\t\tb = md5_ii(b, c, d, a, x[i+ 1], 21, -2054922799);\n    \t\t\ta = md5_ii(a, b, c, d, x[i+ 8], 6 ,  1873313359);\n    \t\t\td = md5_ii(d, a, b, c, x[i+15], 10, -30611744);\n    \t\t\tc = md5_ii(c, d, a, b, x[i+ 6], 15, -1560198380);\n    \t\t\tb = md5_ii(b, c, d, a, x[i+13], 21,  1309151649);\n    \t\t\ta = md5_ii(a, b, c, d, x[i+ 4], 6 , -145523070);\n    \t\t\td = md5_ii(d, a, b, c, x[i+11], 10, -1120210379);\n    \t\t\tc = md5_ii(c, d, a, b, x[i+ 2], 15,  718787259);\n    \t\t\tb = md5_ii(b, c, d, a, x[i+ 9], 21, -343485551);\n\n    \t\t\ta = safe_add(a, olda);\n    \t\t\tb = safe_add(b, oldb);\n    \t\t\tc = safe_add(c, oldc);\n    \t\t\td = safe_add(d, oldd);\n  \t\t}\n  \t\treturn Array(a, b, c, d);\n\t};\n\n\t/*\n \t * These functions implement the four basic operations the algorithm uses.\n \t */\n\tvar md5_cmn = function (q, a, b, x, s, t)\n\t{\n  \t\treturn safe_add(bit_rol(safe_add(safe_add(a, q), safe_add(x, t)), s),b);\n\t};\n\tvar md5_ff = function (a, b, c, d, x, s, t)\n\t{\n  \t\treturn md5_cmn((b & c) | ((~b) & d), a, b, x, s, t);\n\t};\n\tvar md5_gg = function (a, b, c, d, x, s, t)\n\t{\n  \t\treturn md5_cmn((b & d) | (c & (~d)), a, b, x, s, t);\n\t};\n\tvar md5_hh = function (a, b, c, d, x, s, t)\n\t{\n  \t\treturn md5_cmn(b ^ c ^ d, a, b, x, s, t);\n\t};\n\tvar md5_ii = function (a, b, c, d, x, s, t)\n\t{\n  \t\treturn md5_cmn(c ^ (b | (~d)), a, b, x, s, t);\n\t};\n\n\t/*\n \t * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n \t * to work around bugs in some JS interpreters.\n \t */\n\tvar safe_add = function (x, y)\n\t{\n  \t\tvar lsw = (x & 0xFFFF) + (y & 0xFFFF);\n  \t\tvar msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n  \t\treturn (msw << 16) | (lsw & 0xFFFF);\n\t};\n\n\t/*\n \t * Bitwise rotate a 32-bit number to the left.\n \t */\n\tvar bit_rol = function (num, cnt)\n\t{\n  \t\treturn (num << cnt) | (num >>> (32 - cnt));\n\t};\n\n\tstage.crypto.md5 = {\n \t\thex_md5:function(s){ \n\t\t\treturn rstr2hex(rstr_md5(str2rstr_utf8(s)));\n\t\t},\n\t\thex_md5_noUTF8:function(s){ \n\t\t\treturn rstr2hex(rstr_md5(s)); \n\t\t},\n\t\tstr_md5:function(s){ \n\t\t\treturn rstr_md5(str2rstr_utf8(s)); \n\t\t},\n \t\tb64_md5:function(s){ \n\t\t\treturn rstr2b64(rstr_md5(str2rstr_utf8(s)));\n\t\t},\n \t\tany_md5:function(s, e){\n\t\t\treturn rstr2any(rstr_md5(str2rstr_utf8(s)), e); \n\t\t},\n \t\thex_hmac_md5:function(k, d){\n\t\t\treturn rstr2hex(rstr_hmac_md5(str2rstr_utf8(k), str2rstr_utf8(d))); \n\t\t},\n\t\tstr_hmac_md5:function(k, d){\n\t\t\treturn rstr_hmac_md5(str2rstr_utf8(k), str2rstr_utf8(d)); \n\t\t},\n \t\tb64_hmac_md5:function(k, d){\n\t\t\treturn rstr2b64(rstr_hmac_md5(str2rstr_utf8(k), str2rstr_utf8(d)));\n\t\t},\n \t\tany_hmac_md5:function(k, d, e){ \n\t\t\treturn rstr2any(rstr_hmac_md5(str2rstr_utf8(k), str2rstr_utf8(d)), e);\n\t\t}\n\t};\n\treturn stage.crypto.md5 ; \n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/crypto/md5.js","module.exports =  function(stage){\n\n\tvar keyWord= {\n\t\trealm:true,\n\t\tqop:true,\n\t\tcharset:true,\n\t\talgorithm:true,\n\t\tnonce:true\n\t};\n\n\tvar reg =/^([^=]+)=(.+)$/;\n\tvar parserAuthenticate = function(str){\n\t\tvar ret = str.replace(/\"/g,\"\");\n\t\tret = ret.replace(/Digest /g,\"\");\n\t\tvar head = ret.split(\",\");\n\t\tvar obj = {};\n\t\tfor (var i= 0 ; i < head.length ; i++){\n\t\t\tvar res = reg.exec(head[i]);\n\t\t\tif (res && res[1]){\n\t\t\t\tobj[res[1]] = res[2];\n\t\t\t}\n\t\t}\t\n\t\treturn obj;\n\t};\n\n\tvar MD5 = stage.crypto.md5.hex_md5_noUTF8 ;\n\tvar BASE64 = stage.crypto.base64.encode ;\n\tvar DBASE64 = stage.crypto.base64.decode;\n\n\tvar generateA1 = function(username, realm, password, nonce, cnonce){\n\t\tvar A1 = null ;\n\t\tif (cnonce){\n\t\t\tA1 = username + \":\" + realm + \":\" + password + \":\" + nonce+ \":\" + cnonce ;\n\t\t}else{\n\t\t\tA1 = username + \":\" + realm + \":\" + password ;//+ \":\" + nonce ;\n\t\t}\n\t\treturn MD5(A1); \n\t};\n\n\tvar generateA2 = function(method, uri, entity_body, qop){\n\t\tvar A2 = \"\";\n\t\tif( ! qop || qop ===  \"auth\"){\n\t\t\tA2 = method +\":\" + uri ;\n\t\t} else if(qop === \"auth-int\"){\n\t\t\tif( entity_body ){\n\t\t\t\tvar entity = MD5(entity_body);\n\t\t\t\tA2 = method + \":\" + uri + \":\" + entity ; \n\t\t\t}else{\n\t\t\t\tA2 = method + \":\" + uri + \":\" + \"d41d8cd98f00b204e9800998ecf8427e\" ;\n\t\t\t}\n\t\t}\n\t\treturn MD5(A2);\n\t};\n\n\tvar responseDigest = function(A1, nonce, noncecount, cnonce, qop, A2){\n\t\tvar res = \"\";\n\t\tif(qop === \"auth\" || qop === \"auth-int\"){\n\t\t\tres = A1 + \":\" + nonce +\":\" + noncecount +\":\" + cnonce +\":\" + qop + \":\" + A2 ;\n\t\t}else{\n\t\t\tres = A1 + \":\" + nonce + \":\" + A2 ;\n\t\t}\n\t\treturn MD5(res);\n\t};\n\n\t/*\n \t *\n \t */\n\tconst digestMd5 = class digestMd5  {\n\n\t\tconstructor(url, method, headers, body){\n\t\t\tthis.method = method ;\n\t\t\tthis.entity_body = body;\n\t\t\tthis.url = url;\n\t\t\tthis.uri = this.url.requestUri;\n\t\t\tthis.protocol = this.url.protocol.replace(\":\",\"\");\n\t\t\tthis.host = this.url.host;\n\t\t\tswitch (typeof headers){\n\t\t\t\tcase \"object\":\n\t\t\t\t\tthis.parseChallenge(headers);\n \t\t\t\t\tbreak;\t\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error(\"digetMD5 bad format header\");\n\t\t\t}\t\n\t\t}\n\n\t\tparseChallenge (headers){\n\t\t\t//console.log(headers)\n\t\t\tvar parsing = {};\n\t\t\tswitch (typeof headers){\n\t\t\t\tcase \"string\" : \n\t\t\t\t\t//TODO\n\t\t\t\t\tthrow new Error(\"digetMD5 bad format challenge\");\n\t\t\t\tcase \"object\" :\n\t\t\t\t\tfor (var ele in headers ){\n\t\t\t\t\t\tswitch (ele){\n\t\t\t\t\t\t\tcase \"challenge\":\n\t\t\t\t\t\t\t\tif (typeof headers.challenge === \"string\"){\n\t\t\t\t\t\t\t\t\ttry{\n\t\t\t\t\t\t\t\t\t\tthis.challengeB64 = DBASE64(headers.challenge);\n\t\t\t\t\t\t\t\t\t}catch(e){\n\t\t\t\t\t\t\t\t\t\tthis.challengeB64 = headers.challenge ;\n\t\t\t\t\t\t\t\t\t\t//throw new Error(\"DIGEST MD5 ERROR DECODE BAS64\")\t\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tparsing[ele] = headers[ele];\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\t\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error(\"digetMD5 bad format challenge\");\n\t\t\t}\n\t\t\tvar challenge = stage.extend(parserAuthenticate(this.challengeB64), parsing );\n\t\t\t//var challenge = parserAuthenticate(this.challengeB64);\n\t\t\t//console.log(challenge)\n\t\t\tfor (var name in challenge){\n\t\t\t\tif (name in keyWord){\n\t\t\t\t\tthis[name] = challenge[name];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"digestMd5 parser challenge header name dropped: \"+name);\n\t\t\t\t}\t\n\t\t\t}\n\t\t}\n\n\t\tgenerateAuthorization (username, password){\n\n\t\t\tvar line = 'Digest username=\"'+username+'\"';\n\t\t\tif (! this.realm){\n\t\t\t\tthis.realm = username+\"@\"+this.url.host ;\n\t\t\t}\n\n\t\t\tvar res ={\n\t\t\t\tnonce:'\"'+this.nonce+'\"',\n\t\t\t\trealm:'\"'+this.realm+'\"',\n\t\t\t\tresponse:null\n\t\t\t};\n\n\t\t\tthis[\"digest-uri\"] = this.protocol+\"/\"+this.host;\n\t\t\t//this[\"digest-uri\"] = '\"'+this.protocol+\"/\"+this.uri+'\"';\n\n\t\t\tres[\"digest-uri\"] = '\"'+this[\"digest-uri\"]+'\"';\n\n\t\t\t/*if (this.charset){\n\t\t\t  res[\"charset\"]=this.charset;\n\t\t\t  }*/\n\n\t\t\tif (this.qop){\n\t\t\t\tthis.cnonce = BASE64( Math.floor( (Math.random()*100000000)) .toString() ) ;\n\t\t\t\tres[\"cnonce\"]='\"'+this.cnonce+'\"';\n\t\t\t\tres[\"qop\"]=this.qop;\n\t\t\t}\n\t\t\tif (this.opaque){\n\t\t\t\tres[\"opaque\"]=this.opaque;\n\t\t\t}\n\n\t\t\tthis.nc = \"00000001\";\n\t\t\tres[\"nc\"]=this.nc;\n\n\t\t\tthis.A1 = generateA1(username, this.realm, password/*, this.nonce, this.cnonce*/);\t\n\t\t\tthis.A2 = generateA2(this.method, this[\"digest-uri\"], this.entity_body, this.qop);\n\n\n\t\t\tres.response = responseDigest(this.A1, this.nonce, this.nc, this.cnonce, this.qop, this.A2);\t\n\t\t\t// generate Authorization \n\n\t\t\tfor (var ele in res){\n\t\t\t\tline+=\",\"+ele+\"=\"+res[ele];\n\t\t\t}\n\t\t\t//console.log(line)\n\t\t\tvar toSend = BASE64(line);\n\t\t\treturn toSend;\n\n\t\t}\n\t};\n\n\tstage.io.authentication.Digest = digestMd5 ;\n\tstage.io.authentication.mechanisms.Digest = digestMd5 ;\n\treturn digestMd5;\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/io/authentication/mechanisms/digest-md5/digestMd5.es6","module.exports =  function(stage){\n\t\n\tvar reg =/^([^=]+)=(.+)$/;\n\tvar parserSasl = function(str){\n\t\t//console.log(str)\n\t\tvar ret = str.replace(/\"/g,\"\");\n\t\tvar head = ret.split(\",\");\n\t\tvar obj = {}\n\t\tfor (var i= 0 ; i < head.length ; i++){\n\t\t\tvar res = reg.exec(head[i])\n\t\t\tif (res && res[1])\n\t\t\t\tobj[res[1]] = res[2]\n\t\t}\t\n\t\treturn obj;\n\t};\n\n\n\tvar Sasl = class Sasl  {\n\n\t\tconstructor(url, method, headers, body){\n\t\t\tthis.method = method;\n\t\t\tthis.url = url;\n\t\t\tthis.name = \"sasl\" ;\n\t\t\tthis.headers = parserSasl(headers);\n\t\t\tthis.body = body ;\n\t\t\tthis.mechanisms = this.headers.mechanisms;\n\t\t\tvar mechanism = this.getBestMechanism(this.mechanisms);\n\t\t\tif (mechanism){\n\t\t\t\tdelete this.headers.mechanisms\n\t\t\t\t\tthis.bestMechanism = mechanism.name\n\t\t\t\t\tthis.mechanism = new mechanism.Class(this.url, this.method, this.headers, this.body);\t\n\t\t\t}else{\n\t\t\t\tthrow new Error(\"SALS mechanism not found\")\t\n\t\t\t}\t\t\n\t\t}\n\n\t\tgetBestMechanism (mechanism){\n\t\t\tvar goodM = null;\n\t\t\tswitch (typeof mechanism){\n\t\t\t\tcase \"object\" :\n\t\t\t\t\tfor (var i= 0 ; i < mechanism.length ; i++){\n\t\t\t\t\t\tif (mechanism[i] in stage.io.authentication.mechanisms){\n\t\t\t\t\t\t\tvar goodM = stage.io.authentication.mechanisms[mechanism[i]];\n\t\t\t\t\t\t\tvar name = mechanism[i];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"string\" :\n\t\t\t\t\t//console.log(mechanism.split(\" \"));\n\t\t\t\t\treturn this.getBestMechanism( mechanism.split(\" \") );\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error(\"FORMAT SALS mechanism bad format\")\n\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tname:name,\n\t\t\t\t\tClass:goodM\n\t\t\t}\n\t\t};\n\n\t\tgetAuthorization (user, password){\n\t\t\treturn  'SASL mechanism=\"'+this.bestMechanism+'\",'+this.mechanism.generateAuthorization(user, password);\n\t\t}\n\n\t};\n\n\tstage.io.authentication.SASL = Sasl ;\n\t\n\treturn Sasl ;\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/io/authentication/sasl/sasl.es6","module.exports =  function(stage){\n\n\t'use strict';\n\n\tvar isSameOrigin = function (url) {\n\t\tvar loc = window.location;\n\t\tvar a = urlToOject(url);\n\t\treturn a.hostname === loc.hostname &&\n\t\t\ta.port == loc.port &&\n\t\t\ta.protocol === loc.protocol;\n\t};\n\n\tvar isSecure = function(url){\n\t\tvar loc = window.location;\n\t\tvar a = urlToOject(url);\n\t\treturn a.protocol === \"https:\" ;\n\t};\n\n\t/*\n \t *\n \t *   CLASS AUTHENTICATE\n \t *\n \t *\n \t *\tEVENTS\n \t *\n \t *\tonError: \n \t *\n \t *\n \t *\tonSuccess:\n \t *\n \t *\n \t */\n\tvar authenticate = class authenticate  {\n\n\t\tconstructor(url, request, settings){\n\t\t\tthis.url = typeof url === \"object\" ? url : stage.io.urlToOject(url) ;\n\t\t\tthis.crossDomain = ! stage.io.isSameOrigin(url);\n\t\t\t// notification center\n\t\t\tthis.notificationCenter = stage.notificationsCenter.create(settings);\n\t\t\t// get header WWW-Authenticate\n\t\t\tvar authenticate = request[\"WWW-Authenticate\"].split(\" \") ;\n\t\t\t//  get type authentification\n\t\t\tvar authType = Array.prototype.shift.call(authenticate);\n\t\t\tvar headers = request[\"WWW-Authenticate\"].replace(authType+\" \",\"\");\n\t\t\t\t//console.log(authType);\n\t\t\t\tthis.method = \"POST\";\n\t\t\tvar body = request.body;\n\n\t\t\t// intance of authentication\n\t\t\tvar auth = this.getAuthenticationType(authType);\n\t\t\tthis.authentication = new auth(this.url,  this.method, headers, body );\n\t\t\t\tthis.ajax = false;\n\t\t\tif (settings.ajax){\n\t\t\t\tthis.ajax = true;\n\t\t\t}\n\t\t}\n\t\t\n\t\tgetAuthenticationType (type){\n\t\t\tif (type in stage.io.authentication){\n\t\t\t\treturn stage.io.authentication[type];\n\t\t\t}else{\n\t\t\t\tthrow new Error(\"SSE client can't negociate : \"+type );\n\t\t\t}\n\t\t}\n\n\t\tregister (username, password){\n\t\t\tvar line = this.authentication.getAuthorization(username, password);\n\t\t\tthis.notificationCenter.fire(\"onRegister\", this, line);\t\n\t\t\tif (this.ajax){\n\t\t\t\t$.ajax({\n\t\t\t\t\ttype:\t\tthis.method,\n\t\t\t\t\turl:\t\tthis.url.href,\n\t\t\t\t\tcache:\t\tfalse,\n\t\t\t\t\tcrossDomain:\tthis.crossDomain ? false : true ,\n\t\t\t\t\terror:(obj, type, message) => {\n\t\t\t\t\t\tthis.notificationCenter.fire(\"onError\", obj, type, message);\t\n\t\t\t\t\t},\n\t\t\t\t\tbeforeSend:(xhr) => {\n\t\t\t\t\t\txhr.setRequestHeader(\"Authorization\", line );\n\t\t\t\t\t\t//if (this.crossDomain)\n\t\t\t\t\t\t//xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n\t\t\t\t\t},\n\t\t\t\t\tsuccess:(data, state, obj) => {\n\t\t\t\t\t\tthis.notificationCenter.fire(\"onSuccess\", data, state, obj);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\t\t\n\t\t}\n\t};\n\n\t/**\n \t * We need our custom method because encodeURIComponent is too aggressive and doesn't follow\n \t * http://www.ietf.org/rfc/rfc3986.txt with regards to the character set (pchar) allowed in path\n \t * segments:\n \t *    segment       = *pchar\n \t *    pchar         = unreserved / pct-encoded / sub-delims / \":\" / \"@\"\n \t *    pct-encoded   = \"%\" HEXDIG HEXDIG\n \t *    unreserved    = ALPHA / DIGIT / \"-\" / \".\" / \"_\" / \"~\"\n \t *    sub-delims    = \"!\" / \"$\" / \"&\" / \"'\" / \"(\" / \")\"\n \t *                     / \"*\" / \"+\" / \",\" / \";\" / \"=\"\n \t */\n\t var encodeUriSegment = function(val) {\n  \t\treturn encodeUriQuery(val, true).\n             \t\treplace(/%26/gi, '&').\n             \t\treplace(/%3D/gi, '=').\n             \t\treplace(/%2B/gi, '+');\n\t};\n\n\n\t/**\n \t * This method is intended for encoding *key* or *value* parts of query component. We need a custom\n \t * method because encodeURIComponent is too aggressive and encodes stuff that doesn't have to be\n \t * encoded per http://tools.ietf.org/html/rfc3986:\n \t *    query       = *( pchar / \"/\" / \"?\" )\n \t *    pchar         = unreserved / pct-encoded / sub-delims / \":\" / \"@\"\n \t *    unreserved    = ALPHA / DIGIT / \"-\" / \".\" / \"_\" / \"~\"\n \t *    pct-encoded   = \"%\" HEXDIG HEXDIG\n \t *    sub-delims    = \"!\" / \"$\" / \"&\" / \"'\" / \"(\" / \")\"\n \t *                     / \"*\" / \"+\" / \",\" / \";\" / \"=\"\n \t */\n\t var encodeUriQuery = function (val, pctEncodeSpaces) {\n  \t\treturn encodeURIComponent(val).\n             \t\treplace(/%40/gi, '@').\n             \t\treplace(/%3A/gi, ':').\n             \t\treplace(/%24/g, '$').\n             \t\treplace(/%2C/gi, ',').\n             \t\treplace(/%3B/gi, ';').\n             \t\treplace(/%20/g, (pctEncodeSpaces ? '%20' : '+'));\n\t};\n\n\t\n\tvar regSearch = /^\\?(.*)/ ;\n\tvar parseKeyValue = function(search){\n\t\t//console.log(search)\n\t\tvar test = regSearch.exec(search) ;\n\t\t//console.log(test)\n\t\tif (test){\n\t\t\tsearch = test[1];\t\n\t\t}\n\t\tvar obj = {}, key_value, key;\n\t\tvar tab = (search|| \"\").split('&') ;\n\t\tif (tab.length){\n\t\t\tfor (var i = 0 ; i< tab.length;i++){\n\t\t\t\ttry {\n\t\t\t\t\tvar key_value = tab[i].replace(/\\+/g,'%20').split('=');\n\t\t\t\t\tvar key = decodeURIComponent(key_value[0]); \n\t\t\t\t\t//console.log(key_value)\n\t\t\t\t\t//console.log(key)\n\t\t\t\t\tif ( key ){\n\t\t\t\t\t\tvar val =  decodeURIComponent(key_value[1]);\n\t\t\t\t\t\tif ( ! Object.prototype.hasOwnProperty.call(obj, key) ){\n\t\t\t\t\t\t\tobj[key] = val;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tswitch (stage.typeOf(obj[key])){\n\t\t\t\t\t\t\t\tcase \"array\":\n\t\t\t\t\t\t\t\t\tobj[key].push(val);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\tobj[key] = [obj[key],val];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}catch (e){\n\t\t\t\t\t//invalid\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn obj;\n\t};\n\n\tvar toKeyValue = function(obj){\n\t\tvar parts = [];\n\t\tfor (var ele in obj){\n\t\t\tswitch(stage.typeOf(obj[ele])){\n\t\t\t\tcase \"array\":\n\t\t\t\t\tfor (var i = 0 ; i<obj[ele].length ;i++){\n\t\t\t\t\t\tparts.push(encodeUriQuery(ele, true) + (obj[ele][i] === true ? '' : '=' + encodeUriQuery(obj[ele][i], true)));\t\n\t\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\tcase \"string\":\n\t\t\t\tcase \"boolean\":\n\t\t\t\t\tparts.push( encodeUriQuery(ele, true) + (obj[ele] === true ? '' : '=' + encodeUriQuery(obj[ele], true)) );\n\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tcontinue ;\n\t\t\t}\n\t\t}\n\t\treturn parts.length ? parts.join('&') : '';\n  \t};\n\n\n\tvar getHeaderJSON = function(xhr) {\n  \t\tvar json = xhr.getResponseHeader(\"X-Json\"); \n  \t\tif (json) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(json);\n\t\t\t}catch(e){\n\t\t\t\treturn json;\n\t\t\t}\n  \t\t}\n\t\treturn null;\n\t};\n\n\tvar urlToOject = function(url){\n\t\tvar result = {};\n\n\t\tvar anchor = document.createElement('a');\n\t\tanchor.href = url;\n\n\t\tvar keys = 'protocol hostname host pathname port search hash href'.split(' ');\n\t\tfor (var keyIndex in keys) {\n\t\t\tvar currentKey = keys[keyIndex]; \n\t\t\tresult[currentKey] = anchor[currentKey];\n\t\t}\n\n\t\tresult.toString = function() { return anchor.href; };\n\t\tresult.requestUri = result.pathname + result.search;  \n\n\t\tresult.basename = result.pathname.replace(/\\\\/g,'/').replace( /.*\\//, '' ) ;\n\t\tresult.dirname = result.pathname.replace(/\\\\/g,'/').replace(/\\/[^\\/]*$/, '') ;\n\n\t\treturn result;\t\n\t};\n\n\tvar nativeWebSocket = window.WebSocket  ? true : false ; \n\n\tvar transportCore = class transportCore  extends stage.notificationsCenter.notification {\n\n\t\tconstructor(url, settings, context){\n\t\t\tsuper(settings, context );\t\n\t\t\t// Manage Url\n\t\t\tif (url){\n\t\t\t\tthis.url = urlToOject(url);\n\t\t\t\tthis.crossDomain = !isSameOrigin(url);\n\t\t\t\tthis.error = null;\n\t\t\t}else{\n\t\t\t\tthis.fire(\"onError\", new Error(\"Transport URL not defined\") );\n\t\t\t}\t\n\t\t}\n\t};\n\t\n\tstage.io = {\n\t\tnativeWebSocket: nativeWebSocket,\n\t\turlToOject: urlToOject,\n\t\tparseKeyValue:parseKeyValue,\n\t\ttoKeyValue:toKeyValue,\n\t\tencodeUriSegment:encodeUriSegment,\n\t\tencodeUriQuery:encodeUriQuery,\n\t\tgetHeaderJSON: getHeaderJSON,\n\t\tisSameOrigin: isSameOrigin,\n\t\tisSecure:isSecure,\n\t\tprotocols: {},\n\t\tauthentication: {\n\t\t\tauthenticate: authenticate,\n\t\t\tmechanisms: {}\n\t\t},\n\t\ttransport: transportCore,\n\t\ttransports: {}\n\t};\n\n\treturn stage.io ;\n};\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/io/io.es6","module.exports =  function(stage){\n\n\t'use strict';\n\n\tvar clientsCapabilities = function(){\n\t\tvar tab = [];\n\t\tvar ws =  stage.io.nativeWebSocket  ? tab.push(\"websocket\") : null ;\n\t\tvar poll = stage.io.poll ? tab.push(\"poll\") : null ;\n\t\tvar lpoll =stage.io.longPoll ?  tab.push(\"long-polling\") : null ; \n\t\tvar jsonp = stage.io.jsonp ?  tab.push(\"callback-polling\") : null ; \n\t\treturn tab ;\n\t}();\n\n\tvar onHandshakeResponse = function(message){\n\t\tif ( message.successful ){\n\t\t\ttry {\n\t\t\t\tvar socket  = this.getBestConnection(message.supportedConnectionTypes);\n\t\t\t\tthis.socket = new socket.Class( socket.url );\n\t\t\t\tthis.socket.onmessage = (message) => {\n\t\t\t\t\tif (message.data ){\n\t\t\t\t\t\tthis.onMessage(message.data);\n\t\t\t\t\t}\n\t\t\t\t}; \n\t\t\t\tthis.socket.onopen = () => {\n\t\t\t\t\tthis.socket.send( this.connect(message) );\t\n\t\t\t\t\tthis.notificationCenter.fire(\"onHandshake\", message, this.socket);\n\t\t\t\t};\n\t\t\t\tthis.socket.onerror = this.notificationCenter.listen(this, \"onError\");\n\t\t\t\tthis.socket.onclose = (err) => {\n\t\t\t\t\tdelete this.socket ;\n\t\t\t\t\tthis.notificationCenter.fire(\"onClose\",err );\n\t\t\t\t};\n\t\t\t}catch(e){\n\t\t\t\tthrow new Error (e);\n\t\t\t}\n\t\t}else{\n\t\t\tonError.call(this, message);\n\t\t}\t\n\t};\n\n\tvar reconnect  = function(){\n\t\tthis.reconnect = true;\n\t\tthis.notificationCenter.fire(\"reConnect\", this);\t\n\t};\n\n\tvar onConnectResponse = function(message){\n\t\tif ( message.successful ){\n\t\t\tthis.connected = true;\t\n\t\t\tthis.idconnection = message.clientId ;\n\t\t\tif ( message.advice ){\n\t\t\t\tfor (var ele in message.advice ){\n\t\t\t\t\tswitch(ele){\n\t\t\t\t\t\tcase \"reconnect\" :\n\t\t\t\t\t\t\tif (message.advice[ele] === \"retry\" ){\n\t\t\t\t\t\t\t\tif ( ! this.reconnect ){\n\t\t\t\t\t\t\t\t\tthis.notificationCenter.listen(this,\"onClose\", reconnect);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.notificationCenter.fire(\"onConnect\", message);\n\t\t}else{\n\t\t\tthis.connected = false;\t\n\t\t\tonError.call(this, message);\n\t\t}\n\t};\n\n\tvar onDisconnectResponse = function(message){\n\t\tif ( message.successful ){\n\t\t\tif (this.socket){\n\t\t\t\tthis.socket.close();\n\t\t\t\tthis.socket = null ;\n\t\t\t\tthis.notificationCenter.fire(\"onDisconnect\", message);\n\t\t\t}\n\t\t}else{\n\t\t\tonError.call(this, message);\n\t\t}\n\t};\n\n\tvar onSubscribeResponse = function(message){\n\t\tif ( message.successful ){\n\t\t\tthis.notificationCenter.fire(\"onSubscribe\", message);\n\t\t}else{\n\t\t\tonError.call(this, message);\n\t\t}\n\t};\n\n\tvar onUnsubscribeResponse = function(message){\n\t\tif ( message.successful ){\n\t\t\tthis.notificationCenter.fire(\"onUnsubscribe\", message);\n\t\t}else{\n\t\t\tonError.call(this, message);\n\t\t}\n\t};\n\n\tvar onError = function(message){\n\t\tif (message.error){\n\t\t\ttry{ \n\t\t\t\tswitch (stage.typeOf(message.error)) {\n\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\tvar res = message.error.split(\":\");\n\t\t\t\t\t\tvar code = res[0];\n\t\t\t\t\t\tvar arg = res[1];\n\t\t\t\t\t\tvar mess = res[2];\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\tif (message.error){\n\t\t\t\t\t\t\treturn onError.call(this, message.error);\n\t\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Error\":\n\t\t\t\t\t\tmessage.error = \"500::\"+message.error.message;\n\t\t\t\t\t\treturn onError.call(this, message.error);\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthrow new Error(\"Bad protocole error BAYEUX\");\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\treturn this.notificationCenter.fire(\"onError\", code, arg, mess);\n\t\t\t}catch(e){\n\t\t\t\tthrow new Error(\"Bad protocole error BAYEUX\"+ e);\n\t\t\t}\n\t\t}\n\t};\n\n\t/*\n \t *\tBAYEUX PROTOCOL\n \t *\n \t */\n\tconst bayeux = class bayeux {\n\t\t\n\t\tconstructor(url){\n\t\t\tthis.name = \"bayeux\" ;\t\n\t\t\tthis.notificationCenter = stage.notificationsCenter.create(this.settings, this);\n\t\t\tthis.url = url ; \n\t\t\tthis.socket = null;\n\t\t\tthis.connected = false;\n\t\t\tthis.request = {\n\t\t\t\tversion:\"1.0\"\n\t\t\t};\n\t\t}\n\n\t\tgetBestConnection (supportedConnectionTypes){\n\t\t\tif (this.url.protocol === \"https:\" || this.url.protocol === \"wss:\"){\n\t\t\t\tthis.url.protocol = \"wss:\";\n\t\t\t}else{\n\t\t\t\tthis.url.protocol = \"ws:\";\n\t\t\t}\n\t\t\tthis.socketType = \"WEBSOCKET\";\n\t\t\treturn {\n\t\t\t\tClass: window.WebSocket,\n\t\t\t\turl:this.url.protocol+\"//\"+this.url.host+this.url.requestUri\n\t\t\t};\t\n\t\t}\n\n\t\tbuild (obj){\n\t\t\tvar res = [];\n\t\t\tres.push(obj);\n\t\t\treturn res ;\n\t\t}\n\n\t\thandshake (){\n\t\t\tvar req = JSON.stringify( stage.extend({}, this.request , {\n\t\t\t\tchannel : \"/meta/handshake\",\n\t\t\t    minimumVersion: \"1.0\",\n\t\t\t    supportedConnectionTypes:clientsCapabilities\n\t\t\t}));\n\t\t\treturn this.send(req);\t\n\t\t}\n\n\t\tconnect (message){\n\t\t\treturn JSON.stringify({\n\t\t\t\tchannel: \"/meta/connect\",\n\t\t\t       clientId: message.clientId,\n\t\t\t       connectionType: this.socketType\n\t\t\t});\n\t\t}\n\n\t\tstopReConnect (message){\n\t\t\tthis.notificationCenter.unListen(\"onClose\", reconnect);\n\t\t}\n\n\t\tdisconnect (){\n\t\t\treturn JSON.stringify({\n\t\t\t\tchannel: \"/meta/disconnect\",\n\t\t\t       clientId: this.idconnection,\n\t\t\t});\t\n\t\t}\n\n\t\tsubscribe (name, data){\n\t\t\treturn JSON.stringify({\n\t\t\t\tchannel: \"/meta/subscribe\",\n\t\t\t       clientId: this.idconnection,\n\t\t\t       subscription: \"/service/\"+name,\n\t\t\t       data:data\n\t\t\t});\n\t\t}\n\n\t\tunSubscribe (name, clientId, data){\n\t\t\treturn JSON.stringify({\n\t\t\t\tchannel: \"/meta/unsubscribe\",\n\t\t\t       clientId: clientId,\n\t\t\t       subscription: \"/service/\"+name,\n\t\t\t       data:data\n\t\t\t});\n\t\t}\n\n\t\tsendMessage (service, data, clientId){\n\t\t\treturn JSON.stringify({\n\t\t\t\tchannel: \"/service/\"+service,\n\t\t\t       clientId: clientId,\n\t\t\t       id: new Date().getTime(),\n\t\t\t       data:data\n\t\t\t});\t\n\t\t}\n\n\t\tonMessage (message){\n\t\t\ttry {\n\t\t\t\tif (typeof message === \"string\" ){\n\t\t\t\t\tmessage = JSON.parse(message);\n\t\t\t\t}\n\t\t\t}catch (e){\n\t\t\t\tmessage.error = e ;\n\t\t\t\tonError.call(this, message);\n\t\t\t\treturn ;\n\t\t\t}\n\t\t\tswitch (message.channel){\n\t\t\t\tcase \"/meta/handshake\":\n\t\t\t\t\treturn onHandshakeResponse.call(this, message);\n\t\t\t\tcase \"/meta/connect\":\n\t\t\t\t\treturn onConnectResponse.call(this, message);\n\t\t\t\tcase \"/meta/disconnect\":\n\t\t\t\t\treturn onDisconnectResponse.call(this, message);\n\t\t\t\tcase \"/meta/subscribe\":\n\t\t\t\t\treturn onSubscribeResponse.call(this, message);\n\t\t\t\tcase \"/meta/unsubscribe\":\n\t\t\t\t\treturn onUnsubscribeResponse.call(this, message);\n\t\t\t\tdefault:\n\t\t\t\t\t// /some/channel\n\t\t\t\t\tthis.notificationCenter.fire(\"onMessage\", message);\n\t\t\t}\n\t\t}\n\n\t\tsend (data){\n\t\t\tif ( this.socket ){\n\t\t\t\treturn this.socket.send(data);\t\n\t\t\t}\n\t\t\treturn $.ajax({\n            \t\t\tmethod: 'POST',\n\t\t               cache:false,\n            \t\t       url: this.url.href ,\n\t\t               dataType:\"json\",\n\t\t               contentType:\"application/json\",\n\t\t               data : data,\t\t        \n\t\t\t       success:(data, type, xhr) => {\n\t\t\t\t       this.onMessage(data);\t\t\t\n\t\t\t       },\n            \t\t       error: (obj, type, message) => {\n\t\t\t\t       this.notificationCenter.fire('onError', obj, type, message);\n            \t\t       }\n        \t\t});\n\t\t}\n\t};\n\n\tstage.io.protocols.bayeux = bayeux ;\n\treturn bayeux ;\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/io/protocols/bayeux/bayeux.es6","module.exports =  function(stage){\n\n\t'use strict';\n\n\n\tvar defaultAparser = function(value, block){\n\t\tif ( value ){\n\t\t\treturn value ;\n\t\t}\n\t\treturn null ;\n\t};\n\n\tvar rtpmapParser = function(value, block){\n\t\t //a=rtpmap:<payload type> <encoding name>/<clock rate>[/<encoding parameters>]\n\t\tif ( value ){\n\t\t\tvar obj = {\n\t\t\t\tpayloadType\t\t: null,\n\t\t\t\tencodingName\t\t: null,\n\t\t\t\tclockRate\t\t: null,\n\t\t\t\tencodingParameters\t: null,\n\t\t\t\traw\t\t\t: value\n\t\t\t};\n\t\t\tvar res = value.split(\" \");\n\t\t\tfor (var i = 0 ; i< res.length ; i++){\n\t\t\t\tswitch (i){\n\t\t\t\t\tcase 0 :\n\t\t\t\t\t\tobj.payloadType = res[i] ;\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 1 :\n\t\t\t\t\t\tvar ret = res[i].split(\"/\");\n\t\t\t\t\t\tobj.encodingName = ret[0] ;\n\t\t\t\t\t\tif (ret[1]){\n\t\t\t\t\t\t\tobj.clockRate = ret[1];\t\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (ret[2]){\n\t\t\t\t\t\t\tobj.encodingParameters = ret[2] ;\n\t\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif ( ! ( obj.encodingName in block.rtpmap ) ){\n\t\t\t\tvar index = block.rtpmap.push(obj) ;\n\t\t\t\tblock.rtpmap[\"rtpmap_\"+obj.payloadType] = block.rtpmap[index-1] ;\n\t\t\t}\n\t\t\treturn obj ;\n\t\t}\n\t\treturn null;\n\t};\n\n\tvar candidateParser = function(value, block){\n\t\t/* a=candidate:0 1 UDP 2122252543 169.254.105.57 65488 typ host\t\n\t\t * a=candidate:6glsxoSzDfHGkyMz 1 UDP 2130706431 93.20.94.1 35796 typ host\n\t\t * a=candidate:2 1 UDP 1694498815 192.0.2.3 45664 typ srflx raddr 10.0.1.1 rport 8998\n\t\t * a=candidate:86628240 1 udp 2122260223 192.168.10.234 64435 typ host generation 0 network-id 3\n\t\t * \n\t\t * \n \t\t * \n \t\t *\n\t\t *   candidate-attribute   = \"candidate\" \":\" \n\t\t *\t   foundation SP \n\t\t *\t   component-id SP\n                 *         transport SP\n                 *         priority SP\n                 *         connection-address SP     ;from RFC 4566\n                 *         port         ;port from RFC 4566 SP \n                 *         cand-type     \n                 *          [SP rel-addr]\n                 *          [SP rel-port]\n                 *          *(SP extension-att-name SP\n                 *               extension-att-value)\n                 */               \n\t\tif ( value ){\n\t\t\t\n\t\t\tvar obj = {\n\t\t\t\tfoundation\t\t: null,\n\t\t\t\tcomponentId\t\t: null,\n\t\t\t\ttransport\t\t: null,\n\t\t\t\ttransportExt\t\t: null,\n\t\t\t\tpriority\t\t: null,\n\t\t\t\tconnectionAddress\t: null,\n\t\t\t\tport\t\t\t: null,\n\t\t\t\tcandidateType\t\t: null,\n\t\t\t\tremoteAddr\t\t: null,\n\t\t\t\tremotePort\t\t: null,\n\t\t\t\tgeneration\t\t: null,\n\t\t\t\tnetworkId\t\t: null,\n\t\t\t\traw\t\t\t: value\n\t\t\t};\n\t\t\tvar res = value.split(\" \");\n\t\t\tfor (var i = 0 ; i< res.length ; i++){\n\t\t\t\tswitch (i){\n\t\t\t\t\tcase 0 :\n\t\t\t\t\t\tobj.foundation = res[i] ;\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 1 :\n\t\t\t\t\t\tobj.componentId = res[i] ;\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2 :\n\t\t\t\t\t\tobj.transport = res[i] ;\n\t\t\t\t\t\tvar ret = res[i].split(\"/\");\n\t\t\t\t\t\tobj.transport = ret[0] ;\n\t\t\t\t\t\tif (ret[1]){\n\t\t\t\t\t\t\tobj.transportExt = ret[1];\t\n\t\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 3 :\n\t\t\t\t\t\tobj.priority = res[i] ;\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 4 :\n\t\t\t\t\t\tobj.connectionAddress = res[i] ;\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 5 :\n\t\t\t\t\t\tobj.port = res[i] ;\n\t\t\t\t\tbreak;\n\t\t\t\t\tdefault :\n\t\t\t\t\t\tswitch ( res[i] ){\n\t\t\t\t\t\t\tcase \"typ\" :\n\t\t\t\t\t\t\t\tobj.candidateType = res[i+1] ;\t\n\t\t\t\t\t\t\tbreak ;\n\t\t\t\t\t\t\tcase \"raddr\" :\n\t\t\t\t\t\t\t\tobj.remoteAddr = res[i+1] ;\n\t\t\t\t\t\t\tbreak ;\n\t\t\t\t\t\t\tcase \"rport\" :\n\t\t\t\t\t\t\t\tobj.remotePort = res[i+1] ;\n\t\t\t\t\t\t\tbreak ;\n\t\t\t\t\t\t\tcase \"generation\" :\n\t\t\t\t\t\t\t\tobj.generation = res[i+1] ;\n\t\t\t\t\t\t\tbreak ;\n\t\t\t\t\t\t\tcase \"network-id\" :\n\t\t\t\t\t\t\t\tobj.networkId = res[i+1] ;\n\t\t\t\t\t\t\tbreak ;\n\t\t\t\t\t\t}\n\t\t\t\t\tbreak;\t\n\t\t\t\t}\n\t\t\t}\n\t\t\tblock.candidates.push(obj);\n\t\t\treturn value ;\n\t\t}\n\t\treturn null;\n\t};\n\n\tvar aAttribute = {\n\t\t\"cat\"\t\t: defaultAparser,\n\t\t\"keywds\"\t: defaultAparser,\n\t\t\"tool\"\t\t: defaultAparser,\n\t\t\"ptime\"\t\t: defaultAparser,\n\t\t\"maxptime\"\t: defaultAparser,\n\t\t\"rtpmap\"\t: rtpmapParser,\n\t\t\"orient\"\t: defaultAparser,\n\t\t\"type\"\t\t: defaultAparser,\n\t\t\"charset\"\t: defaultAparser,\n\t\t\"sdplang\"\t: defaultAparser,\n\t\t\"lang\"\t\t: defaultAparser,\n\t\t\"framerate\"\t: defaultAparser,\n\t\t\"quality\"\t: defaultAparser,\n\t\t\"fmtp\"\t\t: defaultAparser,\n\t\t\"candidate\"\t: candidateParser\t\n\t};\n\t\n\tvar aAttributeDirection = {\n\t\t\"recvonly\"\t: defaultAparser,\n\t\t\"sendrecv\"\t: defaultAparser,\n\t\t\"sendonly\"\t: defaultAparser,\n\t\t\"inactive\"\t: defaultAparser\n\t};\n\n\t/*\n \t *\tSDP PROTOCOL\n \t *\n \t */\n\tvar parserSdp  = class parserSdp {\n\t\t\n\t\tconstructor(body){\n\t\t\tif ( ! body ){\n\t\t\t\tthrow new Error(\"SDP parser no data found !! \") ;\n\t\t\t}\n\t\t\t//this.line = body.split(\"\\n\");\n\t\t\t//this.nbLines = this.line.length ;\n\t\t\t//this.size = body.length ;\n\t\t\tthis.raw = body ;\n\t\t\tthis.blocks = [];\n\t\t\tthis.sessionBlock = null;\n\t\t\tthis.audioBlock = null;\n\t\t\tthis.videoBlock = null;\n\t\t\tthis.detectBlocks();\n\t\t\tthis.parseBlocks();\n\t\t}\n\n\t\tdetectBlocks (){\n\t\t\tvar line = this.raw.split(\"\\n\");\n\t\t\tvar nbLines = line.length ;\n\t\t\tvar first = 0 ;\n\t\t\tvar m = null ;\n\t\t\tfor (var i = 0 ; i< nbLines ; i++){\n\t\t\t\tvar res = line[i].split(\"=\");\n\t\t\t\tvar key = res[0].replace(/ |\\n|\\r/g,\"\") ;\n\t\t\t\tvar value = res[1] ;\n\t\t\t\tlet data = null ;\n\t\t\t\tlet size = null ;\n\t\t\t\tlet media = null ;\n\t\t\t\tlet type = null ;\n\t\t\t\tswitch(key){\n\t\t\t\t\tcase \"m\":\n\t\t\t\t\t\tif (first == 0 ){\n\t\t\t\t\t\t\tdata = line.slice(first, i);\n\t\t\t\t\t\t\tsize = data.length ;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tdata = line.slice(first+1, i);\n\t\t\t\t\t\t\tsize = data.length ;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet parseM = this.parseMline(m) ;\n\t\t\t\t\t\tif ( parseM ){\n\t\t\t\t\t\t\tmedia = parseM ;\t\n\t\t\t\t\t\t\ttype = parseM.media ;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tmedia = null ;\n\t\t\t\t\t\t\ttype = \"session\" ;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.blocks.push({\n\t\t\t\t\t\t\ttype\t\t: type,\n\t\t\t\t\t\t\tdirection\t: null,\n\t\t\t\t\t\t\t//start\t\t: first,\n\t\t\t\t\t\t\t//end\t\t: i,\n\t\t\t\t\t\t\tdata\t\t: data,\n\t\t\t\t\t\t\t//size\t\t: size,\n\t\t\t\t\t\t\tmedia\t\t: media,\n\t\t\t\t\t\t\tinformation\t: \"\",\n\t\t\t\t\t\t\tattributes\t: [],\n\t\t\t\t\t\t\tbandwidths\t: [],\n\t\t\t\t\t\t\tcandidates\t: [],\n\t\t\t\t\t\t\tconnection\t: null,\n\t\t\t\t\t\t\tencryption\t: null\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfirst = i ;\n\t\t\t\t\t\tm = value ; \t\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\t\n\t\t\tvar data = line.slice(first+1, nbLines) ;\n\t\t\tvar size = data.length ;\n\t\t\tvar media = null ;\n\t\t\tvar type = null ;\n\t\t\tvar parseM = this.parseMline(m) ;\n\t\t\tif ( parseM ){\n\t\t\t\tmedia = parseM ;\n\t\t\t\ttype = parseM.media ;\t\n\t\t\t}else{\n\t\t\t\tmedia = null ;\n\t\t\t\ttype = \"session\" ;\n\t\t\t}\n\t\t\tthis.blocks.push({\n\t\t\t\ttype\t\t: type,\n\t\t\t\tdirection\t: null,\n\t\t\t\t//start\t\t: first,\n\t\t\t\t//end\t\t: nbLines,\n\t\t\t\tdata\t\t: data,\n\t\t\t\t//size\t\t: size,\n\t\t\t\tmedia\t\t: media,\n\t\t\t\tinformation\t: \"\",\n\t\t\t\tattributes\t: [],\n\t\t\t\tbandwidths\t: [],\n\t\t\t\tcandidates\t: [],\n\t\t\t\tconnection\t: null,\n\t\t\t\tencryption\t: null\n\t\t\t});\n\t\t}\n\n\t\tparseMline (data){\n\t\t\t// RFC https://tools.ietf.org/html/rfc4566#section-5.14\n\t\t\t//=<media> <port>/<number of ports> <proto> <fmt> ...\n\t\t\tif ( data ){\n\t\t\t\tvar obj = {\n\t\t\t\t\tmedia\t: \"\",\n\t\t\t\t\tport\t: \"\",\n\t\t\t\t\tnbPort\t: 0,\n\t\t\t\t\tproto\t: \"\",\n\t\t\t\t\tfmt\t: [],\n\t\t\t\t\traw\t: data\n\t\t\t\t};\n\t\t\t\tvar res = data.split(\" \");\n\t\t\t\tfor (var i = 0 ; i< res.length ; i++){\n\t\t\t\t\tswitch (i){\n\t\t\t\t\t\tcase 0 :\n\t\t\t\t\t\t\tobj.media = res[i] ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 1 :\n\t\t\t\t\t\t\tvar ret = res[i].split(\"/\");\n\t\t\t\t\t\t\tobj.port = ret[0] ;\n\t\t\t\t\t\t\tif (ret[1]){\n\t\t\t\t\t\t\t\tobj.nbPort = ret[1];\t\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tobj.nbPort = 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 2 :\n\t\t\t\t\t\t\tobj.proto = res[i] ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tobj.fmt.push(res[i]);\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn obj ;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tparseAline (data, block){\n\t\t\t//a=<attribute>:<value>\n\t\t\tvar obj = {};\n\t\t\tif (  ! data ){\n\t\t\t\treturn obj ;\n\t\t\t}\n\t\t\tvar res = data.split(\":\");\n\t\t\tvar attribute = res[0].replace(/ |\\n|\\r/g,\"\");\n\t\t\tvar value = res[1] ;\n\t\t\tif (  aAttribute[attribute] ){\n\t\t\t\tobj[attribute] = aAttribute[attribute](value, block);\n\t\t\t}else{\n\t\t\t\tswitch (attribute){\n\t\t\t\t\tcase \"setup\":\n\t\t\t\t\t\tobj[attribute] = value;\t\n\t\t\t\t\t\tblock[\"setup\"] = value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif (  aAttributeDirection[attribute] ){\n\t\t\t\t\t\t\tvar ele = aAttributeDirection[attribute](attribute, block); \n\t\t\t\t\t\t\tobj[attribute] = ele;\t\n\t\t\t\t\t\t\tblock.direction = ele ; \n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tobj[attribute] = value ;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn obj ;\n\t\t}\n\n\t\tparseCline (data){\n\t\t\t//c=<nettype> <addrtype> <connection-address>\n\t\t\tif ( data ){\n\t\t\t\tvar obj = {\n\t\t\t\t\tnettype\t\t: null,\n\t\t\t\t\taddrtype\t: null,\n\t\t\t\t\taddress\t\t: null,\n\t\t\t\t\traw\t\t: data\n\t\t\t\t};\n\t\t\t\tvar res = data.split(\" \");\n\t\t\t\tfor (var i = 0 ; i< res.length ; i++){\n\t\t\t\t\tswitch (i){\n\t\t\t\t\t\tcase 0 :\n\t\t\t\t\t\t\tobj.nettype = res[i] ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 1 :\n\t\t\t\t\t\t\tobj.addrtype = res[i] ;\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 2 :\n\t\t\t\t\t\t\tobj.address = res[i] ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn obj ;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tparseOline (data){\n\t\t\t//o=<username> <sess-id> <sess-version> <nettype> <addrtype> <unicast-address>\n\t\t\tif ( data ){\n\t\t\t\tvar obj = {\n\t\t\t\t\tusername\t\t: null,\n\t\t\t\t\tsessId\t\t\t: null,\n\t\t\t\t\tsessVersion\t\t: null,\n\t\t\t\t\tnettype\t\t\t: null,\n\t\t\t\t\taddrtype\t\t: null,\n\t\t\t\t\tunicastAddr\t\t: null,\n\t\t\t\t\traw\t\t\t: data\n\t\t\t\t};\n\t\t\t\tvar res = data.split(\" \");\n\t\t\t\tfor (var i = 0 ; i< res.length ; i++){\n\t\t\t\t\tswitch (i){\n\t\t\t\t\t\tcase 0 :\n\t\t\t\t\t\t\tobj.username = res[i] ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 1 :\n\t\t\t\t\t\t\tobj.sessId = res[i] ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 2 :\n\t\t\t\t\t\t\tobj.sessVersion = res[i] ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 3 :\n\t\t\t\t\t\t\tobj.nettype = res[i] ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 4 :\n\t\t\t\t\t\t\tobj.addrtype = res[i] ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 5 :\n\t\t\t\t\t\t\tobj.unicastAddr = res[i] ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn obj ;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\t/*\n \t \t *\tTIME DESCRIPTION\n \t \t */\n\t\tparseTline (data){\n\t\t\t//t=<start-time> <stop-time>\n\t\t\tif ( data ){\n\t\t\t\tvar obj = {\n\t\t\t\t\tstart\t\t: null,\n\t\t\t\t\tstop\t\t: null,\n\t\t\t\t\traw\t\t: data\n\t\t\t\t};\n\t\t\t\tvar res = data.split(\" \");\n\t\t\t\tfor (var i = 0 ; i< res.length ; i++){\n\t\t\t\t\tswitch (i){\n\t\t\t\t\t\tcase 0 :\n\t\t\t\t\t\t\tobj.start = res[i] ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 1 :\n\t\t\t\t\t\t\tobj.stop = res[i] ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn obj ;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tparseRline (data){\n\t\t\t//r=<repeat interval> <active duration> <offsets from start-time>\n\t\t\tif ( data ){\n\t\t\t\tvar obj = {\n\t\t\t\t\tinterval\t: null,\n\t\t\t\t\tduration\t: null,\n\t\t\t\t\toffsets\t\t: null,\n\t\t\t\t\traw\t\t: data\n\t\t\t\t};\n\t\t\t\tvar res = data.split(\" \");\n\t\t\t\tfor (var i = 0 ; i< res.length ; i++){\n\t\t\t\t\tswitch (i){\n\t\t\t\t\t\tcase 0 :\n\t\t\t\t\t\t\tobj.interval = res[i] ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 1 :\n\t\t\t\t\t\t\tobj.duration = res[i] ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 2 :\n\t\t\t\t\t\t\tobj.offsets = res[i] ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn obj ;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\t/** BLOCK MEDIA\n \t \t *    Media description, if present\n\t \t *  m=  (media name and transport address)\n\t \t *  i= (media title)\n\t \t *  c= (connection information -- optional if included at\n\t \t *     session level)\n\t \t *  b= (zero or more bandwidth information lines)\n\t \t *  k= (encryption key)\n\t \t *  a= (zero or more media attribute lines)\n\t \t */\n\t\tblockMediaParser ( block ){\n\t\t\tblock[\"rtpmap\"] = [] ;\n\t\t\tfor (var j = 0 ; j < block.data.length ; j++){ \n\t\t\t\tvar res = block.data[j].split(\"=\");\n\t\t\t\tvar key = res[0].replace(/ |\\n|\\r/g,\"\") ;\n\t\t\t\tvar value = res[1] ;\t\n\t\t\t\tswitch(key){\n\t\t\t\t\tcase \"a\" :\n\t\t\t\t\t\tblock.attributes.push( this.parseAline(value, block ) ) ;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"c\":\n\t\t\t\t\t\tblock.connection = this.parseCline(value) ;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"i\" :\n\t\t\t\t\t\tblock.information = value ;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"b\" :\n\t\t\t\t\t\tblock.bandwidths.push(value);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"k\" :\n\t\t\t\t\t\tblock.encryption = value ;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn block ;\n\t\t}\n\n\t\t/*  BLOCK SESSION\n \t \t *    session description\n         \t *  v=  (protocol version)\n         \t *  o=  (originator and session identifier)\n         \t *  s=  (session name)\n         \t *  i= (session information)\n         \t *  u= (URI of description)\n         \t *  e= (email address)\n         \t *  p= (phone number)\n         \t *  c= (connection information -- not required if included in\n         \t *     all media)\n         \t *  b= (zero or more bandwidth information lines)\n         \t *     One or more time descriptions (\"t=\" and \"r=\" lines; see below)\n         \t *  z= (time zone adjustments)\n         \t *  k= (encryption key)\n         \t *  a= (zero or more session attribute lines)\n         \t *     Zero or more media descriptions\n\t \t */\n\t\tblockSessionParser (block){\n\t\t\tblock[\"protocol\"] = null ;\n\t\t\tblock[\"originator\"] = null ;\n\t\t\tblock[\"timeZone\"] = null ;\n\t\t\tblock[\"sessionName\"] = null ;\n\t\t\tblock[\"originator\"] = null ;\n\t\t\tblock[\"protocol\"] = null ;\n\t\t\tblock[\"uri\"] = null ;\n\t\t\tblock[\"phoneNumber\"] = null ;\n\t\t\tblock[\"email\"] = null ;\n\t\t\tblock[\"timeDescription\"] = null;\n\t\t\tblock[\"timeRepeat\"] = null;\n\n\t\t\tfor (var j = 0 ; j < block.data.length ; j++){ \n\t\t\t\tvar res = block.data[j].split(\"=\");\n\t\t\t\tvar key = res[0].replace(/ |\\n|\\r/g,\"\") ;\n\t\t\t\tvar value = res[1] ;\t\n\t\t\t\tswitch(key){\n\t\t\t\t\tcase \"v\" :\n\t\t\t\t\t\tblock.protocol = value ;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"o\" :\n\t\t\t\t\t\tblock.originator = this.parseOline( value ) ;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"s\" :\n\t\t\t\t\t\tblock.sessionName = value ;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"u\" :\n\t\t\t\t\t\tblock.uri = value ;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"e\" :\n\t\t\t\t\t\tblock.email = value ;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"p\" :\n\t\t\t\t\t\tblock.phoneNumber = value ;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"z\" :\n\t\t\t\t\t\tblock.timeZone = value ;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"a\" :\n\t\t\t\t\t\tblock.attributes.push( this.parseAline(value, block) ) ;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"c\":\n\t\t\t\t\t\tblock.connection = this.parseCline(value) ;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"i\" :\n\t\t\t\t\t\tblock.information = value ;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"b\" :\n\t\t\t\t\t\tblock.bandwidths.push(value);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"k\" :\n\t\t\t\t\t\tblock.encryption = value ;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t// TIME DESCRIPTION\n\t\t\t\t\tcase \"t\" :\n\t\t\t\t\t\tblock.timeDescription = this.parseTline(value);\n\t\t\t\t\t\tbreak ;\n\t\t\t\t\tcase \"r\" :\n\t\t\t\t\t\tblock.timeRepeat = this.parseRline(value);\n\t\t\t\t\t\tbreak ;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn block ;\n\t\t}\n\n\t\tparseBlocks (){\n\t\t\tfor (var i = 0 ; i< this.blocks.length ; i++){\n\t\t\t\tswitch( this.blocks[i].type ){\n\t\t\t\t\tcase \"session\" :\n\t\t\t\t\t\tthis.sessionBlock = this.blockSessionParser( this.blocks[i] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"audio\" :\n\t\t\t\t\t\tthis.audioBlock = this.blockMediaParser( this.blocks[i] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"video\" :\n\t\t\t\t\t\tthis.videoBlock = this.blockMediaParser( this.blocks[i] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tstage.io.protocols.sdp = parserSdp ;\n\t\n\treturn parserSdp ;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/io/protocols/sip/sdp.es6","module.exports =  function(stage){\n\n\t'use strict';\n\n\t/*\n \t *\n \t *\tDIGEST authenticate\n \t *\n \t *\n \t */\n\tvar stringify = function(value){\n\t\treturn '\"'+value+'\"';\n\t};\n\n\tvar reg =/^([^=]+)=(.+)$/;\n\tvar parserAuthenticate = function(str){\n\t\tvar ret = str.replace(/\"/g,\"\");\n\t\tret = ret.replace(/Digest /g,\"\");\n\t\tvar head = ret.split(\",\");\n\t\tvar obj = [];\n\t\tfor (var i= 0 ; i < head.length ; i++){\n\t\t\tvar res = reg.exec(head[i]);\n\t\t\tvar key = res[1].replace(/ |\\n|\\r/g,\"\");\n\t\t\tif (res && key){\n\t\t\t\tobj[key] = res[2];\n\t\t\t}\n\t\t}\t\n\t\treturn obj;\n\t};\n\n\tvar MD5 = stage.crypto.md5.hex_md5_noUTF8 ;\n\t//var BASE64 = stage.crypto.base64.encode ;\n\n\tvar digest = {\n\t\tgenerateA1:function(username, realm, password, nonce, cnonce){\n\t\t\tvar A1 = null ;\n\t\t\tif (cnonce){\n\t\t\t\tA1 = username + \":\" + realm + \":\" + password + \":\" + nonce+ \":\" + cnonce ;\n\t\t\t}else{\n\t\t\t\tA1 = username + \":\" + realm + \":\" + password ;//+ \":\" + nonce ;\n\t\t\t}\n\t\t\t//console.log(A1)\n\t\t\treturn MD5(A1); \n\t\t},\n\t\tgenerateA2:function(method, uri, entity_body, qop){\n\t\t\tvar A2 = \"\";\n\t\t\tif( ! qop || qop ===  \"auth\"){\n\t\t\t\tA2 = method +\":\" + uri ;\n\t\t\t} else if(qop === \"auth-int\"){\n\t\t\t\tif( entity_body ){\n\t\t\t\t\tvar entity = MD5(entity_body);\n\t\t\t\t\tA2 = method + \":\" + uri + \":\" + entity ; \n\t\t\t\t}else{\n\t\t\t\t\tA2 = method + \":\" + uri + \":\" + \"d41d8cd98f00b204e9800998ecf8427e\" ;\n\t\t\t\t}\n\t\t\t}\n\t\t\t//console.log(A2)\n\t\t\treturn MD5(A2);\n\t\t},\n\t\tgenerateResponse:function(A1, nonce, noncecount, cnonce, qop, A2){\n\t\t\tvar res = \"\";\n\t\t\tif(qop === \"auth\" || qop === \"auth-int\"){\n\t\t\t\tres = A1 + \":\" + nonce +\":\" + noncecount +\":\" + cnonce +\":\" + qop + \":\" + A2 ;\n\t\t\t}else{\n\t\t\t\tres = A1 + \":\" + nonce + \":\" + A2 ;\n\t\t\t}\n\t\t\t//console.log(res)\n\t\t\treturn MD5(res);\n\t\t}\t\t\n\t};\n\n\n\tvar authenticate  = class authenticate {\n\n\t\tconstructor(dialog, username, password){\n\t\t\t\n\t\t\tthis.dialog = dialog ;\n\t\t\tthis.userName = username ;\n\t\t\tthis.password = password;\n\t\t\tthis.uri = \"sip:\" +this.dialog.sip.server ;\t\n\t\t\tthis.realm = \"nodefony.com\";\n\t\t\tthis.nonce = null;\n\t\t\tthis.cnonce =null;\n\t\t\tthis.nonceCount = null;\n\t\t\tthis.qop =null;\n\t\t\tthis.algorithm = null;\n\t\t\tthis.entity_body = null;\n\t\t}\n\n\t\tregister (message, type){\n\t\t\t/*if (transaction.sended){\n\t\t\t\tconsole.log(\"WWW-Authenticate error\")\n\t\t\t\treturn ;\n\t\t\t}*/\t\n\t\t\t//console.log(\"AUTH REGISTER\")\n\t\t\t//console.log(message);\n\t\t\tvar head = message.authenticate ;\t\n\t\t\tthis.realm = head.realm\t;\n\t\t\tthis.nonce = head.nonce;\n\t\t\tthis.cnonce = head.cnonce;\n\t\t\tthis.qop = head.qop;\n\t\t\tthis.algorithm = head.Digestalgorithm ? head.Digestalgorithm : \"md5\" ;\t\n\t\t\tif ( message.rawBody ){\n\t\t\t\tthis.entity_body = message.rawBody;\n\t\t\t}\n\t\t\tswitch (this.algorithm.toLowerCase()){\n\t\t\t\tcase \"md5\" :\n\t\t\t\t\tthis.response = this.digestMD5(message.method);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tvar method =\"\";\n\t\t\tif ( ! type ){\n\t\t\t\tmethod = \"Authorization: \";\n\t\t\t}else{\n\t\t\t\tif ( type === \"proxy\"){\n\t\t\t\t\tmethod = \"Proxy-Authorization: \";\n\t\t\t\t}else{\n\t\t\t\t\tmethod = \"Authorization: \";\t\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar line = \"Digest username=\" +stringify(this.userName)+\", realm=\"+stringify(this.realm)+ \", nonce=\" + stringify(this.nonce) +\", uri=\"+stringify(this.uri)+\", algorithm=\"+this.algorithm+\", response=\"+stringify(this.response);\n\t\t\tthis.lineResponse = method + line ; \n\n\t\t\t//var transac = message.transaction ;\n\t\t\tvar transac = this.dialog.createTransaction(message.transaction.to);\n\t\t\tthis.dialog.tagTo = null ;\t\n\t\t\t//this.dialog.sip.fire(\"onInitCall\", this.dialog.toName, this.dialog, transac);\n\t\t\tvar request = transac.createRequest(this.dialog.body, this.dialog.bodyType);\n\t\t\trequest.header.response=this.lineResponse;\n\t\t\trequest.send();\n\t\t\treturn transac ;\n\n\t\t}\n\t\t\n\t\tdigestMD5 (method){\n\t\t\tvar A1 = digest.generateA1(this.userName, this.realm, this.password, this.nonce, this.cnonce );\n\t\t\tvar A2 = digest.generateA2(method, this.uri, this.entity_body, this.qop );\n\t\t\treturn  digest.generateResponse(A1, this.nonce, this.nonceCount, this.cnonce, this.qop, A2);\n\t\t}\n\t};\n\n\n\t/*\n \t *\n \t * CLASS PARSER HEADER SIP\n \t *\n \t *\n \t */\n\t//var regContact = /.*<(sip:.*)>(.*)|.*<(sips:.*)>(.*)/g;\n\tvar regHeaders = {\n\t\tline:/\\r\\n|\\r|\\n/,\n\t\theadName:/: */,\n\t\tAllow:/, */,\n\t\tVia:/; */,\n\t\tCallId:/^(.*)@.*$/,\n\t\talgorithm:/= */,\n\t\tfromTo:/<sip:(.*)@(.*)>/,\n\t\tfromToG:/(.*)?<sip:(.*)@(.*)>/\n\t};\n\n\tvar parsefromTo = function(type, value){\n\t\tvar sp = value.split(\";\");\n\t\tthis.message[type+\"Tag\"] = null;\n\t\tvar res = sp.shift();\n\t\tvar res2 = regHeaders.fromTo.exec(res);\n\t\t//console.log(regHeaders.fromToG.exec(res))\n\t\t//console.log(res2)\n\t\tthis.message[type+\"Name\"] = (res2.length > 2)  ? res2[1].replace(/ |\\n|\\r/g,\"\").replace(/\"/g,\"\") : \"\" ;\n \t        this.message[type] =  res2[1].replace(\" \",\"\") +\"@\"+ res2[2].replace(/ |\\n|\\r/g,\"\") ;\n\t\tvar ret = regHeaders.fromToG.exec(res) ;\t\n\t\tif ( ret && ret[1] ){\n\t\t\tvar displayName =  ret[1].replace(/\"/g,\"\")  ;\n\t\t\t//this.message[type+\"Name\"] = displayName ;\n\t\t\tthis.message[type+\"NameDisplay\"] = displayName ;\n\t\t\t//console.log(displayName)\n\t\t}\n\n\t\tfor (var i = 0 ; i < sp.length ;i++){\n\t\t\tvar res3 = sp[i].split(\"=\");\n\t\t\tif(res3[0].replace(/ |\\n|\\r/g,\"\") === \"tag\"){\n\t\t\t\tthis.message[type+\"Tag\"] = res3[1] ;\n\t\t\t}else{\n\t\t\t\tthis.message[res3[0]] = res3[1] ;\n\t\t\t}\n\t\t}\n\t\treturn value;\n\t};\n\n\n\tvar headerSip  = class headerSip {\n\n\t\tconstructor(message, header){\n\t\t\tthis.rawHeader = {} ;\n\t\t\tthis.message = message; \n\t\t\tthis.method = null; \n\t\t\tthis.firstLine = null;\n\t\t\tthis.branch = null ;\n\t\t\tthis.Via = [];\n\t\t\tthis.routes = [];\n\t\t\tthis.recordRoutes = [];\n\t\t\tif (header && typeof header === \"string\"){\n\t\t\t\ttry {\n\t\t\t\t\tthis.parse(header);\n\t\t\t\t}catch(e){\n\t\t\t\t\tconsole.log(e);\n\t\t\t\t\tthrow new Error(\"PARSE ERROR MESSAGE SIP\", 500);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tparse (header){\n\t\t\tvar tab = header.split(regHeaders.line);\n\t\t\tvar type = tab.shift();\n\t\t\tthis.firstLine = type.split(\" \");\n\t\t\t$.each(tab, (Index, ele) => {\n\t\t\t\tvar res = regHeaders.headName.exec(ele);\n\t\t\t\tvar size = res[0].length;\n\t\t\t\tvar headName = res.input.substr(0,res.index);\n\t\t\t\tvar headValue = res.input.substr(res.index+size);\n\t\t\t\tthis.rawHeader[headName] = headValue ;\n\t\t\t\tvar func = \"set\"+headName;\n\t\t\t\tif (func === \"setVia\"){\n\t\t\t\t\tvar index = this.Via.push(headValue);\t\n\t\t\t\t\tthis[headName][index-1] = this[func](headValue, ele);\n\t\t\t\t}else{\n\t\t\t\t\tthis[headName] = headValue;\n\t\t\t\t\tif (this[func]){\n\t\t\t\t\t\tthis[headName] = this[func](headValue);\t\n\t\t\t\t\t}\t\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (!this[\"Content-Type\"]){\n\t\t\t\tthis.message.contentType = null;\n\t\t\t}else{\n\t\t\t\tthis.message.contentType = this[\"Content-Type\"] ;\n\t\t\t}\n\t\t}\n\n\t\tsetFrom (value){\n\t\t\tparsefromTo.call(this, \"from\", value);\n\t\t\treturn value;\n\t\t}\n\n\t\tsetTo (value){\n\t\t\tparsefromTo.call(this, \"to\", value);\n\t\t\treturn value;\n\t\t}\n\n\t\t\"setWWW-Authenticate\" (value){\n\t\t\tthis.message.authenticate = parserAuthenticate(value);\n\t\t\t/*var ele ={};\n\t\t  \tvar res = value.split(\",\")\n\t\t  \tfor (var i=0 ; i < res.length ;i++){\n\t\t  \tvar ret = regHeaders.algorithm.exec(res[i]);\n\t\t  \tvar size = ret[0].length;\n\t\t  \tvar headName = ret.input.substr(0,ret.index).replace(\" \",\"\");\n\t\t  \tvar headValue = ret.input.substr(ret.index+size).replace(/\"/g,\"\");\n\t\t  \tele[headName] = headValue.replace(/\"/g,\"\");\n\t\t  \t}\n\t\t  \tthis.message.authenticate = ele ;*/\n\t\t\treturn value;\n\t\t}\n\n\t\t\"setProxy-Authenticate\" (value){\n\t\t\tthis.message.authenticate = parserAuthenticate(value);\n\t\t\treturn value;\n\t\t}\n\n\t\t\"setRecord-Route\" (value){\n\t\t\tthis.recordRoutes.push(value);\n\t\t\treturn value ;\n\t\t}\n\n\t\t\"setRoute\" (value){\n\t\t\tthis.routes.push(value);\n\t\t\treturn value ;\n\t\t}\n\n\t\tsetDate (value){\n\t\t\ttry{\n\t\t\t\tthis.message.date = new Date(value);\n\t\t\t}\n\t\t\tcatch(e){\n\t\t\t\tthis.message.date = value;\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\n\t\t\"setCall-ID\" (value){\n\t\t\tthis.message.callId = value ;\n\t\t\treturn value ;\n\t\t\t/*this.callIdRaw = value ;\n\t\t  \tvar res = regHeaders.CallId.exec(value);\t\n\t\t  \tif (res){\n\t\t  \tthis.message.callId =res[1]; \n\t\t  \treturn res[1];\n\n\t\t  \t}else{\n\t\t  \tthis.message.callId =value;\t\n\t\t  \treturn value;\n\t\t  \t}*/\n\t\t}\n\n\t\tsetCSeq (value){\n\t\t\tvar res = value.split(\" \");\n\t\t\tthis.message.cseq = parseInt(res[0],10);\n\t\t\tthis.message.method = res[1];\n\t\t\treturn value;\n\t\t}\n\n\t\t/*setContact (value){\n\t  \t\tvar parseValue = value.replace(regContact,\"$1\");\n\t  \t\tconsole.log(parseValue)\n\t  \t\tvar sp = parseValue.split(\";\");\n\t  \t\tvar contact = sp.shift();\n \t  \t\tvar tab = contact.split(\":\");\t\n\t  \t\tthis.message.contact  = tab[0];\n\t  \t\tthis.message.rport = tab[1];\n\t  \t\tfor (var i = 0 ; i < sp.length ;i++){\n\t  \t\tvar res3 = sp[i].split(\"=\");\n\t\t\t//console.log(res3[0] +\" : \"+  res3[1] );\n\t\t\tthis[\"contact\"+res3[0]] = res3[1]; \n\t\t\t}\n\t\t\treturn value; \n\t\t}*/\n\n\n\t\tsetContact (value){\n\t\t\tvar regContact = /.*<(sips?:.*)>.*/g;\n\t\t\t//console.log(value)\n\t\t\tvar parseValue = regContact.exec(value) ;\n\t\t\t//console.log(parseValue)\n\t\t\tif ( parseValue  ){\n\t\t\t\tthis.message.contact = parseValue[1] ;\n\t\t\t}\n\t\t\t/*if ( parseValue[2] ){\n\t\t  \tconsole.log(parseValue[2])\n\t\t  \tvar clean = parseValue[2].replace(\"^;(.*)\",\"$1\")\n\t\t  \tvar sp = clean.split(\";\");\n\n\t\t  \tfor (var i = 0 ; i < sp.length ;i++){\n\t\t  \tvar res3 = sp[i].split(\"=\");\n\t\t  \tconsole.log(res3[0] +\" : \"+  res3[1] );\n\t\t\t//this[\"contact\"+res3[0]] = res3[1]; \n\t\t\t}\n\t\t\t}*/\n\t\t\treturn value; \n\t\t}\n\n\t\tsetAllow (value){\n\t\t\tif (value ){\n\t\t\t\treturn this.Allow.split(regHeaders.Allow);\n\t\t\t}else{\n\t\t\t\treturn this.Allow;\n\t\t\t}\n\t\t}\n\n\t\tsetSupported (value){\n\t\t\tif (value ){\n\t\t\t\treturn this.Supported.split(regHeaders.Allow);\n\t\t\t}else{\n\t\t\t\treturn this.Supported;\n\t\t\t}\n\t\t}\n\n\t\tsetVia (value,raw){\n\t\t\tif (value){\n\t\t\t\tvar res = value.split(regHeaders.Via);\n\t\t\t\tvar obj = {\n\t\t\t\t\tline :Array.prototype.shift.call(res),\n\t\t\t\t\traw:raw\n\t\t\t\t};\n\t\t\t\tfor (var i = 0 ; i< res.length ;i++){\n\t\t\t\t\tvar tab = res[i].split('=');\n\t\t\t\t\tif ( tab ){\n\t\t\t\t\t\tif (tab[0] === \"branch\"){\n\t\t\t\t\t\t\tif ( ! this.branch ){\n\t\t\t\t\t\t\t\tthis.branch = tab[1];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tobj[tab[0]] = tab[1];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn obj;\n\t\t\t}else{\n\t\t\t\treturn value;\n\t\t\t}\n\t\t}\n\t};\n\t\n\t\t\t\t\n\t/*\n \t *\n \t * CLASS PARSER BODY SIP\n \t *\n \t *\n \t *\n \t */\n\tvar bodySip  = class bodySip {\n\n\t\tconstructor(message, body){\n\t\t\tthis.message = message ;\n\t\t\tthis.message.rawBody = body ;\n\t\t\tthis.size = this.message.contentLength;\n\t\t\tif ( this.size !== body.length ){\n\t\t\t\tthrow new Error(\"BAD SIZE SIP BODY \");\n\t\t\t}\n\t\t\tif (body){\n\t\t\t\tthis.parse(this.message.contentType, body);\n\t\t\t}\n\t\t}\n\n\t\tparse (type, body){\n\t\t\tswitch (type){\n\t\t\t\tcase \"application/sdp\":\n\t\t\t\t\tthis.sdpParser(body);\n\t\t\t\tbreak;\n\t\t\t\tcase \"application/dtmf-relay\":\n\t\t\t\t\tthis.dtmfParser(body);\n\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.body = body;\n\t\t\t}\n\t\t}\n\t\t\n\t\tsdpParser (body){\n\t\t\t// Parser SDP\n\t\t\tthis.body = body || \"\" ;\n\t\t\tif ( ! body ){\n\t\t\t\tthis.sdp  = null ; \t\n\t\t\t}else{\n\t\t\t\ttry {\n\t\t\t\t\tthis.sdp = new stage.io.protocols.sdp(body);\n\t\t\t\t\t//console.log(this.sdp)\n\t\t\t\t}catch(e){\n\t\t\t\t\tthrow e ;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tdtmfParser (body){\n\t\t\t// Parser DTMF\n\t\t\tthis.body = body || \"\" ;\n\t\t\tif ( ! body ){\n\t\t\t\tthis.dtmf  = null ; \t\n\t\t\t}else{\n\t\t\t\t// Parser dtmf \n\t\t\t\tvar obj = {};\n\t\t\t\tvar line = body.split(\"\\n\");\n\t\t\t\tfor (var i = 0 ; i< line.length ; i++){\n\t\t\t\t\tvar res = line[i].split(\"=\");\n\t\t\t\t\tobj[res[0].replace(/ |\\n|\\r/g,\"\")] = res[1];\n\t\t\t\t}\n\t\t\t\tthis.dtmf = obj ;\n\t\t\t}\n\t\t}\n\t};\n\n\n\t/*\n \t *\n \t * CLASS REQUEST\n \t *\n \t *\n \t *\n \t */\n\tvar endline = \"\\r\\n\";\n\tvar endHeader = \"\\r\\n\\r\\n\";\n\n\tvar sipRequest  = class sipRequest {\n\n\t\tconstructor(transaction, bodyMessage, typeBody){\n\t\t\tthis.transaction = transaction;\n\t\t\tthis[\"request-port\"] = this.transaction.dialog.sip.serverPort ; \n\t\t\t\n\t\t\tthis.type = \"request\";\n\t\t\tthis.requestLine ={}; \n\t\t\tthis.buildRequestline();\n\n\t\t\tthis.header = {};\n\t\t\tthis.buildHeader();\n\n\t\t\tthis.buildBody(bodyMessage || \"\", typeBody) ;\n\t\t}\n\n\t\tbuildRequestline (){\n\t\t\tthis.requestLine.method = this.transaction.method.toUpperCase();\n\t\t\tthis.requestLine.version = this.transaction.dialog.sip.version ;\n\t\t}\n\n\t\tgetRequestline (uri){\n\t\t\tswitch (this.transaction.method){\n\t\t\t\tcase \"REGISTER\":\n\t\t\t\t\tthis[\"request-uri\"] = \"sip:\"+this.transaction.dialog.sip.server ;\n\t\t\t\t\treturn  this.transaction.method + \" \"+ this[\"request-uri\"] + \" \" + this.requestLine.version + endline ;\n\t\t\t\tcase \"INVITE\":\n\t\t\t\tcase \"BYE\":\n\t\t\t\tcase \"NOTIFY\":\n\t\t\t\tcase \"INFO\":\n\t\t\t\tcase \"CANCEL\":\n\t\t\t\tcase \"ACK\":\n\t\t\t\t\tthis[\"request-uri\"] = this.transaction.dialog[\"request-uri\"]  ;\n\t\t\t\t\treturn this.transaction.method + \" \" + this[\"request-uri\"] +\" \" + this.requestLine.version + endline ;\n\t\t\t}\n\t\t}\n\t\t\n\t\tbuildHeader (){\n\t\t\t//FIXE ME RPORT IN VIA PARSER \n\t\t\t//console.log(this.transaction.dialog.sip.rport)\n\t\t\t\n\t\t\tvar rport = this.transaction.dialog.sip.rport ;\n\t\t\tvar ip = this.transaction.dialog.sip.publicAddress;\n\n\t\t\t//if ( rport ){\n\t\t\t\t//this.header.via  = \"Via: \"+this.transaction.dialog.sip.version+\"/\"+this.transaction.dialog.sip.settings.transport+\" \" +ip+\":\"+rport+\";\"+\"branch=\"+this.transaction.branch;\n\t\t\t\tthis.header.via  = \"Via: \"+this.transaction.dialog.sip.via+\";\"+\"branch=\"+this.transaction.branch;\n\t\t\t//}else{\n\t\t\t\t//this.header.via  = \"Via: \"+this.transaction.dialog.sip.version+\"/\"+this.transaction.dialog.sip.settings.transport+\" \" +ip+\":\"+this[\"request-port\"]+\";\"+\"branch=\"+this.transaction.branch;\t\n\t\t\t//}\t\n\t\t\tthis.header.cseq = \"CSeq: \"+this.transaction.dialog.cseq + \" \" + this.transaction.method;\n\n\t\t\tthis.header.from = \"From: \" +this.transaction.dialog.from + \";tag=\"+this.transaction.dialog.tagFrom ;\n\n\t\t\tvar tagTo = this.transaction.dialog.tagTo ? \";tag=\"+this.transaction.dialog.tagTo : \"\" ;\n\t\t\tthis.header.to = \"To: \"+ this.transaction.to  + tagTo;\n\n\t\t\tthis.header.callId = \"Call-ID: \" + this.transaction.dialog.callId;\n\t\t\tthis.header.expires = \"Expires: \" + this.transaction.dialog.expires;\n\t\t\tthis.header.maxForward = \"Max-Forwards: \" + this.transaction.dialog.maxForward;\n\t\t\tthis.header.userAgent = \"User-Agent: \" + this.transaction.dialog.sip.settings.userAgent;\n\n\t\t\tthis.header.contact = \"Contact: \"+this.transaction.dialog.contact;\n\n\t\t\tif (  this.transaction.dialog.routes && this.transaction.dialog.routes.length){\n\t\t\t\tthis.header.routes = [];\n\t\t\t\tfor (var i = this.transaction.dialog.routes.length - 1 ; i >= 0 ; i--){\n\t\t\t\t\tthis.header.routes.push( \"Route: \"+ this.transaction.dialog.routes[i] ) ; \t\t\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tgetHeader (){\n\t\t\tvar head = \"\";\n\t\t\tfor (var line in this.header ){\n\t\t\t\tswitch ( stage.typeOf( this.header[line] ) ){\n\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\thead+=this.header[line]+endline;\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"array\":\n\t\t\t\t\t\tfor (var i = 0 ; i <  this.header[line].length ; i++){\n\t\t\t\t\t\t\thead+=this.header[line][i] + endline ;\n\t\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn head ;\n\t\t}\n\n\t\tbuildBody (body, type){\n\t\t\tthis.header.contentLength  = \"Content-Length: \" + body.length ;\n\t\t\tif (type){\n\t\t\t\tthis.header.contentType  = \"Content-Type: \" + type ;\n\t\t\t}\n\t\t\tthis.body = body || \"\" ;\n\t\t}\n\n\t\tgetBody (){\n\t\t\treturn this.body ;\n\t\t}\n\n\t\tgetMessage (){\n\t\t\t//console.log(this.getRequestline() + this.getHeader() + endline + this.getBody())\n\t\t\t//console.log(this.getRequestline() + this.getHeader() + endline + this.getBody())\n\t\t\treturn this.rawResponse = this.getRequestline() + this.getHeader() + endline + this.getBody() ;\n\t\t}\n\n\t\tsend (){\n\t\t\treturn this.transaction.send( this.getMessage() );\t\n\t\t}\n\t};\n\n\n\t/*\n \t *\n \t * CLASS RESPONSE\n \t *\n \t *\n \t *\n \t */\n\tvar codeMessage = {\n\t\t200\t:\t\"OK\"\n\t};\n\n\tvar sipResponse  = class sipResponse {\n\t\n\t\tconstructor(message, code ,messageCode, bodyMessage, typeBody){\n\t\t\tthis.message = message ;\n\t\t\tthis.transaction = message.transaction;\n\t\t\tthis.dialog = message.dialog;\n\t\t\tthis.responseLine ={}; \n\t\t\tthis.buildResponseLine(code ,messageCode);\n\t\t\tthis.header =[];// message.header.messageHeaders;\n\t\t\tthis.buildHeader(message);\n\t\t\tthis.buildBody(bodyMessage || \"\", typeBody) ;\n\t\t}\n\n\t\n\t\tbuildHeader (message){\n\t\t\tfor ( var head in  message.rawHeader){\n\t\t\t\tvar i = 0 ;\n\t\t\t\tswitch (head){\n\t\t\t\t\tcase \"Allow\":\n\t\t\t\t\tcase \"Supported\":\n\t\t\t\t\t\tvar ptr = \"\";\n\t\t\t\t\t\tfor ( i = 0 ; i< message.header[head].length ; i++){\n\t\t\t\t\t\t\tif ( i < message.header[head].length - 1 ){\n\t\t\t\t\t\t\t\tptr += message.header[head][i] + \",\";\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tptr += message.header[head][i] ;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.header.push( head + \": \"+ptr);\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Via\":\n\t\t\t\t\t\tif ( this.responseLine.code == \"487\"  ) {\n\t\t\t\t\t\t\tfor ( i = 0 ; i < this.dialog[head].length ; i++){\n\t\t\t\t\t\t\t\tthis.header.push(this.dialog[head][i].raw);\t\n\t\t\t\t\t\t\t}\t\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tfor ( i = 0 ; i< message.header[head].length ; i++){\n\t\t\t\t\t\t\t\tthis.header.push(message.header[head][i].raw);\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"User-Agent\" :\n\t\t\t\t\t\tthis.header.push( \"User-Agent: \" + this.transaction.dialog.sip.settings.userAgent);\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Contact\":\n\t\t\t\t\t\t/*var rport = this.transaction.dialog.sip.rport ;\n\t\t\t\t\t\tvar ip = this.transaction.dialog.sip.publicAddress;\n\t\t\t\t\t\tif ( rport ){\n\t\t\t\t\t\t\tthis.header.push( \"Contact: <sip:\" +this.transaction.to+\"@\"+ip+\":\"+rport+\";transport=\"+this.transaction.dialog.sip.settings.transport.toLowerCase()+\">\");\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.header.push( \"Contact: <sip:\" +this.transaction.to+\"@\"+ip+\";transport=\"+this.transaction.dialog.sip.settings.transport.toLowerCase()+\">\");\n\t\t\t\t\t\t}*/\n\t\t\t\t\t\tthis.header.push( \"Contact: \"+this.dialog.contact );\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"To\":\n\t\t\t\t\t\t//console.log(message.header[head] )\n\t\t\t\t\t\t//console.log(this.dialog.sip.displayName )\n\t\t\t\t\t\tvar ret = regHeaders.fromToG.exec( message.header[head] ) ;\t\n\t\t\t\t\t\t//console.log(ret)\n\t\t\t\t\t\tif ( ret &&  ( ! ret[1] ) ){\n\t\t\t\t\t\t\t//console.log(\"traff to\")\n\t\t\t\t\t\t\tmessage.header[head] = '\"'+this.dialog.sip.displayName+'\"'+message.header[head] ;\t\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//console.log(message.header[head])\n\t\t\t\t\t\tif ( !  message.header[head].match(/;tag=/) ){\n\t\t\t\t\t\t\tthis.header.push(head + \": \"+message.header[head]+ ( this.transaction.dialog.tagFrom ? \";tag=\"+this.transaction.dialog.tagFrom : \"\" ) );\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.header.push( head + \": \"+message.header[head]);\t\n\t\t\t\t\t\t}\t\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Record-Route\":\n\t\t\t\t\t\tfor ( i = this.message.dialog.routes.length - 1  ; i >= 0 ; i--){\n\t\t\t\t\t\t\tthis.header.push(head + \": \"+ this.message.header.recordRoutes[i]);\t\n\t\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"CSeq\":\n\t\t\t\t\t\tif ( this.responseLine.code == \"487\" && this.dialog.method === \"CANCEL\"){\n\t\t\t\t\t\t\tthis.header.push( head + \": \"+message.header[head].replace(\"CANCEL\", \"INVITE\"));\t\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.header.push( head + \": \"+message.header[head]);\n\t\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Content-Type\": \n\t\t\t\t\tcase \"Organization\": \n\t\t\t\t\tcase \"Server\": \n\t\t\t\t\tcase \"Content-Length\":\n\t\t\t\t\tbreak;\n\t\t\t\t\tdefault :\n\t\t\t\t\t\tthis.header.push( head + \": \"+message.header[head]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tgetHeader (){\n\t\t\tvar head = \"\";\n\t\t\tfor (var line in this.header ){\n\t\t\t\thead+=this.header[line]+endline;\n\t\t\t}\n\t\t\treturn head ;\n\t\t}\n\n\t\tbuildBody (body, type){\n\t\t\tthis.header.contentLength  = \"Content-Length: \" + body.length ;\n\t\t\tif (type){\n\t\t\t\tthis.header.contentType  = \"Content-Type: \" + type ;\n\t\t\t}\n\t\t\tthis.body = body || \"\" ;\n\t\t}\n\n\t\tgetBody (){\n\t\t\treturn this.body ;\n\t\t}\n\n\t\tbuildResponseLine (code, messageCode){\n\t\t\tthis.responseLine.method = this.transaction.method.toUpperCase();\n\t\t\tthis.responseLine.version = this.transaction.dialog.sip.version ;\n\t\t\tthis.responseLine.code = code ;\n\t\t\tthis.responseLine.message = messageCode || codeMessage[code] ;\n\t\t}\n\n\t\tgetResponseline (){\n\t\t\tif (this.responseLine.method == \"ACK\"){\n\t\t\t\treturn \tthis.responseLine.method +\" \"+ \"sip:\"+this.transaction.from+\"@\"+this.transaction.dialog.sip.server +\" \"+this.responseLine.version + endline ;\t\t\n\t\t\t}\n\t\t\treturn  this.responseLine.version + \" \" + this.responseLine.code + \" \" + this.responseLine.message +  endline ;\t\n\t\t}\n\n\t\tgetMessage (){\n\t\t\t//console.log(\"RESPONSE : \" +this.getResponseline() + this.getHeader() + endline + this.getBody())\n\t\t\treturn this.rawResponse = this.getResponseline() + this.getHeader() + endline + this.getBody() ;\n\t\t}\n\n\t\tsend (){\n\t\t\treturn this.transaction.send( this.getMessage() );\t\n\t\t}\n\t};\n\n\n\t/*\n \t *\n \t * CLASS TRANSACTION\n \t *\n \t *\n \t */\n\tvar generateHex = function(){\n\t\treturn Math.floor(Math.random()*167772150000000).toString(16) ;\n\t};\n\n\tconst Transaction  = class Transaction {\n\n\t\tconstructor(to, dialog){\n\t\t\tthis.dialog = dialog ;\t\n\t\t\tif ( to instanceof Message){\n\t\t\t\tthis.hydrate(to);\n\t\t\t}else{\n\t\t\t\tthis.to = to ;\n\t\t\t\tthis.from = dialog.from ;\n\t\t\t\tthis.method = dialog.method;\n\t\t\t\tthis.branch = this.generateBranchId() ;\n\t\t\t}\n\t\t\tthis.responses = {};\n\t\t\tthis.requests = {};\t\n\t\t\tthis.interval = null;\n\t\t}\n\n\t\thydrate (message){\n\t\t\tthis.message = message;\n\t\t\tif ( message.type === \"REQUEST\" ){\n\t\t\t\tthis.to = this.dialog.to;\n\t\t\t\tthis.from = this.dialog.from;\n\t\t\t\tthis.method = this.dialog.method;\n\t\t\t\tthis.branch = this.message.header.branch;\t \n\t\t\t}\n\t\t\tif ( message.type === \"RESPONSE\" ){\n\t\t\t\tthis.to = this.dialog.to;\n\t\t\t\tthis.from = this.dialog.from;\n\t\t\t\tthis.method = this.dialog.method;\n\t\t\t\tthis.branch = this.message.header.branch;\n\t\t\t}\n\t\t}\n\t\t\n\t\tgenerateBranchId (){\n\t\t\tvar hex = generateHex();\n\t\t\tif ( hex.length === 12 ){\n\t\t\t\treturn \"z9hG4bK\"+hex;\n\t\t\t}else{\n\t\t\t\treturn this.generateBranchId() ;\n\t\t\t}\n\t\t}\n\n\t\tcreateRequest (body, typeBody){\n\t\t\tif (this.method != \"ACK\" && this.method != \"CANCEL\" ){\n\t\t\t\tthis.dialog.incCseq();\n\t\t\t}\n\t\t\tthis.request = new sipRequest(this, body || \"\", typeBody);\n\t\t\tthis.message = null;\n\t\t\treturn this.request ;\n\t\t}\n\n\t\tcreateResponse (code ,message, body, typeBody){\n\t\t\tif (this.method === \"INVITE\" || this.method === \"ACK\" ){\n\t\t\t\tswitch ( true ){\n\t\t\t\t\tcase code < 200 : \n\t\t\t\t\t\tthis.dialog.status = this.dialog.statusCode.EARLY ; \n\t\t\t\t\tbreak;\n\t\t\t\t\tcase code < 300 :\n\t\t\t\t\t\tthis.dialog.status = this.dialog.statusCode.ESTABLISHED ;\n\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthis.dialog.status = this.dialog.statusCode.TERMINATED ;\t\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.response = new sipResponse(this.message, code, message, body , typeBody );\n\t\t\treturn this.response ;\n\t\t}\n\n\t\tsend (message){\n\t\t\treturn this.dialog.sip.send( message );\n\t\t}\n\n\t\tcancel (){\n\t\t\tthis.method = \"CANCEL\";\n\t\t\tthis.dialog.routes = null ;\n\t\t\tthis.dialog.tagTo = \"\" ;\n\t\t\tvar request = this.createRequest();\n\t\t\trequest.send();\n\t\t\tthis.dialog.status = this.dialog.statusCode.CANCEL ;\n\t\t\treturn request ;\n\t\t}\n\n\t\tdecline (){\n\t\t\tvar ret = this.createResponse(\n\t\t\t\t603,\n\t\t\t\t\"Declined\"\t\n\t\t\t);\n\t\t\tret.send();\n\t\t\treturn ret ;\n\t\t}\n\n\t\tclear (){\n\t\t\t// CLEAR INTERVAL\t\n\t\t\tif (this.interval){\n\t\t\t\tclearInterval(this.interval);\n\t\t\t}\n\t\t}\n\t};\n\n\t/*\n \t *\n \t * CLASS DIALOG\n \t *\n \t */\n\tvar statusCode = {\n\t\tINITIAL:\t0,\n\t\tEARLY:\t\t1,\t// on 1xx\n\t\tESTABLISHED:\t2,\t// on 200 ok\n\t\tTERMINATED:\t3,\t// on by\t\n\t\tCANCEL:\t\t4\t// cancel\n\t};\n\n\tconst Dialog  = class Dialog {\n\n\t\tconstructor(method, sip){\n\t\t\tthis.sip = sip;\n\t\t\tthis.transactions = {};\n\t\t\tthis.statusCode = statusCode ;\n\t\t\tthis.status = this.statusCode.INITIAL ;\n\t\t\tthis.routes = null ;\n\t\t\tthis.from = this.sip.from;\n\t\t\tthis.maxForward = this.sip.settings.maxForward;\n \t\t\tthis.expires = this.sip.settings.expires;\n\t\t\tthis.tagFrom = this.generateTag() ;\n\t\t\tthis.cseq = this.generateCseq();\n\t\t\tif (method instanceof Message ){\n\t\t\t\tthis.hydrate( method );\n\t\t\t}else{\n\t\t\t\n\t\t\t\tthis.method = method;\n\t\t\t\n\t\t\t\tthis.callId = this.generateCallId(); \n\t\t\t\tthis.status = this.statusCode.INITIAL ;\n\t\t\t \t\n\t\t\t\tthis.to = null ;\n\t\t\t\tthis.tagTo = null ; \n\t\t\t\t\n\t\t\t}\n\t\t\t//this.contact = this.sip.generateContact( null, null, true) ;\n\t\t\tthis.contact = this.sip.contact;\n\t\t}\n\t\n\t\thydrate (message){\n\n\t\t\tif ( message.type === \"REQUEST\" ){\n\t\t\t\tthis.cseq = message.cseq; \n\t\t\t\tthis.method = message.method ;\n\t\t\t\tthis.callId = message.callId;\n\n\t\t\t\t// to\n\t\t\t\tif ( message.fromNameDisplay ){\n\t\t\t\t\tthis.to = '\"'+message.fromNameDisplay+'\"' + \"<sip:\"+message.from+\">\" ;\n\t\t\t\t}else{\n\t\t\t\t\tthis.to = \"<sip:\"+message.from+\">\" ;\t\n\t\t\t\t}\n\t\t\t\tthis.toName = message.fromName;\n\t\t\t\tthis.tagTo = message.fromTag || this.generateTag() ; \n\t\t\t\t//from\n\t\t\t\tthis.tagFrom = message.toTag || this.tagFrom;\n \t\t        \tif (message.toNameDisplay){\n\t\t\t\t\tthis.from ='\"'+message.toNameDisplay+'\"' + '<sip:'+message.to+'>';\n\t\t\t\t}else{\n\t\t\t\t\tthis.from = \"<sip:\"+message.to+\">\";\n\t\t\t\t}\t\n\t\t\t\tthis.fromName= message.toName; \n\n\n\t\t\t\t// manage routes\n\t\t\t\tif ( message.header.recordRoutes.length ){\n\t\t\t\t\tthis.routes = message.header.recordRoutes.reverse();  \t\n\t\t\t\t}\n\n\t\t\t\t// FIXME if (  ! this[\"request-uri\"] &&  message.contact ) \n\t\t\t\tif (  message.contact ){\n\t\t\t\t\t//this[\"request-uri\"] =  message.contact + \":\" + message.rport\n\t\t\t\t\tthis[\"request-uri\"] =  message.contact ;\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tif ( message.type === \"RESPONSE\" ){\n\t\t\t\tthis.cseq = message.cseq;\n\t\t\t\tif ( !  this.callId ){\n\t\t\t\t\tthis.callId = message.callId;\n\t\t\t\t}\n\t\t\t\tif ( !  this.to ){\n\t\t\t\t\tif ( message.toNameDisplay ){\n\t\t\t\t\t\tthis.to =  '\"'+message.toNameDisplay+'\"' + \"<sip:\"+message.to+\">\" ;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.to =  \"<sip:\"+message.to+\">\" ;\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tif ( message.toNameDisplay ){\n\t\t\t\t\t\tthis.to =  '\"'+message.toNameDisplay+'\"' + \"<sip:\"+message.to+\">\" ;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( message.toTag ){\n\t\t\t\t\tthis.tagTo = message.toTag ;\t\n\t\t\t\t}\n\t\t\t\tif ( message.fromTag ){\n\t\t\t\t\tthis.tagFrom = message.fromTag ;\t\n\t\t\t\t}\n\t\t\t\t// FIXME if (  ! this[\"request-uri\"] &&  message.contact ) \n\t\t\t\tif (  message.contact ){\n\t\t\t\t\t//this[\"request-uri\"] =  message.contact + \":\" + message.rport\n\t\t\t\t\tthis[\"request-uri\"] =  message.contact ;\n\t\t\t\t}\n\n\t\t\t\t// manage routes\n\t\t\t\tif ( message.header.recordRoutes.length ){\n\t\t\t\t\tthis.routes = message.header.recordRoutes ;\t\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tgenerateCallId (){\n\t\t\treturn parseInt(Math.random()*1000000000,10);\n\t\t}\n\n\t\tgenerateTag (){\n\t\t\treturn \"nodefony\"+parseInt(Math.random()*1000000000,10);\n\t\t}\n\n\t\tgenerateCseq (){\n\t\t\treturn 1;\n\t\t}\n\n\t\tincCseq (){\n\t\t\tthis.cseq = this.cseq + 1 ;\n\t\t\treturn this.cseq ;\n\t\t}\n\n\t\tgetTransaction (id){\n\t\t\tif ( id in this.transactions ){\n\t\t\t\treturn this.transactions[id] ;\n\t\t\t}\n\t\t\treturn null ;\t\n\t\t}\n\n\t\tcreateTransaction (to){\n\t\t\tthis.currentTransaction = new Transaction( to || this.to , this);\n\t\t\tconsole.log(\"SIP NEW TRANSACTION :\" + this.currentTransaction.branch);\n\t\t\tthis.transactions[this.currentTransaction.branch] = this.currentTransaction;\n\t\t\treturn this.currentTransaction;\t\n\t\t}\n\n\t\tregister (){\n\t\t\tvar trans = this.createTransaction(this.from);\n\t\t\tthis.to = this.from ;\n\t\t\tvar request = trans.createRequest();\n\t\t\trequest.send();\n\t\t\treturn trans;\n\n\t\t}\n\n\t\tunregister (){\n\t\t\tthis.expires = 0 ;\n\t\t\tthis.contact = \"*\" ;\n\t\t\tvar trans = this.createTransaction(this.from);\n\t\t\tthis.to = this.from ;\n\t\t\tvar request = trans.createRequest();\n\t\t\trequest.send();\n\t\t\treturn trans;\t\t\n\t\t}\n\n\t\tack (message){\n\t\t\tif ( ! this[\"request-uri\"] ){\n\t\t\t\tthis[\"request-uri\"] = this.sip[\"request-uri\"] ;\n\t\t\t}\n\t\t\t//this.method = \"ACK\" ;\n\t\t\tvar trans = this.createTransaction();\t\n\t\t\ttrans.method = \"ACK\" ;\n\t\t\tvar request = trans.createRequest();\n\t\t\trequest.send();\n\t\t\treturn request ;\n\t\t}\n\n\t\tinvite (userTo, description, type){\n\n\t\t\tif ( this.status  === this.statusCode.CANCEL ){\n\t\t\t\treturn null ;\n\t\t\t}\n\t\t\tconsole.log(\"SIP INVITE DIALOG\");\n\t\t\tif ( userTo ){\n\t\t\t\tthis.to = \"<sip:\"+userTo+\">\" ;\n\t\t\t}\n\t\t\tthis.method = \"INVITE\" ;\n\t\t\tif ( ! this[\"request-uri\"] ){\n\t\t\t\tthis[\"request-uri\"] = \"sip:\"+userTo ;\n\t\t\t}\n\n\t\t\tif ( description.sdp ){\n\t\t\t\tthis.bodyType = \"application/sdp\" ;\n\t\t\t\tthis.body = description.sdp ;\n\t\t\t}else{\n\t\t\t\tthis.bodyType = type ;\n\t\t\t\tthis.body = description ;\n\t\t\t}\n\t\t\tvar trans = this.createTransaction(this.to);\n\t\t\tvar request = trans.createRequest(this.body, this.bodyType);\n\t\t\trequest.send();\n\t\t\treturn trans;\n\n\t\t}\n\n\t\tnotify (userTo, notify, typeNotify){\n\t\t\tthis.method = \"NOTIFY\" ;\t\n\t\t\tif ( userTo ){\n\t\t\t\tthis.to = \"<sip:\"+userTo+\">\" ;\n\t\t\t}\n\t\t\tif ( ! this[\"request-uri\"] ){\n\t\t\t\tthis[\"request-uri\"] = \"sip:\"+userTo ;\n\t\t\t}\n\t\t\tif (typeNotify){\n\t\t\t\tthis.bodyType = typeNotify ;\n\t\t\t}\n\t\t\tif ( notify ){\n\t\t\t\tthis.body = notify ;\n\t\t\t}\n\t\t\tvar trans = this.createTransaction(this.to);\n\t\t\tvar request = trans.createRequest(this.body, this.bodyType);\n\t\t\trequest.send();\n\t\t\treturn this;\n\n\t\t}\n\n\t\tinfo ( info, typeInfo){\n\t\t\tthis.method = \"INFO\" ;\t\n\n\t\t\tif (typeInfo){\n\t\t\t\tthis.bodyType = typeInfo ;\n\t\t\t}\n\t\t\tif ( info ){\n\t\t\t\tthis.body = info ;\n\t\t\t}\n\t\t\tvar trans = this.createTransaction(this.to);\n\t\t\tvar request = trans.createRequest(this.body, this.bodyType);\n\t\t\trequest.send();\n\t\t\treturn this;\n\n\t\t}\n\n\t\tbye (){\n\t\t\tthis.method = \"BYE\" ;\n\t\t\tvar trans = this.createTransaction();\n\t\t\tvar request = trans.createRequest();\n\t\t\trequest.send();\n\t\t\treturn this;\n\n\t\t}\n\n\t\tclear (id){\n\t\t\tif ( id ){\n\t\t\t\tif (this.transactions[id]){\n\t\t\t\t\tthis.transactions[id].clear();\n\t\t\t\t}else{\n\t\t\t\t\tthrow new Error(\"TRANSACTION not found :\" + id);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tfor ( var transac in this.transactions ){\n\t\t\t\t\tthis.transactions[transac].clear();\t\n\t\t\t\t}\t\n\t\t\t}\n\t\t}\n\t};\n\t\n\n\n\t/*\n \t *\n \t *\tMESSAGE SIP \n \t *\n \t *\n \t */ \n\tvar firstline = function(firstLine){\n\t\tvar method = firstLine[0];\t\n\t\tvar code = firstLine[1];\n\t\tif ( method === \"BYE\" && ! code){\n\t\t\tcode = 200 ;\n\t\t}\n\t\tvar message = \"\";\n\t\tfor (var i = 2 ;i<firstLine.length;i++){\n\t\t\tmessage+=firstLine[i]+\" \";\t\n\t\t}\n\t\treturn {\n\t\t\tmethod : method,\n\t\t\tcode : code,\n\t\t\tmessage : message\n\t\t};\t\n\t};\n\n\tvar regSIP = /\\r\\n\\r\\n/ ;\n\tvar Message  = class Message {\n\n\t\tconstructor(message, sip){\t\n\t\t\tthis.sip = sip ;\n\t\t\tif (message){\n\t\t\t\tthis.rawMessage = message ;\n\t\t\t\tthis.header = null;\n\t\t\t\tthis.body = null;\n\t\t\t\tthis.statusLine = null;\n\t\t\t\tthis.contentLength = 0 ;\n\t\t\t\tthis.code = null ;\n\t\t\t\tthis.statusLine = \"\" ;\t\n\t\t\t\tthis.split = message.split( regSIP );\n\t\t\t\tif (this.split.length && this.split.length <= 2){ \n\t\t\t\t\ttry {\n\t\t\t\t\t\tthis.parseHeader();\n\t\t\t\t\t\tthis.contentLength = parseInt(this.header[\"Content-Length\"], 10) ;\n\t\t\t\t\t\tthis.parseBody();\t\n\t\t\t\t\t\tthis.statusLine =firstline(this.header.firstLine); \n\t\t\t\t\t\tthis.code = parseInt( this.statusLine.code, 10);\n\t\t\t\t\t\tthis.getType(); \n\t\t\t\t\t}catch(e){\n\t\t\t\t\t\tthrow e;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.rawHeader = this.header.rawHeader ;\n\t\t\t\t\t//console.log(this.rawHeader)\n\t\t\t\t}\n\t\t\t\tthis.getDialog();\n\t\t\t\tthis.getTransaction();\n\n\t\t\t}else{\n\t\t\t\tthrow new Error( \"BAD FORMAT MESSAGE SIP no message\" , 500);\n\t\t\t}\n\t\t}\n\n\t\tgetType ( ){\n\t\t\tif ( this.code ){\n\t\t\t\tif ( ( typeof this.code ) === \"number\" &&  ! isNaN (this.code) ){\n\t\t\t\t\tthis.type = \"RESPONSE\" ;\n\t\t\t\t}else{\n\t\t\t\t\tthrow new Error(\"BAD FORMAT MESSAGE SIP message code   \") ;\t\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif ( this.method ){\n\t\t\t\t\tthis.type = \"REQUEST\" ;\n\t\t\t\t}else{\n\t\t\t\t\tthis.type = null ;\n\t\t\t\t\tthrow new Error(\"BAD FORMAT MESSAGE SIP message type not defined  \") ;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tparseBody ( ){\n\t\t\tif ( this.split[1] ){\n\t\t\t\tthis.body = new bodySip(this, this.split[1]);\n\t\t\t}else{\n\t\t\t\tthis.body = new bodySip(this, \"\"); \n\t\t\t}\n\t\t}\n\n\t\tparseHeader ( ){\n\t\t\tif ( this.split[0] ){\n\t\t\t\tthis.header = new headerSip(this, this.split[0]);\n\t\t\t}else{\n\t\t\t\tthrow (\"BAD FORMAT MESSAGE SIP no header \", 500);\n\t\t\t}\t\n\t\t}\n\n\t\tgetContact (){\n\t\t\treturn this.contact;\n\t\t}\n\n\t\tgetHeader (){\n\t\t\treturn this.header;\n\t\t}\n\n\t\tgetBody (){\n\t\t\treturn this.body;\n\t\t}\n\n\t\tgetStatusLine (){\n\t\t\treturn this.statusLine;\n\t\t}\n\n\t\tgetCode (){\n\t\t\treturn this.code ;\n\t\t}\n\n\t\tgetDialog (){\n\t\t\tif (  this.header[\"Call-ID\"] ){\n\t\t\t\tthis.dialog = this.sip.getDialog( this.header[\"Call-ID\"] ) ;\n\t\t\t\tif ( ! this.dialog ){\n\t\t\t\t\tthis.dialog = this.sip.createDialog(this);\n\t\t\t\t}else{\n\t\t\t\t\tconsole.log(\"SIP HYDRATE DIALOG :\" + this.dialog.callId);\n\t\t\t\t\tthis.dialog.hydrate(this);\t\n\t\t\t\t}\n\t\t\t\treturn this.dialog ;\n\t\t\t} else{\n\t\t\t\tthrow new Error(\"BAD FORMAT SIP MESSAGE no Call-ID\" , 500);\n\t\t\t}\n\t\t}\n\n\t\tgetTransaction (){\n\t\t\tif ( this.header.branch ){\n\t\t\t\tif ( ! this.dialog ){\n\t\t\t\t\tthis.getDialog();\n\t\t\t\t}\n\t\t\t\tif ( this.dialog ){\n\t\t\t\t\tthis.transaction = this.dialog.getTransaction( this.header.branch ) ;\n\t\t\t\t\tif ( ! this.transaction ){\n\t\t\t\t\t\tthis.transaction = this.dialog.createTransaction(this);\t\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.log(\"SIP HYDRATE TRANSACTION :\" + this.transaction.branch);\n\t\t\t\t\t\tthis.transaction.hydrate(this);\t\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tthis.transaction = null ;\n\t\t\t\t}\n\t\t\t\treturn this.transaction ;\n\t\t\t}else{\n\t\t\t\t// TODO CSEQ mandatory\n\t\t\t\tconsole.log( this.rawMessage );\n\t\t\t\tthrow new Error(\"BAD FORMAT SIP MESSAGE no Branch\" , 500);\n\t\t\t}\t\n\t\t}\n\t};\n\n\t/*\n \t *\n \t *\n \t *\tCLASS SIP \n \t *\n \t *\n \t */\n\t// entry point response transport\n\tvar onMessage = function(response){\n\t\t\n\t\tconsole.log(\"RECIEVE SIP MESSAGE \");\t\n\t\tconsole.log(response);\t\n\n\t\tvar message = null ;\n\t\tvar res = null ;\n\t\ttry {\n\t\t\t//console.log(this.fragment)\n\t\t\tif ( this.fragment ){\n\t\t\t\tthis.lastResponse += response;\n\t\t\t\t//console.log(this.lastResponse);\n\t\t\t}else{\n\t\t\t\tthis.lastResponse = response ;\n\t\t\t}\n\t\t\tmessage = new Message(this.lastResponse, this);\n\t\t\tthis.fragment = false ;\n\t\t}catch(e){\n\t\t\tconsole.log(e);\n\t\t\t// bad split \n\t\t\tfor ( var i = 0 ; i < e.length ; i++){\n\t\t\t\tif ( e[i] ){\n\t\t\t\t\ttry {\n\t\t\t\t\t\tonMessage.call(this, e[i]);\t\t\t\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}catch(e){\n\t\t\t\t\t\t//console.log(\"FRAGMENTE\")\n\t\t\t\t\t\tthis.fragment = true ;\t\n\t\t\t\t\t\treturn ;\t\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\t\n\t\t\treturn ;\n\t\t}\n\t\tthis.fire(\"onMessage\", message.rawMessage);\t\n\t\t//console.log( message.type + \" : \" + response);\n\t\t\n\t\tswitch (message.method){\n\t\t\tcase \"REGISTER\" :\n\t\t\t\tthis.rport = message.header.Via[0].rport;\n\t\t\t\tif (this.rport ){\n\t\t\t\t\tthis[\"request-uri\"] =  \"sip:\"+this.userName+\"@\"+this.publicAddress+\":\"+ this.rport +\";transport=\"+this.transportType;\t\n\t\t\t\t}\n\t\t\t\tvar transaction = null ;\n\t\t\t\tswitch ( message.code ){\n\t\t\t\t\tcase 401 :\n\t\t\t\t\tcase 407 :\n\t\t\t\t\t\tif (this.registered === 200 ) {\n\t\t\t\t\t\t\tif ( this.registerInterval ){\n\t\t\t\t\t\t\t\tclearInterval(this.registerInterval);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.registerInterval = null ;\t\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif ( this.registered === 401 || this.registered === 407){\n\t\t\t\t\t\t\t\tif ( this.registerInterval ){\n\t\t\t\t\t\t\t\t\tclearInterval(this.registerInterval);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.registerInterval = null ;\t\n\t\t\t\t\t\t\t\tthis.registered = null;\n\t\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onError\", this, message);\n\t\t\t\t\t\t\t\tbreak; \n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.registered = message.code ;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdelete this.authenticate ;\n\t\t\t\t\t\tthis.authenticate = null;\t\n\t\t\t\t\t\tthis.authenticate = new authenticate(message.dialog, this.userName , this.settings.password) ;\n\t\t\t\t\t\ttransaction = this.authenticate.register(message, message.code === 407 ? \"proxy\" : null);\n\t\t\t\t\t\t\n\t\t\t\t\tbreak;\t\n\t\t\t\t\tcase 403 :\n\t\t\t\t\t\tthis.registered = message.code ;\n\t\t\t\t\t\t//console.log(\"Forbidden (bad auth)\")\n\t\t\t\t\t\tdelete this.authenticate ;\n\t\t\t\t\t\tthis.authenticate = null;\n\t\t\t\t\t\tthis.notificationsCenter.fire(\"onError\", this, message);\n\t\t\t\t\tbreak;\t\n\t\t\t\t\tcase 404 :\n\t\t\t\t\t\tthis.registered = message.code ;\n\t\t\t\t\t\tdelete this.authenticate ;\n\t\t\t\t\t\tthis.authenticate = null;\n\t\t\t\t\t\tthis.notificationsCenter.fire(\"onError\", this, message);\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 200 :\n\t\t\t\t\t\tif ( this.registerInterval ){\n\t\t\t\t\t\t\tclearInterval( this.registerInterval );\t\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( ! message.contact ){\n\t\t\t\t\t\t\tthis.registered = \"404\" ;\n\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onUnRegister\",this, message);\n\t\t\t\t\t\t\treturn ;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this.registered === 401 || this.registered === null ) {\n\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onRegister\", this, message);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.registered = message.code ;\n\t\t\t\t\t\tthis.registerInterval = setInterval(() => {\n\t\t\t\t\t\t\tthis.register(this.userName, this.settings.password);\n\t\t\t\t\t\t} ,  this.settings.expires * 900  );\n\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthis.registered = message.code ;\n\t\t\t\t\t\tdelete this.authenticate ;\n\t\t\t\t\t\tthis.authenticate = null;\n\t\t\t\t\t\t//console.log(message);\n\t\t\t\t\t\tthis.notificationsCenter.fire(\"on\"+message.code, this, message);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\tbreak;\n\t\t\tcase \"INVITE\" :\n\t\t\t\t//this.rport = message.rport || this.rport;\n\n\t\t\t\tswitch ( message.type ){\n\t\t\t\t\tcase \"REQUEST\":\n\t\t\t\t\t\tif ( message.dialog.status === message.dialog.statusCode.INITIAL ){\n\t\t\t\t\t\t\tthis.fire(\"onInitCall\", message.dialog.toName, message.dialog, message.transaction);\n\t\t\t\t\t\t\tif ( message.header.Via ){\n\t\t\t\t\t\t\t\tmessage.dialog.Via = message.header.Via ;\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onInvite\", message, message.dialog);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t//console.log(message.dialog.statusCode[message.dialog.status])\n\t\t\t\t\t\t\tif ( message.dialog.status === message.dialog.statusCode.ESTABLISHED ){\n\t\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onInvite\", message, message.dialog);\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tvar ret = message.transaction.createResponse(200, \"OK\");\n\t\t\t\t\t\t\t\tret.send();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"RESPONSE\":\n\t\t\t\t\t\tif ( message.code >= 200 ){\n\t\t\t\t\t\t\tmessage.dialog.ack(message);\t\n\t\t\t\t\t\t}\n\t\t\t\t\t\tswitch(message.code){\n\t\t\t\t\t\t\tcase 407 :\n\t\t\t\t\t\t\tcase 401 :\n\t\t\t\t\t\t\t\tdelete this.authenticate ;\n\t\t\t\t\t\t\t\tthis.authenticate = null;\n\t\t\t\t\t\t\t\tthis.authenticate = new authenticate(message.dialog, this.userName , this.settings.password) ;\n\t\t\t\t\t\t\t\ttransaction = this.authenticate.register(message, message.code === 407 ? \"proxy\" : null);\n\t\t\t\t\t\t\t\tthis.fire(\"onInitCall\", message.dialog.toName, message.dialog, transaction);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 180 : \n\t\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onRinging\",this, message);\n\t\t\t\t\t\t\t\tmessage.dialog.status = message.dialog.statusCode.EARLY ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 100 : \n\t\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onTrying\",this, message);\n\t\t\t\t\t\t\t\tmessage.dialog.status = message.dialog.statusCode.EARLY ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 200 :\n\t\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onCall\",message);\n\t\t\t\t\t\t\t\tmessage.dialog.status = message.dialog.statusCode.ESTABLISHED ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 486 : \n\t\t\t\t\t\t\tcase 603 : \n\t\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onDecline\", message);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 403 :\n\t\t\t\t\t\t\t\tthis.authenticate = false;\n\t\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onError\", this, message);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 487 :\n\t\t\t\t\t\t\t\t// ACK !!\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 404 :\n\t\t\t\t\t\t\tcase 477 :\n\t\t\t\t\t\t\tcase 480 :\n\t\t\t\t\t\t\tcase 484 :\n\t\t\t\t\t\t\tcase 488 :\n\t\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onError\",this, message);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 408 :\n\t\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onTimeout\",this, message);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 500 :\n\t\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onError\",this, message);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"on\"+message.code, this, message);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\t// error BAD FORMAT\n\t\t\t\t}\n\t\t\tbreak;\n\t\t\tcase \"ACK\" :\n\t\t\t\t//console.log(\"ACK\");\n\t\t\t\t//TODO manage interval messages timer retransmission \n\t\t\tbreak;\n\t\t\tcase \"BYE\" :\n\t\t\t\tswitch(message.code){\n\t\t\t\t\tcase 200 :\n\t\t\t\t\t\t//console.log(\"200\")\n\t\t\t\t\t\tthis.notificationsCenter.fire(\"onBye\",message);\n\t\t\t\t\tbreak;\n\t\t\t\t\tdefault :\n\t\t\t\t\t\tthis.notificationsCenter.fire(\"onBye\",message);\n\t\t\t\t\t\tif ( message.type === \"REQUEST\" ){\n                                                        res = message.transaction.createResponse(200,\"OK\");\n                                                        res.send();\n                                                }\n\t\t\t\t}\n\t\t\tbreak;\n\t\t\tcase \"INFO\" :\n\t\t\t\tswitch ( message.type ){\n\t\t\t\t\tcase \"REQUEST\":\n\t\t\t\t\t\t//console.log(\"SIP   :\"+ message.method + \" \"+\" type: \"+message.contentType );\n\t\t\t\t\t\tthis.notificationsCenter.fire(\"onInfo\",message);\t\n\t\t\t\t\t\tres = message.transaction.createResponse(200, \"OK\");\n\t\t\t\t\t\tres.send();\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"RESPONSE\":\n\t\t\t\t\t\t//console.log(\"SIP   :\"+ message.method + \" \"+\" code:\"+message.code );\n\t\t\t\t\t\tthis.notificationsCenter.fire(\"onDrop\",message);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\tbreak;\n\n\t\t\tcase \"CANCEL\" :\n\t\t\t\tswitch ( message.type ){\n\t\t\t\t\tcase \"REQUEST\":\n\t\t\t\t\t\tthis.notificationsCenter.fire(\"onCancel\",message);\n\t\t\t\t\t\tres = message.transaction.createResponse(200, \"OK\");\n\t\t\t\t\t\tres.send();\n\t\t\t\t\t\tmessage.dialog.status = message.dialog.statusCode.CANCEL ;\n\t\t\t\t\t\tres = message.transaction.createResponse(487, \"Request Terminated\");\n\t\t\t\t\t\tres.send();\n\t\t\t\t\t\tmessage.dialog.status = message.dialog.statusCode.TERMINATED  ;\n\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"RESPONSE\":\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.notificationsCenter.fire(\"onDrop\",message);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\tbreak;\n\t\t\tcase \"REFER\":\n\t\t\t\tconsole.log(\"SIP REFER NOT ALLOWED :\"+ message.method );\n\t\t\t\tthis.notificationsCenter.fire(\"onDrop\",message);\t\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log(\"SIP DROP :\"+ message.method + \" \"+\" code:\"+message.code );\n\t\t\t\tthis.notificationsCenter.fire(\"onDrop\",message);\n\t\t\t\t// TODO RESPONSE WITH METHOD NOT ALLOWED \n\t\t}\n\t};\n\n\tvar onStart = function(){\n\t\tthis.fire(\"onStart\",this);\n\t};\n\n\tvar onStop = function(){\n\t\tthis.stop();\t\n\t};\n\n\tvar defaultSettings = {\n\t\texpires\t\t: 200,\t\t// en secondes\n\t\tmaxForward\t: 70,\n\t\tversion\t\t: \"SIP/2.0\",\n\t\tuserAgent\t: \"nodefony\",\n\t \tportServer\t: \"5060\",\n\t \tuserName\t: \"userName\",\t\t\n\t\tdisplayName\t: \"\",\n\t \tpwd\t\t: \"password\",\n\t\ttransport\t: \"TCP\"\n\t};\n\t\t\n\n\t// CLASS\n\tconst SIP  = class SIP {\n\n\t\tconstructor(server, transport, settings){\n\t\t\tthis.settings = stage.extend({}, defaultSettings, settings);\n\t\t\t//this.settings.url = stage.io.urlToOject(url)\n\t\t\tthis.notificationsCenter = stage.notificationsCenter.create(this.settings, this);\n\t\t\tthis.dialogs = {};\n\t\t\tthis.version = this.settings.version;\n\n\t\t\t//\n\t\t\tthis.server = server ;\n\t\t\tthis.serverPort = this.settings.portServer;\n\n\t\t\tthis.authenticate = false;\n\n\t\t\t// REGISTER\n\t\t\tthis.registerInterval = null;\n\t\t\tthis.registered = null ;\n\n\t\t\t// TRANSPORT\n\t\t\tthis.transport = transport ;\n\t\t\tif ( this.transport ){\n\t\t\t\tthis.initTransport();\n\t\t\t}\n\t\t\tthis.transportType = this.settings.transport.toLowerCase() ;\n\n\t\t\tthis.contact = null ;\n\t\t\tthis.via = null ;\n\t\t\t// IDENTIFIANT\n\t\t\t//  USER\n\t\t\t//this.userName = this.settings.userName ;\n\t\t\t//this.from = \"<sip:\"+this.userName+\"@\"+this.publicAddress+\">\" ; \n\t\t\t//this.contact = this.generateContact();\n\t\t\t//this[\"request-uri\"] =  \"sip:\"+this.userName+\"@\"+this.publicAddress+\";transport=\"+this.transportType ;\t\n\t\t}\n\n\t\tgenerateInvalid (){\n\t\t\treturn parseInt(Math.random()*1000000000,10)+\".nodefony.invalid\" ;\n\t\t}\n\n\t\tgenerateVia (addr){\n\t\t\tif ( this.rport ){\n\t\t\t\treturn  this.version+\"/\"+this.settings.transport+\" \" +addr+\";rport\" ;\n\t\t\t}else{\n\t\t\t\treturn  this.version+\"/\"+this.settings.transport+\" \" +addr ;\n\t\t\t}\n\t\t}\n\n\t\tgenerateContact ( userName, password , force, settings){\n\t\t\tif ( userName ) {\n\t\t\t\tthis.userName = userName  ;\n\t\t\t\tif ( settings && settings.displayName ){\n\t\t\t\t\tthis.displayName = settings.displayName ; \n\t\t\t\t}else{\n\t\t\t\t\tthis.displayName = userName ;\n\t\t\t\t}\n\t\t\t\tthis.from = '\"'+this.displayName+'\"'+'<sip:'+this.userName+'@'+this.publicAddress+'>' ;\n\t\t\t\tthis[\"request-uri\"] =  \"sip:\"+this.userName+\"@\"+this.publicAddress+\";transport=\"+this.transportType ;\n\t\t\t\tif ( password ){\n\t\t\t\t\tthis.settings.password = password ;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( ! this.contact  || force ){\n\t\t\t\tvar invalid = null ;\n\t\t\t\tswitch ( this.transportType ){\n\t\t\t\t\tcase \"ws\":\n\t\t\t\t\tcase \"wss\":\n\t\t\t\t\t\tinvalid = this.generateInvalid() ;\n\t\t\t\t\t\tthis.via = this.generateVia(invalid);\n\t\t\t\t\t\tif ( this.rport ){\n\t\t\t\t\t\t\treturn  '\"'+this.displayName+'\"'+\"<sip:\"+this.userName+\"@\"+ invalid +\":\"+ this.rport +\";transport=\"+this.transportType+\">\" ;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\treturn  '\"'+this.displayName+'\"'+\"<sip:\"+this.userName+\"@\"+ invalid +\";transport=\"+this.transportType+\">\" ; \n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"tcp\" :\n\t\t\t\t\tcase \"udp\" :\n\t\t\t\t\t\tinvalid = this.generateInvalid() ;\n\t\t\t\t\t\tthis.via = this.generateVia(invalid);\n\t\t\t\t\t\t//this.via = this.generateVia(this.publicAddress);\n\t\t\t\t\t\tif ( this.rport ){\n\t\t\t\t\t\t\treturn  '\"'+this.displayName+'\"'+\"<sip:\"+this.userName+\"@\"+invalid+\":\"+this.rport+\";transport=\"+this.transportType+\">\" ;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\treturn  '\"'+this.displayName+'\"'+\"<sip:\"+this.userName+\"@\"+invalid+\";transport=\"+this.transportType+\">\" ;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault :\n\t\t\t\t\t\tthrow new Error(\"SIP TRANSPORT TYPE NOT ALLOWED\") ;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this.contact ;\n\t\t}\n\n\t\tgetDialog (id){\n\t\t\tif ( id in this.dialogs ){\n\t\t\t\treturn this.dialogs[id] ;\n\t\t\t}\n\t\t\treturn null ;\t\n\t\t}\n\n\t\tinitTransport (transport){\n\t\t\tif ( transport ){\n\t\t\t\tthis.transport = transport ; \n\t\t\t}\n\n\t\t\t// GET REMOTE IP\n\t\t\tif (this.transport.publicAddress){\n\t\t\t\tthis.publicAddress = this.transport.domain.hostname ;\t\n\t\t\t\tthis.publicAddress = this.server ;\n\t\t\t}else{\n\t\t\t\tthis.publicAddress = this.server ;\t\n\t\t\t}\n\n\t\t\tswitch(this.settings.transport) {\n\t\t\t\t// realtime nodefony\n\t\t\t\tcase \"TCP\" :\n\t\t\t\tcase \"UDP\" :\n\t\t\t\t\tthis.transport.listen(this, \"onSubscribe\", function(service, message){\n\t\t\t\t\t\tif (service === \"SIP\" || service === \"OPENSIP\"){\n\t\t\t\t\t\t\tonStart.call(this, message);\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t\tthis.transport.listen(this, \"onUnsubscribe\", function(service, message){\n\t\t\t\t\t\tif (service === \"SIP\" || service === \"OPENSIP\"){\n\t\t\t\t\t\t\tonStop.call(this, message);\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t\tthis.transport.listen(this, \"onMessage\", function(service, message){\n\t\t\t\t\t\tif (service === \"SIP\" || service === \"OPENSIP\"){\n\t\t\t\t\t\t\tonMessage.call(this, message);\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t\tthis.transport.listen(this, \"onClose\", function( message){\n\t\t\t\t\t\tthis.quit(message);\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"WS\":\n\t\t\t\tcase \"WSS\":\n\t\t\t\t\tthis.transport.listen(this, \"onMessage\",  function( message){\n\t\t\t\t\t\t//this.notificationsCenter.fire(\"onMessage\",message.data);\n\t\t\t\t\t\tonMessage.call(this, message.data);\n\t\t\t\t\t});\n\t\t\t\t\tthis.transport.listen(this, \"onError\",function( message ){\n\t\t\t\t\t\tthis.notificationsCenter.fire(\"onError\", this.transport, message);\n\t\t\t\t\t});\n\t\t\t\t\tthis.transport.listen(this, \"onConnect\", function(message){\n\t\t\t\t\t\tthis.connect(message);\n\t\t\t\t\t});\n\t\t\t\t\tthis.transport.listen(this, \"onClose\", function( message){\n\t\t\t\t\t\tthis.quit(message);\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\t\t\t\tdefault :\n\t\t\t\t\tthis.fire(\"onError\", new Error(\"TRANSPORT LAYER NOT DEFINED\") ) ;\n\t\t\t}\n\t\t}\n\n\t\tclear (){\n\t\t\tif ( this.registerInterval  ){\n\t\t\t\tclearInterval(this.registerInterval);\n\t\t\t}\n\t\t\t//TODO\n\t\t\t//clean all setinterval\t\n\t\t\tfor (var dia in this.dialogs){\n\t\t\t\tthis.dialogs[dia].clear();\t\n\t\t\t}\n\t\t}\n\n\t\tquit (message){\n\t\t\tthis.fire(\"onQuit\",this, message);\n\t\t\tthis.unregister();\n\t\t\tthis.clear();\n\t\t}\n\n\t\tconnect (message){\n\t\t\tthis.fire(\"onConnect\",this, message);\n\t\t}\n\n\t\tlisten (){\n\t\t\treturn this.notificationsCenter.listen.apply(this.notificationsCenter, arguments);\n\t\t}\n\n\t\tfire (){\n\t\t\treturn this.notificationsCenter.fire.apply(this.notificationsCenter, arguments);\n\t\t}\n\n\t\tcreateDialog (method){\n\t\t\tvar dialog = new Dialog( method , this);\n\t\t\tconsole.log(\"SIP NEW DIALOG :\" + dialog.callId);\n\t\t\tthis.dialogs[dialog.callId] = dialog;\n\t\t\treturn dialog ;\n\t\t}\n\n\t\tregister (userName, password, settings){\n\t\t\tconsole.log(\"TRY TO REGISTER SIP : \" + userName + password);\n\t\t\tthis.contact = this.generateContact(userName, password, false, settings);\n\t\t\tthis.diagRegister = this.createDialog(\"REGISTER\");\n\t\t\tthis.diagRegister.register();\n\t\t\treturn this.diagRegister;\n\t\t}\n\n\t\tunregister (){\n\t\t\tvar diagRegister = this.createDialog(\"REGISTER\");\n\t\t\tdiagRegister.unregister();\n\t\t\treturn diagRegister;\n\t\t}\n\n\t\tinvite (userTo, description){\n\t\t\tvar diagInv = this.createDialog(\"INVITE\");\n\t\t\tvar transaction = diagInv.invite( userTo+\"@\"+this.publicAddress , description);\n\t\t\tdiagInv.toName = userTo ;\n\t\t\tthis.fire(\"onInitCall\", userTo ,diagInv, transaction);\n\t\t\treturn diagInv; \n\t\t}\n\n\t\tnotify (userTo, description, type){\n\t\t\tvar diagNotify = this.createDialog(\"NOTIFY\");\n\t\t\tdiagNotify.notify( userTo+\"@\"+this.publicAddress , description, type);\n\t\t\treturn diagNotify; \n\t\t}\n\n\t\tsend (data){\n\t\t\tconsole.log(\"SIP SEND : \" +data);\n\t\t\t\tthis.fire(\"onSend\", data) ;\n\t\t\tthis.transport.send( data );\n\t\t}\n\n\t\tbye (callId){\n\t\t\tfor ( var dialog in this.dialogs ){\n\t\t\t\tif (   callId ){\n\t\t\t\t\tif ( this.dialogs[dialog].callId === callId && this.dialogs[dialog].method !== \"REGISTER\" && this.dialogs[dialog].status === this.dialogs[dialog].statusCode.ESTABLISHED   ){\n\t\t\t\t\t\tthis.dialogs[dialog].bye();\n\t\t\t\t\t\tbreak ;\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tthis.dialogs[dialog].bye();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tstage.io.protocols.sip = SIP ;\t\n\treturn SIP ;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/io/protocols/sip/sip.es6","module.exports =  function(stage){\n \n\t'use strict';\n\n\tvar defaultSettings = {\n\t\n\t};\n\n\tvar settingsSyslog = {\n\t\tmoduleName:\"REALTIME\",\n\t\tdefaultSeverity:\"INFO\"\n\t};\n\n\tvar send = function(data){\n\t\tthis.protocol.send(data)\t\n\t};\n\n\n\tvar realtime = class realtime  {\n\n\t\tconstructor(urlServer, settings){\n\t\t\tif (! urlServer){\n\t\t\t\tthrow new Error(\"realtime url server is not defined\");\n\t\t\t}\n\t\t\tthis.settings = stage.extend({}, defaultSettings, settings); \n\t\t\tthis.notificationCenter = stage.notificationsCenter.create(this.settings, this);\n\t\t\tthis.syslog =  new stage.syslog(settingsSyslog);\n\t\t\tthis.url = stage.io.urlToOject(urlServer) ;\n\t\t\t//this.crossDomain =  ! stage.io.isSameOrigin(this.url.href);\t\n\t\t\tthis.protocol = new stage.io.protocols.bayeux(this.url); \n\t\t\tthis.services = null;\n\t\t\tthis.subscribedService = {};\n\t\t\tthis.nbSubscribed = 0 ;\n\t\t\tthis.connected = false ;\n\t\t\tthis.publicAddress = null;\n\t\t\tthis.domain = null;\n\n\t\t\t/*\n \t\t \t*\tEVENT REALTIME\n \t\t \t*/\n\t\t\tthis.notificationCenter.listen(this, \"onAuthorized\", function(){\n\t\t\t\tthis.protocol.handshake(this.url.href)\n\t\t\t});\n\n\t\t\t/*\n \t\t \t*\tEVENTS PROTOCOL BAYEUX\n \t\t \t*/\n\t\t\tthis.protocol.notificationCenter.listen(this, \"onMessage\", this.onMessage);\n\t\t\tthis.protocol.notificationCenter.listen(this, \"onHandshake\", function(message, socket){\n\t\t\t\tif (message.ext && message.ext.address){\n\t\t\t\t\tvar addr = JSON.parse(message.ext.address);\n\t\t\t\t\tthis.publicAddress = addr.remoteAddress ;\n\t\t\t\t\tthis.domain = addr.host;\n\t\t\t\t}\n\t\t\t\tthis.notificationCenter.fire(\"onHandshake\", message, socket, this)\t\n\t\t\t});\n\t\t\tthis.protocol.notificationCenter.listen(this, \"onConnect\", function(message){\n\t\t\t\tthis.services = message.data;\n\t\t\t\tthis.connected = true ;\n\t\t\t\tif (message.ext && message.ext.address){\n\t\t\t\t\tvar addr = JSON.parse(message.ext.address);\n\t\t\t\t\tthis.publicAddress = addr.remoteAddress ;\n\t\t\t\t\tthis.domain = addr.host;\n\t\t\t\t}\n\t\t\t\tthis.notificationCenter.fire(\"onConnect\", message, this)\n\t\t\t}); \n\t\t\tthis.protocol.notificationCenter.listen(this, \"onDisconnect\", function(message){\n\t\t\t\tthis.services = message.data;\n\t\t\t\tthis.connected = false ;\n\t\t\t\tthis.notificationCenter.fire(\"onDisconnect\", message, this)\n\t\t\t});\n\t\t\tthis.protocol.notificationCenter.listen(this, \"reConnect\", function(bayeux){\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.start();\n\t\t\t\t}, 60000)\n\t\t\t});\n\t\t\tthis.protocol.notificationCenter.listen(this, \"onSubscribe\", function(message){\n\t\t\t\tvar service = message.subscription.split(\"/\")[2];\n\t\t\t\tthis.subscribedService[service] = message ;\n\t\t\t\tthis.nbSubscribed ++ ;\n\t\t\t\tthis.notificationCenter.fire(\"onSubscribe\", service, message, this)\n\t\t\t}); \n\t\t\tthis.protocol.notificationCenter.listen(this, \"onUnsubscribe\", function(message){\n\t\t\t\tvar service = message.subscription.split(\"/\")[2];\n\t\t\t\tdelete this.subscribedService[service];\n\t\t\t\tthis.nbSubscribed -- ;\n\t\t\t\tthis.notificationCenter.fire(\"onUnSubscribe\", service, message, this)\n\t\t\t});\n\t\t\tthis.protocol.notificationCenter.listen(this, \"onError\", function(code, arg, message){\n\t\t\t\tthis.notificationCenter.fire(\"onError\", code, arg, message);\n\t\t\t}); \n\t\t\tthis.protocol.notificationCenter.listen(this, \"onClose\", function(message){\n\t\t\t\tthis.connected = false ;\n\t\t\t\tthis.notificationCenter.fire(\"onClose\", message);\n\t\t\t\tfor(var service in this.subscribedService ){\n\t\t\t\t\t//this.unSubscribe(service);\n\t\t\t\t\tdelete this.subscribedService[service];\n\t\t\t\t}\n\t\t\t});\n\t\t\t//this.start();\t\n\t\t}\n\n\t\tlisten (){\n\t\t\treturn \tthis.notificationCenter.listen.apply(this.notificationCenter, arguments);\n\t\t}\n\n\t\tunListen (){\n\t\t\treturn \tthis.notificationCenter.unListen.apply(this.notificationCenter, arguments);\n\t\t}\n\n\t\tstart (){\n\t\t\tif ( this.connected ){\n\t\t\t\t//throw new Error(\"connection already started\");\n\t\t\t\tthis.notificationCenter.fire(\"onError\", 500, this, \"connection already started\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar statusCode  = {\n\t\t\t\t\n                \t\t401: (request, type, message) => {\n\t\t\t\t\tvar auth = request.getResponseHeader(\"WWW-Authenticate\");\n\t\t\t\t\tvar res = request.responseText;\n\t\t\t\t\tvar obj =  {\n\t\t\t\t\t\t\"WWW-Authenticate\":request.getResponseHeader(\"WWW-Authenticate\"),\n\t\t\t\t\t\tbody:request.responseText\n\t\t\t\t\t}\n\t\t\t\t\tthis.authenticate = new stage.io.authentication.authenticate(this.url, obj, {\n\t\t\t\t\t\tajax:true,\n\t\t\t\t\t\tonSuccess:(data, type, xhr) => {\n\t\t\t\t\t\t\tthis.notificationCenter.fire('onAuthorized',data, type, xhr);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonError:(obj, type, message) => {\n\t\t\t\t\t\t\tvar res = stage.io.getHeaderJSON(obj);\n\t\t\t\t\t\t\tif (res){\n\t\t\t\t\t\t\t\tthis.notificationCenter.fire('onError',401, obj, res)\t\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tthis.notificationCenter.fire('onError',401, obj, message)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthis.notificationCenter.fire('onUnauthorized', this.authenticate , this);\n                \t\t},\n\t\t\t\t404:(obj, type, message) => {\n\t\t\t\t\t// '404 - realtimeD server not available'\n\t\t\t\t\tthis.notificationCenter.fire('onError',404, obj, message );\t\n\t\t\t\t},\n                \t\t503: (obj, type, message) => {\n\t\t\t\t\t//  '503 - Service Unavailable'\n\t\t\t    \t\tthis.notificationCenter.fire('onError',503, obj, message);\n                \t\t}   \n            \t\t};\n\n\t\t\treturn $.ajax({\n            \t\t\tmethod: 'GET',\n\t\t        \tcache:false,\n            \t\t\turl: this.url.href ,\n            \t\t\tstatusCode:statusCode,\n\t\t        \tsuccess:(data, type, xhr) => {\n\t\t\t\t\tthis.notificationCenter.fire('onAuthorized',data, type, xhr);\n\t\t\t\t},\n            \t\t\terror: (obj, type, message) => {\n\t\t\t\t\tif (obj.status in statusCode )\n\t\t\t\t\t\treturn ;\n\t\t\t\t\tthis.notificationCenter.fire('onError', obj.status, obj, message);\n            \t\t\t}\n        \t\t});\n\t\t}\n\n\t\tsubscribe (name, data){\n\t\t\tif ( ! this.connected ){\n\t\t\t\tthis.notificationCenter.fire('onError', 500, this, \"Not connected\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif ( name in this.services ){\n\t\t\t\tif (name in this.subscribedService ){\n\t\t\t\t\tthis.notificationCenter.fire('onError', 500, this, \"already subscribed\");\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn send.call(this,  this.protocol.subscribe(name, data) ) ;\t\n\t\t\t}\t\n\t\t\tthis.notificationCenter.fire('onError', 500, this, \"service : \"+ name + \" not exist\");\t\n\t\t\treturn false ;\n\t\t}\n\n\t\tunSubscribe (name, data){\n\t\t\tif ( ! this.connected ){\n\t\t\t\tthis.notificationCenter.fire('onError', 500, this, \"Not connected\");\t\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif ( name in this.services ){\n\t\t\t\t\n\t\t\t\tif (  name in this.subscribedService ){\n\t\t\t\t\tvar clientId = this.subscribedService[name].clientId;\n\t\t\t\t\treturn send.call(this,  this.protocol.unSubscribe(name, clientId, data) ) ;\t\n\t\t\t\t}else{\n\t\t\t\t\tthis.notificationCenter.fire('onError', 500, this, \"service : \"+ name + \" not subcribed\");\t\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.notificationCenter.fire('onError', 404, this, \"service : \"+ name + \" not exist\");\t\n\t\t\treturn false;\n\t\t}\n\n\t\tsendMessage (service , data){\n\t\t\tif ( ! this.connected ){\n\t\t\t\tthis.notificationCenter.fire('onError', 500, this, \"Not connected\");\t\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif ( service in this.services ){\n\t\t\t\tif (service in this.subscribedService ){\n\t\t\t\t\tvar clientId = this.subscribedService[service].clientId;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar proto = this.protocol.sendMessage(service, data, clientId) ;\n\t\t\t\t\t\tsend.call(this,  proto );\n\t\t\t\t\t\treturn JSON.parse(proto).id\t\n\t\t\t\t\t}catch(e){\n\t\t\t\t\t\tthis.fire(\"onError\",500, e, e.message);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tthis.notificationCenter.fire('onError', 500, this, \"service : \"+ service + \" not subcribed\");\t\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.fire(\"onError\",404, this, \"service :\"+service + \" not exit\");\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tstop (){\n\t\t\tif (  this.connected ){\n\t\t\t\tthis.protocol.stopReConnect();\n\t\t\t\tfor(var service in this.subscribedService ){\n\t\t\t\t\t//this.unSubscribe(service);\n\t\t\t\t\tdelete this.subscribedService[service];\n\t\t\t\t}\n\t\t\t\treturn send.call(this, this.protocol.disconnect() );\n\t\t\t}\n\t\t\tthrow new Error(\"connection already stoped\");\n\t\t}\n\n\t\tonMessage (message){\n\t\t\tif (message.error){\n\t\t\t\tif (message.channel){\n\t\t\t\t\tthis.notificationCenter.fire(\"onError\", message.error);\n\t\t\t\t}else{\n\t\t\t\t\tthis.notificationCenter.fire(\"onError\",message.id, message.successful );\t\t\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif (message.channel){\n\t\t\t\t\tthis.notificationCenter.fire(\"onMessage\", message.channel.split(\"/\")[2], message.data);\n\t\t\t\t}else{\n\t\t\t\t\tthis.notificationCenter.fire(\"onMessage\",message.id, message.successful);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tstage.realtime = realtime ;\n\treturn realtime ;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/io/realtime/realtime.es6","module.exports =  function(stage){\n\n\n\tvar defaultSettings = {\n\t\tdelay: 0,\n\t\tasync: false,\n\t\t\n\t\tajax: {\n\t\t\tcache: true,\n\t\t\tdataType: 'json',\n\t\t\ttype: 'GET',\n\t\t\tcontentType: 'application/x-www-form-urlencoded; charset=UTF-8'\n\t\t}\n\t};\n\t\n\tvar pollAction = function(ajaxConfig){\n\t\tajaxConfig.data = this.data.get();\n\t\tthis.transport = jQuery.ajax(ajaxConfig);\n\t};\n\t\n\tvar pollling = function(ajaxConfig){\n\t\t\n\t\tif(this.settings.delay){\n\t\t\tthis.timer = setTimeout(pollAction.bind(this, ajaxConfig), this.settings.delay);\t\n\t\t} else {\n\t\t\tpollAction.call(this, ajaxConfig);\n\t\t}\t\t\n\t};\n\t\n\t/*\n \t *\n \t *\n \t */\n\tvar longPoll = class longPoll extends stage.io.transports.poll  {\n\n\t\tconstructor(url, settings){\n\t\t\tsuper(url, settings);\n\t\t\tthis.settings = stage.extend(true, {}, defaultSettings, settings);\n\t\t}\n\n\t\tstart (){\n\t\t\tvar ajaxConfig = this.buildAjaxSettings();\n\t\t\tthis.transport = null;\n\t\t\tajaxConfig.complete = (xhr, status) => {\n\t\t\t\tpollling.call(this, ajaxConfig);\n\t\t\t};\n\t\t\tpollling.call(this, ajaxConfig);\n\t\t\treturn this;\n\t\t}\n\n\t\tstop (){\n\t\t\tthis.transport.abort();\n\t\t\tthis.transport = null;\n\n\t\t\tif(this.timer){\n\t\t\t\tclearTimeout(this.timer);\n\t\t\t}\n\t\t\tthis.connectState = false;\n\t\t\tthis.fire('onStop', this);\n\t\t\treturn this;\n\t\t}\n\t}\n\n\tstage.io.transports.longPoll = longPoll ;\n\treturn longPoll;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/io/transports/in/longPoll.es6","module.exports =  function(stage){\n\n\tvar defaultSettings = {\n\t\tdelay: 1000,\n\t\tasync : true,\n\t\t\n\t\tajax: {\n\t\t\tcache: true,\n\t\t\tdataType: 'json',\n\t\t\ttype: 'GET',\n\t\t\tcontentType: 'application/x-www-form-urlencoded; charset=UTF-8'\n\t\t}\n\t};\n\n\tvar pollling = function(ajaxConfig){\n\t\t\n\t\tvar tokenKey = (new Date()).getTime();\n\t\tajaxConfig.data = this.data.get();\n\t\tvar transport = jQuery.ajax(ajaxConfig);\n\t\ttransport.tokenKey = tokenKey;\n\t\tthis.transport[tokenKey] = transport;\n\t};\n\t\n\t/*\n \t *\n \t */\n\tvar httpData = class httpData  {\n\t\tconstructor(contentType, method){\n\t\t\tthis.reset();\n\t\t\tif(contentType) {\n\t\t\t\tthis.contentType = contentType;\n\t\t\t}\n\t\t\tif(method) {\n\t\t\t\tthis.method = method;\n\t\t\t}\n\t\t}\n\n\t\tadd (data, permanent){\n\t\t\tthis[permanent ? \"permanent\" : \"transient\"] = data;\n\t\t}\n\n\t\tget (){\n\n\t    \t\tvar data = (this.transient ? this.transient : this.permanent);\n\t    \t\tthis.transient = '';\n        \t\t//return this.contentType.search('json') >= 0 && typeof(data) == 'object' && this.method.toUpperCase() != 'GET' ? JSON.stringify(data) : data;\n\t    \t\tswitch(this.contentType.split(';')[0].replace(/ /g, '')){\n\t    \t\t\tcase 'application/json':\n\t    \t\t\tcase 'text/json':\n\t    \t\t\t\tif(this.method.toUpperCase() != 'GET' && typeof(data) == 'object'){\n\t    \t\t\t\t\tdata = JSON.stringify(data);\n\t    \t\t\t\t} \n\t    \t\t\t\tbreak;\n\t    \t\t}\n\n\t    \t\treturn data;\n\t\t}\n\n\t\treset (){\n\t    \t\tthis.contentType = '';\n\t    \t\tthis.method = 'GET';\n\t\t\tthis.permanent = '';\n\t\t\tthis.transient = '';\n\t\t}\n\n\t};\n\n\t/*\n\t *\tEVENT :\n\t *\t\tonStart\n\t *\t\tonStop\n\t *\t\tonMessage\n\t *\t\tonError \n\t */\n\tvar poll = class poll extends stage.io.transport  {\n\n\t\tconstructor(url, settings){\n\t\t\tsuper(url, settings);\n\t\t\tthis.settings = jQuery.extend(true, {}, defaultSettings, settings);\n\t\t\tthis.data = new httpData(this.settings.ajax.contentType, this.settings.ajax.type);\n\t\t\tthis.connectState = false;\t\n\t\t}\n\n\t\tbuildAjaxSettings (){\n\n\t\t\tvar settings = jQuery.extend(true, {}, this.settings.ajax,{\n\t\t\t\turl: this.url.href,\n\t\t\t    crossDomain: this.crossDomain,\n\t\t\t    beforeSend: function(xhr){\n\t\t\t\t    if ( ! this.connectState){\n\t\t\t\t\t    this.fire.call(this, \"onStart\", this);\n\t\t\t\t\t    this.connectState = true;\n\t\t\t\t    }\n\t\t\t    }.bind(this),\n\t\t\t    success: function(data, state, xhr){\n\t\t\t\t    this.fire(\"onMessage\", data , this, xhr);\n\t\t\t    }.bind(this),\n\t\t\t    error: function(xhr, status, error){\n\t\t\t\t    switch(status){\n\t\t\t\t\t    case 'abort':\n\t\t\t\t\t\t    this.fire(\"onAbort\", error, this, xhr);\t\n\t\t\t\t\t\t    break;\n\n\t\t\t\t\t    case 'timeout':\n\t\t\t\t\t\t    this.fire(\"onTimeout\", error, this, xhr);\t\n\t\t\t\t\t\t    break;\n\n\t\t\t\t\t    default:\n\t\t\t\t\t\t    this.fire(\"onError\", error, this, xhr);\n\t\t\t\t    }\n\t\t\t    }.bind(this)\n\t\t\t});\n\t\t\treturn settings;\n\t\t}\n\n\t\tstart (){\n\n\t\t\tvar ajaxConfig = this.buildAjaxSettings();\n\n\t\t\tthis.transport = {};\n\t\t\tajaxConfig.complete = function(xhr, status){\n\t\t\t\tif(this.transport[xhr.tokenKey]) delete this.transport[xhr.tokenKey];\n\t\t\t}.bind(this);\n\t\t\tpollling.call(this, ajaxConfig);\n\t\t\tthis.idInterval = setInterval(pollling.bind(this, ajaxConfig), this.settings.delay);\n\n\t\t\treturn this;\n\t\t}\n\n\t\tsetData (data, permanent){\n\t\t\tthis.data.add(data, permanent);\n\t\t\treturn this;\n\t\t}\n\n\t\tstop (){\n\n\t\t\tif (Object.keys(this.transport).length > 0){\n\t\t\t\tfor(var tokenKey in this.transport){\n\t\t\t\t\tthis.transport[tokenKey].abort();\n\t\t\t\t\tdelete this.transport[tokenKey];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.idInterval) {\n\t\t\t\tclearInterval(this.idInterval);\n\t\t\t\tthis.idInterval = null;\n\t\t\t}\n\n\t\t\tthis.connectState = false;\n\n\t\t\tthis.fire('onStop', this);\n\t\t\treturn this;\n\t\t}\n\n\t\tdestroy (){\n\t\t\tthis.close();\n\t\t\treturn this;\n\t\t}\n\t};\t\n\t\n\tstage.io.transports.poll = poll ;\n\treturn poll;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/io/transports/in/poll.es6","module.exports =  function(stage){\n\n\tvar defaultSettings = {\n\t\ttype:\"websocket\" //   websocket | poll | longPoll \n\t};\n\n\tvar bestTransport = function(){\n\t\n\t}; \n\n\tvar socket = class socket extends stage.notificationsCenter.notification  {\n\n\t\tconstructor(url, localSettings){\n\n\t\t\tvar settings = stage.extend({}, defaultSettings, localSettings);\n\n\t\t\tsuper(settings);\t\n\n\t\t\tthis.settings = settings ;\n\n\t\t\tswitch (this.settings.type){\n\t\t\t\tcase \"websocket\":\n\t\t\t\t\tthis.socket = stage.io.transports.websocket ; \n\t\t\t\t\tbreak;\n\t\t\t\tcase \"poll\":\n\t\t\t\t\tthis.socket = stage.io.transports.ajax ;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"longPoll\":\n\t\t\t\t\tthis.socket = stage.io.transports.ajax ;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tthis.listen(this, \"onConnect\");\n\t\t\tthis.listen(this, \"onClose\");\n\t\t\tthis.listen(this, \"onError\");\n\t\t\tthis.listen(this, \"onMessage\");\n\t\t\tthis.listen(this, \"onTimeout\");\n\t\t}\n\n\t\twrite(settings){\n\t\t\tthis.transport.send();\n\t\t}\n\n\t\tclose (settings){\n\t\t\tthis.transport.close();\n\t\t}\n\n\t\tconnect (url, settings){\n\t\t\tthis.transport = new this.socket(url, settings);\n\t\t\tthis.transport.onmessage = this.listen(this, \"onMessage\");\n\t\t}\n\n\t\tdestroy (settings){\n\t\t\tthis.transport = null ;\n\t\t\tthis.clearNotifications();\n\t\t}\n\t};\n\n\tstage.io.socket = socket ;\n\treturn socket ;\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/io/transports/socket.es6","module.exports =  function(stage){\n\n\t/*\n \t *\n \t */\n\tvar websocket = class websocket extends stage.io.transport  {\n\n\t\tconstructor(url, settings){\n\t\t\tif (url){\n\t\t\t\tsuper(url, settings);\n\t\t\t\tthis.connect(url, settings);\n\t\t\t}else{\n\t\t\t\tsuper();\n\t\t\t\tthis.socket = null;\n\t\t\t}\n\t\t}\n\n\t\tconnect (url, settings){\n\t\t\tthis.socket = new WebSocket(url, settings.protocol );\n\t\t\tthis.socket.onmessage = this.listen(this, \"onMessage\");\n\t\t\tthis.socket.onerror = this.listen(this, \"onError\");\n\t\t\tthis.socket.onopen = this.listen(this, \"onConnect\");\n\t\t\tthis.socket.onclose = this.listen(this, \"onClose\");\n\t\t\treturn this.socket ;\n\t\t}\n\n\n\t\tclose (url, settings){\n\t\t\tthis.socket.close();\n\t\t}\n\n\t\tsend (data){\n\t\t\tthis.socket.send(data);\n\t\t}\n\n\t\tdestroy (data){\n\t\t\tdelete this.socket ;\n\t\t\tthis.socket = null;\n\t\t}\n\t};\n\n\tstage.io.transports.websocket = websocket ;\n\n\treturn websocket;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/io/transports/websockets/websocket.es6","module.exports =  function(stage){\n\n\t'use strict';\n\n\t\t \n\tvar appKernel = class appKernel extends  stage.kernel  {\n\n\t\tconstructor(url, environnement, settings){\n\n\t\t\tswitch (arguments.length){\n\t\t\t\tcase 0 :\n\t\t\t\t\turl = null ;\n\t\t\t\t\tenvironnement = \"prod\" ;\n\t\t\t\t\tsettings = {} ;\n\t\t\t\tbreak;\n\t\t\t\tcase 1 :\n\t\t\t\t\tenvironnement = url ;\n\t\t\t\t\tsettings = {} ;\n\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\tsettings = environnement;\n\t\t\t\t\tenvironnement = url;\n\t\t\t\t\turl = null ;\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tsuper(environnement, settings);\n\t\t\tif ( url ){\n\t\t\t\tthis.loadModule(url,{\n\t\t\t\t\tasync:false\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tthis.fire(\"onBoot\", this);\n\t\t\t}\n\t\t}\n\t};\n\n\tstage.appKernel = appKernel ;\n\treturn appKernel ;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/kernel/appKernel.es6","const shortId = require('shortid');\n\nmodule.exports =  function(stage){\n\n\t'use strict';\n\n\tvar generateId = function(){\n\t\treturn shortId.generate();\n\t};\n\n\n\tvar loader = function(){\n\t\t\n\t\tvar AJAX = {\n\t\t\tcss : {\n\t\t\t\tmineType :\t\"text/css\",\n\t\t\t\ttag:\t\t\"style\",\n\t\t\t\tmedia:\t\t\"screen\",\n\t\t\t\ttype:\t\t\"stylesheet\",\n\t\t\t\tposition:\t\"HEAD\"\n\t\t\t},\n\t\t\tjs:{\n\t\t\t\tmineType :\t\"text/javascript\",\n\t\t\t\ttag:\t\t\"script\",\n\t\t\t\tposition:\t\"BODY\"\n\t\t\t}\n\t\t};\n\n\t\tvar SCRIPT = {\n\t\t\tcss : {\n\t\t\t\tmineType :\t\"text/css\",\n\t\t\t\ttag:\t\t\"link\",\n\t\t\t\tmedia:\t\t\"screen\",\n\t\t\t\ttype:\t\t\"stylesheet\",\n\t\t\t\tposition:\t\"HEAD\"\n\t\t\t},\n\t\t\tjs:{\n\t\t\t\tmineType :\t\"text/javascript\",\n\t\t\t\ttag:\t\t\"script\",\n\t\t\t\tposition:\t\"BODY\"\n\t\t\t}\n\t\t};\n\n\t\tvar insert = function(position, script){\n\t\t\tswitch(position){\n\t\t\t\tcase \"HEAD\" :\n\t\t\t\t\tvar head = document.getElementsByTagName('head')[0];\n\t\t\t\t\thead.appendChild(script);\n\t\t\t\tbreak;\n\t\t\t\tcase \"BODY\" :\n\t\t\t\t\tvar body = document.getElementsByTagName('body')[0]\n\t\t\t\t\tbody.appendChild(script);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t};\n\n\n\t\treturn function(src, tag , id, transport, callback){\n\t\t\t//if (tag == \"js\") transport = \"ajax\";\n\t\t\t//if (tag == \"css\") transport = \"ajax\";\n\t\t\tswitch (tag){\n\t\t\t\tcase \"js\":\n\t\t\t\t\t/*var def = AJAX[tag];\n\t\t\t\t\tvar script = document.createElement(def.tag);\n\t\t\t\t\tscript.setAttribute('type', def.mineType);\n\t\t\t\t\tscript.setAttribute('id', id + '_'+tag);\n\t\t\t\t\tif ( tag === \"css\" ){\n\t\t\t\t\t\tscript.setAttribute('media', def.media);\n\t\t\t\t\t}\n\t\t\t\t\t$.ajax(src, {\n\t\t\t\t\t\tasync:false,\n\t\t\t\t\t\t//cache:true,\n\t\t\t\t\t\tdataType:\"text\",\n\t\t\t\t\t\tsuccess:function(data, status, xhr){\n\t\t\t\t\t\t\tthis.cache[id] = script ;\n\t\t\t\t\t\t\tinsert(def.position, script);\n\t\t\t\t\t\t\t$(script).text(data);\n\t\t\t\t\t\t\tthis.logger(\"LOAD FILE :\" + src,\"DEBUG\");\n\t\t\t\t\t\t\tcallback(null, xhr);\n\t\t\t\t\t\t}.bind(this),\n\t\t\t\t\t\terror:function(xhr, status, message){\n\t\t\t\t\t\t\tthis.logger(src+\" :\" +message,\"ERROR\");\n\t\t\t\t\t\t\tcallback(message, xhr);\n\t\t\t\t\t\t}.bind(this)\n\t\t\t\t\t});*/\n\t\t\t\t\t \n\t\t\t\t\treturn $.ajax({\n\t\t\t\t\t\turl: src,\n\t\t\t\t\t        async:false,\n\t\t\t\t\t\tdataType: \"script\",\n\t\t\t\t\t\tsuccess: (data, status, xhr) => {\n\t\t\t\t\t\t\t//this.logger(\"LOAD FILE :\" + src,\"DEBUG\");\n\t\t\t\t\t\t\tcallback(null, xhr);\t\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror:(xhr, status, message) => {\n\t\t\t\t\t\t\tthis.logger(src+\" :\" +message,\"ERROR\");\n\t\t\t\t\t\t\tcallback(message, xhr);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\n\n\n\t\t\t\tbreak;\n\t\t\t\tcase \"css\":\n\t\t\t\t\tvar def = SCRIPT[tag];\n\t\t\t\t\tvar script = document.createElement(def.tag);\n\t\t\t\t\tscript.setAttribute('type', def.mineType);\n\t\t\t\t\tscript.setAttribute('id', id + '_'+tag);\n\t\t\t\t\tif ( tag === \"css\" ){\n\t\t\t\t\t\tscript.setAttribute('media', def.media);\n\t\t\t\t\t\tscript.href = src;/*+ '?time=' + id;*/\n\t\t\t\t\t\tscript.rel = def.type;\n\t\t\t\t\t\tscript.async = false;\n\t\t\t\t\t}\n\t\t\t\t\tif (tag === \"js\"){\n\t\t\t\t\t\tscript.src = src;/*+ '?time=' + id;*/\n\t\t\t\t\t\tscript.async = false;\n\t\t\t\t\t}\n\t\t\t\t\tscript.onload = () => {\n\t\t\t\t\t\tthis.cache[id] = script;\n\t\t\t\t\t\tthis.logger(\"LOAD FILE :\" + src,\"DEBUG\");\n\t\t\t\t\t\tcallback(null, script);\n\t\t\t\t\t};\n\t\t\t\t\tscript.onerror = (error) => {\n\t\t\t\t\t\tthis.logger(src ,\"ERROR\");\n\t\t\t\t\t\tcallback(error, script);\n\t\t\t\t\t};\n\t\t\t\t\tinsert(def.position, script);\n\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.logger( new Error (\"autoload  type transport error \"), \"ERROR\" );\n\t\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn script ;\n\t\t}\n\t}();\n\n\n\n\t/*\n \t *\n \t * CLASS AUTOLOAD\n \t *\n \t */\n\tvar defaultSetting = {\n\t\ttransport:\"script\",\n\t\tprefix:null\n\t};\n\n\tvar regType = /(.*)\\.(js)$|(.*)\\.(css)$/;\n\n\tvar autoload = class autoload {\n\n\t\tconstructor(kernel, settings){\n\t\t\tthis.settings = jQuery.extend({}, defaultSetting, settings)\n\t\t\tthis.cache = {};\n\t\t\tthis.prefix = this.settings.prefix  ;\n\t\t\tthis.syslog = kernel.syslog || null ;\n\t\t\tthis.transport = this.settings.transport ;\n\t\t\tthis.logger(\"INITIALIZE AUTOLOAD SERVICE\", \"DEBUG\");\n\t\t}\n\n\t\tload (file, callback){\n\t\t\tvar id = generateId();\n\t\t\tvar res = regType.exec(file);\n\t\t\tif ( ! res) {\n\t\t\t\tthis.logger(\"autoload error type file  \",\"ERROR\")\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tvar script = loader.call(this, file, res[2] || res[4] , id, this.transport, callback)\n\t\t\treturn id \n\t\t}\n\n\t\tlogger (pci, severity, msgid,  msg){\n\t\t\tif (this.syslog){\n\t\t\t\tif (! msgid) msgid = \"AUTOLOADER  \";\n\t\t\t\treturn this.syslog.logger(pci, severity , msgid,  msg);\n\t\t\t}else{\n\t\t\t\tconsole.log(pci);\n\t\t\t}\n\t\t}\n\n\t\tunLoad (id, callback){\n\t\t\tif (id in this.cache){\n\t\t\t\tvar tag = this.cache[id]\n\t\t\t\ttag.parentNode.removeChild(tag);\n\t\t\t\tdelete \tthis.cache[id] ;\t\n\t\t\t\treturn callback(id);\n\t\t\t}else{\n\t\t\t\tthis.logger(\"Autoload unLoad no tag find :\" +id ,\"ERROR\")\n\t\t\t}\n\t\t}\n\t};\n\n\tstage.autoload =  autoload ;\n\treturn autoload ; \n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/kernel/autoload.es6","const shortId = require('shortid');\n\nmodule.exports =  function(stage){\n\n\t'use strict';\n\n\n\tvar ISDefined = function(ele){\n\t\tif (ele !== null && ele !== undefined ){\n\t\t\treturn true ;\n\t\t}\n\t\treturn false;\n\t};\n\n\tvar generateId = function(){\n\t\treturn shortId.generate();\n\t};\n\n\tvar parseParameterString = function(str, value){\n\t\tvar ns = null ; \n\t\tswitch( stage.typeOf(str) ){\n\t\t\tcase \"string\" :\n\t\t\t\treturn parseParameterString.call(this,str.split(\".\") , value);\n\t\t\tcase \"array\" :\n\t\t\t\tswitch(str.length){\n\t\t\t\t\tcase 1 :\n\t\t\t\t\t\tns = Array.prototype.shift.call(str);\n\t\t\t\t\t\tif ( ! this[ns] ){\n\t\t\t\t\t\t\tthis[ns] = value;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif ( ISDefined(value) ){\n\t\t\t\t\t\t\t\tthis[ns] = value ;\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\treturn this[ns];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn value ;\n\t\t\t\t\tdefault :\n\t\t\t\t\t\tns = Array.prototype.shift.call(str);\n\t\t\t\t\t\tif ( ! this[ns] && ISDefined(value)  ){\n\t\t\t\t\t\t\tthis[ns] = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn parseParameterString.call(this[ns], str, value);\t\n\t\t\t\t}\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t}\n\t};\n\n\t/*\n \t *\n \t *\tCONTAINER CLASS\n \t *\n \t */\n\tvar Container = class Container {\n\n\t\tconstructor (services, parameters){\n\t\t\tthis.protoService = function(){};\n\t\t\tthis.protoParameters = function(){};\n\t\t\tthis.scope = {};\n\t\t\tthis.services = new this.protoService();\n\t\t\tif (services && typeof services === \"object\"){\n\t\t\t\tfor (var service in services){\n\t\t\t\t\tthis.set(service, services[service]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.parameters = new this.protoParameters();\n\t\t\tif (parameters && typeof parameters === \"object\"){\n\t\t\t\tfor (var parameter in parameters){\n\t\t\t\t\tthis.set(parameter, parameters[parameter]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlogger (pci, severity, msgid,  msg){\n\t\t\tvar syslog = this.get(\"syslog\");\n\t\t\tif (! msgid) { msgid = \"CONTAINER SERVICES \"; }\n\t\t\treturn syslog.logger(pci, severity, msgid,  msg);\n\t\t}\n\n\t\tset (name, object){\n\t\t\treturn this.protoService.prototype[name] = object;\n\t\t}\n\n\t\tget (name){\n\t\t\tif (name in this.services){\n\t\t\t\treturn this.services[name];\n\t\t\t}\n\t\t\treturn null;\n\t\t\t//this.logger(\"GET : \" + name+\" don't exist\", \"WARNING\");\t\n\t\t}\n\n\t\thas (name){\n\t\t\treturn this.services[name];\n\t\t}\n\n\t\taddScope (name){\n\t\t\tif (! this.scope[name] ){\n\t\t\t\treturn  this.scope[name] = {};\n\t\t\t}\n\t\t\treturn this.scope[name];\n\t\t}\n\n\t\tenterScope (name){\n\t\t\tvar sc = new Scope(name, this);\n\t\t\tthis.scope[name][sc.id] = sc ;\n\t\t\treturn sc;\n\t\t}\n\n\t\tenterScopeExtended (name){\n\t\t\tvar sc = new ExtendedScope(name, this);\n\t\t\tthis.scope[name][sc.id] = sc ;\n\t\t\treturn sc;\n\t\t}\n\n\t\tleaveScope (scope){\n\t\t\tif ( this.scope[scope.name] ){\n\t\t\t\tvar sc = this.scope[scope.name][scope.id];\n\t\t\t\tif (sc){\n\t\t\t\t\tsc.clean();\n\t\t\t\t\t//console.log(\"pass leaveScope \"+ scope.id)\n\t\t\t\t\tdelete this.scope[scope.name][scope.id];\n\t\t\t\t\tsc= null ;\n\t\t\t\t}\n\t\t\t\t//console.log(this.scope)\n\t\t\t}\n\t\t}\n\n\t\tremoveScope (name){\n\t\t\tif ( this.scope[name] ){\n\t\t\t\tfor( var scope in this.scope[name] ){\n\t\t\t\t\tthis.leaveScope(this.scope[name][scope]) ;\n\t\t\t\t}\n\t\t\t\tdelete this.scope[name] ;\n\t\t\t}\n\t\t}\n\n\t\tsetParameters (name, str){\n\t\t\tif (typeof name !== \"string\"){\n\t\t\t\tthis.logger(new Error(\"setParameters : container parameter name must be a string\"));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif ( ! ISDefined(str) ){\n\t\t\t\tthis.logger(new Error(\"setParameters : \"+name+\" container parameter value must be define\"));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif ( parseParameterString.call(this.protoParameters.prototype, name, str) === str ){\n\t\t\t\treturn str;\n\t\t\t}else{\n\t\t\t\tthis.logger(new Error(\"container parameter \"+ name+\" parse error\"));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tgetParameters (name){\n\t\t\tif (typeof name !== \"string\"){\n\t\t\t\tthis.logger(new Error(\"container parameter name must be a string\"));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t//return parseParameterString.call(this.protoParameters.prototype, name, null);  \n\t\t\treturn parseParameterString.call(this.parameters, name, null);  \n\t\t}\n\t};\n\n\t/*\n \t *\n \t *\tSCOPE CLASS\n \t *\n \t */\n\n\tvar Scope = class Scope extends Container {\n\n\t\tconstructor( name, parent){\n    \t\t\tsuper();\n    \t\t\tthis.name = name;\n\t\t\tthis.parent = parent;\n    \t\t\tthis.services = new parent.protoService();\n    \t\t\tthis.parameters = new parent.protoParameters();\n    \t\t\tthis.scope = parent.scope;\n\t\t\tthis.id = generateId();\n\n\t\t}\n\n\t\tset (name, obj){\n    \t\t\tthis.services[name] = obj ;\n    \t\t\treturn super.set(name, obj);\n\t\t}\n\n\t\tclean (){\n\t\t\tthis.services = null ; \n\t\t\tdelete this.services ;\n\t\t\tthis.parameters = null ;\n\t\t\tdelete this.parameters ;\n\t\t}\n\n\t\tsetParameters (name, str){\n\t\t\tif ( parseParameterString.call(this.parameters, name, str) === str ){\n\t\t\t\treturn super.setParameters(name, str);\n\t\t\t}else{\n\t\t\t\tthis.logger(new Error(\"container parameter \"+ name+\" parse error\"));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t};\n\n\t/*\n \t *\n \t *\tExtendedScope CLASS\n \t *\n \t */\n\tvar ExtendedScope = class ExtendedScope extends Container {\n\n\t\tconstructor (name, parent){\n    \t\t\tsuper();\n    \t\t\tthis.name = name;\n\t\t\tthis.parent = parent;\n    \t\t\tthis.services = new parent.protoService();\n    \t\t\tthis.parameters = new parent.protoParameters();\n    \t\t\tthis.scope = parent.scope;\n\t\t\tthis.id = generateId();\n\n\t\t\tthis.protoService = function(){};\n\t\t\tthis.protoService.prototype = stage.extend({},this.parent.protoService.prototype);\n\n\t\t\tthis.protoParameters = function(){};\n\t\t\tthis.protoParameters.prototype = stage.extend({},this.parent.protoParameters.prototype) ;\n\t\t}\n\n\t\tclean (){\n\t\t\tthis.services = null ; \n\t\t\tdelete this.services ;\n\t\t\tthis.parameters = null ;\n\t\t\tdelete this.parameters ;\n\t\t\tthis.protoService = null ;\n\t\t\tthis.protoParameters = null ;\n\t\t}\n\n\n\t\tset (name, obj){\n    \t\t\tthis.services[name] = obj ;\n    \t\t\treturn super.set(name, obj);\n\t\t}\n\n\t\tsetParameters (name, str){\n\t\t\tif ( parseParameterString.call(this.parameters, name, str) === str ){\n\t\t\t\treturn super.setParameters(name, str);\n\t\t\t}else{\n\t\t\t\tthis.logger(new Error(\"container parameter \"+ name+\" parse error\"));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t};\n\t\n\tstage.Container = Container ;\n\treturn Container;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/kernel/container.es6","module.exports =  function(stage){\n\n\t'use strict';\n\n\n\t/*\n \t *\n \t *\tCLASS CONTROLLER\n \t *\n \t */\n\tvar tabFxEvent = [\"stage-click\", \"stage-dblclick\", \"stage-focus\", \"stage-blur\", \"stage-mouseover\", \"stage-mouseout\", \"stage-mouseenter\", \"stage-mouseleave\", \"stage-change\"];\n\n\tvar Controller = class Controller extends stage.Service{\n\n\t\tconstructor(name, container, module){\n\t\t\tsuper(name, container, container.get(\"notificationsCenter\") );\n\t\t\tthis.module = module ; \n\t\t\tthis.i18n = this.kernel.i18n;\n\t\t\tthis.router = this.kernel.router;\n\t\t}\n\t\t\n\t\tredirect (url){\n\t\t\treturn this.router.redirect.apply(this.router, arguments)\n\t\t}\n\n\t\t/*\n\t \t*\n\t \t*\n\t \t*/\n\t\tforward (pattern, args){\n\t\t\treturn this.router.forward(pattern, args)\n\t\t}\n\n\t\t/*\n\t \t*\n\t \t*\n\t \t*/\n\t\tgenerateUrl (name, variables, absolute){\n\t\t\tif (absolute === true){\n\t\t\t\tvar url = this.router.url().split(\"#\");\n\t\t\t\tabsolute = this.router.url[0];\n\t\t\t}\n\t\t\treturn this.router.generateUrl.apply(this.router, arguments);\n\t\t}\n\n\t\tevalInContext (js, context){\n\t\t\tvar func = function(context) { \n\t\t\t\tvar $controller = context;\n\t\t\t\treturn function(js){\n\t\t\t\t\t\"use strict\";\n\t\t\t\t\treturn eval(js);\n\t\t\t\t}\n\t\t\t}(this);\n\t\t\ttry {\n\t\t\t\treturn func.call( context || this , jQuery.trim( js ));\n\t\t\t}catch(e){\n\t\t\t\tthis.logger(\"DOM PARSER TWIG ERROR \" + e, \"ERROR\");\t\n\t\t\t}\n\t\t}\n\n\n\t\tdomParser (domElement){\n\t\t\tdomElement.find('[' + tabFxEvent.join('],[') + ']').each((index, ele) => {\n\t\t\t\tvar attributes = ele.attributes;\n\t\t\t\tvar jElement = $(ele);\n\t\t\t\tvar ctrl = jElement.closest('[stage-ctrl]');\n\t\t\t\tvar scope = null ;\n\t\t\t\tif(ctrl.length){\n\t\t\t\t\tvar pattern = $(ctrl).attr(\"stage-ctrl\") ;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tscope = this.router.resolvePattern(pattern).controller;\n\t\t\t\t\t}catch (e){\n\t\t\t\t\t\tthis.logger(\"DOM PARSER ERROR : \" + e , \"ERROR\")\n\t\t\t\t\t\treturn ;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tscope = this;\n\t\t\t\t}\n\t\t\t\tfor(var i = 0; i < attributes.length; i++){\n\t\t\t\t\tvar attribute = attributes[i];\n\t\t\t\t\tif(tabFxEvent.indexOf(attribute.name) > -1){\n\t\t\t\t\t\tvar ele = function(){\n\t\t\t\t\t\t\tvar content = attribute.value;\n\t\t\t\t\t\t\tjElement.on(attribute.name.replace('stage-', ''), function(){\n\t\t\t\t\t\t\t\tscope.evalInContext(content, this);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t/*\n\t \t*\n\t \t*\n\t \t*/\n\t\trender (element, partial, type){\n\t\t\tvar ele = $(element);\n\t\t\ttry {\n\t\t\t\tswitch (type){\n\t\t\t\t\tcase \"append\":\n\t\t\t\t\t\tele.append(partial) ;\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"prepend\":\n\t\t\t\t\t\tele.prepend(partial) ;\n\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tele.empty();\n\t\t\t\t\t\tele.html(partial);\n\n\t\t\t\t}\n\t\t\t\treturn this.domParser(ele);\n\t\t\t}catch(e){\n\t\t\t\tthis.logger(\"DOM PARSER TWIG ERROR : \"+e, \"ERROR\") ;\n\t\t\t}\n\n\t\t}\n\n\t\trenderPartial (pattern, obj){\n\t\t\ttry {\n\t\t\t\tvar template = this.module.getTemplatePattern(pattern);\n\t\t\t\treturn template.render(obj);\n\t\t\t}catch(e){\n\t\t\t\tthis.logger(e, \"ERROR\")\n\t\t\t}\n\t\t}\n\t};\n\n\tstage.Controller = Controller ;\n\treturn Controller ;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/kernel/controller.es6","const Twig = require(\"twig\");\n\nmodule.exports =  function(stage){\n\n\t'use strict';\n\n\tvar settingsSyslog = {\n\t\t//rateLimit:100,\n\t\t//burstLimit:10,\n\t\tmoduleName:\"KERNEL\",\n\t\tdefaultSeverity:\"INFO\"\n\t};\n\n\tvar defaultSettings = {\n\t\tdebug:false,\n\t\trouter:true,\n\t\ti18n:true,\n\t\tlocation:{\n\t\t\thtml5Mode:false,\n\t\t\thashPrefix:\"/\"\n\t\t}\n\t};\n\n\tvar defaultEnvEnable = {\n\t\tdev:\t\ttrue,\n\t\tdevelopment:\ttrue,\t\n\t\tprod:\t\ttrue,\n\t\tproduction:\ttrue,\t\n\t};\n\n\n\t/*\n \t *\tOVERRIDE TWIG IMPORT TEMPLATE\n \t */\n\tvar loadRemoteTwig = function(Twig, location, params, callback, error_callback){\n\t\tvar id  = params.id,\n\t\tmethod      = params.method,\n\t\tasync       = params.async,\n\t\tprecompiled = params.precompiled,\n\t\ttemplate    = null;\n\n\t\t// Default to async\n\t\tif (async === undefined) async = true;\n\n\t\t// Default to the URL so the template is cached.\n\t\tif (id === undefined) {\n\t\t\tid = location;\n\t\t}\n\t\tparams.id = id;\n\n\t\t// Check for existing template\n\t\tif (Twig.cache && Twig.Templates.registry.hasOwnProperty(id)) {\n\t\t\t// A template is already saved with the given id.\n\t\t\tif (callback) {\n\t\t\t\tcallback(Twig.Templates.registry[id]);\n\t\t\t}\n\t\t\treturn Twig.Templates.registry[id];\n\t\t}\n\t\t//console.log(params.async)\n\t\t$.ajax({\n\t\t\turl:location,\n\t\t\tasync:async,\n\t\t\tsuccess:(mydata, status, xhr) => {\n\t\t\t\tvar moduleName = this.getModuleName( location )\n\t\t\t        if (precompiled === true) {\n\t\t\t\t\tmydata = JSON.parse(mydata);\n\t\t\t\t}\n\t\t\t\tparams.url = location;\n\t\t\t\tparams.data = mydata;\n\t\t\t\ttemplate = new Twig.Template(params);\n\t\t\t\tif (this.modules[moduleName]){\n\t\t\t\t\tvar module = this.modules[moduleName] ;\n\t\t\t\t\tvar name = module.getTemplateName(location)\n\t\t\t\t\tmodule.registerTemplate(name, template, \"template\")\n\t\t\t\t}\n\t\t\t\tif (callback) {\n\t\t\t\t\tcallback(template);\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: (xrh, status, message) => {\n\t\t\t\terror_callback(xrh, status, message)\n\t\t\t}\n\t\t})\n\t\tif (async === false) {\n\t\t\treturn template;\n\t\t} else {\n\t\t\t// placeholder for now, should eventually return a deferred object.\n\t\t\treturn true;\n\t\t}\t\n\t};\n\n\t/*\n\t*\n\t*\tKERNEL CLASS\t\n\t*/\n\n\tvar Kernel = class Kernel  extends stage.Service {\n\n\t\tconstructor(environment, settings){\n\n\t\t\tsuper(\"KERNEL\",null, null ,{\n\t\t\t\tsyslog:settingsSyslog\n\t\t\t});\n\n\t\t\tthis.container.set(\"kernel\", this);\n\n\t\t\tthis.modules = {};\n\t\t\tthis.settings = stage.extend(true, {}, defaultSettings , settings );\n\n\t\t\tif ( environment in defaultEnvEnable ){\n\t\t\t\tswitch ( environment ){\n\t\t\t\t\tcase \"dev\" :\n\t\t\t\t\tcase \"development\" :\n\t\t\t\t\t\tthis.environment = \"dev\";\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"prod\" :\n\t\t\t\t\tcase \"production\" :\n\t\t\t\t\t\tthis.environment = \"prod\";\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.logger(\"Bad Variable environment :\" + environment,\"WARNING\");\n\t\t\t\tthis.environment = \"prod\";\n\t\t\t}\n\n\t\t\tthis.debug = this.settings.debug ;\n\t\t\tthis.booted = false;\n\t\t\tthis.isDomReady = false;\n\t\t\tthis.uiContainer = null;\n\n\t\t\t// syslog\n\t\t\tthis.initializeLog(settingsSyslog);\n\n\t\t\t// autoloader\n\t\t\tthis.autoloader = new stage.autoload(this, {\n\t\t\t\ttransport:\"script\"\n\t\t\t});\n\t\t\tthis.container.set(\"autoloader\", this.autoloader);\n\n\t\t\t\n\t\t\t// Router\n\t\t\tthis.initRouter();\n\n\t\t\t// template\n\t\t\tthis.initTwig();\n\n\t\t\t// translation i18n\n\t\t\tthis.initTranslation();\n\n\t\t\t// Service REST\n\t\t\tthis.initRest()\n\n\t\t\t// EVENT NATIF\n\t\t\t$(document).ready( this.listen(this, \"onDomReady\", this.domReady) );\n\t\t\t$(window).resize( this.listen(this,\"onResize\") );\n\t\t\t$(window).on( \"unload\",  this.unLoad.bind(this) );\n\t\t\t$(window).on( \"load\", this.onLoad.bind(this) );\n\n\t\t\t//BOOT\t\n\t\t\tthis.listen(this, \"onBoot\" , this.boot)\n\t\t\t//READY\n\t\t\tthis.listen(this, \"onReady\" , this.ready)\n\n\t\t\tthis.notificationsCenter.settingsToListen(this.settings, this);\n\t\t}\n\t\t\n\t\tinitRouter (){\n\t\t\tif ( this.settings.router ){\n\t\t\t\t// location\n\t\t\t\tthis.initLocation();\n\t\t\t\tthis.router = new stage.router(this, this.container);\n\t\t\t\tthis.container.set(\"router\", this.router);\n\t\t\t}\n\t\t}\n\n\t\tinitLocation (){\n\t\t\tthis.locationService = new stage.location(this, this.settings.location) ;\n\t\t\tthis.container.set(\"location\", this.locationService);\n\t\t}\n\n\t\tinitRest (){\n\t\t\tif (stage.Rest) {\n\t\t\t\tthis.restService = new stage.Rest(this.container);\n\t\t\t\tthis.set(\"rest\", this.restService);\n\t\t\t}\n\t\t}\n\n\t\tinitTranslation (){\n\t\t\tif ( this.settings.i18n ){\n\t\t\t\tif ( ! stage.i18n ){\n \t\t       \t\t\tthis.logger(\"you must load transation i18n services js file !!!!!\", \"ERROR\")\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.i18n = new stage.i18n(this, this.container);\n\t\t\t\tthis.container.set(\"i18n\", this.i18n);\n\t\t\t}\n\t\t}\n\n\t\tinitTwig (){\n\t\t\tthis.logger(\"INITIALIZE TWIG SERVICE\", \"DEBUG\");\n\t\t\tif (this.environment === \"dev\"){\n\t\t\t\tTwig.cache = false ;\t\n\t\t\t}\n\t\t\tthis.templateEngine = Twig.twig  ; \n\t\t\t//extended log error traf\n\t\t\tTwig.extend((Twig) => {\n\t\t\t\tTwig.log.error = (message) => {\n\t\t\t\t\tthis.logger(message, \"ERROR\");\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tTwig.extend((Twig) => {\n\t\t\t\tTwig.Templates.loadRemote = loadRemoteTwig.bind(this, Twig) \n\t\t\t});\n\n\t\t\t//extended FUNCTION\n\t\t\tTwig.extendFunction(\"controller\", function() {\n\t\t\t\tvar pattern = Array.prototype.shift.call(arguments);\n\t\t\t\tvar sp = pattern.split(\":\");\n\t\t\t\tvar module = this.getModule(sp[0]);\n\t\t\t\tif (module){\n\t\t\t\t\tvar controller = module.getController(sp[1]);\n\t\t\t\t\tif (controller){\n\t\t\t\t\t\tvar action = sp[2];\n\t\t\t\t\t\tif ( controller[action] ){\n\t\t\t\t\t\t\treturn controller[action].apply(controller, arguments);\t\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t\tthis.container.set(\"twig\", this.templateEngine);\n\t\t\treturn this.templateEngine ;\n\t\t}\n\n\t\tdomReady (){\n\t\t\tif ( ! this.booted ) return ; \n\t\t\tthis.logger(\"domReady\", \"DEBUG\");\n\t\t\tthis.fire(\"onDomLoad\", this);\n\t\t\tvar element = this.uiContainer ? $(this.uiContainer) : $(\"body\");\n\t\t\ttry {\n\t\t\t\tif ( this.modules.app ){\n\t\t\t\t\tthis.modules.app.initialize(element);\t\n\t\t\t\t}\t\t\n\t\t\t\tfor (var module in this.modules){\n\t\t\t\t\tif (module === \"app\") continue;\n\t\t\t\t\tthis.modules[module].initialize(element);\n\t\t\t\t}\t\n\t\t\t\tthis.fire(\"onReady\", this);\n\t\t\t\tthis.isDomReady = true;\n\t\t\t}catch(e){\n\t\t\t\tthis.logger(e,\"ERROR\");\n\t\t\t}\n\t\t}\n\n\t\tonLoad (event){\n\t\t\tthis.fire(\"onLoad\", this, event);\t\n\t\t}\n\n\t\tunLoad (event){\n\t\t\tthis.fire(\"onUnLoad\", this, event);\t\n\t\t}\n\t\n\t\tgetModule (name){\n\t\t\treturn this.modules[name] ;\n\t\t}\n\n\t\tinitializeLog (settings){\n\t\t\tif (this.environment === \"dev\"){\n\t\t\t\t// CRITIC ERROR\n\t\t\t\tthis.syslog.listenWithConditions(this,{\n\t\t\t\t\tseverity:{\n\t\t\t\t\t\tdata:\"CRITIC,ERROR\"\n\t\t\t\t\t}\t\t\n\t\t\t\t},function(pdu){\n\t\t\t\t\t\tconsole.log(pdu.payload)\n\t\t\t\t\tif (pdu.payload.stack ){\n\t\t\t\t\t\t\tconsole.error( \"SYSLOG \" + pdu.severityName +\" \" + pdu.msgid + \" \"+new Date(pdu.timeStamp) + \" \" + pdu.msg+\" : \"+  pdu.payload.stack);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.error( \"SYSLOG \" + pdu.severityName +\" \" + pdu.msgid + \" \"+new Date(pdu.timeStamp) + \" \" + pdu.msg+\" : \"+  pdu.payload);\t\n\t\t\t\t\t}\n\t\t\t\t\t/*if (pdu.typePayload === \"Error\" ){\n\t\t\t\t\t\tif (pdu.payload.stack ){\n\t\t\t\t\t\t\tconsole.error( \"SYSLOG \" + pdu.severityName +\" \" + pdu.msgid + \" \"+new Date(pdu.timeStamp) + \" \" + pdu.msg+\" : \"+  pdu.payload.stack);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconsole.error( \"SYSLOG \" + pdu.severityName +\" \" + pdu.msgid + \" \"+new Date(pdu.timeStamp) + \" \" + pdu.msg+\" : \"+  pdu.payload);*/\t\n\t\t\t\t});\n\n\t\t\t\t// INFO DEBUG\n\t\t\t\tvar data ;\n\t\t\t\tthis.debug ? data = \"INFO,DEBUG\" : data = \"INFO\" ;\n\t\t\t\tthis.syslog.listenWithConditions(this,{\n\t\t\t\t\tseverity:{\n\t\t\t\t\t\tdata:data\n\t\t\t\t\t}\t\t\n\t\t\t\t},function(pdu){\n\t\t\t\t\tconsole.info( \"SYSLOG \" + pdu.severityName +\" \" + pdu.msgid + \" \"+new Date(pdu.timeStamp) + \" \" + pdu.msg+\" : \"+ pdu.payload);\n\t\t\t\t});\n\t\t\t\tthis.syslog.listenWithConditions(this,{\n\t\t\t\t\tseverity:{\n\t\t\t\t\t\tdata:\"WARNING\"\n\t\t\t\t\t}\t\t\n\t\t\t\t},function(pdu){\n\t\t\t\t\tconsole.warn( \"SYSLOG \" + pdu.severityName +\" \" + pdu.msgid + \" \"+new Date(pdu.timeStamp) + \" \" + pdu.msg+\" : \"+ pdu.payload);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn this.syslog;\n\t\t}\n\n\t\tboot (){\n\t\t\tthis.booted = true;\n\t\t}\n\n\t\tready (){\n\t\t\t//this.fire(\"onUrlChange\", this.router.url() )\n\t\t}\n\n\t\tloadModule (url, settings){\n\t\t\tvar res = stage.io.urlToOject(url);\n\t\t\tvar moduleName = res.basename ;\n\t\t\t\t\t\n\t\t\treturn $.ajax(url,stage.extend( {\n\t\t\t\tcache:false,\n\t\t\t\tmethod:\"GET\",\n\t\t\t\t//async:false,\n\t\t\t\tdataType:\"xml\",\n\t\t\t\tsuccess:(data, status, xhr) => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\t//FIXME try to parse with url\n\t\t\t\t\t\tvar res = stage.xml.parseXml(data);\n\t\t\t\t\t\tvar moduleName = res.module[\"@id\"];\n\t\t\t\t\t\tvar type = res.module[\"@type\"];\n\t\t\t\t\t\tvar moduleSrc = res.module[\"@src\"];\n\t\t\t\t \t\n\t\t\t\t\t\tswitch ( type ){\n\t\t\t\t\t\t\tcase \"application/javascript\" :\n\t\t\t\t\t\t\t\tif ( moduleSrc ){\n\t\t\t\t\t\t\t\t\tif (moduleName in this.modules) {\n\t\t\t\t\t\t\t\t\t\tthis.modules[moduleName].initialize();\n\t\t\t\t\t\t\t\t\t\tthis.modules[moduleName].fire(\"onInitialize\", moduleName);\t\n\t\t\t\t\t\t\t\t\t\tthis.fire(\"onInitializeModule\", moduleName);\t\n\t\t\t\t\t\t\t\t\t} else {\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\tthis.autoloader.load(moduleSrc, (error, transport) => {\n\t\t\t\t\t\t\t\t\t\t\tif (error){\n\t\t\t\t\t\t\t\t\t\t\t\tthis.fire(\"onError\", error);\n\t\t\t\t\t\t\t\t\t\t\t\tthrow error;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tthis.registerModule(moduleName, res);\n\t\t\t\t\t\t\t\t\t\t\tif (moduleName === \"app\")\n\t\t\t\t\t\t\t\t\t\t\t\tthis.fire(\"onBoot\", this);\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}catch(e){\n\t\t\t\t\t\tthis.logger(e, \"ERROR\");\n\t\t\t\t\t\tthis.fire(\"onError\", e);\n\t\t\t\t\t\tthrow e ;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror:(xhr, status, message) => {\n\t\t\t\t\tthis.fire(\"onGetConfigError\", moduleName);\n\t\t\t\t\tthis.fire(\"onError\", message);\t\n\t\t\t\t}\n\t\t\t}, settings))\n\t\t}\n\n\t\tregisterModule (name, xml){\n\t\t\tif (name in stage.modules){\n\t\t\t\tvar kernelcontext = this;\n\t\t\t\tvar Class = stage.modules[name]; //.herite(stage.Module);\n\t\t\t\tthis.container.addScope(name);\n\t\t\t\tClass.prototype.name = name;\n\t\t\t\ttry {\n\t\t\t\t\tif (this.isDomReady){\n\t\t\t\t\t\tthis.modules[name] = new Class(this, xml,{\n\t\t\t\t\t\t\tonReady:() => {\n\t\t\t\t\t\t\t\tif (this.initialize){\n\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\tthis.initialize();\n\t\t\t\t\t\t\t\t\t\tthis.fire(\"onInitialize\", name);\t\n\t\t\t\t\t\t\t\t\t\tkernelcontext.fire(\"onInitializeModule\", name);\n\t\t\t\t\t\t\t\t\t}catch(e){\n\t\t\t\t\t\t\t\t\t\tthis.logger(\"INITIALIZE MODULE : \"+name +\" \"+e, \"ERRROR\");\n\t\t\t\t\t\t\t\t\t\tthrow e;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}});\t\n\t\t\t\t\t\t\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.modules[name] = new Class(this, xml);\n\t\t\t\t\t}\n\t\t\t\t\tthis.container.set(name, this.modules[name]);\n\t\t\t\t}catch(e){\n\t\t\t\t\tthis.logger(\"INSTANCE MODULE : \"+name +\" \"+e, \"ERRROR\")\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tgetModuleName (url){\n\t\t\tvar module = stage.dirname(url);\n\t\t\tvar tab = module.split(\"/\")\n\t\t\treturn tab[tab.indexOf(\"Resources\")-1];\n\t\t}\n\t};\n\n\tstage.kernel = Kernel ;\n\treturn  Kernel;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/kernel/kernel.es6","module.exports =  function(stage){\n\n\t'use strict';\n\n\tvar nativeHistory = !!(window.history && window.history.pushState );\n\tvar PATH_MATCH = /^([^\\?#]*)(\\?([^#]*))?(#(.*))?$/;\n\tvar DEFAULT_PORTS = {'http': 80, 'https': 443};\n\n\n\t/*\n \t *\tCLASS BROWSER\n \t *\n \t */\n\n\tvar changeUrl = function(event){\n\t\tvar cache = null ;\n\t\tvar location = this.kernel.locationService ;\n\t\tvar url = this.url();\n\n\t\tif ( ( url === this.lastUrl && url === this.location.href ) && this.lastUrl !== location.initialUrl){ \n\t\t\t//console.log(\" changeUrl PASS SAME\")\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! event ){\n\t\t\tthis.kernel.logger(\" FORCE URL CHANGE BROWER EVENT NOT FIRE\" , \"WARNING\" );\n\t\t\t//console.log(location.url())\n\t\t\tvar newUrl = location.url() ;\n\t\t\tthis.kernel.notificationsCenter.fire(\"onUrlChange\", newUrl , this.lastHash, url ,cache)\n\t\t\tthis.lastUrlr= url;\n\t\t\tthis.lastHash = newUrl ;\n\t\t\treturn ;\n\t\t}\n\t\t//console.log(\"change URL :\" + url +\" IINIT \"+location.initialUrl)\n\t\t//console.log(\"change LAST URL :\" + this.lastUrl)\n\t\tvar parse = location.parse(url);\n\t\t//console.log(location)\n\t\tif ( ! parse ){\n\t\t\tthis.kernel.notificationsCenter.fire(\"onUrlChange\", \"\", this.lastHash, url,  cache)\n\t\t\tthis.lastUrl = \"\";\n\t\t\tthis.lastHash = \"\";\n\t\t\treturn ;\n\t\t}\n\n\t\tvar newUrl = location.url() ;\n\t\t\n\t\tthis.kernel.notificationsCenter.fire(\"onUrlChange\", newUrl, this.lastHash , url ,cache)\n\t\tthis.lastUrl = url;\n\t\tthis.lastHash = newUrl ;\n\t};\n\n\n\tvar myurl = function(options){\n\t\tif (nativeHistory && options.html5Mode){\n\t\t\treturn function (url, replace, state) {\n\t\t\t\t//TODO\n\t\t\t\t/*if (this.location !== window.location) this.location = window.location;\n\t\t\t\tif (this.history !== window.History) this.history = window.History;\n\n\t\t\t\tif (url){\n\t\t\t\t\tthis.kernel.logger(replace ? \"REPLACE URL : \" + url : \"CHANGE URL : \" + url,\"WARNING\")\n\t\t\t\t\t\tthis.history[replace ? 'replaceState' : 'pushState'](state, '', url);\n\t\t\t\t}else{\n\t\t\t\t\treturn this.location.href.replace(/%27/g,\"'\");\t\n\t\t\t\t}*/\n\t\t\t}\n\t\t}else{\n\t\t\treturn function (url, replace, state)  {\n\t\t\t\tif (url){\n\t\t\t\t\tif (this.kernel && this.kernel.get(\"location\") )\n\n\t\t\t\t\tif (this.location !== window.location) this.location = window.location;\n\t\t\t\t\tvar same = ( url === this.lastUrl && url === this.location.href ? true : false );\n\t\t\t\t\tif (this.history !== window.history) this.history = window.history;\n\t\t\t\t\tthis.kernel.logger(replace ? \"REPLACE URL : \" + url : \"CHANGE URL : \" + url,\"WARNING\");\n\t\t\t\t\tif ( same ){\n\t\t\t\t\t\tif  (  url === this.kernel.locationService.initialUrl ){\n\t\t\t\t\t\t\t\t//FORCE changeUrl \n\t\t\t\t\t\t\t\tchangeUrl.call(this)\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn url ;\n\t\t\t\t\t}\n\t\t\t\t\t//console.log(url)\n\t\t\t\t\tif ( replace ){\n\t\t\t\t\t\tthis.location.replace(url);\t\n\t\t\t\t\t\treturn url ;\n\t\t\t\t\t}\n\t\t\t\t\treturn this.location.href = url;\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\treturn this.location.href.replace(/%27/g,\"'\");\t\n\t\t\t\t}\t\t\t\n\t\t\t}\n\t\t}\t\n\t}; \n\n\tvar urlBrowser = null ;\n\tvar browser = class browser {\n\n\t\tconstructor(kernel, settings){\n\t\t\tthis.location = window.location;\n\t\t\tthis.history = window.History;\n\t\t\turlBrowser = myurl.call(this, settings);\n\t\t\tthis.lastUrl = this.url();\n\t\t\tthis.kernel = \tkernel ;\n\t\t\t$(window).bind('hashchange', changeUrl.bind(this)); \n\t\t\t//if (nativeHistory){\n\t\t\t//\t$(window).bind('popstate', changeUrl.bind(this))\n\t\t\t//}\n\t\t}\n\n\t\turl (url, replace, state){\n\t\t\treturn urlBrowser.call(this, url, replace, state);\t\t\n\t\t}\n\n\t};\n\n\n\n\t/*\n \t *\tCLASS LOCATION\n \t *\n \t */\n\n\n\t\n\tvar beginsWith = function(begin, whole) {\n  \t\tif (whole.indexOf(begin) === 0) {\n    \t\t\treturn whole.substr(begin.length);\n  \t\t}\n\t};\n\n\tvar stripHash = function(url){\n\t\tvar index = url.indexOf('#');\n  \t\treturn index == -1 ? url : url.substr(0, index);\n\t};\n\n\n\tvar Location = class Location  extends stage.Service {\n\n\n\t\tconstructor(browser, base, kernel, settings){\n\t\t\tsuper(\"LOCATION\", kernel.container, kernel.notificationsCenter );\n\t\t\tthis.settings = settings\n\t\t\tthis.browser = browser ;\n\t\t\tthis.replace = false ;\n\t\t\t\n\t\t\tthis.initialUrl = this.browser.url();\n\t\t\tthis.base = base\n\t\t\tthis.hashPrefix = \"#\"+this.settings.hashPrefix ;\n\t\t\tthis.proto = this.stripFile(this.base);\n\t\t\tthis.parseAbsoluteUrl(this.initialUrl);\n\t\t\tthis.parse(this.initialUrl);\n\t\t\tthis.logger(\"INITIALIZE LOCATION SERVICE\", \"DEBUG\");\n\n\t\t\t// rewrite hashbang url <> html5 url\n\t\t\t//var abs = this.absUrl();\n\t\t\t//if ( abs != this.initialUrl) {\n\t\t\t//\tthis.browser.url(abs, true);\n\t\t\t//}\n\t\t}\n\t\t\n\t\tabsUrl (){\n\t\t\treturn this._absUrl ;\n\t\t}\n\n\t\turl (url){\n\t\t\tif (typeof url === \"undefined\")\n\t\t\t\treturn this._url;\n\t\t\tvar match = PATH_MATCH.exec(url);\n\t\t\tif (match[1]) this.path(decodeURIComponent(match[1]));\n\t\t\tif (match[2] || match[1]) this.search(match[3] || '');\n\t\t\tthis.hash(match[5] || '');\n\t\t}\n\n\t\tprotocol (){\n\t\t\treturn this._protocol;\t\n\t\t}\n\n\t\thost (){\n\t\t\treturn this._host;\t\n\t\t}\n\n\t\tport (){\n\t\t\treturn this._port ;\t\n\t\t}\n\n\t\tpath (path){\n\t\t\tif (typeof path === \"undefined\"){\n\t\t\t\treturn this._path ;\n\t\t\t}\n\t\t\tthis._path = path ;\n\t\t\ttry {\n\t\t\t\tthis.change();\n\t\t\t}catch(e){\n\t\t\t\tthis.logger(e,\"ERROR\");\n\t\t\t\tthrow e\n\t\t\t}\n\t\t\treturn this._path;\n\t\t}\n\n\t\tsearch (search){\n\t\t\tif (typeof search === \"undefined\"){\n\t\t\t\treturn this._search ;\n\t\t\t}\n\t\t\tthis._search = search ;\n\t\t\ttry {\n\t\t\t\tthis.change();\n\t\t\t}catch(e){\n\t\t\t\tthis.logger(e,\"ERROR\");\n\t\t\t\tthrow e\n\t\t\t}\n\t\t\treturn this._search;\n\n\t\t\t\n\t\t}\n\t\t\n\t\thash (hash){\n\t\t\tif (typeof hash === \"undefined\"){\n\t\t\t\treturn this._hash ;\n\t\t\t}\n\t\t\tthis._hash = hash ;\n\t\t\ttry {\n\t\t\t\tthis.change();\n\t\t\t}catch(e){\n\t\t\t\tthis.logger(e,\"ERROR\");\n\t\t\t\tthrow e\n\t\t\t}\n\t\t\treturn this._hash;\n\t\t}\t\n\n\t\tstate (){\n\t\t\n\t\t}\n\n\t\treplace (value){\n\t\t\tif (value)\n\t\t\t\treturn  this.replace = value ;\t\n\t\t\treturn this.replace ;\n\t\t}\n\n\t\tencodePath (path) {\n  \t\t\tvar segments = path.split('/');\n      \t\t\tvar i = segments.length;\n\n  \t\t\twhile (i--) {\n    \t\t\t\tsegments[i] = stage.io.encodeUriSegment(segments[i]);\n  \t\t\t}\n\n  \t\t\treturn segments.join('/');\n\t\t}\n\n\t\tstripFile (url){\n\t\t\treturn url.substr(0, stripHash(url).lastIndexOf('/') + 1);\n\t\t}\n\t\n\t\t// parsing end URL ex : http://domain.com:port(/path)(?search)(#hash)\n\t\tparseRelativeUrl (relativeUrl){\n\t\t\t//console.log(\"relative :\" + relativeUrl)\n\t\t\tvar prefixed = (relativeUrl.charAt(0) !== '/');\n\t\t\tif (prefixed) {\n\t\t\t\trelativeUrl = '/' + relativeUrl;\n\t\t\t}\n\t\t\tvar resolve = stage.io.urlToOject(relativeUrl);\n\t\t\t//console.log(resolve)\n\t\t\tthis._path = decodeURIComponent(prefixed && resolve.pathname.charAt(0) === '/' ?\n\t\t\t\tresolve.pathname.substring(1) : resolve.pathname);\n\t\t\tthis._search = stage.io.parseKeyValue(resolve.search);\n\t\t\tthis._hash = decodeURIComponent(resolve.hash);\n\n\t\t\t// make sure path starts with '/';\n\t\t\tif (typeof this._path !== \"undefined\" && this._path.charAt(0) != '/') {\n\t\t\t\tthis._path = '/' + this._path;\n\t\t\t}\n\t\t\t//console.log(\"PATH:\" + this._path)\n\t\t}\n\n\t\t// parsing begin URL ex : (http)://(domain.com):(port)\n\t\tparseAbsoluteUrl (absoluteUrl){\n\t\t\tvar resolve = stage.io.urlToOject(absoluteUrl);\n  \t\t\tthis._protocol = resolve.protocol.replace(\":\", \"\");\n  \t\t\tthis._host = resolve.hostname;\n  \t\t\tthis._port = parseInt(resolve.port, 10) || DEFAULT_PORTS[this._protocol] ||null;\n\t\t}\n\t};\n\n\t/**\n \t * LocationHashbangUrl represents url\n \t * This object is exposed as $location service when developer doesn't opt into html5 mode.\n \t * It also serves as the base class for html5 mode fallback on legacy browsers.\n \t *\n \t * @constructor\n \t * @param {string} appBase application base URL\n \t * @param {string} hashPrefix hashbang prefix\n \t*/\n\tvar LocationHashbangUrl = class LocationHashbangUrl extends  Location  {\n\n\t\tconstructor(browser, base, kernel, settings) {\n\t\t\tsuper(browser, base, kernel, settings);\n\t\t}\n\n\t\tparse (url){\n\t\t\t//console.log(\"URL to parse LocationHashbangUrl  :\" + url)\n\t\t\t//console.log(\"base : \" + this.base)\n\t\t\t//console.log(\"beginsWith BASE : \"+beginsWith(this.base, url))\n\t\t\t//console.log(\"beginsWith PROTO  :\"+beginsWith(this.proto, url))\n\t\t\tvar withoutBaseUrl = beginsWith(this.base, url) || beginsWith(this.proto, url);\n\t\t\t//console.log(\"withoutBaseUrl : \" +withoutBaseUrl)\n\t\t\tvar withoutHashUrl = withoutBaseUrl.charAt(0) == '#'\n\t\t\t\t? beginsWith(this.hashPrefix, withoutBaseUrl)\n\t\t\t\t: \"\";\n\n    \t\t\tif (typeof withoutHashUrl !== \"string\") {\n\t\t\t\tthis.logger('Invalid url '+url+', missing hash prefix ' +this.hashPrefix , \"ERROR\");\n      \t\t\t\treturn null; \n    \t\t\t}\n\t\t\t//console.log(\"withoutHashUrl : \" +withoutHashUrl)\n    \t\t\tthis.parseRelativeUrl(withoutHashUrl);\n\t\t\treturn this.change();\n\t\t}\n\t\t\n\t\tchange (){\n\t\t\tvar search = stage.io.toKeyValue(this._search);\n\t\t\t//console.log(this._search)\n\t\t\t//var hash = this._hash ? '#' + stage.io.encodeUriSegment(this._hash) : '';\n\n\t\t\tvar hash = this._hash ? '#' + this._hash : '';\n\n\t\t\t//console.log(this._path)\n\t\t\tthis._url = this.encodePath(this._path) + (search ? '?' + search : '') + hash\t\t\n\t\t\t//console.log(this._url)\n\t\t\t//var temp = (this._url ? this.hashPrefix + this._url : '').replace(\"//\",\"/\");\n\t\t\t//this._absUrl = this.base + temp;\t\n\t\t\t//console.log( this.hashPrefix)\n\t\t\t//console.log( this._url)\n\t\t\tthis._absUrl = this.base + (this._url ? \"#\" + this._url : '');\t\n\t\t\t//console.log(\"URL :\"+ this._url)\n\t\t\t//console.log(\"HASH :\"+ this._hash)\n\t\t\t//console.log(\"ABSURL :\"+ this._absUrl)\n\t\t\t//console.log(\"PATH :\"+ this._path)\n\t\t\treturn this;\n\t\t}\n\t};\n\n\n\t/**\n \t * LocationHashbangInHtml5Url represents url\n \t * This object is exposed as location service when html5 history api is enabled but the browser\n \t * does not support it.\n \t *\n \t * @constructor\n \t * @param {string} appBase application base URL\n \t * @param {string} hashPrefix hashbang prefix\n \t*/\n\tvar LocationHashbangInHtml5Url = class LocationHashbangInHtml5Url extends  LocationHashbangUrl  {\n\n\t\tconstructor(browser, base, kernel, settings){\n\t\t\tsuper(browser, base, kernel, settings);\n\t\t}\n\n\t\tparse (url){\n\t\t\treturn this.change();\n\t\t}\n\t\t\n\t\tchange(){\n\t\t\treturn this;\n\t\t}\n\t};\n\n\t/**\n \t * LocationHtml5Url represents an url\n \t * This object is exposed as location service when HTML5 mode is enabled and supported\n \t *\n \t * @constructor\n \t * @param {string} appBase application base URL\n \t * @param {string} basePrefix url path prefix\n \t*/\n\tvar LocationHtml5Url = class LocationHtml5Url extends Location  {\n\n\t\tconstructor (browser, base, kernel, settings) {\n\t\t\tsuper(browser, base, kernel, settings);\n\t\t}\n\n\t\tparse (url){\n\t\t\tvar pathUrl = beginsWith(this.proto, url);\n\t\t\tif (pathUrl){\n\t\t\t\tthis.parseRelativeUrl(pathUrl);\n\t\t\t}\n\t\t\tif (! this._path)\n\t\t\t\tthis._path = \"/\"\n\t\t\treturn this.change();\n\t\t}\n\t\t\n\t\tchange (){\n\t\t\tvar search = stage.io.toKeyValue(this._search);\n\t\t\tvar hash = this._hash ? '#' + stage.io.encodeUriSegment(this._hash) : '';\n\t\t\tthis._url = this.encodePath(this._path) + (search ? '?' + search : '') + hash;\n\t\t\tthis._absUrl = this.proto + this._url.substr(1);\n\t\t\treturn this\n\t\t}\n\t};\n\n\n\t/*\n \t *\tSERVICE LOCATION\n \t */\n\n\tvar defaultSettings = {\n\t\thtml5Mode:true,\n\t\thashPrefix:\"/\"\n\t};\n\n\tvar serverBase = function (url) {\n\t\treturn url.substring(0, url.indexOf('/', url.indexOf('//') + 2));\n\t};\n\n\tvar service = function(kernel, settings){\n\t\n\t\tvar options = $.extend(defaultSettings, settings)\n\t\t\t\n\t\tvar browserService = new browser(kernel, options);\n\t\tkernel.set(\"browser\", browserService);\n\t\tvar initialUrl = browserService.url();\n\t\tvar baseHref = options.base || \"\" ;\n\t\tvar mode = null ;\n\t\tvar base = null ;\n\n\t\tif (options.html5Mode) {\n\t\t\tmode = nativeHistory ? LocationHtml5Url : LocationHashbangInHtml5Url;\n\t\t\tbase = serverBase(initialUrl) + (baseHref || '/');\n\t\t}else{\n\t\t\tmode = LocationHashbangUrl ;\n\t\t\tbase = stripHash(initialUrl);\n\t\t}\n\t\t\n\t\treturn new mode(browserService, base, kernel, options);\n\t}; \n\t\n\tstage.location = service ;\n\treturn service;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/kernel/locationService.es6","module.exports =  function(stage){\n\n\t'use strict';\n\n\t/*\n \t *\n \t *\tModel\n \t *\n \t */\n\n\tvar urlParser = function(container, url, name, template, obj){\n  \t\tvar index = url.indexOf(\"views\") ;\n  \t\tif (index < 0 ){\n    \t\t\tvar text = \"URL TEMPLATE BAD PATH :\" + url ;\n    \t\t\tthis.logger(text ,\"ERROR\")\n    \t\t\t\tthrow new Error(text) ;\n  \t\t}\n  \t\tvar res = url.slice(index+\"views\".length+1).split(\"/\");\n  \t\tres.pop();\n  \t\tif (res.length){\n    \t\t\tvar obj = container ;\n    \t\t\tfor (var i = 0; i<res.length;i++){\n      \t\t\t\tif ( obj[res[i]] ){\n        \t\t\t\tif (i !== res.length-1){\t\n        \t\t\t\t\tobj = obj[res[i]] ;\n        \t\t\t\t}else{\n          \t\t\t\t\tobj[res[i]][name] = template;\n        \t\t\t\t}\n      \t\t\t\t}else{\n        \t\t\t\tif (i !== res.length-1){\n        \t\t\t\t\tobj[res[i]] = {};\t\n        \t\t\t\t\tobj = obj[res[i]] ;\n        \t\t\t\t}else{\n          \t\t\t\t\tobj[res[i]] = {};\n          \t\t\t\t\tobj[res[i]][name] = template;\n        \t\t\t\t}\n      \t\t\t\t}\n    \t\t\t}\n  \t\t}else{\n    \t\t\tcontainer[name] = template ;\n  \t\t}\n\t};\n\n\tvar regI18n = new RegExp(\"^(.*)\\.(.._..)\\.(.*)$\");\n\n\tvar modelModule = class modelModule {\n\n\t\tconstructor(config){\n\t\t\tthis.rootName = \"module\";\n\t\t\tvar documentXml = this.parser(config);\t\t\n\t\t\t//this.name = this.config.name[\"@short\"];\n\t\t\tthis.name = documentXml.module['@id'];\n\t\t}\n\n\t\tparser (ele){\n\t\t\tswitch ( stage.typeOf(ele) ){\n\t\t\t\tcase \"document\" :\n\t\t\t\t\tvar res  = stage.xml.parseXml(ele) ; \n\t\t\t\t\tbreak;\n\t\t\t\tcase \"object\" :\t\n\t\t\t\t\tres = ele ;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( !  res[ this.rootName ]){\n\t\t\t\tthrow new Error (\"BAD MODULE CONFIG \");\n\t\t\t}\n\t\t\tthis.config = res[ this.rootName ] ; \n\t\t\treturn res;\n\t\t}\n\n\t\tregisterScript ( src){\n\t\t\tthis.autoloader.load( src, (error, transport) => {\n\t\t\t\tif (error){\n\t\t\t\t\tthis.logger(error, \"ERROR\");\n \t\t\t       \t\treturn ;\n\t\t\t\t}\n\t\t\t\tthis.logger(\"LOAD SCRIPT : \"+src ,\"DEBUG\");\n\t\t\t});\n\t\t}\n\n\t\tregisterStyle ( src){\n\t\t\tthis.autoloader.load( src, (error, transport) => {\n\t\t\t\tif (error){\n\t\t\t\t\tthis.logger(error, \"ERROR\");\n \t\t\t       \t\treturn ;\n\t\t\t\t}\n\t\t\t\tthis.logger(\"LOAD STYLE : \"+src ,\"DEBUG\");\n\t\t\t});\n\t\t}\n\n\t\tcacheFont ( src){\n\t\t\t$.ajax({\n\t\t\t\tasync: false,\n\t\t\tcache: true,\n\t\t\turl: src,\n\t\t\tbeforeSend:  ( xhr ) =>  {\n\t\t\t\txhr.overrideMimeType(\"application/octet-stream\");\n\t\t\t},\n\t\t\tsuccess: () => {\n\t\t\t\tthis.logger(\"LOAD FONT : \" + src, \"DEBUG\");\n\t\t\t},\n\t\t\terror: (e) => {\n\t\t\t\tconsole.log(e);\n\t\t\t\tthis.logger(src + \" : \" + message, \"ERROR\");\n\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tregisterTemplate (name, src, type){\n\t\t\t//console.log(\"NAME :\" + name)\n\t\t\tswitch(type){\n\t\t\t\tcase \"application/twig\":\n\t\t\t\t\t//var obj = urlParser.call(this, this.templates, src, name);\n\t\t\t\t\tthis.twig({\n\t\t\t\t\t\tid: this.name+\":\"+name,\n\t\t\t\t\thref: src,\n\t\t\t\t\tasync: false,\n\t\t\t\t\t//debug:true,\n\t\t\t\t\tload:(template) => {\n\t\t\t\t\t\turlParser.call(this, this.templates, src, name , template )\n\t\t\t\t\t\tthis.logger(\"LOAD TEMPLATE : \"+name +\" ==>\"+src ,\"DEBUG\");\n\t\t\t\t\t//console.log(this.templates)\n\t\t\t\t\t//obj[name] = template;\n\t\t\t\t\t//console.log(template.extend)\n\t\t\t\t\t//this.templateEngine\n\t\t\t\t\t},\n\t\t\t\t\terror:(xrh, status, message) => {\n\t\t\t\t\t\tthis.logger(\"TEMPLATE :\" + src + \" : \"+ message, \"ERROR\")\n\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"text/html\":\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"application/xml\":\n\t\t\t\tcase \"text/xml\":\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"template\":\n\t\t\t\t\tvar obj = urlParser.call(this, this.templates, src.url, name, src);\n\t\t\t\t\t//obj[name] = src;\n\t\t\t\t\tthis.logger(\"LOAD IMPORT TEMPLATE : \"+name +\" ==>\"+src.url ,\"DEBUG\");\n\t\t\t\t\tbreak;\n\t\t\t\tdefault :\n\t\t\t\t\tthis.registerTemplate( name, src, \"application/twig\" );\n\t\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\n\t\tregisterView (name, src, type){\n\t\t\tswitch(type){\n\t\t\t\tcase \"text/javascript\":\n\t\t\t\tcase \"application/javascript\":\n\t\t\t\t\tthis.autoloader.load( src, (error, transport) => {\n\t\t\t\t\t\tif (error){\n\t\t\t\t\t\t\tthis.logger(error, \"ERROR\");\n\t\t\t\t\t\t\treturn ;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//this.views[name] = new ;\n\t\t\t\t\t\tvar Class = stage.views[name];\n\t\t\t\t\t\tthis.views[name] = new Class(this.container, this);\n\t\t\t\t\t\tthis.logger(\"LOAD VIEW : \"+src ,\"DEBUG\");\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t}\n\t\t}\n\n\t\tregisterController (name, src){\n\t\t\tthis.autoloader.load( src, (error, transport) => {\n\t\t\t\tif (error){\n\t\t\t\t\tthis.logger(error, \"ERROR\")\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t\ttry {\n\t\t\t\t\tvar Class = stage.controllers[name]; \n\t\t\t\t\tthis.controllers[name] = new Class(name, this.container, this);\n\t\t\t\t\tthis.logger(\"LOAD CONTROLLER : \"+name +\" ==>\"+src ,\"DEBUG\");\n\t\t\t\t}catch(e){\n\t\t\t\t\tthrow e ;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tinitialiseRest (name, url, optionsGlobal){\n\t\t\tvar rest = this.kernel.restService ;\n\t\t\tvar ele = rest.addApi(name, url, optionsGlobal);\n\t\t\tthis.kernel.set(name, ele);\n\t\t}\n\n\t\tregisterTranslation (src, type){\n\t\t\tvar service = this.get(\"i18n\");\n\t\t\tif (! service){\n\t\t\t\tthis.logger(\"SERVICE I18N not loaded abort load Translation : \"+src,\"WARNING\");\n\t\t\t\treturn ;\n\t\t\t}\n\t\t\t$.ajax({\n\t\t\t\turl:src,\n\t\t\t\tasync:false,\n\t\t\t\tsuccess:(data, status, xhr) => {\n\t\t\t\t\tvar name = stage.basename(src) ;\n\t\t\t\t\tthis.logger(\"LOAD TRANSLATION \"+ type +\" : \"+name +\" URL = \"+src ,\"DEBUG\");\n\t\t\t\t\tvar res = regI18n.exec(name);\t\n\t\t\t\t\tif ( ! res ){\n\t\t\t\t\t\tthis.logger(\"SERVICE I18N  abort load Translation : \"+src+ \" Bad File name format\",\"WARNING\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar domain = res[1];\n\t\t\t\t\tvar locale = res[2];\n\t\t\t\t\tservice.registerI18n(name, locale, domain, data);\n\t\t\t\t},\n\t\t\t\tdataType: type || \"json\",\n\t\t\t\terror:(xhr, status, err) => {\n\t\t\t\t\tthis.logger(err, \"ERROR\")\n\t\t\t\t}\t\n\t\t\t});\n\t\t}\n\n\t\treader (){\n\t\t\tvar root = this.config;\n\t\t\tfor (var node in this.config){\n\t\t\t\tswitch ( node ){\n\t\t\t\t\tcase \"content\" :\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"controllers\":\n\n\t\t\t\t\t\tvar controllers = root[node].controller;\n\t\t\t\t\t\tif(controllers){\n\t\t\t\t\t\t\tvar tab = stage.typeOf(controllers) === \"object\" ? [controllers] : controllers ;\n\t\t\t\t\t\t\tfor (var i = 0 ; i < tab.length ; i++){\n\t\t\t\t\t\t\t\tvar name = tab[i][\"@name\"];\n\t\t\t\t\t\t\t\tvar src = tab[i][\"@src\"];\n\t\t\t\t\t\t\t\tthis.registerController(name, src)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"views\":\n\t\t\t\t\t\tvar views = root[node].view;\n\t\t\t\t\t\tif(views){\n\t\t\t\t\t\t\tvar tab = stage.typeOf(views) === \"object\" ? [views] : views ;\n\t\t\t\t\t\t\tfor (var i = 0 ; i < tab.length ; i++){\n\t\t\t\t\t\t\t\tvar name = tab[i][\"@name\"];\n\t\t\t\t\t\t\t\tvar src = tab[i][\"@src\"];\n\t\t\t\t\t\t\t\tvar type = tab[i][\"@type\"];\n\t\t\t\t\t\t\t\tthis.registerView(name, src, type);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"modules\":\n\t\t\t\t\t\tvar modules = root[node].module;\n\t\t\t\t\t\tif(modules){\n\t\t\t\t\t\t\tvar tab = stage.typeOf(modules) === \"object\" ? [modules] : modules ;\n\t\t\t\t\t\t\tfor (var i = 0 ; i < tab.length ; i++){\n\t\t\t\t\t\t\t\t//var name = tab[i][\"@name\"];\n\t\t\t\t\t\t\t\tvar url = tab[i][\"@href\"];\n\t\t\t\t\t\t\t\tif ( ! this.isDomReady){\n\t\t\t\t\t\t\t\t\tthis.kernel.listen(this,\"onBoot\",function(url){\n\t\t\t\t\t\t\t\t\t\tthis.kernel.loadModule(url, {\n\t\t\t\t\t\t\t\t\t\t\tasync:false\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}.bind(this, url))\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\tthis.kernel.loadModule(url);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"templates\":\n\t\t\t\t\t\tvar templates = root[node].template;\n\t\t\t\t\t\tif(templates){\n\t\t\t\t\t\t\tvar tab = stage.typeOf(templates) === \"object\" ? [templates] : templates ;\n\t\t\t\t\t\t\tfor (var i = 0 ; i < tab.length ; i++){\n\t\t\t\t\t\t\t\tvar name = tab[i][\"@name\"];\n\n\t\t\t\t\t\t\t\tvar src = tab[i][\"@src\"];\n\t\t\t\t\t\t\t\tvar type = tab[i][\"@type\"];\n\t\t\t\t\t\t\t\tif ( ! name){\n\t\t\t\t\t\t\t\t\tname = this.getTemplateName(src)\t\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.registerTemplate(name, src, type);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"styles\":\n\t\t\t\t\t\tvar styles = root[node].style;\n\t\t\t\t\t\tif(styles){\n\t\t\t\t\t\t\tvar tab = stage.typeOf(styles) === \"object\" ? [styles] : styles ;\n\t\t\t\t\t\t\tfor (var i = 0 ; i < tab.length ; i++){\n\t\t\t\t\t\t\t\tvar src = tab[i][\"@src\"];\n\t\t\t\t\t\t\t\tthis.registerStyle(src);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"scripts\":\n\t\t\t\t\t\tvar scripts = root[node].script;\n\t\t\t\t\t\tif(scripts){\n\t\t\t\t\t\t\tvar tab = stage.typeOf(scripts) === \"object\" ? [scripts] : scripts ;\n\t\t\t\t\t\t\tfor (var i = 0 ; i < tab.length ; i++){\n\t\t\t\t\t\t\t\tvar src = tab[i][\"@src\"];\n\t\t\t\t\t\t\t\tthis.registerScript(src);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"fonts\":\n\t\t\t\t\t\tvar fonts = root[node].font;\n\t\t\t\t\t\tif(fonts){\n\t\t\t\t\t\t\tvar tab = stage.typeOf(fonts) === \"object\" ? [fonts] : fonts ;\n\t\t\t\t\t\t\tfor (var i = 0 ; i < tab.length ; i++){\n\t\t\t\t\t\t\t\tvar src = tab[i][\"@src\"];\n\t\t\t\t\t\t\t\tthis.cacheFont(src);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"translations\":\n\t\t\t\t\t\tvar translations = root[node].translation;\n\t\t\t\t\t\tif(translations){\n\t\t\t\t\t\t\tvar tab = stage.typeOf(translations) === \"object\" ? [translations] : translations ;\n\t\t\t\t\t\t\tfor (var i = 0 ; i < tab.length ; i++){\n\t\t\t\t\t\t\t\tvar src = tab[i][\"@src\"];\n\t\t\t\t\t\t\t\tvar type = tab[i][\"@type\"];\n\t\t\t\t\t\t\t\tthis.registerTranslation(src, type );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"icon\" :\n\t\t\t\t\t\tthis.icon = root[node][\"@src\"];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t/*case \"name\" :\n\t\t\t\t\t\t  console.log(root[node])\n\t\t\t\t\t\t  this.name = root[node][\"@short\"];\n\t\t\t\t\t\t  break;*/\n\t\t\t\t\tcase \"preference\":\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"author\":\n\t\t\t\t\t\tvar author = root[node];\n\t\t\t\t\t\tthis.author = author[\"#text\"];\n\t\t\t\t\t\tthis.emailAuthor = author[\"@email\"];\n\t\t\t\t\t\tthis.authorLink = author[\"@href\"];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"description\":\n\t\t\t\t\t\tthis.description = root[node];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"api\":\n\t\t\t\t\t\t//console.log(root[node]);\n\t\t\t\t\t\tfor(var ele in root[node]){\n\t\t\t\t\t\t\tvar mvc = root[node][ele];\n\t\t\t\t\t\t\tvar tab = stage.typeOf(mvc) === \"object\" ? [mvc] : mvc;\n\t\t\t\t\t\t\tfor(var i = 0; i < tab.length; i++){\n\t\t\t\t\t\t\t\tif(ele === \"rest\"){\n\t\t\t\t\t\t\t\t\tif( this.kernel.restService )\n\t\t\t\t\t\t\t\t\t\tthis.initialiseRest(tab[i][\"@name\"], tab[i][\"@url\"]);\n\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\tthis.logger(\"Api \" + ele + \" SERVICE REST NOT FOUND\" ,\"ERROR\")\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis.logger(\"Api \" + ele + \" not exist for modules\" ,\"ERROR\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"routes\":\n\t\t\t\t\t\tvar routes = root[node].route;\n\t\t\t\t\t\tswitch(stage.typeOf( routes)){\n\t\t\t\t\t\t\tcase \"array\":\n\t\t\t\t\t\t\t\tfor (var i = 0 ;i<routes.length; i++){\n\t\t\t\t\t\t\t\t\tvar id = routes[i][\"@id\"];\n\t\t\t\t\t\t\t\t\tvar path = routes[i][\"@path\"];\n\t\t\t\t\t\t\t\t\tvar defaultParam = {};\n\t\t\t\t\t\t\t\t\tswitch(stage.typeOf( routes[i][\"default\"])){\n\t\t\t\t\t\t\t\t\t\tcase \"array\":\n\t\t\t\t\t\t\t\t\t\t\tfor (var j=0 ;j<routes[i][\"default\"].length;j++){\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultParam[routes[i][\"default\"][j][\"@key\"]] =  routes[i][\"default\"][j][\"#text\"];\n\t\t\t\t\t\t\t\t\t\t\t\t//console.log(defaultParam)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\t\t\t\t\tif (routes[i][\"default\"][\"@key\"])\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultParam[routes[i][\"default\"][\"@key\"]] = routes[i][\"default\"][\"#text\"];\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tthis.routes[id] = this.router.createRoute(id, path, defaultParam);\t\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\t\tfor (var route in routes){\n\t\t\t\t\t\t\t\t\tswitch (route){\n\t\t\t\t\t\t\t\t\t\tcase \"@id\":\n\t\t\t\t\t\t\t\t\t\t\tvar id = routes[route];\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase \"@path\":\n\t\t\t\t\t\t\t\t\t\t\tvar path = routes[route];\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase \"default\":\n\t\t\t\t\t\t\t\t\t\t\tvar defaultParam = {};\n\t\t\t\t\t\t\t\t\t\t\tswitch(stage.typeOf( routes[route] )){\n\t\t\t\t\t\t\t\t\t\t\t\tcase \"array\":\n\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var j=0 ;j<routes[route].length;j++){\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultParam[routes[route][j][\"@key\"]] =  routes[route][j][\"#text\"];\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultParam[routes[route][\"@key\"]] = routes[route][\"#text\"]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.routes[id] = this.router.createRoute(id, path, defaultParam);\n\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\n\t/*\n \t*\n \t*\tCLASS Module\n \t*\n \t*/\n\tvar regPattern = /(.*)Module:(.*):(.*)$/;\n\n\tvar Module = class Module extends  modelModule  {\n\n\t\tconstructor(kernel, config, settings){\n\t\t\tsuper(config);\n\t\t\tthis.kernel = kernel;\n\t\t\tthis.container = kernel.container;\n\t\t\tthis.syslog = this.get(\"syslog\");\n\t\t\tthis.logger(\"REGISTER MODULE \"+this.name, \"DEBUG\");\n\t\t\tthis.autoloader = new stage.autoload(this, {\n\t\t\t\ttransport:\"script\"\n\t\t\t});\n\t\t\tthis.views = {};\n\t\t\tthis.controllers = {};\n\t\t\tthis.templates = {};\n\t\t\tthis.routes = {};\n\n\t\t\tthis.twig = this.get(\"twig\");\n\n\t\t\tthis.setParameters(\"module.\"+this.name, this.config);\n\t\t\tthis.set(this.name, this);\n\t\t\tthis.boot(settings);\n\t\t}\n\n\t\tlisten (){\n\t\t\treturn this.notificationsCenter.listen.apply(this.notificationsCenter, arguments);\n\t\t}\n\n\t\tfire (event){\n\t\t\tthis.logger(event+\" : \"+ this.name , \"DEBUG\", \"EVENT MODULE\")\n\t\t\t\treturn this.notificationsCenter.fire.apply(this.notificationsCenter, arguments);\n\t\t}\n\n\t\tlogger (pci, severity, msgid,  msg){\n\t\t\tif (! msgid) msgid = \"MODULE  \"+this.name;\n\t\t\treturn this.syslog.logger(pci, severity, msgid,  msg);\t\n\t\t}\n\n\t\t/**\n\t \t\t*\t@method get\n\t \t\t*\t@param {String} name of service\n         \t\t*/\n\t\tget (name){\n\t\t\treturn this.container.get(name);\n\t\t}\n\n\t\t/**\n\t \t\t*\t@method set\n\t \t\t*\t@param {String} name of service\n\t \t\t*\t@param {Object} instance of service\n         \t\t*/\n\t\tset (name, obj){\n\t\t\treturn this.container.set(name, obj);\n\t\t}\n\n\t\tsetParameters (name, value){\n\t\t\treturn this.container.setParameters(name, value);\t\n\t\t}\n\n\t\tgetParameters (name){\n\t\t\treturn this.container.getParameters(name);\t\n\t\t}\n\n\t\tgetController (name){\n\t\t\treturn this.controllers[name];\n\t\t}\n\n\t\tgetTemplate (name){\n\t\t\treturn this.templates[name];\n\t\t}\n\n\t\tgetTemplateName (url){\n\t\t\tvar name = stage.basename(url);\n\t\t\tvar index = name.indexOf(\".\");\n\t\t\tif (index < 0)\n\t\t\t\treturn url;\n\t\t\treturn name.slice(0, name.indexOf(\".\") );\n\t\t}\n\n\t\tgetTemplatePattern (pattern){\n\t\t\tvar res  = regPattern.exec(pattern);\n\t\t\tif ( ! res ){\n\t\t\t\tvar txt = \"IN PATTERN :\" + pattern +\" BAD FORMAT \" ;\n\t\t\t\tthis.logger(txt,\"ERROR\")\n\t\t\t\t\tthrow new Error(txt);\n\t\t\t}\n\t\t\tvar moduleName = res[1];\n\t\t\tvar pathName = res[2];\n\t\t\tvar templateName = res[3];\t\n\t\t\tvar module = this.kernel.getModule(moduleName);\n\t\t\tif ( ! module ){\n\t\t\t\tvar txt = \"IN PATTERN :\" + pattern +\" MODULE :\"+ moduleName +\" not defined\" ;\n\t\t\t\tthis.logger(txt,\"ERROR\")\n\t\t\t\t\tthrow new Error(txt);\n\t\t\t}\n\t\t\tvar obj = module.templates ;\n\t\t\tif (pathName !== \"\"){\n\t\t\t\tvar tab = pathName.split(\"/\");\n\t\t\t\tfor (var i = 0 ; i<tab.length ; i++){\n\t\t\t\t\tif (tab[i]){\n\t\t\t\t\t\tif (tab[i] in obj){\n\t\t\t\t\t\t\tobj = obj[tab[i]];\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tvar txt = \"IN PATTERN :\" + pattern +\" pathName :\"+ pathName +\" not defined\" ;\n\t\t\t\t\t\t\tthis.logger(txt,\"ERROR\")\n\t\t\t\t\t\t\t\tthrow new Error(txt);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (templateName !== \"\" ){\n\t\t\t\tvar name = this.getTemplateName(templateName);\n\t\t\t\tif (obj[name]){\n\t\t\t\t\treturn obj[name];\n\t\t\t\t}else{\n\t\t\t\t\tvar txt = \"IN PATTERN :\" + pattern +\" MODULE :\"+ moduleName +\"  template : \"+ templateName +\" not defined\" ;\n\t\t\t\t\tthis.logger(txt,\"ERROR\")\n\t\t\t\t\t\tthrow new Error(txt);\t\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif (obj[\"index\"]){\n\t\t\t\t\treturn obj[\"index\"];\n\t\t\t\t}else{\n\t\t\t\t\tvar txt = \"IN PATTERN :\" + pattern +\" MODULE :\"+ moduleName +\" default template not defined\" ;\n\t\t\t\t\tthis.logger(txt,\"ERROR\")\n\t\t\t\t\t\tthrow new Error(txt);\t\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tgetView (name){\n\t\t\treturn this.views[name];\n\t\t}\n\n\t\tboot (settings){\n\t\t\tthis.logger(\"BOOT \"+ this.name , \"DEBUG\");\n\t\t\tthis.container = this.kernel.container.enterScope(this.name);\n\t\t\tthis.notificationsCenter = stage.notificationsCenter.create(settings,this);\n\t\t\tthis.set(\"notificationsCenter\", this.notificationsCenter);\n\t\t\tthis.router = this.kernel.router ;\n\n\t\t\ttry {\n\t\t\t\tthis.fire(\"onBoot\", this);\t\n\t\t\t\tthis.reader();\n\t\t\t\tthis.fire(\"onReady\",this);\n\t\t\t}catch (e){\n\t\t\t\tthis.logger(\"MODULE : \"+ this.name +\"  \"+e, \"ERROR\");\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t}\n\t};\n\n\tstage.Module = Module; \n\treturn Module ;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/kernel/module.es6","const  Twig = require(\"twig\");\n\nmodule.exports =  function(stage){\n\n\t'use strict';\n\t\t\t\n\t/*\n \t *\n \t *\tROUTE\n \t *\n \t */\n\n\tvar decode = function(str) {\n\t\ttry {\n\t\t\treturn decodeURIComponent(str);\n\t\t} catch(err) {\n\t\t\treturn str;\n\t\t}\n\t};\n\tvar Route = class Route {\n\n\t\tconstructor(id, path, defaultParams){\n\t\t\tthis.id = id ;\n\t\t\tthis.path = path;\n\t\t\tthis.template = null;\t\n\t\t\tthis.controller =null;\n\t\t\tthis.defaults =  defaultParams;\n\t\t\tthis.variables = [];\n\t\t\tthis.pattern = this.compile();\n\t\t};\n\n\t\tcompile (){\n\t\t\tvar pattern = this.path.replace(/(\\/)?(\\.)?\\{([^}]+)\\}(?:\\(([^)]*)\\))?(\\?)?/g, (match, slash, dot, key, capture, opt, offset) =>  {\n\t\t\t\tvar incl = (this.path[match.length+offset] || '/') === '/';\n\t\t\t\tthis.variables.push(key);\n\t\t\t\treturn (incl ? '(?:' : '')+(slash || '')+(incl ? '' : '(?:')+(dot || '')+'('+(capture || '[^/]+')+'))'+(opt || '');\n\t\t\t});\n\t\t\tpattern = pattern.replace(/([\\/.])/g, '\\\\$1').replace(/\\*/g, '(.+)');\n\t\t\tthis.pattern = new RegExp('^'+pattern+'[\\\\/]?$', 'i');\n\t\t\treturn this.pattern ;\t\n\t\t}\n\n\t\tmatch (url){\n\t\t\tvar res = url.match(this.pattern);\n\t\t\t//console.log(res)\n\t\t\tif (!res) {\n\t\t\t\treturn res;\n\t\t\t}\n\t\t\tvar map = [];\n\t\t\tvar tab = res.slice(1) ;\n\t\t\tfor (var i = 0 ; i<tab.length; i++){\n\t\t\t\tvar k = this.variables[i] || 'wildcard';\n\t\t\t\tvar param = tab[i] && decode(tab[i]);\n\t\t\t\t//var index = map.push( map[k] ? [].concat(map[k]).concat(param) : param );\n\t\t\t\tvar index = map.push( param )\n\t\t\t\tmap[k] = map[index-1] ;\n\n\t\t\t}\n\t\t\tif ( map && map.wildcard) {\n\t\t\t\tmap['*'] = map.wildcard;\n\t\t\t}\n\t\t\treturn map;\n\t\t}\n\t};\n\n\t/*\n \t *\n \t *\tRESOLVER\n \t *\n \t */\n\tvar regModuleName = /^(.*)Module[\\.js]{0,3}$/;\n\tvar Resolver = class Resolver {\n\n\t\tconstructor(container){\n\t\t\tthis.container = container;\n\t\t\tthis.resolve = false;\n\t\t\tthis.kernel = this.container.get(\"kernel\");\n\t\t\tthis.defaultAction = null;\n\t\t\tthis.defaultView = null;\n\t\t\tthis.variables = new Array();\n\t\t\tthis.router = this.container.get(\"router\")\n\t\t\tthis.browser = this.container.get(\"browser\")\n\t\t\t//this.notificationsCenter = this.container.get(\"notificationsCenter\") ;\n\t\t\n\t\t}\n\n\t\tmatch (route, url){\n\t\t\tvar match = route.match(url); \n\t\t\tif ( match ){\n\t\t\t\tthis.variables = match;\n\t\t\t\tthis.url = url;\n\t\t\t\tthis.route = route;\n\t\t\t\tthis.parsePathernController(route.defaults.controller)\n\t\t\t}\t\t\n\t\t\treturn match;\n\t\t}\n\n\n\t\tgetModuleName (str){\n\t\t\tvar ret = regModuleName.exec(str);\n\t\t\tif (ret){\n\t\t\t\treturn  ret[1] ;\n\t\t\t}else{\n\t\t\t\tthrow \"BAD MODULE PATTERN \";\n\t\t\t}\n\t\t}\n\n\t\tgetController (name){\n\t\t\treturn this.module.controllers[name+\"Controller\"];\n\t\t}\n\n\t\tgetAction (name){\n\t\t\tvar ele = name+\"Action\" ;\n\t\t\tif ( ele in this.controller ){\n\t\t\t\treturn this.controller[ele]\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tgetDefaultView (controller, action){\n\t\t\tvar res = this.module.name+\"Module\"+\":\"+controller+\":\"+action+\".html.twig\";\n\t\t\treturn res ; \n\t\t}\n\n\t\tparsePathernController (pattern){\n\t\t\tif (typeof pattern !== \"string\"){\n\t\t\t\tthrow new Error(\"Resolver : pattern : \"+pattern +\" MUST be a string\");\t\n\t\t\t}\n\t\t\tthis.route = this.router.getRouteByPattern(pattern);\n\t\t\tvar tab = pattern.split(\":\")\n\t\t\ttry {\n\t\t\t\tthis.module = this.kernel.getModule( this.getModuleName(tab[0]) );\n\t\t\t}catch(e){\n\t\t\t\tthrow new Error(\"Resolver pattern error module :  \" + pattern + \" : \" +e );\n\t\t\t}\n\t\t\tif ( this.module ){\n\t\t\t\tthis.controller = this.getController(tab[1]);\n\t\t\t\tif ( this.controller ){\n\t\t\t\t\tif (tab[2]){\n\t\t\t\t\t\tthis.action = this.getAction(tab[2]);\n\t\t\t\t\t\tif (! this.action ){\n\t\t\t\t\t\t\tthrow new Error(\"Resolver :In CONTROLLER: \"+ tab[1] +\" ACTION  :\"+tab[2] + \" not exist\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.action = null;\t\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tthrow new Error(\"Resolver :controller not exist :\"+tab[1] );\n\t\t\t\t}\n\t\t\t\tthis.defaultView = this.getDefaultView(tab[1], tab[2] );\n\t\t\t\tthis.resolve = true;\n\t\t\t}else{\n\t\t\t\t//this.logger(\"Resolver : not exist :\"+tab[0] , \"ERROR\")\n\t\t\t\tthrow new Error(\"Resolver : module not exist :\"+tab[0] );\n\t\t\t}\n\t\t}\n\t\t\n\t\tcallController (arg){\n\t\t\ttry{\n\t\t\t\tvar ret = this.action.apply(this.controller, arg || [])\t\n\t\t\t}catch(e){\n\t\t\t\tthis.controller.logger.call(this.controller, e, \"ERROR\");\t\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t\treturn ret;\n\t\t}\n\t};\n\n\t/*\n\t *\tROUTER\n\t */\n\n\tvar cacheState = function(){\n\t\tvar cacheState = window.history.state === undefined ? null : window.history.state;\t\n\t\treturn cacheState ;\n\t}\n\n\tvar nativeHistory = !!(window.history && window.history.pushState );\n\tvar regSerch = /(.*)\\?.*$/;\n\n\tvar service = class service  extends stage.Service {\n\n\t\tconstructor(kernel, container){\n\n\t\t\tsuper(\"ROUTER\", container );\n\t\t\t//this.kernel = kernel ;\n\t\t\t//this.container = container ;\n\t\t\t//this.notificationsCenter = this.container.get(\"notificationsCenter\");\n\t\t\t//this.syslog = kernel.syslog ;\t\n\t\t\tthis.routes = {};\n\t\t\tthis.routePattern = {};\n\t\t\tthis.location = this.get(\"location\");\n\t\t\tthis.browser = this.get(\"browser\");\n\t\t\tthis.logger(\"INITIALIZE ROUTER SERVICE\", \"DEBUG\");\n\n\t\t\t/*\n \t\t \t* Extend Twig js\t\n \t\t \t*/\n\t\t\tTwig.extendFunction(\"path\", (name, variables, host) => {\n\t\t\t\ttry {\n\t\t\t\t\tif (host){\n\t\t\t\t\t\treturn  this.generateUrl.call(this, name, variables, host);\t\n\t\t\t\t\t}else{\n\t\t\t\t\t\tvar generatedPath = this.generateUrl.call(this, name, variables, host);\n\t\t\t\t\t\treturn generatedPath?\"#\"+generatedPath:\"\";\n\t\t\t\t\t}\n\t\t\t\t}catch(e){\n\t\t\t\t\tthis.logger(e.error)\n\t\t\t\t\tthrow e.error\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.notificationsCenter.listen(this,\"onUrlChange\" , (url, lastUrl, absUrl ,cache) => {\n\t\t\t\ttry{\n\t\t\t\t\tvar res = this.resolve(url);\n\t\t\t\t\tif(! res.resolve ){\n\t\t\t\t\t\tthis.forward(\"appModule:app:404\");\n\t\t\t\t\t\treturn ;\n\t\t\t\t\t}\n\t\t\t\t\tvar last = this.resolveRoute(lastUrl) \n\t\t\t\t\tif (last){\n\t\t\t\t\t\tthis.notificationsCenter.fire(\"onRouteChange\",{id:res.route.id, route:res.route, args:res.variables} ,{id:last.route.id, route:last.route, args:last.variables});\n\t\t\t\t\t}\n\t\t\t\t}catch (e){\n\t\t\t\t\tthis.logger(e, \"ERROR\");\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\tcreateRoute (id, path, defaultParams){\n\t\t\tif (id in this.routes ){\n\t\t\t\tthis.logger(\"CREATE ROUTE : \"+ id + \"Already exist \", \"ERROR\");\t\n\t\t\t}\n\t\t\tvar route  = new Route(id, path, defaultParams);\n\t\t\tthis.routes[id] = route;\n\t\t\tthis.routePattern[this.routes[id].defaults.controller] = {\n\t\t\t\troute:this.routes[id],\n \t\t        \tpath:path\t\n\t\t\t}\n\t\t\tthis.logger(\"CREATE ROUTE : \"+ id, \"DEBUG\");\n\t\t\treturn route ;\n\t\t}\n\n\t\tgetRoute (name){\n\t\t\tif (this.routes[name])\n\t\t\t\treturn this.routes[name];\n\t\t\treturn null;\n\t\t}\n\n\t\tresolveRoute (url){\n\t\t\tvar resolver = new Resolver(this.container);\n\t\t\tvar res = [];\n\t\t\tfor (var routes in this.routes){\n\t\t\t\tvar route = this.routes[routes];\n\t\t\t\ttry {\n\t\t\t\t\tres = resolver.match(route, url);\n\t\t\t\t\tif (res){\n\t\t\t\t\t\treturn resolver ; \n\t\t\t\t\t}\n\t\t\t\t}catch(e){\n\t\t\t\t\tcontinue ;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\t\n\t\tresolve (url){\n\t\t\t//console.log(\"RESOLVE \" +url)\n\t\t\t//console.log(regSerch.exec(url) );\n\t\t\tvar test = regSerch.exec(url) ;\n\t\t\tif ( test )\n\t\t\t\turl = test[1] ;\n\t\t\tvar resolver = new Resolver(this.container);\n\t\t\tvar res = [];\n\t\t\tfor (var routes in this.routes){\n\t\t\t\tvar route = this.routes[routes];\n\t\t\t\ttry {\n\t\t\t\t\tres = resolver.match(route, url);\n\t\t\t\t\tif (res){\n\t\t\t\t\t\tthis.notificationsCenter.fire(\"onBeforeAction\", url, resolver );\n\t\t\t\t\t\tvar ret = resolver.callController( res)\n\t\t\t\t\t\tthis.notificationsCenter.fire(\"onAfterAction\", url, resolver, ret );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}catch(e){\n\t\t\t\t\tthis.logger(\"RESOLVE URL : \"+ url + \" \" + e,\"ERROR\")\n\t\t\t\t\tthis.forward(\"appModule:app:500\", [e]);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn resolver;\n\t\t}\n\n\t\tgetRouteByPattern (pattern, args){\n\t\t\t//console.log(pattern)\n\t\t\t//console.log(this.routePattern)\n\t\t\tif (pattern in this.routePattern){\n\t\t\t\t//console.log(\"FIND\")\n\t\t\t\tvar route = this.routePattern[pattern].route ;\n\t\t\t\treturn route;\n\t\t\t}\n\t\t\t\t//console.log(\"NOT FIND\")\n\t\t\treturn null;\n\t\t};\n\n\t\tresolvePattern (pattern){\n\t\t\tvar resolver = new Resolver(this.container);\t\n\t\t\tvar route = resolver.parsePathernController(pattern);\n\t\t\treturn resolver;\n\t\t};\n\n\t\tforward (pattern, args){\n\t\t\tvar resolver = this.resolvePattern(pattern);\n\t\t\tif (resolver.resolve){\n\t\t\t\ttry {\n\t\t\t\t\tif (resolver.route){\n\t\t\t\t\t\tthis.logger(\"FORWARD PATTERN : \"+ pattern + \"  FIND ROUTE ==> REDIRECT \",\"DEBUG\")\n\t\t\t\t\t\tthis.redirect(resolver.route.path);\n\t\t\t\t\t\t//this.location.url(resolver.route.path);\n\t\t\t\t\t\t//this.logger(\"FORWARD PATTERN : \"+ pattern + \" find ROUTE : \"+resolver.route.path +\" redirect to URL :\" + this.location.absUrl(),\"DEBUG\")\n\t\t\t\t\t\t//this.browser.url(this.location.absUrl(), true);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.logger(\"FORWARD PATTERN : \"+ pattern + \"  NO ROUTE FIND  ==> CALL CONTROLLER\"  , \"DEBUG\")\n\t\t\t\t\t\tvar ret = resolver.callController(args);\t\n\t\t\t\t\t}\n\t\t\t\t}catch(e){\n\t\t\t\t\tthis.logger(\"FORWARD \"+ pattern +\" CALL CONTROLER  \"+ resolver.controller.name +\" : \"+e,\"ERROR\")\n\t\t\t\t\tthis.forward(\"appModule:app:500\", [e]);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.logger(\"Router Can't resolve : \"+pattern ,\"ERROR\");\n\t\t\t}\n\t\t\treturn false;\t\n\t\t};\n\t\t\n\t\tredirect (url){\n\t\t\tthis.location.url(url);\n\t\t\tthis.logger(\"REDIRECT URL : \"+ url  +\" BROWSER  URL :\" + this.location.absUrl(),\"DEBUG\")\n\t\t\tthis.browser.url(this.location.absUrl() , true);\n\t\t};\n\t\t\t\n\t\tgenerateUrl (name, variables, host){\n\t\t\tvar route =  this.getRoute(name) ;\n\t\t\tif (! route ){\n\t\t\t\tthis.logger(\"no route to host  :\"+ name, \"WARNING\")\n\t\t\t\t//throw {error:\"no route to host  \"+ name};\n\t\t\t\treturn null ; \n\t\t\t}\n\t\t\tvar path = route.path;\n\t\t\tif ( route.variables.length ){\n\t\t\t\tif (! variables  ){\n\t\t\t\t\tvar txt = \"\";\n\t\t\t\t\tfor (var i= 0 ; i < route.variables.length ;i++ ){\n\t\t\t\t\t\ttxt += \"{\"+route.variables[i]+\"} \";\n\t\t\t\t\t}\n\t\t\t\t\tthis.logger(\"router generate path route '\"+ name + \"' must have variable \"+ txt, \"ERROR\")\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tfor (var ele in variables ){\n\t\t\t\t\tif (ele === \"_keys\") continue ;\n\t\t\t\t\tvar index = route.variables.indexOf(ele);\n\t\t\t\t\tif ( index >= 0 ){\n\t\t\t\t\t\tpath = path.replace(\"{\"+ele+\"}\",  variables[ele]);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.logger(\"router generate path route '\"+ name + \"' don't  have variable \"+ ele, \"WARNING\")\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\t\n\t\t\t\t}\t\n\t\t\t}\n\t\t\tif (host){\n\t\t\t\treturn host+\"#\"+path ;\n\t\t\t}\n\t\t\treturn path ;\n\t\t}\n\t};\n\n\tstage.router = service ;\n\treturn service ; \n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/kernel/routerService.es6","module.exports =  function(stage){\n\n\t'use strict';\n\n\tvar settingsSyslog = {\n\t\t//rateLimit:100,\n\t\t//burstLimit:10,\n\t\tmoduleName:\"SERVICE \",\n\t\tdefaultSeverity:\"INFO\"\n\t};\n\n\tvar defaultOptions = {\n\t};\n\n\n\tconst Service = class Service {\n\t\n\t\tconstructor(name, container, notificationsCenter, options ){\n\n\t\t\tif (name){\n\t\t\t\tthis.name = name ;\n\t\t\t}\n\t\t\toptions = stage.extend( {}, defaultOptions, options) ;\n\n\t\t\tif ( container instanceof stage.Container  ){\n\t\t\t\tthis.container = container ;\n\t\t\t}else{\n\t\t\t\tif ( container ){\n\t\t\t\t\tthrow new Error (\"Service stage container not valid must be instance of stage.Container\");\n\t\t\t\t}\n\t\t\t\tthis.container = new stage.Container(); \n\t\t\t\tthis.container.set(\"container\", this.container);\n\t\t\t}\n\t\t\tthis.kernel = this.container.get(\"kernel\");\n\t\t\tthis.syslog = this.container.get(\"syslog\");\n\t\t\tif ( ! this.syslog ){\n\t\t\t\tthis.settingsSyslog = stage.extend({}, settingsSyslog , {\n\t\t\t\t\tmoduleName: this.name\t\n\t\t\t\t},options.syslog || {} );\n\t\t\t\tthis.syslog = new stage.syslog( this.settingsSyslog );\t\n\t\t\t\tthis.set(\"syslog\", this.syslog);\n\t\t\t}else{\n\t\t\t\tthis.settingsSyslog = this.syslog.settings ;\t\n\t\t\t}\n\t\t\tif ( notificationsCenter instanceof stage.notificationsCenter.notification ){\n\t\t\t\tthis.notificationsCenter = notificationsCenter ;\n\t\t\t}else{\n\t\t\t\tif ( notificationsCenter ){\n\t\t\t\t\tthrow new Error (\"Service stage notificationsCenter not valid must be instance of stage.notificationsCenter.notification\");\n\t\t\t\t}\n\t\t\t\tthis.notificationsCenter = this.container.get(\"notificationsCenter\");\n\t\t\t\tif ( ! this.notificationsCenter ){\n\t\t\t\t\tthis.notificationsCenter = stage.notificationsCenter.create(options, this);\n\t\t\t\t\tif (! this.kernel ){\n\t\t\t\t\t\tthis.set(\"notificationsCenter\", this.notificationsCenter);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif ( this.kernel.container !== this.container ){\n\t\t\t\t\t\t\tthis.set(\"notificationsCenter\", this.notificationsCenter);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\t\n\t\t}\n\n\t\tgetName (){\n\t\t\treturn this.name;\n\t\t}\n\n\t\tclean(){\n\t\t\tthis.settingsSyslog = null ;\n\t\t\tdelete this.settingsSyslog ;\n\t\t\tthis.syslog = null  ;\n\t\t\tdelete this.syslog ;\n\t\t\tthis.removeAllListeners();\n\t\t\tthis.notificationsCenter = null ;\n\t\t\tdelete this.notificationsCenter ;\n\t\t\tthis.container = null ;\n\t\t\tdelete this.container ;\n\t\t\tthis.kernel = null ;\n\t\t\tdelete this.kernel ;\n\t\t}\n\t\n\t\tlogger(pci, severity, msgid,  msg){\n\t\t\ttry {\n\t\t\t\tif (! msgid) { msgid = \"SERVICE \" + this.name + \" \"; }\n\t\t\t\treturn this.syslog.logger(pci, severity, msgid,  msg);\t\n\t\t\t}catch(e){\n\t\t\t\tconsole.log(pci);\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t \t*\t@method fire\n\t \t*\t@param {String} event name \n\t \t*\t@param {Arguments} ... arguments to inject  \n         \t*/\n\t\tfire (){\n\t\t\t//this.logger(ev, \"DEBUG\", \"EVENT KERNEL\")\n\t\t\treturn this.notificationsCenter.fire.apply(this.notificationsCenter, arguments);\n\t\t}\n\n\t\t/**\n\t \t*\t@method listen\n\t \t*\t@param {Oject} context\n\t \t*\t@param {String} eventName\n\t \t*\t@param {Function} listener\n         \t*/\n\t\tlisten (){\n\t\t\treturn this.notificationsCenter.listen.apply(this.notificationsCenter, arguments);\n\t\t}\n\n\t\t/**\n\t \t*\t@method removeListener\n\t \t*\t@param {Oject} eventName \n\t \t*\t@param {String} listener\n         \t*/\n\t\tremoveListener (){\n\t\t\treturn this.notificationsCenter.unListen.apply(this.notificationsCenter, arguments);\n\t\t}\n\n\t\t/**\n\t \t*\t@method removeAllListeners\n         \t*/\n\t\tremoveAllListeners (){\n\t\t\treturn this.notificationsCenter.clearNotifications.apply(this.notificationsCenter, arguments);\n\t\t}\n\n\t\t/**\n\t \t *\t@method get\n\t \t *\t@param {String} name of service\n         \t */\n\t\tget (name){\n\t\t\tif (this.container){\n\t\t\t\treturn this.container.get(name);\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\t/**\n\t \t*\t@method set\n\t \t*\t@param {String} name of service\n\t \t*\t@param {Object} instance of service\n         \t*/\n\t\tset (name, obj){\n\t\t\tif (this.container){\n\t\t\t\treturn this.container.set(name, obj);\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tgetParameters (){\n\t\t\treturn this.container.getParameters.apply(this.container , arguments);\n\t\t}\n\n\t\tsetParameters (){\n\t\t\treturn this.container.setParameters.apply(this.container ,arguments);\n\t\t}\n\n\t\thas (){\n\t\t\treturn this.container.has.apply(this.container ,arguments);\t\n\t\t}\n\t};\n\n\tstage.Service = Service;\t\n\treturn Service ;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/kernel/service.es6","var Twig = require(\"twig\");\n\nmodule.exports =  function(stage){\n\n\t'use strict';\n\n\n\tvar translate = {};\n\n\n\tvar translateDispo = {\n\t\tfr_FR:\"français\",\n\t\ten_EN:\"english\"\n\t};\n\n\tvar regNavLang = /(..)-?.*/;\n\n\n\tvar service = class service extends stage.Service {\n\n\t\tconstructor(kernel, container){\n\n\t\t\tsuper(\"I18N\", container, container.get(\"notificationsCenter\"));\n\n\t\t\tthis.logger(\"INITIALIZE I18N SERVICE\", \"DEBUG\");\n\n\t\t\tthis.container.setParameters(\"translate\", translate);\n\t\t\tthis.defaultDomain = this.trans_default_domain();\n\t\t\tvar locale = navigator.language || navigator.userLanguage ;\n\t\t\tvar res = regNavLang.exec(locale);\n\t\t\tif (res){\n                                this.defaultLocale = res[1]+\"_\"+locale.toUpperCase();\n\t\t\t}else{\n\t\t\t\tthis.defaultLocale = \"fr_FR\";\t\n\t\t\t}\n\n                        translate[this.defaultLocale] = {};\n\n\t\t\tthis.listen(this, \"onBoot\",() => {\n\t\t\t\tthis.boot();\n\t\t\t})\t\n\t\t}\n\n\t\t\n\t\tboot (){\n\t\t\t//GET APP locale\n\t\t\tif ( this.kernel.modules.app &&  this.container.getParameters(\"module.app\") ){\n\t\t\t\tthis.defaultLocale = this.container.getParameters(\"module.app\").locale || this.defaultLocale;\n\t\t\t}\n\n\t\t\tif  ( ! translate[this.defaultLocale]){\n\t\t\t\ttranslate[this.defaultLocale] = {};\n\t\t\t}\n\n\t\t\tthis.logger(\"DEFAULT LOCALE APPLICATION ==> \" + this.defaultLocale ,\"DEBUG\");\n\t\t\tif (Twig){\n\t\t\t\tTwig.extendFunction(\"getLangs\", this.getLangs.bind(this));\n\t\t\t\tTwig.extendFunction(\"trans_default_domain\", this.trans_default_domain.bind(this));\n\t\t\t\tTwig.extendFilter(\"trans\", this.translation.bind(this));\n\t\t\t\tTwig.extendFunction(\"trans\", this.translation.bind(this));\n\t\t\t\tTwig.extendFilter(\"getLangs\", this.getLangs.bind(this));\n\t\t\t}\n\t\t}\n\n\t\tgetLangs (locale, data){\n\t\t\tvar obj = [];\n\t\t\tfor ( var ele in translateDispo){\n\t\t\t\tobj.push({\n\t\t\t\t\tname:translateDispo[ele],\n\t\t\t\t\tvalue:ele\n\t\t\t\t});\t\n\t\t\t}\n\t\t\treturn obj;\n\t\t}\n\n\n\t\tregisterI18n (name, locale, domain, data){\n\t\t\tif ( locale ){\n\t\t\t\tif( !translate[locale] )\n\t\t\t\t\ttranslate[locale] = stage.extend(true, {}, translate[this.defaultLocale]);\t\n\t\t\t}\n\t\t\tif ( domain ){\n\t\t\t\tif( !translate[locale][domain] ){\n\t\t\t\t\ttranslate[locale][domain] = stage.extend(true, {}, translate[this.defaultLocale][domain]);\n\t\t\t\t}\n\t\t\t\tstage.extend(true, translate[locale][domain], data);\t\t\n\t\t\t}else{\n\t\t\t\tstage.extend(true, translate[locale], data);\t\n\t\t\t} \n\t\t}\n\n\t\ttrans_default_domain (domain){\n\t\t\tif ( ! domain ){\n\t\t\t\treturn this.defaultDomain = \"messages\" ; \n\t\t\t}\n\t\t\treturn this.defaultDomain = domain ;\n\t\t}\n\n\t\t/*\n \t \t*\n \t \t*\n \t \t*\n \t \t*\n \t \t*/\n\t\ttranslation (value, args){\n\t\t\t\n\t\t\tvar defaulDomain = ( args && args[1] ) ? args[1] : this.defaultDomain ;\n\t\t\tvar str = this.container.getParameters(\"translate.\"+this.defaultLocale+\".\"+defaulDomain+\".\"+value) || value;\n\t\t\tif (args){\n\t\t\t\tif (args[0]){\n\t\t\t\t\tfor (var ele in args[0]){\n\t\t\t\t\t\tstr = str.replace(ele, args[0][ele]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn str;\n\t\t}\n\t};\n\n\tstage.i18n = service ;\n\n\treturn service;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/kernel/translationService.es6","require(\"webrtc-adapter\");\n\nmodule.exports =  function(stage){\n\n\t'use strict';\n\n\tvar audioContext = null ;\n\n\tvar webAudioApi = function(){\n\t\taudioContext = window.AudioContext || window.webkitAudioContext  ;\n\t\tif (audioContext)\n\t\t\treturn true;\n\t\treturn false;\n\t}();\n\n\t// UDPATER\n \tvar mediaStream = null ;\n\tvar getMediaStream =null;\n\n\tvar updaterMedia = function(){\n\t\t// MediaStream\tAPI\n\t\ttry {\n\t\t\tif (stage.browser.Webkit){\n\n\t\t\t\tgetMediaStream = function(stream){\n\t\t\t\t\treturn URL.createObjectURL(stream);\n\t\t\t\t};\n\n\t\t\t\tmediaStream =  webkitMediaStream ;\n  \t\t\t\t// The representation of tracks in a stream is changed in M26.\n  \t\t\t\t// Unify them for earlier Chrome versions in the coexisting period.\n  \t\t\t\tif (!webkitMediaStream.prototype.getVideoTracks) {\n\t\t\t\t\twebkitMediaStream.prototype.getVideoTracks = function() {\n\t\t\t\t\t\treturn this.videoTracks;\n\t\t\t\t\t};\n\t\t\t\t\twebkitMediaStream.prototype.getAudioTracks = function() {\n\t\t\t\t\t\treturn this.audioTracks;\n\t\t\t\t\t};\n  \t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (stage.browser.Gecko){\n\n\t\t\t\tgetMediaStream = function(stream){\n\t\t\t\t\treturn window.URL.createObjectURL(stream);\n\t\t\t\t};\n\n\t\t\t\tmediaStream =  MediaStream ;\n  \t\t\t\t// Fake get{Video,Audio}Tracks\n\t\t\t\tif (!MediaStream.prototype.getVideoTracks) {\n\t\t\t\t\tMediaStream.prototype.getVideoTracks = function() {\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (!MediaStream.prototype.getAudioTracks) {\n\t\t\t\t\tMediaStream.prototype.getAudioTracks = function() {\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (stage.browser.Opera){\n\t\t\t\t//getUserMedia = navigator.getUserMedia ;\n\t\t\t\tgetMediaStream = function(stream){\n\t\t\t\t\treturn stream;\n\t\t\t\t};\n\t\t\t\t// Fake get{Video,Audio}Tracks\n\t\t\t\tif (!MediaStream.prototype.getVideoTracks) {\n\t\t\t\t\tMediaStream.prototype.getVideoTracks = function() {\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (!MediaStream.prototype.getAudioTracks) {\n\t\t\t\t\tMediaStream.prototype.getAudioTracks = function() {\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tconsole.error(\"Browser does not appear to be mediaStream-capable\");\n\t\t\tthrow(\"Browser does not appear to be mediaStream-capable\");\n\t\t}catch(e){\n\t\t\tthrow(e);\n\t\t}\n\t}();\n\n\t/*\n \t *\tMEDIA STREAM\n \t *\n \t *\n \t *\n \t *\n \t */\n\tvar defaultSettingsStream = {\n\t\taudio:true,\n\t\tvideo:true\n\t};\n\t\t\n\t/*var attachMediaStream = function(){\n\t\tif (stage.browser.Webkit || stage.browser.Opera){\n\t\t\treturn function(element){\n\t\t\t\t// Attach a media stream to an element.\n\t\t\t\tthis.mediaElement = element;\n\t\t\t\tthis.mediaElement.srcObject = this.stream ;\n\t\t\t\t//element.src = this.getMediaStream(this.stream);\n\t\t\t\tthis.mediaElement.play();\n\t\t\t}\n\t\t}\n\t\tif (stage.browser.Gecko){\n\t\t\treturn function(element){\n\t\t\t\t// Attach a media stream to an element.\n\t\t\t\tthis.mediaElement = element;\n\t\t\t\tthis.mediaElement.srcObject = this.stream ;\n\t\t\t\t//element.mozSrcObject = this.stream;\n\t\t\t\tthis.mediaElement.play();\n\t\t\t}\n\t\t}\n  \t}();*/\n\n\t//FIXME\n\t/*var reattachMediaStream = function (){\n\t\tif (stage.browser.Webkit){\n\t\t\treturn function(to){\n\t\t\t\t// reattach a media stream to an element.\n\t\t\t\tthis.mediaElement.src = this.getMediaStream(this.stream);\n\t\t\t\t//to.src = this.mediaElement.src;\n\t\t\t\tthis.mediaElement.play()\n\t\t\t\t//this.mediaElement = to;\n\t\t\t}\n\t\t}\n\t\tif (stage.browser.Gecko){\n\t\t\treturn function(to){\n\t\t\t\t// reattach a media stream to an element.\n\t\t\t\tto.mozSrcObject = this.mediaElement.mozSrcObject;\n\t\t\t\tto.play();\n\t\t\t\tthis.mediaElement = to;\n\t\t\t}\n\t\t}\n  \t}();*/\n\n\tvar mediaStream = class mediaStream  {\n\n\t\tconstructor(mediaElement, settings){\n\t\t\tthis.settings = stage.extend({},defaultSettingsStream, settings)\n\t\t\tthis.notificationsCenter = stage.notificationsCenter.create(this.settings, this);\n\t\t\tthis.urlStream = null;\n\t\t\tthis.stream = this.settings.stream ? this.setStream(this.settings.stream):null;\n\t\t\tthis.mediaElement = mediaElement ? mediaElement : null ;\n\t\t\tthis.getMediaStream = getMediaStream ;\n\t\t}\n\n\t\tgetUserMedia (settings, success, error){\n\n\t\t\tif (settings){\n\t\t\t\tthis.settings = stage.extend( {}, defaultSettingsStream, settings)\n\t\t\t\tthis.notificationsCenter.settingsToListen(settings);\n\t\t\t}\n\t\t\treturn navigator.getUserMedia({\n\t\t\t\t\tvideo:this.settings.video,\n\t\t\t\t\taudio:this.settings.audio\n\t\t\t\t},\n\t\t\t\t(stream) => {\n\t\t\t\t\tthis.setStream(stream);\n\t\t\t\t\tif (success)\n\t\t\t\t\t\tsuccess(this);\n\t\t\t\t\tthis.notificationsCenter.fire(\"onSucces\", stream, this);\n\t\t\t\t},\n\t\t\t\t(e) => {\n\t\t\t\t\tif (error){\n\t\t\t\t\t\terror(e);\n\t\t\t\t\t}\n\t\t\t\t\tthis.notificationsCenter.listen(this, \"onError\")\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tsetStream (stream){\n\t\t\tthis.stream = stream ;\n\t\t\tthis.urlStream = this.getMediaStream(stream);\n\t\t\tthis.videotracks = this.getVideoTracks();\n\t\t\tthis.audiotracks = this.getAudioTracks();\n\t\t\treturn stream ;\n\t\t}\n\n\t\tstop (){\n\t\t\tif (this.stream){\n\t\t\t\tthis.stream.stop();\n\t\t\t}\n\t\t}\n\n\t\tattachMediaStream (element){\n\t\t\tthis.mediaElement = element;\n\t\t\tthis.mediaElement.srcObject = this.stream ;\n\t\t\t//element.mozSrcObject = this.stream;\n\t\t\tthis.mediaElement.play(); \n  \t\t}\n\n\t\treattachMediaStream (stream){\n\t\t\tthis.stream = stream;\n\t\t\tthis.attachMediaStream(this.mediaElement);\n  \t\t}\n\t\t\t\n\t\tgetVideoTracks (){\n\t\t\treturn this.stream.getVideoTracks();\n\t\t}\n\n\t\tgetAudioTracks (){\n\t\t\treturn this.stream.getAudioTracks();\n\t\t}\n\n\t\t/*startRecording (stream){\n\t\t\tvar mediaStreamSource = this.audioContext.createMediaStreamSource(stream);\n\t\t\tconsole.log(mediaStreamSource);\n\t\t\tmediaStreamSource.connect(this.audioContext.destination);\n\t\t\tthis.recorder = new Recorder(mediaStreamSource);\n\t\t}\n\t\tstopRecording (){\n\t\t\tthis.recorder.stop();\n\t\t\tthis.recorder.exportWAV((stream) => {\n\t\t\t\tthis.recordSource = window.URL.createObjectURL(stream);\n\t\t\t});\n\t\t}*/\n\t};\n\n\n\n\t/*\n \t *\n \t *\tTRACK\n \t *\t\n \t *\n \t */\n\tvar trackSettings = {\n\t\tgain\t\t: true,\n\t\tpanner\t\t: true,\n\t\tfilter\t\t: false,\n\t\tanalyser\t: false,\n\t\tconnect\t\t: true,\n\t};\n\n\tvar Track = class Track {\n\n\t\tconstructor(media, bus, settings){\n\t\t\tthis.media = media ;\n\t\t\tthis.bus = bus ;\n\t\t\tthis.settings = stage.extend({}, trackSettings, settings);\n\t\t\tthis.audioNodes = {} ;\n\t\t\tthis.audioBus = {};\n\t\t\tthis.transport = null;\n\t\t\tthis.context = bus.audioContext ;\n\n\t\t\tthis.source = null;\n\t\t\tthis.buffer = null;\n\t\t\tthis.out = null ;\n\t\t\tthis.in = null ;\n\n\t\t\tthis.name = this.settings.name ;\n\t\t\tthis.id = this.generateId();\n\n\t\t\tthis.sync = 0;\n\t\t\tthis.retry = 0;\n\t\t\tthis.ready = false ;\n\t\t\tthis.muted = false ;\n\t\t\tthis.currentTime = 0 ;\n\t\t\tthis.eventsManager = stage.notificationsCenter.create(this.settings, this);\n\t\t\tthis.createNodes();\n\n\t\t\tif ( this.settings.connect ){\n\t\t\t\tthis.connect(this.bus.in);\n\t\t\t}\n\n\t\t\tthis.listen(this, \"onReady\" , function(){\n\t\t\t\tthis.bus.mixer.fire('onReadyTrack', this.bus, this);\n\t\t\t})\n\n\t\t\tvar type = stage.typeOf(media) ;\n\t\t\tswitch ( type ){\n\t\t\t\tcase \"object\" :\n\t\t\t\t\tswitch (true ){\n\t\t\t\t\t\tcase  media instanceof mediaStream :\n\t\t\t\t\t\t\tthis.mediaType = \"stream\" ;\n\t\t\t\t\t\t\tthis.buffer = media.stream;\n\t\t\t\t\t\t\tthis.url = stage.io.urlToOject(media.urlStream);\n\t\t\t\t\t\t\tthis.ready = true;\n\t\t\t\t\t\t\tthis.fire(\"onReady\", this);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase  media instanceof AudioNode :\n\t\t\t\t\t\t\tthis.mediaType = \"audioNode\" ;\n\t\t\t\t\t\t\tthis.buffer = media ;\n\t\t\t\t\t\t\tthis.ready = true;\n\t\t\t\t\t\t\tthis.fire(\"onReady\", this);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault :\n\t\t\t\t\t\t\tvar error = new Error (\"media type not allowed \") ;\n\t\t\t\t\t\t\tthis.fire(\"onError\",  error) ;\n\t\t\t\t\t\t\tthrow error ;\n\t\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\tcase \"element\":\n\t\t\t\t\tthis.mediaType = \"element\";\n\t\t\t\t\t/*this.media.onloadstart = () => {\n\t\t\t\t\t\tconsole.log(\"loadstart\");\n\t\t\t\t\t}\n\t\t\t\t\tthis.media.onloadeddata = () => {\n\t\t\t\t\t\tconsole.log(\"onloadeddata\");\n\t\t\t\t\t}*/\t\n\t\t\t\t\tthis.media.oncanplay= () => {\n\t\t\t\t\t\tthis.connectSource( this.media );\n\t\t\t\t\t\tthis.ready = true;\n\t\t\t\t\t\tthis.fire(\"onReady\", this);\n\t\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t\tcase \"string\" :\n\t\t\t\t\tthis.url = stage.io.urlToOject(media);\n\t\t\t\t\tthis.load(media);\n\t\t\t\tbreak;\n\t\t\t\tdefault :\n\t\t\t\t\tvar error = new Error (\"Track media type error\") ;\n\t\t\t\t\tthis.fire(\"onError\",  error) ;\n\t\t\t\t\tthrow error ;\n\t\t\t}\n\t\t}\n\n\t\tgenerateId (){\n\t\t\treturn parseInt(Math.random()*1000000000,10);\n\t\t}\n\n\t\tsetName (name){\n\t\t\tthis.name = name ;\n\t\t}\n\n\t\tlisten (){\n\t\t\treturn this.eventsManager.listen.apply(this.eventsManager, arguments);\n\t\t}\n\n\t\tunListen (){\n\t\t\treturn this.eventsManager.unListen.apply(this.eventsManager, arguments);\n\t\t}\n\n\t\tfire (){\n\t\t\treturn this.eventsManager.fire.apply(this.eventsManager, arguments);\n\t\t}\n\n\t\tcreateNodes (){\n\n\t\t\tthis.audioNodes[\"mute\"] = this.bus.createGain() ;\n\t\t\tthis.in = this.audioNodes[\"mute\"];\n\t\t\tthis.out = this.audioNodes[\"mute\"];\n\n\t\t\tif (this.settings.gain){\n\t\t\t\tthis.audioNodes[\"gain\"] = this.bus.createGain() ;\n\t\t\t\tthis.out.connect( this.audioNodes[\"gain\"] )\n\t\t\t\tthis.out = this.audioNodes[\"gain\"];\n\t\t\t}\n\t\t\tif (this.settings.filter){\n\t\t\t\tthis.audioNodes[\"filter\"]  = this.bus.createFilter();\n\t\t\t\tthis.out.connect(this.audioNodes[\"filter\"])\n\t\t\t\tthis.out = this.audioNodes[\"filter\"] ;\n\t\t\t}\n\n\t\t\tif (this.settings.panner){\n\t\t\t\tthis.audioNodes[\"panner\"]  = this.bus.createStereoPanner();\n\t\t\t\tthis.out.connect( this.audioNodes[\"panner\"] );\n\t\t\t\tthis.out = this.audioNodes[\"panner\"] ;\n\t\t\t}\n\t\t\tif (this.settings.analyser){\n\t\t\t\tthis.audioNodes[\"analyser\"] = this.bus.createAnalyser();\n\t\t\t\tthis.audioNodes[\"analyser\"].smoothingTimeConstant = 0.85;\n\t\t\t\tthis.out.connect( this.audioNodes[\"analyser\"] );\n\t\t\t}\n\t\t}\n\n\t\tsetGain (value) {\n\t\t\tthis.audioNodes.gain.gain.value = value ;\n\t\t\tthis.fire(\"onSetGain\", value);\n\t\t\treturn this;\n  \t\t}\n\n\t\tgetGain () {\n\t\t\treturn this.audioNodes.gain.gain.value  ;\n  \t\t}\n\n\t\tmute () {\n\t\t\tthis.audioNodes.mute.gain.value = 0;\n\t\t\tthis.muted = true;\n\t\t\tthis.fire(\"onMute\",this);\n\t\t\treturn this;\n  \t\t}\n\n\t\tunmute (){\n\t\t\tthis.audioNodes.mute.gain.value = 1;\n\t\t\tthis.muted = false;\n\t\t\tthis.fire(\"onUnMute\",this);\n\t\t\treturn this;\n  \t\t}\n\n\t\tpause (when) {\n\t\t\tswitch ( this.mediaType ){\n\t\t\t\tcase \"element\":\n\t\t\t\t\tthis.media.pause();\n\t\t\t\t\tthis.fire(\"onPause\",this);\n\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tif ( this.source ) {\n\t\t\t\t\t\tif (this.source.node && this.source.playbackState == this.source.node.PLAYING_STATE) {\n\t\t\t\t\t\t\tthis.source.node.stop( when || 0 );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.disconnectSource();\n\t\t\t\t\t\tthis.fire(\"onPause\",this);\n\t\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n  \t\t}\n\n\t\tplay ( time , loop) {\n\t\t\tswitch ( this.mediaType ){\n\t\t\t\tcase \"element\":\n\t\t\t\t\tthis.media.play();\n\t\t\t\t\tthis.fire(\"onPlay\",this)\n\t\t\t\tbreak;\n\t\t\t\tdefault: \n\t\t\t\t\tthis.pause().connectSource();\n\t  \t\t\t\tif ( loop )\n \t\t\t\t\t\tthis.source.loop = true;\n \t \t\t\t\tif ( this.source.noteOn )\n \t\t \t\t\t\tthis.source.noteOn(this.context.currentTime, time);\n \t \t\t\t\tif ( this.source.start )\n \t\t \t\t\t\tthis.source.start(this.context.currentTime, time)\n\t\t\t\t\t}\n\t\t\t\t\tthis.fire(\"onPlay\",this)\n\t\t\treturn this ;\n  \t\t}\n\n\t\tconnectSource (){\n\t\t\tthis.source = this.createSource();\n\t\t\tthis.source.connect( this.in );\n\t\t}\n\n\t\tdisconnectSource (){\n\t\t\tthis.source.disconnect( this.in );\n\t\t\tthis.source = null;\n\t\t\tthis.fire(\"onDisconnectSource\",this)\n\t\t}\n\n\t\tconnect (audioNode){\n\t\t\tthis.destination = audioNode ;\n\t\t\tthis.out.connect(audioNode);\n\t\t\tthis.fire(\"onConnect\", audioNode, this);\n\t\t}\n\n\t\tdisconnect (){\n\t\t\tthis.out.disconnect( this.destination );\n\t\t\tthis.destination = null ;\n\t\t\tthis.fire(\"onDisconnect\",  this);\n\t\t}\n\n\t\tcreateSource ( buffer ){\n\t\t\t//console.log(arguments);\n\t\t\tswitch ( this.mediaType ){\n\t\t\t\tcase \"audioNode\":\n\t\t\t\t\tvar source = buffer || this.buffer ;\n\t\t\t\tbreak;\n\t\t\t\tcase \"video\":\n\t\t\t\tcase \"audio\":\n\t\t\t\t\tvar source = this.context.createBufferSource();\n\t\t\t\t\tsource.buffer = buffer || this.buffer;\n\t\t\t\tbreak;\n\t\t\t\tcase \"decode\" :\n\t\t\t\t\tthis.rawBuffer = buffer ;\n\t\t\t\t\tthis.urlStream = URL.createObjectURL ( new Blob([this.rawBuffer]) )\n\t\t\t\t\tthis.context.decodeAudioData(buffer,\n\t\t\t\t\t\t(decoded) => {\n\t\t\t\t\t\t\tthis.buffer = decoded ;\n\t\t\t\t\t\t\tthis.ready = true;\n\t\t\t\t\t\t\tthis.fire(\"onReady\", this);\n\t\t\t\t\t\t},\n\t\t\t\t\t\t(error) => {\n\t\t\t\t\t\t\tconsole.log(arguments)\n\t\t\t\t\t\t\tthis.eventsManager.fire(\"onError\", this, error);\n\t\t\t\t\t\t\t// only on error attempt to sync on frame boundary\n\t\t\t\t\t\t\t//if(this.syncStream()) this.createSource(type, buffer);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\t\tcase \"stream\":\n\t\t\t\t\tvar source = this.context.createMediaStreamSource(buffer || this.buffer);\n\t\t\t\tbreak;\n\t\t\t\tcase \"element\":\n\t\t\t\t\tvar source = this.context.createMediaElementSource(this.media);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn source;\n\t\t}\n\n\t\tsyncStream (){\n\t\t\tvar buf8 = new Uint8Array(this.buffer);\n    \t\t\tUint8Array.prototype.indexOf = Array.prototype.indexOf;\n    \t\t\tvar i=this.sync, b=buf8;\n    \t\t\twhile(1) {\n        \t\t\tthis.retry++;nodeGain\n        \t\t\ti=b.indexOf(0xFF,i); if(i==-1 || (b[i+1] & 0xE0 == 0xE0 )) break;\n        \t\t\ti++;\n    \t\t\t}\n    \t\t\tif(i!=-1) {\n        \t\t\tvar tmp=this.buffer.slice(i); //carefull there it returns copy\n        \t\t\tdelete(this.buffer); this.buffer=null;\n        \t\t\tthis.buffer=tmp;\n        \t\t\tthis.sync=i;\n        \t\t\treturn true;\n    \t\t\t}\n    \t\t\treturn false;\n\t\t}\n\n\t\tload  (url) {\n\t\t\tthis.transport = new XMLHttpRequest();\n\t\t\tthis.transport.open(\"GET\", url, true);\n\t\t\tthis.transport.responseType = \"arraybuffer\";\n\t\t\tthis.transport.onload = () => {\n\t\t    \t// Asynchronously decode the audio file data in request.response\n\t\t\t\tthis.mediaType = \"decode\" ;\n\t\t\t\tthis.createSource( this.transport.response ) ;\n\t\t\t\tthis.contentType = this.transport.getResponseHeader(\"content-type\").split(\";\")[0];\n\t\t\t\tswitch(this.contentType){\n\t\t\t\t\tcase (/audio\\/.*/.test(this.contentType) ? this.contentType : null ) :\n\t\t\t\t\t\tthis.mediaType = \"audio\" ;\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase (/video\\/.*/.test(this.contentType) ? this.contentType : null ) :\n\t\t\t\t\t\tthis.mediaType = \"video\" ;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t  \t};\n\n\t\t\tthis.transport.onerror = () => {\n\t\t\t\tconsole.error('BufferLoader: XHR error');\n\t\t\t}\n\n\t\t\tthis.transport.send();\n\t\t}\n\t};\n\n\t/*\n\t *\n\t *\tCLASS AUDIOBUS\n\t *\n\t */\n\t var defaultAudioBusSettings = {\n\t\t panner: false,\n\t\t analyser:false\n\t };\n\n\t var audioBus = class audioBus  {\n\n\t\tconstructor(name, mixer, settings){\n\t\t\tthis.name = name ;\n\t\t\tthis.mixer = mixer ;\n\t\t\tthis.settings = stage.extend({}, defaultAudioBusSettings, settings);\n\t\t\tthis.eventsManager = stage.notificationsCenter.create(this.settings, this);\n\t\t\tthis.audioContext = new audioContext();\n\t\t\tthis.tracks = [];\n\t\t\tthis.nbTracks = 0 ;\n\t\t\tthis.audioNodes = {} ;\n\t\t\tthis.in = null ;\n\t\t\tthis.out = null ;\n\t\t\tthis.destination = null ;\n\t\t\tthis.muted = false;\n\t\t\tthis.createNodes();\n\t\t}\n\n\t\tlisten (){\n\t\t\treturn this.eventsManager.listen.apply(this.eventsManager, arguments);\n\t\t}\n\n\t\tunListen (){\n\t\t\treturn this.eventsManager.unListen.apply(this.eventsManager, arguments);\n\t\t}\n\n\t\tfire (){\n\t\t\treturn this.eventsManager.fire.apply(this.eventsManager, arguments);\n\t\t}\n\n\t\tcreateNodes (){\n\t\t\t// mute\n\t\t\tthis.audioNodes[\"mute\"] = this.createGain();\n\t\t\tthis.in = this.audioNodes[\"mute\"];\n\n\t\t\t// gain\n\t\t\tthis.audioNodes[\"gain\"] = this.createGain();\n\t\t\tthis.in.connect( this.audioNodes[\"gain\"] );\n\t\t\tthis.out = this.audioNodes[\"gain\"];\n\n\t\t\t// analyseur stéreo\n\t\t\tif ( this.settings.analyser ){\n\t\t\t\tthis.audioNodes[\"splitter\"]= this.createChannelSplitter(2);\n\t\t\t\tthis.out.connect( this.audioNodes[\"splitter\"] );\n\t\t\t\tthis.audioNodes[\"analyserLeft\"] = this.createAnalyser();\n\t\t\t\tthis.audioNodes[\"analyserLeft\"].smoothingTimeConstant = 0.85;\n\t\t\t\tthis.audioNodes[\"splitter\"].connect(this.audioNodes[\"analyserLeft\"], 0, 0);\n\n\t\t\t\tthis.audioNodes[\"analyserRight\"] = this.createAnalyser();\n\t\t\t\tthis.audioNodes[\"analyserRight\"].smoothingTimeConstant = 0.85;\n\t\t\t\tthis.audioNodes[\"splitter\"].connect(this.audioNodes[\"analyserRight\"], 1, 0);\n\t\t\t}\n\n\t\t\t// panoramique\n\t\t\tif ( this.settings.panner ){\n\t\t\t\tthis.audioNodes[\"panner\"]  = this.createStereoPanner();\n\t\t\t\tthis.out.connect( this.audioNodes[\"panner\"] );\n\t\t\t\tthis.out = this.audioNodes[\"panner\"] ;\n\t\t\t}\n\t\t}\n\n\t\tconnect(audioNode){\n\t\t\tthis.destination = audioNode ;\n\t\t\tthis.out.connect(audioNode);\n\t\t\tthis.fire(\"onConnect\", audioNode, this)\n\t\t}\n\n\t\tdisconnect (audioNode){\n\t\t\tif ( this.destination ){\n\t\t\t\tthis.out.disconnect(this.destination);\n\t\t\t\tthis.destination = null;\n\t\t\t\tthis.fire(\"onDisconnect\",  this);\n\t\t\t}\n\t\t}\n\n\t\tsetGain (value) {\n\t\t\tthis.audioNodes.gain.gain.value = value ;\n\t\t\tthis.fire(\"onSetGain\", value);\n\t\t\treturn this;\n  \t\t}\n\n\t\tgetGain () {\n\t\t\treturn this.audioNodes.gain.gain.value  ;\n  \t\t}\n\n\t\tmute () {\n\t\t\tthis.audioNodes.mute.gain.value = 0;\n\t\t\tthis.muted = true;\n\t\t\tthis.fire(\"onMute\",this);\n\t\t\treturn this;\n  \t\t}\n\n\t\tunmute (){\n\t\t\tthis.audioNodes.mute.gain.value = 1;\n\t\t\tthis.muted = false;\n\t\t\tthis.fire(\"onUnMute\",this);\n\t\t\treturn this;\n  \t\t}\n\n\t\tcreateGain (){\n\t\t\treturn this.audioContext.createGain();\n\t\t}\n\n\t\tcreatePanner (){\n\t\t\treturn this.audioContext.createPanner();\n\t\t}\n\n\t\tcreateStereoPanner (){\n\t\t\treturn this.audioContext.createStereoPanner();\n\t\t}\n\n\t\tcreateFilter (){\n\t\t\treturn this.audioContext.createBiquadFilter();\n\t\t}\n\n\t\tcreateAnalyser (){\n\t\t\treturn this.audioContext.createAnalyser();\n\t\t}\n\n\t\tcreateChannelSplitter (nbChannel){\n\t\t\treturn this.audioContext.createChannelSplitter(nbChannel);\n\t\t}\n\n\t\tcreateChannelMerger (nbChannel){\n\t\t\treturn this.audioContext.createChannelMerger(nbChannel);\n\t\t}\n\n\t\tcreateOscillator (){\n\t\t\treturn this.audioContext.createOscillator();\n\t\t}\n\n\t\tcreateMediaStreamDestination (){\n\t\t\tvar destination = this.audioContext.createMediaStreamDestination();\n\t\t\tthis.disconnect();\n\t\t\tthis.connect(destination);\n\t\t\treturn destination ;\n\t\t}\n\n\t\tcreateTrack (media, settings){\n\t\t\tvar track = new Track(media, this, settings );\n\t\t\tthis.tracks.push(track);\n\t\t\tthis.nbTracks++ ;\n\t\t\tthis.fire(\"onCreateTrack\", track , this) ;\n\t\t\treturn track ;\n\t\t}\n\t\t\n\t\tremoveTrack (track){\n\t\t\tvar ele = null ;\n\t\t\tswitch (true){\n\t\t\t\tcase track instanceof Track :\n\t\t\t\t\tfor (var i = 0 ; i < this.tracks.length ; i++){\n\t\t\t\t\t\tif ( this.tracks[i] === track ){\n\t\t\t\t\t\t\tvar name = track.name ;\n\t\t\t\t\t\t\ttrack.pause();\n\t\t\t\t\t\t\ttrack.disconnect();\n\t\t\t\t\t\t\t// remove from tab\n\t\t\t\t\t\t\tele = this.tracks.splice( i, 1 );\n\t\t\t\t\t\t\tthis.nbTracks--;\n\t\t\t\t\t\t\tthis.fire(\"onRemoveTrack\", ele[0] , this) ;\n\t\t\t\t\t\t\tdelete ele[0] ;\n\t\t\t\t\t\t\tbreak ;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\tbreak ;\t\n\t\t\t\tcase typeof track === \"number\" :\n\t\t\t\tcase typeof track === \"string\" :\n\t\t\t\t\tvar name = track ;\n\t\t\t\t\tfor (var i = 0 ; i < this.tracks.length ; i++){\n\t\t\t\t\t\tif ( this.tracks[i].name === name ){\n\t\t\t\t\t\t\tthis.tracks[i].pause();\n\t\t\t\t\t\t\tthis.tracks[i].disconnect();\n\t\t\t\t\t\t\t// remove from tab\n\t\t\t\t\t\t\tele = this.tracks.splice( i, 1 );\n\t\t\t\t\t\t\tthis.nbTracks--;\n\t\t\t\t\t\t\tthis.fire(\"onRemoveTrack\", ele[0] , this) ;\n\t\t\t\t\t\t\tdelete ele[0] ;\n\t\t\t\t\t\t\tbreak ;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( ! ele )\n\t\t\t\tthrow new Error (\"this track doesn't exist in  bus : \" + this.name)\n\t\t\treturn true ;\n\t\t}\n\t};\n\n\n\t/*\n\t *\n\t *\n\t *\tMEDIA MIX\n\t *\n\t *\n\t */\n\tvar mixSettings = {};\n\n\tvar mediaMix = class mediaMix  {\n\n\t\tconstructor(settings){\n\t\t\t\n\t\t\tthis.audioBus = {} ;\n\t\t\tthis.nbBus = 0 ;\n\t\t\tthis.settings = stage.extend({}, mixSettings, settings);\n\t\t\tthis.eventsManager = new stage.notificationsCenter.create(this.settings, this);\n\n\t \t\tthis.createAudioBus(\"MASTER\", {\n\t\t\t\tpanner:true,\n\t\t\t\tanalyser:true\n\t\t\t});\n\t\t\tthis.masterBus = this.audioBus[\"MASTER\"];\n\n\t\t\tthis.tracks = this.masterBus.tracks;\n\t\t\tthis.audioContext = this.masterBus.audioContext ;\n\t\t\tthis.muted = this.masterBus.muted;\n\t\t\tthis.panner = this.masterBus.audioNodes.panner ;\n\t\t\tthis.analyserLeft = this.masterBus.audioNodes[\"analyserLeft\"];\n\t\t\tthis.analyserRight = this.masterBus.audioNodes[\"analyserRight\"];\n\t\t\tthis.gain = this.masterBus.audioNodes[\"gain\"];\n\n\t\t\tthis.connect(this.audioContext.destination);\n\t\t}\n\n\t\tlisten (){\n\t\t\treturn this.eventsManager.listen.apply(this.eventsManager, arguments);\n\t\t}\n\n\t\tunListen (){\n\t\t\treturn this.eventsManager.unListen.apply(this.eventsManager, arguments);\n\t\t}\n\n\t\tfire (){\n\t\t\treturn this.eventsManager.fire.apply(this.eventsManager, arguments);\n\t\t}\n\n\t\tcreateAudioBus (name, settings){\n\t\t\ttry {\n\t\t\t\tvar bus = new audioBus(name, this , settings );\n\t\t\t}catch(e){\n\t\t\t\t\tthrow e ;\n\t\t\t}\n\t\t\tthis.audioBus[name] = bus ;\n\t\t\tthis.nbBus++ ;\n\t\t\tbus.listen(this, \"onCreateTrack\", function(track, bus){\n\t\t\t\tthis.fire(\"onCreateTrack\", track, bus, this)\n\t\t\t})\n\t\t\tbus.listen(this, \"onRemoveTrack\", function(track, bus){\n\t\t\t\tthis.fire(\"onRemoveTrack\", track, bus, this)\n\t\t\t})\n\t\t\treturn bus ;\n\t\t}\n\n\t\tremoveAudioBus (bus){\n\t\t\tvar ele = null ;\n\t\t\tswitch (true){\n\t\t\t\tcase bus instanceof audioBus :\n\t\t\t\t\t\n\t\t\t\tbreak ;\t\n\t\t\t\tcase typeof track === \"number\" :\n\t\t\t\tcase typeof track === \"string\" :\n\t\t\t\t\t\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( ! ele ){\n\t\t\t\tthrow new Error (\"remove bus : this bus doesn't exist in  mixer  \");\n\t\t\t}\n\t\t\treturn true ;\n\t\t}\n\n\t\tconnect (audioNode){\n\t\t\tthis.destination = audioNode ;\n\t\t\tvar ret = this.masterBus.connect(audioNode);\n\t\t\tthis.fire(\"onConnect\", audioNode, this)\n\t\t\treturn ret;\n\t\t}\n\n\t\tdisconnect (){\n\t\t\tthis.masterBus.disconnect();\n\t\t\tthis.destination = null ;\n\t\t\tthis.fire(\"onDisconnect\",  this);\n\t\t}\n\n\t\tsetGain (value) {\n\t\t\tthis.masterBus.setGain(value);\n\t\t\treturn this;\n  \t\t}\n\n\t\tgetGain () {\n\t\t\treturn this.masterBus.getGain();\n  \t\t}\n\n\t\tmute () {\n\t\t\tthis.masterBus.mute();\n\t\t\tthis.muted = this.masterBus.muted ;\n\t\t\treturn this;\n  \t\t}\n\n\t\tunmute (){\n\t\t\tthis.masterBus.unmute();\n\t\t\tthis.muted = this.masterBus.muted ;\n\t\t\treturn this;\n  \t\t}\n\n\t\tcreateTrack (media, settings){\n\t\t\treturn this.masterBus.createTrack(media, settings);\n\t\t}\n\n\t\tremoveTrack (track){\n\t\t\treturn this.masterBus.removeTrack(track)\n\t\t}\n\n\t\tplayTracks (time, loop){\n\t\t\tfor (var i = 0 ; i<this.tracks.length ; i++){\n\t\t\t\tthis.tracks[i].play( time, loop );\n\t\t\t}\n\t\t}\n\n\t\tcreateGain (){\n\t\t\treturn this.audioContext.createGain();\n\t\t}\n\n\t\tcreatePanner (){\n\t\t\treturn this.audioContext.createPanner();\n\t\t}\n\n\t\tcreateStereoPanner (){\n\t\t\treturn this.audioContext.createStereoPanner();\n\t\t}\n\n\t\tcreateFilter (){\n\t\t\treturn this.audioContext.createBiquadFilter();\n\t\t}\n\n\t\tcreateAnalyser (){\n\t\t\treturn this.audioContext.createAnalyser();\n\t\t}\n\n\t\tcreateChannelSplitter (nbChannel){\n\t\t\treturn this.audioContext.createChannelSplitter(nbChannel);\n\t\t}\n\n\t\tcreateChannelMerger(nbChannel){\n\t\t\treturn this.audioContext.createChannelMerger(nbChannel);\n\t\t}\n\n\t\tcreateOscillator(){\n\t\t\treturn this.audioContext.createOscillator();\n\t\t}\n\t};\n\n\tstage.media = {\n\t\tmediaStream\t\t: mediaStream,\n\t\twebAudioApi\t\t: webAudioApi,\n\t\tmediaMix\t\t: mediaMix,\n\t\tTrack\t\t\t: Track,\n\t\taudioBus\t\t: audioBus\n\n\t}\n\treturn stage.media ;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/media/media.es6","module.exports =  function(stage){\n\n\t'use strict';\n\n\n\t// FIXME CALLBACK SDP PARSER\n\tvar parseSdp = function(description){\n\t\tvar sdpLines = description.sdp.split('\\r\\n');\n\t\tvar newline = \"\";\n\t\t// Search for m line.\n\t\tfor (var i = 0; i < sdpLines.length; i++) {\n\t\t\tvar line = sdpLines[i];\n\t\t\tswitch (description.type ){\n\t\t\t\tcase \"offer\":\n\t\t\t\t\t/*if (line.search('a=crypto') !== -1) {\n\t\t\t\t\t\tconsole.log(\"PARSE SDP DELETE CRYPTO \");\n\t\t\t\t\t\tcontinue ;\n\t\t\t\t\t}*/\n\t\t\t\t\t/*if (line.search('a=setup:actpass') !== -1) {\n\t\t\t\t\t\tconsole.log(\"PARSE SDP REPLACE setup :  actpass by active  \");\n\t\t\t\t\t\tline = line.replace(\"a=setup:actpass\", \"a=setup:active\")\n\t\t\t\t\t}*/\n\t\t\t\tbreak;\n\t\t\t\tcase \"answer\":\n\t\t\t\t\t/*if (line.search('a=crypto') !== -1) {\n\t\t\t\t\t\tconsole.log(\"PARSE SDP DELETE CRYPTO \");\n\t\t\t\t\t\tcontinue ;\n\t\t\t\t\t}*/\n\t\t\t\t\t/*if (line.search('a=setup:actpass') !== -1) {\n\t\t\t\t\t\tconsole.log(\"PARSE SDP REPLACE setup :  actpass by active  \");\n\t\t\t\t\t\tline = line.replace(\"a=setup:actpass\", \"a=setup:active\")\n\t\t\t\t\t}*/\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( i === sdpLines.length-1 ){\n\t\t\t\tnewline+=line;\n\t\t\t}else{\n\t\t\t\tnewline+=line+\"\\r\\n\";\n\t\t\t}\n\t\t}\n\t\tdescription.sdp = newline ;\n\t\treturn description;\n\t};\n\n\n\t/*\n \t *\n \t *\tCLASS USER\n \t *\n \t */\n\tvar userSettings = {\n\t\tconstraints\t: { mandatory: { 'OfferToReceiveAudio': true, 'OfferToReceiveVideo': true } },\n\t\t//constraintsOffer: stage.browser.Gecko ? {'mandatory': {'MozDontOfferDataChannel':true}} : null\n\t\tdisplayName\t: \"\"\n\t};\n\n\tvar User = class User  {\n\n\t\tconstructor(userName, settings){\n\t\t\tthis.name = userName ;\n\n\t\t\tthis.settings = stage.extend({}, userSettings, settings );\n\n\t\t\tthis.displayName = this.settings.displayName || userName ;\n\n\t\t\tthis.audio = this.settings.constraints.mandatory.OfferToReceiveAudio ;\n\t\t\tthis.video = this.settings.constraints.mandatory.OfferToReceiveVideo ;\n\t\t\tthis.mediaStream = null ;\n\t\t\tthis.description = \"\" ;\n\n\t\t}\n\n\t\tcreateMediaStream (succesCallback, errorMedia){\n\t\t\tthis.mediaStream = new stage.media.mediaStream(null, {\n\t\t\t\taudio: this.audio,\n\t\t\t\tvideo:this.video,\n\t\t\t\tonSucces:succesCallback,\n\t\t\t\tonError:errorMedia\n\t\t\t});\n\t\t\treturn this.mediaStream ;\n\t\t}\n\n\t\tsetDescription (desc){\n\t\t\tthis.description = desc ;\n\t\t}\n\t};\n\n\t/*\n \t *\n \t *\tCLASS TRANSACTION WEBRTC\n \t *\n \t */\n\tvar Transaction = class Transaction  {\n\t\tconstructor(webrtc, from, to, dialog, settings){\n\t\t\tthis.webrtc = webrtc ;\n\t\t\tthis.notificationsCenter = stage.notificationsCenter.create(settings || {}, this);\n\t\t\tthis.dialog = dialog || null ;\n\t\t\tthis.error = null ;\n\t\t\tif ( this.dialog ){\n\t\t\t\tthis.callId = this.dialog.callId;\n\t\t\t}\n\t\t\tthis.protocol =  webrtc.protocol;\n\t\t\tthis.from = from ;\n\t\t\ttry {\n\t\t\t\tif (to instanceof User ){\n\t\t\t\t\tthis.to = to;\n\t\t\t\t}else{\n\t\t\t\t\tthis.to = new User(to, settings) ;\n\t\t\t\t}\n\t\t\t}catch(e){\n\t\t\t\tthrow e ;\n\t\t\t}\n\t\t\tthis.asyncCandidates = this.webrtc.settings.asyncCandidates ;\n\n\t\t\tconsole.log(\"CREATE TRANSATION WEBRTC\");\n\t\t\tthis.RTCPeerConnection = this.createPeerConnection() ;\n\t\t\tthis.RTCPeerConnection.addStream(this.from.stream)\n\n\t\t\t// MANAGE DTMF\n\t\t\tthis.dtmfSender= null ;\n\t\t\tif ( this.webrtc.settings.dtmf ){\n\t\t\t\ttry {\n\t\t\t\t\tthis.initDtmfSender( this.from.stream );\n\t\t\t\t\tthis.webrtc.listen(this, \"onKeyPress\", this.sendDtmf ) ;\n\t\t\t\t\t// FIXME TRY TO RECEIVE DTMF RTP-EVENT\n\t\t\t\t\t/*this.webrtc.listen(this, \"onRemoteStream\",function(event, mediaStream, transaction){\n\t\t\t\t\t\tconsole.log( \"DTMF setRemoteStream\")\n\t\t\t\t\t\tthis.initDtmfReceiver( this.from.stream );\n\t\t\t\t\t});*/\n\t\t\t\t}catch(e){\n\t\t\t\t\tconsole.log(e) ;\n\t\t\t\t\tthrow e ;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// MANAGE CANDIDATES\n\t\t\tthis.candidates = [];\n\t\t\tthis.listen(this, \"onIcecandidate\" , function(transaction, candidates, peerConnection){\n\t\t\t\t//console.log(\" onIcecandidate : \" + peerConnection.localDescription.type )\n\t\t\t\tif ( this.asyncCandidates && this.candidates.length){\n\t\t\t\t\t//console.log( message.dailog)\n\t\t\t\t\tvar to = this.dialog.to.replace(\"<sip:\", \"\").replace(\">\",\"\") ;\n\t\t\t\t\tconsole.log(\"CANDIDATE TO\" + to)\n\t\t\t\t\tconsole.log(\"CANDIDATE TO\" + this.to.name)\n\t\t\t\t\tthis.dialog.invite(to, JSON.stringify(this.candidates), \"ice/candidate\")\n\t\t\t\t}else{\n\t\t\t\t\tif ( peerConnection.localDescription.type == \"offer\" ){\n\t\t\t\t\t\tthis.sessionDescription = parseSdp.call(this, peerConnection.localDescription ) ;\n\t\t\t\t\t\tif ( this.dialog ){\n\t\t\t\t\t\t\tvar to = this.dialog.to.replace(\"<sip:\", \"\").replace(\">\",\"\") ;\n\t\t\t\t\t\t\tconsole.log(\"CANDIDATE TO\" + to)\n\t\t\t\t\t\t\tconsole.log(\"CANDIDATE TO\" + this.to.name)\n\t\t\t\t\t\t\tthis.dialog.invite(to, this.sessionDescription);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.dialog = this.webrtc.protocol.invite(this.to.name, this.sessionDescription);\n\t\t\t\t\t\t\tthis.callId = this.dialog.callId ;\n\t\t\t\t\t\t\tthis.webrtc.fire(\"onInvite\", this, this.to, this.sessionDescription );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (peerConnection.localDescription.type == \"answer\" ){\n\t\t\t\t\t\tthis.sessionDescription = peerConnection.localDescription ;\n\t\t\t\t\t\tif ( this.sessionDescription && ! ( this.error ) )\n\t\t\t\t\t\tthis.fire(\"onCreateAnwser\", this.to, this.sessionDescription, this, this.dialog);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tthis.listen(this, \"onCreateAnwser\", function(to, sessionDescription, webrtcTransaction, diag){\n\t\t\t\tvar response = this.dialog.currentTransaction.createResponse( 200, \"OK\", this.sessionDescription.sdp, \"application/sdp\"  );\n\t\t\t\tresponse.send();\n\t\t\t});\n\t\t}\n\n\n\t\tlisten (){\n\t\t\treturn this.notificationsCenter.listen.apply(this.notificationsCenter, arguments);\n\t\t}\n\n\t\tunListen (){\n\t\t\treturn this.notificationsCenter.unListen.apply(this.notificationsCenter, arguments);\n\t\t}\n\n\t\tfire (){\n\t\t\treturn this.notificationsCenter.fire.apply(this.notificationsCenter, arguments);\n\t\t}\n\n\t\tcreatePeerConnection (){\n\t\t\ttry {\n\t\t\t\t// CREATE PeerConnection\n\t\t\t\tthis.RTCPeerConnection = new RTCPeerConnection( this.webrtc.iceServers , this.webrtc.settings.optional );\n\n\t\t\t\t// MANAGE EVENT CANDIDATES\n\t\t\t\tthis.RTCPeerConnection.onicecandidate =  (event)  => {\n\t\t\t\t\t// FIX firefox fire many time onicecandidate  iceGatheringState === complete\n\t\t\t\t\tvar old = this.iceGatheringState ;\n\t\t\t\t\tif ( event.target ){\n\t\t\t\t\t\tthis.iceGatheringState = event.target.iceGatheringState || this.RTCPeerConnection.iceGatheringState ;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.iceGatheringState = this.RTCPeerConnection.iceGatheringState ;\n\t\t\t\t\t}\n\t\t\t\t\tvar type = this.RTCPeerConnection.localDescription.type ;\n\t\t\t\t\t//console.log( this.iceGatheringState )\n\t\t\t\t\t//console.log( type )\n\t\t\t\t\tif (type === \"offer\"  && this.iceGatheringState === 'complete'  && old !== \"complete\")  {\n\t\t\t\t\t\t//console.log(\"PASSS CANDIDATE\")\n\t\t\t\t\t\tthis.fire(\"onIcecandidate\", this, this.candidates ,this.RTCPeerConnection );\n    \t\t\t\t\t} else if (event && event.candidate == null) {\n\t\t\t\t\t\t// candidates null !!!\n    \t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.info(\"WEBRTC : ADD CANDIDATE\");\n\t\t\t\t\t\tif (event.candidate){\n\t\t\t\t\t\t\tthis.candidates.push(event.candidate);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (type === \"answer\"){\n\t\t\t\t\t\t\tthis.fire(\"onIcecandidate\", this, this.candidates ,this.RTCPeerConnection );\n\t\t\t\t\t\t\tthis.RTCPeerConnection.onicecandidate = null ;\n\t\t\t\t\t\t}\n    \t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t// MANAGE STREAM\n\t\t\t\tthis.RTCPeerConnection.onaddstream = (event) => {\n\t\t\t\t\t//console.log(event)\n\t\t\t\t\tthis.setRemoteStream( event)\n\t\t\t\t\tconsole.log(\"WEBRTC : ADD STREAM \")\n\t\t\t\t};\n\t\t\t\treturn this.RTCPeerConnection;\n\t\t\t}catch (e){\n\t\t\t\t//console.log(e)\n\t\t\t\tthis.webrtc.fire(\"onError\", this, e);\n\t\t\t}\n\t\t}\n\n\t\t// FIXME TRY TO RECEIVE DTMF RTP-EVENT\n\t\t/*initDtmfReceiver (mediaStream){\n\t\t\tconsole.log(this.RTCPeerConnection)\n\t\t\tif ( ! this.RTCPeerConnection.createDTMFSender ) {\n\t\t\t\tthrow new Error(\" RTCPeerConnection method createDTMFSender() !!!! which is not support by this browser\");\n\t\t\t}\n  \t\t\tif (mediaStream !== null) {\n\t\t\t\ttry {\n\t\t\t\t\tvar remoteAudioTrack = mediaStream.getAudioTracks()[0];\n\t\t\t\t\tvar dtmfSender = this.RTCPeerConnection.createDTMFSender(remoteAudioTrack);\n\t\t\t\t\tdtmfSender.ontonechange = (tone) => {\n\t\t\t\t\t\tconsole.log(\"dtmfOnToneChange\")\n\t\t\t\t\t\tthis.webrtc.fire(\"dtmfOnToneChange\", tone , this);\n\t\t\t\t\t};\n\t\t\t\t}catch(e){\n\t\t\t\t\tthrow e ;\n\t\t\t\t}\n\n  \t\t\t} else {\n\t\t\t\tthrow new Error( 'No local stream to create DTMF Sender', 500)\n  \t\t\t}\n\t\t}*/\n\n\t\tinitDtmfSender (mediaStream) {\n\n\t\t\tswitch ( this.webrtc.settings.dtmf ){\n\t\t\t\tcase \"SIP-INFO\" :\n\t\t\t\t\tvar func = function(){} ;\n\t\t\t\t\tfunc.prototype.insertDTMF = (key, duration, gap) =>{\n\t\t\t\t\t\tvar description = \"Signal=\"+key+\"\\nDuration=\"+duration ;\n\t\t\t\t\t\tvar type= \"application/dtmf-relay\";\n\t\t\t\t\t\tthis.dialog.info( description, type)\n\t\t\t\t\t};\n\t\t\t\t\tthis.dtmfSender = new func() ;\n\t\t\t\tbreak;\n\t\t\t\tcase \"RTP-EVENT\" :\n\t\t\t\t\tif ( ! this.RTCPeerConnection.createDTMFSender ) {\n\t\t\t\t\t\tthrow new Error(\" RTCPeerConnection method createDTMFSender() !!!! which is not support by this browser\", 500);\n\t\t\t\t\t}\n  \t\t\t\t\tif (mediaStream !== null) {\n    \t\t\t\t\t\tvar localAudioTrack = mediaStream.getAudioTracks()[0];\n\t\t\t\t\t\tthis.dtmfSender = this.RTCPeerConnection.createDTMFSender(localAudioTrack);\n\t\t\t\t\t\tthis.dtmfSender.ontonechange = (tone) => {\n\t\t\t\t\t\t\tthis.webrtc.fire(\"dtmfOnToneChange\", tone , this);\n\t\t\t\t\t\t};\n\n  \t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error( 'No local stream to create DTMF Sender', 500)\n  \t\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tsendDtmf (code, key, event) {\n\t\t\tif ( this.dialog.status !== this.dialog.statusCode.ESTABLISHED ) {\n\t\t\t\treturn ;\n\t\t\t}\n\t\t\tif (this.dtmfSender) {\n\t\t\t\tvar duration = 500;\n\t\t\t\tvar gap = 50;\n\t\t\t\tconsole.log('DTMF SEND, duration, gap: ', key, duration, gap);\n\t\t\t\treturn this.dtmfSender.insertDTMF(key, duration, gap);\n\t\t\t}\n\t\t\tthrow new Error(\" DTMF SENDER not ready\");\n\t\t}\n\n\t\tcreateOffer (){\n\t\t\treturn  this.RTCPeerConnection.createOffer((sessionDescription) => {\n\t\t\t\tthis.sessionDescription = parseSdp.call(this, sessionDescription);\n\t\t\t\ttry{\n\t\t\t\t\tthis.from.setDescription(this.RTCPeerConnection.setLocalDescription(this.sessionDescription, () => {\n\t\t\t\t\t\t// ASYNC CANDIDATES\n\t\t\t\t\t\tif (  this.asyncCandidates ){\n\t\t\t\t\t\t\t// INVITE\n\t\t\t\t\t\t\tthis.dialog = this.webrtc.protocol.invite(this.to.name, this.sessionDescription);\n\t\t\t\t\t\t\tthis.callId = this.dialog.callId ;\n\t\t\t\t\t\t\tthis.webrtc.fire(\"onInvite\", this, this.to, this.sessionDescription );\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t// SYNC CANDIDATES\n\t\t\t\t\t\t\t/*this.webrtc.listen(this, \"onIcecandidate\" , function(transaction, candidates, peerConnection){\n\t\t\t\t\t\t\t\tif ( peerConnection.localDescription.type == \"offer\" ){\n\t\t\t\t\t\t\t\t\tthis.sessionDescription = parseSdp.call(this, peerConnection.localDescription ) ;\n\t\t\t\t\t\t\t\t\tif ( this.dialog ){\n\t\t\t\t\t\t\t\t\t\tvar to = this.dialog.to.replace(\"<sip:\", \"\").replace(\">\",\"\") ;\n\t\t\t\t\t\t\t\t\t\tthis.dialog.invite(to, this.sessionDescription);\n\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\tthis.dialog = this.webrtc.protocol.invite(this.to.name, this.sessionDescription);\n\t\t\t\t\t\t\t\t\t\tthis.webrtc.fire(\"onInvite\", this, this.to.name, this.sessionDescription );\n\t\t\t\t\t\t\t\t\t\tthis.callId = this.dialog.callId ;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})*/\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t(error) => {\n\t\t\t\t\t\tthis.error = error ;\n\t\t\t\t\t\tthis.webrtc.fire(\"onError\", this , error) ;\n\t\t\t\t\t}));\n\t\t\t\t}catch(e){\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t},\n \t\t\t(error) => {\n\t\t\t\tthis.webrtc.fire(\"onError\", this , error) ;\n\t\t\t},\n\t\t\tthis.from.settings.constraintsOffer);\n\t\t}\n\n\t\tsetRemoteStream (event){\n\t\t\tif (event){\n\t\t\t\t//console.log(event.stream.getVideoTracks());\n\t\t\t\tthis.to.createMediaStream(null, null);\n\t\t\t\tthis.to.mediaStream.setStream(event.stream);\n\t\t\t\tvar type = this.RTCPeerConnection.remoteDescription.type ;\n\t\t\t\tif (event.type === \"video\" || event.type === \"addstream\" ){\n\t\t\t\t\tthis.webrtc.notificationsCenter.fire( \"onRemoteStream\", type, event, this.to.mediaStream, this);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this.to.createMediaStream ;\n\t\t}\n\n\t\tsetRemoteDescription (type, user, description, dialog){\n\t\t\t//console.log(\"setRemoteDescription\")\n\t\t\tthis.currentTransaction = dialog.currentTransaction ;\n\t\t\tvar desc = {\n\t\t\t\ttype:type,\n\t\t\t\tsdp:description\n\t\t\t}\n\t\t\t//console.log( desc );\n\t\t\tvar remoteDesc = parseSdp.call(this, desc);\n\t\t\tvar ClassDesc = new RTCSessionDescription( remoteDesc );\n\n\t\t\tthis.remoteDescription = this.RTCPeerConnection.setRemoteDescription(\n\t\t\t\tClassDesc,\n\t\t\t\t() => {\n\t\t\t\t\tif (this.RTCPeerConnection.remoteDescription.type == \"offer\"){\n\t\t\t\t\t\t//console.log(\"WEBRTC : onRemoteDescription \");\n\t\t\t\t\t\t//this.doAnswer(dialog);\n\t\t\t\t\t\tthis.webrtc.fire(\"onOffer\", this.webrtc, this);\n\t\t\t\t\t\tthis.webrtc.fire(\"onRemoteDescription\", this.from, this, this.to);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.webrtc.fire( \"onOffHook\", this , dialog );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t(error) => {\n\t\t\t\t\tthis.error = error ;\n\t\t\t\t\tthis.webrtc.fire( \"onError\", this, error )\n\t\t\t\t}\n\t\t\t);\n\t\t\treturn this.remoteDescription;\n\t\t}\n\n\t\tdoAnswer (dialog) {\n\t\t\treturn this.RTCPeerConnection.createAnswer(\n\t\t\t\t(sessionDescription) => {\n\t\t\t\t\tthis.from.setDescription(sessionDescription) ;\n\t\t\t\t\tthis.RTCPeerConnection.setLocalDescription(sessionDescription, () => {\n\t\t\t\t\t\tthis.sessionDescription = sessionDescription ;\n\t\t\t\t\t\tif ( this.asyncCandidates ){\n\t\t\t\t\t\t\tthis.fire(\"onCreateAnwser\", this.to, this.sessionDescription, this, dialog);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.webrtc.fire( \"onOffHook\",this , dialog );\n\t\t\t\t\t},\n\t\t\t\t\t(error) => {\n\t\t\t\t\t\tthis.error = error ;\n\t\t\t\t\t\tthis.webrtc.fire( \"onError\", this , error);\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\t// error\n\t\t\t\t(e) => {\n\t\t\t\t\tthis.error = e ;\n\t\t\t\t\tthis.webrtc.fire( \"onError\", this ,e);\n\t\t\t\t},\n\t\t\t\tthis.from.settings.constraints\n\t\t\t);\n\t\t}\n\n\t\tbye (){\n\t\t\tif ( this.dialog  ){\n\t\t\t\tthis.dialog.bye();\n\t\t\t}\n\t\t}\n\n\t\tcancel (){\n\t\t\tif ( this.currentTransaction ){\n\t\t\t\tthis.currentTransaction.cancel();\n\t\t\t}\n\t\t\tthis.webrtc.closeTransaction(this, this.to.name)\n\t\t}\n\n\t\tdecline (){\n\t\t\tif ( this.currentTransaction ){\n\t\t\t\tthis.currentTransaction.decline();\n\t\t\t}\n\t\t\tthis.webrtc.closeTransaction(this, this.to.name);\n\t\t}\n\n\t\tclose (){\n\t\t\tconsole.log(\"WEBRTC CLOSE TRANSACTION  : \"+ this.callId )\n\t\t\tthis.RTCPeerConnection.close();\n\t\t\tthis.webrtc.unListen( \"onKeyPress\", this.sendDtmf ) ;\n\t\t\tdelete this.RTCPeerConnection ;\n\t\t\treturn this ;\n\t\t}\n\t};\n\t\n\t/*\n \t *\n \t *\tCLASS WEBRTC\n \t *\n \t */\n\tvar defaultSettings = {\n\t\taudio\t\t: true,\n\t\tvideo\t\t: true,\n\t\tprotocol\t: \"SIP\",\n\t\tsipPort\t\t: 5060,\n\t\tsipTransport\t: \"WSS\",\n\t\tdtmf\t\t: \"SIP-INFO\",\t// \"SIP-INFO\", \"RTP-EVENT\"\n\t\t/*\n \t\t * STUN  => { iceServers: [{ url: ! stage.browser.Gecko ? 'stun:stun.l.google.com:19302' : 'stun:23.21.150.121'}] }\n \t\t * TURN  => { iceServers: [{ url: \"turn:webrtc%40live.com@numb.viagenie.ca\", credential: \"\"}] }\n\t\t */ \t\t\n\t\ticeServers\t: null,\t \n\t\t//constraints\t: { mandatory: { 'OfferToReceiveAudio': true, 'OfferToReceiveVideo': true } },\n\t\t//constraintsOffer: stage.browser.Gecko ? {'mandatory': {'MozDontOfferDataChannel':true}} : null,\n\t\t//optional\t: { optional: [{ \"RtpDataChannels\": true},{'DtlsSrtpKeyAgreement': 'true'}]}\n\t\t//optional\t: stage.browser.Gecko ? { optional: [{ \"RtpDataChannels\": true}]} :  { optional: [{ \"RtpDataChannels\": true},{'DtlsSrtpKeyAgreement': 'true'}]},\n\t\toptional\t: stage.browser.Gecko ? { optional: []} :  { optional: [{'DtlsSrtpKeyAgreement': 'true'}]},\n\t\tasyncCandidates : false\n\t};\n\n\n\tvar WebRtc = class WebRtc  {\n\n\t\tconstructor(server, transport, settings){\n\t\t\tthis.settings = stage.extend(true, {}, defaultSettings, settings);\n\t\t\tthis.notificationsCenter = stage.notificationsCenter.create(this.settings, this);\n\t\t\t//this.syslog = new stage.syslog(syslogSettings);\n\t\t\tthis.protocol = null;\n\t\t\tthis.socketState = \"close\" ;\n\t\t\tthis.transactions = {};\n\t\t\t//this.users = {};\n\t\t\tthis.transport = this.connect( transport ) ;\n\t\t\tif ( this.transport && this.transport.publicAddress ){\n\t\t\t\tthis.publicAddress = this.transport.publicAddress;\n\t\t\t\t//this.publicAddress = server;\n\t\t\t\t//this.publicAddress = this.transport.domain;\n\t\t\t}\n\t\t\tthis.server = server ;\n\t\t\tthis.init();\n\t\t}\n\n\t\tinit (){\n\t\t\tdelete this.protocol ;\n\t\t\tthis.protocol = null ;\n\n\t\t\t// EVENTS WEBRTC\n\t\t\tthis.listen(this, \"onInvite\", function(transaction , userTo, description){\n\t\t\t\tthis.transactions[transaction.callId] = transaction ;\n\t\t\t});\n\n\t\t\t/*this.listen(this, \"onOffer\", function(message , userTo, transaction){\n\t\t\t\tthis.transactions[transaction.callId] = transaction ;\n\t\t\t});*/\n\n\t\t\tthis.listen(this, \"onOffer\", function(webrtc, transaction){\n\t\t\t\tthis.transactions[transaction.callId] = transaction ;\n\t\t\t});\n\n\t\t\tthis.listen(this, \"onAccept\", function(webrtc, transac){\n\t\t\t\ttransac.doAnswer(transac.dialog);\n\t\t\t\t//transac.setRemoteDescription(\"offer\", transac.to, transac.to.description, transac.dialog);\n\t\t\t});\n\n\t\t\tthis.listen(this, \"onDeclineOffer\", function(webrtc, transac){\n\n\t\t\t\tvar ret = transac.dialog.currentTransaction.createResponse(\n\t\t\t\t\t603,\n\t\t\t\t\t\"Declined\"\n\t\t\t\t);\n\t\t\t\tret.send();\n\n\t\t\t\t/*var ret = message.transaction.createResponse(\n\t\t\t\t\t603,\n\t\t\t\t\t\"Declined\"\n\t\t\t\t);\n\t\t\t\tret.send();*/\n\t\t\t\tthis.closeTransaction(transac);\n\t\t\t});\n\n\t\t\t// MANAGE PROTOCOL\n\t\t\tswitch (this.settings.protocol){\n\t\t\t\tcase \"SIP\":\n\t\t\t\t\tthis.protocol = new stage.io.protocols.sip(this.server, this.transport,{\n\t\t\t\t\t\tportServer\t: this.settings.sipPort ,\n\t\t\t\t\t\ttransport\t: this.settings.sipTransport,\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.protocol.listen(this, \"onRegister\", function(sip, message){\n\t\t\t\t\t\tswitch (message.code){\n\t\t\t\t\t\t\tcase 200 :\n\t\t\t\t\t\t\t\tthis.user.createMediaStream((stream) => {\n\t\t\t\t\t\t\t\t\tthis.user.stream = stream ;\n\t\t\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onMediaSucces\", this.user.mediaStream, this.user);\n\t\t\t\t\t\t\t\t},(e) => {\n\t\t\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onError\", this, e);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onRegister\", this.user, this);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault :\n\t\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onError\", this.protocol, message);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.protocol.listen(this, \"onUnRegister\",function(sip, message){\n\t\t\t\t\t\tthis.fire(\"onUnRegister\", sip, message);\n\t\t\t\t\t})\n\n\t\t\t\t\tthis.protocol.listen(this,\"onRinging\",function(sip, message){\n\t\t\t\t\t\tvar transaction = this.transactions[message.callId];\n\t\t\t\t\t\tif ( transaction ){\n\t\t\t\t\t\t\tthis.notificationsCenter.fire( \"onRinging\", message.toName , transaction);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.protocol.listen(this,\"onTrying\",function(sip, message){\n\t\t\t\t\t\tvar transaction = this.transactions[message.callId];\n\t\t\t\t\t\tif ( transaction ){\n\t\t\t\t\t\t\tthis.notificationsCenter.fire( \"onTrying\", message.toName , transaction);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.protocol.listen(this,\"onInfo\",function(message){\n\t\t\t\t\t\tvar transaction = this.transactions[message.callId];\n\t\t\t\t\t\t//console.log(message);\n\t\t\t\t\t\tif (message.contentType === \"application/dtmf-relay\" ){\n\t\t\t\t\t\t\tthis.fire( \"onDtmf\", message.body.dtmf , transaction);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.protocol.listen(this,\"onCancel\",function(message){\n\t\t\t\t\t\tvar transaction = this.transactions[message.callId];\n\t\t\t\t\t\tif (transaction){\n\t\t\t\t\t\t\tthis.notificationsCenter.fire( \"onCancel\", message.body.body , transaction );\n\t\t\t\t\t\t\tthis.closeTransaction(transaction, message.fromName);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.protocol.listen(this, \"onInvite\", function(message, dialog){\n\t\t\t\t\t\tswitch(message.header[\"Content-Type\"]){\n\t\t\t\t\t\t\tcase \"application/sdp\" :\n\t\t\t\t\t\t\t\tif ( message.rawBody ){\n\n\t\t\t\t\t\t\t\t\tif ( dialog.status === dialog.statusCode.INITIAL){\n\n\t\t\t\t\t\t\t\t\t\t// TODO MANAGE MULTI CALL\n\n\t\t\t\t\t\t\t\t\t\tvar res = message.transaction.createResponse(100, \"trying\");\n\t\t\t\t\t\t\t\t\t\tres.send();\n\n\t\t\t\t\t\t\t\t\t\t// transaction WEBRTC\n\t\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\tvar transac = this.createTransaction(message.fromName, dialog , {\n\t\t\t\t\t\t\t\t\t\t\t\tdisplayName: message.fromNameDisplay || \"\"\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\ttransac.to.setDescription( message.rawBody );\n\t\t\t\t\t\t\t\t\t\t}catch(e){\n\t\t\t\t\t\t\t\t\t\t\tvar res = message.transaction.createResponse(500, e.message || e);\n\t\t\t\t\t\t\t\t\t\t\tres.send();\n\t\t\t\t\t\t\t\t\t\t\treturn ;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tvar res = message.transaction.createResponse(180, \"Ringing\");\n\t\t\t\t\t\t\t\t\t\tres.send();\n\n\t\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\ttransac.setRemoteDescription(\"offer\", transac.to, transac.to.description, transac.dialog);\n\t\t\t\t\t\t\t\t\t\t\t//this.notificationsCenter.fire(\"onOffer\", message, transac.to, transac);\n\t\t\t\t\t\t\t\t\t\t\t//this.fire(\"onOffer\", this, transac);\n\t\t\t\t\t\t\t\t\t\t}catch(e){\n\t\t\t\t\t\t\t\t\t\t\tvar res = message.transaction.createResponse(500, e.message || e);\n\t\t\t\t\t\t\t\t\t\t\tres.send();\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\treturn ;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif ( dialog.status === dialog.statusCode.ESTABLISHED){\n\t\t\t\t\t\t\t\t\t\t// HOLD THE LINE\n\t\t\t\t\t\t\t\t\t\tmessage.transaction.decline();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"ice/candidate\" :\n\t\t\t\t\t\t\t\tif ( message.rawBody ){\n\t\t\t\t\t\t\t\t\tvar transaction = this.transactions[message.callId];\n\t\t\t\t\t\t\t\t\tif ( ! transaction ) {\n\t\t\t\t\t\t\t\t\t\tvar ret = message.transaction.createResponse(500, \"no transaction \");\n\t\t\t\t\t\t\t\t\t\tret.send();\n\t\t\t\t\t\t\t\t\t\treturn ;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tvar res = JSON.parse(message.rawBody) ;\n\t\t\t\t\t\t\t\t\tvar ret = message.transaction.createResponse(100, \"trying\");\n\t\t\t\t\t\t\t\t\tret.send();\n\t\t\t\t\t\t\t\t\tfor (let i=0 ; i<res.length;i++){\n\t\t\t\t\t\t\t\t\t\tvar candidate = new RTCIceCandidate(res[i]);\n\t\t\t\t\t\t\t\t\t\ttransaction.RTCPeerConnection.addIceCandidate(candidate,\n\t\t\t\t\t\t\t\t\t\t\t() =>{\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"WEBRTC remote CANDIDATES   \" +res[i].candidate );\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(e);\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"WEBRTC Error CANDIDATES \" +res[i].candidate );\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif ( transaction.candidates.length ){\n\t\t\t\t\t\t\t\t\t\tvar ret = message.transaction.createResponse(200, \"OK\", JSON.stringify(transaction.candidates), \"ice/candidate\");\n\t\t\t\t\t\t\t\t\t\tret.send();\n\t\t\t\t\t\t\t\t\t\ttransaction.candidates= [];\n\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\tvar ret = message.transaction.createResponse(200, \"OK\");\n\t\t\t\t\t\t\t\t\t\tret.send();\n\t\t\t\t\t\t\t\t\t\t//transaction.candidates= [];\n\t\t\t\t\t\t\t\t\t\t/*this.listen(this, \"onIcecandidate\" , function(transaction, candidates, peerConnection){\n\t\t\t\t\t\t\t\t\t\t\tvar ret = message.transaction.createResponse(200, \"OK\", JSON.stringify(transaction.candidates), \"ice/candidate\");\n\t\t\t\t\t\t\t\t\t\t\tret.send();\n\t\t\t\t\t\t\t\t\t\t\ttransaction.candidates= [];\n\t\t\t\t\t\t\t\t\t\t});*/\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onError\", this.protocol,  message);\n\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.protocol.listen(this, \"onTimeout\",function(sip, message){\n\t\t\t\t\t\tthis.notificationsCenter.fire(\"onTimeout\", message.method, 408, message);\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.protocol.listen(this, \"onDecline\",function(message){\n\t\t\t\t\t\tif ( message.callId in  this.transactions ){\n\t\t\t\t\t\t\tvar transac =  this.transactions[message.callId];\n\t\t\t\t\t\t\tthis.fire(\"onDecline\", this, transac );\n\t\t\t\t\t\t\tthis.closeTransaction(transac);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.protocol.listen(this, \"onError\",function(Class, message){\n\t\t\t\t\t\tthis.notificationsCenter.fire(\"onError\", Class, message);\n\t\t\t\t\t\tvar transac =  this.transactions[message.callId];\n\t\t\t\t\t\tif  (transac ){\n\t\t\t\t\t\t\tthis.closeTransaction(transac, transac.to.name);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.protocol.listen(this, \"onQuit\",function(protocol){\n\t\t\t\t\t\tthis.close();\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.protocol.listen(this, \"onInitCall\",function(to, dialog, transaction){\n\t\t\t\t\t\tif ( dialog.callId in this.transactions ){\n\t\t\t\t\t\t\tvar transac =  this.transactions[dialog.callId];\n\t\t\t\t\t\t\ttransac.currentTransaction = transaction ;\n\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onInitCall\", transac );\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.protocol.listen(this, \"onBye\",function(message){\n\t\t\t\t\t\tif ( message.callId in  this.transactions ){\n\t\t\t\t\t\t\tvar transac =  this.transactions[message.callId];\n\t\t\t\t\t\t\tvar name = message.fromName\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( transac ){\n\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onOnHook\", transac ,message);\n\t\t\t\t\t\t\tthis.closeTransaction(transac, name);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t// WHEN USER LOCAL STOP REGISTRATION\n\t\t\t\t\t\t\tif ( message.fromName === this.user.name ){\n\t\t\t\t\t\t\t\tthis.close()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.protocol.listen(this, \"onCall\", function(message){\n\t\t\t\t\t\tvar transac =  this.transactions[message.callId];\n\t\t\t\t\t\tif ( message.toNameDisplay ){\n\t\t\t\t\t\t\ttransac.to.displayName = message.toNameDisplay ;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//var from = this.users[message.toName];\n\t\t\t\t\t\tif ( message.dialog.status === message.dialog.statusCode.EARLY && message.header[\"Content-Type\"] == \"application/sdp\"){\n\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onAnwer\", message);\n\t\t\t\t\t\t\ttransac.to.setDescription(message.rawBody);\n\t\t\t\t\t\t\ttransac.setRemoteDescription(\"answer\", transac.to, message.rawBody, message.dialog);\n\t\t\t\t\t\t\t/*if ( this.settings.asyncCandidates && transac.candidates.length){\n\t\t\t\t\t\t\t\t//console.log( message.dailog)\n\t\t\t\t\t\t\t\tmessage.dialog.invite(message.to, JSON.stringify(transac.candidates), \"ice/candidate\")\n\t\t\t\t\t\t\t}*/\n\t\t\t\t\t\t\t//this.notificationsCenter.fire( \"onOffHook\", transac , message );\n\t\t\t\t\t\t}else{\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( message.header[\"Content-Type\"] == \"ice/candidate\"){\n\t\t\t\t\t\t\tif (transac.candidates.length){\n\t\t\t\t\t\t\t\tvar res = JSON.parse(message.rawBody) ;\n\t\t\t\t\t\t\t\tfor (let i=0 ; i<res.length;i++){\n\t\t\t\t\t\t\t\t\tvar candidate = new RTCIceCandidate(res[i]);\n\t\t\t\t\t\t\t\t\ttransac.RTCPeerConnection.addIceCandidate(candidate,\n\t\t\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\t\t\t//console.log(\"Succes Candidate\")\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"WEBRTC ADD remote CANDIDATES :  \" + res[i].candidate);\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t(e) => {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(e);\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"WEBRTC Error CANDIDATES \" + res[i].candidate );\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.protocol.listen(this, \"onMessage\",function(message){\n\t\t\t\t\t\tthis.fire(\"onMessage\", message);\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.protocol.listen(this, \"onSend\",function(message){\n\t\t\t\t\t\tthis.fire(\"onSend\", message);\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.listen(this, \"onError\", function(Class, error){\n\t\t\t\t\t\tswitch (true){\n\t\t\t\t\t\t\tcase ( Class instanceof  WebRtc ) :\n\t\t\t\t\t\t\tbreak ;\n\t\t\t\t\t\t\tcase ( Class instanceof Transaction ) :\n\t\t\t\t\t\t\t\t//console.log(Class.currentTransaction )\n\t\t\t\t\t\t\t\tif ( Class.currentTransaction ){\n\t\t\t\t\t\t\t\t\tvar response = Class.currentTransaction.createResponse( 500, error.message || error );\n\t\t\t\t\t\t\t\t\tresponse.send();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.closeTransaction(Class, Class.to.name);\n\t\t\t\t\t\t\tbreak ;\n\t\t\t\t\t\t\tcase ( Class instanceof  Error ) :\n\t\t\t\t\t\t\tbreak ;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error(\"WEBRTC Protocol not found \" ) ;\n\t\t\t}\n\t\t}\n\n\t\tconnect (transport){\n\t\t\t//console.log(transport instanceof stage.realtime  )\n\t\t\tif ( transport ){\n\t\t\t\ttransport.listen(this, \"onConnect\" , function(){\n\t\t\t\t\tthis.socketState = \"open\" ;\n\t\t\t\t});\n\t\t\t\ttransport.listen(this, \"onClose\" , function(){\n\t\t\t\t\tthis.socketState = \"close\" ;\n\t\t\t\t})\n\t\t\t\treturn \ttransport ;\n\t\t\t}\n\t\t}\n\n\t\tlisten (){\n\t\t\treturn this.notificationsCenter.listen.apply(this.notificationsCenter, arguments);\n\t\t}\n\n\t\tunListen (){\n\t\t\treturn this.notificationsCenter.unListen.apply(this.notificationsCenter, arguments);\n\t\t}\n\n\t\tfire (){\n\t\t\treturn this.notificationsCenter.fire.apply(this.notificationsCenter, arguments);\n\t\t}\n\n\t\tcreateTransaction (userTo, dialog, settings){\n\t\t\ttry {\n\t\t\t\tvar transaction = new Transaction(this, this.user, userTo, dialog, settings);\n\t\t\t\treturn transaction ;\n\t\t\t}catch(e){\n\t\t\t\tthis.fire(\"onError\", this, e);\n\t\t\t\tthrow e ;\n\t\t\t}\n\t\t}\n\n\t\tunRegister (){\n\t\t\t//console.log( \"WEBRTC unregister\")\n\t\t\tthis.close();\n\t\t\tif (this.protocol){\n\t\t\t\tthis.protocol.unregister();\n\t\t\t}\n\t\t}\n\n\t\tregister (userName, password, settings){\n\t\t\tthis.user = new User(userName, settings);\n\t\t\tthis.protocol.register( userName, password, settings )\n\t\t}\n\n\n\t\tcreateOffer (userTo) {\n\t\t\tvar to = new User(userTo);\n\t\t\t//this.users[userTo] = to ;\n\t\t\tvar transac = this.createTransaction(to);\n\t\t\ttransac.createOffer();\n\t\t\treturn transac ;\n\t\t}\n\n\t\tcloseTransaction (transation, name) {\n\t\t\tif ( transation ){\n\t\t\t\ttransation.close();\n\t\t\t\tdelete this.transactions[transation.callId];\n\t\t\t\t//delete this.users[name];\n\t\t\t}\n\t\t}\n\n\t\tclose (){\n\t\t\tthis.fire(\"onQuit\", this);\n\t\t\tfor (var trans in this.transactions){\n\t\t\t\ttry {\n\t\t\t\t\tthis.transactions[trans].bye();\n\t\t\t\t\tthis.transactions[trans].close();\n\t\t\t\t}catch(e){\n\n\t\t\t\t}\n\t\t\t\tdelete this.transactions[trans];\n\t\t\t}\n\t\t}\n\n\t\tquit () {\n\t\t\tthis.protocol.bye();\n\t\t}\n\t};\n\n\tstage.media.webrtc = WebRtc ;\n\tstage.media.webrtcTransaction = Transaction ;\n\tstage.media.userMedia = User ; \n\treturn WebRtc ;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/media/webrtc/webrtc.es6","module.exports =  function(stage){\n\n\t'use strict';\n\n\n\tvar ea = function(){\n\t\tif (stage.browser.Ie){\n\t\t\treturn function(callback){\n\t\t\t\tvar iterator = 0;\n\t\t\t\tfor (var key in this.data) {\n\t\t\t\t\t//if ( ! Array.prototype[key] ){\n\t\t\t\t\tif ( this.data.hasOwnProperty(key) ){\n\t\t\t\t\t\tvar value = this.data[key]; \n\t\t\t\t\t\tvar pair = [key, value];\n\t\t\t\t\t\tpair.key = key;\n\t\t\t\t\t\tpair.value = value;\n\t\t\t\t\t\tcallback(pair, iterator);\n\t\t\t\t\t}\n\t\t\t\t\titerator++;\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\treturn function(callback){\n\t\t\t\tvar iterator = 0;\n\t\t\t\tfor (var key in this.data) {\n\t\t\t\t\tvar value = this.data[key]; \n\t\t\t\t\tvar pair = [key, value];\n\t\t\t\t\tpair.key = key;\n\t\t\t\t\tpair.value = value;\n\t\t\t\t\tcallback(pair, iterator);\n\t\t\t\t\titerator++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}();\n\n\n\t\n\tvar struct = class struct {\n\n\t\tconstructor(data){\n\t\t\tthis.data = stage.typeOf(data) === \"object\" ? stage.extend(true, {}, data) : {} ;\n\t\t}\n\n\n\t\tget (key){\n\t\t\tif ((key === null) || (key === undefined)){\n\t\t\t\treturn this.data;\n\t\t\t}\n\t\t\tif ( (key in this.data)){\n\t\t\t\treturn this.data[key];\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tset (key, value){\n\t\t\tif ((key !== null) || (key !== undefined)){\n\t\t\t\treturn this.data[key] = value;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tunset (key){\n\t\t\tif (key in this.data){\n\t\t\t\tdelete this.data[key];\n\t\t\t\treturn true\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\thasKey (key){\n\t\t\tif (key in this.data){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tclear (){\n\t\t\tthis.data = {};\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\tclone (){\n\t\t\treturn stage.extend(true, {}, this.data);\n\t\t}\n\n\t\t//TODO\n\t\tinspect (){\n\t\t\t\n\t\t}\n\n\t\t//TODO\n\t\tkeys (){\n\t\t}\n\n\t\t//TODO\n\t\tvalues (){\n\t\t}\n\n\t\teach (){\n\t\t\treturn ea.apply(this, arguments);\t\n\t\t}\n\n\t\tclone (){\n\t\t\treturn  new struct(this.data);\n\t\t}\n\n\t\ttoObject (key){\n\t\t\treturn stage.extend(true, {}, this.data) ;\n\t\t}\n\n\n\t\tmerge (hash){\n\t\t\tthis.data = stage.extend(true, {}, this.data, hash) ;\n\t\t}\n\n\t\ttoJson (key){\n\t\t\tif (key)\n\t\t\t\treturn stage.json.stringify(this.get(key));\n\t\t\treturn stage.json.stringify(this.data);\n\t\t}\n\n\t\t//TODO\n\t\ttoQueryString (){\n\n\t\t}\n\n\t};\n\n\tvar obj = {\n\t\tstruct:struct,\n\t\tlocal:{\n\t\t\tcreateHash:function(data){\n\t\t\t\treturn new struct(data);\n\t\t\t}\n\t\t}\n\t};\n\n\tstage.structs.hash = obj ;\n\treturn obj;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/structs/hash/hash.es6","module.exports =  function(stage){\n\n\t'use strict';\n\n\n\tvar defaultSettings = {\n\t\ttype:\"FIFO\",\t\n\t\tactive:true\n\t};\n\n\n\tvar codeError = {\n\t\tempty:0,\n\t\tnotFound:1,\n\t\tstopped:2\n\t};\n\n\t/*\n \t*\n \t*\n \t*\n \t*  EVENTS QUEUE : \n \t*\tonQueued(queue) :\t// fire when add value to queue\n \t*\tonDeQueued(queue) :\t// fire when add value to queue\n \t*\tonRunStart:(queue)\t// fire when begin to run along the queue\n \t*\tonRunFinish:(queue)\t// fire when finish to run along the queue\n \t*\tonError(queue, error, errorCode):\t// fire when an error \n \t*\n \t*  ERROR CODES :\n \t*\t0 : \tempty\n \t*\t1 :\tnotFound\n \t*\t2 :\tstopped\n \t*\n \t*  SETTINGS : default\n \t*\ttype : \"FIFO\"  // \"LIFO\"\n \t*\n \t*\n \t*\n \t*/\n\tvar struct = class struct {\n\n\t\tconstructor(localSettings){\n\t\t\t// Manage settings\n\t\t\tthis.settings = stage.extend( true, {}, defaultSettings, localSettings);\n\t\t\tthis.data = [];\n\t\t\tthis.error= null;\n\t\t\tthis.eventsQueue = stage.createEventsManager();\n\t\t}\n\n\t\tlisten (context, eventName, callback){\n\t\t\treturn this.eventsQueue.listen(context, eventName, callback);\n\t\t}\n\t\t\n\t\t// TODO LIFO\n\t\tenqueue (value){\n\t\t\tif (this.settings.active){\n\t\t\t\tvar ret = this.data.push(value);\n\t\t\t\tthis.eventsQueue.fireEvent(\"onQueued\",this);\n\t\t\t\treturn ret;\n\t\t\t}else{\n\t\t\t\tthis.error = new Error(\"QUEUE is stoped\");\n\t\t\t\tthis.eventsQueue.fireEvent(\"onError\",this, this.error, codeError.stopped);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t\tremove (data){\n\t\t\tif (this.isEmpty()) {\n\t\t\t\tthis.error = new Error(\"QUEUE is empty\")\n\t\t\t\tthis.eventsQueue.fireEvent(\"onError\",this, this.error, codeError.empty);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tif (stage.array.contain(this.data, data) )\n\t\t\t\treturn stage.array.remove(this.data, data)\n\t\t\tthis.error = new Error(data+\" Not found\");\n\t\t\tthis.eventsQueue.fireEvent(\"onError\",this, this.error, codeError.notFound);\n\t\t\treturn null;\n\t\t}\n\n\t\t// TODO LIFO\n\t\tdequeue (){\n\t\t\tif (this.settings.active){\n\t\t\t\tif (this.isEmpty()) {\n\t\t\t\t\tthis.error = new Error(\"QUEUE is empty\")\n\t\t\t\t\tthis.eventsQueue.fireEvent(\"onError\",this, this.error, codeError.empty);\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tvar value = this.data[0];\n\t\t\t\tstage.array.removeIndexOf(this.data,0);\n\t\t\t\tthis.eventsQueue.fireEvent(\"onDeQueued\",this);\n\t\t\t\treturn value;\n\t\t\t}else{\n\t\t\t\tthis.error = new Error(\"QUEUE is stoped\")\n\t\t\t\tthis.eventsQueue.fireEvent(\"onError\",this, this.error, codeError.stopped);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\n\t\tpeek (data){\n\t\t\tif (this.isEmpty()) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn this.data[0];\n\t\t}\n\n\t\tpurge (){\n\t\t\tthis.data.length = 0;\n\t\t}\n\n\t\tisEmpty (){\n\t\t\treturn this.data.length === 0;\n\t\t}\n\n\t\tcount (){\n\t\t\treturn this.data.length;\n\t\t}\n\n\t\tgetQueue () {\n\t\t\treturn this.data;\n\t\t}\n\n\t\tstart () {\n\t\t\tthis.settings.active = true;\n\t\t}\n\n\t\tstop (){\n\t\t\tthis.settings.active = false;\n\t\t}\n\n\t\trun (callback) {\n\t\t\tif (this.settings.active){\n\t\t\t\tthis.eventsQueue.fireEvent(\"onRunStart\",this);\n\t\t\t\tstage.each(this.data,callback)\n\t\t\t\tthis.eventsQueue.fireEvent(\"onRunFinish\",this);\n\t\t\t}else{\n\t\t\t\tthis.error = new Error(\"QUEUE is stoped\")\n\t\t\t\tthis.eventsQueue.fireEvent(\"onError\",this, this.error, codeError.stopped);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t};\n\n\n\n\tvar createStruct = function(localSettings){\n\t\tvar Structs = new struct(localSettings);\t\n\t\tStructs.eventsQueue.settingsToListen(localSettings)\t\n\t\tif(Structs.error){\t\t\t\n\t\t\tStructs.eventsQueue.fireEvent(\"onError\", Structs, Structs.error);\n\t\t\treturn Structs;\n\t\t}\t\n\t\treturn Structs;\n\t};\n\n\tvar obj = {\n\t\tstruct:struct,\n\t\tlocal:{\n\t\t\tcreateQueue:function(localSettings){\n\t\t\t\tif (! localSettings){\n\t\t\t\t\tlocalSettings = {};\n\t\t\t\t}\n\t\t\t\treturn createStruct(localSettings);\n\t\t\t}\n\t\t}\n\t};\n\n\tstage.structs.queues = obj ;\n\treturn obj;\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/structs/queue/queue.es6","\n\n/*\n *\n *\n *\n */\nmodule.exports =  function(stage){\n\n\t'use strict';\n   \t/*\n    \t * default settings\n    \t * <pre>\n    \t *   moduleName:      \"stage\"\n    \t *   maxStack:        100\n    \t *   rateLimit:       false\n    \t *   burstLimit:      3\n    \t *   defaultSeverity: \"DEBUG\"\n   \t *   checkConditions: \"&&\"\n   \t *   async:         false\n    \t *\n    \t * </pre>\n    \t */\n   \tvar defaultSettings = {\n           \tmoduleName:\"SYSLOG\",\n\t\tmaxStack: 100,\n\t\trateLimit:false,\n\t\tburstLimit:3,\n\t\tdefaultSeverity:\"DEBUG\",\n\t\tcheckConditions:\"&&\",\n\t\tasync:false\n   \t};\n\n   \t/*\n    \t * Severity syslog\n    \t * <pre>\n    \t *    EMERGENCY   = 0\n    \t *    ALERT       = 1\n    \t *    CRITIC      = 2\n    \t *    ERROR       = 3\n    \t *    WARNING     = 4\n    \t *    NOTICE      = 5\n    \t *    INFO        = 6\n    \t *    DEBUG       = 7\n    \t * </pre>\n    \t */\n   \tvar sysLogSeverity = [\n           \t\"EMERGENCY\",\n           \t\"ALERT\",\n           \t\"CRITIC\",\n           \t\"ERROR\",\n           \t\"WARNING\",\n           \t\"NOTICE\",\n           \t\"INFO\",\n           \t\"DEBUG\"\n   \t];\n   \tsysLogSeverity[\"EMERGENCY\"]=0;\n   \tsysLogSeverity[\"ALERT\"]=1;\n   \tsysLogSeverity[\"CRITIC\"]=2;\n   \tsysLogSeverity[\"ERROR\"]=3;\n   \tsysLogSeverity[\"WARNING\"]=4;\n   \tsysLogSeverity[\"NOTICE\"]=5;\n   \tsysLogSeverity[\"INFO\"]=6;\n   \tsysLogSeverity[\"DEBUG\"]=7;\n\n\t/**\n    \t *  Protocol Data Unit\n     \t * @class  PDU\n    \t * @constructor\n    \t * @module library\n    \t * @return {PDU}\n    \t */\n\tvar guid = 0;\n\tvar PDU = class PDU {\n\t\tconstructor(pci, severity, moduleName, msgid, msg, date ) {\n\t\t\t/* timeStamp @type Date*/\n               \t\tthis.timeStamp = new Date(date).getTime() || new Date().getTime();\n           \t\t/* uid */\n               \t\tthis.uid =  ++guid;\n           \t\t/* severity */\n               \t\tthis.severity = translateSeverity(severity);\n           \t\t/* severityName */\n               \t\tthis.severityName = sysLogSeverity[this.severity];\n            \t\t/* typePayload */\n               \t\tthis.typePayload = stage.typeOf(pci);\n           \t\t/*\n             \t\t* protocole controle information\n             \t\t* @type Void\n             \t\t*/\n               \t\tthis.payload = pci;\n           \t\t/* moduleName */\n               \t\tthis.moduleName = moduleName;\n           \t\t/* msgid */\n               \t\tthis.msgid = msgid || \"\";\n           \t\t/* msg */\n               \t\tthis.msg = msg || \"\";\n\t\t}\n\n\t\t/**\n    \t \t* Get Date in string format\n    \t \t* @method getDate\n    \t \t* @return {String} a date in string format .\n    \t \t*/\n   \t\tgetDate(){\n       \t\t\treturn new Date(this.timeStamp).toTimeString();\n   \t\t}\n\n   \t\t/**\n    \t \t* get a string representating the PDU protocole\n    \t \t* @method toString\n    \t \t* @return {String}  .\n    \t \t*/\n   \t\ttoString (){\n       \t\t\treturn  \"TimeStamp:\"+this.getDate() +\n           \t\t\t\"  Log:\" +this.payload +\n           \t\t\t\"  ModuleName:\" +this.moduleName +\n           \t\t\t\"  SeverityName:\"+this.severityName+\n           \t\t\t\"  MessageID:\"+this.msgid +\n           \t\t\t\"  UID:\"+this.uid +\n                   \t\t\"  Message:\"+this.msg;\n   \t\t}\n\n\t\tparseJson (str){\n\t\t\tvar json = null ;\n\t\t\ttry {\n\t\t\t\tjson = JSON.parse(str);\n\t\t\t\tfor (var ele in json){\n\t\t\t\t\tif (ele in this){\n\t\t\t\t\t\tthis[ele] = json[ele];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}catch(e){\n\t\t\t\tthrow e ;\n\t\t\t}\n\t\t\treturn json ;\n\t\t}\n\t};\n\n   \tvar operators = {\n       \t\t\"<\":function(ele1, ele2){ return ele1 < ele2},\n       \t\t\">\":function(ele1, ele2){ return ele1 > ele2},\n       \t\t\"<=\":function(ele1, ele2){ return ele1 <= ele2},\n       \t\t\">=\":function(ele1, ele2){ return ele1 >= ele2},\n       \t\t\"==\":function(ele1, ele2){ return ele1 === ele2},\n       \t\t\"!=\":function(ele1, ele2){ return ele1 !== ele2},\n\t\t\"RegExp\":function(ele1, ele2){return  ( ele2.test(ele1) )}\n   \t}\n\n   \tvar conditionsObj = {\n       \t\tseverity:function(pdu, condition){\n           \t\tif (condition.operator !== \"==\"){\n               \t\t\t//console.log(pdu.severity);\n               \t\t\t//console.log(condition.data)\n               \t\t\treturn  operators[condition.operator](pdu.severity, condition.data)\n           \t\t}else{\n               \t\t\tfor (var sev in condition.data){\n                   \t\t\tif ( sev === pdu.severityName)\n                       \t\t\t\treturn true\n               \t\t\t}\n           \t\t}\n           \t\treturn false\n       \t\t},\n       \t\tmsgid:function(pdu, condition){\n\t\t\tif (condition.operator !== \"==\"){\n\t\t\t\treturn operators[condition.operator](pdu.msgid, condition.data)\n\t\t\t}else{\n           \t\t\tfor (var sev in condition.data){\n               \t\t\t\tif ( sev === pdu.msgid)\n                   \t\t\t\treturn true\n           \t\t\t}\n\t\t\t}\n           \t\treturn false\n       \t\t},\n       \t\tdate:function(pdu, condition){\n           \t\treturn  operators[condition.operator](pdu.timeStamp, condition.data)\n       \t\t}\n   \t}\n\n   \tvar logicCondition ={\n       \t\t\"&&\" : function(myConditions, pdu){\n           \t\tvar res= null\n           \t\t\tfor (var ele in myConditions){\n               \t\t\t\tvar res = conditionsObj[ele](pdu, myConditions[ele] )\n               \t\t\t\t\t//console.log(\"condition :\" +ele +\"  \"+res)\n               \t\t\t\t\tif ( ! res ){\n                   \t\t\t\t\tbreak;\n               \t\t\t\t\t}\n           \t\t\t}\n           \t\treturn res\n       \t\t},\n       \t\t\"||\" : function(myConditions, pdu){\n           \t\tvar res= null\n           \t\t\tfor (var ele in myConditions){\n               \t\t\t\tvar res = conditionsObj[ele](pdu, myConditions[ele] )\n               \t\t\t\t\tif ( res ){\n                   \t\t\t\t\tbreak;\n               \t\t\t\t\t}\n           \t\t\t}\n           \t\treturn res\n       \t\t}\n   \t}\n\n   \tvar checkFormatSeverity = function(ele){\n       \t\tvar res = false;\n       \t\tswitch ( stage.typeOf(ele) ){\n           \t\tcase \"string\":\n               \t\t\tres = ele.split(/,| /);\n           \t\t\tbreak;\n           \t\tcase \"number\" :\n               \t\t\tres = ele;\n           \t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"checkFormatSeverity bad format \"+stage.typeOf(ele)+\" : \" + ele);\n       \t\t}\n       \t\treturn res;\n   \t}\n\n   \tvar checkFormatDate = function(ele){\n       \t\tvar res = false;\n       \t\tswitch ( stage.typeOf(ele) ){\n           \t\tcase \"date\":\n               \t\t\tres = ele.getTime();\n           \t\t\tbreak;\n           \t\tcase \"string\":\n               \t\t\tres = new Date(ele);\n           \t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"checkFormatDate bad format \"+stage.typeOf(ele)+\" : \" + ele);\n       \t\t}\n       \t\treturn res;\n   \t}\n\n\tvar checkFormatMsgId = function(ele){\n\t\tvar res = false;\n       \t\tswitch ( stage.typeOf(ele) ){\n           \t\tcase \"string\":\n               \t\t\tres = ele.split(/,| /);\n           \t\t\tbreak;\n           \t\tcase \"number\" :\n               \t\t\tres = ele;\n           \t\t\tbreak;\n\t\t\tcase \"object\" :\n\t\t\t\tif (ele instanceof RegExp ){\n\t\t\t\t\tres = ele;\n\t\t\t\t}\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"checkFormatMsgId bad format \"+stage.typeOf(ele)+\" : \" + ele);\n       \t\t}\n       \t\treturn res;\n\n\t}\n\n   \tvar severityToString = function(severity){\n       \t\tvar myint = parseInt(severity,10) ;\n       \t\tif (! isNaN(myint)){\n           \t\tvar ele = sysLogSeverity[myint];\n       \t\t}else{\n           \t\tvar ele = severity;\n       \t\t}\n       \t\tif (ele in sysLogSeverity)\n           \t\treturn ele;\n        \treturn false;\n   \t};\n\n\n   \tvar sanitizeConditions = function(settingsCondition){\n       \t\tvar res = true;\n       \t\tif (stage.typeOf(settingsCondition) !== \"object\" )\n           \t\treturn false;\n       \t\tfor (var ele in settingsCondition){\n           \t\tif (! ele in conditionsObj){\n               \t\t\treturn false;\n           \t\t}\n           \t\tvar condi = settingsCondition[ele];\n\n           \t\tif (condi.operator && ! (condi.operator in operators) ){\n\t\t\t\tthrow new Error(\"Contitions bad operator : \" + condi.operator );\n           \t\t}\n           \t\tif ( condi.data ){\n               \t\t\tswitch (ele){\n                   \t\t\tcase \"severity\":\n                       \t\t\t\tif (condi.operator){\n                           \t\t\t\tres = checkFormatSeverity(condi.data);\n                           \t\t\t\tif (res !== false){\n                               \t\t\t\t\tcondi.data = sysLogSeverity[severityToString(res[0])];\n                           \t\t\t\t}else{\n                               \t\t\t\t\treturn false\n                           \t\t\t\t}\n                       \t\t\t\t}else{\n                           \t\t\t\tcondi.operator = \"==\";\n                           \t\t\t\tres = checkFormatSeverity(condi.data);\n                           \t\t\t\tif (res !== false){\n                               \t\t\t\t\tcondi.data = {};\n                               \t\t\t\t\tif (stage.typeOf(res) === \"array\"){\n                                   \t\t\t\t\tfor (var i = 0 ; i < res.length; i++){\n                                       \t\t\t\t\t\tvar mySeverity = severityToString(res[i]) ;\n                                       \t\t\t\t\t\tif (mySeverity){\n                                           \t\t\t\t\t\tcondi.data[mySeverity] = sysLogSeverity[mySeverity];\n                                       \t\t\t\t\t\t}else{\n                                           \t\t\t\t\t\treturn false;\n                                       \t\t\t\t\t\t}\n                                   \t\t\t\t\t}\n                               \t\t\t\t\t}else{\n                                   \t\t\t\t\treturn false;\n                               \t\t\t\t\t}\n                           \t\t\t\t}else{\n                               \t\t\t\t\treturn false\n                           \t\t\t\t}\n                       \t\t\t\t}\n                   \t\t\t\tbreak;\n                   \t\t\tcase \"msgid\":\n\t\t\t\t\t\tif ( ! condi.operator){\n\t\t\t\t\t\t\tcondi.operator = \"==\";\t\n\t\t\t\t\t\t}\n\t\t\t\t\t\tres = checkFormatMsgId(condi.data);\n                       \t\t\t\tif (res !== false){\n                           \t\t\t\tif (stage.typeOf(res) === \"array\"){\n\t\t\t\t\t\t\t\tcondi.data = {};\n                               \t\t\t\t\tfor (var i = 0 ; i < res.length; i++){\n                                   \t\t\t\t\tcondi.data[res[i]] = \"||\";\n                               \t\t\t\t\t}\n                           \t\t\t\t}else{\n\t\t\t\t\t\t\t\tcondi.data = res;\t\n\t\t\t\t\t\t\t}\n                       \t\t\t\t}else{\n                           \t\t\t\treturn false\n                       \t\t\t\t}\n                   \t\t\t\tbreak;\n                   \t\t\tcase \"date\":\n                       \t\t\t\tres =checkFormatDate(condi.data);\n                       \t\t\t\tif (res)\n                           \t\t\t\tcondi.data = res;\n                       \t\t\t\telse\n                           \t\t\t\treturn false;\n                   \t\t\t\tbreak;\n                   \t\t\tdefault:\n                       \t\t\t\treturn false;\n               \t\t\t}\n           \t\t}else{\n               \t\t\treturn false;\n           \t\t}\n       \t\t}\n       \t\treturn settingsCondition ;\n       \t\t//console.log(settingsCondition);\n   \t};\n\n\n   \tvar translateSeverity = function(severity){\n       \t\tif (severity in sysLogSeverity){\n           \t\tif (typeof severity === 'number')\n               \t\t\tvar myseverity = sysLogSeverity[sysLogSeverity[severity]]\n           \t\telse\n               \t\t\tvar myseverity = sysLogSeverity[severity];\n       \t\t}else{\n\t\t\tif (! severity)\n\t\t\t\treturn null;\n\t\t\telse\n\t\t\t\tthrow new Error (\"not stage syslog severity :\"+severity);\n       \t\t}\n       \t\treturn myseverity;\n   \t};\n\n   \tvar createPDU = function(payload, severity, moduleName, msgid, msg){\n       \t\tif ( ! severity ){\n               \t\tvar myseverity = sysLogSeverity[this.settings.defaultSeverity];\n           \t}else{\n           \t\tvar myseverity = severity;\n           \t}\n       \t\treturn new PDU(payload, myseverity,\n                           \tmoduleName,\n                           \tmsgid,\n                           \tmsg);\n   \t};\n\n   \t/**\n    \t * A class for product log in stage.\n    \t * @example\n    \t *\n    \t *    var ERROR_DEFINE = {\n    \t *       '-101': 'I18N string'\n    \t *    };\n    \t *\n    \t *    var settings = {\n    \t *        rateLimit:100,\n    \t *        burstLimit:10,\n    \t *        moduleName:\"LIVE\",\n    \t *        defaultSeverity:\"ERROR\"\n    \t *    };\n   \t *\n    \t *    var logIntance = new stage.syslog(settings);\n    \t *\n    \t *\n    \t *    controller.logIntance.listen(context,function(pdu){\n    \t *        logView(pdu)\n    \t *    } )\n    \t *\n    \t *    controller.logIntance.listenWithConditions(context,{\n    \t *        checkConditions: \"&&\",\n   \t *        severity:{\n   \t *            data:\"CRITIC,ERROR\"\n   \t *            //data:\"1,7\"\n   \t *        },\n   \t *        date:{\n   \t *            operator:\">=\",\n   \t *            data:new Date()\n   \t *        },\n   \t *        msgid:{\n   \t *            data:\"myFunction\"\n   \t *        }\n   \t *\n    \t *\n    \t *    },function(pdu){\n    \t *        logView(pdu)\n    \t *    } )\n    \t *\n    \t *\n    \t *    var myFunction = function(error){\n    \t *        controller.logIntance.logger(error, \"ERROR\", \"myFunction\", ERROR_DEFINE[error] );\n    \t *    }\n    \t *\n    \t *\n    \t *\n    \t *    @class syslog\n   \t *    @module library\n    \t *    @constructor\n    \t *    @param {Object} settings The settings to extend.\n    \t *    @return syslog\n    \t */\n\tvar syslog = class syslog extends stage.notificationsCenter.notification {\n\n\t\tconstructor(settings){\n\n       \t\t\tsuper( settings );\n       \t\t\t/**\n             \t \t * extended settings\n        \t \t * @property settings\n             \t \t * @type Object\n             \t \t * @see defaultSettings\n             \t \t */\n           \t\tthis.settings = stage.extend({},defaultSettings, settings);\n       \t\t\t/**\n             \t \t * ring buffer structure container instances of PDU\n        \t \t * @property ringStack\n             \t \t * @type Array\n             \t \t */\n           \t\tthis.ringStack = new Array();\n       \t\t\t/**\n             \t \t * Ratelimit  Management log printed\n        \t \t * @property burstPrinted\n             \t \t * @type Number\n             \t \t */\n           \t\tthis.burstPrinted = 0;\n       \t\t\t/**\n             \t \t * Ratelimit  Management log dropped\n        \t \t * @property missed\n             \t \t * @type Number\n             \t \t */\n           \t\tthis.missed =0;\n       \t\t\t/**\n             \t \t * Management log invalid\n        \t \t * @property invalid\n             \t \t * @type Number\n             \t \t */\n       \t\t\tthis.invalid = 0;\n\n       \t\t\t/**\n             \t \t * Counter log valid\n        \t \t * @property valid\n             \t \t * @type Number\n             \t \t */\n       \t\t\tthis.valid = 0;\n       \t\t\t/**\n             \t \t * Ratelimit  Management begin of burst\n        \t \t * @property start\n             \t \t * @private\n             \t \t * @type Number\n             \t \t */\n           \t\tthis.start = 0;\n\n       \t\t\tthis.fire = this.settings.async ? super.fireAsync : super.fire ;\n   \t\t}\n\n   \t\tpushStack (pdu){\n       \t\t\tif (this.ringStack.length === this.settings.maxStack){\n               \t\t\tthis.ringStack.shift();\n           \t\t}\n       \t\t\tvar index = this.ringStack.push(pdu);\n       \t\t\t//console.log(this);\n       \t\t\tthis.valid++;\n       \t\t\treturn index;\n   \t\t}\n\n   \t\t/**\n     \t \t * logger message\n    \t \t * @method logger\n     \t \t * @param {void} payload payload for log. protocole controle information\n     \t \t * @param {Number || String} severity severity syslog like.\n     \t \t * @param {String} msgid informations for message. example(Name of function for debug)\n     \t \t * @param {String} msg  message to add in log. example (I18N)\n     \t \t */\n   \t\tlogger (payload, severity, msgid, msg){\n           \t\tif (this.settings.rateLimit){\n               \t\t\tvar now = new Date().getTime();\n               \t\t\tthis.start = this.start || now;\n               \t\t\tif (now > this.start + this.settings.rateLimit){\n               \t\t\t\tthis.burstPrinted = 0;\n               \t\t\t\tthis.missed =0;\n               \t\t\t\tthis.start = 0;\n               \t\t\t}\n               \t\t\tif(this.settings.burstLimit && this.settings.burstLimit > this.burstPrinted ){\n               \t\t\t\ttry {\n                   \t\t\t\tif (payload instanceof  PDU ){\n                       \t\t\t\t\tvar pdu = payload\n                   \t\t\t\t}else{\n                       \t\t\t\t\tvar pdu = createPDU.call(this, payload, severity, this.settings.moduleName, msgid, msg);\n                   \t\t\t\t}\n               \t\t\t\t}catch(e){\n\t\t\t\t\t\tconsole.error(e);\n                   \t\t\t\tthis.invalid++;\n                   \t\t\t\treturn \"INVALID\"\n               \t\t\t\t}\n               \t\t\t\tthis.pushStack( pdu);\n               \t\t\t\tthis.fire(\"onLog\", pdu);\n               \t\t\t\tthis.burstPrinted++;\n               \t\t\t\treturn \"ACCEPTED\";\n               \t\t\t}\n               \t\t\tthis.missed++;\n               \t\t\treturn \"DROPPED\";\n           \t\t}else{\n           \t\t\ttry {\n               \t\t\t\tif (payload instanceof  PDU ){\n                   \t\t\t\tvar pdu = payload;\n               \t\t\t\t}else{\n                   \t\t\t\tvar pdu = createPDU.call(this, payload, severity, this.settings.moduleName, msgid, msg);\n               \t\t\t\t}\n           \t\t\t}catch(e){\n\t\t\t\t\tconsole.error(e);\n               \t\t\t\tthis.invalid++;\n               \t\t\t\treturn \"INVALID\";\n           \t\t\t}\n               \t\t\tthis.pushStack( pdu);\n               \t\t\tthis.fire(\"onLog\", pdu);\n           \t\t\treturn \"ACCEPTED\";\n           \t\t}\n   \t\t}\n\n   \t\t/**\n     \t \t * Clear stack of logs\n     \t \t *\n     \t \t * @method clearLogStack\n      \t \t *\n      \t \t *\n     \t \t *\n     \t \t */\n   \t\tclearLogStack (){\n       \t\t\tthis.ringStack.length = 0;\n   \t\t}\n\n   \t\t/**\n     \t \t * get hitory of stack\n    \t \t * @method getLogStack\n      \t \t * @param {Number} start .\n     \t \t * @param {Number} end .\n     \t \t * @return {array} new array between start end\n     \t \t * @return {PDU} pdu\n     \t \t */\n   \t\tgetLogStack (start, end, contition){\n\t\t\tif (contition){\n\t\t\t\tvar stack = this.getLogs(contition) ; \n\t\t\t}else{\n\t\t\t\tvar stack = this.ringStack ;\n\t\t\t}\n           \t\tif ( arguments.length  === 0)\n               \t\t\treturn stack[stack.length-1];\n           \t\tif ( ! end)\n               \t\t\treturn stack.slice(start);\n           \t\tif (start === end)\n               \t\t\treturn stack[stack.length - start-1];\n\t\t\treturn stack.slice(start, end );\n   \t\t}\n\n\n   \t\t/**\n     \t \t * get logs with conditions\n    \t \t * @method getLogs\n      \t \t * @param {Object} conditions .\n     \t \t * @return {array} new array with matches conditions\n     \t \t */\n   \t\tgetLogs (conditions, stack){\n\t\t\tvar myStack = stack || this.ringStack ;\n       \t\t\tif ( conditions.checkConditions && conditions.checkConditions in logicCondition ){\n           \t\t\tvar myFuncCondition = logicCondition[conditions.checkConditions];\n           \t\t\tdelete conditions.checkConditions;\n       \t\t\t}else{\n           \t\t\tvar myFuncCondition = logicCondition[this.settings.checkConditions];\n       \t\t\t}\n       \t\t\tvar tab = [];\n\t\t\ttry {\n\t\t\t\tvar Conditions = sanitizeConditions(conditions);\n\t\t\t}catch(e){\n\t\t\t\tthrow new Error(\"registreNotification conditions format error: \"+ e);\n\t\t\t}\n       \t\t\tif (Conditions){\n           \t\t\tfor (var i = 0 ; i<myStack.length; i++){\n               \t\t\t\tvar res = myFuncCondition(Conditions,myStack[i])\n               \t\t\t\t\tif (res)\n                   \t\t\t\t\ttab.push(myStack[i]);\n           \t\t\t}\n       \t\t\t}\n       \t\t\treturn tab;\n   \t\t}\n\n\n   \t\t/**\n     \t \t * take the stack and build a JSON string\n    \t \t * @method logToJson\n     \t \t * @return {String} string in JSON format\n     \t \t */\n   \t\tlogToJson (conditions){\n       \t\t\tif (conditions)\n           \t\t\tvar stack = this.getLogs(conditions)\n       \t\t\telse\n           \t\t\tvar stack = this.ringStack\n           \t\t\t\treturn JSON.stringify(stack);\n   \t\t}\n\n   \t\t/**\n    \t \t * load the stack as JSON string\n   \t \t * @method loadStack\n   \t \t * @param {Object} json or string stack serialize\n\t \t * @param {boolean} fire conditions events  .\n\t \t * @param {function} callback before fire conditions events\n    \t \t * @return {String}\n    \t \t */\n   \t\tloadStack (stack, doEvent, beforeConditions){\n       \t\t\tif (! stack )\n           \t\t\tthrow new Error(\"syslog loadStack : not stack in arguments \")\n               \t\t\t\tswitch(stage.typeOf(stack)){\n                   \t\t\t\tcase \"string\" :\n                       \t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t//console.log(stack);\n                           \t\t\t\t\tvar st = JSON.parse(stack);\n                           \t\t\t\t\treturn arguments.callee.call(this, st, doEvent);\n                       \t\t\t\t\t}catch(e){\n                           \t\t\t\t\tthrow e;\n                       \t\t\t\t\t}\n                       \t\t\t\t\tbreak;\n                   \t\t\t\tcase \"array\" :\n                   \t\t\t\tcase \"object\" :\n                       \t\t\t\t\ttry {\n                           \t\t\t\t\tfor(var i= 0 ; i<stack.length ; i++){\n                               \t\t\t\t\t\tvar pdu = new PDU(stack[i].payload, stack[i].severity, stack[i].moduleName || this.settings.moduleName , stack[i].msgid, stack[i].msg, stack[i].timeStamp)\n                                   \t\t\t\t\t\tthis.pushStack( pdu);\n\n                                   \t\t\t\t\tif (doEvent) {\n\t\t\t\t\t\t\t\t\t\tif (beforeConditions && typeof beforeConditions  === \"function\")\n\t\t\t\t\t\t\t\t\t\t\tbeforeConditions.call(this, pdu, stack[i]);\n                                       \t\t\t\t\t\tthis.fire(\"onLog\", pdu);\n                                   \t\t\t\t\t}\n                           \t\t\t\t\t}\n                       \t\t\t\t\t}catch(e){\n                           \t\t\t\t\tthrow e;\n                       \t\t\t\t\t}\n                       \t\t\t\t\tbreak;\n                   \t\t\t\tdefault :\n                       \t\t\t\t\tthrow new Error(\"syslog loadStack : bad stack in arguments type\")\n               \t\t\t\t};\n               \t\treturn st || stack;\n   \t\t}\n\n\n   \t\t/**\n     \t \t *\n     \t \t *    @method  listenWithConditions\n     \t \t *\n     \t \t */\n   \t\tlistenWithConditions (context, conditions, callback  ){\n       \t\t\tif ( conditions.checkConditions && conditions.checkConditions in logicCondition ){\n           \t\t\tvar myFuncCondition = logicCondition[conditions.checkConditions];\n           \t\t\tdelete conditions.checkConditions;\n       \t\t\t}else{\n           \t\t\tvar myFuncCondition = logicCondition[this.settings.checkConditions];\n       \t\t\t}\n\t\t\ttry {\n\t\t\t\tvar Conditions = sanitizeConditions(conditions);\n\t\t\t}catch(e){\n\t\t\t\tthrow new Error(\"registreNotification conditions format error: \"+ e);\t\n\t\t\t}\n       \t\t\tif (Conditions){\n\t\t\t\tvar func = function(pdu){\n               \t\t\t\tvar res = myFuncCondition(Conditions, pdu);\n               \t\t\t\tif (res){\n                   \t\t\t\tcallback.apply(context || this, arguments)\n               \t\t\t\t}\n           \t\t\t};\n           \t\t\tsuper.listen(this, \"onLog\", func);\n\t\t\t\treturn func ;\n       \t\t\t}\n   \t\t}\n\n\t}\n\tstage.syslog = syslog;\n\tstage.PDU = PDU;\n\treturn syslog ; \n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/syslog/syslog.es6","/*\n *\n *\n *\n *\n *\n *\n *\n */\n\nmodule.exports = function(stage){\n\n\t/**\n   \t* \\brief changes the given string to XML doc.\n   \t*\n   \t* \\param string an XML string\n   \t* \\return  the document  node root\n   \t*/\n  \tvar stringToDocumentXML = function(){\n\n\t\tif ( ! document.implementation.createDocument){\n\t\t\treturn function(str){\n\t\t\t\tvar doc = createDocument();\n\t\t\t\tdoc.async=\"false\";\n\t\t\t\tdoc.loadXML(str);\n\t\t\t\treturn doc;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn function(str){\n    \t\t\ttry{\n\t\t\t\tvar oDomDoc = (new DOMParser()).parseFromString(str, 'application/xml');\n      \t\t\t}catch(e){\n\t\t\t\tthrow Error('xml function stringToDocumentXML : '+e);\n      \t\t\t}\n\t\t\treturn oDomDoc;\n\t\t}\n  \t}();\n  \t\n  \tvar getDocumentRoot = function(doc){ \n\t\tvar type = stage.typeOf(doc);\n\t\tif ( type === \"document\" ){\n\t\t\treturn (doc.documentElement || doc.childNodes[0]);\t\t\n\t\t}\n\t\tif ( type === \"element\" ){\n\t\t\tvar myDoc = doc.ownerDocument ;\n\t\t\treturn (myDoc.documentElement || myDoc.childNodes[0]);\n\t\t}\n  \t};\n\n\n\n\n\n\t//parseXML\n\tvar parseXml = function( xml ){\n\t\tswitch (stage.typeOf(xml)){\n\t\t\tcase \"string\":\n\t\t\t\tvar root = getDocumentRoot(stringToDocumentXML(xml));\n\t\t\tbreak;\n\t\t\tcase \"document\":\n\t\t\t\tvar root = getDocumentRoot(xml);\n\t\t\tbreak;\n\t\t\tcase \"element\":\n\t\t\t\tvar root = xml;\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"parseXml  bad type arguments\");\n\t\t\n\t\t}\n\t\treturn parseDOM( root );\n\t};\n\n\tvar __force_array = null;\n\tvar parseDOM = function(root){\n\t\tif ( ! root ) return null;\n\t\tvar force_array = null;\n\t\t__force_array = {};\n        \tif ( force_array ) {\n            \t\tfor( var i=0; i<force_array.length; i++ ) {\n                \t\t__force_array[force_array[i]] = 1;\n            \t\t}\n        \t}\n\n        \tvar json = parseNode( root );   // parse root node\n        \tif ( __force_array[root.nodeName] ) {\n            \t\tjson = [ json ];\n        \t}\n        \tif ( root.nodeType != 11 ) {            // DOCUMENT_FRAGMENT_NODE\n            \t\tvar tmp = {};\n            \t\ttmp[root.nodeName] = json;          // root nodeName\n            \t\tjson = tmp;\n        \t}\n        \treturn json;\n\t};\n\n\n\tvar attr_prefix =\"@\";\n\tvar name_space = \":\";\n\tvar parseNode = function(node){\n\t\tif ( ! node ) return null;\n\t\tswitch( node.nodeType ){\n\t\t\t// COMMENT_NODE\n\t\t\tcase 7:\n\t\t\t\treturn null;\n\t\t\t// TEXT_NODE \n\t\t\tcase 3:\n\t\t\t// CDATA_SECTION_NODE\n\t\t\tcase 4:\n\t\t\t\tif ( node.nodeValue.match( /[^\\x00-\\x20]/ ) )\n\t\t\t\t\treturn node.nodeValue;\n\t\t\t\treturn null;\n\t\t\tbreak;\t\t\n\t\t}\n\t\tvar ret = null;\n\t\tvar data = {};\t\n\n\t\t// parse Attributes \n\t\tif ( node.attributes && node.attributes.length ){\n\t\t\tret = {};\n\t\t\tfor ( var i=0; i<node.attributes.length; i++ ) {\n\t\t\t\tvar key = node.attributes[i].nodeName;\n                \t\tif ( typeof(key) !== \"string\" ) continue;\n                \t\tvar val =  node.attributes[i].value || node.attributes[i].nodeValue;\n                \t\tif ( ! val ) continue;\n                \t\tkey = attr_prefix + key;\n                \t\tif ( typeof(data[key]) == \"undefined\" ) data[key] = 0;\n                \t\tdata[key] ++;\n\t\t\t\taddNode( ret, key, data[key], val );\n\t\t\t}\n\t\t\t//console.log(data)\n\t\t}\n\n\t\tif ( node.childNodes && node.childNodes.length ) {\n            \t\tvar textonly = true;\n            \t\tif ( ret ) textonly = false;        // some attributes exists\n            \t\tfor ( var i=0; i<node.childNodes.length && textonly; i++ ) {\n                \t\tvar ntype = node.childNodes[i].nodeType;\n                \t\tif ( ntype == 3 || ntype == 4 ) continue;\n                \t\ttextonly = false;\n            \t\t}\n            \t\tif ( textonly ) {\n                \t\tif ( ! ret ) ret = \"\";\n                \t\tfor ( var i=0; i<node.childNodes.length; i++ ) {\n                    \t\t\tret += node.childNodes[i].nodeValue;\n                \t\t}\n            \t\t} else {\n                \t\tif ( ! ret ) ret = {};\n                \t\tfor ( var i=0; i<node.childNodes.length; i++ ) {\n                    \t\t\tvar key = node.childNodes[i].nodeName;\n                    \t\t\tif ( typeof(key) !== \"string\" ) continue;\n                    \t\t\tvar val = parseNode( node.childNodes[i] );\n                    \t\t\tif ( ! val ) continue;\n                    \t\t\tif ( typeof(data[key]) === \"undefined\" ) data[key] = 0;\n                    \t\t\tdata[key] ++;\n                    \t\t\taddNode( ret, key, data[key], val );\n                \t\t}\n            \t\t}\n        \t}\n\t\treturn ret;\n\t};\n\n\tvar addNode = function ( hash, key, cnts, val ) {\n        \tkey = removeColon(key);\n        \tif ( __force_array && __force_array[key] ) {\n            \t\tif ( cnts == 1 ) hash[key] = [];\n            \t\thash[key][hash[key].length] = val;      // push\n        \t} else if ( cnts == 1 ) {                   // 1st sibling\n            \t\thash[key] = val;\n        \t} else if ( cnts == 2 ) {                   // 2nd sibling\n            \t\thash[key] = [ hash[key], val ];\n        \t} else {                                    // 3rd sibling and more\n            \t\thash[key][hash[key].length] = val;\n        \t}\n\t};\n\t\n\tvar removeColon = function(name){\n\t\treturn name ? (name.replace(':',name_space)): name;\n\t};\n\n\treturn stage.xml =  {\n\t\tparseXml:parseXml,\n\t\t//parseNode:parseDOM,\n\t  \tstringToDocumentXML : stringToDocumentXML ,\n\t  \t//getDocumentRoot :getDocumentRoot\n\t}\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/tools/xml.js","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n// WEBPACK FOOTER //\n// ./~/process/browser.js"," /* eslint-env node */\n'use strict';\n\n// SDP helpers.\nvar SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substr(2, 10);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(function(line) {\n    return line.trim();\n  });\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  var parts = blob.split('\\nm=');\n  return parts.map(function(part, index) {\n    return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n  });\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(function(line) {\n    return line.indexOf(prefix) === 0;\n  });\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\nSDPUtils.parseCandidate = function(line) {\n  var parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  var candidate = {\n    foundation: parts[0],\n    component: parts[1],\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7]\n  };\n\n  for (var i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      default: // Unknown extensions are silently ignored.\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\nSDPUtils.writeCandidate = function(candidate) {\n  var sdp = [];\n  sdp.push(candidate.foundation);\n  sdp.push(candidate.component);\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.ip);\n  sdp.push(candidate.port);\n\n  var type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress); // was: relAddr\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort); // was: relPort\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  var parts = line.substr(9).split(' ');\n  var parsed = {\n    payloadType: parseInt(parts.shift(), 10) // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  // was: channels\n  parsed.numChannels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  return parsed;\n};\n\n// Generate an a=rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (codec.numChannels !== 1 ? '/' + codec.numChannels : '') + '\\r\\n';\n};\n\n// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    uri: parts[1]\n  };\n};\n\n// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n       ' ' + headerExtension.uri + '\\r\\n';\n};\n\n// Parses an ftmp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  var parsed = {};\n  var kv;\n  var parts = line.substr(line.indexOf(' ') + 1).split(';');\n  for (var j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  var line = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    var params = [];\n    Object.keys(codec.parameters).forEach(function(param) {\n      params.push(param + '=' + codec.parameters[param]);\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' ')\n  };\n};\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  var lines = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(function(fb) {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses an RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  var sp = line.indexOf(' ');\n  var parts = {\n    ssrc: parseInt(line.substr(7, sp - 7), 10)\n  };\n  var colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substr(sp + 1, colon - sp - 1);\n    parts.value = line.substr(colon + 1);\n  } else {\n    parts.attribute = line.substr(sp + 1);\n  }\n  return parts;\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  // Search in session part, too.\n  lines = lines.concat(SDPUtils.splitLines(sessionpart));\n  var fpLine = lines.filter(function(line) {\n    return line.indexOf('a=fingerprint:') === 0;\n  })[0].substr(14);\n  // Note: a=setup line is ignored since we use the 'auto' role.\n  var dtlsParameters = {\n    role: 'auto',\n    fingerprints: [{\n      algorithm: fpLine.split(' ')[0],\n      value: fpLine.split(' ')[1]\n    }]\n  };\n  return dtlsParameters;\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  var sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(function(fp) {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  // Search in session part, too.\n  lines = lines.concat(SDPUtils.splitLines(sessionpart));\n  var iceParameters = {\n    usernameFragment: lines.filter(function(line) {\n      return line.indexOf('a=ice-ufrag:') === 0;\n    })[0].substr(12),\n    password: lines.filter(function(line) {\n      return line.indexOf('a=ice-pwd:') === 0;\n    })[0].substr(10)\n  };\n  return iceParameters;\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  var description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: []\n  };\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    var pt = mline[i];\n    var rtpmapline = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      var codec = SDPUtils.parseRtpMap(rtpmapline);\n      var fmtps = SDPUtils.matchPrefix(\n          mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n          mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  var sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' UDP/TLS/RTP/SAVPF ';\n  sdp += caps.codecs.map(function(codec) {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(function(codec) {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  var maxptime = 0;\n  caps.codecs.forEach(function(codec) {\n    if (codec.maxptime > maxptime) {\n      maxptime = codec.maxptime;\n    }\n  });\n  if (maxptime > 0) {\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n  }\n  sdp += 'a=rtcp-mux\\r\\n';\n\n  caps.headerExtensions.forEach(function(extension) {\n    sdp += SDPUtils.writeExtmap(extension);\n  });\n  // FIXME: write fecMechanisms.\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  var encodingParameters = [];\n  var description = SDPUtils.parseRtpParameters(mediaSection);\n  var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n  .map(function(line) {\n    return SDPUtils.parseSsrcMedia(line);\n  })\n  .filter(function(parts) {\n    return parts.attribute === 'cname';\n  });\n  var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  var secondarySsrc;\n\n  var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n  .map(function(line) {\n    var parts = line.split(' ');\n    parts.shift();\n    return parts.map(function(part) {\n      return parseInt(part, 10);\n    });\n  });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(function(codec) {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      var encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10),\n        rtx: {\n          ssrc: secondarySsrc\n        }\n      };\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: secondarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(5), 10);\n    }\n    encodingParameters.forEach(function(params) {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n  var rtcpParameters = {};\n\n  var cname;\n  // Gets the first SSRC. Note that with RTX there might be multiple\n  // SSRCs.\n  var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n      .map(function(line) {\n        return SDPUtils.parseSsrcMedia(line);\n      })\n      .filter(function(obj) {\n        return obj.attribute === 'cname';\n      })[0];\n  if (remoteSsrc) {\n    rtcpParameters.cname = remoteSsrc.value;\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\n  }\n\n  // Edge uses the compound attribute instead of reducedSize\n  // compound is !reducedSize\n  var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n  rtcpParameters.reducedSize = rsize.length > 0;\n  rtcpParameters.compound = rsize.length === 0;\n\n  // parses the rtcp-mux attrіbute.\n  // Note that Edge does not support unmuxed RTCP.\n  var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n  rtcpParameters.mux = mux.length > 0;\n\n  return rtcpParameters;\n};\n\n// parses either a=msid: or a=ssrc:... msid lines an returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n  var parts;\n  var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n  if (spec.length === 1) {\n    parts = spec[0].substr(7).split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n  var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n  .map(function(line) {\n    return SDPUtils.parseSsrcMedia(line);\n  })\n  .filter(function(parts) {\n    return parts.attribute === 'msid';\n  });\n  if (planB.length > 0) {\n    parts = planB[0].value.split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n};\n\nSDPUtils.writeSessionBoilerplate = function() {\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=thisisadapterortc 8169639915646943137 2 IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\nSDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n      transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n      transceiver.dtlsTransport.getLocalParameters(),\n      type === 'offer' ? 'actpass' : 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    // spec.\n    var msid = 'msid:' + stream.id + ' ' +\n        transceiver.rtpSender.track.id + '\\r\\n';\n    sdp += 'a=' + msid;\n\n    // for Chrome.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  var lines = SDPUtils.splitLines(mediaSection);\n  for (var i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substr(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  return mline[0].substr(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n  return mediaSection.split(' ', 2)[1] === '0';\n};\n\n// Expose public methods.\nmodule.exports = SDPUtils;\n\n\n\n// WEBPACK FOOTER //\n// ./~/sdp/sdp.js","'use strict';\n\nvar encode = require('./encode');\nvar alphabet = require('./alphabet');\n\n// Ignore all milliseconds before a certain time to reduce the size of the date entropy without sacrificing uniqueness.\n// This number should be updated every year or so to keep the generated id short.\n// To regenerate `new Date() - 0` and bump the version. Always bump the version!\nvar REDUCE_TIME = 1459707606518;\n\n// don't change unless we change the algos or REDUCE_TIME\n// must be an integer and less than 16\nvar version = 6;\n\n// Counter is used when shortid is called multiple times in one second.\nvar counter;\n\n// Remember the last time shortid was called in case counter is needed.\nvar previousSeconds;\n\n/**\n * Generate unique id\n * Returns string id\n */\nfunction build(clusterWorkerId) {\n\n    var str = '';\n\n    var seconds = Math.floor((Date.now() - REDUCE_TIME) * 0.001);\n\n    if (seconds === previousSeconds) {\n        counter++;\n    } else {\n        counter = 0;\n        previousSeconds = seconds;\n    }\n\n    str = str + encode(alphabet.lookup, version);\n    str = str + encode(alphabet.lookup, clusterWorkerId);\n    if (counter > 0) {\n        str = str + encode(alphabet.lookup, counter);\n    }\n    str = str + encode(alphabet.lookup, seconds);\n\n    return str;\n}\n\nmodule.exports = build;\n\n\n\n// WEBPACK FOOTER //\n// ./~/shortid/lib/build.js","'use strict';\nvar alphabet = require('./alphabet');\n\n/**\n * Decode the id to get the version and worker\n * Mainly for debugging and testing.\n * @param id - the shortid-generated id.\n */\nfunction decode(id) {\n    var characters = alphabet.shuffled();\n    return {\n        version: characters.indexOf(id.substr(0, 1)) & 0x0f,\n        worker: characters.indexOf(id.substr(1, 1)) & 0x0f\n    };\n}\n\nmodule.exports = decode;\n\n\n\n// WEBPACK FOOTER //\n// ./~/shortid/lib/decode.js","'use strict';\n\nvar alphabet = require('./alphabet');\nvar encode = require('./encode');\nvar decode = require('./decode');\nvar build = require('./build');\nvar isValid = require('./is-valid');\n\n// if you are using cluster or multiple servers use this to make each instance\n// has a unique value for worker\n// Note: I don't know if this is automatically set when using third\n// party cluster solutions such as pm2.\nvar clusterWorkerId = require('./util/cluster-worker-id') || 0;\n\n/**\n * Set the seed.\n * Highly recommended if you don't want people to try to figure out your id schema.\n * exposed as shortid.seed(int)\n * @param seed Integer value to seed the random alphabet.  ALWAYS USE THE SAME SEED or you might get overlaps.\n */\nfunction seed(seedValue) {\n    alphabet.seed(seedValue);\n    return module.exports;\n}\n\n/**\n * Set the cluster worker or machine id\n * exposed as shortid.worker(int)\n * @param workerId worker must be positive integer.  Number less than 16 is recommended.\n * returns shortid module so it can be chained.\n */\nfunction worker(workerId) {\n    clusterWorkerId = workerId;\n    return module.exports;\n}\n\n/**\n *\n * sets new characters to use in the alphabet\n * returns the shuffled alphabet\n */\nfunction characters(newCharacters) {\n    if (newCharacters !== undefined) {\n        alphabet.characters(newCharacters);\n    }\n\n    return alphabet.shuffled();\n}\n\n/**\n * Generate unique id\n * Returns string id\n */\nfunction generate() {\n  return build(clusterWorkerId);\n}\n\n// Export all other functions as properties of the generate function\nmodule.exports = generate;\nmodule.exports.generate = generate;\nmodule.exports.seed = seed;\nmodule.exports.worker = worker;\nmodule.exports.characters = characters;\nmodule.exports.decode = decode;\nmodule.exports.isValid = isValid;\n\n\n\n// WEBPACK FOOTER //\n// ./~/shortid/lib/index.js","'use strict';\nvar alphabet = require('./alphabet');\n\nfunction isShortId(id) {\n    if (!id || typeof id !== 'string' || id.length < 6 ) {\n        return false;\n    }\n\n    var characters = alphabet.characters();\n    var len = id.length;\n    for(var i = 0; i < len;i++) {\n        if (characters.indexOf(id[i]) === -1) {\n            return false;\n        }\n    }\n    return true;\n}\n\nmodule.exports = isShortId;\n\n\n\n// WEBPACK FOOTER //\n// ./~/shortid/lib/is-valid.js","'use strict';\n\nvar crypto = typeof window === 'object' && (window.crypto || window.msCrypto); // IE 11 uses window.msCrypto\n\nfunction randomByte() {\n    if (!crypto || !crypto.getRandomValues) {\n        return Math.floor(Math.random() * 256) & 0x30;\n    }\n    var dest = new Uint8Array(1);\n    crypto.getRandomValues(dest);\n    return dest[0] & 0x30;\n}\n\nmodule.exports = randomByte;\n\n\n\n// WEBPACK FOOTER //\n// ./~/shortid/lib/random/random-byte-browser.js","'use strict';\n\n// Found this seed-based random generator somewhere\n// Based on The Central Randomizer 1.3 (C) 1997 by Paul Houle (houle@msc.cornell.edu)\n\nvar seed = 1;\n\n/**\n * return a random number based on a seed\n * @param seed\n * @returns {number}\n */\nfunction getNextValue() {\n    seed = (seed * 9301 + 49297) % 233280;\n    return seed/(233280.0);\n}\n\nfunction setSeed(_seed_) {\n    seed = _seed_;\n}\n\nmodule.exports = {\n    nextValue: getNextValue,\n    seed: setSeed\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/shortid/lib/random/random-from-seed.js","'use strict';\n\nmodule.exports = 0;\n\n\n\n// WEBPACK FOOTER //\n// ./~/shortid/lib/util/cluster-worker-id-browser.js","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\n'use strict';\n\n// Shimming starts here.\n(function() {\n  // Utils.\n  var utils = require('./utils');\n  var logging = utils.log;\n  var browserDetails = utils.browserDetails;\n  // Export to the adapter global object visible in the browser.\n  module.exports.browserDetails = browserDetails;\n  module.exports.extractVersion = utils.extractVersion;\n  module.exports.disableLog = utils.disableLog;\n\n  // Uncomment the line below if you want logging to occur, including logging\n  // for the switch statement below. Can also be turned on in the browser via\n  // adapter.disableLog(false), but then logging from the switch statement below\n  // will not appear.\n  // require('./utils').disableLog(false);\n\n  // Browser shims.\n  var chromeShim = require('./chrome/chrome_shim') || null;\n  var edgeShim = require('./edge/edge_shim') || null;\n  var firefoxShim = require('./firefox/firefox_shim') || null;\n  var safariShim = require('./safari/safari_shim') || null;\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection) {\n        logging('Chrome shim is not included in this adapter release.');\n        return;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      module.exports.browserShim = chromeShim;\n\n      chromeShim.shimGetUserMedia();\n      chromeShim.shimMediaStream();\n      utils.shimCreateObjectURL();\n      chromeShim.shimSourceObject();\n      chromeShim.shimPeerConnection();\n      chromeShim.shimOnTrack();\n      chromeShim.shimGetSendersWithDtmf();\n      break;\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection) {\n        logging('Firefox shim is not included in this adapter release.');\n        return;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      module.exports.browserShim = firefoxShim;\n\n      firefoxShim.shimGetUserMedia();\n      utils.shimCreateObjectURL();\n      firefoxShim.shimSourceObject();\n      firefoxShim.shimPeerConnection();\n      firefoxShim.shimOnTrack();\n      break;\n    case 'edge':\n      if (!edgeShim || !edgeShim.shimPeerConnection) {\n        logging('MS edge shim is not included in this adapter release.');\n        return;\n      }\n      logging('adapter.js shimming edge.');\n      // Export to the adapter global object visible in the browser.\n      module.exports.browserShim = edgeShim;\n\n      edgeShim.shimGetUserMedia();\n      utils.shimCreateObjectURL();\n      edgeShim.shimPeerConnection();\n      break;\n    case 'safari':\n      if (!safariShim) {\n        logging('Safari shim is not included in this adapter release.');\n        return;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      module.exports.browserShim = safariShim;\n\n      safariShim.shimGetUserMedia();\n      break;\n    default:\n      logging('Unsupported browser!');\n  }\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./~/webrtc-adapter/src/js/adapter_core.js","\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\nvar logging = require('../utils.js').log;\nvar browserDetails = require('../utils.js').browserDetails;\n\nvar chromeShim = {\n  shimMediaStream: function() {\n    window.MediaStream = window.MediaStream || window.webkitMediaStream;\n  },\n\n  shimOnTrack: function() {\n    if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n        window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n        get: function() {\n          return this._ontrack;\n        },\n        set: function(f) {\n          var self = this;\n          if (this._ontrack) {\n            this.removeEventListener('track', this._ontrack);\n            this.removeEventListener('addstream', this._ontrackpoly);\n          }\n          this.addEventListener('track', this._ontrack = f);\n          this.addEventListener('addstream', this._ontrackpoly = function(e) {\n            // onaddstream does not fire when a track is added to an existing\n            // stream. But stream.onaddtrack is implemented so we use that.\n            e.stream.addEventListener('addtrack', function(te) {\n              var event = new Event('track');\n              event.track = te.track;\n              event.receiver = {track: te.track};\n              event.streams = [e.stream];\n              self.dispatchEvent(event);\n            });\n            e.stream.getTracks().forEach(function(track) {\n              var event = new Event('track');\n              event.track = track;\n              event.receiver = {track: track};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            }.bind(this));\n          }.bind(this));\n        }\n      });\n    }\n  },\n\n  shimGetSendersWithDtmf: function() {\n    if (typeof window === 'object' && window.RTCPeerConnection &&\n        !('getSenders' in RTCPeerConnection.prototype) &&\n        'createDTMFSender' in RTCPeerConnection.prototype) {\n      RTCPeerConnection.prototype.getSenders = function() {\n        return this._senders;\n      };\n      var origAddStream = RTCPeerConnection.prototype.addStream;\n      var origRemoveStream = RTCPeerConnection.prototype.removeStream;\n\n      RTCPeerConnection.prototype.addStream = function(stream) {\n        var pc = this;\n        pc._senders = pc._senders || [];\n        origAddStream.apply(pc, [stream]);\n        stream.getTracks().forEach(function(track) {\n          pc._senders.push({\n            track: track,\n            get dtmf() {\n              if (this._dtmf === undefined) {\n                if (track.kind === 'audio') {\n                  this._dtmf = pc.createDTMFSender(track);\n                } else {\n                  this._dtmf = null;\n                }\n              }\n              return this._dtmf;\n            }\n          });\n        });\n      };\n\n      RTCPeerConnection.prototype.removeStream = function(stream) {\n        var pc = this;\n        pc._senders = pc._senders || [];\n        origRemoveStream.apply(pc, [stream]);\n        stream.getTracks().forEach(function(track) {\n          var sender = pc._senders.find(function(s) {\n            return s.track === track;\n          });\n          if (sender) {\n            pc._senders.splice(pc._senders.indexOf(sender), 1); // remove sender\n          }\n        });\n      };\n    }\n  },\n\n  shimSourceObject: function() {\n    if (typeof window === 'object') {\n      if (window.HTMLMediaElement &&\n        !('srcObject' in window.HTMLMediaElement.prototype)) {\n        // Shim the srcObject property, once, when HTMLMediaElement is found.\n        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n          get: function() {\n            return this._srcObject;\n          },\n          set: function(stream) {\n            var self = this;\n            // Use _srcObject as a private property for this shim\n            this._srcObject = stream;\n            if (this.src) {\n              URL.revokeObjectURL(this.src);\n            }\n\n            if (!stream) {\n              this.src = '';\n              return undefined;\n            }\n            this.src = URL.createObjectURL(stream);\n            // We need to recreate the blob url when a track is added or\n            // removed. Doing it manually since we want to avoid a recursion.\n            stream.addEventListener('addtrack', function() {\n              if (self.src) {\n                URL.revokeObjectURL(self.src);\n              }\n              self.src = URL.createObjectURL(stream);\n            });\n            stream.addEventListener('removetrack', function() {\n              if (self.src) {\n                URL.revokeObjectURL(self.src);\n              }\n              self.src = URL.createObjectURL(stream);\n            });\n          }\n        });\n      }\n    }\n  },\n\n  shimPeerConnection: function() {\n    // The RTCPeerConnection object.\n    if (!window.RTCPeerConnection) {\n      window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n        // Translate iceTransportPolicy to iceTransports,\n        // see https://code.google.com/p/webrtc/issues/detail?id=4869\n        // this was fixed in M56 along with unprefixing RTCPeerConnection.\n        logging('PeerConnection');\n        if (pcConfig && pcConfig.iceTransportPolicy) {\n          pcConfig.iceTransports = pcConfig.iceTransportPolicy;\n        }\n\n        return new webkitRTCPeerConnection(pcConfig, pcConstraints);\n      };\n      window.RTCPeerConnection.prototype = webkitRTCPeerConnection.prototype;\n      // wrap static methods. Currently just generateCertificate.\n      if (webkitRTCPeerConnection.generateCertificate) {\n        Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n          get: function() {\n            return webkitRTCPeerConnection.generateCertificate;\n          }\n        });\n      }\n    }\n\n    var origGetStats = RTCPeerConnection.prototype.getStats;\n    RTCPeerConnection.prototype.getStats = function(selector,\n        successCallback, errorCallback) {\n      var self = this;\n      var args = arguments;\n\n      // If selector is a function then we are in the old style stats so just\n      // pass back the original getStats format to avoid breaking old users.\n      if (arguments.length > 0 && typeof selector === 'function') {\n        return origGetStats.apply(this, arguments);\n      }\n\n      // When spec-style getStats is supported, return those when called with\n      // either no arguments or the selector argument is null.\n      if (origGetStats.length === 0 && (arguments.length === 0 ||\n          typeof arguments[0] !== 'function')) {\n        return origGetStats.apply(this, []);\n      }\n\n      var fixChromeStats_ = function(response) {\n        var standardReport = {};\n        var reports = response.result();\n        reports.forEach(function(report) {\n          var standardStats = {\n            id: report.id,\n            timestamp: report.timestamp,\n            type: {\n              localcandidate: 'local-candidate',\n              remotecandidate: 'remote-candidate'\n            }[report.type] || report.type\n          };\n          report.names().forEach(function(name) {\n            standardStats[name] = report.stat(name);\n          });\n          standardReport[standardStats.id] = standardStats;\n        });\n\n        return standardReport;\n      };\n\n      // shim getStats with maplike support\n      var makeMapStats = function(stats) {\n        return new Map(Object.keys(stats).map(function(key) {\n          return[key, stats[key]];\n        }));\n      };\n\n      if (arguments.length >= 2) {\n        var successCallbackWrapper_ = function(response) {\n          args[1](makeMapStats(fixChromeStats_(response)));\n        };\n\n        return origGetStats.apply(this, [successCallbackWrapper_,\n            arguments[0]]);\n      }\n\n      // promise-support\n      return new Promise(function(resolve, reject) {\n        origGetStats.apply(self, [\n          function(response) {\n            resolve(makeMapStats(fixChromeStats_(response)));\n          }, reject]);\n      }).then(successCallback, errorCallback);\n    };\n\n    // add promise support -- natively available in Chrome 51\n    if (browserDetails.version < 51) {\n      ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n          .forEach(function(method) {\n            var nativeMethod = RTCPeerConnection.prototype[method];\n            RTCPeerConnection.prototype[method] = function() {\n              var args = arguments;\n              var self = this;\n              var promise = new Promise(function(resolve, reject) {\n                nativeMethod.apply(self, [args[0], resolve, reject]);\n              });\n              if (args.length < 2) {\n                return promise;\n              }\n              return promise.then(function() {\n                args[1].apply(null, []);\n              },\n              function(err) {\n                if (args.length >= 3) {\n                  args[2].apply(null, [err]);\n                }\n              });\n            };\n          });\n    }\n\n    // promise support for createOffer and createAnswer. Available (without\n    // bugs) since M52: crbug/619289\n    if (browserDetails.version < 52) {\n      ['createOffer', 'createAnswer'].forEach(function(method) {\n        var nativeMethod = RTCPeerConnection.prototype[method];\n        RTCPeerConnection.prototype[method] = function() {\n          var self = this;\n          if (arguments.length < 1 || (arguments.length === 1 &&\n              typeof arguments[0] === 'object')) {\n            var opts = arguments.length === 1 ? arguments[0] : undefined;\n            return new Promise(function(resolve, reject) {\n              nativeMethod.apply(self, [resolve, reject, opts]);\n            });\n          }\n          return nativeMethod.apply(this, arguments);\n        };\n      });\n    }\n\n    // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          var nativeMethod = RTCPeerConnection.prototype[method];\n          RTCPeerConnection.prototype[method] = function() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                RTCIceCandidate : RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          };\n        });\n\n    // support for addIceCandidate(null or undefined)\n    var nativeAddIceCandidate =\n        RTCPeerConnection.prototype.addIceCandidate;\n    RTCPeerConnection.prototype.addIceCandidate = function() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n  }\n};\n\n\n// Expose public methods.\nmodule.exports = {\n  shimMediaStream: chromeShim.shimMediaStream,\n  shimOnTrack: chromeShim.shimOnTrack,\n  shimGetSendersWithDtmf: chromeShim.shimGetSendersWithDtmf,\n  shimSourceObject: chromeShim.shimSourceObject,\n  shimPeerConnection: chromeShim.shimPeerConnection,\n  shimGetUserMedia: require('./getusermedia')\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/webrtc-adapter/src/js/chrome/chrome_shim.js","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\nvar logging = require('../utils.js').log;\nvar browserDetails = require('../utils.js').browserDetails;\n\n// Expose public methods.\nmodule.exports = function() {\n  var constraintsToChrome_ = function(c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    var cc = {};\n    Object.keys(c).forEach(function(key) {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      var r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      var oldname_ = function(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return (name === 'deviceId') ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        var oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(function(mix) {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  var shimConstraints_ = function(constraints, func) {\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && constraints.audio) {\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && typeof constraints.video === 'object') {\n      // Shim facingMode for mobile, where it defaults to \"user\".\n      var face = constraints.video.facingMode;\n      face = face && ((typeof face === 'object') ? face : {ideal: face});\n      var getSupportedFacingModeLies = browserDetails.version < 59;\n\n      if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                    face.ideal === 'user' || face.ideal === 'environment')) &&\n          !(navigator.mediaDevices.getSupportedConstraints &&\n            navigator.mediaDevices.getSupportedConstraints().facingMode &&\n            !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          // Look for \"back\" in label, or use last cam (typically back cam).\n          return navigator.mediaDevices.enumerateDevices()\n          .then(function(devices) {\n            devices = devices.filter(function(d) {\n              return d.kind === 'videoinput';\n            });\n            var back = devices.find(function(d) {\n              return d.label.toLowerCase().indexOf('back') !== -1;\n            }) || (devices.length && devices[devices.length - 1]);\n            if (back) {\n              constraints.video.deviceId = face.exact ? {exact: back.deviceId} :\n                                                        {ideal: back.deviceId};\n            }\n            constraints.video = constraintsToChrome_(constraints.video);\n            logging('chrome: ' + JSON.stringify(constraints));\n            return func(constraints);\n          });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  var shimError_ = function(e) {\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraintName,\n      toString: function() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  var getUserMedia_ = function(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, function(c) {\n      navigator.webkitGetUserMedia(c, onSuccess, function(e) {\n        onError(shimError_(e));\n      });\n    });\n  };\n\n  navigator.getUserMedia = getUserMedia_;\n\n  // Returns the result of getUserMedia as a Promise.\n  var getUserMediaPromise_ = function(constraints) {\n    return new Promise(function(resolve, reject) {\n      navigator.getUserMedia(constraints, resolve, reject);\n    });\n  };\n\n  if (!navigator.mediaDevices) {\n    navigator.mediaDevices = {\n      getUserMedia: getUserMediaPromise_,\n      enumerateDevices: function() {\n        return new Promise(function(resolve) {\n          var kinds = {audio: 'audioinput', video: 'videoinput'};\n          return MediaStreamTrack.getSources(function(devices) {\n            resolve(devices.map(function(device) {\n              return {label: device.label,\n                      kind: kinds[device.kind],\n                      deviceId: device.id,\n                      groupId: ''};\n            }));\n          });\n        });\n      },\n      getSupportedConstraints: function() {\n        return {\n          deviceId: true, echoCancellation: true, facingMode: true,\n          frameRate: true, height: true, width: true\n        };\n      }\n    };\n  }\n\n  // A shim for getUserMedia method on the mediaDevices object.\n  // TODO(KaptenJansson) remove once implemented in Chrome stable.\n  if (!navigator.mediaDevices.getUserMedia) {\n    navigator.mediaDevices.getUserMedia = function(constraints) {\n      return getUserMediaPromise_(constraints);\n    };\n  } else {\n    // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n    // function which returns a Promise, it does not accept spec-style\n    // constraints.\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(cs) {\n      return shimConstraints_(cs, function(c) {\n        return origGetUserMedia(c).then(function(stream) {\n          if (c.audio && !stream.getAudioTracks().length ||\n              c.video && !stream.getVideoTracks().length) {\n            stream.getTracks().forEach(function(track) {\n              track.stop();\n            });\n            throw new DOMException('', 'NotFoundError');\n          }\n          return stream;\n        }, function(e) {\n          return Promise.reject(shimError_(e));\n        });\n      });\n    };\n  }\n\n  // Dummy devicechange event methods.\n  // TODO(KaptenJansson) remove once implemented in Chrome stable.\n  if (typeof navigator.mediaDevices.addEventListener === 'undefined') {\n    navigator.mediaDevices.addEventListener = function() {\n      logging('Dummy mediaDevices.addEventListener called.');\n    };\n  }\n  if (typeof navigator.mediaDevices.removeEventListener === 'undefined') {\n    navigator.mediaDevices.removeEventListener = function() {\n      logging('Dummy mediaDevices.removeEventListener called.');\n    };\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/webrtc-adapter/src/js/chrome/getusermedia.js","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar SDPUtils = require('sdp');\nvar browserDetails = require('../utils').browserDetails;\n\n// sort tracks such that they follow an a-v-a-v...\n// pattern.\nfunction sortTracks(tracks) {\n  var audioTracks = tracks.filter(function(track) {\n    return track.kind === 'audio';\n  });\n  var videoTracks = tracks.filter(function(track) {\n    return track.kind === 'video';\n  });\n  tracks = [];\n  while (audioTracks.length || videoTracks.length) {\n    if (audioTracks.length) {\n      tracks.push(audioTracks.shift());\n    }\n    if (videoTracks.length) {\n      tracks.push(videoTracks.shift());\n    }\n  }\n  return tracks;\n}\n\n// Edge does not like\n// 1) stun:\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nfunction filterIceServers(iceServers) {\n  var hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(function(server) {\n    if (server && (server.urls || server.url)) {\n      var urls = server.urls || server.url;\n      var isString = typeof urls === 'string';\n      if (isString) {\n        urls = [urls];\n      }\n      urls = urls.filter(function(url) {\n        var validTurn = url.indexOf('turn:') === 0 &&\n            url.indexOf('transport=udp') !== -1 &&\n            url.indexOf('turn:[') === -1 &&\n            !hasTurn;\n\n        if (validTurn) {\n          hasTurn = true;\n          return true;\n        }\n        return url.indexOf('stun:') === 0 &&\n            browserDetails.version >= 14393;\n      });\n\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n    return false;\n  });\n}\n\nvar edgeShim = {\n  shimPeerConnection: function() {\n    if (window.RTCIceGatherer) {\n      // ORTC defines an RTCIceCandidate object but no constructor.\n      // Not implemented in Edge.\n      if (!window.RTCIceCandidate) {\n        window.RTCIceCandidate = function(args) {\n          return args;\n        };\n      }\n      // ORTC does not have a session description object but\n      // other browsers (i.e. Chrome) that will support both PC and ORTC\n      // in the future might have this defined already.\n      if (!window.RTCSessionDescription) {\n        window.RTCSessionDescription = function(args) {\n          return args;\n        };\n      }\n      // this adds an additional event listener to MediaStrackTrack that signals\n      // when a tracks enabled property was changed. Workaround for a bug in\n      // addStream, see below. No longer required in 15025+\n      if (browserDetails.version < 15025) {\n        var origMSTEnabled = Object.getOwnPropertyDescriptor(\n            MediaStreamTrack.prototype, 'enabled');\n        Object.defineProperty(MediaStreamTrack.prototype, 'enabled', {\n          set: function(value) {\n            origMSTEnabled.set.call(this, value);\n            var ev = new Event('enabled');\n            ev.enabled = value;\n            this.dispatchEvent(ev);\n          }\n        });\n      }\n    }\n\n    window.RTCPeerConnection = function(config) {\n      var self = this;\n\n      var _eventTarget = document.createDocumentFragment();\n      ['addEventListener', 'removeEventListener', 'dispatchEvent']\n          .forEach(function(method) {\n            self[method] = _eventTarget[method].bind(_eventTarget);\n          });\n\n      this.onicecandidate = null;\n      this.onaddstream = null;\n      this.ontrack = null;\n      this.onremovestream = null;\n      this.onsignalingstatechange = null;\n      this.oniceconnectionstatechange = null;\n      this.onicegatheringstatechange = null;\n      this.onnegotiationneeded = null;\n      this.ondatachannel = null;\n\n      this.localStreams = [];\n      this.remoteStreams = [];\n      this.getLocalStreams = function() {\n        return self.localStreams;\n      };\n      this.getRemoteStreams = function() {\n        return self.remoteStreams;\n      };\n\n      this.localDescription = new RTCSessionDescription({\n        type: '',\n        sdp: ''\n      });\n      this.remoteDescription = new RTCSessionDescription({\n        type: '',\n        sdp: ''\n      });\n      this.signalingState = 'stable';\n      this.iceConnectionState = 'new';\n      this.iceGatheringState = 'new';\n\n      this.iceOptions = {\n        gatherPolicy: 'all',\n        iceServers: []\n      };\n      if (config && config.iceTransportPolicy) {\n        switch (config.iceTransportPolicy) {\n          case 'all':\n          case 'relay':\n            this.iceOptions.gatherPolicy = config.iceTransportPolicy;\n            break;\n          default:\n            // don't set iceTransportPolicy.\n            break;\n        }\n      }\n      this.usingBundle = config && config.bundlePolicy === 'max-bundle';\n\n      if (config && config.iceServers) {\n        this.iceOptions.iceServers = filterIceServers(config.iceServers);\n      }\n      this._config = config;\n\n      // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\n      // everything that is needed to describe a SDP m-line.\n      this.transceivers = [];\n\n      // since the iceGatherer is currently created in createOffer but we\n      // must not emit candidates until after setLocalDescription we buffer\n      // them in this array.\n      this._localIceCandidatesBuffer = [];\n    };\n\n    window.RTCPeerConnection.prototype._emitGatheringStateChange = function() {\n      var event = new Event('icegatheringstatechange');\n      this.dispatchEvent(event);\n      if (this.onicegatheringstatechange !== null) {\n        this.onicegatheringstatechange(event);\n      }\n    };\n\n    window.RTCPeerConnection.prototype._emitBufferedCandidates = function() {\n      var self = this;\n      var sections = SDPUtils.splitSections(self.localDescription.sdp);\n      // FIXME: need to apply ice candidates in a way which is async but\n      // in-order\n      this._localIceCandidatesBuffer.forEach(function(event) {\n        var end = !event.candidate || Object.keys(event.candidate).length === 0;\n        if (end) {\n          for (var j = 1; j < sections.length; j++) {\n            if (sections[j].indexOf('\\r\\na=end-of-candidates\\r\\n') === -1) {\n              sections[j] += 'a=end-of-candidates\\r\\n';\n            }\n          }\n        } else {\n          sections[event.candidate.sdpMLineIndex + 1] +=\n              'a=' + event.candidate.candidate + '\\r\\n';\n        }\n        self.localDescription.sdp = sections.join('');\n        self.dispatchEvent(event);\n        if (self.onicecandidate !== null) {\n          self.onicecandidate(event);\n        }\n        if (!event.candidate && self.iceGatheringState !== 'complete') {\n          var complete = self.transceivers.every(function(transceiver) {\n            return transceiver.iceGatherer &&\n                transceiver.iceGatherer.state === 'completed';\n          });\n          if (complete && self.iceGatheringStateChange !== 'complete') {\n            self.iceGatheringState = 'complete';\n            self._emitGatheringStateChange();\n          }\n        }\n      });\n      this._localIceCandidatesBuffer = [];\n    };\n\n    window.RTCPeerConnection.prototype.getConfiguration = function() {\n      return this._config;\n    };\n\n    window.RTCPeerConnection.prototype.addStream = function(stream) {\n      if (browserDetails.version >= 15025) {\n        this.localStreams.push(stream);\n      } else {\n        // Clone is necessary for local demos mostly, attaching directly\n        // to two different senders does not work (build 10547).\n        // Fixed in 15025 (or earlier)\n        var clonedStream = stream.clone();\n        stream.getTracks().forEach(function(track, idx) {\n          var clonedTrack = clonedStream.getTracks()[idx];\n          track.addEventListener('enabled', function(event) {\n            clonedTrack.enabled = event.enabled;\n          });\n        });\n        this.localStreams.push(clonedStream);\n      }\n      this._maybeFireNegotiationNeeded();\n    };\n\n    window.RTCPeerConnection.prototype.removeStream = function(stream) {\n      var idx = this.localStreams.indexOf(stream);\n      if (idx > -1) {\n        this.localStreams.splice(idx, 1);\n        this._maybeFireNegotiationNeeded();\n      }\n    };\n\n    window.RTCPeerConnection.prototype.getSenders = function() {\n      return this.transceivers.filter(function(transceiver) {\n        return !!transceiver.rtpSender;\n      })\n      .map(function(transceiver) {\n        return transceiver.rtpSender;\n      });\n    };\n\n    window.RTCPeerConnection.prototype.getReceivers = function() {\n      return this.transceivers.filter(function(transceiver) {\n        return !!transceiver.rtpReceiver;\n      })\n      .map(function(transceiver) {\n        return transceiver.rtpReceiver;\n      });\n    };\n\n    // Determines the intersection of local and remote capabilities.\n    window.RTCPeerConnection.prototype._getCommonCapabilities =\n        function(localCapabilities, remoteCapabilities) {\n          var commonCapabilities = {\n            codecs: [],\n            headerExtensions: [],\n            fecMechanisms: []\n          };\n\n          var findCodecByPayloadType = function(pt, codecs) {\n            pt = parseInt(pt, 10);\n            for (var i = 0; i < codecs.length; i++) {\n              if (codecs[i].payloadType === pt ||\n                  codecs[i].preferredPayloadType === pt) {\n                return codecs[i];\n              }\n            }\n          };\n\n          var rtxCapabilityMatches = function(lRtx, rRtx, lCodecs, rCodecs) {\n            var lCodec = findCodecByPayloadType(lRtx.parameters.apt, lCodecs);\n            var rCodec = findCodecByPayloadType(rRtx.parameters.apt, rCodecs);\n            return lCodec && rCodec &&\n                lCodec.name.toLowerCase() === rCodec.name.toLowerCase();\n          };\n\n          localCapabilities.codecs.forEach(function(lCodec) {\n            for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\n              var rCodec = remoteCapabilities.codecs[i];\n              if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&\n                  lCodec.clockRate === rCodec.clockRate) {\n                if (lCodec.name.toLowerCase() === 'rtx' &&\n                    lCodec.parameters && rCodec.parameters.apt) {\n                  // for RTX we need to find the local rtx that has a apt\n                  // which points to the same local codec as the remote one.\n                  if (!rtxCapabilityMatches(lCodec, rCodec,\n                      localCapabilities.codecs, remoteCapabilities.codecs)) {\n                    continue;\n                  }\n                }\n                rCodec = JSON.parse(JSON.stringify(rCodec)); // deepcopy\n                // number of channels is the highest common number of channels\n                rCodec.numChannels = Math.min(lCodec.numChannels,\n                    rCodec.numChannels);\n                // push rCodec so we reply with offerer payload type\n                commonCapabilities.codecs.push(rCodec);\n\n                // determine common feedback mechanisms\n                rCodec.rtcpFeedback = rCodec.rtcpFeedback.filter(function(fb) {\n                  for (var j = 0; j < lCodec.rtcpFeedback.length; j++) {\n                    if (lCodec.rtcpFeedback[j].type === fb.type &&\n                        lCodec.rtcpFeedback[j].parameter === fb.parameter) {\n                      return true;\n                    }\n                  }\n                  return false;\n                });\n                // FIXME: also need to determine .parameters\n                //  see https://github.com/openpeer/ortc/issues/569\n                break;\n              }\n            }\n          });\n\n          localCapabilities.headerExtensions\n              .forEach(function(lHeaderExtension) {\n                for (var i = 0; i < remoteCapabilities.headerExtensions.length;\n                     i++) {\n                  var rHeaderExtension = remoteCapabilities.headerExtensions[i];\n                  if (lHeaderExtension.uri === rHeaderExtension.uri) {\n                    commonCapabilities.headerExtensions.push(rHeaderExtension);\n                    break;\n                  }\n                }\n              });\n\n          // FIXME: fecMechanisms\n          return commonCapabilities;\n        };\n\n    // Create ICE gatherer, ICE transport and DTLS transport.\n    window.RTCPeerConnection.prototype._createIceAndDtlsTransports =\n        function(mid, sdpMLineIndex) {\n          var self = this;\n          var iceGatherer = new RTCIceGatherer(self.iceOptions);\n          var iceTransport = new RTCIceTransport(iceGatherer);\n          iceGatherer.onlocalcandidate = function(evt) {\n            var event = new Event('icecandidate');\n            event.candidate = {sdpMid: mid, sdpMLineIndex: sdpMLineIndex};\n\n            var cand = evt.candidate;\n            var end = !cand || Object.keys(cand).length === 0;\n            // Edge emits an empty object for RTCIceCandidateComplete‥\n            if (end) {\n              // polyfill since RTCIceGatherer.state is not implemented in\n              // Edge 10547 yet.\n              if (iceGatherer.state === undefined) {\n                iceGatherer.state = 'completed';\n              }\n            } else {\n              // RTCIceCandidate doesn't have a component, needs to be added\n              cand.component = iceTransport.component === 'RTCP' ? 2 : 1;\n              event.candidate.candidate = SDPUtils.writeCandidate(cand);\n            }\n\n            // update local description.\n            var sections = SDPUtils.splitSections(self.localDescription.sdp);\n            if (!end) {\n              sections[event.candidate.sdpMLineIndex + 1] +=\n                  'a=' + event.candidate.candidate + '\\r\\n';\n            } else {\n              sections[event.candidate.sdpMLineIndex + 1] +=\n                  'a=end-of-candidates\\r\\n';\n            }\n            self.localDescription.sdp = sections.join('');\n            var transceivers = self._pendingOffer ? self._pendingOffer :\n                self.transceivers;\n            var complete = transceivers.every(function(transceiver) {\n              return transceiver.iceGatherer &&\n                  transceiver.iceGatherer.state === 'completed';\n            });\n\n            // Emit candidate if localDescription is set.\n            // Also emits null candidate when all gatherers are complete.\n            switch (self.iceGatheringState) {\n              case 'new':\n                if (!end) {\n                  self._localIceCandidatesBuffer.push(event);\n                }\n                if (end && complete) {\n                  self._localIceCandidatesBuffer.push(\n                      new Event('icecandidate'));\n                }\n                break;\n              case 'gathering':\n                self._emitBufferedCandidates();\n                if (!end) {\n                  self.dispatchEvent(event);\n                  if (self.onicecandidate !== null) {\n                    self.onicecandidate(event);\n                  }\n                }\n                if (complete) {\n                  self.dispatchEvent(new Event('icecandidate'));\n                  if (self.onicecandidate !== null) {\n                    self.onicecandidate(new Event('icecandidate'));\n                  }\n                  self.iceGatheringState = 'complete';\n                  self._emitGatheringStateChange();\n                }\n                break;\n              case 'complete':\n                // should not happen... currently!\n                break;\n              default: // no-op.\n                break;\n            }\n          };\n          iceTransport.onicestatechange = function() {\n            self._updateConnectionState();\n          };\n\n          var dtlsTransport = new RTCDtlsTransport(iceTransport);\n          dtlsTransport.ondtlsstatechange = function() {\n            self._updateConnectionState();\n          };\n          dtlsTransport.onerror = function() {\n            // onerror does not set state to failed by itself.\n            dtlsTransport.state = 'failed';\n            self._updateConnectionState();\n          };\n\n          return {\n            iceGatherer: iceGatherer,\n            iceTransport: iceTransport,\n            dtlsTransport: dtlsTransport\n          };\n        };\n\n    // Start the RTP Sender and Receiver for a transceiver.\n    window.RTCPeerConnection.prototype._transceive = function(transceiver,\n        send, recv) {\n      var params = this._getCommonCapabilities(transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n      if (send && transceiver.rtpSender) {\n        params.encodings = transceiver.sendEncodingParameters;\n        params.rtcp = {\n          cname: SDPUtils.localCName\n        };\n        if (transceiver.recvEncodingParameters.length) {\n          params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\n        }\n        transceiver.rtpSender.send(params);\n      }\n      if (recv && transceiver.rtpReceiver) {\n        // remove RTX field in Edge 14942\n        if (transceiver.kind === 'video'\n            && transceiver.recvEncodingParameters\n            && browserDetails.version < 15019) {\n          transceiver.recvEncodingParameters.forEach(function(p) {\n            delete p.rtx;\n          });\n        }\n        params.encodings = transceiver.recvEncodingParameters;\n        params.rtcp = {\n          cname: transceiver.cname\n        };\n        if (transceiver.sendEncodingParameters.length) {\n          params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\n        }\n        transceiver.rtpReceiver.receive(params);\n      }\n    };\n\n    window.RTCPeerConnection.prototype.setLocalDescription =\n        function(description) {\n          var self = this;\n          var sections;\n          var sessionpart;\n          if (description.type === 'offer') {\n            // FIXME: What was the purpose of this empty if statement?\n            // if (!this._pendingOffer) {\n            // } else {\n            if (this._pendingOffer) {\n              // VERY limited support for SDP munging. Limited to:\n              // * changing the order of codecs\n              sections = SDPUtils.splitSections(description.sdp);\n              sessionpart = sections.shift();\n              sections.forEach(function(mediaSection, sdpMLineIndex) {\n                var caps = SDPUtils.parseRtpParameters(mediaSection);\n                self._pendingOffer[sdpMLineIndex].localCapabilities = caps;\n              });\n              this.transceivers = this._pendingOffer;\n              delete this._pendingOffer;\n            }\n          } else if (description.type === 'answer') {\n            sections = SDPUtils.splitSections(self.remoteDescription.sdp);\n            sessionpart = sections.shift();\n            var isIceLite = SDPUtils.matchPrefix(sessionpart,\n                'a=ice-lite').length > 0;\n            sections.forEach(function(mediaSection, sdpMLineIndex) {\n              var transceiver = self.transceivers[sdpMLineIndex];\n              var iceGatherer = transceiver.iceGatherer;\n              var iceTransport = transceiver.iceTransport;\n              var dtlsTransport = transceiver.dtlsTransport;\n              var localCapabilities = transceiver.localCapabilities;\n              var remoteCapabilities = transceiver.remoteCapabilities;\n\n              var rejected = mediaSection.split('\\n', 1)[0]\n                  .split(' ', 2)[1] === '0';\n\n              if (!rejected && !transceiver.isDatachannel) {\n                var remoteIceParameters = SDPUtils.getIceParameters(\n                    mediaSection, sessionpart);\n                var remoteDtlsParameters = SDPUtils.getDtlsParameters(\n                    mediaSection, sessionpart);\n                if (isIceLite) {\n                  remoteDtlsParameters.role = 'server';\n                }\n\n                if (!self.usingBundle || sdpMLineIndex === 0) {\n                  iceTransport.start(iceGatherer, remoteIceParameters,\n                      isIceLite ? 'controlling' : 'controlled');\n                  dtlsTransport.start(remoteDtlsParameters);\n                }\n\n                // Calculate intersection of capabilities.\n                var params = self._getCommonCapabilities(localCapabilities,\n                    remoteCapabilities);\n\n                // Start the RTCRtpSender. The RTCRtpReceiver for this\n                // transceiver has already been started in setRemoteDescription.\n                self._transceive(transceiver,\n                    params.codecs.length > 0,\n                    false);\n              }\n            });\n          }\n\n          this.localDescription = {\n            type: description.type,\n            sdp: description.sdp\n          };\n          switch (description.type) {\n            case 'offer':\n              this._updateSignalingState('have-local-offer');\n              break;\n            case 'answer':\n              this._updateSignalingState('stable');\n              break;\n            default:\n              throw new TypeError('unsupported type \"' + description.type +\n                  '\"');\n          }\n\n          // If a success callback was provided, emit ICE candidates after it\n          // has been executed. Otherwise, emit callback after the Promise is\n          // resolved.\n          var hasCallback = arguments.length > 1 &&\n            typeof arguments[1] === 'function';\n          if (hasCallback) {\n            var cb = arguments[1];\n            window.setTimeout(function() {\n              cb();\n              if (self.iceGatheringState === 'new') {\n                self.iceGatheringState = 'gathering';\n                self._emitGatheringStateChange();\n              }\n              self._emitBufferedCandidates();\n            }, 0);\n          }\n          var p = Promise.resolve();\n          p.then(function() {\n            if (!hasCallback) {\n              if (self.iceGatheringState === 'new') {\n                self.iceGatheringState = 'gathering';\n                self._emitGatheringStateChange();\n              }\n              // Usually candidates will be emitted earlier.\n              window.setTimeout(self._emitBufferedCandidates.bind(self), 500);\n            }\n          });\n          return p;\n        };\n\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n        function(description) {\n          var self = this;\n          var stream = new MediaStream();\n          var receiverList = [];\n          var sections = SDPUtils.splitSections(description.sdp);\n          var sessionpart = sections.shift();\n          var isIceLite = SDPUtils.matchPrefix(sessionpart,\n              'a=ice-lite').length > 0;\n          this.usingBundle = SDPUtils.matchPrefix(sessionpart,\n              'a=group:BUNDLE ').length > 0;\n          sections.forEach(function(mediaSection, sdpMLineIndex) {\n            var lines = SDPUtils.splitLines(mediaSection);\n            var mline = lines[0].substr(2).split(' ');\n            var kind = mline[0];\n            var rejected = mline[1] === '0';\n            var direction = SDPUtils.getDirection(mediaSection, sessionpart);\n\n            var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:');\n            if (mid.length) {\n              mid = mid[0].substr(6);\n            } else {\n              mid = SDPUtils.generateIdentifier();\n            }\n\n            // Reject datachannels which are not implemented yet.\n            if (kind === 'application' && mline[2] === 'DTLS/SCTP') {\n              self.transceivers[sdpMLineIndex] = {\n                mid: mid,\n                isDatachannel: true\n              };\n              return;\n            }\n\n            var transceiver;\n            var iceGatherer;\n            var iceTransport;\n            var dtlsTransport;\n            var rtpSender;\n            var rtpReceiver;\n            var sendEncodingParameters;\n            var recvEncodingParameters;\n            var localCapabilities;\n\n            var track;\n            // FIXME: ensure the mediaSection has rtcp-mux set.\n            var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\n            var remoteIceParameters;\n            var remoteDtlsParameters;\n            if (!rejected) {\n              remoteIceParameters = SDPUtils.getIceParameters(mediaSection,\n                  sessionpart);\n              remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection,\n                  sessionpart);\n              remoteDtlsParameters.role = 'client';\n            }\n            recvEncodingParameters =\n                SDPUtils.parseRtpEncodingParameters(mediaSection);\n\n            var cname;\n            // Gets the first SSRC. Note that with RTX there might be multiple\n            // SSRCs.\n            var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n                .map(function(line) {\n                  return SDPUtils.parseSsrcMedia(line);\n                })\n                .filter(function(obj) {\n                  return obj.attribute === 'cname';\n                })[0];\n            if (remoteSsrc) {\n              cname = remoteSsrc.value;\n            }\n\n            var isComplete = SDPUtils.matchPrefix(mediaSection,\n                'a=end-of-candidates', sessionpart).length > 0;\n            var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\n                .map(function(cand) {\n                  return SDPUtils.parseCandidate(cand);\n                })\n                .filter(function(cand) {\n                  return cand.component === '1';\n                });\n            if (description.type === 'offer' && !rejected) {\n              var transports = self.usingBundle && sdpMLineIndex > 0 ? {\n                iceGatherer: self.transceivers[0].iceGatherer,\n                iceTransport: self.transceivers[0].iceTransport,\n                dtlsTransport: self.transceivers[0].dtlsTransport\n              } : self._createIceAndDtlsTransports(mid, sdpMLineIndex);\n\n              if (isComplete && (!self.usingBundle || sdpMLineIndex === 0)) {\n                transports.iceTransport.setRemoteCandidates(cands);\n              }\n\n              localCapabilities = RTCRtpReceiver.getCapabilities(kind);\n\n              // filter RTX until additional stuff needed for RTX is implemented\n              // in adapter.js\n              if (browserDetails.version < 15019) {\n                localCapabilities.codecs = localCapabilities.codecs.filter(\n                    function(codec) {\n                      return codec.name !== 'rtx';\n                    });\n              }\n\n              sendEncodingParameters = [{\n                ssrc: (2 * sdpMLineIndex + 2) * 1001\n              }];\n\n              if (direction === 'sendrecv' || direction === 'sendonly') {\n                rtpReceiver = new RTCRtpReceiver(transports.dtlsTransport,\n                    kind);\n\n                track = rtpReceiver.track;\n                receiverList.push([track, rtpReceiver]);\n                // FIXME: not correct when there are multiple streams but that\n                // is not currently supported in this shim.\n                stream.addTrack(track);\n              }\n\n              // FIXME: look at direction.\n              if (self.localStreams.length > 0 &&\n                  self.localStreams[0].getTracks().length >= sdpMLineIndex) {\n                var localTrack;\n                if (kind === 'audio') {\n                  localTrack = self.localStreams[0].getAudioTracks()[0];\n                } else if (kind === 'video') {\n                  localTrack = self.localStreams[0].getVideoTracks()[0];\n                }\n                if (localTrack) {\n                  // add RTX\n                  if (browserDetails.version >= 15019 && kind === 'video') {\n                    sendEncodingParameters[0].rtx = {\n                      ssrc: (2 * sdpMLineIndex + 2) * 1001 + 1\n                    };\n                  }\n                  rtpSender = new RTCRtpSender(localTrack,\n                      transports.dtlsTransport);\n                }\n              }\n\n              self.transceivers[sdpMLineIndex] = {\n                iceGatherer: transports.iceGatherer,\n                iceTransport: transports.iceTransport,\n                dtlsTransport: transports.dtlsTransport,\n                localCapabilities: localCapabilities,\n                remoteCapabilities: remoteCapabilities,\n                rtpSender: rtpSender,\n                rtpReceiver: rtpReceiver,\n                kind: kind,\n                mid: mid,\n                cname: cname,\n                sendEncodingParameters: sendEncodingParameters,\n                recvEncodingParameters: recvEncodingParameters\n              };\n              // Start the RTCRtpReceiver now. The RTPSender is started in\n              // setLocalDescription.\n              self._transceive(self.transceivers[sdpMLineIndex],\n                  false,\n                  direction === 'sendrecv' || direction === 'sendonly');\n            } else if (description.type === 'answer' && !rejected) {\n              transceiver = self.transceivers[sdpMLineIndex];\n              iceGatherer = transceiver.iceGatherer;\n              iceTransport = transceiver.iceTransport;\n              dtlsTransport = transceiver.dtlsTransport;\n              rtpSender = transceiver.rtpSender;\n              rtpReceiver = transceiver.rtpReceiver;\n              sendEncodingParameters = transceiver.sendEncodingParameters;\n              localCapabilities = transceiver.localCapabilities;\n\n              self.transceivers[sdpMLineIndex].recvEncodingParameters =\n                  recvEncodingParameters;\n              self.transceivers[sdpMLineIndex].remoteCapabilities =\n                  remoteCapabilities;\n              self.transceivers[sdpMLineIndex].cname = cname;\n\n              if ((isIceLite || isComplete) && cands.length) {\n                iceTransport.setRemoteCandidates(cands);\n              }\n              if (!self.usingBundle || sdpMLineIndex === 0) {\n                iceTransport.start(iceGatherer, remoteIceParameters,\n                    'controlling');\n                dtlsTransport.start(remoteDtlsParameters);\n              }\n\n              self._transceive(transceiver,\n                  direction === 'sendrecv' || direction === 'recvonly',\n                  direction === 'sendrecv' || direction === 'sendonly');\n\n              if (rtpReceiver &&\n                  (direction === 'sendrecv' || direction === 'sendonly')) {\n                track = rtpReceiver.track;\n                receiverList.push([track, rtpReceiver]);\n                stream.addTrack(track);\n              } else {\n                // FIXME: actually the receiver should be created later.\n                delete transceiver.rtpReceiver;\n              }\n            }\n          });\n\n          this.remoteDescription = {\n            type: description.type,\n            sdp: description.sdp\n          };\n          switch (description.type) {\n            case 'offer':\n              this._updateSignalingState('have-remote-offer');\n              break;\n            case 'answer':\n              this._updateSignalingState('stable');\n              break;\n            default:\n              throw new TypeError('unsupported type \"' + description.type +\n                  '\"');\n          }\n          if (stream.getTracks().length) {\n            self.remoteStreams.push(stream);\n            window.setTimeout(function() {\n              var event = new Event('addstream');\n              event.stream = stream;\n              self.dispatchEvent(event);\n              if (self.onaddstream !== null) {\n                window.setTimeout(function() {\n                  self.onaddstream(event);\n                }, 0);\n              }\n\n              receiverList.forEach(function(item) {\n                var track = item[0];\n                var receiver = item[1];\n                var trackEvent = new Event('track');\n                trackEvent.track = track;\n                trackEvent.receiver = receiver;\n                trackEvent.streams = [stream];\n                self.dispatchEvent(trackEvent);\n                if (self.ontrack !== null) {\n                  window.setTimeout(function() {\n                    self.ontrack(trackEvent);\n                  }, 0);\n                }\n              });\n            }, 0);\n          }\n          if (arguments.length > 1 && typeof arguments[1] === 'function') {\n            window.setTimeout(arguments[1], 0);\n          }\n          return Promise.resolve();\n        };\n\n    window.RTCPeerConnection.prototype.close = function() {\n      this.transceivers.forEach(function(transceiver) {\n        /* not yet\n        if (transceiver.iceGatherer) {\n          transceiver.iceGatherer.close();\n        }\n        */\n        if (transceiver.iceTransport) {\n          transceiver.iceTransport.stop();\n        }\n        if (transceiver.dtlsTransport) {\n          transceiver.dtlsTransport.stop();\n        }\n        if (transceiver.rtpSender) {\n          transceiver.rtpSender.stop();\n        }\n        if (transceiver.rtpReceiver) {\n          transceiver.rtpReceiver.stop();\n        }\n      });\n      // FIXME: clean up tracks, local streams, remote streams, etc\n      this._updateSignalingState('closed');\n    };\n\n    // Update the signaling state.\n    window.RTCPeerConnection.prototype._updateSignalingState =\n        function(newState) {\n          this.signalingState = newState;\n          var event = new Event('signalingstatechange');\n          this.dispatchEvent(event);\n          if (this.onsignalingstatechange !== null) {\n            this.onsignalingstatechange(event);\n          }\n        };\n\n    // Determine whether to fire the negotiationneeded event.\n    window.RTCPeerConnection.prototype._maybeFireNegotiationNeeded =\n        function() {\n          // Fire away (for now).\n          var event = new Event('negotiationneeded');\n          this.dispatchEvent(event);\n          if (this.onnegotiationneeded !== null) {\n            this.onnegotiationneeded(event);\n          }\n        };\n\n    // Update the connection state.\n    window.RTCPeerConnection.prototype._updateConnectionState = function() {\n      var self = this;\n      var newState;\n      var states = {\n        'new': 0,\n        closed: 0,\n        connecting: 0,\n        checking: 0,\n        connected: 0,\n        completed: 0,\n        failed: 0\n      };\n      this.transceivers.forEach(function(transceiver) {\n        states[transceiver.iceTransport.state]++;\n        states[transceiver.dtlsTransport.state]++;\n      });\n      // ICETransport.completed and connected are the same for this purpose.\n      states.connected += states.completed;\n\n      newState = 'new';\n      if (states.failed > 0) {\n        newState = 'failed';\n      } else if (states.connecting > 0 || states.checking > 0) {\n        newState = 'connecting';\n      } else if (states.disconnected > 0) {\n        newState = 'disconnected';\n      } else if (states.new > 0) {\n        newState = 'new';\n      } else if (states.connected > 0 || states.completed > 0) {\n        newState = 'connected';\n      }\n\n      if (newState !== self.iceConnectionState) {\n        self.iceConnectionState = newState;\n        var event = new Event('iceconnectionstatechange');\n        this.dispatchEvent(event);\n        if (this.oniceconnectionstatechange !== null) {\n          this.oniceconnectionstatechange(event);\n        }\n      }\n    };\n\n    window.RTCPeerConnection.prototype.createOffer = function() {\n      var self = this;\n      if (this._pendingOffer) {\n        throw new Error('createOffer called while there is a pending offer.');\n      }\n      var offerOptions;\n      if (arguments.length === 1 && typeof arguments[0] !== 'function') {\n        offerOptions = arguments[0];\n      } else if (arguments.length === 3) {\n        offerOptions = arguments[2];\n      }\n\n      var tracks = [];\n      var numAudioTracks = 0;\n      var numVideoTracks = 0;\n      // Default to sendrecv.\n      if (this.localStreams.length) {\n        numAudioTracks = this.localStreams[0].getAudioTracks().length;\n        numVideoTracks = this.localStreams[0].getVideoTracks().length;\n      }\n      // Determine number of audio and video tracks we need to send/recv.\n      if (offerOptions) {\n        // Reject Chrome legacy constraints.\n        if (offerOptions.mandatory || offerOptions.optional) {\n          throw new TypeError(\n              'Legacy mandatory/optional constraints not supported.');\n        }\n        if (offerOptions.offerToReceiveAudio !== undefined) {\n          numAudioTracks = offerOptions.offerToReceiveAudio;\n        }\n        if (offerOptions.offerToReceiveVideo !== undefined) {\n          numVideoTracks = offerOptions.offerToReceiveVideo;\n        }\n      }\n      if (this.localStreams.length) {\n        // Push local streams.\n        this.localStreams[0].getTracks().forEach(function(track) {\n          tracks.push({\n            kind: track.kind,\n            track: track,\n            wantReceive: track.kind === 'audio' ?\n                numAudioTracks > 0 : numVideoTracks > 0\n          });\n          if (track.kind === 'audio') {\n            numAudioTracks--;\n          } else if (track.kind === 'video') {\n            numVideoTracks--;\n          }\n        });\n      }\n      // Create M-lines for recvonly streams.\n      while (numAudioTracks > 0 || numVideoTracks > 0) {\n        if (numAudioTracks > 0) {\n          tracks.push({\n            kind: 'audio',\n            wantReceive: true\n          });\n          numAudioTracks--;\n        }\n        if (numVideoTracks > 0) {\n          tracks.push({\n            kind: 'video',\n            wantReceive: true\n          });\n          numVideoTracks--;\n        }\n      }\n      // reorder tracks\n      tracks = sortTracks(tracks);\n\n      var sdp = SDPUtils.writeSessionBoilerplate();\n      var transceivers = [];\n      tracks.forEach(function(mline, sdpMLineIndex) {\n        // For each track, create an ice gatherer, ice transport,\n        // dtls transport, potentially rtpsender and rtpreceiver.\n        var track = mline.track;\n        var kind = mline.kind;\n        var mid = SDPUtils.generateIdentifier();\n\n        var transports = self.usingBundle && sdpMLineIndex > 0 ? {\n          iceGatherer: transceivers[0].iceGatherer,\n          iceTransport: transceivers[0].iceTransport,\n          dtlsTransport: transceivers[0].dtlsTransport\n        } : self._createIceAndDtlsTransports(mid, sdpMLineIndex);\n\n        var localCapabilities = RTCRtpSender.getCapabilities(kind);\n        // filter RTX until additional stuff needed for RTX is implemented\n        // in adapter.js\n        if (browserDetails.version < 15019) {\n          localCapabilities.codecs = localCapabilities.codecs.filter(\n              function(codec) {\n                return codec.name !== 'rtx';\n              });\n        }\n        localCapabilities.codecs.forEach(function(codec) {\n          // work around https://bugs.chromium.org/p/webrtc/issues/detail?id=6552\n          // by adding level-asymmetry-allowed=1\n          if (codec.name === 'H264' &&\n              codec.parameters['level-asymmetry-allowed'] === undefined) {\n            codec.parameters['level-asymmetry-allowed'] = '1';\n          }\n        });\n\n        var rtpSender;\n        var rtpReceiver;\n\n        // generate an ssrc now, to be used later in rtpSender.send\n        var sendEncodingParameters = [{\n          ssrc: (2 * sdpMLineIndex + 1) * 1001\n        }];\n        if (track) {\n          // add RTX\n          if (browserDetails.version >= 15019 && kind === 'video') {\n            sendEncodingParameters[0].rtx = {\n              ssrc: (2 * sdpMLineIndex + 1) * 1001 + 1\n            };\n          }\n          rtpSender = new RTCRtpSender(track, transports.dtlsTransport);\n        }\n\n        if (mline.wantReceive) {\n          rtpReceiver = new RTCRtpReceiver(transports.dtlsTransport, kind);\n        }\n\n        transceivers[sdpMLineIndex] = {\n          iceGatherer: transports.iceGatherer,\n          iceTransport: transports.iceTransport,\n          dtlsTransport: transports.dtlsTransport,\n          localCapabilities: localCapabilities,\n          remoteCapabilities: null,\n          rtpSender: rtpSender,\n          rtpReceiver: rtpReceiver,\n          kind: kind,\n          mid: mid,\n          sendEncodingParameters: sendEncodingParameters,\n          recvEncodingParameters: null\n        };\n      });\n      if (this.usingBundle) {\n        sdp += 'a=group:BUNDLE ' + transceivers.map(function(t) {\n          return t.mid;\n        }).join(' ') + '\\r\\n';\n      }\n      tracks.forEach(function(mline, sdpMLineIndex) {\n        var transceiver = transceivers[sdpMLineIndex];\n        sdp += SDPUtils.writeMediaSection(transceiver,\n            transceiver.localCapabilities, 'offer', self.localStreams[0]);\n      });\n\n      this._pendingOffer = transceivers;\n      var desc = new RTCSessionDescription({\n        type: 'offer',\n        sdp: sdp\n      });\n      if (arguments.length && typeof arguments[0] === 'function') {\n        window.setTimeout(arguments[0], 0, desc);\n      }\n      return Promise.resolve(desc);\n    };\n\n    window.RTCPeerConnection.prototype.createAnswer = function() {\n      var self = this;\n\n      var sdp = SDPUtils.writeSessionBoilerplate();\n      if (this.usingBundle) {\n        sdp += 'a=group:BUNDLE ' + this.transceivers.map(function(t) {\n          return t.mid;\n        }).join(' ') + '\\r\\n';\n      }\n      this.transceivers.forEach(function(transceiver) {\n        if (transceiver.isDatachannel) {\n          sdp += 'm=application 0 DTLS/SCTP 5000\\r\\n' +\n              'c=IN IP4 0.0.0.0\\r\\n' +\n              'a=mid:' + transceiver.mid + '\\r\\n';\n          return;\n        }\n        // Calculate intersection of capabilities.\n        var commonCapabilities = self._getCommonCapabilities(\n            transceiver.localCapabilities,\n            transceiver.remoteCapabilities);\n\n        sdp += SDPUtils.writeMediaSection(transceiver, commonCapabilities,\n            'answer', self.localStreams[0]);\n      });\n\n      var desc = new RTCSessionDescription({\n        type: 'answer',\n        sdp: sdp\n      });\n      if (arguments.length && typeof arguments[0] === 'function') {\n        window.setTimeout(arguments[0], 0, desc);\n      }\n      return Promise.resolve(desc);\n    };\n\n    window.RTCPeerConnection.prototype.addIceCandidate = function(candidate) {\n      if (!candidate) {\n        for (var j = 0; j < this.transceivers.length; j++) {\n          this.transceivers[j].iceTransport.addRemoteCandidate({});\n          if (this.usingBundle) {\n            return Promise.resolve();\n          }\n        }\n      } else {\n        var mLineIndex = candidate.sdpMLineIndex;\n        if (candidate.sdpMid) {\n          for (var i = 0; i < this.transceivers.length; i++) {\n            if (this.transceivers[i].mid === candidate.sdpMid) {\n              mLineIndex = i;\n              break;\n            }\n          }\n        }\n        var transceiver = this.transceivers[mLineIndex];\n        if (transceiver) {\n          var cand = Object.keys(candidate.candidate).length > 0 ?\n              SDPUtils.parseCandidate(candidate.candidate) : {};\n          // Ignore Chrome's invalid candidates since Edge does not like them.\n          if (cand.protocol === 'tcp' && (cand.port === 0 || cand.port === 9)) {\n            return Promise.resolve();\n          }\n          // Ignore RTCP candidates, we assume RTCP-MUX.\n          if (cand.component !== '1') {\n            return Promise.resolve();\n          }\n          transceiver.iceTransport.addRemoteCandidate(cand);\n\n          // update the remoteDescription.\n          var sections = SDPUtils.splitSections(this.remoteDescription.sdp);\n          sections[mLineIndex + 1] += (cand.type ? candidate.candidate.trim()\n              : 'a=end-of-candidates') + '\\r\\n';\n          this.remoteDescription.sdp = sections.join('');\n        }\n      }\n      if (arguments.length > 1 && typeof arguments[1] === 'function') {\n        window.setTimeout(arguments[1], 0);\n      }\n      return Promise.resolve();\n    };\n\n    window.RTCPeerConnection.prototype.getStats = function() {\n      var promises = [];\n      this.transceivers.forEach(function(transceiver) {\n        ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport',\n            'dtlsTransport'].forEach(function(method) {\n              if (transceiver[method]) {\n                promises.push(transceiver[method].getStats());\n              }\n            });\n      });\n      var cb = arguments.length > 1 && typeof arguments[1] === 'function' &&\n          arguments[1];\n      var fixStatsType = function(stat) {\n        return {\n          inboundrtp: 'inbound-rtp',\n          outboundrtp: 'outbound-rtp',\n          candidatepair: 'candidate-pair',\n          localcandidate: 'local-candidate',\n          remotecandidate: 'remote-candidate'\n        }[stat.type] || stat.type;\n      };\n      return new Promise(function(resolve) {\n        // shim getStats with maplike support\n        var results = new Map();\n        Promise.all(promises).then(function(res) {\n          res.forEach(function(result) {\n            Object.keys(result).forEach(function(id) {\n              result[id].type = fixStatsType(result[id]);\n              results.set(id, result[id]);\n            });\n          });\n          if (cb) {\n            window.setTimeout(cb, 0, results);\n          }\n          resolve(results);\n        });\n      });\n    };\n  }\n};\n\n// Expose public methods.\nmodule.exports = {\n  shimPeerConnection: edgeShim.shimPeerConnection,\n  shimGetUserMedia: require('./getusermedia')\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/webrtc-adapter/src/js/edge/edge_shim.js","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\n// Expose public methods.\nmodule.exports = function() {\n  var shimError_ = function(e) {\n    return {\n      name: {PermissionDeniedError: 'NotAllowedError'}[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint,\n      toString: function() {\n        return this.name;\n      }\n    };\n  };\n\n  // getUserMedia error shim.\n  var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n  navigator.mediaDevices.getUserMedia = function(c) {\n    return origGetUserMedia(c).catch(function(e) {\n      return Promise.reject(shimError_(e));\n    });\n  };\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/webrtc-adapter/src/js/edge/getusermedia.js","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar browserDetails = require('../utils').browserDetails;\n\nvar firefoxShim = {\n  shimOnTrack: function() {\n    if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n        window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n        get: function() {\n          return this._ontrack;\n        },\n        set: function(f) {\n          if (this._ontrack) {\n            this.removeEventListener('track', this._ontrack);\n            this.removeEventListener('addstream', this._ontrackpoly);\n          }\n          this.addEventListener('track', this._ontrack = f);\n          this.addEventListener('addstream', this._ontrackpoly = function(e) {\n            e.stream.getTracks().forEach(function(track) {\n              var event = new Event('track');\n              event.track = track;\n              event.receiver = {track: track};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            }.bind(this));\n          }.bind(this));\n        }\n      });\n    }\n  },\n\n  shimSourceObject: function() {\n    // Firefox has supported mozSrcObject since FF22, unprefixed in 42.\n    if (typeof window === 'object') {\n      if (window.HTMLMediaElement &&\n        !('srcObject' in window.HTMLMediaElement.prototype)) {\n        // Shim the srcObject property, once, when HTMLMediaElement is found.\n        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n          get: function() {\n            return this.mozSrcObject;\n          },\n          set: function(stream) {\n            this.mozSrcObject = stream;\n          }\n        });\n      }\n    }\n  },\n\n  shimPeerConnection: function() {\n    if (typeof window !== 'object' || !(window.RTCPeerConnection ||\n        window.mozRTCPeerConnection)) {\n      return; // probably media.peerconnection.enabled=false in about:config\n    }\n    // The RTCPeerConnection object.\n    if (!window.RTCPeerConnection) {\n      window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n        if (browserDetails.version < 38) {\n          // .urls is not supported in FF < 38.\n          // create RTCIceServers with a single url.\n          if (pcConfig && pcConfig.iceServers) {\n            var newIceServers = [];\n            for (var i = 0; i < pcConfig.iceServers.length; i++) {\n              var server = pcConfig.iceServers[i];\n              if (server.hasOwnProperty('urls')) {\n                for (var j = 0; j < server.urls.length; j++) {\n                  var newServer = {\n                    url: server.urls[j]\n                  };\n                  if (server.urls[j].indexOf('turn') === 0) {\n                    newServer.username = server.username;\n                    newServer.credential = server.credential;\n                  }\n                  newIceServers.push(newServer);\n                }\n              } else {\n                newIceServers.push(pcConfig.iceServers[i]);\n              }\n            }\n            pcConfig.iceServers = newIceServers;\n          }\n        }\n        return new mozRTCPeerConnection(pcConfig, pcConstraints);\n      };\n      window.RTCPeerConnection.prototype = mozRTCPeerConnection.prototype;\n\n      // wrap static methods. Currently just generateCertificate.\n      if (mozRTCPeerConnection.generateCertificate) {\n        Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n          get: function() {\n            return mozRTCPeerConnection.generateCertificate;\n          }\n        });\n      }\n\n      window.RTCSessionDescription = mozRTCSessionDescription;\n      window.RTCIceCandidate = mozRTCIceCandidate;\n    }\n\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          var nativeMethod = RTCPeerConnection.prototype[method];\n          RTCPeerConnection.prototype[method] = function() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                RTCIceCandidate : RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          };\n        });\n\n    // support for addIceCandidate(null or undefined)\n    var nativeAddIceCandidate =\n        RTCPeerConnection.prototype.addIceCandidate;\n    RTCPeerConnection.prototype.addIceCandidate = function() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n\n    // shim getStats with maplike support\n    var makeMapStats = function(stats) {\n      var map = new Map();\n      Object.keys(stats).forEach(function(key) {\n        map.set(key, stats[key]);\n        map[key] = stats[key];\n      });\n      return map;\n    };\n\n    var modernStatsTypes = {\n      inboundrtp: 'inbound-rtp',\n      outboundrtp: 'outbound-rtp',\n      candidatepair: 'candidate-pair',\n      localcandidate: 'local-candidate',\n      remotecandidate: 'remote-candidate'\n    };\n\n    var nativeGetStats = RTCPeerConnection.prototype.getStats;\n    RTCPeerConnection.prototype.getStats = function(selector, onSucc, onErr) {\n      return nativeGetStats.apply(this, [selector || null])\n        .then(function(stats) {\n          if (browserDetails.version < 48) {\n            stats = makeMapStats(stats);\n          }\n          if (browserDetails.version < 53 && !onSucc) {\n            // Shim only promise getStats with spec-hyphens in type names\n            // Leave callback version alone; misc old uses of forEach before Map\n            try {\n              stats.forEach(function(stat) {\n                stat.type = modernStatsTypes[stat.type] || stat.type;\n              });\n            } catch (e) {\n              if (e.name !== 'TypeError') {\n                throw e;\n              }\n              // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n              stats.forEach(function(stat, i) {\n                stats.set(i, Object.assign({}, stat, {\n                  type: modernStatsTypes[stat.type] || stat.type\n                }));\n              });\n            }\n          }\n          return stats;\n        })\n        .then(onSucc, onErr);\n    };\n  }\n};\n\n// Expose public methods.\nmodule.exports = {\n  shimOnTrack: firefoxShim.shimOnTrack,\n  shimSourceObject: firefoxShim.shimSourceObject,\n  shimPeerConnection: firefoxShim.shimPeerConnection,\n  shimGetUserMedia: require('./getusermedia')\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/webrtc-adapter/src/js/firefox/firefox_shim.js","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar logging = require('../utils').log;\nvar browserDetails = require('../utils').browserDetails;\n\n// Expose public methods.\nmodule.exports = function() {\n  var shimError_ = function(e) {\n    return {\n      name: {\n        SecurityError: 'NotAllowedError',\n        PermissionDeniedError: 'NotAllowedError'\n      }[e.name] || e.name,\n      message: {\n        'The operation is insecure.': 'The request is not allowed by the ' +\n        'user agent or the platform in the current context.'\n      }[e.message] || e.message,\n      constraint: e.constraint,\n      toString: function() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  // getUserMedia constraints shim.\n  var getUserMedia_ = function(constraints, onSuccess, onError) {\n    var constraintsToFF37_ = function(c) {\n      if (typeof c !== 'object' || c.require) {\n        return c;\n      }\n      var require = [];\n      Object.keys(c).forEach(function(key) {\n        if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n          return;\n        }\n        var r = c[key] = (typeof c[key] === 'object') ?\n            c[key] : {ideal: c[key]};\n        if (r.min !== undefined ||\n            r.max !== undefined || r.exact !== undefined) {\n          require.push(key);\n        }\n        if (r.exact !== undefined) {\n          if (typeof r.exact === 'number') {\n            r. min = r.max = r.exact;\n          } else {\n            c[key] = r.exact;\n          }\n          delete r.exact;\n        }\n        if (r.ideal !== undefined) {\n          c.advanced = c.advanced || [];\n          var oc = {};\n          if (typeof r.ideal === 'number') {\n            oc[key] = {min: r.ideal, max: r.ideal};\n          } else {\n            oc[key] = r.ideal;\n          }\n          c.advanced.push(oc);\n          delete r.ideal;\n          if (!Object.keys(r).length) {\n            delete c[key];\n          }\n        }\n      });\n      if (require.length) {\n        c.require = require;\n      }\n      return c;\n    };\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (browserDetails.version < 38) {\n      logging('spec: ' + JSON.stringify(constraints));\n      if (constraints.audio) {\n        constraints.audio = constraintsToFF37_(constraints.audio);\n      }\n      if (constraints.video) {\n        constraints.video = constraintsToFF37_(constraints.video);\n      }\n      logging('ff37: ' + JSON.stringify(constraints));\n    }\n    return navigator.mozGetUserMedia(constraints, onSuccess, function(e) {\n      onError(shimError_(e));\n    });\n  };\n\n  // Returns the result of getUserMedia as a Promise.\n  var getUserMediaPromise_ = function(constraints) {\n    return new Promise(function(resolve, reject) {\n      getUserMedia_(constraints, resolve, reject);\n    });\n  };\n\n  // Shim for mediaDevices on older versions.\n  if (!navigator.mediaDevices) {\n    navigator.mediaDevices = {getUserMedia: getUserMediaPromise_,\n      addEventListener: function() { },\n      removeEventListener: function() { }\n    };\n  }\n  navigator.mediaDevices.enumerateDevices =\n      navigator.mediaDevices.enumerateDevices || function() {\n        return new Promise(function(resolve) {\n          var infos = [\n            {kind: 'audioinput', deviceId: 'default', label: '', groupId: ''},\n            {kind: 'videoinput', deviceId: 'default', label: '', groupId: ''}\n          ];\n          resolve(infos);\n        });\n      };\n\n  if (browserDetails.version < 41) {\n    // Work around http://bugzil.la/1169665\n    var orgEnumerateDevices =\n        navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);\n    navigator.mediaDevices.enumerateDevices = function() {\n      return orgEnumerateDevices().then(undefined, function(e) {\n        if (e.name === 'NotFoundError') {\n          return [];\n        }\n        throw e;\n      });\n    };\n  }\n  if (browserDetails.version < 49) {\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      return origGetUserMedia(c).then(function(stream) {\n        // Work around https://bugzil.la/802326\n        if (c.audio && !stream.getAudioTracks().length ||\n            c.video && !stream.getVideoTracks().length) {\n          stream.getTracks().forEach(function(track) {\n            track.stop();\n          });\n          throw new DOMException('The object can not be found here.',\n                                 'NotFoundError');\n        }\n        return stream;\n      }, function(e) {\n        return Promise.reject(shimError_(e));\n      });\n    };\n  }\n  navigator.getUserMedia = function(constraints, onSuccess, onError) {\n    if (browserDetails.version < 44) {\n      return getUserMedia_(constraints, onSuccess, onError);\n    }\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    console.warn('navigator.getUserMedia has been replaced by ' +\n                 'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/webrtc-adapter/src/js/firefox/getusermedia.js","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\nvar safariShim = {\n  // TODO: DrAlex, should be here, double check against LayoutTests\n  // shimOnTrack: function() { },\n\n  // TODO: once the back-end for the mac port is done, add.\n  // TODO: check for webkitGTK+\n  // shimPeerConnection: function() { },\n\n  shimGetUserMedia: function() {\n    if (!navigator.getUserMedia) {\n      if (navigator.webkitGetUserMedia) {\n        navigator.getUserMedia = navigator.webkitGetUserMedia.bind(navigator);\n      } else if (navigator.mediaDevices &&\n          navigator.mediaDevices.getUserMedia) {\n        navigator.getUserMedia = function(constraints, cb, errcb) {\n          navigator.mediaDevices.getUserMedia(constraints)\n          .then(cb, errcb);\n        }.bind(navigator);\n      }\n    }\n  }\n};\n\n// Expose public methods.\nmodule.exports = {\n  shimGetUserMedia: safariShim.shimGetUserMedia\n  // TODO\n  // shimOnTrack: safariShim.shimOnTrack,\n  // shimPeerConnection: safariShim.shimPeerConnection\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/webrtc-adapter/src/js/safari/safari_shim.js","/*\n *\n *\tThe CeCILL-B License\n *\t\n *\tCopyright (c) {{ projectYear }}/{{ projectYearNow }} {{authorName}} | {{authorEmail}}\n *\n *\n *\tThis software is a computer program whose purpose is to [describe\n *\tfunctionalities and technical features of your software].\n *\n *\tThis software is governed by the CeCILL-B license under French law and\n *\tabiding by the rules of distribution of free software.  You can  use, \n *\tmodify and/ or redistribute the software under the terms of the CeCILL-B\n *\tlicense as circulated by CEA, CNRS and INRIA at the following URL\n *\t\"http://www.cecill.info\". \n *\n *\tAs a counterpart to the access to the source code and  rights to copy,\n *\tmodify and redistribute granted by the license, users are provided only\n *\twith a limited warranty  and the software's author,  the holder of the\n *\teconomic rights,  and the successive licensors  have only  limited\n *\tliability. \n *\n *\tIn this respect, the user's attention is drawn to the risks associated\n *\twith loading,  using,  modifying and/or developing or reproducing the\n *\tsoftware by the user in light of its specific status of free software,\n *\tthat may mean  that it is complicated to manipulate,  and  that  also\n *\ttherefore means  that it is reserved for developers  and  experienced\n *\tprofessionals having in-depth computer knowledge. Users are therefore\n *\tencouraged to load and test the software's suitability as regards their\n *\trequirements in conditions enabling the security of their systems and/or \n *\tdata to be ensured and,  more generally, to use and operate it in the \n *\tsame conditions as regards security. \n *\n *\tThe fact that you are presently reading this means that you have had\n *\tknowledge of the CeCILL-B license and that you accept its terms.\n *\n */\n\n// CORE\nconst stage = require('./core/stage.es6')();\nrequire('./core/notificationsCenter.es6')(stage);\nrequire('./syslog/syslog.es6')(stage);\n\n// TOOLS\nrequire('./tools/xml.js')(stage);\nrequire('./structs/hash/hash.es6')(stage);\nrequire('./structs/queue/queue.es6')(stage);\n\n// CRYPTO\nrequire('./crypto/base64.js')(stage);\nrequire('./crypto/md5.js')(stage);\n\n// IO\nrequire('./io/io.es6')(stage);\nrequire('./io/authentication/mechanisms/digest-md5/digestMd5.es6')(stage);\nrequire('./io/authentication/sasl/sasl.es6')(stage);\n\n// IO TRANSPORT\nrequire('./io/transports/socket.es6')(stage);\nrequire('./io/transports/websockets/websocket.es6')(stage);\nrequire('./io/transports/in/poll.es6')(stage);\nrequire('./io/transports/in/longPoll.es6')(stage);\n\n// IO PROTOCOLS\nrequire('./io/protocols/bayeux/bayeux.es6')(stage);\nrequire('./io/protocols/sip/sdp.es6')(stage);\nrequire('./io/protocols/sip/sip.es6')(stage);\n\n// IO REALTIME\nrequire('./io/realtime/realtime.es6')(stage);\n\n// MEDIAS\nrequire('./media/media.es6')(stage);\nrequire('./media/webrtc/webrtc.es6')(stage);\n\n\n// KERNEL STAGE ( nodefony )\nrequire('./kernel/service.es6')(stage);\nrequire('./kernel/kernel.es6')(stage);\nrequire('./kernel/appKernel.es6')(stage);\nrequire('./kernel/autoload.es6')(stage);\nrequire('./kernel/container.es6')(stage);\nrequire('./kernel/controller.es6')(stage);\nrequire('./kernel/locationService.es6')(stage);\nrequire('./kernel/module.es6')(stage);\nrequire('./kernel/routerService.es6')(stage);\nrequire('./kernel/translationService.es6')(stage);\n\n// EXPORT\nmodule.exports = stage ;\n\n\n\n// WEBPACK FOOTER //\n// ./src/core.js","/*!\n * jQuery JavaScript Library v3.1.1\n * https://jquery.com/\n *\n * Includes Sizzle.js\n * https://sizzlejs.com/\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license\n * https://jquery.org/license\n *\n * Date: 2016-09-22T22:30Z\n */\n( function( global, factory ) {\n\n\t\"use strict\";\n\n\tif ( typeof module === \"object\" && typeof module.exports === \"object\" ) {\n\n\t\t// For CommonJS and CommonJS-like environments where a proper `window`\n\t\t// is present, execute the factory and get jQuery.\n\t\t// For environments that do not have a `window` with a `document`\n\t\t// (such as Node.js), expose a factory as module.exports.\n\t\t// This accentuates the need for the creation of a real `window`.\n\t\t// e.g. var jQuery = require(\"jquery\")(window);\n\t\t// See ticket #14549 for more info.\n\t\tmodule.exports = global.document ?\n\t\t\tfactory( global, true ) :\n\t\t\tfunction( w ) {\n\t\t\t\tif ( !w.document ) {\n\t\t\t\t\tthrow new Error( \"jQuery requires a window with a document\" );\n\t\t\t\t}\n\t\t\t\treturn factory( w );\n\t\t\t};\n\t} else {\n\t\tfactory( global );\n\t}\n\n// Pass this if window is not defined yet\n} )( typeof window !== \"undefined\" ? window : this, function( window, noGlobal ) {\n\n// Edge <= 12 - 13+, Firefox <=18 - 45+, IE 10 - 11, Safari 5.1 - 9+, iOS 6 - 9.1\n// throw exceptions when non-strict code (e.g., ASP.NET 4.5) accesses strict mode\n// arguments.callee.caller (trac-13335). But as of jQuery 3.0 (2016), strict mode should be common\n// enough that all such attempts are guarded in a try block.\n\"use strict\";\n\nvar arr = [];\n\nvar document = window.document;\n\nvar getProto = Object.getPrototypeOf;\n\nvar slice = arr.slice;\n\nvar concat = arr.concat;\n\nvar push = arr.push;\n\nvar indexOf = arr.indexOf;\n\nvar class2type = {};\n\nvar toString = class2type.toString;\n\nvar hasOwn = class2type.hasOwnProperty;\n\nvar fnToString = hasOwn.toString;\n\nvar ObjectFunctionString = fnToString.call( Object );\n\nvar support = {};\n\n\n\n\tfunction DOMEval( code, doc ) {\n\t\tdoc = doc || document;\n\n\t\tvar script = doc.createElement( \"script\" );\n\n\t\tscript.text = code;\n\t\tdoc.head.appendChild( script ).parentNode.removeChild( script );\n\t}\n/* global Symbol */\n// Defining this global in .eslintrc.json would create a danger of using the global\n// unguarded in another place, it seems safer to define global only for this module\n\n\n\nvar\n\tversion = \"3.1.1\",\n\n\t// Define a local copy of jQuery\n\tjQuery = function( selector, context ) {\n\n\t\t// The jQuery object is actually just the init constructor 'enhanced'\n\t\t// Need init if jQuery is called (just allow error to be thrown if not included)\n\t\treturn new jQuery.fn.init( selector, context );\n\t},\n\n\t// Support: Android <=4.0 only\n\t// Make sure we trim BOM and NBSP\n\trtrim = /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,\n\n\t// Matches dashed string for camelizing\n\trmsPrefix = /^-ms-/,\n\trdashAlpha = /-([a-z])/g,\n\n\t// Used by jQuery.camelCase as callback to replace()\n\tfcamelCase = function( all, letter ) {\n\t\treturn letter.toUpperCase();\n\t};\n\njQuery.fn = jQuery.prototype = {\n\n\t// The current version of jQuery being used\n\tjquery: version,\n\n\tconstructor: jQuery,\n\n\t// The default length of a jQuery object is 0\n\tlength: 0,\n\n\ttoArray: function() {\n\t\treturn slice.call( this );\n\t},\n\n\t// Get the Nth element in the matched element set OR\n\t// Get the whole matched element set as a clean array\n\tget: function( num ) {\n\n\t\t// Return all the elements in a clean array\n\t\tif ( num == null ) {\n\t\t\treturn slice.call( this );\n\t\t}\n\n\t\t// Return just the one element from the set\n\t\treturn num < 0 ? this[ num + this.length ] : this[ num ];\n\t},\n\n\t// Take an array of elements and push it onto the stack\n\t// (returning the new matched element set)\n\tpushStack: function( elems ) {\n\n\t\t// Build a new jQuery matched element set\n\t\tvar ret = jQuery.merge( this.constructor(), elems );\n\n\t\t// Add the old object onto the stack (as a reference)\n\t\tret.prevObject = this;\n\n\t\t// Return the newly-formed element set\n\t\treturn ret;\n\t},\n\n\t// Execute a callback for every element in the matched set.\n\teach: function( callback ) {\n\t\treturn jQuery.each( this, callback );\n\t},\n\n\tmap: function( callback ) {\n\t\treturn this.pushStack( jQuery.map( this, function( elem, i ) {\n\t\t\treturn callback.call( elem, i, elem );\n\t\t} ) );\n\t},\n\n\tslice: function() {\n\t\treturn this.pushStack( slice.apply( this, arguments ) );\n\t},\n\n\tfirst: function() {\n\t\treturn this.eq( 0 );\n\t},\n\n\tlast: function() {\n\t\treturn this.eq( -1 );\n\t},\n\n\teq: function( i ) {\n\t\tvar len = this.length,\n\t\t\tj = +i + ( i < 0 ? len : 0 );\n\t\treturn this.pushStack( j >= 0 && j < len ? [ this[ j ] ] : [] );\n\t},\n\n\tend: function() {\n\t\treturn this.prevObject || this.constructor();\n\t},\n\n\t// For internal use only.\n\t// Behaves like an Array's method, not like a jQuery method.\n\tpush: push,\n\tsort: arr.sort,\n\tsplice: arr.splice\n};\n\njQuery.extend = jQuery.fn.extend = function() {\n\tvar options, name, src, copy, copyIsArray, clone,\n\t\ttarget = arguments[ 0 ] || {},\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif ( typeof target === \"boolean\" ) {\n\t\tdeep = target;\n\n\t\t// Skip the boolean and the target\n\t\ttarget = arguments[ i ] || {};\n\t\ti++;\n\t}\n\n\t// Handle case when target is a string or something (possible in deep copy)\n\tif ( typeof target !== \"object\" && !jQuery.isFunction( target ) ) {\n\t\ttarget = {};\n\t}\n\n\t// Extend jQuery itself if only one argument is passed\n\tif ( i === length ) {\n\t\ttarget = this;\n\t\ti--;\n\t}\n\n\tfor ( ; i < length; i++ ) {\n\n\t\t// Only deal with non-null/undefined values\n\t\tif ( ( options = arguments[ i ] ) != null ) {\n\n\t\t\t// Extend the base object\n\t\t\tfor ( name in options ) {\n\t\t\t\tsrc = target[ name ];\n\t\t\t\tcopy = options[ name ];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif ( target === copy ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\tif ( deep && copy && ( jQuery.isPlainObject( copy ) ||\n\t\t\t\t\t( copyIsArray = jQuery.isArray( copy ) ) ) ) {\n\n\t\t\t\t\tif ( copyIsArray ) {\n\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\tclone = src && jQuery.isArray( src ) ? src : [];\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone = src && jQuery.isPlainObject( src ) ? src : {};\n\t\t\t\t\t}\n\n\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\ttarget[ name ] = jQuery.extend( deep, clone, copy );\n\n\t\t\t\t// Don't bring in undefined values\n\t\t\t\t} else if ( copy !== undefined ) {\n\t\t\t\t\ttarget[ name ] = copy;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\njQuery.extend( {\n\n\t// Unique for each copy of jQuery on the page\n\texpando: \"jQuery\" + ( version + Math.random() ).replace( /\\D/g, \"\" ),\n\n\t// Assume jQuery is ready without the ready module\n\tisReady: true,\n\n\terror: function( msg ) {\n\t\tthrow new Error( msg );\n\t},\n\n\tnoop: function() {},\n\n\tisFunction: function( obj ) {\n\t\treturn jQuery.type( obj ) === \"function\";\n\t},\n\n\tisArray: Array.isArray,\n\n\tisWindow: function( obj ) {\n\t\treturn obj != null && obj === obj.window;\n\t},\n\n\tisNumeric: function( obj ) {\n\n\t\t// As of jQuery 3.0, isNumeric is limited to\n\t\t// strings and numbers (primitives or objects)\n\t\t// that can be coerced to finite numbers (gh-2662)\n\t\tvar type = jQuery.type( obj );\n\t\treturn ( type === \"number\" || type === \"string\" ) &&\n\n\t\t\t// parseFloat NaNs numeric-cast false positives (\"\")\n\t\t\t// ...but misinterprets leading-number strings, particularly hex literals (\"0x...\")\n\t\t\t// subtraction forces infinities to NaN\n\t\t\t!isNaN( obj - parseFloat( obj ) );\n\t},\n\n\tisPlainObject: function( obj ) {\n\t\tvar proto, Ctor;\n\n\t\t// Detect obvious negatives\n\t\t// Use toString instead of jQuery.type to catch host objects\n\t\tif ( !obj || toString.call( obj ) !== \"[object Object]\" ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tproto = getProto( obj );\n\n\t\t// Objects with no prototype (e.g., `Object.create( null )`) are plain\n\t\tif ( !proto ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Objects with prototype are plain iff they were constructed by a global Object function\n\t\tCtor = hasOwn.call( proto, \"constructor\" ) && proto.constructor;\n\t\treturn typeof Ctor === \"function\" && fnToString.call( Ctor ) === ObjectFunctionString;\n\t},\n\n\tisEmptyObject: function( obj ) {\n\n\t\t/* eslint-disable no-unused-vars */\n\t\t// See https://github.com/eslint/eslint/issues/6125\n\t\tvar name;\n\n\t\tfor ( name in obj ) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\n\ttype: function( obj ) {\n\t\tif ( obj == null ) {\n\t\t\treturn obj + \"\";\n\t\t}\n\n\t\t// Support: Android <=2.3 only (functionish RegExp)\n\t\treturn typeof obj === \"object\" || typeof obj === \"function\" ?\n\t\t\tclass2type[ toString.call( obj ) ] || \"object\" :\n\t\t\ttypeof obj;\n\t},\n\n\t// Evaluates a script in a global context\n\tglobalEval: function( code ) {\n\t\tDOMEval( code );\n\t},\n\n\t// Convert dashed to camelCase; used by the css and data modules\n\t// Support: IE <=9 - 11, Edge 12 - 13\n\t// Microsoft forgot to hump their vendor prefix (#9572)\n\tcamelCase: function( string ) {\n\t\treturn string.replace( rmsPrefix, \"ms-\" ).replace( rdashAlpha, fcamelCase );\n\t},\n\n\tnodeName: function( elem, name ) {\n\t\treturn elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();\n\t},\n\n\teach: function( obj, callback ) {\n\t\tvar length, i = 0;\n\n\t\tif ( isArrayLike( obj ) ) {\n\t\t\tlength = obj.length;\n\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\tif ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor ( i in obj ) {\n\t\t\t\tif ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn obj;\n\t},\n\n\t// Support: Android <=4.0 only\n\ttrim: function( text ) {\n\t\treturn text == null ?\n\t\t\t\"\" :\n\t\t\t( text + \"\" ).replace( rtrim, \"\" );\n\t},\n\n\t// results is for internal usage only\n\tmakeArray: function( arr, results ) {\n\t\tvar ret = results || [];\n\n\t\tif ( arr != null ) {\n\t\t\tif ( isArrayLike( Object( arr ) ) ) {\n\t\t\t\tjQuery.merge( ret,\n\t\t\t\t\ttypeof arr === \"string\" ?\n\t\t\t\t\t[ arr ] : arr\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tpush.call( ret, arr );\n\t\t\t}\n\t\t}\n\n\t\treturn ret;\n\t},\n\n\tinArray: function( elem, arr, i ) {\n\t\treturn arr == null ? -1 : indexOf.call( arr, elem, i );\n\t},\n\n\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t// push.apply(_, arraylike) throws on ancient WebKit\n\tmerge: function( first, second ) {\n\t\tvar len = +second.length,\n\t\t\tj = 0,\n\t\t\ti = first.length;\n\n\t\tfor ( ; j < len; j++ ) {\n\t\t\tfirst[ i++ ] = second[ j ];\n\t\t}\n\n\t\tfirst.length = i;\n\n\t\treturn first;\n\t},\n\n\tgrep: function( elems, callback, invert ) {\n\t\tvar callbackInverse,\n\t\t\tmatches = [],\n\t\t\ti = 0,\n\t\t\tlength = elems.length,\n\t\t\tcallbackExpect = !invert;\n\n\t\t// Go through the array, only saving the items\n\t\t// that pass the validator function\n\t\tfor ( ; i < length; i++ ) {\n\t\t\tcallbackInverse = !callback( elems[ i ], i );\n\t\t\tif ( callbackInverse !== callbackExpect ) {\n\t\t\t\tmatches.push( elems[ i ] );\n\t\t\t}\n\t\t}\n\n\t\treturn matches;\n\t},\n\n\t// arg is for internal usage only\n\tmap: function( elems, callback, arg ) {\n\t\tvar length, value,\n\t\t\ti = 0,\n\t\t\tret = [];\n\n\t\t// Go through the array, translating each of the items to their new values\n\t\tif ( isArrayLike( elems ) ) {\n\t\t\tlength = elems.length;\n\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\tvalue = callback( elems[ i ], i, arg );\n\n\t\t\t\tif ( value != null ) {\n\t\t\t\t\tret.push( value );\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Go through every key on the object,\n\t\t} else {\n\t\t\tfor ( i in elems ) {\n\t\t\t\tvalue = callback( elems[ i ], i, arg );\n\n\t\t\t\tif ( value != null ) {\n\t\t\t\t\tret.push( value );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Flatten any nested arrays\n\t\treturn concat.apply( [], ret );\n\t},\n\n\t// A global GUID counter for objects\n\tguid: 1,\n\n\t// Bind a function to a context, optionally partially applying any\n\t// arguments.\n\tproxy: function( fn, context ) {\n\t\tvar tmp, args, proxy;\n\n\t\tif ( typeof context === \"string\" ) {\n\t\t\ttmp = fn[ context ];\n\t\t\tcontext = fn;\n\t\t\tfn = tmp;\n\t\t}\n\n\t\t// Quick check to determine if target is callable, in the spec\n\t\t// this throws a TypeError, but we will just return undefined.\n\t\tif ( !jQuery.isFunction( fn ) ) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// Simulated bind\n\t\targs = slice.call( arguments, 2 );\n\t\tproxy = function() {\n\t\t\treturn fn.apply( context || this, args.concat( slice.call( arguments ) ) );\n\t\t};\n\n\t\t// Set the guid of unique handler to the same of original handler, so it can be removed\n\t\tproxy.guid = fn.guid = fn.guid || jQuery.guid++;\n\n\t\treturn proxy;\n\t},\n\n\tnow: Date.now,\n\n\t// jQuery.support is not used in Core but other projects attach their\n\t// properties to it so it needs to exist.\n\tsupport: support\n} );\n\nif ( typeof Symbol === \"function\" ) {\n\tjQuery.fn[ Symbol.iterator ] = arr[ Symbol.iterator ];\n}\n\n// Populate the class2type map\njQuery.each( \"Boolean Number String Function Array Date RegExp Object Error Symbol\".split( \" \" ),\nfunction( i, name ) {\n\tclass2type[ \"[object \" + name + \"]\" ] = name.toLowerCase();\n} );\n\nfunction isArrayLike( obj ) {\n\n\t// Support: real iOS 8.2 only (not reproducible in simulator)\n\t// `in` check used to prevent JIT error (gh-2145)\n\t// hasOwn isn't used here due to false negatives\n\t// regarding Nodelist length in IE\n\tvar length = !!obj && \"length\" in obj && obj.length,\n\t\ttype = jQuery.type( obj );\n\n\tif ( type === \"function\" || jQuery.isWindow( obj ) ) {\n\t\treturn false;\n\t}\n\n\treturn type === \"array\" || length === 0 ||\n\t\ttypeof length === \"number\" && length > 0 && ( length - 1 ) in obj;\n}\nvar Sizzle =\n/*!\n * Sizzle CSS Selector Engine v2.3.3\n * https://sizzlejs.com/\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license\n * http://jquery.org/license\n *\n * Date: 2016-08-08\n */\n(function( window ) {\n\nvar i,\n\tsupport,\n\tExpr,\n\tgetText,\n\tisXML,\n\ttokenize,\n\tcompile,\n\tselect,\n\toutermostContext,\n\tsortInput,\n\thasDuplicate,\n\n\t// Local document vars\n\tsetDocument,\n\tdocument,\n\tdocElem,\n\tdocumentIsHTML,\n\trbuggyQSA,\n\trbuggyMatches,\n\tmatches,\n\tcontains,\n\n\t// Instance-specific data\n\texpando = \"sizzle\" + 1 * new Date(),\n\tpreferredDoc = window.document,\n\tdirruns = 0,\n\tdone = 0,\n\tclassCache = createCache(),\n\ttokenCache = createCache(),\n\tcompilerCache = createCache(),\n\tsortOrder = function( a, b ) {\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t}\n\t\treturn 0;\n\t},\n\n\t// Instance methods\n\thasOwn = ({}).hasOwnProperty,\n\tarr = [],\n\tpop = arr.pop,\n\tpush_native = arr.push,\n\tpush = arr.push,\n\tslice = arr.slice,\n\t// Use a stripped-down indexOf as it's faster than native\n\t// https://jsperf.com/thor-indexof-vs-for/5\n\tindexOf = function( list, elem ) {\n\t\tvar i = 0,\n\t\t\tlen = list.length;\n\t\tfor ( ; i < len; i++ ) {\n\t\t\tif ( list[i] === elem ) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t},\n\n\tbooleans = \"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",\n\n\t// Regular expressions\n\n\t// http://www.w3.org/TR/css3-selectors/#whitespace\n\twhitespace = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",\n\n\t// http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier\n\tidentifier = \"(?:\\\\\\\\.|[\\\\w-]|[^\\0-\\\\xa0])+\",\n\n\t// Attribute selectors: http://www.w3.org/TR/selectors/#attribute-selectors\n\tattributes = \"\\\\[\" + whitespace + \"*(\" + identifier + \")(?:\" + whitespace +\n\t\t// Operator (capture 2)\n\t\t\"*([*^$|!~]?=)\" + whitespace +\n\t\t// \"Attribute values must be CSS identifiers [capture 5] or strings [capture 3 or capture 4]\"\n\t\t\"*(?:'((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\" + identifier + \"))|)\" + whitespace +\n\t\t\"*\\\\]\",\n\n\tpseudos = \":(\" + identifier + \")(?:\\\\((\" +\n\t\t// To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:\n\t\t// 1. quoted (capture 3; capture 4 or capture 5)\n\t\t\"('((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|\" +\n\t\t// 2. simple (capture 6)\n\t\t\"((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\" + attributes + \")*)|\" +\n\t\t// 3. anything else (capture 2)\n\t\t\".*\" +\n\t\t\")\\\\)|)\",\n\n\t// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter\n\trwhitespace = new RegExp( whitespace + \"+\", \"g\" ),\n\trtrim = new RegExp( \"^\" + whitespace + \"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\" + whitespace + \"+$\", \"g\" ),\n\n\trcomma = new RegExp( \"^\" + whitespace + \"*,\" + whitespace + \"*\" ),\n\trcombinators = new RegExp( \"^\" + whitespace + \"*([>+~]|\" + whitespace + \")\" + whitespace + \"*\" ),\n\n\trattributeQuotes = new RegExp( \"=\" + whitespace + \"*([^\\\\]'\\\"]*?)\" + whitespace + \"*\\\\]\", \"g\" ),\n\n\trpseudo = new RegExp( pseudos ),\n\tridentifier = new RegExp( \"^\" + identifier + \"$\" ),\n\n\tmatchExpr = {\n\t\t\"ID\": new RegExp( \"^#(\" + identifier + \")\" ),\n\t\t\"CLASS\": new RegExp( \"^\\\\.(\" + identifier + \")\" ),\n\t\t\"TAG\": new RegExp( \"^(\" + identifier + \"|[*])\" ),\n\t\t\"ATTR\": new RegExp( \"^\" + attributes ),\n\t\t\"PSEUDO\": new RegExp( \"^\" + pseudos ),\n\t\t\"CHILD\": new RegExp( \"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\" + whitespace +\n\t\t\t\"*(even|odd|(([+-]|)(\\\\d*)n|)\" + whitespace + \"*(?:([+-]|)\" + whitespace +\n\t\t\t\"*(\\\\d+)|))\" + whitespace + \"*\\\\)|)\", \"i\" ),\n\t\t\"bool\": new RegExp( \"^(?:\" + booleans + \")$\", \"i\" ),\n\t\t// For use in libraries implementing .is()\n\t\t// We use this for POS matching in `select`\n\t\t\"needsContext\": new RegExp( \"^\" + whitespace + \"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\" +\n\t\t\twhitespace + \"*((?:-\\\\d)?\\\\d*)\" + whitespace + \"*\\\\)|)(?=[^-]|$)\", \"i\" )\n\t},\n\n\trinputs = /^(?:input|select|textarea|button)$/i,\n\trheader = /^h\\d$/i,\n\n\trnative = /^[^{]+\\{\\s*\\[native \\w/,\n\n\t// Easily-parseable/retrievable ID or TAG or CLASS selectors\n\trquickExpr = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,\n\n\trsibling = /[+~]/,\n\n\t// CSS escapes\n\t// http://www.w3.org/TR/CSS21/syndata.html#escaped-characters\n\trunescape = new RegExp( \"\\\\\\\\([\\\\da-f]{1,6}\" + whitespace + \"?|(\" + whitespace + \")|.)\", \"ig\" ),\n\tfunescape = function( _, escaped, escapedWhitespace ) {\n\t\tvar high = \"0x\" + escaped - 0x10000;\n\t\t// NaN means non-codepoint\n\t\t// Support: Firefox<24\n\t\t// Workaround erroneous numeric interpretation of +\"0x\"\n\t\treturn high !== high || escapedWhitespace ?\n\t\t\tescaped :\n\t\t\thigh < 0 ?\n\t\t\t\t// BMP codepoint\n\t\t\t\tString.fromCharCode( high + 0x10000 ) :\n\t\t\t\t// Supplemental Plane codepoint (surrogate pair)\n\t\t\t\tString.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );\n\t},\n\n\t// CSS string/identifier serialization\n\t// https://drafts.csswg.org/cssom/#common-serializing-idioms\n\trcssescape = /([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\0-\\x1f\\x7f-\\uFFFF\\w-]/g,\n\tfcssescape = function( ch, asCodePoint ) {\n\t\tif ( asCodePoint ) {\n\n\t\t\t// U+0000 NULL becomes U+FFFD REPLACEMENT CHARACTER\n\t\t\tif ( ch === \"\\0\" ) {\n\t\t\t\treturn \"\\uFFFD\";\n\t\t\t}\n\n\t\t\t// Control characters and (dependent upon position) numbers get escaped as code points\n\t\t\treturn ch.slice( 0, -1 ) + \"\\\\\" + ch.charCodeAt( ch.length - 1 ).toString( 16 ) + \" \";\n\t\t}\n\n\t\t// Other potentially-special ASCII characters get backslash-escaped\n\t\treturn \"\\\\\" + ch;\n\t},\n\n\t// Used for iframes\n\t// See setDocument()\n\t// Removing the function wrapper causes a \"Permission Denied\"\n\t// error in IE\n\tunloadHandler = function() {\n\t\tsetDocument();\n\t},\n\n\tdisabledAncestor = addCombinator(\n\t\tfunction( elem ) {\n\t\t\treturn elem.disabled === true && (\"form\" in elem || \"label\" in elem);\n\t\t},\n\t\t{ dir: \"parentNode\", next: \"legend\" }\n\t);\n\n// Optimize for push.apply( _, NodeList )\ntry {\n\tpush.apply(\n\t\t(arr = slice.call( preferredDoc.childNodes )),\n\t\tpreferredDoc.childNodes\n\t);\n\t// Support: Android<4.0\n\t// Detect silently failing push.apply\n\tarr[ preferredDoc.childNodes.length ].nodeType;\n} catch ( e ) {\n\tpush = { apply: arr.length ?\n\n\t\t// Leverage slice if possible\n\t\tfunction( target, els ) {\n\t\t\tpush_native.apply( target, slice.call(els) );\n\t\t} :\n\n\t\t// Support: IE<9\n\t\t// Otherwise append directly\n\t\tfunction( target, els ) {\n\t\t\tvar j = target.length,\n\t\t\t\ti = 0;\n\t\t\t// Can't trust NodeList.length\n\t\t\twhile ( (target[j++] = els[i++]) ) {}\n\t\t\ttarget.length = j - 1;\n\t\t}\n\t};\n}\n\nfunction Sizzle( selector, context, results, seed ) {\n\tvar m, i, elem, nid, match, groups, newSelector,\n\t\tnewContext = context && context.ownerDocument,\n\n\t\t// nodeType defaults to 9, since context defaults to document\n\t\tnodeType = context ? context.nodeType : 9;\n\n\tresults = results || [];\n\n\t// Return early from calls with invalid selector or context\n\tif ( typeof selector !== \"string\" || !selector ||\n\t\tnodeType !== 1 && nodeType !== 9 && nodeType !== 11 ) {\n\n\t\treturn results;\n\t}\n\n\t// Try to shortcut find operations (as opposed to filters) in HTML documents\n\tif ( !seed ) {\n\n\t\tif ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {\n\t\t\tsetDocument( context );\n\t\t}\n\t\tcontext = context || document;\n\n\t\tif ( documentIsHTML ) {\n\n\t\t\t// If the selector is sufficiently simple, try using a \"get*By*\" DOM method\n\t\t\t// (excepting DocumentFragment context, where the methods don't exist)\n\t\t\tif ( nodeType !== 11 && (match = rquickExpr.exec( selector )) ) {\n\n\t\t\t\t// ID selector\n\t\t\t\tif ( (m = match[1]) ) {\n\n\t\t\t\t\t// Document context\n\t\t\t\t\tif ( nodeType === 9 ) {\n\t\t\t\t\t\tif ( (elem = context.getElementById( m )) ) {\n\n\t\t\t\t\t\t\t// Support: IE, Opera, Webkit\n\t\t\t\t\t\t\t// TODO: identify versions\n\t\t\t\t\t\t\t// getElementById can match elements by name instead of ID\n\t\t\t\t\t\t\tif ( elem.id === m ) {\n\t\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t// Element context\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// Support: IE, Opera, Webkit\n\t\t\t\t\t\t// TODO: identify versions\n\t\t\t\t\t\t// getElementById can match elements by name instead of ID\n\t\t\t\t\t\tif ( newContext && (elem = newContext.getElementById( m )) &&\n\t\t\t\t\t\t\tcontains( context, elem ) &&\n\t\t\t\t\t\t\telem.id === m ) {\n\n\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t// Type selector\n\t\t\t\t} else if ( match[2] ) {\n\t\t\t\t\tpush.apply( results, context.getElementsByTagName( selector ) );\n\t\t\t\t\treturn results;\n\n\t\t\t\t// Class selector\n\t\t\t\t} else if ( (m = match[3]) && support.getElementsByClassName &&\n\t\t\t\t\tcontext.getElementsByClassName ) {\n\n\t\t\t\t\tpush.apply( results, context.getElementsByClassName( m ) );\n\t\t\t\t\treturn results;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Take advantage of querySelectorAll\n\t\t\tif ( support.qsa &&\n\t\t\t\t!compilerCache[ selector + \" \" ] &&\n\t\t\t\t(!rbuggyQSA || !rbuggyQSA.test( selector )) ) {\n\n\t\t\t\tif ( nodeType !== 1 ) {\n\t\t\t\t\tnewContext = context;\n\t\t\t\t\tnewSelector = selector;\n\n\t\t\t\t// qSA looks outside Element context, which is not what we want\n\t\t\t\t// Thanks to Andrew Dupont for this workaround technique\n\t\t\t\t// Support: IE <=8\n\t\t\t\t// Exclude object elements\n\t\t\t\t} else if ( context.nodeName.toLowerCase() !== \"object\" ) {\n\n\t\t\t\t\t// Capture the context ID, setting it first if necessary\n\t\t\t\t\tif ( (nid = context.getAttribute( \"id\" )) ) {\n\t\t\t\t\t\tnid = nid.replace( rcssescape, fcssescape );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcontext.setAttribute( \"id\", (nid = expando) );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Prefix every selector in the list\n\t\t\t\t\tgroups = tokenize( selector );\n\t\t\t\t\ti = groups.length;\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tgroups[i] = \"#\" + nid + \" \" + toSelector( groups[i] );\n\t\t\t\t\t}\n\t\t\t\t\tnewSelector = groups.join( \",\" );\n\n\t\t\t\t\t// Expand context for sibling selectors\n\t\t\t\t\tnewContext = rsibling.test( selector ) && testContext( context.parentNode ) ||\n\t\t\t\t\t\tcontext;\n\t\t\t\t}\n\n\t\t\t\tif ( newSelector ) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tpush.apply( results,\n\t\t\t\t\t\t\tnewContext.querySelectorAll( newSelector )\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn results;\n\t\t\t\t\t} catch ( qsaError ) {\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tif ( nid === expando ) {\n\t\t\t\t\t\t\tcontext.removeAttribute( \"id\" );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// All others\n\treturn select( selector.replace( rtrim, \"$1\" ), context, results, seed );\n}\n\n/**\n * Create key-value caches of limited size\n * @returns {function(string, object)} Returns the Object data after storing it on itself with\n *\tproperty name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)\n *\tdeleting the oldest entry\n */\nfunction createCache() {\n\tvar keys = [];\n\n\tfunction cache( key, value ) {\n\t\t// Use (key + \" \") to avoid collision with native prototype properties (see Issue #157)\n\t\tif ( keys.push( key + \" \" ) > Expr.cacheLength ) {\n\t\t\t// Only keep the most recent entries\n\t\t\tdelete cache[ keys.shift() ];\n\t\t}\n\t\treturn (cache[ key + \" \" ] = value);\n\t}\n\treturn cache;\n}\n\n/**\n * Mark a function for special use by Sizzle\n * @param {Function} fn The function to mark\n */\nfunction markFunction( fn ) {\n\tfn[ expando ] = true;\n\treturn fn;\n}\n\n/**\n * Support testing using an element\n * @param {Function} fn Passed the created element and returns a boolean result\n */\nfunction assert( fn ) {\n\tvar el = document.createElement(\"fieldset\");\n\n\ttry {\n\t\treturn !!fn( el );\n\t} catch (e) {\n\t\treturn false;\n\t} finally {\n\t\t// Remove from its parent by default\n\t\tif ( el.parentNode ) {\n\t\t\tel.parentNode.removeChild( el );\n\t\t}\n\t\t// release memory in IE\n\t\tel = null;\n\t}\n}\n\n/**\n * Adds the same handler for all of the specified attrs\n * @param {String} attrs Pipe-separated list of attributes\n * @param {Function} handler The method that will be applied\n */\nfunction addHandle( attrs, handler ) {\n\tvar arr = attrs.split(\"|\"),\n\t\ti = arr.length;\n\n\twhile ( i-- ) {\n\t\tExpr.attrHandle[ arr[i] ] = handler;\n\t}\n}\n\n/**\n * Checks document order of two siblings\n * @param {Element} a\n * @param {Element} b\n * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b\n */\nfunction siblingCheck( a, b ) {\n\tvar cur = b && a,\n\t\tdiff = cur && a.nodeType === 1 && b.nodeType === 1 &&\n\t\t\ta.sourceIndex - b.sourceIndex;\n\n\t// Use IE sourceIndex if available on both nodes\n\tif ( diff ) {\n\t\treturn diff;\n\t}\n\n\t// Check if b follows a\n\tif ( cur ) {\n\t\twhile ( (cur = cur.nextSibling) ) {\n\t\t\tif ( cur === b ) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn a ? 1 : -1;\n}\n\n/**\n * Returns a function to use in pseudos for input types\n * @param {String} type\n */\nfunction createInputPseudo( type ) {\n\treturn function( elem ) {\n\t\tvar name = elem.nodeName.toLowerCase();\n\t\treturn name === \"input\" && elem.type === type;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for buttons\n * @param {String} type\n */\nfunction createButtonPseudo( type ) {\n\treturn function( elem ) {\n\t\tvar name = elem.nodeName.toLowerCase();\n\t\treturn (name === \"input\" || name === \"button\") && elem.type === type;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for :enabled/:disabled\n * @param {Boolean} disabled true for :disabled; false for :enabled\n */\nfunction createDisabledPseudo( disabled ) {\n\n\t// Known :disabled false positives: fieldset[disabled] > legend:nth-of-type(n+2) :can-disable\n\treturn function( elem ) {\n\n\t\t// Only certain elements can match :enabled or :disabled\n\t\t// https://html.spec.whatwg.org/multipage/scripting.html#selector-enabled\n\t\t// https://html.spec.whatwg.org/multipage/scripting.html#selector-disabled\n\t\tif ( \"form\" in elem ) {\n\n\t\t\t// Check for inherited disabledness on relevant non-disabled elements:\n\t\t\t// * listed form-associated elements in a disabled fieldset\n\t\t\t//   https://html.spec.whatwg.org/multipage/forms.html#category-listed\n\t\t\t//   https://html.spec.whatwg.org/multipage/forms.html#concept-fe-disabled\n\t\t\t// * option elements in a disabled optgroup\n\t\t\t//   https://html.spec.whatwg.org/multipage/forms.html#concept-option-disabled\n\t\t\t// All such elements have a \"form\" property.\n\t\t\tif ( elem.parentNode && elem.disabled === false ) {\n\n\t\t\t\t// Option elements defer to a parent optgroup if present\n\t\t\t\tif ( \"label\" in elem ) {\n\t\t\t\t\tif ( \"label\" in elem.parentNode ) {\n\t\t\t\t\t\treturn elem.parentNode.disabled === disabled;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn elem.disabled === disabled;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Support: IE 6 - 11\n\t\t\t\t// Use the isDisabled shortcut property to check for disabled fieldset ancestors\n\t\t\t\treturn elem.isDisabled === disabled ||\n\n\t\t\t\t\t// Where there is no isDisabled, check manually\n\t\t\t\t\t/* jshint -W018 */\n\t\t\t\t\telem.isDisabled !== !disabled &&\n\t\t\t\t\t\tdisabledAncestor( elem ) === disabled;\n\t\t\t}\n\n\t\t\treturn elem.disabled === disabled;\n\n\t\t// Try to winnow out elements that can't be disabled before trusting the disabled property.\n\t\t// Some victims get caught in our net (label, legend, menu, track), but it shouldn't\n\t\t// even exist on them, let alone have a boolean value.\n\t\t} else if ( \"label\" in elem ) {\n\t\t\treturn elem.disabled === disabled;\n\t\t}\n\n\t\t// Remaining elements are neither :enabled nor :disabled\n\t\treturn false;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for positionals\n * @param {Function} fn\n */\nfunction createPositionalPseudo( fn ) {\n\treturn markFunction(function( argument ) {\n\t\targument = +argument;\n\t\treturn markFunction(function( seed, matches ) {\n\t\t\tvar j,\n\t\t\t\tmatchIndexes = fn( [], seed.length, argument ),\n\t\t\t\ti = matchIndexes.length;\n\n\t\t\t// Match elements found at the specified indexes\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( seed[ (j = matchIndexes[i]) ] ) {\n\t\t\t\t\tseed[j] = !(matches[j] = seed[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Checks a node for validity as a Sizzle context\n * @param {Element|Object=} context\n * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value\n */\nfunction testContext( context ) {\n\treturn context && typeof context.getElementsByTagName !== \"undefined\" && context;\n}\n\n// Expose support vars for convenience\nsupport = Sizzle.support = {};\n\n/**\n * Detects XML nodes\n * @param {Element|Object} elem An element or a document\n * @returns {Boolean} True iff elem is a non-HTML XML node\n */\nisXML = Sizzle.isXML = function( elem ) {\n\t// documentElement is verified for cases where it doesn't yet exist\n\t// (such as loading iframes in IE - #4833)\n\tvar documentElement = elem && (elem.ownerDocument || elem).documentElement;\n\treturn documentElement ? documentElement.nodeName !== \"HTML\" : false;\n};\n\n/**\n * Sets document-related variables once based on the current document\n * @param {Element|Object} [doc] An element or document object to use to set the document\n * @returns {Object} Returns the current document\n */\nsetDocument = Sizzle.setDocument = function( node ) {\n\tvar hasCompare, subWindow,\n\t\tdoc = node ? node.ownerDocument || node : preferredDoc;\n\n\t// Return early if doc is invalid or already selected\n\tif ( doc === document || doc.nodeType !== 9 || !doc.documentElement ) {\n\t\treturn document;\n\t}\n\n\t// Update global variables\n\tdocument = doc;\n\tdocElem = document.documentElement;\n\tdocumentIsHTML = !isXML( document );\n\n\t// Support: IE 9-11, Edge\n\t// Accessing iframe documents after unload throws \"permission denied\" errors (jQuery #13936)\n\tif ( preferredDoc !== document &&\n\t\t(subWindow = document.defaultView) && subWindow.top !== subWindow ) {\n\n\t\t// Support: IE 11, Edge\n\t\tif ( subWindow.addEventListener ) {\n\t\t\tsubWindow.addEventListener( \"unload\", unloadHandler, false );\n\n\t\t// Support: IE 9 - 10 only\n\t\t} else if ( subWindow.attachEvent ) {\n\t\t\tsubWindow.attachEvent( \"onunload\", unloadHandler );\n\t\t}\n\t}\n\n\t/* Attributes\n\t---------------------------------------------------------------------- */\n\n\t// Support: IE<8\n\t// Verify that getAttribute really returns attributes and not properties\n\t// (excepting IE8 booleans)\n\tsupport.attributes = assert(function( el ) {\n\t\tel.className = \"i\";\n\t\treturn !el.getAttribute(\"className\");\n\t});\n\n\t/* getElement(s)By*\n\t---------------------------------------------------------------------- */\n\n\t// Check if getElementsByTagName(\"*\") returns only elements\n\tsupport.getElementsByTagName = assert(function( el ) {\n\t\tel.appendChild( document.createComment(\"\") );\n\t\treturn !el.getElementsByTagName(\"*\").length;\n\t});\n\n\t// Support: IE<9\n\tsupport.getElementsByClassName = rnative.test( document.getElementsByClassName );\n\n\t// Support: IE<10\n\t// Check if getElementById returns elements by name\n\t// The broken getElementById methods don't pick up programmatically-set names,\n\t// so use a roundabout getElementsByName test\n\tsupport.getById = assert(function( el ) {\n\t\tdocElem.appendChild( el ).id = expando;\n\t\treturn !document.getElementsByName || !document.getElementsByName( expando ).length;\n\t});\n\n\t// ID filter and find\n\tif ( support.getById ) {\n\t\tExpr.filter[\"ID\"] = function( id ) {\n\t\t\tvar attrId = id.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\treturn elem.getAttribute(\"id\") === attrId;\n\t\t\t};\n\t\t};\n\t\tExpr.find[\"ID\"] = function( id, context ) {\n\t\t\tif ( typeof context.getElementById !== \"undefined\" && documentIsHTML ) {\n\t\t\t\tvar elem = context.getElementById( id );\n\t\t\t\treturn elem ? [ elem ] : [];\n\t\t\t}\n\t\t};\n\t} else {\n\t\tExpr.filter[\"ID\"] =  function( id ) {\n\t\t\tvar attrId = id.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\tvar node = typeof elem.getAttributeNode !== \"undefined\" &&\n\t\t\t\t\telem.getAttributeNode(\"id\");\n\t\t\t\treturn node && node.value === attrId;\n\t\t\t};\n\t\t};\n\n\t\t// Support: IE 6 - 7 only\n\t\t// getElementById is not reliable as a find shortcut\n\t\tExpr.find[\"ID\"] = function( id, context ) {\n\t\t\tif ( typeof context.getElementById !== \"undefined\" && documentIsHTML ) {\n\t\t\t\tvar node, i, elems,\n\t\t\t\t\telem = context.getElementById( id );\n\n\t\t\t\tif ( elem ) {\n\n\t\t\t\t\t// Verify the id attribute\n\t\t\t\t\tnode = elem.getAttributeNode(\"id\");\n\t\t\t\t\tif ( node && node.value === id ) {\n\t\t\t\t\t\treturn [ elem ];\n\t\t\t\t\t}\n\n\t\t\t\t\t// Fall back on getElementsByName\n\t\t\t\t\telems = context.getElementsByName( id );\n\t\t\t\t\ti = 0;\n\t\t\t\t\twhile ( (elem = elems[i++]) ) {\n\t\t\t\t\t\tnode = elem.getAttributeNode(\"id\");\n\t\t\t\t\t\tif ( node && node.value === id ) {\n\t\t\t\t\t\t\treturn [ elem ];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn [];\n\t\t\t}\n\t\t};\n\t}\n\n\t// Tag\n\tExpr.find[\"TAG\"] = support.getElementsByTagName ?\n\t\tfunction( tag, context ) {\n\t\t\tif ( typeof context.getElementsByTagName !== \"undefined\" ) {\n\t\t\t\treturn context.getElementsByTagName( tag );\n\n\t\t\t// DocumentFragment nodes don't have gEBTN\n\t\t\t} else if ( support.qsa ) {\n\t\t\t\treturn context.querySelectorAll( tag );\n\t\t\t}\n\t\t} :\n\n\t\tfunction( tag, context ) {\n\t\t\tvar elem,\n\t\t\t\ttmp = [],\n\t\t\t\ti = 0,\n\t\t\t\t// By happy coincidence, a (broken) gEBTN appears on DocumentFragment nodes too\n\t\t\t\tresults = context.getElementsByTagName( tag );\n\n\t\t\t// Filter out possible comments\n\t\t\tif ( tag === \"*\" ) {\n\t\t\t\twhile ( (elem = results[i++]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\t\t\ttmp.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn tmp;\n\t\t\t}\n\t\t\treturn results;\n\t\t};\n\n\t// Class\n\tExpr.find[\"CLASS\"] = support.getElementsByClassName && function( className, context ) {\n\t\tif ( typeof context.getElementsByClassName !== \"undefined\" && documentIsHTML ) {\n\t\t\treturn context.getElementsByClassName( className );\n\t\t}\n\t};\n\n\t/* QSA/matchesSelector\n\t---------------------------------------------------------------------- */\n\n\t// QSA and matchesSelector support\n\n\t// matchesSelector(:active) reports false when true (IE9/Opera 11.5)\n\trbuggyMatches = [];\n\n\t// qSa(:focus) reports false when true (Chrome 21)\n\t// We allow this because of a bug in IE8/9 that throws an error\n\t// whenever `document.activeElement` is accessed on an iframe\n\t// So, we allow :focus to pass through QSA all the time to avoid the IE error\n\t// See https://bugs.jquery.com/ticket/13378\n\trbuggyQSA = [];\n\n\tif ( (support.qsa = rnative.test( document.querySelectorAll )) ) {\n\t\t// Build QSA regex\n\t\t// Regex strategy adopted from Diego Perini\n\t\tassert(function( el ) {\n\t\t\t// Select is set to empty string on purpose\n\t\t\t// This is to test IE's treatment of not explicitly\n\t\t\t// setting a boolean content attribute,\n\t\t\t// since its presence should be enough\n\t\t\t// https://bugs.jquery.com/ticket/12359\n\t\t\tdocElem.appendChild( el ).innerHTML = \"<a id='\" + expando + \"'></a>\" +\n\t\t\t\t\"<select id='\" + expando + \"-\\r\\\\' msallowcapture=''>\" +\n\t\t\t\t\"<option selected=''></option></select>\";\n\n\t\t\t// Support: IE8, Opera 11-12.16\n\t\t\t// Nothing should be selected when empty strings follow ^= or $= or *=\n\t\t\t// The test attribute must be unknown in Opera but \"safe\" for WinRT\n\t\t\t// https://msdn.microsoft.com/en-us/library/ie/hh465388.aspx#attribute_section\n\t\t\tif ( el.querySelectorAll(\"[msallowcapture^='']\").length ) {\n\t\t\t\trbuggyQSA.push( \"[*^$]=\" + whitespace + \"*(?:''|\\\"\\\")\" );\n\t\t\t}\n\n\t\t\t// Support: IE8\n\t\t\t// Boolean attributes and \"value\" are not treated correctly\n\t\t\tif ( !el.querySelectorAll(\"[selected]\").length ) {\n\t\t\t\trbuggyQSA.push( \"\\\\[\" + whitespace + \"*(?:value|\" + booleans + \")\" );\n\t\t\t}\n\n\t\t\t// Support: Chrome<29, Android<4.4, Safari<7.0+, iOS<7.0+, PhantomJS<1.9.8+\n\t\t\tif ( !el.querySelectorAll( \"[id~=\" + expando + \"-]\" ).length ) {\n\t\t\t\trbuggyQSA.push(\"~=\");\n\t\t\t}\n\n\t\t\t// Webkit/Opera - :checked should return selected option elements\n\t\t\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\n\t\t\t// IE8 throws error here and will not see later tests\n\t\t\tif ( !el.querySelectorAll(\":checked\").length ) {\n\t\t\t\trbuggyQSA.push(\":checked\");\n\t\t\t}\n\n\t\t\t// Support: Safari 8+, iOS 8+\n\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=136851\n\t\t\t// In-page `selector#id sibling-combinator selector` fails\n\t\t\tif ( !el.querySelectorAll( \"a#\" + expando + \"+*\" ).length ) {\n\t\t\t\trbuggyQSA.push(\".#.+[+~]\");\n\t\t\t}\n\t\t});\n\n\t\tassert(function( el ) {\n\t\t\tel.innerHTML = \"<a href='' disabled='disabled'></a>\" +\n\t\t\t\t\"<select disabled='disabled'><option/></select>\";\n\n\t\t\t// Support: Windows 8 Native Apps\n\t\t\t// The type and name attributes are restricted during .innerHTML assignment\n\t\t\tvar input = document.createElement(\"input\");\n\t\t\tinput.setAttribute( \"type\", \"hidden\" );\n\t\t\tel.appendChild( input ).setAttribute( \"name\", \"D\" );\n\n\t\t\t// Support: IE8\n\t\t\t// Enforce case-sensitivity of name attribute\n\t\t\tif ( el.querySelectorAll(\"[name=d]\").length ) {\n\t\t\t\trbuggyQSA.push( \"name\" + whitespace + \"*[*^$|!~]?=\" );\n\t\t\t}\n\n\t\t\t// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)\n\t\t\t// IE8 throws error here and will not see later tests\n\t\t\tif ( el.querySelectorAll(\":enabled\").length !== 2 ) {\n\t\t\t\trbuggyQSA.push( \":enabled\", \":disabled\" );\n\t\t\t}\n\n\t\t\t// Support: IE9-11+\n\t\t\t// IE's :disabled selector does not pick up the children of disabled fieldsets\n\t\t\tdocElem.appendChild( el ).disabled = true;\n\t\t\tif ( el.querySelectorAll(\":disabled\").length !== 2 ) {\n\t\t\t\trbuggyQSA.push( \":enabled\", \":disabled\" );\n\t\t\t}\n\n\t\t\t// Opera 10-11 does not throw on post-comma invalid pseudos\n\t\t\tel.querySelectorAll(\"*,:x\");\n\t\t\trbuggyQSA.push(\",.*:\");\n\t\t});\n\t}\n\n\tif ( (support.matchesSelector = rnative.test( (matches = docElem.matches ||\n\t\tdocElem.webkitMatchesSelector ||\n\t\tdocElem.mozMatchesSelector ||\n\t\tdocElem.oMatchesSelector ||\n\t\tdocElem.msMatchesSelector) )) ) {\n\n\t\tassert(function( el ) {\n\t\t\t// Check to see if it's possible to do matchesSelector\n\t\t\t// on a disconnected node (IE 9)\n\t\t\tsupport.disconnectedMatch = matches.call( el, \"*\" );\n\n\t\t\t// This should fail with an exception\n\t\t\t// Gecko does not error, returns false instead\n\t\t\tmatches.call( el, \"[s!='']:x\" );\n\t\t\trbuggyMatches.push( \"!=\", pseudos );\n\t\t});\n\t}\n\n\trbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join(\"|\") );\n\trbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join(\"|\") );\n\n\t/* Contains\n\t---------------------------------------------------------------------- */\n\thasCompare = rnative.test( docElem.compareDocumentPosition );\n\n\t// Element contains another\n\t// Purposefully self-exclusive\n\t// As in, an element does not contain itself\n\tcontains = hasCompare || rnative.test( docElem.contains ) ?\n\t\tfunction( a, b ) {\n\t\t\tvar adown = a.nodeType === 9 ? a.documentElement : a,\n\t\t\t\tbup = b && b.parentNode;\n\t\t\treturn a === bup || !!( bup && bup.nodeType === 1 && (\n\t\t\t\tadown.contains ?\n\t\t\t\t\tadown.contains( bup ) :\n\t\t\t\t\ta.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16\n\t\t\t));\n\t\t} :\n\t\tfunction( a, b ) {\n\t\t\tif ( b ) {\n\t\t\t\twhile ( (b = b.parentNode) ) {\n\t\t\t\t\tif ( b === a ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t/* Sorting\n\t---------------------------------------------------------------------- */\n\n\t// Document order sorting\n\tsortOrder = hasCompare ?\n\tfunction( a, b ) {\n\n\t\t// Flag for duplicate removal\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t\treturn 0;\n\t\t}\n\n\t\t// Sort on method existence if only one input has compareDocumentPosition\n\t\tvar compare = !a.compareDocumentPosition - !b.compareDocumentPosition;\n\t\tif ( compare ) {\n\t\t\treturn compare;\n\t\t}\n\n\t\t// Calculate position if both inputs belong to the same document\n\t\tcompare = ( a.ownerDocument || a ) === ( b.ownerDocument || b ) ?\n\t\t\ta.compareDocumentPosition( b ) :\n\n\t\t\t// Otherwise we know they are disconnected\n\t\t\t1;\n\n\t\t// Disconnected nodes\n\t\tif ( compare & 1 ||\n\t\t\t(!support.sortDetached && b.compareDocumentPosition( a ) === compare) ) {\n\n\t\t\t// Choose the first element that is related to our preferred document\n\t\t\tif ( a === document || a.ownerDocument === preferredDoc && contains(preferredDoc, a) ) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\tif ( b === document || b.ownerDocument === preferredDoc && contains(preferredDoc, b) ) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\t// Maintain original order\n\t\t\treturn sortInput ?\n\t\t\t\t( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :\n\t\t\t\t0;\n\t\t}\n\n\t\treturn compare & 4 ? -1 : 1;\n\t} :\n\tfunction( a, b ) {\n\t\t// Exit early if the nodes are identical\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t\treturn 0;\n\t\t}\n\n\t\tvar cur,\n\t\t\ti = 0,\n\t\t\taup = a.parentNode,\n\t\t\tbup = b.parentNode,\n\t\t\tap = [ a ],\n\t\t\tbp = [ b ];\n\n\t\t// Parentless nodes are either documents or disconnected\n\t\tif ( !aup || !bup ) {\n\t\t\treturn a === document ? -1 :\n\t\t\t\tb === document ? 1 :\n\t\t\t\taup ? -1 :\n\t\t\t\tbup ? 1 :\n\t\t\t\tsortInput ?\n\t\t\t\t( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :\n\t\t\t\t0;\n\n\t\t// If the nodes are siblings, we can do a quick check\n\t\t} else if ( aup === bup ) {\n\t\t\treturn siblingCheck( a, b );\n\t\t}\n\n\t\t// Otherwise we need full lists of their ancestors for comparison\n\t\tcur = a;\n\t\twhile ( (cur = cur.parentNode) ) {\n\t\t\tap.unshift( cur );\n\t\t}\n\t\tcur = b;\n\t\twhile ( (cur = cur.parentNode) ) {\n\t\t\tbp.unshift( cur );\n\t\t}\n\n\t\t// Walk down the tree looking for a discrepancy\n\t\twhile ( ap[i] === bp[i] ) {\n\t\t\ti++;\n\t\t}\n\n\t\treturn i ?\n\t\t\t// Do a sibling check if the nodes have a common ancestor\n\t\t\tsiblingCheck( ap[i], bp[i] ) :\n\n\t\t\t// Otherwise nodes in our document sort first\n\t\t\tap[i] === preferredDoc ? -1 :\n\t\t\tbp[i] === preferredDoc ? 1 :\n\t\t\t0;\n\t};\n\n\treturn document;\n};\n\nSizzle.matches = function( expr, elements ) {\n\treturn Sizzle( expr, null, null, elements );\n};\n\nSizzle.matchesSelector = function( elem, expr ) {\n\t// Set document vars if needed\n\tif ( ( elem.ownerDocument || elem ) !== document ) {\n\t\tsetDocument( elem );\n\t}\n\n\t// Make sure that attribute selectors are quoted\n\texpr = expr.replace( rattributeQuotes, \"='$1']\" );\n\n\tif ( support.matchesSelector && documentIsHTML &&\n\t\t!compilerCache[ expr + \" \" ] &&\n\t\t( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&\n\t\t( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {\n\n\t\ttry {\n\t\t\tvar ret = matches.call( elem, expr );\n\n\t\t\t// IE 9's matchesSelector returns false on disconnected nodes\n\t\t\tif ( ret || support.disconnectedMatch ||\n\t\t\t\t\t// As well, disconnected nodes are said to be in a document\n\t\t\t\t\t// fragment in IE 9\n\t\t\t\t\telem.document && elem.document.nodeType !== 11 ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t} catch (e) {}\n\t}\n\n\treturn Sizzle( expr, document, null, [ elem ] ).length > 0;\n};\n\nSizzle.contains = function( context, elem ) {\n\t// Set document vars if needed\n\tif ( ( context.ownerDocument || context ) !== document ) {\n\t\tsetDocument( context );\n\t}\n\treturn contains( context, elem );\n};\n\nSizzle.attr = function( elem, name ) {\n\t// Set document vars if needed\n\tif ( ( elem.ownerDocument || elem ) !== document ) {\n\t\tsetDocument( elem );\n\t}\n\n\tvar fn = Expr.attrHandle[ name.toLowerCase() ],\n\t\t// Don't get fooled by Object.prototype properties (jQuery #13807)\n\t\tval = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?\n\t\t\tfn( elem, name, !documentIsHTML ) :\n\t\t\tundefined;\n\n\treturn val !== undefined ?\n\t\tval :\n\t\tsupport.attributes || !documentIsHTML ?\n\t\t\telem.getAttribute( name ) :\n\t\t\t(val = elem.getAttributeNode(name)) && val.specified ?\n\t\t\t\tval.value :\n\t\t\t\tnull;\n};\n\nSizzle.escape = function( sel ) {\n\treturn (sel + \"\").replace( rcssescape, fcssescape );\n};\n\nSizzle.error = function( msg ) {\n\tthrow new Error( \"Syntax error, unrecognized expression: \" + msg );\n};\n\n/**\n * Document sorting and removing duplicates\n * @param {ArrayLike} results\n */\nSizzle.uniqueSort = function( results ) {\n\tvar elem,\n\t\tduplicates = [],\n\t\tj = 0,\n\t\ti = 0;\n\n\t// Unless we *know* we can detect duplicates, assume their presence\n\thasDuplicate = !support.detectDuplicates;\n\tsortInput = !support.sortStable && results.slice( 0 );\n\tresults.sort( sortOrder );\n\n\tif ( hasDuplicate ) {\n\t\twhile ( (elem = results[i++]) ) {\n\t\t\tif ( elem === results[ i ] ) {\n\t\t\t\tj = duplicates.push( i );\n\t\t\t}\n\t\t}\n\t\twhile ( j-- ) {\n\t\t\tresults.splice( duplicates[ j ], 1 );\n\t\t}\n\t}\n\n\t// Clear input after sorting to release objects\n\t// See https://github.com/jquery/sizzle/pull/225\n\tsortInput = null;\n\n\treturn results;\n};\n\n/**\n * Utility function for retrieving the text value of an array of DOM nodes\n * @param {Array|Element} elem\n */\ngetText = Sizzle.getText = function( elem ) {\n\tvar node,\n\t\tret = \"\",\n\t\ti = 0,\n\t\tnodeType = elem.nodeType;\n\n\tif ( !nodeType ) {\n\t\t// If no nodeType, this is expected to be an array\n\t\twhile ( (node = elem[i++]) ) {\n\t\t\t// Do not traverse comment nodes\n\t\t\tret += getText( node );\n\t\t}\n\t} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {\n\t\t// Use textContent for elements\n\t\t// innerText usage removed for consistency of new lines (jQuery #11153)\n\t\tif ( typeof elem.textContent === \"string\" ) {\n\t\t\treturn elem.textContent;\n\t\t} else {\n\t\t\t// Traverse its children\n\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n\t\t\t\tret += getText( elem );\n\t\t\t}\n\t\t}\n\t} else if ( nodeType === 3 || nodeType === 4 ) {\n\t\treturn elem.nodeValue;\n\t}\n\t// Do not include comment or processing instruction nodes\n\n\treturn ret;\n};\n\nExpr = Sizzle.selectors = {\n\n\t// Can be adjusted by the user\n\tcacheLength: 50,\n\n\tcreatePseudo: markFunction,\n\n\tmatch: matchExpr,\n\n\tattrHandle: {},\n\n\tfind: {},\n\n\trelative: {\n\t\t\">\": { dir: \"parentNode\", first: true },\n\t\t\" \": { dir: \"parentNode\" },\n\t\t\"+\": { dir: \"previousSibling\", first: true },\n\t\t\"~\": { dir: \"previousSibling\" }\n\t},\n\n\tpreFilter: {\n\t\t\"ATTR\": function( match ) {\n\t\t\tmatch[1] = match[1].replace( runescape, funescape );\n\n\t\t\t// Move the given value to match[3] whether quoted or unquoted\n\t\t\tmatch[3] = ( match[3] || match[4] || match[5] || \"\" ).replace( runescape, funescape );\n\n\t\t\tif ( match[2] === \"~=\" ) {\n\t\t\t\tmatch[3] = \" \" + match[3] + \" \";\n\t\t\t}\n\n\t\t\treturn match.slice( 0, 4 );\n\t\t},\n\n\t\t\"CHILD\": function( match ) {\n\t\t\t/* matches from matchExpr[\"CHILD\"]\n\t\t\t\t1 type (only|nth|...)\n\t\t\t\t2 what (child|of-type)\n\t\t\t\t3 argument (even|odd|\\d*|\\d*n([+-]\\d+)?|...)\n\t\t\t\t4 xn-component of xn+y argument ([+-]?\\d*n|)\n\t\t\t\t5 sign of xn-component\n\t\t\t\t6 x of xn-component\n\t\t\t\t7 sign of y-component\n\t\t\t\t8 y of y-component\n\t\t\t*/\n\t\t\tmatch[1] = match[1].toLowerCase();\n\n\t\t\tif ( match[1].slice( 0, 3 ) === \"nth\" ) {\n\t\t\t\t// nth-* requires argument\n\t\t\t\tif ( !match[3] ) {\n\t\t\t\t\tSizzle.error( match[0] );\n\t\t\t\t}\n\n\t\t\t\t// numeric x and y parameters for Expr.filter.CHILD\n\t\t\t\t// remember that false/true cast respectively to 0/1\n\t\t\t\tmatch[4] = +( match[4] ? match[5] + (match[6] || 1) : 2 * ( match[3] === \"even\" || match[3] === \"odd\" ) );\n\t\t\t\tmatch[5] = +( ( match[7] + match[8] ) || match[3] === \"odd\" );\n\n\t\t\t// other types prohibit arguments\n\t\t\t} else if ( match[3] ) {\n\t\t\t\tSizzle.error( match[0] );\n\t\t\t}\n\n\t\t\treturn match;\n\t\t},\n\n\t\t\"PSEUDO\": function( match ) {\n\t\t\tvar excess,\n\t\t\t\tunquoted = !match[6] && match[2];\n\n\t\t\tif ( matchExpr[\"CHILD\"].test( match[0] ) ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\t// Accept quoted arguments as-is\n\t\t\tif ( match[3] ) {\n\t\t\t\tmatch[2] = match[4] || match[5] || \"\";\n\n\t\t\t// Strip excess characters from unquoted arguments\n\t\t\t} else if ( unquoted && rpseudo.test( unquoted ) &&\n\t\t\t\t// Get excess from tokenize (recursively)\n\t\t\t\t(excess = tokenize( unquoted, true )) &&\n\t\t\t\t// advance to the next closing parenthesis\n\t\t\t\t(excess = unquoted.indexOf( \")\", unquoted.length - excess ) - unquoted.length) ) {\n\n\t\t\t\t// excess is a negative index\n\t\t\t\tmatch[0] = match[0].slice( 0, excess );\n\t\t\t\tmatch[2] = unquoted.slice( 0, excess );\n\t\t\t}\n\n\t\t\t// Return only captures needed by the pseudo filter method (type and argument)\n\t\t\treturn match.slice( 0, 3 );\n\t\t}\n\t},\n\n\tfilter: {\n\n\t\t\"TAG\": function( nodeNameSelector ) {\n\t\t\tvar nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();\n\t\t\treturn nodeNameSelector === \"*\" ?\n\t\t\t\tfunction() { return true; } :\n\t\t\t\tfunction( elem ) {\n\t\t\t\t\treturn elem.nodeName && elem.nodeName.toLowerCase() === nodeName;\n\t\t\t\t};\n\t\t},\n\n\t\t\"CLASS\": function( className ) {\n\t\t\tvar pattern = classCache[ className + \" \" ];\n\n\t\t\treturn pattern ||\n\t\t\t\t(pattern = new RegExp( \"(^|\" + whitespace + \")\" + className + \"(\" + whitespace + \"|$)\" )) &&\n\t\t\t\tclassCache( className, function( elem ) {\n\t\t\t\t\treturn pattern.test( typeof elem.className === \"string\" && elem.className || typeof elem.getAttribute !== \"undefined\" && elem.getAttribute(\"class\") || \"\" );\n\t\t\t\t});\n\t\t},\n\n\t\t\"ATTR\": function( name, operator, check ) {\n\t\t\treturn function( elem ) {\n\t\t\t\tvar result = Sizzle.attr( elem, name );\n\n\t\t\t\tif ( result == null ) {\n\t\t\t\t\treturn operator === \"!=\";\n\t\t\t\t}\n\t\t\t\tif ( !operator ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tresult += \"\";\n\n\t\t\t\treturn operator === \"=\" ? result === check :\n\t\t\t\t\toperator === \"!=\" ? result !== check :\n\t\t\t\t\toperator === \"^=\" ? check && result.indexOf( check ) === 0 :\n\t\t\t\t\toperator === \"*=\" ? check && result.indexOf( check ) > -1 :\n\t\t\t\t\toperator === \"$=\" ? check && result.slice( -check.length ) === check :\n\t\t\t\t\toperator === \"~=\" ? ( \" \" + result.replace( rwhitespace, \" \" ) + \" \" ).indexOf( check ) > -1 :\n\t\t\t\t\toperator === \"|=\" ? result === check || result.slice( 0, check.length + 1 ) === check + \"-\" :\n\t\t\t\t\tfalse;\n\t\t\t};\n\t\t},\n\n\t\t\"CHILD\": function( type, what, argument, first, last ) {\n\t\t\tvar simple = type.slice( 0, 3 ) !== \"nth\",\n\t\t\t\tforward = type.slice( -4 ) !== \"last\",\n\t\t\t\tofType = what === \"of-type\";\n\n\t\t\treturn first === 1 && last === 0 ?\n\n\t\t\t\t// Shortcut for :nth-*(n)\n\t\t\t\tfunction( elem ) {\n\t\t\t\t\treturn !!elem.parentNode;\n\t\t\t\t} :\n\n\t\t\t\tfunction( elem, context, xml ) {\n\t\t\t\t\tvar cache, uniqueCache, outerCache, node, nodeIndex, start,\n\t\t\t\t\t\tdir = simple !== forward ? \"nextSibling\" : \"previousSibling\",\n\t\t\t\t\t\tparent = elem.parentNode,\n\t\t\t\t\t\tname = ofType && elem.nodeName.toLowerCase(),\n\t\t\t\t\t\tuseCache = !xml && !ofType,\n\t\t\t\t\t\tdiff = false;\n\n\t\t\t\t\tif ( parent ) {\n\n\t\t\t\t\t\t// :(first|last|only)-(child|of-type)\n\t\t\t\t\t\tif ( simple ) {\n\t\t\t\t\t\t\twhile ( dir ) {\n\t\t\t\t\t\t\t\tnode = elem;\n\t\t\t\t\t\t\t\twhile ( (node = node[ dir ]) ) {\n\t\t\t\t\t\t\t\t\tif ( ofType ?\n\t\t\t\t\t\t\t\t\t\tnode.nodeName.toLowerCase() === name :\n\t\t\t\t\t\t\t\t\t\tnode.nodeType === 1 ) {\n\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// Reverse direction for :only-* (if we haven't yet done so)\n\t\t\t\t\t\t\t\tstart = dir = type === \"only\" && !start && \"nextSibling\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstart = [ forward ? parent.firstChild : parent.lastChild ];\n\n\t\t\t\t\t\t// non-xml :nth-child(...) stores cache data on `parent`\n\t\t\t\t\t\tif ( forward && useCache ) {\n\n\t\t\t\t\t\t\t// Seek `elem` from a previously-cached index\n\n\t\t\t\t\t\t\t// ...in a gzip-friendly way\n\t\t\t\t\t\t\tnode = parent;\n\t\t\t\t\t\t\touterCache = node[ expando ] || (node[ expando ] = {});\n\n\t\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\t\tuniqueCache = outerCache[ node.uniqueID ] ||\n\t\t\t\t\t\t\t\t(outerCache[ node.uniqueID ] = {});\n\n\t\t\t\t\t\t\tcache = uniqueCache[ type ] || [];\n\t\t\t\t\t\t\tnodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];\n\t\t\t\t\t\t\tdiff = nodeIndex && cache[ 2 ];\n\t\t\t\t\t\t\tnode = nodeIndex && parent.childNodes[ nodeIndex ];\n\n\t\t\t\t\t\t\twhile ( (node = ++nodeIndex && node && node[ dir ] ||\n\n\t\t\t\t\t\t\t\t// Fallback to seeking `elem` from the start\n\t\t\t\t\t\t\t\t(diff = nodeIndex = 0) || start.pop()) ) {\n\n\t\t\t\t\t\t\t\t// When found, cache indexes on `parent` and break\n\t\t\t\t\t\t\t\tif ( node.nodeType === 1 && ++diff && node === elem ) {\n\t\t\t\t\t\t\t\t\tuniqueCache[ type ] = [ dirruns, nodeIndex, diff ];\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Use previously-cached element index if available\n\t\t\t\t\t\t\tif ( useCache ) {\n\t\t\t\t\t\t\t\t// ...in a gzip-friendly way\n\t\t\t\t\t\t\t\tnode = elem;\n\t\t\t\t\t\t\t\touterCache = node[ expando ] || (node[ expando ] = {});\n\n\t\t\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\t\t\tuniqueCache = outerCache[ node.uniqueID ] ||\n\t\t\t\t\t\t\t\t\t(outerCache[ node.uniqueID ] = {});\n\n\t\t\t\t\t\t\t\tcache = uniqueCache[ type ] || [];\n\t\t\t\t\t\t\t\tnodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];\n\t\t\t\t\t\t\t\tdiff = nodeIndex;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// xml :nth-child(...)\n\t\t\t\t\t\t\t// or :nth-last-child(...) or :nth(-last)?-of-type(...)\n\t\t\t\t\t\t\tif ( diff === false ) {\n\t\t\t\t\t\t\t\t// Use the same loop as above to seek `elem` from the start\n\t\t\t\t\t\t\t\twhile ( (node = ++nodeIndex && node && node[ dir ] ||\n\t\t\t\t\t\t\t\t\t(diff = nodeIndex = 0) || start.pop()) ) {\n\n\t\t\t\t\t\t\t\t\tif ( ( ofType ?\n\t\t\t\t\t\t\t\t\t\tnode.nodeName.toLowerCase() === name :\n\t\t\t\t\t\t\t\t\t\tnode.nodeType === 1 ) &&\n\t\t\t\t\t\t\t\t\t\t++diff ) {\n\n\t\t\t\t\t\t\t\t\t\t// Cache the index of each encountered element\n\t\t\t\t\t\t\t\t\t\tif ( useCache ) {\n\t\t\t\t\t\t\t\t\t\t\touterCache = node[ expando ] || (node[ expando ] = {});\n\n\t\t\t\t\t\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\t\t\t\t\t\tuniqueCache = outerCache[ node.uniqueID ] ||\n\t\t\t\t\t\t\t\t\t\t\t\t(outerCache[ node.uniqueID ] = {});\n\n\t\t\t\t\t\t\t\t\t\t\tuniqueCache[ type ] = [ dirruns, diff ];\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tif ( node === elem ) {\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Incorporate the offset, then check against cycle size\n\t\t\t\t\t\tdiff -= last;\n\t\t\t\t\t\treturn diff === first || ( diff % first === 0 && diff / first >= 0 );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t},\n\n\t\t\"PSEUDO\": function( pseudo, argument ) {\n\t\t\t// pseudo-class names are case-insensitive\n\t\t\t// http://www.w3.org/TR/selectors/#pseudo-classes\n\t\t\t// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters\n\t\t\t// Remember that setFilters inherits from pseudos\n\t\t\tvar args,\n\t\t\t\tfn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||\n\t\t\t\t\tSizzle.error( \"unsupported pseudo: \" + pseudo );\n\n\t\t\t// The user may use createPseudo to indicate that\n\t\t\t// arguments are needed to create the filter function\n\t\t\t// just as Sizzle does\n\t\t\tif ( fn[ expando ] ) {\n\t\t\t\treturn fn( argument );\n\t\t\t}\n\n\t\t\t// But maintain support for old signatures\n\t\t\tif ( fn.length > 1 ) {\n\t\t\t\targs = [ pseudo, pseudo, \"\", argument ];\n\t\t\t\treturn Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?\n\t\t\t\t\tmarkFunction(function( seed, matches ) {\n\t\t\t\t\t\tvar idx,\n\t\t\t\t\t\t\tmatched = fn( seed, argument ),\n\t\t\t\t\t\t\ti = matched.length;\n\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\tidx = indexOf( seed, matched[i] );\n\t\t\t\t\t\t\tseed[ idx ] = !( matches[ idx ] = matched[i] );\n\t\t\t\t\t\t}\n\t\t\t\t\t}) :\n\t\t\t\t\tfunction( elem ) {\n\t\t\t\t\t\treturn fn( elem, 0, args );\n\t\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn fn;\n\t\t}\n\t},\n\n\tpseudos: {\n\t\t// Potentially complex pseudos\n\t\t\"not\": markFunction(function( selector ) {\n\t\t\t// Trim the selector passed to compile\n\t\t\t// to avoid treating leading and trailing\n\t\t\t// spaces as combinators\n\t\t\tvar input = [],\n\t\t\t\tresults = [],\n\t\t\t\tmatcher = compile( selector.replace( rtrim, \"$1\" ) );\n\n\t\t\treturn matcher[ expando ] ?\n\t\t\t\tmarkFunction(function( seed, matches, context, xml ) {\n\t\t\t\t\tvar elem,\n\t\t\t\t\t\tunmatched = matcher( seed, null, xml, [] ),\n\t\t\t\t\t\ti = seed.length;\n\n\t\t\t\t\t// Match elements unmatched by `matcher`\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tif ( (elem = unmatched[i]) ) {\n\t\t\t\t\t\t\tseed[i] = !(matches[i] = elem);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}) :\n\t\t\t\tfunction( elem, context, xml ) {\n\t\t\t\t\tinput[0] = elem;\n\t\t\t\t\tmatcher( input, null, xml, results );\n\t\t\t\t\t// Don't keep the element (issue #299)\n\t\t\t\t\tinput[0] = null;\n\t\t\t\t\treturn !results.pop();\n\t\t\t\t};\n\t\t}),\n\n\t\t\"has\": markFunction(function( selector ) {\n\t\t\treturn function( elem ) {\n\t\t\t\treturn Sizzle( selector, elem ).length > 0;\n\t\t\t};\n\t\t}),\n\n\t\t\"contains\": markFunction(function( text ) {\n\t\t\ttext = text.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\treturn ( elem.textContent || elem.innerText || getText( elem ) ).indexOf( text ) > -1;\n\t\t\t};\n\t\t}),\n\n\t\t// \"Whether an element is represented by a :lang() selector\n\t\t// is based solely on the element's language value\n\t\t// being equal to the identifier C,\n\t\t// or beginning with the identifier C immediately followed by \"-\".\n\t\t// The matching of C against the element's language value is performed case-insensitively.\n\t\t// The identifier C does not have to be a valid language name.\"\n\t\t// http://www.w3.org/TR/selectors/#lang-pseudo\n\t\t\"lang\": markFunction( function( lang ) {\n\t\t\t// lang value must be a valid identifier\n\t\t\tif ( !ridentifier.test(lang || \"\") ) {\n\t\t\t\tSizzle.error( \"unsupported lang: \" + lang );\n\t\t\t}\n\t\t\tlang = lang.replace( runescape, funescape ).toLowerCase();\n\t\t\treturn function( elem ) {\n\t\t\t\tvar elemLang;\n\t\t\t\tdo {\n\t\t\t\t\tif ( (elemLang = documentIsHTML ?\n\t\t\t\t\t\telem.lang :\n\t\t\t\t\t\telem.getAttribute(\"xml:lang\") || elem.getAttribute(\"lang\")) ) {\n\n\t\t\t\t\t\telemLang = elemLang.toLowerCase();\n\t\t\t\t\t\treturn elemLang === lang || elemLang.indexOf( lang + \"-\" ) === 0;\n\t\t\t\t\t}\n\t\t\t\t} while ( (elem = elem.parentNode) && elem.nodeType === 1 );\n\t\t\t\treturn false;\n\t\t\t};\n\t\t}),\n\n\t\t// Miscellaneous\n\t\t\"target\": function( elem ) {\n\t\t\tvar hash = window.location && window.location.hash;\n\t\t\treturn hash && hash.slice( 1 ) === elem.id;\n\t\t},\n\n\t\t\"root\": function( elem ) {\n\t\t\treturn elem === docElem;\n\t\t},\n\n\t\t\"focus\": function( elem ) {\n\t\t\treturn elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);\n\t\t},\n\n\t\t// Boolean properties\n\t\t\"enabled\": createDisabledPseudo( false ),\n\t\t\"disabled\": createDisabledPseudo( true ),\n\n\t\t\"checked\": function( elem ) {\n\t\t\t// In CSS3, :checked should return both checked and selected elements\n\t\t\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\n\t\t\tvar nodeName = elem.nodeName.toLowerCase();\n\t\t\treturn (nodeName === \"input\" && !!elem.checked) || (nodeName === \"option\" && !!elem.selected);\n\t\t},\n\n\t\t\"selected\": function( elem ) {\n\t\t\t// Accessing this property makes selected-by-default\n\t\t\t// options in Safari work properly\n\t\t\tif ( elem.parentNode ) {\n\t\t\t\telem.parentNode.selectedIndex;\n\t\t\t}\n\n\t\t\treturn elem.selected === true;\n\t\t},\n\n\t\t// Contents\n\t\t\"empty\": function( elem ) {\n\t\t\t// http://www.w3.org/TR/selectors/#empty-pseudo\n\t\t\t// :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),\n\t\t\t//   but not by others (comment: 8; processing instruction: 7; etc.)\n\t\t\t// nodeType < 6 works because attributes (2) do not appear as children\n\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n\t\t\t\tif ( elem.nodeType < 6 ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\n\t\t\"parent\": function( elem ) {\n\t\t\treturn !Expr.pseudos[\"empty\"]( elem );\n\t\t},\n\n\t\t// Element/input types\n\t\t\"header\": function( elem ) {\n\t\t\treturn rheader.test( elem.nodeName );\n\t\t},\n\n\t\t\"input\": function( elem ) {\n\t\t\treturn rinputs.test( elem.nodeName );\n\t\t},\n\n\t\t\"button\": function( elem ) {\n\t\t\tvar name = elem.nodeName.toLowerCase();\n\t\t\treturn name === \"input\" && elem.type === \"button\" || name === \"button\";\n\t\t},\n\n\t\t\"text\": function( elem ) {\n\t\t\tvar attr;\n\t\t\treturn elem.nodeName.toLowerCase() === \"input\" &&\n\t\t\t\telem.type === \"text\" &&\n\n\t\t\t\t// Support: IE<8\n\t\t\t\t// New HTML5 attribute values (e.g., \"search\") appear with elem.type === \"text\"\n\t\t\t\t( (attr = elem.getAttribute(\"type\")) == null || attr.toLowerCase() === \"text\" );\n\t\t},\n\n\t\t// Position-in-collection\n\t\t\"first\": createPositionalPseudo(function() {\n\t\t\treturn [ 0 ];\n\t\t}),\n\n\t\t\"last\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\treturn [ length - 1 ];\n\t\t}),\n\n\t\t\"eq\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\treturn [ argument < 0 ? argument + length : argument ];\n\t\t}),\n\n\t\t\"even\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\tvar i = 0;\n\t\t\tfor ( ; i < length; i += 2 ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"odd\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\tvar i = 1;\n\t\t\tfor ( ; i < length; i += 2 ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"lt\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\tvar i = argument < 0 ? argument + length : argument;\n\t\t\tfor ( ; --i >= 0; ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"gt\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\tvar i = argument < 0 ? argument + length : argument;\n\t\t\tfor ( ; ++i < length; ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t})\n\t}\n};\n\nExpr.pseudos[\"nth\"] = Expr.pseudos[\"eq\"];\n\n// Add button/input type pseudos\nfor ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {\n\tExpr.pseudos[ i ] = createInputPseudo( i );\n}\nfor ( i in { submit: true, reset: true } ) {\n\tExpr.pseudos[ i ] = createButtonPseudo( i );\n}\n\n// Easy API for creating new setFilters\nfunction setFilters() {}\nsetFilters.prototype = Expr.filters = Expr.pseudos;\nExpr.setFilters = new setFilters();\n\ntokenize = Sizzle.tokenize = function( selector, parseOnly ) {\n\tvar matched, match, tokens, type,\n\t\tsoFar, groups, preFilters,\n\t\tcached = tokenCache[ selector + \" \" ];\n\n\tif ( cached ) {\n\t\treturn parseOnly ? 0 : cached.slice( 0 );\n\t}\n\n\tsoFar = selector;\n\tgroups = [];\n\tpreFilters = Expr.preFilter;\n\n\twhile ( soFar ) {\n\n\t\t// Comma and first run\n\t\tif ( !matched || (match = rcomma.exec( soFar )) ) {\n\t\t\tif ( match ) {\n\t\t\t\t// Don't consume trailing commas as valid\n\t\t\t\tsoFar = soFar.slice( match[0].length ) || soFar;\n\t\t\t}\n\t\t\tgroups.push( (tokens = []) );\n\t\t}\n\n\t\tmatched = false;\n\n\t\t// Combinators\n\t\tif ( (match = rcombinators.exec( soFar )) ) {\n\t\t\tmatched = match.shift();\n\t\t\ttokens.push({\n\t\t\t\tvalue: matched,\n\t\t\t\t// Cast descendant combinators to space\n\t\t\t\ttype: match[0].replace( rtrim, \" \" )\n\t\t\t});\n\t\t\tsoFar = soFar.slice( matched.length );\n\t\t}\n\n\t\t// Filters\n\t\tfor ( type in Expr.filter ) {\n\t\t\tif ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||\n\t\t\t\t(match = preFilters[ type ]( match ))) ) {\n\t\t\t\tmatched = match.shift();\n\t\t\t\ttokens.push({\n\t\t\t\t\tvalue: matched,\n\t\t\t\t\ttype: type,\n\t\t\t\t\tmatches: match\n\t\t\t\t});\n\t\t\t\tsoFar = soFar.slice( matched.length );\n\t\t\t}\n\t\t}\n\n\t\tif ( !matched ) {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\t// Return the length of the invalid excess\n\t// if we're just parsing\n\t// Otherwise, throw an error or return tokens\n\treturn parseOnly ?\n\t\tsoFar.length :\n\t\tsoFar ?\n\t\t\tSizzle.error( selector ) :\n\t\t\t// Cache the tokens\n\t\t\ttokenCache( selector, groups ).slice( 0 );\n};\n\nfunction toSelector( tokens ) {\n\tvar i = 0,\n\t\tlen = tokens.length,\n\t\tselector = \"\";\n\tfor ( ; i < len; i++ ) {\n\t\tselector += tokens[i].value;\n\t}\n\treturn selector;\n}\n\nfunction addCombinator( matcher, combinator, base ) {\n\tvar dir = combinator.dir,\n\t\tskip = combinator.next,\n\t\tkey = skip || dir,\n\t\tcheckNonElements = base && key === \"parentNode\",\n\t\tdoneName = done++;\n\n\treturn combinator.first ?\n\t\t// Check against closest ancestor/preceding element\n\t\tfunction( elem, context, xml ) {\n\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\treturn matcher( elem, context, xml );\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t} :\n\n\t\t// Check against all ancestor/preceding elements\n\t\tfunction( elem, context, xml ) {\n\t\t\tvar oldCache, uniqueCache, outerCache,\n\t\t\t\tnewCache = [ dirruns, doneName ];\n\n\t\t\t// We can't set arbitrary data on XML nodes, so they don't benefit from combinator caching\n\t\t\tif ( xml ) {\n\t\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\t\tif ( matcher( elem, context, xml ) ) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\t\touterCache = elem[ expando ] || (elem[ expando ] = {});\n\n\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\tuniqueCache = outerCache[ elem.uniqueID ] || (outerCache[ elem.uniqueID ] = {});\n\n\t\t\t\t\t\tif ( skip && skip === elem.nodeName.toLowerCase() ) {\n\t\t\t\t\t\t\telem = elem[ dir ] || elem;\n\t\t\t\t\t\t} else if ( (oldCache = uniqueCache[ key ]) &&\n\t\t\t\t\t\t\toldCache[ 0 ] === dirruns && oldCache[ 1 ] === doneName ) {\n\n\t\t\t\t\t\t\t// Assign to newCache so results back-propagate to previous elements\n\t\t\t\t\t\t\treturn (newCache[ 2 ] = oldCache[ 2 ]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Reuse newcache so results back-propagate to previous elements\n\t\t\t\t\t\t\tuniqueCache[ key ] = newCache;\n\n\t\t\t\t\t\t\t// A match means we're done; a fail means we have to keep checking\n\t\t\t\t\t\t\tif ( (newCache[ 2 ] = matcher( elem, context, xml )) ) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n}\n\nfunction elementMatcher( matchers ) {\n\treturn matchers.length > 1 ?\n\t\tfunction( elem, context, xml ) {\n\t\t\tvar i = matchers.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( !matchers[i]( elem, context, xml ) ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t} :\n\t\tmatchers[0];\n}\n\nfunction multipleContexts( selector, contexts, results ) {\n\tvar i = 0,\n\t\tlen = contexts.length;\n\tfor ( ; i < len; i++ ) {\n\t\tSizzle( selector, contexts[i], results );\n\t}\n\treturn results;\n}\n\nfunction condense( unmatched, map, filter, context, xml ) {\n\tvar elem,\n\t\tnewUnmatched = [],\n\t\ti = 0,\n\t\tlen = unmatched.length,\n\t\tmapped = map != null;\n\n\tfor ( ; i < len; i++ ) {\n\t\tif ( (elem = unmatched[i]) ) {\n\t\t\tif ( !filter || filter( elem, context, xml ) ) {\n\t\t\t\tnewUnmatched.push( elem );\n\t\t\t\tif ( mapped ) {\n\t\t\t\t\tmap.push( i );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn newUnmatched;\n}\n\nfunction setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {\n\tif ( postFilter && !postFilter[ expando ] ) {\n\t\tpostFilter = setMatcher( postFilter );\n\t}\n\tif ( postFinder && !postFinder[ expando ] ) {\n\t\tpostFinder = setMatcher( postFinder, postSelector );\n\t}\n\treturn markFunction(function( seed, results, context, xml ) {\n\t\tvar temp, i, elem,\n\t\t\tpreMap = [],\n\t\t\tpostMap = [],\n\t\t\tpreexisting = results.length,\n\n\t\t\t// Get initial elements from seed or context\n\t\t\telems = seed || multipleContexts( selector || \"*\", context.nodeType ? [ context ] : context, [] ),\n\n\t\t\t// Prefilter to get matcher input, preserving a map for seed-results synchronization\n\t\t\tmatcherIn = preFilter && ( seed || !selector ) ?\n\t\t\t\tcondense( elems, preMap, preFilter, context, xml ) :\n\t\t\t\telems,\n\n\t\t\tmatcherOut = matcher ?\n\t\t\t\t// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,\n\t\t\t\tpostFinder || ( seed ? preFilter : preexisting || postFilter ) ?\n\n\t\t\t\t\t// ...intermediate processing is necessary\n\t\t\t\t\t[] :\n\n\t\t\t\t\t// ...otherwise use results directly\n\t\t\t\t\tresults :\n\t\t\t\tmatcherIn;\n\n\t\t// Find primary matches\n\t\tif ( matcher ) {\n\t\t\tmatcher( matcherIn, matcherOut, context, xml );\n\t\t}\n\n\t\t// Apply postFilter\n\t\tif ( postFilter ) {\n\t\t\ttemp = condense( matcherOut, postMap );\n\t\t\tpostFilter( temp, [], context, xml );\n\n\t\t\t// Un-match failing elements by moving them back to matcherIn\n\t\t\ti = temp.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( (elem = temp[i]) ) {\n\t\t\t\t\tmatcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( seed ) {\n\t\t\tif ( postFinder || preFilter ) {\n\t\t\t\tif ( postFinder ) {\n\t\t\t\t\t// Get the final matcherOut by condensing this intermediate into postFinder contexts\n\t\t\t\t\ttemp = [];\n\t\t\t\t\ti = matcherOut.length;\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tif ( (elem = matcherOut[i]) ) {\n\t\t\t\t\t\t\t// Restore matcherIn since elem is not yet a final match\n\t\t\t\t\t\t\ttemp.push( (matcherIn[i] = elem) );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tpostFinder( null, (matcherOut = []), temp, xml );\n\t\t\t\t}\n\n\t\t\t\t// Move matched elements from seed to results to keep them synchronized\n\t\t\t\ti = matcherOut.length;\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\tif ( (elem = matcherOut[i]) &&\n\t\t\t\t\t\t(temp = postFinder ? indexOf( seed, elem ) : preMap[i]) > -1 ) {\n\n\t\t\t\t\t\tseed[temp] = !(results[temp] = elem);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Add elements to results, through postFinder if defined\n\t\t} else {\n\t\t\tmatcherOut = condense(\n\t\t\t\tmatcherOut === results ?\n\t\t\t\t\tmatcherOut.splice( preexisting, matcherOut.length ) :\n\t\t\t\t\tmatcherOut\n\t\t\t);\n\t\t\tif ( postFinder ) {\n\t\t\t\tpostFinder( null, results, matcherOut, xml );\n\t\t\t} else {\n\t\t\t\tpush.apply( results, matcherOut );\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction matcherFromTokens( tokens ) {\n\tvar checkContext, matcher, j,\n\t\tlen = tokens.length,\n\t\tleadingRelative = Expr.relative[ tokens[0].type ],\n\t\timplicitRelative = leadingRelative || Expr.relative[\" \"],\n\t\ti = leadingRelative ? 1 : 0,\n\n\t\t// The foundational matcher ensures that elements are reachable from top-level context(s)\n\t\tmatchContext = addCombinator( function( elem ) {\n\t\t\treturn elem === checkContext;\n\t\t}, implicitRelative, true ),\n\t\tmatchAnyContext = addCombinator( function( elem ) {\n\t\t\treturn indexOf( checkContext, elem ) > -1;\n\t\t}, implicitRelative, true ),\n\t\tmatchers = [ function( elem, context, xml ) {\n\t\t\tvar ret = ( !leadingRelative && ( xml || context !== outermostContext ) ) || (\n\t\t\t\t(checkContext = context).nodeType ?\n\t\t\t\t\tmatchContext( elem, context, xml ) :\n\t\t\t\t\tmatchAnyContext( elem, context, xml ) );\n\t\t\t// Avoid hanging onto element (issue #299)\n\t\t\tcheckContext = null;\n\t\t\treturn ret;\n\t\t} ];\n\n\tfor ( ; i < len; i++ ) {\n\t\tif ( (matcher = Expr.relative[ tokens[i].type ]) ) {\n\t\t\tmatchers = [ addCombinator(elementMatcher( matchers ), matcher) ];\n\t\t} else {\n\t\t\tmatcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );\n\n\t\t\t// Return special upon seeing a positional matcher\n\t\t\tif ( matcher[ expando ] ) {\n\t\t\t\t// Find the next relative operator (if any) for proper handling\n\t\t\t\tj = ++i;\n\t\t\t\tfor ( ; j < len; j++ ) {\n\t\t\t\t\tif ( Expr.relative[ tokens[j].type ] ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn setMatcher(\n\t\t\t\t\ti > 1 && elementMatcher( matchers ),\n\t\t\t\t\ti > 1 && toSelector(\n\t\t\t\t\t\t// If the preceding token was a descendant combinator, insert an implicit any-element `*`\n\t\t\t\t\t\ttokens.slice( 0, i - 1 ).concat({ value: tokens[ i - 2 ].type === \" \" ? \"*\" : \"\" })\n\t\t\t\t\t).replace( rtrim, \"$1\" ),\n\t\t\t\t\tmatcher,\n\t\t\t\t\ti < j && matcherFromTokens( tokens.slice( i, j ) ),\n\t\t\t\t\tj < len && matcherFromTokens( (tokens = tokens.slice( j )) ),\n\t\t\t\t\tj < len && toSelector( tokens )\n\t\t\t\t);\n\t\t\t}\n\t\t\tmatchers.push( matcher );\n\t\t}\n\t}\n\n\treturn elementMatcher( matchers );\n}\n\nfunction matcherFromGroupMatchers( elementMatchers, setMatchers ) {\n\tvar bySet = setMatchers.length > 0,\n\t\tbyElement = elementMatchers.length > 0,\n\t\tsuperMatcher = function( seed, context, xml, results, outermost ) {\n\t\t\tvar elem, j, matcher,\n\t\t\t\tmatchedCount = 0,\n\t\t\t\ti = \"0\",\n\t\t\t\tunmatched = seed && [],\n\t\t\t\tsetMatched = [],\n\t\t\t\tcontextBackup = outermostContext,\n\t\t\t\t// We must always have either seed elements or outermost context\n\t\t\t\telems = seed || byElement && Expr.find[\"TAG\"]( \"*\", outermost ),\n\t\t\t\t// Use integer dirruns iff this is the outermost matcher\n\t\t\t\tdirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1),\n\t\t\t\tlen = elems.length;\n\n\t\t\tif ( outermost ) {\n\t\t\t\toutermostContext = context === document || context || outermost;\n\t\t\t}\n\n\t\t\t// Add elements passing elementMatchers directly to results\n\t\t\t// Support: IE<9, Safari\n\t\t\t// Tolerate NodeList properties (IE: \"length\"; Safari: <number>) matching elements by id\n\t\t\tfor ( ; i !== len && (elem = elems[i]) != null; i++ ) {\n\t\t\t\tif ( byElement && elem ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\tif ( !context && elem.ownerDocument !== document ) {\n\t\t\t\t\t\tsetDocument( elem );\n\t\t\t\t\t\txml = !documentIsHTML;\n\t\t\t\t\t}\n\t\t\t\t\twhile ( (matcher = elementMatchers[j++]) ) {\n\t\t\t\t\t\tif ( matcher( elem, context || document, xml) ) {\n\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ( outermost ) {\n\t\t\t\t\t\tdirruns = dirrunsUnique;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Track unmatched elements for set filters\n\t\t\t\tif ( bySet ) {\n\t\t\t\t\t// They will have gone through all possible matchers\n\t\t\t\t\tif ( (elem = !matcher && elem) ) {\n\t\t\t\t\t\tmatchedCount--;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Lengthen the array for every element, matched or not\n\t\t\t\t\tif ( seed ) {\n\t\t\t\t\t\tunmatched.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// `i` is now the count of elements visited above, and adding it to `matchedCount`\n\t\t\t// makes the latter nonnegative.\n\t\t\tmatchedCount += i;\n\n\t\t\t// Apply set filters to unmatched elements\n\t\t\t// NOTE: This can be skipped if there are no unmatched elements (i.e., `matchedCount`\n\t\t\t// equals `i`), unless we didn't visit _any_ elements in the above loop because we have\n\t\t\t// no element matchers and no seed.\n\t\t\t// Incrementing an initially-string \"0\" `i` allows `i` to remain a string only in that\n\t\t\t// case, which will result in a \"00\" `matchedCount` that differs from `i` but is also\n\t\t\t// numerically zero.\n\t\t\tif ( bySet && i !== matchedCount ) {\n\t\t\t\tj = 0;\n\t\t\t\twhile ( (matcher = setMatchers[j++]) ) {\n\t\t\t\t\tmatcher( unmatched, setMatched, context, xml );\n\t\t\t\t}\n\n\t\t\t\tif ( seed ) {\n\t\t\t\t\t// Reintegrate element matches to eliminate the need for sorting\n\t\t\t\t\tif ( matchedCount > 0 ) {\n\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\tif ( !(unmatched[i] || setMatched[i]) ) {\n\t\t\t\t\t\t\t\tsetMatched[i] = pop.call( results );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Discard index placeholder values to get only actual matches\n\t\t\t\t\tsetMatched = condense( setMatched );\n\t\t\t\t}\n\n\t\t\t\t// Add matches to results\n\t\t\t\tpush.apply( results, setMatched );\n\n\t\t\t\t// Seedless set matches succeeding multiple successful matchers stipulate sorting\n\t\t\t\tif ( outermost && !seed && setMatched.length > 0 &&\n\t\t\t\t\t( matchedCount + setMatchers.length ) > 1 ) {\n\n\t\t\t\t\tSizzle.uniqueSort( results );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Override manipulation of globals by nested matchers\n\t\t\tif ( outermost ) {\n\t\t\t\tdirruns = dirrunsUnique;\n\t\t\t\toutermostContext = contextBackup;\n\t\t\t}\n\n\t\t\treturn unmatched;\n\t\t};\n\n\treturn bySet ?\n\t\tmarkFunction( superMatcher ) :\n\t\tsuperMatcher;\n}\n\ncompile = Sizzle.compile = function( selector, match /* Internal Use Only */ ) {\n\tvar i,\n\t\tsetMatchers = [],\n\t\telementMatchers = [],\n\t\tcached = compilerCache[ selector + \" \" ];\n\n\tif ( !cached ) {\n\t\t// Generate a function of recursive functions that can be used to check each element\n\t\tif ( !match ) {\n\t\t\tmatch = tokenize( selector );\n\t\t}\n\t\ti = match.length;\n\t\twhile ( i-- ) {\n\t\t\tcached = matcherFromTokens( match[i] );\n\t\t\tif ( cached[ expando ] ) {\n\t\t\t\tsetMatchers.push( cached );\n\t\t\t} else {\n\t\t\t\telementMatchers.push( cached );\n\t\t\t}\n\t\t}\n\n\t\t// Cache the compiled function\n\t\tcached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );\n\n\t\t// Save selector and tokenization\n\t\tcached.selector = selector;\n\t}\n\treturn cached;\n};\n\n/**\n * A low-level selection function that works with Sizzle's compiled\n *  selector functions\n * @param {String|Function} selector A selector or a pre-compiled\n *  selector function built with Sizzle.compile\n * @param {Element} context\n * @param {Array} [results]\n * @param {Array} [seed] A set of elements to match against\n */\nselect = Sizzle.select = function( selector, context, results, seed ) {\n\tvar i, tokens, token, type, find,\n\t\tcompiled = typeof selector === \"function\" && selector,\n\t\tmatch = !seed && tokenize( (selector = compiled.selector || selector) );\n\n\tresults = results || [];\n\n\t// Try to minimize operations if there is only one selector in the list and no seed\n\t// (the latter of which guarantees us context)\n\tif ( match.length === 1 ) {\n\n\t\t// Reduce context if the leading compound selector is an ID\n\t\ttokens = match[0] = match[0].slice( 0 );\n\t\tif ( tokens.length > 2 && (token = tokens[0]).type === \"ID\" &&\n\t\t\t\tcontext.nodeType === 9 && documentIsHTML && Expr.relative[ tokens[1].type ] ) {\n\n\t\t\tcontext = ( Expr.find[\"ID\"]( token.matches[0].replace(runescape, funescape), context ) || [] )[0];\n\t\t\tif ( !context ) {\n\t\t\t\treturn results;\n\n\t\t\t// Precompiled matchers will still verify ancestry, so step up a level\n\t\t\t} else if ( compiled ) {\n\t\t\t\tcontext = context.parentNode;\n\t\t\t}\n\n\t\t\tselector = selector.slice( tokens.shift().value.length );\n\t\t}\n\n\t\t// Fetch a seed set for right-to-left matching\n\t\ti = matchExpr[\"needsContext\"].test( selector ) ? 0 : tokens.length;\n\t\twhile ( i-- ) {\n\t\t\ttoken = tokens[i];\n\n\t\t\t// Abort if we hit a combinator\n\t\t\tif ( Expr.relative[ (type = token.type) ] ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( (find = Expr.find[ type ]) ) {\n\t\t\t\t// Search, expanding context for leading sibling combinators\n\t\t\t\tif ( (seed = find(\n\t\t\t\t\ttoken.matches[0].replace( runescape, funescape ),\n\t\t\t\t\trsibling.test( tokens[0].type ) && testContext( context.parentNode ) || context\n\t\t\t\t)) ) {\n\n\t\t\t\t\t// If seed is empty or no tokens remain, we can return early\n\t\t\t\t\ttokens.splice( i, 1 );\n\t\t\t\t\tselector = seed.length && toSelector( tokens );\n\t\t\t\t\tif ( !selector ) {\n\t\t\t\t\t\tpush.apply( results, seed );\n\t\t\t\t\t\treturn results;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Compile and execute a filtering function if one is not provided\n\t// Provide `match` to avoid retokenization if we modified the selector above\n\t( compiled || compile( selector, match ) )(\n\t\tseed,\n\t\tcontext,\n\t\t!documentIsHTML,\n\t\tresults,\n\t\t!context || rsibling.test( selector ) && testContext( context.parentNode ) || context\n\t);\n\treturn results;\n};\n\n// One-time assignments\n\n// Sort stability\nsupport.sortStable = expando.split(\"\").sort( sortOrder ).join(\"\") === expando;\n\n// Support: Chrome 14-35+\n// Always assume duplicates if they aren't passed to the comparison function\nsupport.detectDuplicates = !!hasDuplicate;\n\n// Initialize against the default document\nsetDocument();\n\n// Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)\n// Detached nodes confoundingly follow *each other*\nsupport.sortDetached = assert(function( el ) {\n\t// Should return 1, but returns 4 (following)\n\treturn el.compareDocumentPosition( document.createElement(\"fieldset\") ) & 1;\n});\n\n// Support: IE<8\n// Prevent attribute/property \"interpolation\"\n// https://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx\nif ( !assert(function( el ) {\n\tel.innerHTML = \"<a href='#'></a>\";\n\treturn el.firstChild.getAttribute(\"href\") === \"#\" ;\n}) ) {\n\taddHandle( \"type|href|height|width\", function( elem, name, isXML ) {\n\t\tif ( !isXML ) {\n\t\t\treturn elem.getAttribute( name, name.toLowerCase() === \"type\" ? 1 : 2 );\n\t\t}\n\t});\n}\n\n// Support: IE<9\n// Use defaultValue in place of getAttribute(\"value\")\nif ( !support.attributes || !assert(function( el ) {\n\tel.innerHTML = \"<input/>\";\n\tel.firstChild.setAttribute( \"value\", \"\" );\n\treturn el.firstChild.getAttribute( \"value\" ) === \"\";\n}) ) {\n\taddHandle( \"value\", function( elem, name, isXML ) {\n\t\tif ( !isXML && elem.nodeName.toLowerCase() === \"input\" ) {\n\t\t\treturn elem.defaultValue;\n\t\t}\n\t});\n}\n\n// Support: IE<9\n// Use getAttributeNode to fetch booleans when getAttribute lies\nif ( !assert(function( el ) {\n\treturn el.getAttribute(\"disabled\") == null;\n}) ) {\n\taddHandle( booleans, function( elem, name, isXML ) {\n\t\tvar val;\n\t\tif ( !isXML ) {\n\t\t\treturn elem[ name ] === true ? name.toLowerCase() :\n\t\t\t\t\t(val = elem.getAttributeNode( name )) && val.specified ?\n\t\t\t\t\tval.value :\n\t\t\t\tnull;\n\t\t}\n\t});\n}\n\nreturn Sizzle;\n\n})( window );\n\n\n\njQuery.find = Sizzle;\njQuery.expr = Sizzle.selectors;\n\n// Deprecated\njQuery.expr[ \":\" ] = jQuery.expr.pseudos;\njQuery.uniqueSort = jQuery.unique = Sizzle.uniqueSort;\njQuery.text = Sizzle.getText;\njQuery.isXMLDoc = Sizzle.isXML;\njQuery.contains = Sizzle.contains;\njQuery.escapeSelector = Sizzle.escape;\n\n\n\n\nvar dir = function( elem, dir, until ) {\n\tvar matched = [],\n\t\ttruncate = until !== undefined;\n\n\twhile ( ( elem = elem[ dir ] ) && elem.nodeType !== 9 ) {\n\t\tif ( elem.nodeType === 1 ) {\n\t\t\tif ( truncate && jQuery( elem ).is( until ) ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tmatched.push( elem );\n\t\t}\n\t}\n\treturn matched;\n};\n\n\nvar siblings = function( n, elem ) {\n\tvar matched = [];\n\n\tfor ( ; n; n = n.nextSibling ) {\n\t\tif ( n.nodeType === 1 && n !== elem ) {\n\t\t\tmatched.push( n );\n\t\t}\n\t}\n\n\treturn matched;\n};\n\n\nvar rneedsContext = jQuery.expr.match.needsContext;\n\nvar rsingleTag = ( /^<([a-z][^\\/\\0>:\\x20\\t\\r\\n\\f]*)[\\x20\\t\\r\\n\\f]*\\/?>(?:<\\/\\1>|)$/i );\n\n\n\nvar risSimple = /^.[^:#\\[\\.,]*$/;\n\n// Implement the identical functionality for filter and not\nfunction winnow( elements, qualifier, not ) {\n\tif ( jQuery.isFunction( qualifier ) ) {\n\t\treturn jQuery.grep( elements, function( elem, i ) {\n\t\t\treturn !!qualifier.call( elem, i, elem ) !== not;\n\t\t} );\n\t}\n\n\t// Single element\n\tif ( qualifier.nodeType ) {\n\t\treturn jQuery.grep( elements, function( elem ) {\n\t\t\treturn ( elem === qualifier ) !== not;\n\t\t} );\n\t}\n\n\t// Arraylike of elements (jQuery, arguments, Array)\n\tif ( typeof qualifier !== \"string\" ) {\n\t\treturn jQuery.grep( elements, function( elem ) {\n\t\t\treturn ( indexOf.call( qualifier, elem ) > -1 ) !== not;\n\t\t} );\n\t}\n\n\t// Simple selector that can be filtered directly, removing non-Elements\n\tif ( risSimple.test( qualifier ) ) {\n\t\treturn jQuery.filter( qualifier, elements, not );\n\t}\n\n\t// Complex selector, compare the two sets, removing non-Elements\n\tqualifier = jQuery.filter( qualifier, elements );\n\treturn jQuery.grep( elements, function( elem ) {\n\t\treturn ( indexOf.call( qualifier, elem ) > -1 ) !== not && elem.nodeType === 1;\n\t} );\n}\n\njQuery.filter = function( expr, elems, not ) {\n\tvar elem = elems[ 0 ];\n\n\tif ( not ) {\n\t\texpr = \":not(\" + expr + \")\";\n\t}\n\n\tif ( elems.length === 1 && elem.nodeType === 1 ) {\n\t\treturn jQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [];\n\t}\n\n\treturn jQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {\n\t\treturn elem.nodeType === 1;\n\t} ) );\n};\n\njQuery.fn.extend( {\n\tfind: function( selector ) {\n\t\tvar i, ret,\n\t\t\tlen = this.length,\n\t\t\tself = this;\n\n\t\tif ( typeof selector !== \"string\" ) {\n\t\t\treturn this.pushStack( jQuery( selector ).filter( function() {\n\t\t\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\t\t\tif ( jQuery.contains( self[ i ], this ) ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} ) );\n\t\t}\n\n\t\tret = this.pushStack( [] );\n\n\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\tjQuery.find( selector, self[ i ], ret );\n\t\t}\n\n\t\treturn len > 1 ? jQuery.uniqueSort( ret ) : ret;\n\t},\n\tfilter: function( selector ) {\n\t\treturn this.pushStack( winnow( this, selector || [], false ) );\n\t},\n\tnot: function( selector ) {\n\t\treturn this.pushStack( winnow( this, selector || [], true ) );\n\t},\n\tis: function( selector ) {\n\t\treturn !!winnow(\n\t\t\tthis,\n\n\t\t\t// If this is a positional/relative selector, check membership in the returned set\n\t\t\t// so $(\"p:first\").is(\"p:last\") won't return true for a doc with two \"p\".\n\t\t\ttypeof selector === \"string\" && rneedsContext.test( selector ) ?\n\t\t\t\tjQuery( selector ) :\n\t\t\t\tselector || [],\n\t\t\tfalse\n\t\t).length;\n\t}\n} );\n\n\n// Initialize a jQuery object\n\n\n// A central reference to the root jQuery(document)\nvar rootjQuery,\n\n\t// A simple way to check for HTML strings\n\t// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)\n\t// Strict HTML recognition (#11290: must start with <)\n\t// Shortcut simple #id case for speed\n\trquickExpr = /^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]+))$/,\n\n\tinit = jQuery.fn.init = function( selector, context, root ) {\n\t\tvar match, elem;\n\n\t\t// HANDLE: $(\"\"), $(null), $(undefined), $(false)\n\t\tif ( !selector ) {\n\t\t\treturn this;\n\t\t}\n\n\t\t// Method init() accepts an alternate rootjQuery\n\t\t// so migrate can support jQuery.sub (gh-2101)\n\t\troot = root || rootjQuery;\n\n\t\t// Handle HTML strings\n\t\tif ( typeof selector === \"string\" ) {\n\t\t\tif ( selector[ 0 ] === \"<\" &&\n\t\t\t\tselector[ selector.length - 1 ] === \">\" &&\n\t\t\t\tselector.length >= 3 ) {\n\n\t\t\t\t// Assume that strings that start and end with <> are HTML and skip the regex check\n\t\t\t\tmatch = [ null, selector, null ];\n\n\t\t\t} else {\n\t\t\t\tmatch = rquickExpr.exec( selector );\n\t\t\t}\n\n\t\t\t// Match html or make sure no context is specified for #id\n\t\t\tif ( match && ( match[ 1 ] || !context ) ) {\n\n\t\t\t\t// HANDLE: $(html) -> $(array)\n\t\t\t\tif ( match[ 1 ] ) {\n\t\t\t\t\tcontext = context instanceof jQuery ? context[ 0 ] : context;\n\n\t\t\t\t\t// Option to run scripts is true for back-compat\n\t\t\t\t\t// Intentionally let the error be thrown if parseHTML is not present\n\t\t\t\t\tjQuery.merge( this, jQuery.parseHTML(\n\t\t\t\t\t\tmatch[ 1 ],\n\t\t\t\t\t\tcontext && context.nodeType ? context.ownerDocument || context : document,\n\t\t\t\t\t\ttrue\n\t\t\t\t\t) );\n\n\t\t\t\t\t// HANDLE: $(html, props)\n\t\t\t\t\tif ( rsingleTag.test( match[ 1 ] ) && jQuery.isPlainObject( context ) ) {\n\t\t\t\t\t\tfor ( match in context ) {\n\n\t\t\t\t\t\t\t// Properties of context are called as methods if possible\n\t\t\t\t\t\t\tif ( jQuery.isFunction( this[ match ] ) ) {\n\t\t\t\t\t\t\t\tthis[ match ]( context[ match ] );\n\n\t\t\t\t\t\t\t// ...and otherwise set as attributes\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.attr( match, context[ match ] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this;\n\n\t\t\t\t// HANDLE: $(#id)\n\t\t\t\t} else {\n\t\t\t\t\telem = document.getElementById( match[ 2 ] );\n\n\t\t\t\t\tif ( elem ) {\n\n\t\t\t\t\t\t// Inject the element directly into the jQuery object\n\t\t\t\t\t\tthis[ 0 ] = elem;\n\t\t\t\t\t\tthis.length = 1;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\n\t\t\t// HANDLE: $(expr, $(...))\n\t\t\t} else if ( !context || context.jquery ) {\n\t\t\t\treturn ( context || root ).find( selector );\n\n\t\t\t// HANDLE: $(expr, context)\n\t\t\t// (which is just equivalent to: $(context).find(expr)\n\t\t\t} else {\n\t\t\t\treturn this.constructor( context ).find( selector );\n\t\t\t}\n\n\t\t// HANDLE: $(DOMElement)\n\t\t} else if ( selector.nodeType ) {\n\t\t\tthis[ 0 ] = selector;\n\t\t\tthis.length = 1;\n\t\t\treturn this;\n\n\t\t// HANDLE: $(function)\n\t\t// Shortcut for document ready\n\t\t} else if ( jQuery.isFunction( selector ) ) {\n\t\t\treturn root.ready !== undefined ?\n\t\t\t\troot.ready( selector ) :\n\n\t\t\t\t// Execute immediately if ready is not present\n\t\t\t\tselector( jQuery );\n\t\t}\n\n\t\treturn jQuery.makeArray( selector, this );\n\t};\n\n// Give the init function the jQuery prototype for later instantiation\ninit.prototype = jQuery.fn;\n\n// Initialize central reference\nrootjQuery = jQuery( document );\n\n\nvar rparentsprev = /^(?:parents|prev(?:Until|All))/,\n\n\t// Methods guaranteed to produce a unique set when starting from a unique set\n\tguaranteedUnique = {\n\t\tchildren: true,\n\t\tcontents: true,\n\t\tnext: true,\n\t\tprev: true\n\t};\n\njQuery.fn.extend( {\n\thas: function( target ) {\n\t\tvar targets = jQuery( target, this ),\n\t\t\tl = targets.length;\n\n\t\treturn this.filter( function() {\n\t\t\tvar i = 0;\n\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\tif ( jQuery.contains( this, targets[ i ] ) ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t},\n\n\tclosest: function( selectors, context ) {\n\t\tvar cur,\n\t\t\ti = 0,\n\t\t\tl = this.length,\n\t\t\tmatched = [],\n\t\t\ttargets = typeof selectors !== \"string\" && jQuery( selectors );\n\n\t\t// Positional selectors never match, since there's no _selection_ context\n\t\tif ( !rneedsContext.test( selectors ) ) {\n\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\tfor ( cur = this[ i ]; cur && cur !== context; cur = cur.parentNode ) {\n\n\t\t\t\t\t// Always skip document fragments\n\t\t\t\t\tif ( cur.nodeType < 11 && ( targets ?\n\t\t\t\t\t\ttargets.index( cur ) > -1 :\n\n\t\t\t\t\t\t// Don't pass non-elements to Sizzle\n\t\t\t\t\t\tcur.nodeType === 1 &&\n\t\t\t\t\t\t\tjQuery.find.matchesSelector( cur, selectors ) ) ) {\n\n\t\t\t\t\t\tmatched.push( cur );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.pushStack( matched.length > 1 ? jQuery.uniqueSort( matched ) : matched );\n\t},\n\n\t// Determine the position of an element within the set\n\tindex: function( elem ) {\n\n\t\t// No argument, return index in parent\n\t\tif ( !elem ) {\n\t\t\treturn ( this[ 0 ] && this[ 0 ].parentNode ) ? this.first().prevAll().length : -1;\n\t\t}\n\n\t\t// Index in selector\n\t\tif ( typeof elem === \"string\" ) {\n\t\t\treturn indexOf.call( jQuery( elem ), this[ 0 ] );\n\t\t}\n\n\t\t// Locate the position of the desired element\n\t\treturn indexOf.call( this,\n\n\t\t\t// If it receives a jQuery object, the first element is used\n\t\t\telem.jquery ? elem[ 0 ] : elem\n\t\t);\n\t},\n\n\tadd: function( selector, context ) {\n\t\treturn this.pushStack(\n\t\t\tjQuery.uniqueSort(\n\t\t\t\tjQuery.merge( this.get(), jQuery( selector, context ) )\n\t\t\t)\n\t\t);\n\t},\n\n\taddBack: function( selector ) {\n\t\treturn this.add( selector == null ?\n\t\t\tthis.prevObject : this.prevObject.filter( selector )\n\t\t);\n\t}\n} );\n\nfunction sibling( cur, dir ) {\n\twhile ( ( cur = cur[ dir ] ) && cur.nodeType !== 1 ) {}\n\treturn cur;\n}\n\njQuery.each( {\n\tparent: function( elem ) {\n\t\tvar parent = elem.parentNode;\n\t\treturn parent && parent.nodeType !== 11 ? parent : null;\n\t},\n\tparents: function( elem ) {\n\t\treturn dir( elem, \"parentNode\" );\n\t},\n\tparentsUntil: function( elem, i, until ) {\n\t\treturn dir( elem, \"parentNode\", until );\n\t},\n\tnext: function( elem ) {\n\t\treturn sibling( elem, \"nextSibling\" );\n\t},\n\tprev: function( elem ) {\n\t\treturn sibling( elem, \"previousSibling\" );\n\t},\n\tnextAll: function( elem ) {\n\t\treturn dir( elem, \"nextSibling\" );\n\t},\n\tprevAll: function( elem ) {\n\t\treturn dir( elem, \"previousSibling\" );\n\t},\n\tnextUntil: function( elem, i, until ) {\n\t\treturn dir( elem, \"nextSibling\", until );\n\t},\n\tprevUntil: function( elem, i, until ) {\n\t\treturn dir( elem, \"previousSibling\", until );\n\t},\n\tsiblings: function( elem ) {\n\t\treturn siblings( ( elem.parentNode || {} ).firstChild, elem );\n\t},\n\tchildren: function( elem ) {\n\t\treturn siblings( elem.firstChild );\n\t},\n\tcontents: function( elem ) {\n\t\treturn elem.contentDocument || jQuery.merge( [], elem.childNodes );\n\t}\n}, function( name, fn ) {\n\tjQuery.fn[ name ] = function( until, selector ) {\n\t\tvar matched = jQuery.map( this, fn, until );\n\n\t\tif ( name.slice( -5 ) !== \"Until\" ) {\n\t\t\tselector = until;\n\t\t}\n\n\t\tif ( selector && typeof selector === \"string\" ) {\n\t\t\tmatched = jQuery.filter( selector, matched );\n\t\t}\n\n\t\tif ( this.length > 1 ) {\n\n\t\t\t// Remove duplicates\n\t\t\tif ( !guaranteedUnique[ name ] ) {\n\t\t\t\tjQuery.uniqueSort( matched );\n\t\t\t}\n\n\t\t\t// Reverse order for parents* and prev-derivatives\n\t\t\tif ( rparentsprev.test( name ) ) {\n\t\t\t\tmatched.reverse();\n\t\t\t}\n\t\t}\n\n\t\treturn this.pushStack( matched );\n\t};\n} );\nvar rnothtmlwhite = ( /[^\\x20\\t\\r\\n\\f]+/g );\n\n\n\n// Convert String-formatted options into Object-formatted ones\nfunction createOptions( options ) {\n\tvar object = {};\n\tjQuery.each( options.match( rnothtmlwhite ) || [], function( _, flag ) {\n\t\tobject[ flag ] = true;\n\t} );\n\treturn object;\n}\n\n/*\n * Create a callback list using the following parameters:\n *\n *\toptions: an optional list of space-separated options that will change how\n *\t\t\tthe callback list behaves or a more traditional option object\n *\n * By default a callback list will act like an event callback list and can be\n * \"fired\" multiple times.\n *\n * Possible options:\n *\n *\tonce:\t\t\twill ensure the callback list can only be fired once (like a Deferred)\n *\n *\tmemory:\t\t\twill keep track of previous values and will call any callback added\n *\t\t\t\t\tafter the list has been fired right away with the latest \"memorized\"\n *\t\t\t\t\tvalues (like a Deferred)\n *\n *\tunique:\t\t\twill ensure a callback can only be added once (no duplicate in the list)\n *\n *\tstopOnFalse:\tinterrupt callings when a callback returns false\n *\n */\njQuery.Callbacks = function( options ) {\n\n\t// Convert options from String-formatted to Object-formatted if needed\n\t// (we check in cache first)\n\toptions = typeof options === \"string\" ?\n\t\tcreateOptions( options ) :\n\t\tjQuery.extend( {}, options );\n\n\tvar // Flag to know if list is currently firing\n\t\tfiring,\n\n\t\t// Last fire value for non-forgettable lists\n\t\tmemory,\n\n\t\t// Flag to know if list was already fired\n\t\tfired,\n\n\t\t// Flag to prevent firing\n\t\tlocked,\n\n\t\t// Actual callback list\n\t\tlist = [],\n\n\t\t// Queue of execution data for repeatable lists\n\t\tqueue = [],\n\n\t\t// Index of currently firing callback (modified by add/remove as needed)\n\t\tfiringIndex = -1,\n\n\t\t// Fire callbacks\n\t\tfire = function() {\n\n\t\t\t// Enforce single-firing\n\t\t\tlocked = options.once;\n\n\t\t\t// Execute callbacks for all pending executions,\n\t\t\t// respecting firingIndex overrides and runtime changes\n\t\t\tfired = firing = true;\n\t\t\tfor ( ; queue.length; firingIndex = -1 ) {\n\t\t\t\tmemory = queue.shift();\n\t\t\t\twhile ( ++firingIndex < list.length ) {\n\n\t\t\t\t\t// Run callback and check for early termination\n\t\t\t\t\tif ( list[ firingIndex ].apply( memory[ 0 ], memory[ 1 ] ) === false &&\n\t\t\t\t\t\toptions.stopOnFalse ) {\n\n\t\t\t\t\t\t// Jump to end and forget the data so .add doesn't re-fire\n\t\t\t\t\t\tfiringIndex = list.length;\n\t\t\t\t\t\tmemory = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Forget the data if we're done with it\n\t\t\tif ( !options.memory ) {\n\t\t\t\tmemory = false;\n\t\t\t}\n\n\t\t\tfiring = false;\n\n\t\t\t// Clean up if we're done firing for good\n\t\t\tif ( locked ) {\n\n\t\t\t\t// Keep an empty list if we have data for future add calls\n\t\t\t\tif ( memory ) {\n\t\t\t\t\tlist = [];\n\n\t\t\t\t// Otherwise, this object is spent\n\t\t\t\t} else {\n\t\t\t\t\tlist = \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t// Actual Callbacks object\n\t\tself = {\n\n\t\t\t// Add a callback or a collection of callbacks to the list\n\t\t\tadd: function() {\n\t\t\t\tif ( list ) {\n\n\t\t\t\t\t// If we have memory from a past run, we should fire after adding\n\t\t\t\t\tif ( memory && !firing ) {\n\t\t\t\t\t\tfiringIndex = list.length - 1;\n\t\t\t\t\t\tqueue.push( memory );\n\t\t\t\t\t}\n\n\t\t\t\t\t( function add( args ) {\n\t\t\t\t\t\tjQuery.each( args, function( _, arg ) {\n\t\t\t\t\t\t\tif ( jQuery.isFunction( arg ) ) {\n\t\t\t\t\t\t\t\tif ( !options.unique || !self.has( arg ) ) {\n\t\t\t\t\t\t\t\t\tlist.push( arg );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if ( arg && arg.length && jQuery.type( arg ) !== \"string\" ) {\n\n\t\t\t\t\t\t\t\t// Inspect recursively\n\t\t\t\t\t\t\t\tadd( arg );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t} )( arguments );\n\n\t\t\t\t\tif ( memory && !firing ) {\n\t\t\t\t\t\tfire();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Remove a callback from the list\n\t\t\tremove: function() {\n\t\t\t\tjQuery.each( arguments, function( _, arg ) {\n\t\t\t\t\tvar index;\n\t\t\t\t\twhile ( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {\n\t\t\t\t\t\tlist.splice( index, 1 );\n\n\t\t\t\t\t\t// Handle firing indexes\n\t\t\t\t\t\tif ( index <= firingIndex ) {\n\t\t\t\t\t\t\tfiringIndex--;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Check if a given callback is in the list.\n\t\t\t// If no argument is given, return whether or not list has callbacks attached.\n\t\t\thas: function( fn ) {\n\t\t\t\treturn fn ?\n\t\t\t\t\tjQuery.inArray( fn, list ) > -1 :\n\t\t\t\t\tlist.length > 0;\n\t\t\t},\n\n\t\t\t// Remove all callbacks from the list\n\t\t\tempty: function() {\n\t\t\t\tif ( list ) {\n\t\t\t\t\tlist = [];\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Disable .fire and .add\n\t\t\t// Abort any current/pending executions\n\t\t\t// Clear all callbacks and values\n\t\t\tdisable: function() {\n\t\t\t\tlocked = queue = [];\n\t\t\t\tlist = memory = \"\";\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\tdisabled: function() {\n\t\t\t\treturn !list;\n\t\t\t},\n\n\t\t\t// Disable .fire\n\t\t\t// Also disable .add unless we have memory (since it would have no effect)\n\t\t\t// Abort any pending executions\n\t\t\tlock: function() {\n\t\t\t\tlocked = queue = [];\n\t\t\t\tif ( !memory && !firing ) {\n\t\t\t\t\tlist = memory = \"\";\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\tlocked: function() {\n\t\t\t\treturn !!locked;\n\t\t\t},\n\n\t\t\t// Call all callbacks with the given context and arguments\n\t\t\tfireWith: function( context, args ) {\n\t\t\t\tif ( !locked ) {\n\t\t\t\t\targs = args || [];\n\t\t\t\t\targs = [ context, args.slice ? args.slice() : args ];\n\t\t\t\t\tqueue.push( args );\n\t\t\t\t\tif ( !firing ) {\n\t\t\t\t\t\tfire();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Call all the callbacks with the given arguments\n\t\t\tfire: function() {\n\t\t\t\tself.fireWith( this, arguments );\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// To know if the callbacks have already been called at least once\n\t\t\tfired: function() {\n\t\t\t\treturn !!fired;\n\t\t\t}\n\t\t};\n\n\treturn self;\n};\n\n\nfunction Identity( v ) {\n\treturn v;\n}\nfunction Thrower( ex ) {\n\tthrow ex;\n}\n\nfunction adoptValue( value, resolve, reject ) {\n\tvar method;\n\n\ttry {\n\n\t\t// Check for promise aspect first to privilege synchronous behavior\n\t\tif ( value && jQuery.isFunction( ( method = value.promise ) ) ) {\n\t\t\tmethod.call( value ).done( resolve ).fail( reject );\n\n\t\t// Other thenables\n\t\t} else if ( value && jQuery.isFunction( ( method = value.then ) ) ) {\n\t\t\tmethod.call( value, resolve, reject );\n\n\t\t// Other non-thenables\n\t\t} else {\n\n\t\t\t// Support: Android 4.0 only\n\t\t\t// Strict mode functions invoked without .call/.apply get global-object context\n\t\t\tresolve.call( undefined, value );\n\t\t}\n\n\t// For Promises/A+, convert exceptions into rejections\n\t// Since jQuery.when doesn't unwrap thenables, we can skip the extra checks appearing in\n\t// Deferred#then to conditionally suppress rejection.\n\t} catch ( value ) {\n\n\t\t// Support: Android 4.0 only\n\t\t// Strict mode functions invoked without .call/.apply get global-object context\n\t\treject.call( undefined, value );\n\t}\n}\n\njQuery.extend( {\n\n\tDeferred: function( func ) {\n\t\tvar tuples = [\n\n\t\t\t\t// action, add listener, callbacks,\n\t\t\t\t// ... .then handlers, argument index, [final state]\n\t\t\t\t[ \"notify\", \"progress\", jQuery.Callbacks( \"memory\" ),\n\t\t\t\t\tjQuery.Callbacks( \"memory\" ), 2 ],\n\t\t\t\t[ \"resolve\", \"done\", jQuery.Callbacks( \"once memory\" ),\n\t\t\t\t\tjQuery.Callbacks( \"once memory\" ), 0, \"resolved\" ],\n\t\t\t\t[ \"reject\", \"fail\", jQuery.Callbacks( \"once memory\" ),\n\t\t\t\t\tjQuery.Callbacks( \"once memory\" ), 1, \"rejected\" ]\n\t\t\t],\n\t\t\tstate = \"pending\",\n\t\t\tpromise = {\n\t\t\t\tstate: function() {\n\t\t\t\t\treturn state;\n\t\t\t\t},\n\t\t\t\talways: function() {\n\t\t\t\t\tdeferred.done( arguments ).fail( arguments );\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\t\t\t\t\"catch\": function( fn ) {\n\t\t\t\t\treturn promise.then( null, fn );\n\t\t\t\t},\n\n\t\t\t\t// Keep pipe for back-compat\n\t\t\t\tpipe: function( /* fnDone, fnFail, fnProgress */ ) {\n\t\t\t\t\tvar fns = arguments;\n\n\t\t\t\t\treturn jQuery.Deferred( function( newDefer ) {\n\t\t\t\t\t\tjQuery.each( tuples, function( i, tuple ) {\n\n\t\t\t\t\t\t\t// Map tuples (progress, done, fail) to arguments (done, fail, progress)\n\t\t\t\t\t\t\tvar fn = jQuery.isFunction( fns[ tuple[ 4 ] ] ) && fns[ tuple[ 4 ] ];\n\n\t\t\t\t\t\t\t// deferred.progress(function() { bind to newDefer or newDefer.notify })\n\t\t\t\t\t\t\t// deferred.done(function() { bind to newDefer or newDefer.resolve })\n\t\t\t\t\t\t\t// deferred.fail(function() { bind to newDefer or newDefer.reject })\n\t\t\t\t\t\t\tdeferred[ tuple[ 1 ] ]( function() {\n\t\t\t\t\t\t\t\tvar returned = fn && fn.apply( this, arguments );\n\t\t\t\t\t\t\t\tif ( returned && jQuery.isFunction( returned.promise ) ) {\n\t\t\t\t\t\t\t\t\treturned.promise()\n\t\t\t\t\t\t\t\t\t\t.progress( newDefer.notify )\n\t\t\t\t\t\t\t\t\t\t.done( newDefer.resolve )\n\t\t\t\t\t\t\t\t\t\t.fail( newDefer.reject );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tnewDefer[ tuple[ 0 ] + \"With\" ](\n\t\t\t\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\t\t\t\tfn ? [ returned ] : arguments\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} );\n\t\t\t\t\t\tfns = null;\n\t\t\t\t\t} ).promise();\n\t\t\t\t},\n\t\t\t\tthen: function( onFulfilled, onRejected, onProgress ) {\n\t\t\t\t\tvar maxDepth = 0;\n\t\t\t\t\tfunction resolve( depth, deferred, handler, special ) {\n\t\t\t\t\t\treturn function() {\n\t\t\t\t\t\t\tvar that = this,\n\t\t\t\t\t\t\t\targs = arguments,\n\t\t\t\t\t\t\t\tmightThrow = function() {\n\t\t\t\t\t\t\t\t\tvar returned, then;\n\n\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.3.3.3\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-59\n\t\t\t\t\t\t\t\t\t// Ignore double-resolution attempts\n\t\t\t\t\t\t\t\t\tif ( depth < maxDepth ) {\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturned = handler.apply( that, args );\n\n\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.1\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-48\n\t\t\t\t\t\t\t\t\tif ( returned === deferred.promise() ) {\n\t\t\t\t\t\t\t\t\t\tthrow new TypeError( \"Thenable self-resolution\" );\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Support: Promises/A+ sections 2.3.3.1, 3.5\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-54\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-75\n\t\t\t\t\t\t\t\t\t// Retrieve `then` only once\n\t\t\t\t\t\t\t\t\tthen = returned &&\n\n\t\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.4\n\t\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-64\n\t\t\t\t\t\t\t\t\t\t// Only check objects and functions for thenability\n\t\t\t\t\t\t\t\t\t\t( typeof returned === \"object\" ||\n\t\t\t\t\t\t\t\t\t\t\ttypeof returned === \"function\" ) &&\n\t\t\t\t\t\t\t\t\t\treturned.then;\n\n\t\t\t\t\t\t\t\t\t// Handle a returned thenable\n\t\t\t\t\t\t\t\t\tif ( jQuery.isFunction( then ) ) {\n\n\t\t\t\t\t\t\t\t\t\t// Special processors (notify) just wait for resolution\n\t\t\t\t\t\t\t\t\t\tif ( special ) {\n\t\t\t\t\t\t\t\t\t\t\tthen.call(\n\t\t\t\t\t\t\t\t\t\t\t\treturned,\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Identity, special ),\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Thrower, special )\n\t\t\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\t\t// Normal processors (resolve) also hook into progress\n\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t// ...and disregard older resolution values\n\t\t\t\t\t\t\t\t\t\t\tmaxDepth++;\n\n\t\t\t\t\t\t\t\t\t\t\tthen.call(\n\t\t\t\t\t\t\t\t\t\t\t\treturned,\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Identity, special ),\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Thrower, special ),\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Identity,\n\t\t\t\t\t\t\t\t\t\t\t\t\tdeferred.notifyWith )\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Handle all other returned values\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t// Only substitute handlers pass on context\n\t\t\t\t\t\t\t\t\t\t// and multiple values (non-spec behavior)\n\t\t\t\t\t\t\t\t\t\tif ( handler !== Identity ) {\n\t\t\t\t\t\t\t\t\t\t\tthat = undefined;\n\t\t\t\t\t\t\t\t\t\t\targs = [ returned ];\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t// Process the value(s)\n\t\t\t\t\t\t\t\t\t\t// Default process is resolve\n\t\t\t\t\t\t\t\t\t\t( special || deferred.resolveWith )( that, args );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t// Only normal processors (resolve) catch and reject exceptions\n\t\t\t\t\t\t\t\tprocess = special ?\n\t\t\t\t\t\t\t\t\tmightThrow :\n\t\t\t\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\tmightThrow();\n\t\t\t\t\t\t\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\t\t\t\t\t\t\tif ( jQuery.Deferred.exceptionHook ) {\n\t\t\t\t\t\t\t\t\t\t\t\tjQuery.Deferred.exceptionHook( e,\n\t\t\t\t\t\t\t\t\t\t\t\t\tprocess.stackTrace );\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.3.3.4.1\n\t\t\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-61\n\t\t\t\t\t\t\t\t\t\t\t// Ignore post-resolution exceptions\n\t\t\t\t\t\t\t\t\t\t\tif ( depth + 1 >= maxDepth ) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t// Only substitute handlers pass on context\n\t\t\t\t\t\t\t\t\t\t\t\t// and multiple values (non-spec behavior)\n\t\t\t\t\t\t\t\t\t\t\t\tif ( handler !== Thrower ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tthat = undefined;\n\t\t\t\t\t\t\t\t\t\t\t\t\targs = [ e ];\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tdeferred.rejectWith( that, args );\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.3.3.1\n\t\t\t\t\t\t\t// https://promisesaplus.com/#point-57\n\t\t\t\t\t\t\t// Re-resolve promises immediately to dodge false rejection from\n\t\t\t\t\t\t\t// subsequent errors\n\t\t\t\t\t\t\tif ( depth ) {\n\t\t\t\t\t\t\t\tprocess();\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// Call an optional hook to record the stack, in case of exception\n\t\t\t\t\t\t\t\t// since it's otherwise lost when execution goes async\n\t\t\t\t\t\t\t\tif ( jQuery.Deferred.getStackHook ) {\n\t\t\t\t\t\t\t\t\tprocess.stackTrace = jQuery.Deferred.getStackHook();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\twindow.setTimeout( process );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn jQuery.Deferred( function( newDefer ) {\n\n\t\t\t\t\t\t// progress_handlers.add( ... )\n\t\t\t\t\t\ttuples[ 0 ][ 3 ].add(\n\t\t\t\t\t\t\tresolve(\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\tnewDefer,\n\t\t\t\t\t\t\t\tjQuery.isFunction( onProgress ) ?\n\t\t\t\t\t\t\t\t\tonProgress :\n\t\t\t\t\t\t\t\t\tIdentity,\n\t\t\t\t\t\t\t\tnewDefer.notifyWith\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// fulfilled_handlers.add( ... )\n\t\t\t\t\t\ttuples[ 1 ][ 3 ].add(\n\t\t\t\t\t\t\tresolve(\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\tnewDefer,\n\t\t\t\t\t\t\t\tjQuery.isFunction( onFulfilled ) ?\n\t\t\t\t\t\t\t\t\tonFulfilled :\n\t\t\t\t\t\t\t\t\tIdentity\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// rejected_handlers.add( ... )\n\t\t\t\t\t\ttuples[ 2 ][ 3 ].add(\n\t\t\t\t\t\t\tresolve(\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\tnewDefer,\n\t\t\t\t\t\t\t\tjQuery.isFunction( onRejected ) ?\n\t\t\t\t\t\t\t\t\tonRejected :\n\t\t\t\t\t\t\t\t\tThrower\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t} ).promise();\n\t\t\t\t},\n\n\t\t\t\t// Get a promise for this deferred\n\t\t\t\t// If obj is provided, the promise aspect is added to the object\n\t\t\t\tpromise: function( obj ) {\n\t\t\t\t\treturn obj != null ? jQuery.extend( obj, promise ) : promise;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdeferred = {};\n\n\t\t// Add list-specific methods\n\t\tjQuery.each( tuples, function( i, tuple ) {\n\t\t\tvar list = tuple[ 2 ],\n\t\t\t\tstateString = tuple[ 5 ];\n\n\t\t\t// promise.progress = list.add\n\t\t\t// promise.done = list.add\n\t\t\t// promise.fail = list.add\n\t\t\tpromise[ tuple[ 1 ] ] = list.add;\n\n\t\t\t// Handle state\n\t\t\tif ( stateString ) {\n\t\t\t\tlist.add(\n\t\t\t\t\tfunction() {\n\n\t\t\t\t\t\t// state = \"resolved\" (i.e., fulfilled)\n\t\t\t\t\t\t// state = \"rejected\"\n\t\t\t\t\t\tstate = stateString;\n\t\t\t\t\t},\n\n\t\t\t\t\t// rejected_callbacks.disable\n\t\t\t\t\t// fulfilled_callbacks.disable\n\t\t\t\t\ttuples[ 3 - i ][ 2 ].disable,\n\n\t\t\t\t\t// progress_callbacks.lock\n\t\t\t\t\ttuples[ 0 ][ 2 ].lock\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// progress_handlers.fire\n\t\t\t// fulfilled_handlers.fire\n\t\t\t// rejected_handlers.fire\n\t\t\tlist.add( tuple[ 3 ].fire );\n\n\t\t\t// deferred.notify = function() { deferred.notifyWith(...) }\n\t\t\t// deferred.resolve = function() { deferred.resolveWith(...) }\n\t\t\t// deferred.reject = function() { deferred.rejectWith(...) }\n\t\t\tdeferred[ tuple[ 0 ] ] = function() {\n\t\t\t\tdeferred[ tuple[ 0 ] + \"With\" ]( this === deferred ? undefined : this, arguments );\n\t\t\t\treturn this;\n\t\t\t};\n\n\t\t\t// deferred.notifyWith = list.fireWith\n\t\t\t// deferred.resolveWith = list.fireWith\n\t\t\t// deferred.rejectWith = list.fireWith\n\t\t\tdeferred[ tuple[ 0 ] + \"With\" ] = list.fireWith;\n\t\t} );\n\n\t\t// Make the deferred a promise\n\t\tpromise.promise( deferred );\n\n\t\t// Call given func if any\n\t\tif ( func ) {\n\t\t\tfunc.call( deferred, deferred );\n\t\t}\n\n\t\t// All done!\n\t\treturn deferred;\n\t},\n\n\t// Deferred helper\n\twhen: function( singleValue ) {\n\t\tvar\n\n\t\t\t// count of uncompleted subordinates\n\t\t\tremaining = arguments.length,\n\n\t\t\t// count of unprocessed arguments\n\t\t\ti = remaining,\n\n\t\t\t// subordinate fulfillment data\n\t\t\tresolveContexts = Array( i ),\n\t\t\tresolveValues = slice.call( arguments ),\n\n\t\t\t// the master Deferred\n\t\t\tmaster = jQuery.Deferred(),\n\n\t\t\t// subordinate callback factory\n\t\t\tupdateFunc = function( i ) {\n\t\t\t\treturn function( value ) {\n\t\t\t\t\tresolveContexts[ i ] = this;\n\t\t\t\t\tresolveValues[ i ] = arguments.length > 1 ? slice.call( arguments ) : value;\n\t\t\t\t\tif ( !( --remaining ) ) {\n\t\t\t\t\t\tmaster.resolveWith( resolveContexts, resolveValues );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\n\t\t// Single- and empty arguments are adopted like Promise.resolve\n\t\tif ( remaining <= 1 ) {\n\t\t\tadoptValue( singleValue, master.done( updateFunc( i ) ).resolve, master.reject );\n\n\t\t\t// Use .then() to unwrap secondary thenables (cf. gh-3000)\n\t\t\tif ( master.state() === \"pending\" ||\n\t\t\t\tjQuery.isFunction( resolveValues[ i ] && resolveValues[ i ].then ) ) {\n\n\t\t\t\treturn master.then();\n\t\t\t}\n\t\t}\n\n\t\t// Multiple arguments are aggregated like Promise.all array elements\n\t\twhile ( i-- ) {\n\t\t\tadoptValue( resolveValues[ i ], updateFunc( i ), master.reject );\n\t\t}\n\n\t\treturn master.promise();\n\t}\n} );\n\n\n// These usually indicate a programmer mistake during development,\n// warn about them ASAP rather than swallowing them by default.\nvar rerrorNames = /^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;\n\njQuery.Deferred.exceptionHook = function( error, stack ) {\n\n\t// Support: IE 8 - 9 only\n\t// Console exists when dev tools are open, which can happen at any time\n\tif ( window.console && window.console.warn && error && rerrorNames.test( error.name ) ) {\n\t\twindow.console.warn( \"jQuery.Deferred exception: \" + error.message, error.stack, stack );\n\t}\n};\n\n\n\n\njQuery.readyException = function( error ) {\n\twindow.setTimeout( function() {\n\t\tthrow error;\n\t} );\n};\n\n\n\n\n// The deferred used on DOM ready\nvar readyList = jQuery.Deferred();\n\njQuery.fn.ready = function( fn ) {\n\n\treadyList\n\t\t.then( fn )\n\n\t\t// Wrap jQuery.readyException in a function so that the lookup\n\t\t// happens at the time of error handling instead of callback\n\t\t// registration.\n\t\t.catch( function( error ) {\n\t\t\tjQuery.readyException( error );\n\t\t} );\n\n\treturn this;\n};\n\njQuery.extend( {\n\n\t// Is the DOM ready to be used? Set to true once it occurs.\n\tisReady: false,\n\n\t// A counter to track how many items to wait for before\n\t// the ready event fires. See #6781\n\treadyWait: 1,\n\n\t// Hold (or release) the ready event\n\tholdReady: function( hold ) {\n\t\tif ( hold ) {\n\t\t\tjQuery.readyWait++;\n\t\t} else {\n\t\t\tjQuery.ready( true );\n\t\t}\n\t},\n\n\t// Handle when the DOM is ready\n\tready: function( wait ) {\n\n\t\t// Abort if there are pending holds or we're already ready\n\t\tif ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Remember that the DOM is ready\n\t\tjQuery.isReady = true;\n\n\t\t// If a normal DOM Ready event fired, decrement, and wait if need be\n\t\tif ( wait !== true && --jQuery.readyWait > 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If there are functions bound, to execute\n\t\treadyList.resolveWith( document, [ jQuery ] );\n\t}\n} );\n\njQuery.ready.then = readyList.then;\n\n// The ready event handler and self cleanup method\nfunction completed() {\n\tdocument.removeEventListener( \"DOMContentLoaded\", completed );\n\twindow.removeEventListener( \"load\", completed );\n\tjQuery.ready();\n}\n\n// Catch cases where $(document).ready() is called\n// after the browser event has already occurred.\n// Support: IE <=9 - 10 only\n// Older IE sometimes signals \"interactive\" too soon\nif ( document.readyState === \"complete\" ||\n\t( document.readyState !== \"loading\" && !document.documentElement.doScroll ) ) {\n\n\t// Handle it asynchronously to allow scripts the opportunity to delay ready\n\twindow.setTimeout( jQuery.ready );\n\n} else {\n\n\t// Use the handy event callback\n\tdocument.addEventListener( \"DOMContentLoaded\", completed );\n\n\t// A fallback to window.onload, that will always work\n\twindow.addEventListener( \"load\", completed );\n}\n\n\n\n\n// Multifunctional method to get and set values of a collection\n// The value/s can optionally be executed if it's a function\nvar access = function( elems, fn, key, value, chainable, emptyGet, raw ) {\n\tvar i = 0,\n\t\tlen = elems.length,\n\t\tbulk = key == null;\n\n\t// Sets many values\n\tif ( jQuery.type( key ) === \"object\" ) {\n\t\tchainable = true;\n\t\tfor ( i in key ) {\n\t\t\taccess( elems, fn, i, key[ i ], true, emptyGet, raw );\n\t\t}\n\n\t// Sets one value\n\t} else if ( value !== undefined ) {\n\t\tchainable = true;\n\n\t\tif ( !jQuery.isFunction( value ) ) {\n\t\t\traw = true;\n\t\t}\n\n\t\tif ( bulk ) {\n\n\t\t\t// Bulk operations run against the entire set\n\t\t\tif ( raw ) {\n\t\t\t\tfn.call( elems, value );\n\t\t\t\tfn = null;\n\n\t\t\t// ...except when executing function values\n\t\t\t} else {\n\t\t\t\tbulk = fn;\n\t\t\t\tfn = function( elem, key, value ) {\n\t\t\t\t\treturn bulk.call( jQuery( elem ), value );\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tif ( fn ) {\n\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\tfn(\n\t\t\t\t\telems[ i ], key, raw ?\n\t\t\t\t\tvalue :\n\t\t\t\t\tvalue.call( elems[ i ], i, fn( elems[ i ], key ) )\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( chainable ) {\n\t\treturn elems;\n\t}\n\n\t// Gets\n\tif ( bulk ) {\n\t\treturn fn.call( elems );\n\t}\n\n\treturn len ? fn( elems[ 0 ], key ) : emptyGet;\n};\nvar acceptData = function( owner ) {\n\n\t// Accepts only:\n\t//  - Node\n\t//    - Node.ELEMENT_NODE\n\t//    - Node.DOCUMENT_NODE\n\t//  - Object\n\t//    - Any\n\treturn owner.nodeType === 1 || owner.nodeType === 9 || !( +owner.nodeType );\n};\n\n\n\n\nfunction Data() {\n\tthis.expando = jQuery.expando + Data.uid++;\n}\n\nData.uid = 1;\n\nData.prototype = {\n\n\tcache: function( owner ) {\n\n\t\t// Check if the owner object already has a cache\n\t\tvar value = owner[ this.expando ];\n\n\t\t// If not, create one\n\t\tif ( !value ) {\n\t\t\tvalue = {};\n\n\t\t\t// We can accept data for non-element nodes in modern browsers,\n\t\t\t// but we should not, see #8335.\n\t\t\t// Always return an empty object.\n\t\t\tif ( acceptData( owner ) ) {\n\n\t\t\t\t// If it is a node unlikely to be stringify-ed or looped over\n\t\t\t\t// use plain assignment\n\t\t\t\tif ( owner.nodeType ) {\n\t\t\t\t\towner[ this.expando ] = value;\n\n\t\t\t\t// Otherwise secure it in a non-enumerable property\n\t\t\t\t// configurable must be true to allow the property to be\n\t\t\t\t// deleted when data is removed\n\t\t\t\t} else {\n\t\t\t\t\tObject.defineProperty( owner, this.expando, {\n\t\t\t\t\t\tvalue: value,\n\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn value;\n\t},\n\tset: function( owner, data, value ) {\n\t\tvar prop,\n\t\t\tcache = this.cache( owner );\n\n\t\t// Handle: [ owner, key, value ] args\n\t\t// Always use camelCase key (gh-2257)\n\t\tif ( typeof data === \"string\" ) {\n\t\t\tcache[ jQuery.camelCase( data ) ] = value;\n\n\t\t// Handle: [ owner, { properties } ] args\n\t\t} else {\n\n\t\t\t// Copy the properties one-by-one to the cache object\n\t\t\tfor ( prop in data ) {\n\t\t\t\tcache[ jQuery.camelCase( prop ) ] = data[ prop ];\n\t\t\t}\n\t\t}\n\t\treturn cache;\n\t},\n\tget: function( owner, key ) {\n\t\treturn key === undefined ?\n\t\t\tthis.cache( owner ) :\n\n\t\t\t// Always use camelCase key (gh-2257)\n\t\t\towner[ this.expando ] && owner[ this.expando ][ jQuery.camelCase( key ) ];\n\t},\n\taccess: function( owner, key, value ) {\n\n\t\t// In cases where either:\n\t\t//\n\t\t//   1. No key was specified\n\t\t//   2. A string key was specified, but no value provided\n\t\t//\n\t\t// Take the \"read\" path and allow the get method to determine\n\t\t// which value to return, respectively either:\n\t\t//\n\t\t//   1. The entire cache object\n\t\t//   2. The data stored at the key\n\t\t//\n\t\tif ( key === undefined ||\n\t\t\t\t( ( key && typeof key === \"string\" ) && value === undefined ) ) {\n\n\t\t\treturn this.get( owner, key );\n\t\t}\n\n\t\t// When the key is not a string, or both a key and value\n\t\t// are specified, set or extend (existing objects) with either:\n\t\t//\n\t\t//   1. An object of properties\n\t\t//   2. A key and value\n\t\t//\n\t\tthis.set( owner, key, value );\n\n\t\t// Since the \"set\" path can have two possible entry points\n\t\t// return the expected data based on which path was taken[*]\n\t\treturn value !== undefined ? value : key;\n\t},\n\tremove: function( owner, key ) {\n\t\tvar i,\n\t\t\tcache = owner[ this.expando ];\n\n\t\tif ( cache === undefined ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( key !== undefined ) {\n\n\t\t\t// Support array or space separated string of keys\n\t\t\tif ( jQuery.isArray( key ) ) {\n\n\t\t\t\t// If key is an array of keys...\n\t\t\t\t// We always set camelCase keys, so remove that.\n\t\t\t\tkey = key.map( jQuery.camelCase );\n\t\t\t} else {\n\t\t\t\tkey = jQuery.camelCase( key );\n\n\t\t\t\t// If a key with the spaces exists, use it.\n\t\t\t\t// Otherwise, create an array by matching non-whitespace\n\t\t\t\tkey = key in cache ?\n\t\t\t\t\t[ key ] :\n\t\t\t\t\t( key.match( rnothtmlwhite ) || [] );\n\t\t\t}\n\n\t\t\ti = key.length;\n\n\t\t\twhile ( i-- ) {\n\t\t\t\tdelete cache[ key[ i ] ];\n\t\t\t}\n\t\t}\n\n\t\t// Remove the expando if there's no more data\n\t\tif ( key === undefined || jQuery.isEmptyObject( cache ) ) {\n\n\t\t\t// Support: Chrome <=35 - 45\n\t\t\t// Webkit & Blink performance suffers when deleting properties\n\t\t\t// from DOM nodes, so set to undefined instead\n\t\t\t// https://bugs.chromium.org/p/chromium/issues/detail?id=378607 (bug restricted)\n\t\t\tif ( owner.nodeType ) {\n\t\t\t\towner[ this.expando ] = undefined;\n\t\t\t} else {\n\t\t\t\tdelete owner[ this.expando ];\n\t\t\t}\n\t\t}\n\t},\n\thasData: function( owner ) {\n\t\tvar cache = owner[ this.expando ];\n\t\treturn cache !== undefined && !jQuery.isEmptyObject( cache );\n\t}\n};\nvar dataPriv = new Data();\n\nvar dataUser = new Data();\n\n\n\n//\tImplementation Summary\n//\n//\t1. Enforce API surface and semantic compatibility with 1.9.x branch\n//\t2. Improve the module's maintainability by reducing the storage\n//\t\tpaths to a single mechanism.\n//\t3. Use the same single mechanism to support \"private\" and \"user\" data.\n//\t4. _Never_ expose \"private\" data to user code (TODO: Drop _data, _removeData)\n//\t5. Avoid exposing implementation details on user objects (eg. expando properties)\n//\t6. Provide a clear path for implementation upgrade to WeakMap in 2014\n\nvar rbrace = /^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,\n\trmultiDash = /[A-Z]/g;\n\nfunction getData( data ) {\n\tif ( data === \"true\" ) {\n\t\treturn true;\n\t}\n\n\tif ( data === \"false\" ) {\n\t\treturn false;\n\t}\n\n\tif ( data === \"null\" ) {\n\t\treturn null;\n\t}\n\n\t// Only convert to a number if it doesn't change the string\n\tif ( data === +data + \"\" ) {\n\t\treturn +data;\n\t}\n\n\tif ( rbrace.test( data ) ) {\n\t\treturn JSON.parse( data );\n\t}\n\n\treturn data;\n}\n\nfunction dataAttr( elem, key, data ) {\n\tvar name;\n\n\t// If nothing was found internally, try to fetch any\n\t// data from the HTML5 data-* attribute\n\tif ( data === undefined && elem.nodeType === 1 ) {\n\t\tname = \"data-\" + key.replace( rmultiDash, \"-$&\" ).toLowerCase();\n\t\tdata = elem.getAttribute( name );\n\n\t\tif ( typeof data === \"string\" ) {\n\t\t\ttry {\n\t\t\t\tdata = getData( data );\n\t\t\t} catch ( e ) {}\n\n\t\t\t// Make sure we set the data so it isn't changed later\n\t\t\tdataUser.set( elem, key, data );\n\t\t} else {\n\t\t\tdata = undefined;\n\t\t}\n\t}\n\treturn data;\n}\n\njQuery.extend( {\n\thasData: function( elem ) {\n\t\treturn dataUser.hasData( elem ) || dataPriv.hasData( elem );\n\t},\n\n\tdata: function( elem, name, data ) {\n\t\treturn dataUser.access( elem, name, data );\n\t},\n\n\tremoveData: function( elem, name ) {\n\t\tdataUser.remove( elem, name );\n\t},\n\n\t// TODO: Now that all calls to _data and _removeData have been replaced\n\t// with direct calls to dataPriv methods, these can be deprecated.\n\t_data: function( elem, name, data ) {\n\t\treturn dataPriv.access( elem, name, data );\n\t},\n\n\t_removeData: function( elem, name ) {\n\t\tdataPriv.remove( elem, name );\n\t}\n} );\n\njQuery.fn.extend( {\n\tdata: function( key, value ) {\n\t\tvar i, name, data,\n\t\t\telem = this[ 0 ],\n\t\t\tattrs = elem && elem.attributes;\n\n\t\t// Gets all values\n\t\tif ( key === undefined ) {\n\t\t\tif ( this.length ) {\n\t\t\t\tdata = dataUser.get( elem );\n\n\t\t\t\tif ( elem.nodeType === 1 && !dataPriv.get( elem, \"hasDataAttrs\" ) ) {\n\t\t\t\t\ti = attrs.length;\n\t\t\t\t\twhile ( i-- ) {\n\n\t\t\t\t\t\t// Support: IE 11 only\n\t\t\t\t\t\t// The attrs elements can be null (#14894)\n\t\t\t\t\t\tif ( attrs[ i ] ) {\n\t\t\t\t\t\t\tname = attrs[ i ].name;\n\t\t\t\t\t\t\tif ( name.indexOf( \"data-\" ) === 0 ) {\n\t\t\t\t\t\t\t\tname = jQuery.camelCase( name.slice( 5 ) );\n\t\t\t\t\t\t\t\tdataAttr( elem, name, data[ name ] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdataPriv.set( elem, \"hasDataAttrs\", true );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn data;\n\t\t}\n\n\t\t// Sets multiple values\n\t\tif ( typeof key === \"object\" ) {\n\t\t\treturn this.each( function() {\n\t\t\t\tdataUser.set( this, key );\n\t\t\t} );\n\t\t}\n\n\t\treturn access( this, function( value ) {\n\t\t\tvar data;\n\n\t\t\t// The calling jQuery object (element matches) is not empty\n\t\t\t// (and therefore has an element appears at this[ 0 ]) and the\n\t\t\t// `value` parameter was not undefined. An empty jQuery object\n\t\t\t// will result in `undefined` for elem = this[ 0 ] which will\n\t\t\t// throw an exception if an attempt to read a data cache is made.\n\t\t\tif ( elem && value === undefined ) {\n\n\t\t\t\t// Attempt to get data from the cache\n\t\t\t\t// The key will always be camelCased in Data\n\t\t\t\tdata = dataUser.get( elem, key );\n\t\t\t\tif ( data !== undefined ) {\n\t\t\t\t\treturn data;\n\t\t\t\t}\n\n\t\t\t\t// Attempt to \"discover\" the data in\n\t\t\t\t// HTML5 custom data-* attrs\n\t\t\t\tdata = dataAttr( elem, key );\n\t\t\t\tif ( data !== undefined ) {\n\t\t\t\t\treturn data;\n\t\t\t\t}\n\n\t\t\t\t// We tried really hard, but the data doesn't exist.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Set the data...\n\t\t\tthis.each( function() {\n\n\t\t\t\t// We always store the camelCased key\n\t\t\t\tdataUser.set( this, key, value );\n\t\t\t} );\n\t\t}, null, value, arguments.length > 1, null, true );\n\t},\n\n\tremoveData: function( key ) {\n\t\treturn this.each( function() {\n\t\t\tdataUser.remove( this, key );\n\t\t} );\n\t}\n} );\n\n\njQuery.extend( {\n\tqueue: function( elem, type, data ) {\n\t\tvar queue;\n\n\t\tif ( elem ) {\n\t\t\ttype = ( type || \"fx\" ) + \"queue\";\n\t\t\tqueue = dataPriv.get( elem, type );\n\n\t\t\t// Speed up dequeue by getting out quickly if this is just a lookup\n\t\t\tif ( data ) {\n\t\t\t\tif ( !queue || jQuery.isArray( data ) ) {\n\t\t\t\t\tqueue = dataPriv.access( elem, type, jQuery.makeArray( data ) );\n\t\t\t\t} else {\n\t\t\t\t\tqueue.push( data );\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn queue || [];\n\t\t}\n\t},\n\n\tdequeue: function( elem, type ) {\n\t\ttype = type || \"fx\";\n\n\t\tvar queue = jQuery.queue( elem, type ),\n\t\t\tstartLength = queue.length,\n\t\t\tfn = queue.shift(),\n\t\t\thooks = jQuery._queueHooks( elem, type ),\n\t\t\tnext = function() {\n\t\t\t\tjQuery.dequeue( elem, type );\n\t\t\t};\n\n\t\t// If the fx queue is dequeued, always remove the progress sentinel\n\t\tif ( fn === \"inprogress\" ) {\n\t\t\tfn = queue.shift();\n\t\t\tstartLength--;\n\t\t}\n\n\t\tif ( fn ) {\n\n\t\t\t// Add a progress sentinel to prevent the fx queue from being\n\t\t\t// automatically dequeued\n\t\t\tif ( type === \"fx\" ) {\n\t\t\t\tqueue.unshift( \"inprogress\" );\n\t\t\t}\n\n\t\t\t// Clear up the last queue stop function\n\t\t\tdelete hooks.stop;\n\t\t\tfn.call( elem, next, hooks );\n\t\t}\n\n\t\tif ( !startLength && hooks ) {\n\t\t\thooks.empty.fire();\n\t\t}\n\t},\n\n\t// Not public - generate a queueHooks object, or return the current one\n\t_queueHooks: function( elem, type ) {\n\t\tvar key = type + \"queueHooks\";\n\t\treturn dataPriv.get( elem, key ) || dataPriv.access( elem, key, {\n\t\t\tempty: jQuery.Callbacks( \"once memory\" ).add( function() {\n\t\t\t\tdataPriv.remove( elem, [ type + \"queue\", key ] );\n\t\t\t} )\n\t\t} );\n\t}\n} );\n\njQuery.fn.extend( {\n\tqueue: function( type, data ) {\n\t\tvar setter = 2;\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tdata = type;\n\t\t\ttype = \"fx\";\n\t\t\tsetter--;\n\t\t}\n\n\t\tif ( arguments.length < setter ) {\n\t\t\treturn jQuery.queue( this[ 0 ], type );\n\t\t}\n\n\t\treturn data === undefined ?\n\t\t\tthis :\n\t\t\tthis.each( function() {\n\t\t\t\tvar queue = jQuery.queue( this, type, data );\n\n\t\t\t\t// Ensure a hooks for this queue\n\t\t\t\tjQuery._queueHooks( this, type );\n\n\t\t\t\tif ( type === \"fx\" && queue[ 0 ] !== \"inprogress\" ) {\n\t\t\t\t\tjQuery.dequeue( this, type );\n\t\t\t\t}\n\t\t\t} );\n\t},\n\tdequeue: function( type ) {\n\t\treturn this.each( function() {\n\t\t\tjQuery.dequeue( this, type );\n\t\t} );\n\t},\n\tclearQueue: function( type ) {\n\t\treturn this.queue( type || \"fx\", [] );\n\t},\n\n\t// Get a promise resolved when queues of a certain type\n\t// are emptied (fx is the type by default)\n\tpromise: function( type, obj ) {\n\t\tvar tmp,\n\t\t\tcount = 1,\n\t\t\tdefer = jQuery.Deferred(),\n\t\t\telements = this,\n\t\t\ti = this.length,\n\t\t\tresolve = function() {\n\t\t\t\tif ( !( --count ) ) {\n\t\t\t\t\tdefer.resolveWith( elements, [ elements ] );\n\t\t\t\t}\n\t\t\t};\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tobj = type;\n\t\t\ttype = undefined;\n\t\t}\n\t\ttype = type || \"fx\";\n\n\t\twhile ( i-- ) {\n\t\t\ttmp = dataPriv.get( elements[ i ], type + \"queueHooks\" );\n\t\t\tif ( tmp && tmp.empty ) {\n\t\t\t\tcount++;\n\t\t\t\ttmp.empty.add( resolve );\n\t\t\t}\n\t\t}\n\t\tresolve();\n\t\treturn defer.promise( obj );\n\t}\n} );\nvar pnum = ( /[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/ ).source;\n\nvar rcssNum = new RegExp( \"^(?:([+-])=|)(\" + pnum + \")([a-z%]*)$\", \"i\" );\n\n\nvar cssExpand = [ \"Top\", \"Right\", \"Bottom\", \"Left\" ];\n\nvar isHiddenWithinTree = function( elem, el ) {\n\n\t\t// isHiddenWithinTree might be called from jQuery#filter function;\n\t\t// in that case, element will be second argument\n\t\telem = el || elem;\n\n\t\t// Inline style trumps all\n\t\treturn elem.style.display === \"none\" ||\n\t\t\telem.style.display === \"\" &&\n\n\t\t\t// Otherwise, check computed style\n\t\t\t// Support: Firefox <=43 - 45\n\t\t\t// Disconnected elements can have computed display: none, so first confirm that elem is\n\t\t\t// in the document.\n\t\t\tjQuery.contains( elem.ownerDocument, elem ) &&\n\n\t\t\tjQuery.css( elem, \"display\" ) === \"none\";\n\t};\n\nvar swap = function( elem, options, callback, args ) {\n\tvar ret, name,\n\t\told = {};\n\n\t// Remember the old values, and insert the new ones\n\tfor ( name in options ) {\n\t\told[ name ] = elem.style[ name ];\n\t\telem.style[ name ] = options[ name ];\n\t}\n\n\tret = callback.apply( elem, args || [] );\n\n\t// Revert the old values\n\tfor ( name in options ) {\n\t\telem.style[ name ] = old[ name ];\n\t}\n\n\treturn ret;\n};\n\n\n\n\nfunction adjustCSS( elem, prop, valueParts, tween ) {\n\tvar adjusted,\n\t\tscale = 1,\n\t\tmaxIterations = 20,\n\t\tcurrentValue = tween ?\n\t\t\tfunction() {\n\t\t\t\treturn tween.cur();\n\t\t\t} :\n\t\t\tfunction() {\n\t\t\t\treturn jQuery.css( elem, prop, \"\" );\n\t\t\t},\n\t\tinitial = currentValue(),\n\t\tunit = valueParts && valueParts[ 3 ] || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" ),\n\n\t\t// Starting value computation is required for potential unit mismatches\n\t\tinitialInUnit = ( jQuery.cssNumber[ prop ] || unit !== \"px\" && +initial ) &&\n\t\t\trcssNum.exec( jQuery.css( elem, prop ) );\n\n\tif ( initialInUnit && initialInUnit[ 3 ] !== unit ) {\n\n\t\t// Trust units reported by jQuery.css\n\t\tunit = unit || initialInUnit[ 3 ];\n\n\t\t// Make sure we update the tween properties later on\n\t\tvalueParts = valueParts || [];\n\n\t\t// Iteratively approximate from a nonzero starting point\n\t\tinitialInUnit = +initial || 1;\n\n\t\tdo {\n\n\t\t\t// If previous iteration zeroed out, double until we get *something*.\n\t\t\t// Use string for doubling so we don't accidentally see scale as unchanged below\n\t\t\tscale = scale || \".5\";\n\n\t\t\t// Adjust and apply\n\t\t\tinitialInUnit = initialInUnit / scale;\n\t\t\tjQuery.style( elem, prop, initialInUnit + unit );\n\n\t\t// Update scale, tolerating zero or NaN from tween.cur()\n\t\t// Break the loop if scale is unchanged or perfect, or if we've just had enough.\n\t\t} while (\n\t\t\tscale !== ( scale = currentValue() / initial ) && scale !== 1 && --maxIterations\n\t\t);\n\t}\n\n\tif ( valueParts ) {\n\t\tinitialInUnit = +initialInUnit || +initial || 0;\n\n\t\t// Apply relative offset (+=/-=) if specified\n\t\tadjusted = valueParts[ 1 ] ?\n\t\t\tinitialInUnit + ( valueParts[ 1 ] + 1 ) * valueParts[ 2 ] :\n\t\t\t+valueParts[ 2 ];\n\t\tif ( tween ) {\n\t\t\ttween.unit = unit;\n\t\t\ttween.start = initialInUnit;\n\t\t\ttween.end = adjusted;\n\t\t}\n\t}\n\treturn adjusted;\n}\n\n\nvar defaultDisplayMap = {};\n\nfunction getDefaultDisplay( elem ) {\n\tvar temp,\n\t\tdoc = elem.ownerDocument,\n\t\tnodeName = elem.nodeName,\n\t\tdisplay = defaultDisplayMap[ nodeName ];\n\n\tif ( display ) {\n\t\treturn display;\n\t}\n\n\ttemp = doc.body.appendChild( doc.createElement( nodeName ) );\n\tdisplay = jQuery.css( temp, \"display\" );\n\n\ttemp.parentNode.removeChild( temp );\n\n\tif ( display === \"none\" ) {\n\t\tdisplay = \"block\";\n\t}\n\tdefaultDisplayMap[ nodeName ] = display;\n\n\treturn display;\n}\n\nfunction showHide( elements, show ) {\n\tvar display, elem,\n\t\tvalues = [],\n\t\tindex = 0,\n\t\tlength = elements.length;\n\n\t// Determine new display value for elements that need to change\n\tfor ( ; index < length; index++ ) {\n\t\telem = elements[ index ];\n\t\tif ( !elem.style ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tdisplay = elem.style.display;\n\t\tif ( show ) {\n\n\t\t\t// Since we force visibility upon cascade-hidden elements, an immediate (and slow)\n\t\t\t// check is required in this first loop unless we have a nonempty display value (either\n\t\t\t// inline or about-to-be-restored)\n\t\t\tif ( display === \"none\" ) {\n\t\t\t\tvalues[ index ] = dataPriv.get( elem, \"display\" ) || null;\n\t\t\t\tif ( !values[ index ] ) {\n\t\t\t\t\telem.style.display = \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ( elem.style.display === \"\" && isHiddenWithinTree( elem ) ) {\n\t\t\t\tvalues[ index ] = getDefaultDisplay( elem );\n\t\t\t}\n\t\t} else {\n\t\t\tif ( display !== \"none\" ) {\n\t\t\t\tvalues[ index ] = \"none\";\n\n\t\t\t\t// Remember what we're overwriting\n\t\t\t\tdataPriv.set( elem, \"display\", display );\n\t\t\t}\n\t\t}\n\t}\n\n\t// Set the display of the elements in a second loop to avoid constant reflow\n\tfor ( index = 0; index < length; index++ ) {\n\t\tif ( values[ index ] != null ) {\n\t\t\telements[ index ].style.display = values[ index ];\n\t\t}\n\t}\n\n\treturn elements;\n}\n\njQuery.fn.extend( {\n\tshow: function() {\n\t\treturn showHide( this, true );\n\t},\n\thide: function() {\n\t\treturn showHide( this );\n\t},\n\ttoggle: function( state ) {\n\t\tif ( typeof state === \"boolean\" ) {\n\t\t\treturn state ? this.show() : this.hide();\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tif ( isHiddenWithinTree( this ) ) {\n\t\t\t\tjQuery( this ).show();\n\t\t\t} else {\n\t\t\t\tjQuery( this ).hide();\n\t\t\t}\n\t\t} );\n\t}\n} );\nvar rcheckableType = ( /^(?:checkbox|radio)$/i );\n\nvar rtagName = ( /<([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]+)/i );\n\nvar rscriptType = ( /^$|\\/(?:java|ecma)script/i );\n\n\n\n// We have to close these tags to support XHTML (#13200)\nvar wrapMap = {\n\n\t// Support: IE <=9 only\n\toption: [ 1, \"<select multiple='multiple'>\", \"</select>\" ],\n\n\t// XHTML parsers do not magically insert elements in the\n\t// same way that tag soup parsers do. So we cannot shorten\n\t// this by omitting <tbody> or other required elements.\n\tthead: [ 1, \"<table>\", \"</table>\" ],\n\tcol: [ 2, \"<table><colgroup>\", \"</colgroup></table>\" ],\n\ttr: [ 2, \"<table><tbody>\", \"</tbody></table>\" ],\n\ttd: [ 3, \"<table><tbody><tr>\", \"</tr></tbody></table>\" ],\n\n\t_default: [ 0, \"\", \"\" ]\n};\n\n// Support: IE <=9 only\nwrapMap.optgroup = wrapMap.option;\n\nwrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;\nwrapMap.th = wrapMap.td;\n\n\nfunction getAll( context, tag ) {\n\n\t// Support: IE <=9 - 11 only\n\t// Use typeof to avoid zero-argument method invocation on host objects (#15151)\n\tvar ret;\n\n\tif ( typeof context.getElementsByTagName !== \"undefined\" ) {\n\t\tret = context.getElementsByTagName( tag || \"*\" );\n\n\t} else if ( typeof context.querySelectorAll !== \"undefined\" ) {\n\t\tret = context.querySelectorAll( tag || \"*\" );\n\n\t} else {\n\t\tret = [];\n\t}\n\n\tif ( tag === undefined || tag && jQuery.nodeName( context, tag ) ) {\n\t\treturn jQuery.merge( [ context ], ret );\n\t}\n\n\treturn ret;\n}\n\n\n// Mark scripts as having already been evaluated\nfunction setGlobalEval( elems, refElements ) {\n\tvar i = 0,\n\t\tl = elems.length;\n\n\tfor ( ; i < l; i++ ) {\n\t\tdataPriv.set(\n\t\t\telems[ i ],\n\t\t\t\"globalEval\",\n\t\t\t!refElements || dataPriv.get( refElements[ i ], \"globalEval\" )\n\t\t);\n\t}\n}\n\n\nvar rhtml = /<|&#?\\w+;/;\n\nfunction buildFragment( elems, context, scripts, selection, ignored ) {\n\tvar elem, tmp, tag, wrap, contains, j,\n\t\tfragment = context.createDocumentFragment(),\n\t\tnodes = [],\n\t\ti = 0,\n\t\tl = elems.length;\n\n\tfor ( ; i < l; i++ ) {\n\t\telem = elems[ i ];\n\n\t\tif ( elem || elem === 0 ) {\n\n\t\t\t// Add nodes directly\n\t\t\tif ( jQuery.type( elem ) === \"object\" ) {\n\n\t\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t\t// push.apply(_, arraylike) throws on ancient WebKit\n\t\t\t\tjQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );\n\n\t\t\t// Convert non-html into a text node\n\t\t\t} else if ( !rhtml.test( elem ) ) {\n\t\t\t\tnodes.push( context.createTextNode( elem ) );\n\n\t\t\t// Convert html into DOM nodes\n\t\t\t} else {\n\t\t\t\ttmp = tmp || fragment.appendChild( context.createElement( \"div\" ) );\n\n\t\t\t\t// Deserialize a standard representation\n\t\t\t\ttag = ( rtagName.exec( elem ) || [ \"\", \"\" ] )[ 1 ].toLowerCase();\n\t\t\t\twrap = wrapMap[ tag ] || wrapMap._default;\n\t\t\t\ttmp.innerHTML = wrap[ 1 ] + jQuery.htmlPrefilter( elem ) + wrap[ 2 ];\n\n\t\t\t\t// Descend through wrappers to the right content\n\t\t\t\tj = wrap[ 0 ];\n\t\t\t\twhile ( j-- ) {\n\t\t\t\t\ttmp = tmp.lastChild;\n\t\t\t\t}\n\n\t\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t\t// push.apply(_, arraylike) throws on ancient WebKit\n\t\t\t\tjQuery.merge( nodes, tmp.childNodes );\n\n\t\t\t\t// Remember the top-level container\n\t\t\t\ttmp = fragment.firstChild;\n\n\t\t\t\t// Ensure the created nodes are orphaned (#12392)\n\t\t\t\ttmp.textContent = \"\";\n\t\t\t}\n\t\t}\n\t}\n\n\t// Remove wrapper from fragment\n\tfragment.textContent = \"\";\n\n\ti = 0;\n\twhile ( ( elem = nodes[ i++ ] ) ) {\n\n\t\t// Skip elements already in the context collection (trac-4087)\n\t\tif ( selection && jQuery.inArray( elem, selection ) > -1 ) {\n\t\t\tif ( ignored ) {\n\t\t\t\tignored.push( elem );\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\n\t\tcontains = jQuery.contains( elem.ownerDocument, elem );\n\n\t\t// Append to fragment\n\t\ttmp = getAll( fragment.appendChild( elem ), \"script\" );\n\n\t\t// Preserve script evaluation history\n\t\tif ( contains ) {\n\t\t\tsetGlobalEval( tmp );\n\t\t}\n\n\t\t// Capture executables\n\t\tif ( scripts ) {\n\t\t\tj = 0;\n\t\t\twhile ( ( elem = tmp[ j++ ] ) ) {\n\t\t\t\tif ( rscriptType.test( elem.type || \"\" ) ) {\n\t\t\t\t\tscripts.push( elem );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn fragment;\n}\n\n\n( function() {\n\tvar fragment = document.createDocumentFragment(),\n\t\tdiv = fragment.appendChild( document.createElement( \"div\" ) ),\n\t\tinput = document.createElement( \"input\" );\n\n\t// Support: Android 4.0 - 4.3 only\n\t// Check state lost if the name is set (#11217)\n\t// Support: Windows Web Apps (WWA)\n\t// `name` and `type` must use .setAttribute for WWA (#14901)\n\tinput.setAttribute( \"type\", \"radio\" );\n\tinput.setAttribute( \"checked\", \"checked\" );\n\tinput.setAttribute( \"name\", \"t\" );\n\n\tdiv.appendChild( input );\n\n\t// Support: Android <=4.1 only\n\t// Older WebKit doesn't clone checked state correctly in fragments\n\tsupport.checkClone = div.cloneNode( true ).cloneNode( true ).lastChild.checked;\n\n\t// Support: IE <=11 only\n\t// Make sure textarea (and checkbox) defaultValue is properly cloned\n\tdiv.innerHTML = \"<textarea>x</textarea>\";\n\tsupport.noCloneChecked = !!div.cloneNode( true ).lastChild.defaultValue;\n} )();\nvar documentElement = document.documentElement;\n\n\n\nvar\n\trkeyEvent = /^key/,\n\trmouseEvent = /^(?:mouse|pointer|contextmenu|drag|drop)|click/,\n\trtypenamespace = /^([^.]*)(?:\\.(.+)|)/;\n\nfunction returnTrue() {\n\treturn true;\n}\n\nfunction returnFalse() {\n\treturn false;\n}\n\n// Support: IE <=9 only\n// See #13393 for more info\nfunction safeActiveElement() {\n\ttry {\n\t\treturn document.activeElement;\n\t} catch ( err ) { }\n}\n\nfunction on( elem, types, selector, data, fn, one ) {\n\tvar origFn, type;\n\n\t// Types can be a map of types/handlers\n\tif ( typeof types === \"object\" ) {\n\n\t\t// ( types-Object, selector, data )\n\t\tif ( typeof selector !== \"string\" ) {\n\n\t\t\t// ( types-Object, data )\n\t\t\tdata = data || selector;\n\t\t\tselector = undefined;\n\t\t}\n\t\tfor ( type in types ) {\n\t\t\ton( elem, type, selector, data, types[ type ], one );\n\t\t}\n\t\treturn elem;\n\t}\n\n\tif ( data == null && fn == null ) {\n\n\t\t// ( types, fn )\n\t\tfn = selector;\n\t\tdata = selector = undefined;\n\t} else if ( fn == null ) {\n\t\tif ( typeof selector === \"string\" ) {\n\n\t\t\t// ( types, selector, fn )\n\t\t\tfn = data;\n\t\t\tdata = undefined;\n\t\t} else {\n\n\t\t\t// ( types, data, fn )\n\t\t\tfn = data;\n\t\t\tdata = selector;\n\t\t\tselector = undefined;\n\t\t}\n\t}\n\tif ( fn === false ) {\n\t\tfn = returnFalse;\n\t} else if ( !fn ) {\n\t\treturn elem;\n\t}\n\n\tif ( one === 1 ) {\n\t\torigFn = fn;\n\t\tfn = function( event ) {\n\n\t\t\t// Can use an empty set, since event contains the info\n\t\t\tjQuery().off( event );\n\t\t\treturn origFn.apply( this, arguments );\n\t\t};\n\n\t\t// Use same guid so caller can remove using origFn\n\t\tfn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );\n\t}\n\treturn elem.each( function() {\n\t\tjQuery.event.add( this, types, fn, data, selector );\n\t} );\n}\n\n/*\n * Helper functions for managing events -- not part of the public interface.\n * Props to Dean Edwards' addEvent library for many of the ideas.\n */\njQuery.event = {\n\n\tglobal: {},\n\n\tadd: function( elem, types, handler, data, selector ) {\n\n\t\tvar handleObjIn, eventHandle, tmp,\n\t\t\tevents, t, handleObj,\n\t\t\tspecial, handlers, type, namespaces, origType,\n\t\t\telemData = dataPriv.get( elem );\n\n\t\t// Don't attach events to noData or text/comment nodes (but allow plain objects)\n\t\tif ( !elemData ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Caller can pass in an object of custom data in lieu of the handler\n\t\tif ( handler.handler ) {\n\t\t\thandleObjIn = handler;\n\t\t\thandler = handleObjIn.handler;\n\t\t\tselector = handleObjIn.selector;\n\t\t}\n\n\t\t// Ensure that invalid selectors throw exceptions at attach time\n\t\t// Evaluate against documentElement in case elem is a non-element node (e.g., document)\n\t\tif ( selector ) {\n\t\t\tjQuery.find.matchesSelector( documentElement, selector );\n\t\t}\n\n\t\t// Make sure that the handler has a unique ID, used to find/remove it later\n\t\tif ( !handler.guid ) {\n\t\t\thandler.guid = jQuery.guid++;\n\t\t}\n\n\t\t// Init the element's event structure and main handler, if this is the first\n\t\tif ( !( events = elemData.events ) ) {\n\t\t\tevents = elemData.events = {};\n\t\t}\n\t\tif ( !( eventHandle = elemData.handle ) ) {\n\t\t\teventHandle = elemData.handle = function( e ) {\n\n\t\t\t\t// Discard the second event of a jQuery.event.trigger() and\n\t\t\t\t// when an event is called after a page has unloaded\n\t\t\t\treturn typeof jQuery !== \"undefined\" && jQuery.event.triggered !== e.type ?\n\t\t\t\t\tjQuery.event.dispatch.apply( elem, arguments ) : undefined;\n\t\t\t};\n\t\t}\n\n\t\t// Handle multiple events separated by a space\n\t\ttypes = ( types || \"\" ).match( rnothtmlwhite ) || [ \"\" ];\n\t\tt = types.length;\n\t\twhile ( t-- ) {\n\t\t\ttmp = rtypenamespace.exec( types[ t ] ) || [];\n\t\t\ttype = origType = tmp[ 1 ];\n\t\t\tnamespaces = ( tmp[ 2 ] || \"\" ).split( \".\" ).sort();\n\n\t\t\t// There *must* be a type, no attaching namespace-only handlers\n\t\t\tif ( !type ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// If event changes its type, use the special event handlers for the changed type\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\n\t\t\t// If selector defined, determine special event api type, otherwise given type\n\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n\n\t\t\t// Update special based on newly reset type\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\n\t\t\t// handleObj is passed to all event handlers\n\t\t\thandleObj = jQuery.extend( {\n\t\t\t\ttype: type,\n\t\t\t\torigType: origType,\n\t\t\t\tdata: data,\n\t\t\t\thandler: handler,\n\t\t\t\tguid: handler.guid,\n\t\t\t\tselector: selector,\n\t\t\t\tneedsContext: selector && jQuery.expr.match.needsContext.test( selector ),\n\t\t\t\tnamespace: namespaces.join( \".\" )\n\t\t\t}, handleObjIn );\n\n\t\t\t// Init the event handler queue if we're the first\n\t\t\tif ( !( handlers = events[ type ] ) ) {\n\t\t\t\thandlers = events[ type ] = [];\n\t\t\t\thandlers.delegateCount = 0;\n\n\t\t\t\t// Only use addEventListener if the special events handler returns false\n\t\t\t\tif ( !special.setup ||\n\t\t\t\t\tspecial.setup.call( elem, data, namespaces, eventHandle ) === false ) {\n\n\t\t\t\t\tif ( elem.addEventListener ) {\n\t\t\t\t\t\telem.addEventListener( type, eventHandle );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( special.add ) {\n\t\t\t\tspecial.add.call( elem, handleObj );\n\n\t\t\t\tif ( !handleObj.handler.guid ) {\n\t\t\t\t\thandleObj.handler.guid = handler.guid;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add to the element's handler list, delegates in front\n\t\t\tif ( selector ) {\n\t\t\t\thandlers.splice( handlers.delegateCount++, 0, handleObj );\n\t\t\t} else {\n\t\t\t\thandlers.push( handleObj );\n\t\t\t}\n\n\t\t\t// Keep track of which events have ever been used, for event optimization\n\t\t\tjQuery.event.global[ type ] = true;\n\t\t}\n\n\t},\n\n\t// Detach an event or set of events from an element\n\tremove: function( elem, types, handler, selector, mappedTypes ) {\n\n\t\tvar j, origCount, tmp,\n\t\t\tevents, t, handleObj,\n\t\t\tspecial, handlers, type, namespaces, origType,\n\t\t\telemData = dataPriv.hasData( elem ) && dataPriv.get( elem );\n\n\t\tif ( !elemData || !( events = elemData.events ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Once for each type.namespace in types; type may be omitted\n\t\ttypes = ( types || \"\" ).match( rnothtmlwhite ) || [ \"\" ];\n\t\tt = types.length;\n\t\twhile ( t-- ) {\n\t\t\ttmp = rtypenamespace.exec( types[ t ] ) || [];\n\t\t\ttype = origType = tmp[ 1 ];\n\t\t\tnamespaces = ( tmp[ 2 ] || \"\" ).split( \".\" ).sort();\n\n\t\t\t// Unbind all events (on this namespace, if provided) for the element\n\t\t\tif ( !type ) {\n\t\t\t\tfor ( type in events ) {\n\t\t\t\t\tjQuery.event.remove( elem, type + types[ t ], handler, selector, true );\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n\t\t\thandlers = events[ type ] || [];\n\t\t\ttmp = tmp[ 2 ] &&\n\t\t\t\tnew RegExp( \"(^|\\\\.)\" + namespaces.join( \"\\\\.(?:.*\\\\.|)\" ) + \"(\\\\.|$)\" );\n\n\t\t\t// Remove matching events\n\t\t\torigCount = j = handlers.length;\n\t\t\twhile ( j-- ) {\n\t\t\t\thandleObj = handlers[ j ];\n\n\t\t\t\tif ( ( mappedTypes || origType === handleObj.origType ) &&\n\t\t\t\t\t( !handler || handler.guid === handleObj.guid ) &&\n\t\t\t\t\t( !tmp || tmp.test( handleObj.namespace ) ) &&\n\t\t\t\t\t( !selector || selector === handleObj.selector ||\n\t\t\t\t\t\tselector === \"**\" && handleObj.selector ) ) {\n\t\t\t\t\thandlers.splice( j, 1 );\n\n\t\t\t\t\tif ( handleObj.selector ) {\n\t\t\t\t\t\thandlers.delegateCount--;\n\t\t\t\t\t}\n\t\t\t\t\tif ( special.remove ) {\n\t\t\t\t\t\tspecial.remove.call( elem, handleObj );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove generic event handler if we removed something and no more handlers exist\n\t\t\t// (avoids potential for endless recursion during removal of special event handlers)\n\t\t\tif ( origCount && !handlers.length ) {\n\t\t\t\tif ( !special.teardown ||\n\t\t\t\t\tspecial.teardown.call( elem, namespaces, elemData.handle ) === false ) {\n\n\t\t\t\t\tjQuery.removeEvent( elem, type, elemData.handle );\n\t\t\t\t}\n\n\t\t\t\tdelete events[ type ];\n\t\t\t}\n\t\t}\n\n\t\t// Remove data and the expando if it's no longer used\n\t\tif ( jQuery.isEmptyObject( events ) ) {\n\t\t\tdataPriv.remove( elem, \"handle events\" );\n\t\t}\n\t},\n\n\tdispatch: function( nativeEvent ) {\n\n\t\t// Make a writable jQuery.Event from the native event object\n\t\tvar event = jQuery.event.fix( nativeEvent );\n\n\t\tvar i, j, ret, matched, handleObj, handlerQueue,\n\t\t\targs = new Array( arguments.length ),\n\t\t\thandlers = ( dataPriv.get( this, \"events\" ) || {} )[ event.type ] || [],\n\t\t\tspecial = jQuery.event.special[ event.type ] || {};\n\n\t\t// Use the fix-ed jQuery.Event rather than the (read-only) native event\n\t\targs[ 0 ] = event;\n\n\t\tfor ( i = 1; i < arguments.length; i++ ) {\n\t\t\targs[ i ] = arguments[ i ];\n\t\t}\n\n\t\tevent.delegateTarget = this;\n\n\t\t// Call the preDispatch hook for the mapped type, and let it bail if desired\n\t\tif ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Determine handlers\n\t\thandlerQueue = jQuery.event.handlers.call( this, event, handlers );\n\n\t\t// Run delegates first; they may want to stop propagation beneath us\n\t\ti = 0;\n\t\twhile ( ( matched = handlerQueue[ i++ ] ) && !event.isPropagationStopped() ) {\n\t\t\tevent.currentTarget = matched.elem;\n\n\t\t\tj = 0;\n\t\t\twhile ( ( handleObj = matched.handlers[ j++ ] ) &&\n\t\t\t\t!event.isImmediatePropagationStopped() ) {\n\n\t\t\t\t// Triggered event must either 1) have no namespace, or 2) have namespace(s)\n\t\t\t\t// a subset or equal to those in the bound event (both can have no namespace).\n\t\t\t\tif ( !event.rnamespace || event.rnamespace.test( handleObj.namespace ) ) {\n\n\t\t\t\t\tevent.handleObj = handleObj;\n\t\t\t\t\tevent.data = handleObj.data;\n\n\t\t\t\t\tret = ( ( jQuery.event.special[ handleObj.origType ] || {} ).handle ||\n\t\t\t\t\t\thandleObj.handler ).apply( matched.elem, args );\n\n\t\t\t\t\tif ( ret !== undefined ) {\n\t\t\t\t\t\tif ( ( event.result = ret ) === false ) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Call the postDispatch hook for the mapped type\n\t\tif ( special.postDispatch ) {\n\t\t\tspecial.postDispatch.call( this, event );\n\t\t}\n\n\t\treturn event.result;\n\t},\n\n\thandlers: function( event, handlers ) {\n\t\tvar i, handleObj, sel, matchedHandlers, matchedSelectors,\n\t\t\thandlerQueue = [],\n\t\t\tdelegateCount = handlers.delegateCount,\n\t\t\tcur = event.target;\n\n\t\t// Find delegate handlers\n\t\tif ( delegateCount &&\n\n\t\t\t// Support: IE <=9\n\t\t\t// Black-hole SVG <use> instance trees (trac-13180)\n\t\t\tcur.nodeType &&\n\n\t\t\t// Support: Firefox <=42\n\t\t\t// Suppress spec-violating clicks indicating a non-primary pointer button (trac-3861)\n\t\t\t// https://www.w3.org/TR/DOM-Level-3-Events/#event-type-click\n\t\t\t// Support: IE 11 only\n\t\t\t// ...but not arrow key \"clicks\" of radio inputs, which can have `button` -1 (gh-2343)\n\t\t\t!( event.type === \"click\" && event.button >= 1 ) ) {\n\n\t\t\tfor ( ; cur !== this; cur = cur.parentNode || this ) {\n\n\t\t\t\t// Don't check non-elements (#13208)\n\t\t\t\t// Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)\n\t\t\t\tif ( cur.nodeType === 1 && !( event.type === \"click\" && cur.disabled === true ) ) {\n\t\t\t\t\tmatchedHandlers = [];\n\t\t\t\t\tmatchedSelectors = {};\n\t\t\t\t\tfor ( i = 0; i < delegateCount; i++ ) {\n\t\t\t\t\t\thandleObj = handlers[ i ];\n\n\t\t\t\t\t\t// Don't conflict with Object.prototype properties (#13203)\n\t\t\t\t\t\tsel = handleObj.selector + \" \";\n\n\t\t\t\t\t\tif ( matchedSelectors[ sel ] === undefined ) {\n\t\t\t\t\t\t\tmatchedSelectors[ sel ] = handleObj.needsContext ?\n\t\t\t\t\t\t\t\tjQuery( sel, this ).index( cur ) > -1 :\n\t\t\t\t\t\t\t\tjQuery.find( sel, this, null, [ cur ] ).length;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( matchedSelectors[ sel ] ) {\n\t\t\t\t\t\t\tmatchedHandlers.push( handleObj );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ( matchedHandlers.length ) {\n\t\t\t\t\t\thandlerQueue.push( { elem: cur, handlers: matchedHandlers } );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Add the remaining (directly-bound) handlers\n\t\tcur = this;\n\t\tif ( delegateCount < handlers.length ) {\n\t\t\thandlerQueue.push( { elem: cur, handlers: handlers.slice( delegateCount ) } );\n\t\t}\n\n\t\treturn handlerQueue;\n\t},\n\n\taddProp: function( name, hook ) {\n\t\tObject.defineProperty( jQuery.Event.prototype, name, {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\n\t\t\tget: jQuery.isFunction( hook ) ?\n\t\t\t\tfunction() {\n\t\t\t\t\tif ( this.originalEvent ) {\n\t\t\t\t\t\t\treturn hook( this.originalEvent );\n\t\t\t\t\t}\n\t\t\t\t} :\n\t\t\t\tfunction() {\n\t\t\t\t\tif ( this.originalEvent ) {\n\t\t\t\t\t\t\treturn this.originalEvent[ name ];\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\tset: function( value ) {\n\t\t\t\tObject.defineProperty( this, name, {\n\t\t\t\t\tenumerable: true,\n\t\t\t\t\tconfigurable: true,\n\t\t\t\t\twritable: true,\n\t\t\t\t\tvalue: value\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t},\n\n\tfix: function( originalEvent ) {\n\t\treturn originalEvent[ jQuery.expando ] ?\n\t\t\toriginalEvent :\n\t\t\tnew jQuery.Event( originalEvent );\n\t},\n\n\tspecial: {\n\t\tload: {\n\n\t\t\t// Prevent triggered image.load events from bubbling to window.load\n\t\t\tnoBubble: true\n\t\t},\n\t\tfocus: {\n\n\t\t\t// Fire native event if possible so blur/focus sequence is correct\n\t\t\ttrigger: function() {\n\t\t\t\tif ( this !== safeActiveElement() && this.focus ) {\n\t\t\t\t\tthis.focus();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelegateType: \"focusin\"\n\t\t},\n\t\tblur: {\n\t\t\ttrigger: function() {\n\t\t\t\tif ( this === safeActiveElement() && this.blur ) {\n\t\t\t\t\tthis.blur();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelegateType: \"focusout\"\n\t\t},\n\t\tclick: {\n\n\t\t\t// For checkbox, fire native event so checked state will be right\n\t\t\ttrigger: function() {\n\t\t\t\tif ( this.type === \"checkbox\" && this.click && jQuery.nodeName( this, \"input\" ) ) {\n\t\t\t\t\tthis.click();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// For cross-browser consistency, don't fire native .click() on links\n\t\t\t_default: function( event ) {\n\t\t\t\treturn jQuery.nodeName( event.target, \"a\" );\n\t\t\t}\n\t\t},\n\n\t\tbeforeunload: {\n\t\t\tpostDispatch: function( event ) {\n\n\t\t\t\t// Support: Firefox 20+\n\t\t\t\t// Firefox doesn't alert if the returnValue field is not set.\n\t\t\t\tif ( event.result !== undefined && event.originalEvent ) {\n\t\t\t\t\tevent.originalEvent.returnValue = event.result;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\njQuery.removeEvent = function( elem, type, handle ) {\n\n\t// This \"if\" is needed for plain objects\n\tif ( elem.removeEventListener ) {\n\t\telem.removeEventListener( type, handle );\n\t}\n};\n\njQuery.Event = function( src, props ) {\n\n\t// Allow instantiation without the 'new' keyword\n\tif ( !( this instanceof jQuery.Event ) ) {\n\t\treturn new jQuery.Event( src, props );\n\t}\n\n\t// Event object\n\tif ( src && src.type ) {\n\t\tthis.originalEvent = src;\n\t\tthis.type = src.type;\n\n\t\t// Events bubbling up the document may have been marked as prevented\n\t\t// by a handler lower down the tree; reflect the correct value.\n\t\tthis.isDefaultPrevented = src.defaultPrevented ||\n\t\t\t\tsrc.defaultPrevented === undefined &&\n\n\t\t\t\t// Support: Android <=2.3 only\n\t\t\t\tsrc.returnValue === false ?\n\t\t\treturnTrue :\n\t\t\treturnFalse;\n\n\t\t// Create target properties\n\t\t// Support: Safari <=6 - 7 only\n\t\t// Target should not be a text node (#504, #13143)\n\t\tthis.target = ( src.target && src.target.nodeType === 3 ) ?\n\t\t\tsrc.target.parentNode :\n\t\t\tsrc.target;\n\n\t\tthis.currentTarget = src.currentTarget;\n\t\tthis.relatedTarget = src.relatedTarget;\n\n\t// Event type\n\t} else {\n\t\tthis.type = src;\n\t}\n\n\t// Put explicitly provided properties onto the event object\n\tif ( props ) {\n\t\tjQuery.extend( this, props );\n\t}\n\n\t// Create a timestamp if incoming event doesn't have one\n\tthis.timeStamp = src && src.timeStamp || jQuery.now();\n\n\t// Mark it as fixed\n\tthis[ jQuery.expando ] = true;\n};\n\n// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding\n// https://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html\njQuery.Event.prototype = {\n\tconstructor: jQuery.Event,\n\tisDefaultPrevented: returnFalse,\n\tisPropagationStopped: returnFalse,\n\tisImmediatePropagationStopped: returnFalse,\n\tisSimulated: false,\n\n\tpreventDefault: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isDefaultPrevented = returnTrue;\n\n\t\tif ( e && !this.isSimulated ) {\n\t\t\te.preventDefault();\n\t\t}\n\t},\n\tstopPropagation: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isPropagationStopped = returnTrue;\n\n\t\tif ( e && !this.isSimulated ) {\n\t\t\te.stopPropagation();\n\t\t}\n\t},\n\tstopImmediatePropagation: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isImmediatePropagationStopped = returnTrue;\n\n\t\tif ( e && !this.isSimulated ) {\n\t\t\te.stopImmediatePropagation();\n\t\t}\n\n\t\tthis.stopPropagation();\n\t}\n};\n\n// Includes all common event props including KeyEvent and MouseEvent specific props\njQuery.each( {\n\taltKey: true,\n\tbubbles: true,\n\tcancelable: true,\n\tchangedTouches: true,\n\tctrlKey: true,\n\tdetail: true,\n\teventPhase: true,\n\tmetaKey: true,\n\tpageX: true,\n\tpageY: true,\n\tshiftKey: true,\n\tview: true,\n\t\"char\": true,\n\tcharCode: true,\n\tkey: true,\n\tkeyCode: true,\n\tbutton: true,\n\tbuttons: true,\n\tclientX: true,\n\tclientY: true,\n\toffsetX: true,\n\toffsetY: true,\n\tpointerId: true,\n\tpointerType: true,\n\tscreenX: true,\n\tscreenY: true,\n\ttargetTouches: true,\n\ttoElement: true,\n\ttouches: true,\n\n\twhich: function( event ) {\n\t\tvar button = event.button;\n\n\t\t// Add which for key events\n\t\tif ( event.which == null && rkeyEvent.test( event.type ) ) {\n\t\t\treturn event.charCode != null ? event.charCode : event.keyCode;\n\t\t}\n\n\t\t// Add which for click: 1 === left; 2 === middle; 3 === right\n\t\tif ( !event.which && button !== undefined && rmouseEvent.test( event.type ) ) {\n\t\t\tif ( button & 1 ) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\tif ( button & 2 ) {\n\t\t\t\treturn 3;\n\t\t\t}\n\n\t\t\tif ( button & 4 ) {\n\t\t\t\treturn 2;\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn event.which;\n\t}\n}, jQuery.event.addProp );\n\n// Create mouseenter/leave events using mouseover/out and event-time checks\n// so that event delegation works in jQuery.\n// Do the same for pointerenter/pointerleave and pointerover/pointerout\n//\n// Support: Safari 7 only\n// Safari sends mouseenter too often; see:\n// https://bugs.chromium.org/p/chromium/issues/detail?id=470258\n// for the description of the bug (it existed in older Chrome versions as well).\njQuery.each( {\n\tmouseenter: \"mouseover\",\n\tmouseleave: \"mouseout\",\n\tpointerenter: \"pointerover\",\n\tpointerleave: \"pointerout\"\n}, function( orig, fix ) {\n\tjQuery.event.special[ orig ] = {\n\t\tdelegateType: fix,\n\t\tbindType: fix,\n\n\t\thandle: function( event ) {\n\t\t\tvar ret,\n\t\t\t\ttarget = this,\n\t\t\t\trelated = event.relatedTarget,\n\t\t\t\thandleObj = event.handleObj;\n\n\t\t\t// For mouseenter/leave call the handler if related is outside the target.\n\t\t\t// NB: No relatedTarget if the mouse left/entered the browser window\n\t\t\tif ( !related || ( related !== target && !jQuery.contains( target, related ) ) ) {\n\t\t\t\tevent.type = handleObj.origType;\n\t\t\t\tret = handleObj.handler.apply( this, arguments );\n\t\t\t\tevent.type = fix;\n\t\t\t}\n\t\t\treturn ret;\n\t\t}\n\t};\n} );\n\njQuery.fn.extend( {\n\n\ton: function( types, selector, data, fn ) {\n\t\treturn on( this, types, selector, data, fn );\n\t},\n\tone: function( types, selector, data, fn ) {\n\t\treturn on( this, types, selector, data, fn, 1 );\n\t},\n\toff: function( types, selector, fn ) {\n\t\tvar handleObj, type;\n\t\tif ( types && types.preventDefault && types.handleObj ) {\n\n\t\t\t// ( event )  dispatched jQuery.Event\n\t\t\thandleObj = types.handleObj;\n\t\t\tjQuery( types.delegateTarget ).off(\n\t\t\t\thandleObj.namespace ?\n\t\t\t\t\thandleObj.origType + \".\" + handleObj.namespace :\n\t\t\t\t\thandleObj.origType,\n\t\t\t\thandleObj.selector,\n\t\t\t\thandleObj.handler\n\t\t\t);\n\t\t\treturn this;\n\t\t}\n\t\tif ( typeof types === \"object\" ) {\n\n\t\t\t// ( types-object [, selector] )\n\t\t\tfor ( type in types ) {\n\t\t\t\tthis.off( type, selector, types[ type ] );\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t\tif ( selector === false || typeof selector === \"function\" ) {\n\n\t\t\t// ( types [, fn] )\n\t\t\tfn = selector;\n\t\t\tselector = undefined;\n\t\t}\n\t\tif ( fn === false ) {\n\t\t\tfn = returnFalse;\n\t\t}\n\t\treturn this.each( function() {\n\t\t\tjQuery.event.remove( this, types, fn, selector );\n\t\t} );\n\t}\n} );\n\n\nvar\n\n\t/* eslint-disable max-len */\n\n\t// See https://github.com/eslint/eslint/issues/3229\n\trxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]*)[^>]*)\\/>/gi,\n\n\t/* eslint-enable */\n\n\t// Support: IE <=10 - 11, Edge 12 - 13\n\t// In IE/Edge using regex groups here causes severe slowdowns.\n\t// See https://connect.microsoft.com/IE/feedback/details/1736512/\n\trnoInnerhtml = /<script|<style|<link/i,\n\n\t// checked=\"checked\" or checked\n\trchecked = /checked\\s*(?:[^=]|=\\s*.checked.)/i,\n\trscriptTypeMasked = /^true\\/(.*)/,\n\trcleanScript = /^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g;\n\nfunction manipulationTarget( elem, content ) {\n\tif ( jQuery.nodeName( elem, \"table\" ) &&\n\t\tjQuery.nodeName( content.nodeType !== 11 ? content : content.firstChild, \"tr\" ) ) {\n\n\t\treturn elem.getElementsByTagName( \"tbody\" )[ 0 ] || elem;\n\t}\n\n\treturn elem;\n}\n\n// Replace/restore the type attribute of script elements for safe DOM manipulation\nfunction disableScript( elem ) {\n\telem.type = ( elem.getAttribute( \"type\" ) !== null ) + \"/\" + elem.type;\n\treturn elem;\n}\nfunction restoreScript( elem ) {\n\tvar match = rscriptTypeMasked.exec( elem.type );\n\n\tif ( match ) {\n\t\telem.type = match[ 1 ];\n\t} else {\n\t\telem.removeAttribute( \"type\" );\n\t}\n\n\treturn elem;\n}\n\nfunction cloneCopyEvent( src, dest ) {\n\tvar i, l, type, pdataOld, pdataCur, udataOld, udataCur, events;\n\n\tif ( dest.nodeType !== 1 ) {\n\t\treturn;\n\t}\n\n\t// 1. Copy private data: events, handlers, etc.\n\tif ( dataPriv.hasData( src ) ) {\n\t\tpdataOld = dataPriv.access( src );\n\t\tpdataCur = dataPriv.set( dest, pdataOld );\n\t\tevents = pdataOld.events;\n\n\t\tif ( events ) {\n\t\t\tdelete pdataCur.handle;\n\t\t\tpdataCur.events = {};\n\n\t\t\tfor ( type in events ) {\n\t\t\t\tfor ( i = 0, l = events[ type ].length; i < l; i++ ) {\n\t\t\t\t\tjQuery.event.add( dest, type, events[ type ][ i ] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// 2. Copy user data\n\tif ( dataUser.hasData( src ) ) {\n\t\tudataOld = dataUser.access( src );\n\t\tudataCur = jQuery.extend( {}, udataOld );\n\n\t\tdataUser.set( dest, udataCur );\n\t}\n}\n\n// Fix IE bugs, see support tests\nfunction fixInput( src, dest ) {\n\tvar nodeName = dest.nodeName.toLowerCase();\n\n\t// Fails to persist the checked state of a cloned checkbox or radio button.\n\tif ( nodeName === \"input\" && rcheckableType.test( src.type ) ) {\n\t\tdest.checked = src.checked;\n\n\t// Fails to return the selected option to the default selected state when cloning options\n\t} else if ( nodeName === \"input\" || nodeName === \"textarea\" ) {\n\t\tdest.defaultValue = src.defaultValue;\n\t}\n}\n\nfunction domManip( collection, args, callback, ignored ) {\n\n\t// Flatten any nested arrays\n\targs = concat.apply( [], args );\n\n\tvar fragment, first, scripts, hasScripts, node, doc,\n\t\ti = 0,\n\t\tl = collection.length,\n\t\tiNoClone = l - 1,\n\t\tvalue = args[ 0 ],\n\t\tisFunction = jQuery.isFunction( value );\n\n\t// We can't cloneNode fragments that contain checked, in WebKit\n\tif ( isFunction ||\n\t\t\t( l > 1 && typeof value === \"string\" &&\n\t\t\t\t!support.checkClone && rchecked.test( value ) ) ) {\n\t\treturn collection.each( function( index ) {\n\t\t\tvar self = collection.eq( index );\n\t\t\tif ( isFunction ) {\n\t\t\t\targs[ 0 ] = value.call( this, index, self.html() );\n\t\t\t}\n\t\t\tdomManip( self, args, callback, ignored );\n\t\t} );\n\t}\n\n\tif ( l ) {\n\t\tfragment = buildFragment( args, collection[ 0 ].ownerDocument, false, collection, ignored );\n\t\tfirst = fragment.firstChild;\n\n\t\tif ( fragment.childNodes.length === 1 ) {\n\t\t\tfragment = first;\n\t\t}\n\n\t\t// Require either new content or an interest in ignored elements to invoke the callback\n\t\tif ( first || ignored ) {\n\t\t\tscripts = jQuery.map( getAll( fragment, \"script\" ), disableScript );\n\t\t\thasScripts = scripts.length;\n\n\t\t\t// Use the original fragment for the last item\n\t\t\t// instead of the first because it can end up\n\t\t\t// being emptied incorrectly in certain situations (#8070).\n\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\tnode = fragment;\n\n\t\t\t\tif ( i !== iNoClone ) {\n\t\t\t\t\tnode = jQuery.clone( node, true, true );\n\n\t\t\t\t\t// Keep references to cloned scripts for later restoration\n\t\t\t\t\tif ( hasScripts ) {\n\n\t\t\t\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t\t\t\t// push.apply(_, arraylike) throws on ancient WebKit\n\t\t\t\t\t\tjQuery.merge( scripts, getAll( node, \"script\" ) );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcallback.call( collection[ i ], node, i );\n\t\t\t}\n\n\t\t\tif ( hasScripts ) {\n\t\t\t\tdoc = scripts[ scripts.length - 1 ].ownerDocument;\n\n\t\t\t\t// Reenable scripts\n\t\t\t\tjQuery.map( scripts, restoreScript );\n\n\t\t\t\t// Evaluate executable scripts on first document insertion\n\t\t\t\tfor ( i = 0; i < hasScripts; i++ ) {\n\t\t\t\t\tnode = scripts[ i ];\n\t\t\t\t\tif ( rscriptType.test( node.type || \"\" ) &&\n\t\t\t\t\t\t!dataPriv.access( node, \"globalEval\" ) &&\n\t\t\t\t\t\tjQuery.contains( doc, node ) ) {\n\n\t\t\t\t\t\tif ( node.src ) {\n\n\t\t\t\t\t\t\t// Optional AJAX dependency, but won't run scripts if not present\n\t\t\t\t\t\t\tif ( jQuery._evalUrl ) {\n\t\t\t\t\t\t\t\tjQuery._evalUrl( node.src );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tDOMEval( node.textContent.replace( rcleanScript, \"\" ), doc );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn collection;\n}\n\nfunction remove( elem, selector, keepData ) {\n\tvar node,\n\t\tnodes = selector ? jQuery.filter( selector, elem ) : elem,\n\t\ti = 0;\n\n\tfor ( ; ( node = nodes[ i ] ) != null; i++ ) {\n\t\tif ( !keepData && node.nodeType === 1 ) {\n\t\t\tjQuery.cleanData( getAll( node ) );\n\t\t}\n\n\t\tif ( node.parentNode ) {\n\t\t\tif ( keepData && jQuery.contains( node.ownerDocument, node ) ) {\n\t\t\t\tsetGlobalEval( getAll( node, \"script\" ) );\n\t\t\t}\n\t\t\tnode.parentNode.removeChild( node );\n\t\t}\n\t}\n\n\treturn elem;\n}\n\njQuery.extend( {\n\thtmlPrefilter: function( html ) {\n\t\treturn html.replace( rxhtmlTag, \"<$1></$2>\" );\n\t},\n\n\tclone: function( elem, dataAndEvents, deepDataAndEvents ) {\n\t\tvar i, l, srcElements, destElements,\n\t\t\tclone = elem.cloneNode( true ),\n\t\t\tinPage = jQuery.contains( elem.ownerDocument, elem );\n\n\t\t// Fix IE cloning issues\n\t\tif ( !support.noCloneChecked && ( elem.nodeType === 1 || elem.nodeType === 11 ) &&\n\t\t\t\t!jQuery.isXMLDoc( elem ) ) {\n\n\t\t\t// We eschew Sizzle here for performance reasons: https://jsperf.com/getall-vs-sizzle/2\n\t\t\tdestElements = getAll( clone );\n\t\t\tsrcElements = getAll( elem );\n\n\t\t\tfor ( i = 0, l = srcElements.length; i < l; i++ ) {\n\t\t\t\tfixInput( srcElements[ i ], destElements[ i ] );\n\t\t\t}\n\t\t}\n\n\t\t// Copy the events from the original to the clone\n\t\tif ( dataAndEvents ) {\n\t\t\tif ( deepDataAndEvents ) {\n\t\t\t\tsrcElements = srcElements || getAll( elem );\n\t\t\t\tdestElements = destElements || getAll( clone );\n\n\t\t\t\tfor ( i = 0, l = srcElements.length; i < l; i++ ) {\n\t\t\t\t\tcloneCopyEvent( srcElements[ i ], destElements[ i ] );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcloneCopyEvent( elem, clone );\n\t\t\t}\n\t\t}\n\n\t\t// Preserve script evaluation history\n\t\tdestElements = getAll( clone, \"script\" );\n\t\tif ( destElements.length > 0 ) {\n\t\t\tsetGlobalEval( destElements, !inPage && getAll( elem, \"script\" ) );\n\t\t}\n\n\t\t// Return the cloned set\n\t\treturn clone;\n\t},\n\n\tcleanData: function( elems ) {\n\t\tvar data, elem, type,\n\t\t\tspecial = jQuery.event.special,\n\t\t\ti = 0;\n\n\t\tfor ( ; ( elem = elems[ i ] ) !== undefined; i++ ) {\n\t\t\tif ( acceptData( elem ) ) {\n\t\t\t\tif ( ( data = elem[ dataPriv.expando ] ) ) {\n\t\t\t\t\tif ( data.events ) {\n\t\t\t\t\t\tfor ( type in data.events ) {\n\t\t\t\t\t\t\tif ( special[ type ] ) {\n\t\t\t\t\t\t\t\tjQuery.event.remove( elem, type );\n\n\t\t\t\t\t\t\t// This is a shortcut to avoid jQuery.event.remove's overhead\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tjQuery.removeEvent( elem, type, data.handle );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Support: Chrome <=35 - 45+\n\t\t\t\t\t// Assign undefined instead of using delete, see Data#remove\n\t\t\t\t\telem[ dataPriv.expando ] = undefined;\n\t\t\t\t}\n\t\t\t\tif ( elem[ dataUser.expando ] ) {\n\n\t\t\t\t\t// Support: Chrome <=35 - 45+\n\t\t\t\t\t// Assign undefined instead of using delete, see Data#remove\n\t\t\t\t\telem[ dataUser.expando ] = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n} );\n\njQuery.fn.extend( {\n\tdetach: function( selector ) {\n\t\treturn remove( this, selector, true );\n\t},\n\n\tremove: function( selector ) {\n\t\treturn remove( this, selector );\n\t},\n\n\ttext: function( value ) {\n\t\treturn access( this, function( value ) {\n\t\t\treturn value === undefined ?\n\t\t\t\tjQuery.text( this ) :\n\t\t\t\tthis.empty().each( function() {\n\t\t\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\t\t\tthis.textContent = value;\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t}, null, value, arguments.length );\n\t},\n\n\tappend: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\tvar target = manipulationTarget( this, elem );\n\t\t\t\ttarget.appendChild( elem );\n\t\t\t}\n\t\t} );\n\t},\n\n\tprepend: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\tvar target = manipulationTarget( this, elem );\n\t\t\t\ttarget.insertBefore( elem, target.firstChild );\n\t\t\t}\n\t\t} );\n\t},\n\n\tbefore: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.parentNode ) {\n\t\t\t\tthis.parentNode.insertBefore( elem, this );\n\t\t\t}\n\t\t} );\n\t},\n\n\tafter: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.parentNode ) {\n\t\t\t\tthis.parentNode.insertBefore( elem, this.nextSibling );\n\t\t\t}\n\t\t} );\n\t},\n\n\tempty: function() {\n\t\tvar elem,\n\t\t\ti = 0;\n\n\t\tfor ( ; ( elem = this[ i ] ) != null; i++ ) {\n\t\t\tif ( elem.nodeType === 1 ) {\n\n\t\t\t\t// Prevent memory leaks\n\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n\n\t\t\t\t// Remove any remaining nodes\n\t\t\t\telem.textContent = \"\";\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tclone: function( dataAndEvents, deepDataAndEvents ) {\n\t\tdataAndEvents = dataAndEvents == null ? false : dataAndEvents;\n\t\tdeepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;\n\n\t\treturn this.map( function() {\n\t\t\treturn jQuery.clone( this, dataAndEvents, deepDataAndEvents );\n\t\t} );\n\t},\n\n\thtml: function( value ) {\n\t\treturn access( this, function( value ) {\n\t\t\tvar elem = this[ 0 ] || {},\n\t\t\t\ti = 0,\n\t\t\t\tl = this.length;\n\n\t\t\tif ( value === undefined && elem.nodeType === 1 ) {\n\t\t\t\treturn elem.innerHTML;\n\t\t\t}\n\n\t\t\t// See if we can take a shortcut and just use innerHTML\n\t\t\tif ( typeof value === \"string\" && !rnoInnerhtml.test( value ) &&\n\t\t\t\t!wrapMap[ ( rtagName.exec( value ) || [ \"\", \"\" ] )[ 1 ].toLowerCase() ] ) {\n\n\t\t\t\tvalue = jQuery.htmlPrefilter( value );\n\n\t\t\t\ttry {\n\t\t\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\t\t\telem = this[ i ] || {};\n\n\t\t\t\t\t\t// Remove element nodes and prevent memory leaks\n\t\t\t\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n\t\t\t\t\t\t\telem.innerHTML = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\telem = 0;\n\n\t\t\t\t// If using innerHTML throws an exception, use the fallback method\n\t\t\t\t} catch ( e ) {}\n\t\t\t}\n\n\t\t\tif ( elem ) {\n\t\t\t\tthis.empty().append( value );\n\t\t\t}\n\t\t}, null, value, arguments.length );\n\t},\n\n\treplaceWith: function() {\n\t\tvar ignored = [];\n\n\t\t// Make the changes, replacing each non-ignored context element with the new content\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tvar parent = this.parentNode;\n\n\t\t\tif ( jQuery.inArray( this, ignored ) < 0 ) {\n\t\t\t\tjQuery.cleanData( getAll( this ) );\n\t\t\t\tif ( parent ) {\n\t\t\t\t\tparent.replaceChild( elem, this );\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Force callback invocation\n\t\t}, ignored );\n\t}\n} );\n\njQuery.each( {\n\tappendTo: \"append\",\n\tprependTo: \"prepend\",\n\tinsertBefore: \"before\",\n\tinsertAfter: \"after\",\n\treplaceAll: \"replaceWith\"\n}, function( name, original ) {\n\tjQuery.fn[ name ] = function( selector ) {\n\t\tvar elems,\n\t\t\tret = [],\n\t\t\tinsert = jQuery( selector ),\n\t\t\tlast = insert.length - 1,\n\t\t\ti = 0;\n\n\t\tfor ( ; i <= last; i++ ) {\n\t\t\telems = i === last ? this : this.clone( true );\n\t\t\tjQuery( insert[ i ] )[ original ]( elems );\n\n\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t// .get() because push.apply(_, arraylike) throws on ancient WebKit\n\t\t\tpush.apply( ret, elems.get() );\n\t\t}\n\n\t\treturn this.pushStack( ret );\n\t};\n} );\nvar rmargin = ( /^margin/ );\n\nvar rnumnonpx = new RegExp( \"^(\" + pnum + \")(?!px)[a-z%]+$\", \"i\" );\n\nvar getStyles = function( elem ) {\n\n\t\t// Support: IE <=11 only, Firefox <=30 (#15098, #14150)\n\t\t// IE throws on elements created in popups\n\t\t// FF meanwhile throws on frame elements through \"defaultView.getComputedStyle\"\n\t\tvar view = elem.ownerDocument.defaultView;\n\n\t\tif ( !view || !view.opener ) {\n\t\t\tview = window;\n\t\t}\n\n\t\treturn view.getComputedStyle( elem );\n\t};\n\n\n\n( function() {\n\n\t// Executing both pixelPosition & boxSizingReliable tests require only one layout\n\t// so they're executed at the same time to save the second computation.\n\tfunction computeStyleTests() {\n\n\t\t// This is a singleton, we need to execute it only once\n\t\tif ( !div ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdiv.style.cssText =\n\t\t\t\"box-sizing:border-box;\" +\n\t\t\t\"position:relative;display:block;\" +\n\t\t\t\"margin:auto;border:1px;padding:1px;\" +\n\t\t\t\"top:1%;width:50%\";\n\t\tdiv.innerHTML = \"\";\n\t\tdocumentElement.appendChild( container );\n\n\t\tvar divStyle = window.getComputedStyle( div );\n\t\tpixelPositionVal = divStyle.top !== \"1%\";\n\n\t\t// Support: Android 4.0 - 4.3 only, Firefox <=3 - 44\n\t\treliableMarginLeftVal = divStyle.marginLeft === \"2px\";\n\t\tboxSizingReliableVal = divStyle.width === \"4px\";\n\n\t\t// Support: Android 4.0 - 4.3 only\n\t\t// Some styles come back with percentage values, even though they shouldn't\n\t\tdiv.style.marginRight = \"50%\";\n\t\tpixelMarginRightVal = divStyle.marginRight === \"4px\";\n\n\t\tdocumentElement.removeChild( container );\n\n\t\t// Nullify the div so it wouldn't be stored in the memory and\n\t\t// it will also be a sign that checks already performed\n\t\tdiv = null;\n\t}\n\n\tvar pixelPositionVal, boxSizingReliableVal, pixelMarginRightVal, reliableMarginLeftVal,\n\t\tcontainer = document.createElement( \"div\" ),\n\t\tdiv = document.createElement( \"div\" );\n\n\t// Finish early in limited (non-browser) environments\n\tif ( !div.style ) {\n\t\treturn;\n\t}\n\n\t// Support: IE <=9 - 11 only\n\t// Style of cloned element affects source element cloned (#8908)\n\tdiv.style.backgroundClip = \"content-box\";\n\tdiv.cloneNode( true ).style.backgroundClip = \"\";\n\tsupport.clearCloneStyle = div.style.backgroundClip === \"content-box\";\n\n\tcontainer.style.cssText = \"border:0;width:8px;height:0;top:0;left:-9999px;\" +\n\t\t\"padding:0;margin-top:1px;position:absolute\";\n\tcontainer.appendChild( div );\n\n\tjQuery.extend( support, {\n\t\tpixelPosition: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn pixelPositionVal;\n\t\t},\n\t\tboxSizingReliable: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn boxSizingReliableVal;\n\t\t},\n\t\tpixelMarginRight: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn pixelMarginRightVal;\n\t\t},\n\t\treliableMarginLeft: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn reliableMarginLeftVal;\n\t\t}\n\t} );\n} )();\n\n\nfunction curCSS( elem, name, computed ) {\n\tvar width, minWidth, maxWidth, ret,\n\t\tstyle = elem.style;\n\n\tcomputed = computed || getStyles( elem );\n\n\t// Support: IE <=9 only\n\t// getPropertyValue is only needed for .css('filter') (#12537)\n\tif ( computed ) {\n\t\tret = computed.getPropertyValue( name ) || computed[ name ];\n\n\t\tif ( ret === \"\" && !jQuery.contains( elem.ownerDocument, elem ) ) {\n\t\t\tret = jQuery.style( elem, name );\n\t\t}\n\n\t\t// A tribute to the \"awesome hack by Dean Edwards\"\n\t\t// Android Browser returns percentage for some values,\n\t\t// but width seems to be reliably pixels.\n\t\t// This is against the CSSOM draft spec:\n\t\t// https://drafts.csswg.org/cssom/#resolved-values\n\t\tif ( !support.pixelMarginRight() && rnumnonpx.test( ret ) && rmargin.test( name ) ) {\n\n\t\t\t// Remember the original values\n\t\t\twidth = style.width;\n\t\t\tminWidth = style.minWidth;\n\t\t\tmaxWidth = style.maxWidth;\n\n\t\t\t// Put in the new values to get a computed value out\n\t\t\tstyle.minWidth = style.maxWidth = style.width = ret;\n\t\t\tret = computed.width;\n\n\t\t\t// Revert the changed values\n\t\t\tstyle.width = width;\n\t\t\tstyle.minWidth = minWidth;\n\t\t\tstyle.maxWidth = maxWidth;\n\t\t}\n\t}\n\n\treturn ret !== undefined ?\n\n\t\t// Support: IE <=9 - 11 only\n\t\t// IE returns zIndex value as an integer.\n\t\tret + \"\" :\n\t\tret;\n}\n\n\nfunction addGetHookIf( conditionFn, hookFn ) {\n\n\t// Define the hook, we'll check on the first run if it's really needed.\n\treturn {\n\t\tget: function() {\n\t\t\tif ( conditionFn() ) {\n\n\t\t\t\t// Hook not needed (or it's not possible to use it due\n\t\t\t\t// to missing dependency), remove it.\n\t\t\t\tdelete this.get;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Hook needed; redefine it so that the support test is not executed again.\n\t\t\treturn ( this.get = hookFn ).apply( this, arguments );\n\t\t}\n\t};\n}\n\n\nvar\n\n\t// Swappable if display is none or starts with table\n\t// except \"table\", \"table-cell\", or \"table-caption\"\n\t// See here for display values: https://developer.mozilla.org/en-US/docs/CSS/display\n\trdisplayswap = /^(none|table(?!-c[ea]).+)/,\n\tcssShow = { position: \"absolute\", visibility: \"hidden\", display: \"block\" },\n\tcssNormalTransform = {\n\t\tletterSpacing: \"0\",\n\t\tfontWeight: \"400\"\n\t},\n\n\tcssPrefixes = [ \"Webkit\", \"Moz\", \"ms\" ],\n\temptyStyle = document.createElement( \"div\" ).style;\n\n// Return a css property mapped to a potentially vendor prefixed property\nfunction vendorPropName( name ) {\n\n\t// Shortcut for names that are not vendor prefixed\n\tif ( name in emptyStyle ) {\n\t\treturn name;\n\t}\n\n\t// Check for vendor prefixed names\n\tvar capName = name[ 0 ].toUpperCase() + name.slice( 1 ),\n\t\ti = cssPrefixes.length;\n\n\twhile ( i-- ) {\n\t\tname = cssPrefixes[ i ] + capName;\n\t\tif ( name in emptyStyle ) {\n\t\t\treturn name;\n\t\t}\n\t}\n}\n\nfunction setPositiveNumber( elem, value, subtract ) {\n\n\t// Any relative (+/-) values have already been\n\t// normalized at this point\n\tvar matches = rcssNum.exec( value );\n\treturn matches ?\n\n\t\t// Guard against undefined \"subtract\", e.g., when used as in cssHooks\n\t\tMath.max( 0, matches[ 2 ] - ( subtract || 0 ) ) + ( matches[ 3 ] || \"px\" ) :\n\t\tvalue;\n}\n\nfunction augmentWidthOrHeight( elem, name, extra, isBorderBox, styles ) {\n\tvar i,\n\t\tval = 0;\n\n\t// If we already have the right measurement, avoid augmentation\n\tif ( extra === ( isBorderBox ? \"border\" : \"content\" ) ) {\n\t\ti = 4;\n\n\t// Otherwise initialize for horizontal or vertical properties\n\t} else {\n\t\ti = name === \"width\" ? 1 : 0;\n\t}\n\n\tfor ( ; i < 4; i += 2 ) {\n\n\t\t// Both box models exclude margin, so add it if we want it\n\t\tif ( extra === \"margin\" ) {\n\t\t\tval += jQuery.css( elem, extra + cssExpand[ i ], true, styles );\n\t\t}\n\n\t\tif ( isBorderBox ) {\n\n\t\t\t// border-box includes padding, so remove it if we want content\n\t\t\tif ( extra === \"content\" ) {\n\t\t\t\tval -= jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n\t\t\t}\n\n\t\t\t// At this point, extra isn't border nor margin, so remove border\n\t\t\tif ( extra !== \"margin\" ) {\n\t\t\t\tval -= jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\t\t\t}\n\t\t} else {\n\n\t\t\t// At this point, extra isn't content, so add padding\n\t\t\tval += jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n\n\t\t\t// At this point, extra isn't content nor padding, so add border\n\t\t\tif ( extra !== \"padding\" ) {\n\t\t\t\tval += jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\t\t\t}\n\t\t}\n\t}\n\n\treturn val;\n}\n\nfunction getWidthOrHeight( elem, name, extra ) {\n\n\t// Start with offset property, which is equivalent to the border-box value\n\tvar val,\n\t\tvalueIsBorderBox = true,\n\t\tstyles = getStyles( elem ),\n\t\tisBorderBox = jQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\";\n\n\t// Support: IE <=11 only\n\t// Running getBoundingClientRect on a disconnected node\n\t// in IE throws an error.\n\tif ( elem.getClientRects().length ) {\n\t\tval = elem.getBoundingClientRect()[ name ];\n\t}\n\n\t// Some non-html elements return undefined for offsetWidth, so check for null/undefined\n\t// svg - https://bugzilla.mozilla.org/show_bug.cgi?id=649285\n\t// MathML - https://bugzilla.mozilla.org/show_bug.cgi?id=491668\n\tif ( val <= 0 || val == null ) {\n\n\t\t// Fall back to computed then uncomputed css if necessary\n\t\tval = curCSS( elem, name, styles );\n\t\tif ( val < 0 || val == null ) {\n\t\t\tval = elem.style[ name ];\n\t\t}\n\n\t\t// Computed unit is not pixels. Stop here and return.\n\t\tif ( rnumnonpx.test( val ) ) {\n\t\t\treturn val;\n\t\t}\n\n\t\t// Check for style in case a browser which returns unreliable values\n\t\t// for getComputedStyle silently falls back to the reliable elem.style\n\t\tvalueIsBorderBox = isBorderBox &&\n\t\t\t( support.boxSizingReliable() || val === elem.style[ name ] );\n\n\t\t// Normalize \"\", auto, and prepare for extra\n\t\tval = parseFloat( val ) || 0;\n\t}\n\n\t// Use the active box-sizing model to add/subtract irrelevant styles\n\treturn ( val +\n\t\taugmentWidthOrHeight(\n\t\t\telem,\n\t\t\tname,\n\t\t\textra || ( isBorderBox ? \"border\" : \"content\" ),\n\t\t\tvalueIsBorderBox,\n\t\t\tstyles\n\t\t)\n\t) + \"px\";\n}\n\njQuery.extend( {\n\n\t// Add in style property hooks for overriding the default\n\t// behavior of getting and setting a style property\n\tcssHooks: {\n\t\topacity: {\n\t\t\tget: function( elem, computed ) {\n\t\t\t\tif ( computed ) {\n\n\t\t\t\t\t// We should always get a number back from opacity\n\t\t\t\t\tvar ret = curCSS( elem, \"opacity\" );\n\t\t\t\t\treturn ret === \"\" ? \"1\" : ret;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t// Don't automatically add \"px\" to these possibly-unitless properties\n\tcssNumber: {\n\t\t\"animationIterationCount\": true,\n\t\t\"columnCount\": true,\n\t\t\"fillOpacity\": true,\n\t\t\"flexGrow\": true,\n\t\t\"flexShrink\": true,\n\t\t\"fontWeight\": true,\n\t\t\"lineHeight\": true,\n\t\t\"opacity\": true,\n\t\t\"order\": true,\n\t\t\"orphans\": true,\n\t\t\"widows\": true,\n\t\t\"zIndex\": true,\n\t\t\"zoom\": true\n\t},\n\n\t// Add in properties whose names you wish to fix before\n\t// setting or getting the value\n\tcssProps: {\n\t\t\"float\": \"cssFloat\"\n\t},\n\n\t// Get and set the style property on a DOM Node\n\tstyle: function( elem, name, value, extra ) {\n\n\t\t// Don't set styles on text and comment nodes\n\t\tif ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Make sure that we're working with the right name\n\t\tvar ret, type, hooks,\n\t\t\torigName = jQuery.camelCase( name ),\n\t\t\tstyle = elem.style;\n\n\t\tname = jQuery.cssProps[ origName ] ||\n\t\t\t( jQuery.cssProps[ origName ] = vendorPropName( origName ) || origName );\n\n\t\t// Gets hook for the prefixed version, then unprefixed version\n\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n\n\t\t// Check if we're setting a value\n\t\tif ( value !== undefined ) {\n\t\t\ttype = typeof value;\n\n\t\t\t// Convert \"+=\" or \"-=\" to relative numbers (#7345)\n\t\t\tif ( type === \"string\" && ( ret = rcssNum.exec( value ) ) && ret[ 1 ] ) {\n\t\t\t\tvalue = adjustCSS( elem, name, ret );\n\n\t\t\t\t// Fixes bug #9237\n\t\t\t\ttype = \"number\";\n\t\t\t}\n\n\t\t\t// Make sure that null and NaN values aren't set (#7116)\n\t\t\tif ( value == null || value !== value ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If a number was passed in, add the unit (except for certain CSS properties)\n\t\t\tif ( type === \"number\" ) {\n\t\t\t\tvalue += ret && ret[ 3 ] || ( jQuery.cssNumber[ origName ] ? \"\" : \"px\" );\n\t\t\t}\n\n\t\t\t// background-* props affect original clone's values\n\t\t\tif ( !support.clearCloneStyle && value === \"\" && name.indexOf( \"background\" ) === 0 ) {\n\t\t\t\tstyle[ name ] = \"inherit\";\n\t\t\t}\n\n\t\t\t// If a hook was provided, use that value, otherwise just set the specified value\n\t\t\tif ( !hooks || !( \"set\" in hooks ) ||\n\t\t\t\t( value = hooks.set( elem, value, extra ) ) !== undefined ) {\n\n\t\t\t\tstyle[ name ] = value;\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// If a hook was provided get the non-computed value from there\n\t\t\tif ( hooks && \"get\" in hooks &&\n\t\t\t\t( ret = hooks.get( elem, false, extra ) ) !== undefined ) {\n\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\t// Otherwise just get the value from the style object\n\t\t\treturn style[ name ];\n\t\t}\n\t},\n\n\tcss: function( elem, name, extra, styles ) {\n\t\tvar val, num, hooks,\n\t\t\torigName = jQuery.camelCase( name );\n\n\t\t// Make sure that we're working with the right name\n\t\tname = jQuery.cssProps[ origName ] ||\n\t\t\t( jQuery.cssProps[ origName ] = vendorPropName( origName ) || origName );\n\n\t\t// Try prefixed name followed by the unprefixed name\n\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n\n\t\t// If a hook was provided get the computed value from there\n\t\tif ( hooks && \"get\" in hooks ) {\n\t\t\tval = hooks.get( elem, true, extra );\n\t\t}\n\n\t\t// Otherwise, if a way to get the computed value exists, use that\n\t\tif ( val === undefined ) {\n\t\t\tval = curCSS( elem, name, styles );\n\t\t}\n\n\t\t// Convert \"normal\" to computed value\n\t\tif ( val === \"normal\" && name in cssNormalTransform ) {\n\t\t\tval = cssNormalTransform[ name ];\n\t\t}\n\n\t\t// Make numeric if forced or a qualifier was provided and val looks numeric\n\t\tif ( extra === \"\" || extra ) {\n\t\t\tnum = parseFloat( val );\n\t\t\treturn extra === true || isFinite( num ) ? num || 0 : val;\n\t\t}\n\t\treturn val;\n\t}\n} );\n\njQuery.each( [ \"height\", \"width\" ], function( i, name ) {\n\tjQuery.cssHooks[ name ] = {\n\t\tget: function( elem, computed, extra ) {\n\t\t\tif ( computed ) {\n\n\t\t\t\t// Certain elements can have dimension info if we invisibly show them\n\t\t\t\t// but it must have a current display style that would benefit\n\t\t\t\treturn rdisplayswap.test( jQuery.css( elem, \"display\" ) ) &&\n\n\t\t\t\t\t// Support: Safari 8+\n\t\t\t\t\t// Table columns in Safari have non-zero offsetWidth & zero\n\t\t\t\t\t// getBoundingClientRect().width unless display is changed.\n\t\t\t\t\t// Support: IE <=11 only\n\t\t\t\t\t// Running getBoundingClientRect on a disconnected node\n\t\t\t\t\t// in IE throws an error.\n\t\t\t\t\t( !elem.getClientRects().length || !elem.getBoundingClientRect().width ) ?\n\t\t\t\t\t\tswap( elem, cssShow, function() {\n\t\t\t\t\t\t\treturn getWidthOrHeight( elem, name, extra );\n\t\t\t\t\t\t} ) :\n\t\t\t\t\t\tgetWidthOrHeight( elem, name, extra );\n\t\t\t}\n\t\t},\n\n\t\tset: function( elem, value, extra ) {\n\t\t\tvar matches,\n\t\t\t\tstyles = extra && getStyles( elem ),\n\t\t\t\tsubtract = extra && augmentWidthOrHeight(\n\t\t\t\t\telem,\n\t\t\t\t\tname,\n\t\t\t\t\textra,\n\t\t\t\t\tjQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\",\n\t\t\t\t\tstyles\n\t\t\t\t);\n\n\t\t\t// Convert to pixels if value adjustment is needed\n\t\t\tif ( subtract && ( matches = rcssNum.exec( value ) ) &&\n\t\t\t\t( matches[ 3 ] || \"px\" ) !== \"px\" ) {\n\n\t\t\t\telem.style[ name ] = value;\n\t\t\t\tvalue = jQuery.css( elem, name );\n\t\t\t}\n\n\t\t\treturn setPositiveNumber( elem, value, subtract );\n\t\t}\n\t};\n} );\n\njQuery.cssHooks.marginLeft = addGetHookIf( support.reliableMarginLeft,\n\tfunction( elem, computed ) {\n\t\tif ( computed ) {\n\t\t\treturn ( parseFloat( curCSS( elem, \"marginLeft\" ) ) ||\n\t\t\t\telem.getBoundingClientRect().left -\n\t\t\t\t\tswap( elem, { marginLeft: 0 }, function() {\n\t\t\t\t\t\treturn elem.getBoundingClientRect().left;\n\t\t\t\t\t} )\n\t\t\t\t) + \"px\";\n\t\t}\n\t}\n);\n\n// These hooks are used by animate to expand properties\njQuery.each( {\n\tmargin: \"\",\n\tpadding: \"\",\n\tborder: \"Width\"\n}, function( prefix, suffix ) {\n\tjQuery.cssHooks[ prefix + suffix ] = {\n\t\texpand: function( value ) {\n\t\t\tvar i = 0,\n\t\t\t\texpanded = {},\n\n\t\t\t\t// Assumes a single number if not a string\n\t\t\t\tparts = typeof value === \"string\" ? value.split( \" \" ) : [ value ];\n\n\t\t\tfor ( ; i < 4; i++ ) {\n\t\t\t\texpanded[ prefix + cssExpand[ i ] + suffix ] =\n\t\t\t\t\tparts[ i ] || parts[ i - 2 ] || parts[ 0 ];\n\t\t\t}\n\n\t\t\treturn expanded;\n\t\t}\n\t};\n\n\tif ( !rmargin.test( prefix ) ) {\n\t\tjQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;\n\t}\n} );\n\njQuery.fn.extend( {\n\tcss: function( name, value ) {\n\t\treturn access( this, function( elem, name, value ) {\n\t\t\tvar styles, len,\n\t\t\t\tmap = {},\n\t\t\t\ti = 0;\n\n\t\t\tif ( jQuery.isArray( name ) ) {\n\t\t\t\tstyles = getStyles( elem );\n\t\t\t\tlen = name.length;\n\n\t\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\t\tmap[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );\n\t\t\t\t}\n\n\t\t\t\treturn map;\n\t\t\t}\n\n\t\t\treturn value !== undefined ?\n\t\t\t\tjQuery.style( elem, name, value ) :\n\t\t\t\tjQuery.css( elem, name );\n\t\t}, name, value, arguments.length > 1 );\n\t}\n} );\n\n\nfunction Tween( elem, options, prop, end, easing ) {\n\treturn new Tween.prototype.init( elem, options, prop, end, easing );\n}\njQuery.Tween = Tween;\n\nTween.prototype = {\n\tconstructor: Tween,\n\tinit: function( elem, options, prop, end, easing, unit ) {\n\t\tthis.elem = elem;\n\t\tthis.prop = prop;\n\t\tthis.easing = easing || jQuery.easing._default;\n\t\tthis.options = options;\n\t\tthis.start = this.now = this.cur();\n\t\tthis.end = end;\n\t\tthis.unit = unit || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" );\n\t},\n\tcur: function() {\n\t\tvar hooks = Tween.propHooks[ this.prop ];\n\n\t\treturn hooks && hooks.get ?\n\t\t\thooks.get( this ) :\n\t\t\tTween.propHooks._default.get( this );\n\t},\n\trun: function( percent ) {\n\t\tvar eased,\n\t\t\thooks = Tween.propHooks[ this.prop ];\n\n\t\tif ( this.options.duration ) {\n\t\t\tthis.pos = eased = jQuery.easing[ this.easing ](\n\t\t\t\tpercent, this.options.duration * percent, 0, 1, this.options.duration\n\t\t\t);\n\t\t} else {\n\t\t\tthis.pos = eased = percent;\n\t\t}\n\t\tthis.now = ( this.end - this.start ) * eased + this.start;\n\n\t\tif ( this.options.step ) {\n\t\t\tthis.options.step.call( this.elem, this.now, this );\n\t\t}\n\n\t\tif ( hooks && hooks.set ) {\n\t\t\thooks.set( this );\n\t\t} else {\n\t\t\tTween.propHooks._default.set( this );\n\t\t}\n\t\treturn this;\n\t}\n};\n\nTween.prototype.init.prototype = Tween.prototype;\n\nTween.propHooks = {\n\t_default: {\n\t\tget: function( tween ) {\n\t\t\tvar result;\n\n\t\t\t// Use a property on the element directly when it is not a DOM element,\n\t\t\t// or when there is no matching style property that exists.\n\t\t\tif ( tween.elem.nodeType !== 1 ||\n\t\t\t\ttween.elem[ tween.prop ] != null && tween.elem.style[ tween.prop ] == null ) {\n\t\t\t\treturn tween.elem[ tween.prop ];\n\t\t\t}\n\n\t\t\t// Passing an empty string as a 3rd parameter to .css will automatically\n\t\t\t// attempt a parseFloat and fallback to a string if the parse fails.\n\t\t\t// Simple values such as \"10px\" are parsed to Float;\n\t\t\t// complex values such as \"rotate(1rad)\" are returned as-is.\n\t\t\tresult = jQuery.css( tween.elem, tween.prop, \"\" );\n\n\t\t\t// Empty strings, null, undefined and \"auto\" are converted to 0.\n\t\t\treturn !result || result === \"auto\" ? 0 : result;\n\t\t},\n\t\tset: function( tween ) {\n\n\t\t\t// Use step hook for back compat.\n\t\t\t// Use cssHook if its there.\n\t\t\t// Use .style if available and use plain properties where available.\n\t\t\tif ( jQuery.fx.step[ tween.prop ] ) {\n\t\t\t\tjQuery.fx.step[ tween.prop ]( tween );\n\t\t\t} else if ( tween.elem.nodeType === 1 &&\n\t\t\t\t( tween.elem.style[ jQuery.cssProps[ tween.prop ] ] != null ||\n\t\t\t\t\tjQuery.cssHooks[ tween.prop ] ) ) {\n\t\t\t\tjQuery.style( tween.elem, tween.prop, tween.now + tween.unit );\n\t\t\t} else {\n\t\t\t\ttween.elem[ tween.prop ] = tween.now;\n\t\t\t}\n\t\t}\n\t}\n};\n\n// Support: IE <=9 only\n// Panic based approach to setting things on disconnected nodes\nTween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {\n\tset: function( tween ) {\n\t\tif ( tween.elem.nodeType && tween.elem.parentNode ) {\n\t\t\ttween.elem[ tween.prop ] = tween.now;\n\t\t}\n\t}\n};\n\njQuery.easing = {\n\tlinear: function( p ) {\n\t\treturn p;\n\t},\n\tswing: function( p ) {\n\t\treturn 0.5 - Math.cos( p * Math.PI ) / 2;\n\t},\n\t_default: \"swing\"\n};\n\njQuery.fx = Tween.prototype.init;\n\n// Back compat <1.8 extension point\njQuery.fx.step = {};\n\n\n\n\nvar\n\tfxNow, timerId,\n\trfxtypes = /^(?:toggle|show|hide)$/,\n\trrun = /queueHooks$/;\n\nfunction raf() {\n\tif ( timerId ) {\n\t\twindow.requestAnimationFrame( raf );\n\t\tjQuery.fx.tick();\n\t}\n}\n\n// Animations created synchronously will run synchronously\nfunction createFxNow() {\n\twindow.setTimeout( function() {\n\t\tfxNow = undefined;\n\t} );\n\treturn ( fxNow = jQuery.now() );\n}\n\n// Generate parameters to create a standard animation\nfunction genFx( type, includeWidth ) {\n\tvar which,\n\t\ti = 0,\n\t\tattrs = { height: type };\n\n\t// If we include width, step value is 1 to do all cssExpand values,\n\t// otherwise step value is 2 to skip over Left and Right\n\tincludeWidth = includeWidth ? 1 : 0;\n\tfor ( ; i < 4; i += 2 - includeWidth ) {\n\t\twhich = cssExpand[ i ];\n\t\tattrs[ \"margin\" + which ] = attrs[ \"padding\" + which ] = type;\n\t}\n\n\tif ( includeWidth ) {\n\t\tattrs.opacity = attrs.width = type;\n\t}\n\n\treturn attrs;\n}\n\nfunction createTween( value, prop, animation ) {\n\tvar tween,\n\t\tcollection = ( Animation.tweeners[ prop ] || [] ).concat( Animation.tweeners[ \"*\" ] ),\n\t\tindex = 0,\n\t\tlength = collection.length;\n\tfor ( ; index < length; index++ ) {\n\t\tif ( ( tween = collection[ index ].call( animation, prop, value ) ) ) {\n\n\t\t\t// We're done with this property\n\t\t\treturn tween;\n\t\t}\n\t}\n}\n\nfunction defaultPrefilter( elem, props, opts ) {\n\tvar prop, value, toggle, hooks, oldfire, propTween, restoreDisplay, display,\n\t\tisBox = \"width\" in props || \"height\" in props,\n\t\tanim = this,\n\t\torig = {},\n\t\tstyle = elem.style,\n\t\thidden = elem.nodeType && isHiddenWithinTree( elem ),\n\t\tdataShow = dataPriv.get( elem, \"fxshow\" );\n\n\t// Queue-skipping animations hijack the fx hooks\n\tif ( !opts.queue ) {\n\t\thooks = jQuery._queueHooks( elem, \"fx\" );\n\t\tif ( hooks.unqueued == null ) {\n\t\t\thooks.unqueued = 0;\n\t\t\toldfire = hooks.empty.fire;\n\t\t\thooks.empty.fire = function() {\n\t\t\t\tif ( !hooks.unqueued ) {\n\t\t\t\t\toldfire();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\thooks.unqueued++;\n\n\t\tanim.always( function() {\n\n\t\t\t// Ensure the complete handler is called before this completes\n\t\t\tanim.always( function() {\n\t\t\t\thooks.unqueued--;\n\t\t\t\tif ( !jQuery.queue( elem, \"fx\" ).length ) {\n\t\t\t\t\thooks.empty.fire();\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\t}\n\n\t// Detect show/hide animations\n\tfor ( prop in props ) {\n\t\tvalue = props[ prop ];\n\t\tif ( rfxtypes.test( value ) ) {\n\t\t\tdelete props[ prop ];\n\t\t\ttoggle = toggle || value === \"toggle\";\n\t\t\tif ( value === ( hidden ? \"hide\" : \"show\" ) ) {\n\n\t\t\t\t// Pretend to be hidden if this is a \"show\" and\n\t\t\t\t// there is still data from a stopped show/hide\n\t\t\t\tif ( value === \"show\" && dataShow && dataShow[ prop ] !== undefined ) {\n\t\t\t\t\thidden = true;\n\n\t\t\t\t// Ignore all other no-op show/hide data\n\t\t\t\t} else {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\torig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );\n\t\t}\n\t}\n\n\t// Bail out if this is a no-op like .hide().hide()\n\tpropTween = !jQuery.isEmptyObject( props );\n\tif ( !propTween && jQuery.isEmptyObject( orig ) ) {\n\t\treturn;\n\t}\n\n\t// Restrict \"overflow\" and \"display\" styles during box animations\n\tif ( isBox && elem.nodeType === 1 ) {\n\n\t\t// Support: IE <=9 - 11, Edge 12 - 13\n\t\t// Record all 3 overflow attributes because IE does not infer the shorthand\n\t\t// from identically-valued overflowX and overflowY\n\t\topts.overflow = [ style.overflow, style.overflowX, style.overflowY ];\n\n\t\t// Identify a display type, preferring old show/hide data over the CSS cascade\n\t\trestoreDisplay = dataShow && dataShow.display;\n\t\tif ( restoreDisplay == null ) {\n\t\t\trestoreDisplay = dataPriv.get( elem, \"display\" );\n\t\t}\n\t\tdisplay = jQuery.css( elem, \"display\" );\n\t\tif ( display === \"none\" ) {\n\t\t\tif ( restoreDisplay ) {\n\t\t\t\tdisplay = restoreDisplay;\n\t\t\t} else {\n\n\t\t\t\t// Get nonempty value(s) by temporarily forcing visibility\n\t\t\t\tshowHide( [ elem ], true );\n\t\t\t\trestoreDisplay = elem.style.display || restoreDisplay;\n\t\t\t\tdisplay = jQuery.css( elem, \"display\" );\n\t\t\t\tshowHide( [ elem ] );\n\t\t\t}\n\t\t}\n\n\t\t// Animate inline elements as inline-block\n\t\tif ( display === \"inline\" || display === \"inline-block\" && restoreDisplay != null ) {\n\t\t\tif ( jQuery.css( elem, \"float\" ) === \"none\" ) {\n\n\t\t\t\t// Restore the original display value at the end of pure show/hide animations\n\t\t\t\tif ( !propTween ) {\n\t\t\t\t\tanim.done( function() {\n\t\t\t\t\t\tstyle.display = restoreDisplay;\n\t\t\t\t\t} );\n\t\t\t\t\tif ( restoreDisplay == null ) {\n\t\t\t\t\t\tdisplay = style.display;\n\t\t\t\t\t\trestoreDisplay = display === \"none\" ? \"\" : display;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tstyle.display = \"inline-block\";\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( opts.overflow ) {\n\t\tstyle.overflow = \"hidden\";\n\t\tanim.always( function() {\n\t\t\tstyle.overflow = opts.overflow[ 0 ];\n\t\t\tstyle.overflowX = opts.overflow[ 1 ];\n\t\t\tstyle.overflowY = opts.overflow[ 2 ];\n\t\t} );\n\t}\n\n\t// Implement show/hide animations\n\tpropTween = false;\n\tfor ( prop in orig ) {\n\n\t\t// General show/hide setup for this element animation\n\t\tif ( !propTween ) {\n\t\t\tif ( dataShow ) {\n\t\t\t\tif ( \"hidden\" in dataShow ) {\n\t\t\t\t\thidden = dataShow.hidden;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdataShow = dataPriv.access( elem, \"fxshow\", { display: restoreDisplay } );\n\t\t\t}\n\n\t\t\t// Store hidden/visible for toggle so `.stop().toggle()` \"reverses\"\n\t\t\tif ( toggle ) {\n\t\t\t\tdataShow.hidden = !hidden;\n\t\t\t}\n\n\t\t\t// Show elements before animating them\n\t\t\tif ( hidden ) {\n\t\t\t\tshowHide( [ elem ], true );\n\t\t\t}\n\n\t\t\t/* eslint-disable no-loop-func */\n\n\t\t\tanim.done( function() {\n\n\t\t\t/* eslint-enable no-loop-func */\n\n\t\t\t\t// The final step of a \"hide\" animation is actually hiding the element\n\t\t\t\tif ( !hidden ) {\n\t\t\t\t\tshowHide( [ elem ] );\n\t\t\t\t}\n\t\t\t\tdataPriv.remove( elem, \"fxshow\" );\n\t\t\t\tfor ( prop in orig ) {\n\t\t\t\t\tjQuery.style( elem, prop, orig[ prop ] );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\t// Per-property setup\n\t\tpropTween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );\n\t\tif ( !( prop in dataShow ) ) {\n\t\t\tdataShow[ prop ] = propTween.start;\n\t\t\tif ( hidden ) {\n\t\t\t\tpropTween.end = propTween.start;\n\t\t\t\tpropTween.start = 0;\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction propFilter( props, specialEasing ) {\n\tvar index, name, easing, value, hooks;\n\n\t// camelCase, specialEasing and expand cssHook pass\n\tfor ( index in props ) {\n\t\tname = jQuery.camelCase( index );\n\t\teasing = specialEasing[ name ];\n\t\tvalue = props[ index ];\n\t\tif ( jQuery.isArray( value ) ) {\n\t\t\teasing = value[ 1 ];\n\t\t\tvalue = props[ index ] = value[ 0 ];\n\t\t}\n\n\t\tif ( index !== name ) {\n\t\t\tprops[ name ] = value;\n\t\t\tdelete props[ index ];\n\t\t}\n\n\t\thooks = jQuery.cssHooks[ name ];\n\t\tif ( hooks && \"expand\" in hooks ) {\n\t\t\tvalue = hooks.expand( value );\n\t\t\tdelete props[ name ];\n\n\t\t\t// Not quite $.extend, this won't overwrite existing keys.\n\t\t\t// Reusing 'index' because we have the correct \"name\"\n\t\t\tfor ( index in value ) {\n\t\t\t\tif ( !( index in props ) ) {\n\t\t\t\t\tprops[ index ] = value[ index ];\n\t\t\t\t\tspecialEasing[ index ] = easing;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tspecialEasing[ name ] = easing;\n\t\t}\n\t}\n}\n\nfunction Animation( elem, properties, options ) {\n\tvar result,\n\t\tstopped,\n\t\tindex = 0,\n\t\tlength = Animation.prefilters.length,\n\t\tdeferred = jQuery.Deferred().always( function() {\n\n\t\t\t// Don't match elem in the :animated selector\n\t\t\tdelete tick.elem;\n\t\t} ),\n\t\ttick = function() {\n\t\t\tif ( stopped ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar currentTime = fxNow || createFxNow(),\n\t\t\t\tremaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),\n\n\t\t\t\t// Support: Android 2.3 only\n\t\t\t\t// Archaic crash bug won't allow us to use `1 - ( 0.5 || 0 )` (#12497)\n\t\t\t\ttemp = remaining / animation.duration || 0,\n\t\t\t\tpercent = 1 - temp,\n\t\t\t\tindex = 0,\n\t\t\t\tlength = animation.tweens.length;\n\n\t\t\tfor ( ; index < length; index++ ) {\n\t\t\t\tanimation.tweens[ index ].run( percent );\n\t\t\t}\n\n\t\t\tdeferred.notifyWith( elem, [ animation, percent, remaining ] );\n\n\t\t\tif ( percent < 1 && length ) {\n\t\t\t\treturn remaining;\n\t\t\t} else {\n\t\t\t\tdeferred.resolveWith( elem, [ animation ] );\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\tanimation = deferred.promise( {\n\t\t\telem: elem,\n\t\t\tprops: jQuery.extend( {}, properties ),\n\t\t\topts: jQuery.extend( true, {\n\t\t\t\tspecialEasing: {},\n\t\t\t\teasing: jQuery.easing._default\n\t\t\t}, options ),\n\t\t\toriginalProperties: properties,\n\t\t\toriginalOptions: options,\n\t\t\tstartTime: fxNow || createFxNow(),\n\t\t\tduration: options.duration,\n\t\t\ttweens: [],\n\t\t\tcreateTween: function( prop, end ) {\n\t\t\t\tvar tween = jQuery.Tween( elem, animation.opts, prop, end,\n\t\t\t\t\t\tanimation.opts.specialEasing[ prop ] || animation.opts.easing );\n\t\t\t\tanimation.tweens.push( tween );\n\t\t\t\treturn tween;\n\t\t\t},\n\t\t\tstop: function( gotoEnd ) {\n\t\t\t\tvar index = 0,\n\n\t\t\t\t\t// If we are going to the end, we want to run all the tweens\n\t\t\t\t\t// otherwise we skip this part\n\t\t\t\t\tlength = gotoEnd ? animation.tweens.length : 0;\n\t\t\t\tif ( stopped ) {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t\tstopped = true;\n\t\t\t\tfor ( ; index < length; index++ ) {\n\t\t\t\t\tanimation.tweens[ index ].run( 1 );\n\t\t\t\t}\n\n\t\t\t\t// Resolve when we played the last frame; otherwise, reject\n\t\t\t\tif ( gotoEnd ) {\n\t\t\t\t\tdeferred.notifyWith( elem, [ animation, 1, 0 ] );\n\t\t\t\t\tdeferred.resolveWith( elem, [ animation, gotoEnd ] );\n\t\t\t\t} else {\n\t\t\t\t\tdeferred.rejectWith( elem, [ animation, gotoEnd ] );\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t}\n\t\t} ),\n\t\tprops = animation.props;\n\n\tpropFilter( props, animation.opts.specialEasing );\n\n\tfor ( ; index < length; index++ ) {\n\t\tresult = Animation.prefilters[ index ].call( animation, elem, props, animation.opts );\n\t\tif ( result ) {\n\t\t\tif ( jQuery.isFunction( result.stop ) ) {\n\t\t\t\tjQuery._queueHooks( animation.elem, animation.opts.queue ).stop =\n\t\t\t\t\tjQuery.proxy( result.stop, result );\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t}\n\n\tjQuery.map( props, createTween, animation );\n\n\tif ( jQuery.isFunction( animation.opts.start ) ) {\n\t\tanimation.opts.start.call( elem, animation );\n\t}\n\n\tjQuery.fx.timer(\n\t\tjQuery.extend( tick, {\n\t\t\telem: elem,\n\t\t\tanim: animation,\n\t\t\tqueue: animation.opts.queue\n\t\t} )\n\t);\n\n\t// attach callbacks from options\n\treturn animation.progress( animation.opts.progress )\n\t\t.done( animation.opts.done, animation.opts.complete )\n\t\t.fail( animation.opts.fail )\n\t\t.always( animation.opts.always );\n}\n\njQuery.Animation = jQuery.extend( Animation, {\n\n\ttweeners: {\n\t\t\"*\": [ function( prop, value ) {\n\t\t\tvar tween = this.createTween( prop, value );\n\t\t\tadjustCSS( tween.elem, prop, rcssNum.exec( value ), tween );\n\t\t\treturn tween;\n\t\t} ]\n\t},\n\n\ttweener: function( props, callback ) {\n\t\tif ( jQuery.isFunction( props ) ) {\n\t\t\tcallback = props;\n\t\t\tprops = [ \"*\" ];\n\t\t} else {\n\t\t\tprops = props.match( rnothtmlwhite );\n\t\t}\n\n\t\tvar prop,\n\t\t\tindex = 0,\n\t\t\tlength = props.length;\n\n\t\tfor ( ; index < length; index++ ) {\n\t\t\tprop = props[ index ];\n\t\t\tAnimation.tweeners[ prop ] = Animation.tweeners[ prop ] || [];\n\t\t\tAnimation.tweeners[ prop ].unshift( callback );\n\t\t}\n\t},\n\n\tprefilters: [ defaultPrefilter ],\n\n\tprefilter: function( callback, prepend ) {\n\t\tif ( prepend ) {\n\t\t\tAnimation.prefilters.unshift( callback );\n\t\t} else {\n\t\t\tAnimation.prefilters.push( callback );\n\t\t}\n\t}\n} );\n\njQuery.speed = function( speed, easing, fn ) {\n\tvar opt = speed && typeof speed === \"object\" ? jQuery.extend( {}, speed ) : {\n\t\tcomplete: fn || !fn && easing ||\n\t\t\tjQuery.isFunction( speed ) && speed,\n\t\tduration: speed,\n\t\teasing: fn && easing || easing && !jQuery.isFunction( easing ) && easing\n\t};\n\n\t// Go to the end state if fx are off or if document is hidden\n\tif ( jQuery.fx.off || document.hidden ) {\n\t\topt.duration = 0;\n\n\t} else {\n\t\tif ( typeof opt.duration !== \"number\" ) {\n\t\t\tif ( opt.duration in jQuery.fx.speeds ) {\n\t\t\t\topt.duration = jQuery.fx.speeds[ opt.duration ];\n\n\t\t\t} else {\n\t\t\t\topt.duration = jQuery.fx.speeds._default;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Normalize opt.queue - true/undefined/null -> \"fx\"\n\tif ( opt.queue == null || opt.queue === true ) {\n\t\topt.queue = \"fx\";\n\t}\n\n\t// Queueing\n\topt.old = opt.complete;\n\n\topt.complete = function() {\n\t\tif ( jQuery.isFunction( opt.old ) ) {\n\t\t\topt.old.call( this );\n\t\t}\n\n\t\tif ( opt.queue ) {\n\t\t\tjQuery.dequeue( this, opt.queue );\n\t\t}\n\t};\n\n\treturn opt;\n};\n\njQuery.fn.extend( {\n\tfadeTo: function( speed, to, easing, callback ) {\n\n\t\t// Show any hidden elements after setting opacity to 0\n\t\treturn this.filter( isHiddenWithinTree ).css( \"opacity\", 0 ).show()\n\n\t\t\t// Animate to the value specified\n\t\t\t.end().animate( { opacity: to }, speed, easing, callback );\n\t},\n\tanimate: function( prop, speed, easing, callback ) {\n\t\tvar empty = jQuery.isEmptyObject( prop ),\n\t\t\toptall = jQuery.speed( speed, easing, callback ),\n\t\t\tdoAnimation = function() {\n\n\t\t\t\t// Operate on a copy of prop so per-property easing won't be lost\n\t\t\t\tvar anim = Animation( this, jQuery.extend( {}, prop ), optall );\n\n\t\t\t\t// Empty animations, or finishing resolves immediately\n\t\t\t\tif ( empty || dataPriv.get( this, \"finish\" ) ) {\n\t\t\t\t\tanim.stop( true );\n\t\t\t\t}\n\t\t\t};\n\t\t\tdoAnimation.finish = doAnimation;\n\n\t\treturn empty || optall.queue === false ?\n\t\t\tthis.each( doAnimation ) :\n\t\t\tthis.queue( optall.queue, doAnimation );\n\t},\n\tstop: function( type, clearQueue, gotoEnd ) {\n\t\tvar stopQueue = function( hooks ) {\n\t\t\tvar stop = hooks.stop;\n\t\t\tdelete hooks.stop;\n\t\t\tstop( gotoEnd );\n\t\t};\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tgotoEnd = clearQueue;\n\t\t\tclearQueue = type;\n\t\t\ttype = undefined;\n\t\t}\n\t\tif ( clearQueue && type !== false ) {\n\t\t\tthis.queue( type || \"fx\", [] );\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tvar dequeue = true,\n\t\t\t\tindex = type != null && type + \"queueHooks\",\n\t\t\t\ttimers = jQuery.timers,\n\t\t\t\tdata = dataPriv.get( this );\n\n\t\t\tif ( index ) {\n\t\t\t\tif ( data[ index ] && data[ index ].stop ) {\n\t\t\t\t\tstopQueue( data[ index ] );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor ( index in data ) {\n\t\t\t\t\tif ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {\n\t\t\t\t\t\tstopQueue( data[ index ] );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor ( index = timers.length; index--; ) {\n\t\t\t\tif ( timers[ index ].elem === this &&\n\t\t\t\t\t( type == null || timers[ index ].queue === type ) ) {\n\n\t\t\t\t\ttimers[ index ].anim.stop( gotoEnd );\n\t\t\t\t\tdequeue = false;\n\t\t\t\t\ttimers.splice( index, 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Start the next in the queue if the last step wasn't forced.\n\t\t\t// Timers currently will call their complete callbacks, which\n\t\t\t// will dequeue but only if they were gotoEnd.\n\t\t\tif ( dequeue || !gotoEnd ) {\n\t\t\t\tjQuery.dequeue( this, type );\n\t\t\t}\n\t\t} );\n\t},\n\tfinish: function( type ) {\n\t\tif ( type !== false ) {\n\t\t\ttype = type || \"fx\";\n\t\t}\n\t\treturn this.each( function() {\n\t\t\tvar index,\n\t\t\t\tdata = dataPriv.get( this ),\n\t\t\t\tqueue = data[ type + \"queue\" ],\n\t\t\t\thooks = data[ type + \"queueHooks\" ],\n\t\t\t\ttimers = jQuery.timers,\n\t\t\t\tlength = queue ? queue.length : 0;\n\n\t\t\t// Enable finishing flag on private data\n\t\t\tdata.finish = true;\n\n\t\t\t// Empty the queue first\n\t\t\tjQuery.queue( this, type, [] );\n\n\t\t\tif ( hooks && hooks.stop ) {\n\t\t\t\thooks.stop.call( this, true );\n\t\t\t}\n\n\t\t\t// Look for any active animations, and finish them\n\t\t\tfor ( index = timers.length; index--; ) {\n\t\t\t\tif ( timers[ index ].elem === this && timers[ index ].queue === type ) {\n\t\t\t\t\ttimers[ index ].anim.stop( true );\n\t\t\t\t\ttimers.splice( index, 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Look for any animations in the old queue and finish them\n\t\t\tfor ( index = 0; index < length; index++ ) {\n\t\t\t\tif ( queue[ index ] && queue[ index ].finish ) {\n\t\t\t\t\tqueue[ index ].finish.call( this );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Turn off finishing flag\n\t\t\tdelete data.finish;\n\t\t} );\n\t}\n} );\n\njQuery.each( [ \"toggle\", \"show\", \"hide\" ], function( i, name ) {\n\tvar cssFn = jQuery.fn[ name ];\n\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n\t\treturn speed == null || typeof speed === \"boolean\" ?\n\t\t\tcssFn.apply( this, arguments ) :\n\t\t\tthis.animate( genFx( name, true ), speed, easing, callback );\n\t};\n} );\n\n// Generate shortcuts for custom animations\njQuery.each( {\n\tslideDown: genFx( \"show\" ),\n\tslideUp: genFx( \"hide\" ),\n\tslideToggle: genFx( \"toggle\" ),\n\tfadeIn: { opacity: \"show\" },\n\tfadeOut: { opacity: \"hide\" },\n\tfadeToggle: { opacity: \"toggle\" }\n}, function( name, props ) {\n\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n\t\treturn this.animate( props, speed, easing, callback );\n\t};\n} );\n\njQuery.timers = [];\njQuery.fx.tick = function() {\n\tvar timer,\n\t\ti = 0,\n\t\ttimers = jQuery.timers;\n\n\tfxNow = jQuery.now();\n\n\tfor ( ; i < timers.length; i++ ) {\n\t\ttimer = timers[ i ];\n\n\t\t// Checks the timer has not already been removed\n\t\tif ( !timer() && timers[ i ] === timer ) {\n\t\t\ttimers.splice( i--, 1 );\n\t\t}\n\t}\n\n\tif ( !timers.length ) {\n\t\tjQuery.fx.stop();\n\t}\n\tfxNow = undefined;\n};\n\njQuery.fx.timer = function( timer ) {\n\tjQuery.timers.push( timer );\n\tif ( timer() ) {\n\t\tjQuery.fx.start();\n\t} else {\n\t\tjQuery.timers.pop();\n\t}\n};\n\njQuery.fx.interval = 13;\njQuery.fx.start = function() {\n\tif ( !timerId ) {\n\t\ttimerId = window.requestAnimationFrame ?\n\t\t\twindow.requestAnimationFrame( raf ) :\n\t\t\twindow.setInterval( jQuery.fx.tick, jQuery.fx.interval );\n\t}\n};\n\njQuery.fx.stop = function() {\n\tif ( window.cancelAnimationFrame ) {\n\t\twindow.cancelAnimationFrame( timerId );\n\t} else {\n\t\twindow.clearInterval( timerId );\n\t}\n\n\ttimerId = null;\n};\n\njQuery.fx.speeds = {\n\tslow: 600,\n\tfast: 200,\n\n\t// Default speed\n\t_default: 400\n};\n\n\n// Based off of the plugin by Clint Helfers, with permission.\n// https://web.archive.org/web/20100324014747/http://blindsignals.com/index.php/2009/07/jquery-delay/\njQuery.fn.delay = function( time, type ) {\n\ttime = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;\n\ttype = type || \"fx\";\n\n\treturn this.queue( type, function( next, hooks ) {\n\t\tvar timeout = window.setTimeout( next, time );\n\t\thooks.stop = function() {\n\t\t\twindow.clearTimeout( timeout );\n\t\t};\n\t} );\n};\n\n\n( function() {\n\tvar input = document.createElement( \"input\" ),\n\t\tselect = document.createElement( \"select\" ),\n\t\topt = select.appendChild( document.createElement( \"option\" ) );\n\n\tinput.type = \"checkbox\";\n\n\t// Support: Android <=4.3 only\n\t// Default value for a checkbox should be \"on\"\n\tsupport.checkOn = input.value !== \"\";\n\n\t// Support: IE <=11 only\n\t// Must access selectedIndex to make default options select\n\tsupport.optSelected = opt.selected;\n\n\t// Support: IE <=11 only\n\t// An input loses its value after becoming a radio\n\tinput = document.createElement( \"input\" );\n\tinput.value = \"t\";\n\tinput.type = \"radio\";\n\tsupport.radioValue = input.value === \"t\";\n} )();\n\n\nvar boolHook,\n\tattrHandle = jQuery.expr.attrHandle;\n\njQuery.fn.extend( {\n\tattr: function( name, value ) {\n\t\treturn access( this, jQuery.attr, name, value, arguments.length > 1 );\n\t},\n\n\tremoveAttr: function( name ) {\n\t\treturn this.each( function() {\n\t\t\tjQuery.removeAttr( this, name );\n\t\t} );\n\t}\n} );\n\njQuery.extend( {\n\tattr: function( elem, name, value ) {\n\t\tvar ret, hooks,\n\t\t\tnType = elem.nodeType;\n\n\t\t// Don't get/set attributes on text, comment and attribute nodes\n\t\tif ( nType === 3 || nType === 8 || nType === 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Fallback to prop when attributes are not supported\n\t\tif ( typeof elem.getAttribute === \"undefined\" ) {\n\t\t\treturn jQuery.prop( elem, name, value );\n\t\t}\n\n\t\t// Attribute hooks are determined by the lowercase version\n\t\t// Grab necessary hook if one is defined\n\t\tif ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {\n\t\t\thooks = jQuery.attrHooks[ name.toLowerCase() ] ||\n\t\t\t\t( jQuery.expr.match.bool.test( name ) ? boolHook : undefined );\n\t\t}\n\n\t\tif ( value !== undefined ) {\n\t\t\tif ( value === null ) {\n\t\t\t\tjQuery.removeAttr( elem, name );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( hooks && \"set\" in hooks &&\n\t\t\t\t( ret = hooks.set( elem, value, name ) ) !== undefined ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\telem.setAttribute( name, value + \"\" );\n\t\t\treturn value;\n\t\t}\n\n\t\tif ( hooks && \"get\" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {\n\t\t\treturn ret;\n\t\t}\n\n\t\tret = jQuery.find.attr( elem, name );\n\n\t\t// Non-existent attributes return null, we normalize to undefined\n\t\treturn ret == null ? undefined : ret;\n\t},\n\n\tattrHooks: {\n\t\ttype: {\n\t\t\tset: function( elem, value ) {\n\t\t\t\tif ( !support.radioValue && value === \"radio\" &&\n\t\t\t\t\tjQuery.nodeName( elem, \"input\" ) ) {\n\t\t\t\t\tvar val = elem.value;\n\t\t\t\t\telem.setAttribute( \"type\", value );\n\t\t\t\t\tif ( val ) {\n\t\t\t\t\t\telem.value = val;\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tremoveAttr: function( elem, value ) {\n\t\tvar name,\n\t\t\ti = 0,\n\n\t\t\t// Attribute names can contain non-HTML whitespace characters\n\t\t\t// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n\t\t\tattrNames = value && value.match( rnothtmlwhite );\n\n\t\tif ( attrNames && elem.nodeType === 1 ) {\n\t\t\twhile ( ( name = attrNames[ i++ ] ) ) {\n\t\t\t\telem.removeAttribute( name );\n\t\t\t}\n\t\t}\n\t}\n} );\n\n// Hooks for boolean attributes\nboolHook = {\n\tset: function( elem, value, name ) {\n\t\tif ( value === false ) {\n\n\t\t\t// Remove boolean attributes when set to false\n\t\t\tjQuery.removeAttr( elem, name );\n\t\t} else {\n\t\t\telem.setAttribute( name, name );\n\t\t}\n\t\treturn name;\n\t}\n};\n\njQuery.each( jQuery.expr.match.bool.source.match( /\\w+/g ), function( i, name ) {\n\tvar getter = attrHandle[ name ] || jQuery.find.attr;\n\n\tattrHandle[ name ] = function( elem, name, isXML ) {\n\t\tvar ret, handle,\n\t\t\tlowercaseName = name.toLowerCase();\n\n\t\tif ( !isXML ) {\n\n\t\t\t// Avoid an infinite loop by temporarily removing this function from the getter\n\t\t\thandle = attrHandle[ lowercaseName ];\n\t\t\tattrHandle[ lowercaseName ] = ret;\n\t\t\tret = getter( elem, name, isXML ) != null ?\n\t\t\t\tlowercaseName :\n\t\t\t\tnull;\n\t\t\tattrHandle[ lowercaseName ] = handle;\n\t\t}\n\t\treturn ret;\n\t};\n} );\n\n\n\n\nvar rfocusable = /^(?:input|select|textarea|button)$/i,\n\trclickable = /^(?:a|area)$/i;\n\njQuery.fn.extend( {\n\tprop: function( name, value ) {\n\t\treturn access( this, jQuery.prop, name, value, arguments.length > 1 );\n\t},\n\n\tremoveProp: function( name ) {\n\t\treturn this.each( function() {\n\t\t\tdelete this[ jQuery.propFix[ name ] || name ];\n\t\t} );\n\t}\n} );\n\njQuery.extend( {\n\tprop: function( elem, name, value ) {\n\t\tvar ret, hooks,\n\t\t\tnType = elem.nodeType;\n\n\t\t// Don't get/set properties on text, comment and attribute nodes\n\t\tif ( nType === 3 || nType === 8 || nType === 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {\n\n\t\t\t// Fix name and attach hooks\n\t\t\tname = jQuery.propFix[ name ] || name;\n\t\t\thooks = jQuery.propHooks[ name ];\n\t\t}\n\n\t\tif ( value !== undefined ) {\n\t\t\tif ( hooks && \"set\" in hooks &&\n\t\t\t\t( ret = hooks.set( elem, value, name ) ) !== undefined ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\treturn ( elem[ name ] = value );\n\t\t}\n\n\t\tif ( hooks && \"get\" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {\n\t\t\treturn ret;\n\t\t}\n\n\t\treturn elem[ name ];\n\t},\n\n\tpropHooks: {\n\t\ttabIndex: {\n\t\t\tget: function( elem ) {\n\n\t\t\t\t// Support: IE <=9 - 11 only\n\t\t\t\t// elem.tabIndex doesn't always return the\n\t\t\t\t// correct value when it hasn't been explicitly set\n\t\t\t\t// https://web.archive.org/web/20141116233347/http://fluidproject.org/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/\n\t\t\t\t// Use proper attribute retrieval(#12072)\n\t\t\t\tvar tabindex = jQuery.find.attr( elem, \"tabindex\" );\n\n\t\t\t\tif ( tabindex ) {\n\t\t\t\t\treturn parseInt( tabindex, 10 );\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\trfocusable.test( elem.nodeName ) ||\n\t\t\t\t\trclickable.test( elem.nodeName ) &&\n\t\t\t\t\telem.href\n\t\t\t\t) {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}\n\t},\n\n\tpropFix: {\n\t\t\"for\": \"htmlFor\",\n\t\t\"class\": \"className\"\n\t}\n} );\n\n// Support: IE <=11 only\n// Accessing the selectedIndex property\n// forces the browser to respect setting selected\n// on the option\n// The getter ensures a default option is selected\n// when in an optgroup\n// eslint rule \"no-unused-expressions\" is disabled for this code\n// since it considers such accessions noop\nif ( !support.optSelected ) {\n\tjQuery.propHooks.selected = {\n\t\tget: function( elem ) {\n\n\t\t\t/* eslint no-unused-expressions: \"off\" */\n\n\t\t\tvar parent = elem.parentNode;\n\t\t\tif ( parent && parent.parentNode ) {\n\t\t\t\tparent.parentNode.selectedIndex;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tset: function( elem ) {\n\n\t\t\t/* eslint no-unused-expressions: \"off\" */\n\n\t\t\tvar parent = elem.parentNode;\n\t\t\tif ( parent ) {\n\t\t\t\tparent.selectedIndex;\n\n\t\t\t\tif ( parent.parentNode ) {\n\t\t\t\t\tparent.parentNode.selectedIndex;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\njQuery.each( [\n\t\"tabIndex\",\n\t\"readOnly\",\n\t\"maxLength\",\n\t\"cellSpacing\",\n\t\"cellPadding\",\n\t\"rowSpan\",\n\t\"colSpan\",\n\t\"useMap\",\n\t\"frameBorder\",\n\t\"contentEditable\"\n], function() {\n\tjQuery.propFix[ this.toLowerCase() ] = this;\n} );\n\n\n\n\n\t// Strip and collapse whitespace according to HTML spec\n\t// https://html.spec.whatwg.org/multipage/infrastructure.html#strip-and-collapse-whitespace\n\tfunction stripAndCollapse( value ) {\n\t\tvar tokens = value.match( rnothtmlwhite ) || [];\n\t\treturn tokens.join( \" \" );\n\t}\n\n\nfunction getClass( elem ) {\n\treturn elem.getAttribute && elem.getAttribute( \"class\" ) || \"\";\n}\n\njQuery.fn.extend( {\n\taddClass: function( value ) {\n\t\tvar classes, elem, cur, curValue, clazz, j, finalValue,\n\t\t\ti = 0;\n\n\t\tif ( jQuery.isFunction( value ) ) {\n\t\t\treturn this.each( function( j ) {\n\t\t\t\tjQuery( this ).addClass( value.call( this, j, getClass( this ) ) );\n\t\t\t} );\n\t\t}\n\n\t\tif ( typeof value === \"string\" && value ) {\n\t\t\tclasses = value.match( rnothtmlwhite ) || [];\n\n\t\t\twhile ( ( elem = this[ i++ ] ) ) {\n\t\t\t\tcurValue = getClass( elem );\n\t\t\t\tcur = elem.nodeType === 1 && ( \" \" + stripAndCollapse( curValue ) + \" \" );\n\n\t\t\t\tif ( cur ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\twhile ( ( clazz = classes[ j++ ] ) ) {\n\t\t\t\t\t\tif ( cur.indexOf( \" \" + clazz + \" \" ) < 0 ) {\n\t\t\t\t\t\t\tcur += clazz + \" \";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Only assign if different to avoid unneeded rendering.\n\t\t\t\t\tfinalValue = stripAndCollapse( cur );\n\t\t\t\t\tif ( curValue !== finalValue ) {\n\t\t\t\t\t\telem.setAttribute( \"class\", finalValue );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tremoveClass: function( value ) {\n\t\tvar classes, elem, cur, curValue, clazz, j, finalValue,\n\t\t\ti = 0;\n\n\t\tif ( jQuery.isFunction( value ) ) {\n\t\t\treturn this.each( function( j ) {\n\t\t\t\tjQuery( this ).removeClass( value.call( this, j, getClass( this ) ) );\n\t\t\t} );\n\t\t}\n\n\t\tif ( !arguments.length ) {\n\t\t\treturn this.attr( \"class\", \"\" );\n\t\t}\n\n\t\tif ( typeof value === \"string\" && value ) {\n\t\t\tclasses = value.match( rnothtmlwhite ) || [];\n\n\t\t\twhile ( ( elem = this[ i++ ] ) ) {\n\t\t\t\tcurValue = getClass( elem );\n\n\t\t\t\t// This expression is here for better compressibility (see addClass)\n\t\t\t\tcur = elem.nodeType === 1 && ( \" \" + stripAndCollapse( curValue ) + \" \" );\n\n\t\t\t\tif ( cur ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\twhile ( ( clazz = classes[ j++ ] ) ) {\n\n\t\t\t\t\t\t// Remove *all* instances\n\t\t\t\t\t\twhile ( cur.indexOf( \" \" + clazz + \" \" ) > -1 ) {\n\t\t\t\t\t\t\tcur = cur.replace( \" \" + clazz + \" \", \" \" );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Only assign if different to avoid unneeded rendering.\n\t\t\t\t\tfinalValue = stripAndCollapse( cur );\n\t\t\t\t\tif ( curValue !== finalValue ) {\n\t\t\t\t\t\telem.setAttribute( \"class\", finalValue );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\ttoggleClass: function( value, stateVal ) {\n\t\tvar type = typeof value;\n\n\t\tif ( typeof stateVal === \"boolean\" && type === \"string\" ) {\n\t\t\treturn stateVal ? this.addClass( value ) : this.removeClass( value );\n\t\t}\n\n\t\tif ( jQuery.isFunction( value ) ) {\n\t\t\treturn this.each( function( i ) {\n\t\t\t\tjQuery( this ).toggleClass(\n\t\t\t\t\tvalue.call( this, i, getClass( this ), stateVal ),\n\t\t\t\t\tstateVal\n\t\t\t\t);\n\t\t\t} );\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tvar className, i, self, classNames;\n\n\t\t\tif ( type === \"string\" ) {\n\n\t\t\t\t// Toggle individual class names\n\t\t\t\ti = 0;\n\t\t\t\tself = jQuery( this );\n\t\t\t\tclassNames = value.match( rnothtmlwhite ) || [];\n\n\t\t\t\twhile ( ( className = classNames[ i++ ] ) ) {\n\n\t\t\t\t\t// Check each className given, space separated list\n\t\t\t\t\tif ( self.hasClass( className ) ) {\n\t\t\t\t\t\tself.removeClass( className );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.addClass( className );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t// Toggle whole class name\n\t\t\t} else if ( value === undefined || type === \"boolean\" ) {\n\t\t\t\tclassName = getClass( this );\n\t\t\t\tif ( className ) {\n\n\t\t\t\t\t// Store className if set\n\t\t\t\t\tdataPriv.set( this, \"__className__\", className );\n\t\t\t\t}\n\n\t\t\t\t// If the element has a class name or if we're passed `false`,\n\t\t\t\t// then remove the whole classname (if there was one, the above saved it).\n\t\t\t\t// Otherwise bring back whatever was previously saved (if anything),\n\t\t\t\t// falling back to the empty string if nothing was stored.\n\t\t\t\tif ( this.setAttribute ) {\n\t\t\t\t\tthis.setAttribute( \"class\",\n\t\t\t\t\t\tclassName || value === false ?\n\t\t\t\t\t\t\"\" :\n\t\t\t\t\t\tdataPriv.get( this, \"__className__\" ) || \"\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t},\n\n\thasClass: function( selector ) {\n\t\tvar className, elem,\n\t\t\ti = 0;\n\n\t\tclassName = \" \" + selector + \" \";\n\t\twhile ( ( elem = this[ i++ ] ) ) {\n\t\t\tif ( elem.nodeType === 1 &&\n\t\t\t\t( \" \" + stripAndCollapse( getClass( elem ) ) + \" \" ).indexOf( className ) > -1 ) {\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n} );\n\n\n\n\nvar rreturn = /\\r/g;\n\njQuery.fn.extend( {\n\tval: function( value ) {\n\t\tvar hooks, ret, isFunction,\n\t\t\telem = this[ 0 ];\n\n\t\tif ( !arguments.length ) {\n\t\t\tif ( elem ) {\n\t\t\t\thooks = jQuery.valHooks[ elem.type ] ||\n\t\t\t\t\tjQuery.valHooks[ elem.nodeName.toLowerCase() ];\n\n\t\t\t\tif ( hooks &&\n\t\t\t\t\t\"get\" in hooks &&\n\t\t\t\t\t( ret = hooks.get( elem, \"value\" ) ) !== undefined\n\t\t\t\t) {\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\n\t\t\t\tret = elem.value;\n\n\t\t\t\t// Handle most common string cases\n\t\t\t\tif ( typeof ret === \"string\" ) {\n\t\t\t\t\treturn ret.replace( rreturn, \"\" );\n\t\t\t\t}\n\n\t\t\t\t// Handle cases where value is null/undef or number\n\t\t\t\treturn ret == null ? \"\" : ret;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tisFunction = jQuery.isFunction( value );\n\n\t\treturn this.each( function( i ) {\n\t\t\tvar val;\n\n\t\t\tif ( this.nodeType !== 1 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( isFunction ) {\n\t\t\t\tval = value.call( this, i, jQuery( this ).val() );\n\t\t\t} else {\n\t\t\t\tval = value;\n\t\t\t}\n\n\t\t\t// Treat null/undefined as \"\"; convert numbers to string\n\t\t\tif ( val == null ) {\n\t\t\t\tval = \"\";\n\n\t\t\t} else if ( typeof val === \"number\" ) {\n\t\t\t\tval += \"\";\n\n\t\t\t} else if ( jQuery.isArray( val ) ) {\n\t\t\t\tval = jQuery.map( val, function( value ) {\n\t\t\t\t\treturn value == null ? \"\" : value + \"\";\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\thooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];\n\n\t\t\t// If set returns undefined, fall back to normal setting\n\t\t\tif ( !hooks || !( \"set\" in hooks ) || hooks.set( this, val, \"value\" ) === undefined ) {\n\t\t\t\tthis.value = val;\n\t\t\t}\n\t\t} );\n\t}\n} );\n\njQuery.extend( {\n\tvalHooks: {\n\t\toption: {\n\t\t\tget: function( elem ) {\n\n\t\t\t\tvar val = jQuery.find.attr( elem, \"value\" );\n\t\t\t\treturn val != null ?\n\t\t\t\t\tval :\n\n\t\t\t\t\t// Support: IE <=10 - 11 only\n\t\t\t\t\t// option.text throws exceptions (#14686, #14858)\n\t\t\t\t\t// Strip and collapse whitespace\n\t\t\t\t\t// https://html.spec.whatwg.org/#strip-and-collapse-whitespace\n\t\t\t\t\tstripAndCollapse( jQuery.text( elem ) );\n\t\t\t}\n\t\t},\n\t\tselect: {\n\t\t\tget: function( elem ) {\n\t\t\t\tvar value, option, i,\n\t\t\t\t\toptions = elem.options,\n\t\t\t\t\tindex = elem.selectedIndex,\n\t\t\t\t\tone = elem.type === \"select-one\",\n\t\t\t\t\tvalues = one ? null : [],\n\t\t\t\t\tmax = one ? index + 1 : options.length;\n\n\t\t\t\tif ( index < 0 ) {\n\t\t\t\t\ti = max;\n\n\t\t\t\t} else {\n\t\t\t\t\ti = one ? index : 0;\n\t\t\t\t}\n\n\t\t\t\t// Loop through all the selected options\n\t\t\t\tfor ( ; i < max; i++ ) {\n\t\t\t\t\toption = options[ i ];\n\n\t\t\t\t\t// Support: IE <=9 only\n\t\t\t\t\t// IE8-9 doesn't update selected after form reset (#2551)\n\t\t\t\t\tif ( ( option.selected || i === index ) &&\n\n\t\t\t\t\t\t\t// Don't return options that are disabled or in a disabled optgroup\n\t\t\t\t\t\t\t!option.disabled &&\n\t\t\t\t\t\t\t( !option.parentNode.disabled ||\n\t\t\t\t\t\t\t\t!jQuery.nodeName( option.parentNode, \"optgroup\" ) ) ) {\n\n\t\t\t\t\t\t// Get the specific value for the option\n\t\t\t\t\t\tvalue = jQuery( option ).val();\n\n\t\t\t\t\t\t// We don't need an array for one selects\n\t\t\t\t\t\tif ( one ) {\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Multi-Selects return an array\n\t\t\t\t\t\tvalues.push( value );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn values;\n\t\t\t},\n\n\t\t\tset: function( elem, value ) {\n\t\t\t\tvar optionSet, option,\n\t\t\t\t\toptions = elem.options,\n\t\t\t\t\tvalues = jQuery.makeArray( value ),\n\t\t\t\t\ti = options.length;\n\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\toption = options[ i ];\n\n\t\t\t\t\t/* eslint-disable no-cond-assign */\n\n\t\t\t\t\tif ( option.selected =\n\t\t\t\t\t\tjQuery.inArray( jQuery.valHooks.option.get( option ), values ) > -1\n\t\t\t\t\t) {\n\t\t\t\t\t\toptionSet = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t/* eslint-enable no-cond-assign */\n\t\t\t\t}\n\n\t\t\t\t// Force browsers to behave consistently when non-matching value is set\n\t\t\t\tif ( !optionSet ) {\n\t\t\t\t\telem.selectedIndex = -1;\n\t\t\t\t}\n\t\t\t\treturn values;\n\t\t\t}\n\t\t}\n\t}\n} );\n\n// Radios and checkboxes getter/setter\njQuery.each( [ \"radio\", \"checkbox\" ], function() {\n\tjQuery.valHooks[ this ] = {\n\t\tset: function( elem, value ) {\n\t\t\tif ( jQuery.isArray( value ) ) {\n\t\t\t\treturn ( elem.checked = jQuery.inArray( jQuery( elem ).val(), value ) > -1 );\n\t\t\t}\n\t\t}\n\t};\n\tif ( !support.checkOn ) {\n\t\tjQuery.valHooks[ this ].get = function( elem ) {\n\t\t\treturn elem.getAttribute( \"value\" ) === null ? \"on\" : elem.value;\n\t\t};\n\t}\n} );\n\n\n\n\n// Return jQuery for attributes-only inclusion\n\n\nvar rfocusMorph = /^(?:focusinfocus|focusoutblur)$/;\n\njQuery.extend( jQuery.event, {\n\n\ttrigger: function( event, data, elem, onlyHandlers ) {\n\n\t\tvar i, cur, tmp, bubbleType, ontype, handle, special,\n\t\t\teventPath = [ elem || document ],\n\t\t\ttype = hasOwn.call( event, \"type\" ) ? event.type : event,\n\t\t\tnamespaces = hasOwn.call( event, \"namespace\" ) ? event.namespace.split( \".\" ) : [];\n\n\t\tcur = tmp = elem = elem || document;\n\n\t\t// Don't do events on text and comment nodes\n\t\tif ( elem.nodeType === 3 || elem.nodeType === 8 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// focus/blur morphs to focusin/out; ensure we're not firing them right now\n\t\tif ( rfocusMorph.test( type + jQuery.event.triggered ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( type.indexOf( \".\" ) > -1 ) {\n\n\t\t\t// Namespaced trigger; create a regexp to match event type in handle()\n\t\t\tnamespaces = type.split( \".\" );\n\t\t\ttype = namespaces.shift();\n\t\t\tnamespaces.sort();\n\t\t}\n\t\tontype = type.indexOf( \":\" ) < 0 && \"on\" + type;\n\n\t\t// Caller can pass in a jQuery.Event object, Object, or just an event type string\n\t\tevent = event[ jQuery.expando ] ?\n\t\t\tevent :\n\t\t\tnew jQuery.Event( type, typeof event === \"object\" && event );\n\n\t\t// Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)\n\t\tevent.isTrigger = onlyHandlers ? 2 : 3;\n\t\tevent.namespace = namespaces.join( \".\" );\n\t\tevent.rnamespace = event.namespace ?\n\t\t\tnew RegExp( \"(^|\\\\.)\" + namespaces.join( \"\\\\.(?:.*\\\\.|)\" ) + \"(\\\\.|$)\" ) :\n\t\t\tnull;\n\n\t\t// Clean up the event in case it is being reused\n\t\tevent.result = undefined;\n\t\tif ( !event.target ) {\n\t\t\tevent.target = elem;\n\t\t}\n\n\t\t// Clone any incoming data and prepend the event, creating the handler arg list\n\t\tdata = data == null ?\n\t\t\t[ event ] :\n\t\t\tjQuery.makeArray( data, [ event ] );\n\n\t\t// Allow special events to draw outside the lines\n\t\tspecial = jQuery.event.special[ type ] || {};\n\t\tif ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Determine event propagation path in advance, per W3C events spec (#9951)\n\t\t// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)\n\t\tif ( !onlyHandlers && !special.noBubble && !jQuery.isWindow( elem ) ) {\n\n\t\t\tbubbleType = special.delegateType || type;\n\t\t\tif ( !rfocusMorph.test( bubbleType + type ) ) {\n\t\t\t\tcur = cur.parentNode;\n\t\t\t}\n\t\t\tfor ( ; cur; cur = cur.parentNode ) {\n\t\t\t\teventPath.push( cur );\n\t\t\t\ttmp = cur;\n\t\t\t}\n\n\t\t\t// Only add window if we got to document (e.g., not plain obj or detached DOM)\n\t\t\tif ( tmp === ( elem.ownerDocument || document ) ) {\n\t\t\t\teventPath.push( tmp.defaultView || tmp.parentWindow || window );\n\t\t\t}\n\t\t}\n\n\t\t// Fire handlers on the event path\n\t\ti = 0;\n\t\twhile ( ( cur = eventPath[ i++ ] ) && !event.isPropagationStopped() ) {\n\n\t\t\tevent.type = i > 1 ?\n\t\t\t\tbubbleType :\n\t\t\t\tspecial.bindType || type;\n\n\t\t\t// jQuery handler\n\t\t\thandle = ( dataPriv.get( cur, \"events\" ) || {} )[ event.type ] &&\n\t\t\t\tdataPriv.get( cur, \"handle\" );\n\t\t\tif ( handle ) {\n\t\t\t\thandle.apply( cur, data );\n\t\t\t}\n\n\t\t\t// Native handler\n\t\t\thandle = ontype && cur[ ontype ];\n\t\t\tif ( handle && handle.apply && acceptData( cur ) ) {\n\t\t\t\tevent.result = handle.apply( cur, data );\n\t\t\t\tif ( event.result === false ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tevent.type = type;\n\n\t\t// If nobody prevented the default action, do it now\n\t\tif ( !onlyHandlers && !event.isDefaultPrevented() ) {\n\n\t\t\tif ( ( !special._default ||\n\t\t\t\tspecial._default.apply( eventPath.pop(), data ) === false ) &&\n\t\t\t\tacceptData( elem ) ) {\n\n\t\t\t\t// Call a native DOM method on the target with the same name as the event.\n\t\t\t\t// Don't do default actions on window, that's where global variables be (#6170)\n\t\t\t\tif ( ontype && jQuery.isFunction( elem[ type ] ) && !jQuery.isWindow( elem ) ) {\n\n\t\t\t\t\t// Don't re-trigger an onFOO event when we call its FOO() method\n\t\t\t\t\ttmp = elem[ ontype ];\n\n\t\t\t\t\tif ( tmp ) {\n\t\t\t\t\t\telem[ ontype ] = null;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Prevent re-triggering of the same event, since we already bubbled it above\n\t\t\t\t\tjQuery.event.triggered = type;\n\t\t\t\t\telem[ type ]();\n\t\t\t\t\tjQuery.event.triggered = undefined;\n\n\t\t\t\t\tif ( tmp ) {\n\t\t\t\t\t\telem[ ontype ] = tmp;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn event.result;\n\t},\n\n\t// Piggyback on a donor event to simulate a different one\n\t// Used only for `focus(in | out)` events\n\tsimulate: function( type, elem, event ) {\n\t\tvar e = jQuery.extend(\n\t\t\tnew jQuery.Event(),\n\t\t\tevent,\n\t\t\t{\n\t\t\t\ttype: type,\n\t\t\t\tisSimulated: true\n\t\t\t}\n\t\t);\n\n\t\tjQuery.event.trigger( e, null, elem );\n\t}\n\n} );\n\njQuery.fn.extend( {\n\n\ttrigger: function( type, data ) {\n\t\treturn this.each( function() {\n\t\t\tjQuery.event.trigger( type, data, this );\n\t\t} );\n\t},\n\ttriggerHandler: function( type, data ) {\n\t\tvar elem = this[ 0 ];\n\t\tif ( elem ) {\n\t\t\treturn jQuery.event.trigger( type, data, elem, true );\n\t\t}\n\t}\n} );\n\n\njQuery.each( ( \"blur focus focusin focusout resize scroll click dblclick \" +\n\t\"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave \" +\n\t\"change select submit keydown keypress keyup contextmenu\" ).split( \" \" ),\n\tfunction( i, name ) {\n\n\t// Handle event binding\n\tjQuery.fn[ name ] = function( data, fn ) {\n\t\treturn arguments.length > 0 ?\n\t\t\tthis.on( name, null, data, fn ) :\n\t\t\tthis.trigger( name );\n\t};\n} );\n\njQuery.fn.extend( {\n\thover: function( fnOver, fnOut ) {\n\t\treturn this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );\n\t}\n} );\n\n\n\n\nsupport.focusin = \"onfocusin\" in window;\n\n\n// Support: Firefox <=44\n// Firefox doesn't have focus(in | out) events\n// Related ticket - https://bugzilla.mozilla.org/show_bug.cgi?id=687787\n//\n// Support: Chrome <=48 - 49, Safari <=9.0 - 9.1\n// focus(in | out) events fire after focus & blur events,\n// which is spec violation - http://www.w3.org/TR/DOM-Level-3-Events/#events-focusevent-event-order\n// Related ticket - https://bugs.chromium.org/p/chromium/issues/detail?id=449857\nif ( !support.focusin ) {\n\tjQuery.each( { focus: \"focusin\", blur: \"focusout\" }, function( orig, fix ) {\n\n\t\t// Attach a single capturing handler on the document while someone wants focusin/focusout\n\t\tvar handler = function( event ) {\n\t\t\tjQuery.event.simulate( fix, event.target, jQuery.event.fix( event ) );\n\t\t};\n\n\t\tjQuery.event.special[ fix ] = {\n\t\t\tsetup: function() {\n\t\t\t\tvar doc = this.ownerDocument || this,\n\t\t\t\t\tattaches = dataPriv.access( doc, fix );\n\n\t\t\t\tif ( !attaches ) {\n\t\t\t\t\tdoc.addEventListener( orig, handler, true );\n\t\t\t\t}\n\t\t\t\tdataPriv.access( doc, fix, ( attaches || 0 ) + 1 );\n\t\t\t},\n\t\t\tteardown: function() {\n\t\t\t\tvar doc = this.ownerDocument || this,\n\t\t\t\t\tattaches = dataPriv.access( doc, fix ) - 1;\n\n\t\t\t\tif ( !attaches ) {\n\t\t\t\t\tdoc.removeEventListener( orig, handler, true );\n\t\t\t\t\tdataPriv.remove( doc, fix );\n\n\t\t\t\t} else {\n\t\t\t\t\tdataPriv.access( doc, fix, attaches );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t} );\n}\nvar location = window.location;\n\nvar nonce = jQuery.now();\n\nvar rquery = ( /\\?/ );\n\n\n\n// Cross-browser xml parsing\njQuery.parseXML = function( data ) {\n\tvar xml;\n\tif ( !data || typeof data !== \"string\" ) {\n\t\treturn null;\n\t}\n\n\t// Support: IE 9 - 11 only\n\t// IE throws on parseFromString with invalid input.\n\ttry {\n\t\txml = ( new window.DOMParser() ).parseFromString( data, \"text/xml\" );\n\t} catch ( e ) {\n\t\txml = undefined;\n\t}\n\n\tif ( !xml || xml.getElementsByTagName( \"parsererror\" ).length ) {\n\t\tjQuery.error( \"Invalid XML: \" + data );\n\t}\n\treturn xml;\n};\n\n\nvar\n\trbracket = /\\[\\]$/,\n\trCRLF = /\\r?\\n/g,\n\trsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,\n\trsubmittable = /^(?:input|select|textarea|keygen)/i;\n\nfunction buildParams( prefix, obj, traditional, add ) {\n\tvar name;\n\n\tif ( jQuery.isArray( obj ) ) {\n\n\t\t// Serialize array item.\n\t\tjQuery.each( obj, function( i, v ) {\n\t\t\tif ( traditional || rbracket.test( prefix ) ) {\n\n\t\t\t\t// Treat each array item as a scalar.\n\t\t\t\tadd( prefix, v );\n\n\t\t\t} else {\n\n\t\t\t\t// Item is non-scalar (array or object), encode its numeric index.\n\t\t\t\tbuildParams(\n\t\t\t\t\tprefix + \"[\" + ( typeof v === \"object\" && v != null ? i : \"\" ) + \"]\",\n\t\t\t\t\tv,\n\t\t\t\t\ttraditional,\n\t\t\t\t\tadd\n\t\t\t\t);\n\t\t\t}\n\t\t} );\n\n\t} else if ( !traditional && jQuery.type( obj ) === \"object\" ) {\n\n\t\t// Serialize object item.\n\t\tfor ( name in obj ) {\n\t\t\tbuildParams( prefix + \"[\" + name + \"]\", obj[ name ], traditional, add );\n\t\t}\n\n\t} else {\n\n\t\t// Serialize scalar item.\n\t\tadd( prefix, obj );\n\t}\n}\n\n// Serialize an array of form elements or a set of\n// key/values into a query string\njQuery.param = function( a, traditional ) {\n\tvar prefix,\n\t\ts = [],\n\t\tadd = function( key, valueOrFunction ) {\n\n\t\t\t// If value is a function, invoke it and use its return value\n\t\t\tvar value = jQuery.isFunction( valueOrFunction ) ?\n\t\t\t\tvalueOrFunction() :\n\t\t\t\tvalueOrFunction;\n\n\t\t\ts[ s.length ] = encodeURIComponent( key ) + \"=\" +\n\t\t\t\tencodeURIComponent( value == null ? \"\" : value );\n\t\t};\n\n\t// If an array was passed in, assume that it is an array of form elements.\n\tif ( jQuery.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {\n\n\t\t// Serialize the form elements\n\t\tjQuery.each( a, function() {\n\t\t\tadd( this.name, this.value );\n\t\t} );\n\n\t} else {\n\n\t\t// If traditional, encode the \"old\" way (the way 1.3.2 or older\n\t\t// did it), otherwise encode params recursively.\n\t\tfor ( prefix in a ) {\n\t\t\tbuildParams( prefix, a[ prefix ], traditional, add );\n\t\t}\n\t}\n\n\t// Return the resulting serialization\n\treturn s.join( \"&\" );\n};\n\njQuery.fn.extend( {\n\tserialize: function() {\n\t\treturn jQuery.param( this.serializeArray() );\n\t},\n\tserializeArray: function() {\n\t\treturn this.map( function() {\n\n\t\t\t// Can add propHook for \"elements\" to filter or add form elements\n\t\t\tvar elements = jQuery.prop( this, \"elements\" );\n\t\t\treturn elements ? jQuery.makeArray( elements ) : this;\n\t\t} )\n\t\t.filter( function() {\n\t\t\tvar type = this.type;\n\n\t\t\t// Use .is( \":disabled\" ) so that fieldset[disabled] works\n\t\t\treturn this.name && !jQuery( this ).is( \":disabled\" ) &&\n\t\t\t\trsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&\n\t\t\t\t( this.checked || !rcheckableType.test( type ) );\n\t\t} )\n\t\t.map( function( i, elem ) {\n\t\t\tvar val = jQuery( this ).val();\n\n\t\t\tif ( val == null ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif ( jQuery.isArray( val ) ) {\n\t\t\t\treturn jQuery.map( val, function( val ) {\n\t\t\t\t\treturn { name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\treturn { name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n\t\t} ).get();\n\t}\n} );\n\n\nvar\n\tr20 = /%20/g,\n\trhash = /#.*$/,\n\trantiCache = /([?&])_=[^&]*/,\n\trheaders = /^(.*?):[ \\t]*([^\\r\\n]*)$/mg,\n\n\t// #7653, #8125, #8152: local protocol detection\n\trlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,\n\trnoContent = /^(?:GET|HEAD)$/,\n\trprotocol = /^\\/\\//,\n\n\t/* Prefilters\n\t * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)\n\t * 2) These are called:\n\t *    - BEFORE asking for a transport\n\t *    - AFTER param serialization (s.data is a string if s.processData is true)\n\t * 3) key is the dataType\n\t * 4) the catchall symbol \"*\" can be used\n\t * 5) execution will start with transport dataType and THEN continue down to \"*\" if needed\n\t */\n\tprefilters = {},\n\n\t/* Transports bindings\n\t * 1) key is the dataType\n\t * 2) the catchall symbol \"*\" can be used\n\t * 3) selection will start with transport dataType and THEN go to \"*\" if needed\n\t */\n\ttransports = {},\n\n\t// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression\n\tallTypes = \"*/\".concat( \"*\" ),\n\n\t// Anchor tag for parsing the document origin\n\toriginAnchor = document.createElement( \"a\" );\n\toriginAnchor.href = location.href;\n\n// Base \"constructor\" for jQuery.ajaxPrefilter and jQuery.ajaxTransport\nfunction addToPrefiltersOrTransports( structure ) {\n\n\t// dataTypeExpression is optional and defaults to \"*\"\n\treturn function( dataTypeExpression, func ) {\n\n\t\tif ( typeof dataTypeExpression !== \"string\" ) {\n\t\t\tfunc = dataTypeExpression;\n\t\t\tdataTypeExpression = \"*\";\n\t\t}\n\n\t\tvar dataType,\n\t\t\ti = 0,\n\t\t\tdataTypes = dataTypeExpression.toLowerCase().match( rnothtmlwhite ) || [];\n\n\t\tif ( jQuery.isFunction( func ) ) {\n\n\t\t\t// For each dataType in the dataTypeExpression\n\t\t\twhile ( ( dataType = dataTypes[ i++ ] ) ) {\n\n\t\t\t\t// Prepend if requested\n\t\t\t\tif ( dataType[ 0 ] === \"+\" ) {\n\t\t\t\t\tdataType = dataType.slice( 1 ) || \"*\";\n\t\t\t\t\t( structure[ dataType ] = structure[ dataType ] || [] ).unshift( func );\n\n\t\t\t\t// Otherwise append\n\t\t\t\t} else {\n\t\t\t\t\t( structure[ dataType ] = structure[ dataType ] || [] ).push( func );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\n// Base inspection function for prefilters and transports\nfunction inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {\n\n\tvar inspected = {},\n\t\tseekingTransport = ( structure === transports );\n\n\tfunction inspect( dataType ) {\n\t\tvar selected;\n\t\tinspected[ dataType ] = true;\n\t\tjQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {\n\t\t\tvar dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );\n\t\t\tif ( typeof dataTypeOrTransport === \"string\" &&\n\t\t\t\t!seekingTransport && !inspected[ dataTypeOrTransport ] ) {\n\n\t\t\t\toptions.dataTypes.unshift( dataTypeOrTransport );\n\t\t\t\tinspect( dataTypeOrTransport );\n\t\t\t\treturn false;\n\t\t\t} else if ( seekingTransport ) {\n\t\t\t\treturn !( selected = dataTypeOrTransport );\n\t\t\t}\n\t\t} );\n\t\treturn selected;\n\t}\n\n\treturn inspect( options.dataTypes[ 0 ] ) || !inspected[ \"*\" ] && inspect( \"*\" );\n}\n\n// A special extend for ajax options\n// that takes \"flat\" options (not to be deep extended)\n// Fixes #9887\nfunction ajaxExtend( target, src ) {\n\tvar key, deep,\n\t\tflatOptions = jQuery.ajaxSettings.flatOptions || {};\n\n\tfor ( key in src ) {\n\t\tif ( src[ key ] !== undefined ) {\n\t\t\t( flatOptions[ key ] ? target : ( deep || ( deep = {} ) ) )[ key ] = src[ key ];\n\t\t}\n\t}\n\tif ( deep ) {\n\t\tjQuery.extend( true, target, deep );\n\t}\n\n\treturn target;\n}\n\n/* Handles responses to an ajax request:\n * - finds the right dataType (mediates between content-type and expected dataType)\n * - returns the corresponding response\n */\nfunction ajaxHandleResponses( s, jqXHR, responses ) {\n\n\tvar ct, type, finalDataType, firstDataType,\n\t\tcontents = s.contents,\n\t\tdataTypes = s.dataTypes;\n\n\t// Remove auto dataType and get content-type in the process\n\twhile ( dataTypes[ 0 ] === \"*\" ) {\n\t\tdataTypes.shift();\n\t\tif ( ct === undefined ) {\n\t\t\tct = s.mimeType || jqXHR.getResponseHeader( \"Content-Type\" );\n\t\t}\n\t}\n\n\t// Check if we're dealing with a known content-type\n\tif ( ct ) {\n\t\tfor ( type in contents ) {\n\t\t\tif ( contents[ type ] && contents[ type ].test( ct ) ) {\n\t\t\t\tdataTypes.unshift( type );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Check to see if we have a response for the expected dataType\n\tif ( dataTypes[ 0 ] in responses ) {\n\t\tfinalDataType = dataTypes[ 0 ];\n\t} else {\n\n\t\t// Try convertible dataTypes\n\t\tfor ( type in responses ) {\n\t\t\tif ( !dataTypes[ 0 ] || s.converters[ type + \" \" + dataTypes[ 0 ] ] ) {\n\t\t\t\tfinalDataType = type;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( !firstDataType ) {\n\t\t\t\tfirstDataType = type;\n\t\t\t}\n\t\t}\n\n\t\t// Or just use first one\n\t\tfinalDataType = finalDataType || firstDataType;\n\t}\n\n\t// If we found a dataType\n\t// We add the dataType to the list if needed\n\t// and return the corresponding response\n\tif ( finalDataType ) {\n\t\tif ( finalDataType !== dataTypes[ 0 ] ) {\n\t\t\tdataTypes.unshift( finalDataType );\n\t\t}\n\t\treturn responses[ finalDataType ];\n\t}\n}\n\n/* Chain conversions given the request and the original response\n * Also sets the responseXXX fields on the jqXHR instance\n */\nfunction ajaxConvert( s, response, jqXHR, isSuccess ) {\n\tvar conv2, current, conv, tmp, prev,\n\t\tconverters = {},\n\n\t\t// Work with a copy of dataTypes in case we need to modify it for conversion\n\t\tdataTypes = s.dataTypes.slice();\n\n\t// Create converters map with lowercased keys\n\tif ( dataTypes[ 1 ] ) {\n\t\tfor ( conv in s.converters ) {\n\t\t\tconverters[ conv.toLowerCase() ] = s.converters[ conv ];\n\t\t}\n\t}\n\n\tcurrent = dataTypes.shift();\n\n\t// Convert to each sequential dataType\n\twhile ( current ) {\n\n\t\tif ( s.responseFields[ current ] ) {\n\t\t\tjqXHR[ s.responseFields[ current ] ] = response;\n\t\t}\n\n\t\t// Apply the dataFilter if provided\n\t\tif ( !prev && isSuccess && s.dataFilter ) {\n\t\t\tresponse = s.dataFilter( response, s.dataType );\n\t\t}\n\n\t\tprev = current;\n\t\tcurrent = dataTypes.shift();\n\n\t\tif ( current ) {\n\n\t\t\t// There's only work to do if current dataType is non-auto\n\t\t\tif ( current === \"*\" ) {\n\n\t\t\t\tcurrent = prev;\n\n\t\t\t// Convert response if prev dataType is non-auto and differs from current\n\t\t\t} else if ( prev !== \"*\" && prev !== current ) {\n\n\t\t\t\t// Seek a direct converter\n\t\t\t\tconv = converters[ prev + \" \" + current ] || converters[ \"* \" + current ];\n\n\t\t\t\t// If none found, seek a pair\n\t\t\t\tif ( !conv ) {\n\t\t\t\t\tfor ( conv2 in converters ) {\n\n\t\t\t\t\t\t// If conv2 outputs current\n\t\t\t\t\t\ttmp = conv2.split( \" \" );\n\t\t\t\t\t\tif ( tmp[ 1 ] === current ) {\n\n\t\t\t\t\t\t\t// If prev can be converted to accepted input\n\t\t\t\t\t\t\tconv = converters[ prev + \" \" + tmp[ 0 ] ] ||\n\t\t\t\t\t\t\t\tconverters[ \"* \" + tmp[ 0 ] ];\n\t\t\t\t\t\t\tif ( conv ) {\n\n\t\t\t\t\t\t\t\t// Condense equivalence converters\n\t\t\t\t\t\t\t\tif ( conv === true ) {\n\t\t\t\t\t\t\t\t\tconv = converters[ conv2 ];\n\n\t\t\t\t\t\t\t\t// Otherwise, insert the intermediate dataType\n\t\t\t\t\t\t\t\t} else if ( converters[ conv2 ] !== true ) {\n\t\t\t\t\t\t\t\t\tcurrent = tmp[ 0 ];\n\t\t\t\t\t\t\t\t\tdataTypes.unshift( tmp[ 1 ] );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Apply converter (if not an equivalence)\n\t\t\t\tif ( conv !== true ) {\n\n\t\t\t\t\t// Unless errors are allowed to bubble, catch and return them\n\t\t\t\t\tif ( conv && s.throws ) {\n\t\t\t\t\t\tresponse = conv( response );\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tresponse = conv( response );\n\t\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tstate: \"parsererror\",\n\t\t\t\t\t\t\t\terror: conv ? e : \"No conversion from \" + prev + \" to \" + current\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn { state: \"success\", data: response };\n}\n\njQuery.extend( {\n\n\t// Counter for holding the number of active queries\n\tactive: 0,\n\n\t// Last-Modified header cache for next request\n\tlastModified: {},\n\tetag: {},\n\n\tajaxSettings: {\n\t\turl: location.href,\n\t\ttype: \"GET\",\n\t\tisLocal: rlocalProtocol.test( location.protocol ),\n\t\tglobal: true,\n\t\tprocessData: true,\n\t\tasync: true,\n\t\tcontentType: \"application/x-www-form-urlencoded; charset=UTF-8\",\n\n\t\t/*\n\t\ttimeout: 0,\n\t\tdata: null,\n\t\tdataType: null,\n\t\tusername: null,\n\t\tpassword: null,\n\t\tcache: null,\n\t\tthrows: false,\n\t\ttraditional: false,\n\t\theaders: {},\n\t\t*/\n\n\t\taccepts: {\n\t\t\t\"*\": allTypes,\n\t\t\ttext: \"text/plain\",\n\t\t\thtml: \"text/html\",\n\t\t\txml: \"application/xml, text/xml\",\n\t\t\tjson: \"application/json, text/javascript\"\n\t\t},\n\n\t\tcontents: {\n\t\t\txml: /\\bxml\\b/,\n\t\t\thtml: /\\bhtml/,\n\t\t\tjson: /\\bjson\\b/\n\t\t},\n\n\t\tresponseFields: {\n\t\t\txml: \"responseXML\",\n\t\t\ttext: \"responseText\",\n\t\t\tjson: \"responseJSON\"\n\t\t},\n\n\t\t// Data converters\n\t\t// Keys separate source (or catchall \"*\") and destination types with a single space\n\t\tconverters: {\n\n\t\t\t// Convert anything to text\n\t\t\t\"* text\": String,\n\n\t\t\t// Text to html (true = no transformation)\n\t\t\t\"text html\": true,\n\n\t\t\t// Evaluate text as a json expression\n\t\t\t\"text json\": JSON.parse,\n\n\t\t\t// Parse text as xml\n\t\t\t\"text xml\": jQuery.parseXML\n\t\t},\n\n\t\t// For options that shouldn't be deep extended:\n\t\t// you can add your own custom options here if\n\t\t// and when you create one that shouldn't be\n\t\t// deep extended (see ajaxExtend)\n\t\tflatOptions: {\n\t\t\turl: true,\n\t\t\tcontext: true\n\t\t}\n\t},\n\n\t// Creates a full fledged settings object into target\n\t// with both ajaxSettings and settings fields.\n\t// If target is omitted, writes into ajaxSettings.\n\tajaxSetup: function( target, settings ) {\n\t\treturn settings ?\n\n\t\t\t// Building a settings object\n\t\t\tajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :\n\n\t\t\t// Extending ajaxSettings\n\t\t\tajaxExtend( jQuery.ajaxSettings, target );\n\t},\n\n\tajaxPrefilter: addToPrefiltersOrTransports( prefilters ),\n\tajaxTransport: addToPrefiltersOrTransports( transports ),\n\n\t// Main method\n\tajax: function( url, options ) {\n\n\t\t// If url is an object, simulate pre-1.5 signature\n\t\tif ( typeof url === \"object\" ) {\n\t\t\toptions = url;\n\t\t\turl = undefined;\n\t\t}\n\n\t\t// Force options to be an object\n\t\toptions = options || {};\n\n\t\tvar transport,\n\n\t\t\t// URL without anti-cache param\n\t\t\tcacheURL,\n\n\t\t\t// Response headers\n\t\t\tresponseHeadersString,\n\t\t\tresponseHeaders,\n\n\t\t\t// timeout handle\n\t\t\ttimeoutTimer,\n\n\t\t\t// Url cleanup var\n\t\t\turlAnchor,\n\n\t\t\t// Request state (becomes false upon send and true upon completion)\n\t\t\tcompleted,\n\n\t\t\t// To know if global events are to be dispatched\n\t\t\tfireGlobals,\n\n\t\t\t// Loop variable\n\t\t\ti,\n\n\t\t\t// uncached part of the url\n\t\t\tuncached,\n\n\t\t\t// Create the final options object\n\t\t\ts = jQuery.ajaxSetup( {}, options ),\n\n\t\t\t// Callbacks context\n\t\t\tcallbackContext = s.context || s,\n\n\t\t\t// Context for global events is callbackContext if it is a DOM node or jQuery collection\n\t\t\tglobalEventContext = s.context &&\n\t\t\t\t( callbackContext.nodeType || callbackContext.jquery ) ?\n\t\t\t\t\tjQuery( callbackContext ) :\n\t\t\t\t\tjQuery.event,\n\n\t\t\t// Deferreds\n\t\t\tdeferred = jQuery.Deferred(),\n\t\t\tcompleteDeferred = jQuery.Callbacks( \"once memory\" ),\n\n\t\t\t// Status-dependent callbacks\n\t\t\tstatusCode = s.statusCode || {},\n\n\t\t\t// Headers (they are sent all at once)\n\t\t\trequestHeaders = {},\n\t\t\trequestHeadersNames = {},\n\n\t\t\t// Default abort message\n\t\t\tstrAbort = \"canceled\",\n\n\t\t\t// Fake xhr\n\t\t\tjqXHR = {\n\t\t\t\treadyState: 0,\n\n\t\t\t\t// Builds headers hashtable if needed\n\t\t\t\tgetResponseHeader: function( key ) {\n\t\t\t\t\tvar match;\n\t\t\t\t\tif ( completed ) {\n\t\t\t\t\t\tif ( !responseHeaders ) {\n\t\t\t\t\t\t\tresponseHeaders = {};\n\t\t\t\t\t\t\twhile ( ( match = rheaders.exec( responseHeadersString ) ) ) {\n\t\t\t\t\t\t\t\tresponseHeaders[ match[ 1 ].toLowerCase() ] = match[ 2 ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmatch = responseHeaders[ key.toLowerCase() ];\n\t\t\t\t\t}\n\t\t\t\t\treturn match == null ? null : match;\n\t\t\t\t},\n\n\t\t\t\t// Raw string\n\t\t\t\tgetAllResponseHeaders: function() {\n\t\t\t\t\treturn completed ? responseHeadersString : null;\n\t\t\t\t},\n\n\t\t\t\t// Caches the header\n\t\t\t\tsetRequestHeader: function( name, value ) {\n\t\t\t\t\tif ( completed == null ) {\n\t\t\t\t\t\tname = requestHeadersNames[ name.toLowerCase() ] =\n\t\t\t\t\t\t\trequestHeadersNames[ name.toLowerCase() ] || name;\n\t\t\t\t\t\trequestHeaders[ name ] = value;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Overrides response content-type header\n\t\t\t\toverrideMimeType: function( type ) {\n\t\t\t\t\tif ( completed == null ) {\n\t\t\t\t\t\ts.mimeType = type;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Status-dependent callbacks\n\t\t\t\tstatusCode: function( map ) {\n\t\t\t\t\tvar code;\n\t\t\t\t\tif ( map ) {\n\t\t\t\t\t\tif ( completed ) {\n\n\t\t\t\t\t\t\t// Execute the appropriate callbacks\n\t\t\t\t\t\t\tjqXHR.always( map[ jqXHR.status ] );\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// Lazy-add the new callbacks in a way that preserves old ones\n\t\t\t\t\t\t\tfor ( code in map ) {\n\t\t\t\t\t\t\t\tstatusCode[ code ] = [ statusCode[ code ], map[ code ] ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Cancel the request\n\t\t\t\tabort: function( statusText ) {\n\t\t\t\t\tvar finalText = statusText || strAbort;\n\t\t\t\t\tif ( transport ) {\n\t\t\t\t\t\ttransport.abort( finalText );\n\t\t\t\t\t}\n\t\t\t\t\tdone( 0, finalText );\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t};\n\n\t\t// Attach deferreds\n\t\tdeferred.promise( jqXHR );\n\n\t\t// Add protocol if not provided (prefilters might expect it)\n\t\t// Handle falsy url in the settings object (#10093: consistency with old signature)\n\t\t// We also use the url parameter if available\n\t\ts.url = ( ( url || s.url || location.href ) + \"\" )\n\t\t\t.replace( rprotocol, location.protocol + \"//\" );\n\n\t\t// Alias method option to type as per ticket #12004\n\t\ts.type = options.method || options.type || s.method || s.type;\n\n\t\t// Extract dataTypes list\n\t\ts.dataTypes = ( s.dataType || \"*\" ).toLowerCase().match( rnothtmlwhite ) || [ \"\" ];\n\n\t\t// A cross-domain request is in order when the origin doesn't match the current origin.\n\t\tif ( s.crossDomain == null ) {\n\t\t\turlAnchor = document.createElement( \"a\" );\n\n\t\t\t// Support: IE <=8 - 11, Edge 12 - 13\n\t\t\t// IE throws exception on accessing the href property if url is malformed,\n\t\t\t// e.g. http://example.com:80x/\n\t\t\ttry {\n\t\t\t\turlAnchor.href = s.url;\n\n\t\t\t\t// Support: IE <=8 - 11 only\n\t\t\t\t// Anchor's host property isn't correctly set when s.url is relative\n\t\t\t\turlAnchor.href = urlAnchor.href;\n\t\t\t\ts.crossDomain = originAnchor.protocol + \"//\" + originAnchor.host !==\n\t\t\t\t\turlAnchor.protocol + \"//\" + urlAnchor.host;\n\t\t\t} catch ( e ) {\n\n\t\t\t\t// If there is an error parsing the URL, assume it is crossDomain,\n\t\t\t\t// it can be rejected by the transport if it is invalid\n\t\t\t\ts.crossDomain = true;\n\t\t\t}\n\t\t}\n\n\t\t// Convert data if not already a string\n\t\tif ( s.data && s.processData && typeof s.data !== \"string\" ) {\n\t\t\ts.data = jQuery.param( s.data, s.traditional );\n\t\t}\n\n\t\t// Apply prefilters\n\t\tinspectPrefiltersOrTransports( prefilters, s, options, jqXHR );\n\n\t\t// If request was aborted inside a prefilter, stop there\n\t\tif ( completed ) {\n\t\t\treturn jqXHR;\n\t\t}\n\n\t\t// We can fire global events as of now if asked to\n\t\t// Don't fire events if jQuery.event is undefined in an AMD-usage scenario (#15118)\n\t\tfireGlobals = jQuery.event && s.global;\n\n\t\t// Watch for a new set of requests\n\t\tif ( fireGlobals && jQuery.active++ === 0 ) {\n\t\t\tjQuery.event.trigger( \"ajaxStart\" );\n\t\t}\n\n\t\t// Uppercase the type\n\t\ts.type = s.type.toUpperCase();\n\n\t\t// Determine if request has content\n\t\ts.hasContent = !rnoContent.test( s.type );\n\n\t\t// Save the URL in case we're toying with the If-Modified-Since\n\t\t// and/or If-None-Match header later on\n\t\t// Remove hash to simplify url manipulation\n\t\tcacheURL = s.url.replace( rhash, \"\" );\n\n\t\t// More options handling for requests with no content\n\t\tif ( !s.hasContent ) {\n\n\t\t\t// Remember the hash so we can put it back\n\t\t\tuncached = s.url.slice( cacheURL.length );\n\n\t\t\t// If data is available, append data to url\n\t\t\tif ( s.data ) {\n\t\t\t\tcacheURL += ( rquery.test( cacheURL ) ? \"&\" : \"?\" ) + s.data;\n\n\t\t\t\t// #9682: remove data so that it's not used in an eventual retry\n\t\t\t\tdelete s.data;\n\t\t\t}\n\n\t\t\t// Add or update anti-cache param if needed\n\t\t\tif ( s.cache === false ) {\n\t\t\t\tcacheURL = cacheURL.replace( rantiCache, \"$1\" );\n\t\t\t\tuncached = ( rquery.test( cacheURL ) ? \"&\" : \"?\" ) + \"_=\" + ( nonce++ ) + uncached;\n\t\t\t}\n\n\t\t\t// Put hash and anti-cache on the URL that will be requested (gh-1732)\n\t\t\ts.url = cacheURL + uncached;\n\n\t\t// Change '%20' to '+' if this is encoded form body content (gh-2658)\n\t\t} else if ( s.data && s.processData &&\n\t\t\t( s.contentType || \"\" ).indexOf( \"application/x-www-form-urlencoded\" ) === 0 ) {\n\t\t\ts.data = s.data.replace( r20, \"+\" );\n\t\t}\n\n\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\n\t\tif ( s.ifModified ) {\n\t\t\tif ( jQuery.lastModified[ cacheURL ] ) {\n\t\t\t\tjqXHR.setRequestHeader( \"If-Modified-Since\", jQuery.lastModified[ cacheURL ] );\n\t\t\t}\n\t\t\tif ( jQuery.etag[ cacheURL ] ) {\n\t\t\t\tjqXHR.setRequestHeader( \"If-None-Match\", jQuery.etag[ cacheURL ] );\n\t\t\t}\n\t\t}\n\n\t\t// Set the correct header, if data is being sent\n\t\tif ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {\n\t\t\tjqXHR.setRequestHeader( \"Content-Type\", s.contentType );\n\t\t}\n\n\t\t// Set the Accepts header for the server, depending on the dataType\n\t\tjqXHR.setRequestHeader(\n\t\t\t\"Accept\",\n\t\t\ts.dataTypes[ 0 ] && s.accepts[ s.dataTypes[ 0 ] ] ?\n\t\t\t\ts.accepts[ s.dataTypes[ 0 ] ] +\n\t\t\t\t\t( s.dataTypes[ 0 ] !== \"*\" ? \", \" + allTypes + \"; q=0.01\" : \"\" ) :\n\t\t\t\ts.accepts[ \"*\" ]\n\t\t);\n\n\t\t// Check for headers option\n\t\tfor ( i in s.headers ) {\n\t\t\tjqXHR.setRequestHeader( i, s.headers[ i ] );\n\t\t}\n\n\t\t// Allow custom headers/mimetypes and early abort\n\t\tif ( s.beforeSend &&\n\t\t\t( s.beforeSend.call( callbackContext, jqXHR, s ) === false || completed ) ) {\n\n\t\t\t// Abort if not done already and return\n\t\t\treturn jqXHR.abort();\n\t\t}\n\n\t\t// Aborting is no longer a cancellation\n\t\tstrAbort = \"abort\";\n\n\t\t// Install callbacks on deferreds\n\t\tcompleteDeferred.add( s.complete );\n\t\tjqXHR.done( s.success );\n\t\tjqXHR.fail( s.error );\n\n\t\t// Get transport\n\t\ttransport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );\n\n\t\t// If no transport, we auto-abort\n\t\tif ( !transport ) {\n\t\t\tdone( -1, \"No Transport\" );\n\t\t} else {\n\t\t\tjqXHR.readyState = 1;\n\n\t\t\t// Send global event\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( \"ajaxSend\", [ jqXHR, s ] );\n\t\t\t}\n\n\t\t\t// If request was aborted inside ajaxSend, stop there\n\t\t\tif ( completed ) {\n\t\t\t\treturn jqXHR;\n\t\t\t}\n\n\t\t\t// Timeout\n\t\t\tif ( s.async && s.timeout > 0 ) {\n\t\t\t\ttimeoutTimer = window.setTimeout( function() {\n\t\t\t\t\tjqXHR.abort( \"timeout\" );\n\t\t\t\t}, s.timeout );\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tcompleted = false;\n\t\t\t\ttransport.send( requestHeaders, done );\n\t\t\t} catch ( e ) {\n\n\t\t\t\t// Rethrow post-completion exceptions\n\t\t\t\tif ( completed ) {\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\n\t\t\t\t// Propagate others as results\n\t\t\t\tdone( -1, e );\n\t\t\t}\n\t\t}\n\n\t\t// Callback for when everything is done\n\t\tfunction done( status, nativeStatusText, responses, headers ) {\n\t\t\tvar isSuccess, success, error, response, modified,\n\t\t\t\tstatusText = nativeStatusText;\n\n\t\t\t// Ignore repeat invocations\n\t\t\tif ( completed ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcompleted = true;\n\n\t\t\t// Clear timeout if it exists\n\t\t\tif ( timeoutTimer ) {\n\t\t\t\twindow.clearTimeout( timeoutTimer );\n\t\t\t}\n\n\t\t\t// Dereference transport for early garbage collection\n\t\t\t// (no matter how long the jqXHR object will be used)\n\t\t\ttransport = undefined;\n\n\t\t\t// Cache response headers\n\t\t\tresponseHeadersString = headers || \"\";\n\n\t\t\t// Set readyState\n\t\t\tjqXHR.readyState = status > 0 ? 4 : 0;\n\n\t\t\t// Determine if successful\n\t\t\tisSuccess = status >= 200 && status < 300 || status === 304;\n\n\t\t\t// Get response data\n\t\t\tif ( responses ) {\n\t\t\t\tresponse = ajaxHandleResponses( s, jqXHR, responses );\n\t\t\t}\n\n\t\t\t// Convert no matter what (that way responseXXX fields are always set)\n\t\t\tresponse = ajaxConvert( s, response, jqXHR, isSuccess );\n\n\t\t\t// If successful, handle type chaining\n\t\t\tif ( isSuccess ) {\n\n\t\t\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\n\t\t\t\tif ( s.ifModified ) {\n\t\t\t\t\tmodified = jqXHR.getResponseHeader( \"Last-Modified\" );\n\t\t\t\t\tif ( modified ) {\n\t\t\t\t\t\tjQuery.lastModified[ cacheURL ] = modified;\n\t\t\t\t\t}\n\t\t\t\t\tmodified = jqXHR.getResponseHeader( \"etag\" );\n\t\t\t\t\tif ( modified ) {\n\t\t\t\t\t\tjQuery.etag[ cacheURL ] = modified;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// if no content\n\t\t\t\tif ( status === 204 || s.type === \"HEAD\" ) {\n\t\t\t\t\tstatusText = \"nocontent\";\n\n\t\t\t\t// if not modified\n\t\t\t\t} else if ( status === 304 ) {\n\t\t\t\t\tstatusText = \"notmodified\";\n\n\t\t\t\t// If we have data, let's convert it\n\t\t\t\t} else {\n\t\t\t\t\tstatusText = response.state;\n\t\t\t\t\tsuccess = response.data;\n\t\t\t\t\terror = response.error;\n\t\t\t\t\tisSuccess = !error;\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\t// Extract error from statusText and normalize for non-aborts\n\t\t\t\terror = statusText;\n\t\t\t\tif ( status || !statusText ) {\n\t\t\t\t\tstatusText = \"error\";\n\t\t\t\t\tif ( status < 0 ) {\n\t\t\t\t\t\tstatus = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Set data for the fake xhr object\n\t\t\tjqXHR.status = status;\n\t\t\tjqXHR.statusText = ( nativeStatusText || statusText ) + \"\";\n\n\t\t\t// Success/Error\n\t\t\tif ( isSuccess ) {\n\t\t\t\tdeferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );\n\t\t\t} else {\n\t\t\t\tdeferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );\n\t\t\t}\n\n\t\t\t// Status-dependent callbacks\n\t\t\tjqXHR.statusCode( statusCode );\n\t\t\tstatusCode = undefined;\n\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( isSuccess ? \"ajaxSuccess\" : \"ajaxError\",\n\t\t\t\t\t[ jqXHR, s, isSuccess ? success : error ] );\n\t\t\t}\n\n\t\t\t// Complete\n\t\t\tcompleteDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );\n\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( \"ajaxComplete\", [ jqXHR, s ] );\n\n\t\t\t\t// Handle the global AJAX counter\n\t\t\t\tif ( !( --jQuery.active ) ) {\n\t\t\t\t\tjQuery.event.trigger( \"ajaxStop\" );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn jqXHR;\n\t},\n\n\tgetJSON: function( url, data, callback ) {\n\t\treturn jQuery.get( url, data, callback, \"json\" );\n\t},\n\n\tgetScript: function( url, callback ) {\n\t\treturn jQuery.get( url, undefined, callback, \"script\" );\n\t}\n} );\n\njQuery.each( [ \"get\", \"post\" ], function( i, method ) {\n\tjQuery[ method ] = function( url, data, callback, type ) {\n\n\t\t// Shift arguments if data argument was omitted\n\t\tif ( jQuery.isFunction( data ) ) {\n\t\t\ttype = type || callback;\n\t\t\tcallback = data;\n\t\t\tdata = undefined;\n\t\t}\n\n\t\t// The url can be an options object (which then must have .url)\n\t\treturn jQuery.ajax( jQuery.extend( {\n\t\t\turl: url,\n\t\t\ttype: method,\n\t\t\tdataType: type,\n\t\t\tdata: data,\n\t\t\tsuccess: callback\n\t\t}, jQuery.isPlainObject( url ) && url ) );\n\t};\n} );\n\n\njQuery._evalUrl = function( url ) {\n\treturn jQuery.ajax( {\n\t\turl: url,\n\n\t\t// Make this explicit, since user can override this through ajaxSetup (#11264)\n\t\ttype: \"GET\",\n\t\tdataType: \"script\",\n\t\tcache: true,\n\t\tasync: false,\n\t\tglobal: false,\n\t\t\"throws\": true\n\t} );\n};\n\n\njQuery.fn.extend( {\n\twrapAll: function( html ) {\n\t\tvar wrap;\n\n\t\tif ( this[ 0 ] ) {\n\t\t\tif ( jQuery.isFunction( html ) ) {\n\t\t\t\thtml = html.call( this[ 0 ] );\n\t\t\t}\n\n\t\t\t// The elements to wrap the target around\n\t\t\twrap = jQuery( html, this[ 0 ].ownerDocument ).eq( 0 ).clone( true );\n\n\t\t\tif ( this[ 0 ].parentNode ) {\n\t\t\t\twrap.insertBefore( this[ 0 ] );\n\t\t\t}\n\n\t\t\twrap.map( function() {\n\t\t\t\tvar elem = this;\n\n\t\t\t\twhile ( elem.firstElementChild ) {\n\t\t\t\t\telem = elem.firstElementChild;\n\t\t\t\t}\n\n\t\t\t\treturn elem;\n\t\t\t} ).append( this );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\twrapInner: function( html ) {\n\t\tif ( jQuery.isFunction( html ) ) {\n\t\t\treturn this.each( function( i ) {\n\t\t\t\tjQuery( this ).wrapInner( html.call( this, i ) );\n\t\t\t} );\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tvar self = jQuery( this ),\n\t\t\t\tcontents = self.contents();\n\n\t\t\tif ( contents.length ) {\n\t\t\t\tcontents.wrapAll( html );\n\n\t\t\t} else {\n\t\t\t\tself.append( html );\n\t\t\t}\n\t\t} );\n\t},\n\n\twrap: function( html ) {\n\t\tvar isFunction = jQuery.isFunction( html );\n\n\t\treturn this.each( function( i ) {\n\t\t\tjQuery( this ).wrapAll( isFunction ? html.call( this, i ) : html );\n\t\t} );\n\t},\n\n\tunwrap: function( selector ) {\n\t\tthis.parent( selector ).not( \"body\" ).each( function() {\n\t\t\tjQuery( this ).replaceWith( this.childNodes );\n\t\t} );\n\t\treturn this;\n\t}\n} );\n\n\njQuery.expr.pseudos.hidden = function( elem ) {\n\treturn !jQuery.expr.pseudos.visible( elem );\n};\njQuery.expr.pseudos.visible = function( elem ) {\n\treturn !!( elem.offsetWidth || elem.offsetHeight || elem.getClientRects().length );\n};\n\n\n\n\njQuery.ajaxSettings.xhr = function() {\n\ttry {\n\t\treturn new window.XMLHttpRequest();\n\t} catch ( e ) {}\n};\n\nvar xhrSuccessStatus = {\n\n\t\t// File protocol always yields status code 0, assume 200\n\t\t0: 200,\n\n\t\t// Support: IE <=9 only\n\t\t// #1450: sometimes IE returns 1223 when it should be 204\n\t\t1223: 204\n\t},\n\txhrSupported = jQuery.ajaxSettings.xhr();\n\nsupport.cors = !!xhrSupported && ( \"withCredentials\" in xhrSupported );\nsupport.ajax = xhrSupported = !!xhrSupported;\n\njQuery.ajaxTransport( function( options ) {\n\tvar callback, errorCallback;\n\n\t// Cross domain only allowed if supported through XMLHttpRequest\n\tif ( support.cors || xhrSupported && !options.crossDomain ) {\n\t\treturn {\n\t\t\tsend: function( headers, complete ) {\n\t\t\t\tvar i,\n\t\t\t\t\txhr = options.xhr();\n\n\t\t\t\txhr.open(\n\t\t\t\t\toptions.type,\n\t\t\t\t\toptions.url,\n\t\t\t\t\toptions.async,\n\t\t\t\t\toptions.username,\n\t\t\t\t\toptions.password\n\t\t\t\t);\n\n\t\t\t\t// Apply custom fields if provided\n\t\t\t\tif ( options.xhrFields ) {\n\t\t\t\t\tfor ( i in options.xhrFields ) {\n\t\t\t\t\t\txhr[ i ] = options.xhrFields[ i ];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Override mime type if needed\n\t\t\t\tif ( options.mimeType && xhr.overrideMimeType ) {\n\t\t\t\t\txhr.overrideMimeType( options.mimeType );\n\t\t\t\t}\n\n\t\t\t\t// X-Requested-With header\n\t\t\t\t// For cross-domain requests, seeing as conditions for a preflight are\n\t\t\t\t// akin to a jigsaw puzzle, we simply never set it to be sure.\n\t\t\t\t// (it can always be set on a per-request basis or even using ajaxSetup)\n\t\t\t\t// For same-domain requests, won't change header if already provided.\n\t\t\t\tif ( !options.crossDomain && !headers[ \"X-Requested-With\" ] ) {\n\t\t\t\t\theaders[ \"X-Requested-With\" ] = \"XMLHttpRequest\";\n\t\t\t\t}\n\n\t\t\t\t// Set headers\n\t\t\t\tfor ( i in headers ) {\n\t\t\t\t\txhr.setRequestHeader( i, headers[ i ] );\n\t\t\t\t}\n\n\t\t\t\t// Callback\n\t\t\t\tcallback = function( type ) {\n\t\t\t\t\treturn function() {\n\t\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\t\tcallback = errorCallback = xhr.onload =\n\t\t\t\t\t\t\t\txhr.onerror = xhr.onabort = xhr.onreadystatechange = null;\n\n\t\t\t\t\t\t\tif ( type === \"abort\" ) {\n\t\t\t\t\t\t\t\txhr.abort();\n\t\t\t\t\t\t\t} else if ( type === \"error\" ) {\n\n\t\t\t\t\t\t\t\t// Support: IE <=9 only\n\t\t\t\t\t\t\t\t// On a manual native abort, IE9 throws\n\t\t\t\t\t\t\t\t// errors on any property access that is not readyState\n\t\t\t\t\t\t\t\tif ( typeof xhr.status !== \"number\" ) {\n\t\t\t\t\t\t\t\t\tcomplete( 0, \"error\" );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tcomplete(\n\n\t\t\t\t\t\t\t\t\t\t// File: protocol always yields status 0; see #8605, #14207\n\t\t\t\t\t\t\t\t\t\txhr.status,\n\t\t\t\t\t\t\t\t\t\txhr.statusText\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcomplete(\n\t\t\t\t\t\t\t\t\txhrSuccessStatus[ xhr.status ] || xhr.status,\n\t\t\t\t\t\t\t\t\txhr.statusText,\n\n\t\t\t\t\t\t\t\t\t// Support: IE <=9 only\n\t\t\t\t\t\t\t\t\t// IE9 has no XHR2 but throws on binary (trac-11426)\n\t\t\t\t\t\t\t\t\t// For XHR2 non-text, let the caller handle it (gh-2498)\n\t\t\t\t\t\t\t\t\t( xhr.responseType || \"text\" ) !== \"text\"  ||\n\t\t\t\t\t\t\t\t\ttypeof xhr.responseText !== \"string\" ?\n\t\t\t\t\t\t\t\t\t\t{ binary: xhr.response } :\n\t\t\t\t\t\t\t\t\t\t{ text: xhr.responseText },\n\t\t\t\t\t\t\t\t\txhr.getAllResponseHeaders()\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t};\n\n\t\t\t\t// Listen to events\n\t\t\t\txhr.onload = callback();\n\t\t\t\terrorCallback = xhr.onerror = callback( \"error\" );\n\n\t\t\t\t// Support: IE 9 only\n\t\t\t\t// Use onreadystatechange to replace onabort\n\t\t\t\t// to handle uncaught aborts\n\t\t\t\tif ( xhr.onabort !== undefined ) {\n\t\t\t\t\txhr.onabort = errorCallback;\n\t\t\t\t} else {\n\t\t\t\t\txhr.onreadystatechange = function() {\n\n\t\t\t\t\t\t// Check readyState before timeout as it changes\n\t\t\t\t\t\tif ( xhr.readyState === 4 ) {\n\n\t\t\t\t\t\t\t// Allow onerror to be called first,\n\t\t\t\t\t\t\t// but that will not handle a native abort\n\t\t\t\t\t\t\t// Also, save errorCallback to a variable\n\t\t\t\t\t\t\t// as xhr.onerror cannot be accessed\n\t\t\t\t\t\t\twindow.setTimeout( function() {\n\t\t\t\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\t\t\t\terrorCallback();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\t// Create the abort callback\n\t\t\t\tcallback = callback( \"abort\" );\n\n\t\t\t\ttry {\n\n\t\t\t\t\t// Do send the request (this may raise an exception)\n\t\t\t\t\txhr.send( options.hasContent && options.data || null );\n\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\t// #14683: Only rethrow if this hasn't been notified as an error yet\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tthrow e;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tabort: function() {\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n} );\n\n\n\n\n// Prevent auto-execution of scripts when no explicit dataType was provided (See gh-2432)\njQuery.ajaxPrefilter( function( s ) {\n\tif ( s.crossDomain ) {\n\t\ts.contents.script = false;\n\t}\n} );\n\n// Install script dataType\njQuery.ajaxSetup( {\n\taccepts: {\n\t\tscript: \"text/javascript, application/javascript, \" +\n\t\t\t\"application/ecmascript, application/x-ecmascript\"\n\t},\n\tcontents: {\n\t\tscript: /\\b(?:java|ecma)script\\b/\n\t},\n\tconverters: {\n\t\t\"text script\": function( text ) {\n\t\t\tjQuery.globalEval( text );\n\t\t\treturn text;\n\t\t}\n\t}\n} );\n\n// Handle cache's special case and crossDomain\njQuery.ajaxPrefilter( \"script\", function( s ) {\n\tif ( s.cache === undefined ) {\n\t\ts.cache = false;\n\t}\n\tif ( s.crossDomain ) {\n\t\ts.type = \"GET\";\n\t}\n} );\n\n// Bind script tag hack transport\njQuery.ajaxTransport( \"script\", function( s ) {\n\n\t// This transport only deals with cross domain requests\n\tif ( s.crossDomain ) {\n\t\tvar script, callback;\n\t\treturn {\n\t\t\tsend: function( _, complete ) {\n\t\t\t\tscript = jQuery( \"<script>\" ).prop( {\n\t\t\t\t\tcharset: s.scriptCharset,\n\t\t\t\t\tsrc: s.url\n\t\t\t\t} ).on(\n\t\t\t\t\t\"load error\",\n\t\t\t\t\tcallback = function( evt ) {\n\t\t\t\t\t\tscript.remove();\n\t\t\t\t\t\tcallback = null;\n\t\t\t\t\t\tif ( evt ) {\n\t\t\t\t\t\t\tcomplete( evt.type === \"error\" ? 404 : 200, evt.type );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\t// Use native DOM manipulation to avoid our domManip AJAX trickery\n\t\t\t\tdocument.head.appendChild( script[ 0 ] );\n\t\t\t},\n\t\t\tabort: function() {\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n} );\n\n\n\n\nvar oldCallbacks = [],\n\trjsonp = /(=)\\?(?=&|$)|\\?\\?/;\n\n// Default jsonp settings\njQuery.ajaxSetup( {\n\tjsonp: \"callback\",\n\tjsonpCallback: function() {\n\t\tvar callback = oldCallbacks.pop() || ( jQuery.expando + \"_\" + ( nonce++ ) );\n\t\tthis[ callback ] = true;\n\t\treturn callback;\n\t}\n} );\n\n// Detect, normalize options and install callbacks for jsonp requests\njQuery.ajaxPrefilter( \"json jsonp\", function( s, originalSettings, jqXHR ) {\n\n\tvar callbackName, overwritten, responseContainer,\n\t\tjsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?\n\t\t\t\"url\" :\n\t\t\ttypeof s.data === \"string\" &&\n\t\t\t\t( s.contentType || \"\" )\n\t\t\t\t\t.indexOf( \"application/x-www-form-urlencoded\" ) === 0 &&\n\t\t\t\trjsonp.test( s.data ) && \"data\"\n\t\t);\n\n\t// Handle iff the expected data type is \"jsonp\" or we have a parameter to set\n\tif ( jsonProp || s.dataTypes[ 0 ] === \"jsonp\" ) {\n\n\t\t// Get callback name, remembering preexisting value associated with it\n\t\tcallbackName = s.jsonpCallback = jQuery.isFunction( s.jsonpCallback ) ?\n\t\t\ts.jsonpCallback() :\n\t\t\ts.jsonpCallback;\n\n\t\t// Insert callback into url or form data\n\t\tif ( jsonProp ) {\n\t\t\ts[ jsonProp ] = s[ jsonProp ].replace( rjsonp, \"$1\" + callbackName );\n\t\t} else if ( s.jsonp !== false ) {\n\t\t\ts.url += ( rquery.test( s.url ) ? \"&\" : \"?\" ) + s.jsonp + \"=\" + callbackName;\n\t\t}\n\n\t\t// Use data converter to retrieve json after script execution\n\t\ts.converters[ \"script json\" ] = function() {\n\t\t\tif ( !responseContainer ) {\n\t\t\t\tjQuery.error( callbackName + \" was not called\" );\n\t\t\t}\n\t\t\treturn responseContainer[ 0 ];\n\t\t};\n\n\t\t// Force json dataType\n\t\ts.dataTypes[ 0 ] = \"json\";\n\n\t\t// Install callback\n\t\toverwritten = window[ callbackName ];\n\t\twindow[ callbackName ] = function() {\n\t\t\tresponseContainer = arguments;\n\t\t};\n\n\t\t// Clean-up function (fires after converters)\n\t\tjqXHR.always( function() {\n\n\t\t\t// If previous value didn't exist - remove it\n\t\t\tif ( overwritten === undefined ) {\n\t\t\t\tjQuery( window ).removeProp( callbackName );\n\n\t\t\t// Otherwise restore preexisting value\n\t\t\t} else {\n\t\t\t\twindow[ callbackName ] = overwritten;\n\t\t\t}\n\n\t\t\t// Save back as free\n\t\t\tif ( s[ callbackName ] ) {\n\n\t\t\t\t// Make sure that re-using the options doesn't screw things around\n\t\t\t\ts.jsonpCallback = originalSettings.jsonpCallback;\n\n\t\t\t\t// Save the callback name for future use\n\t\t\t\toldCallbacks.push( callbackName );\n\t\t\t}\n\n\t\t\t// Call if it was a function and we have a response\n\t\t\tif ( responseContainer && jQuery.isFunction( overwritten ) ) {\n\t\t\t\toverwritten( responseContainer[ 0 ] );\n\t\t\t}\n\n\t\t\tresponseContainer = overwritten = undefined;\n\t\t} );\n\n\t\t// Delegate to script\n\t\treturn \"script\";\n\t}\n} );\n\n\n\n\n// Support: Safari 8 only\n// In Safari 8 documents created via document.implementation.createHTMLDocument\n// collapse sibling forms: the second one becomes a child of the first one.\n// Because of that, this security measure has to be disabled in Safari 8.\n// https://bugs.webkit.org/show_bug.cgi?id=137337\nsupport.createHTMLDocument = ( function() {\n\tvar body = document.implementation.createHTMLDocument( \"\" ).body;\n\tbody.innerHTML = \"<form></form><form></form>\";\n\treturn body.childNodes.length === 2;\n} )();\n\n\n// Argument \"data\" should be string of html\n// context (optional): If specified, the fragment will be created in this context,\n// defaults to document\n// keepScripts (optional): If true, will include scripts passed in the html string\njQuery.parseHTML = function( data, context, keepScripts ) {\n\tif ( typeof data !== \"string\" ) {\n\t\treturn [];\n\t}\n\tif ( typeof context === \"boolean\" ) {\n\t\tkeepScripts = context;\n\t\tcontext = false;\n\t}\n\n\tvar base, parsed, scripts;\n\n\tif ( !context ) {\n\n\t\t// Stop scripts or inline event handlers from being executed immediately\n\t\t// by using document.implementation\n\t\tif ( support.createHTMLDocument ) {\n\t\t\tcontext = document.implementation.createHTMLDocument( \"\" );\n\n\t\t\t// Set the base href for the created document\n\t\t\t// so any parsed elements with URLs\n\t\t\t// are based on the document's URL (gh-2965)\n\t\t\tbase = context.createElement( \"base\" );\n\t\t\tbase.href = document.location.href;\n\t\t\tcontext.head.appendChild( base );\n\t\t} else {\n\t\t\tcontext = document;\n\t\t}\n\t}\n\n\tparsed = rsingleTag.exec( data );\n\tscripts = !keepScripts && [];\n\n\t// Single tag\n\tif ( parsed ) {\n\t\treturn [ context.createElement( parsed[ 1 ] ) ];\n\t}\n\n\tparsed = buildFragment( [ data ], context, scripts );\n\n\tif ( scripts && scripts.length ) {\n\t\tjQuery( scripts ).remove();\n\t}\n\n\treturn jQuery.merge( [], parsed.childNodes );\n};\n\n\n/**\n * Load a url into a page\n */\njQuery.fn.load = function( url, params, callback ) {\n\tvar selector, type, response,\n\t\tself = this,\n\t\toff = url.indexOf( \" \" );\n\n\tif ( off > -1 ) {\n\t\tselector = stripAndCollapse( url.slice( off ) );\n\t\turl = url.slice( 0, off );\n\t}\n\n\t// If it's a function\n\tif ( jQuery.isFunction( params ) ) {\n\n\t\t// We assume that it's the callback\n\t\tcallback = params;\n\t\tparams = undefined;\n\n\t// Otherwise, build a param string\n\t} else if ( params && typeof params === \"object\" ) {\n\t\ttype = \"POST\";\n\t}\n\n\t// If we have elements to modify, make the request\n\tif ( self.length > 0 ) {\n\t\tjQuery.ajax( {\n\t\t\turl: url,\n\n\t\t\t// If \"type\" variable is undefined, then \"GET\" method will be used.\n\t\t\t// Make value of this field explicit since\n\t\t\t// user can override it through ajaxSetup method\n\t\t\ttype: type || \"GET\",\n\t\t\tdataType: \"html\",\n\t\t\tdata: params\n\t\t} ).done( function( responseText ) {\n\n\t\t\t// Save response for use in complete callback\n\t\t\tresponse = arguments;\n\n\t\t\tself.html( selector ?\n\n\t\t\t\t// If a selector was specified, locate the right elements in a dummy div\n\t\t\t\t// Exclude scripts to avoid IE 'Permission Denied' errors\n\t\t\t\tjQuery( \"<div>\" ).append( jQuery.parseHTML( responseText ) ).find( selector ) :\n\n\t\t\t\t// Otherwise use the full result\n\t\t\t\tresponseText );\n\n\t\t// If the request succeeds, this function gets \"data\", \"status\", \"jqXHR\"\n\t\t// but they are ignored because response was set above.\n\t\t// If it fails, this function gets \"jqXHR\", \"status\", \"error\"\n\t\t} ).always( callback && function( jqXHR, status ) {\n\t\t\tself.each( function() {\n\t\t\t\tcallback.apply( this, response || [ jqXHR.responseText, status, jqXHR ] );\n\t\t\t} );\n\t\t} );\n\t}\n\n\treturn this;\n};\n\n\n\n\n// Attach a bunch of functions for handling common AJAX events\njQuery.each( [\n\t\"ajaxStart\",\n\t\"ajaxStop\",\n\t\"ajaxComplete\",\n\t\"ajaxError\",\n\t\"ajaxSuccess\",\n\t\"ajaxSend\"\n], function( i, type ) {\n\tjQuery.fn[ type ] = function( fn ) {\n\t\treturn this.on( type, fn );\n\t};\n} );\n\n\n\n\njQuery.expr.pseudos.animated = function( elem ) {\n\treturn jQuery.grep( jQuery.timers, function( fn ) {\n\t\treturn elem === fn.elem;\n\t} ).length;\n};\n\n\n\n\n/**\n * Gets a window from an element\n */\nfunction getWindow( elem ) {\n\treturn jQuery.isWindow( elem ) ? elem : elem.nodeType === 9 && elem.defaultView;\n}\n\njQuery.offset = {\n\tsetOffset: function( elem, options, i ) {\n\t\tvar curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition,\n\t\t\tposition = jQuery.css( elem, \"position\" ),\n\t\t\tcurElem = jQuery( elem ),\n\t\t\tprops = {};\n\n\t\t// Set position first, in-case top/left are set even on static elem\n\t\tif ( position === \"static\" ) {\n\t\t\telem.style.position = \"relative\";\n\t\t}\n\n\t\tcurOffset = curElem.offset();\n\t\tcurCSSTop = jQuery.css( elem, \"top\" );\n\t\tcurCSSLeft = jQuery.css( elem, \"left\" );\n\t\tcalculatePosition = ( position === \"absolute\" || position === \"fixed\" ) &&\n\t\t\t( curCSSTop + curCSSLeft ).indexOf( \"auto\" ) > -1;\n\n\t\t// Need to be able to calculate position if either\n\t\t// top or left is auto and position is either absolute or fixed\n\t\tif ( calculatePosition ) {\n\t\t\tcurPosition = curElem.position();\n\t\t\tcurTop = curPosition.top;\n\t\t\tcurLeft = curPosition.left;\n\n\t\t} else {\n\t\t\tcurTop = parseFloat( curCSSTop ) || 0;\n\t\t\tcurLeft = parseFloat( curCSSLeft ) || 0;\n\t\t}\n\n\t\tif ( jQuery.isFunction( options ) ) {\n\n\t\t\t// Use jQuery.extend here to allow modification of coordinates argument (gh-1848)\n\t\t\toptions = options.call( elem, i, jQuery.extend( {}, curOffset ) );\n\t\t}\n\n\t\tif ( options.top != null ) {\n\t\t\tprops.top = ( options.top - curOffset.top ) + curTop;\n\t\t}\n\t\tif ( options.left != null ) {\n\t\t\tprops.left = ( options.left - curOffset.left ) + curLeft;\n\t\t}\n\n\t\tif ( \"using\" in options ) {\n\t\t\toptions.using.call( elem, props );\n\n\t\t} else {\n\t\t\tcurElem.css( props );\n\t\t}\n\t}\n};\n\njQuery.fn.extend( {\n\toffset: function( options ) {\n\n\t\t// Preserve chaining for setter\n\t\tif ( arguments.length ) {\n\t\t\treturn options === undefined ?\n\t\t\t\tthis :\n\t\t\t\tthis.each( function( i ) {\n\t\t\t\t\tjQuery.offset.setOffset( this, options, i );\n\t\t\t\t} );\n\t\t}\n\n\t\tvar docElem, win, rect, doc,\n\t\t\telem = this[ 0 ];\n\n\t\tif ( !elem ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Support: IE <=11 only\n\t\t// Running getBoundingClientRect on a\n\t\t// disconnected node in IE throws an error\n\t\tif ( !elem.getClientRects().length ) {\n\t\t\treturn { top: 0, left: 0 };\n\t\t}\n\n\t\trect = elem.getBoundingClientRect();\n\n\t\t// Make sure element is not hidden (display: none)\n\t\tif ( rect.width || rect.height ) {\n\t\t\tdoc = elem.ownerDocument;\n\t\t\twin = getWindow( doc );\n\t\t\tdocElem = doc.documentElement;\n\n\t\t\treturn {\n\t\t\t\ttop: rect.top + win.pageYOffset - docElem.clientTop,\n\t\t\t\tleft: rect.left + win.pageXOffset - docElem.clientLeft\n\t\t\t};\n\t\t}\n\n\t\t// Return zeros for disconnected and hidden elements (gh-2310)\n\t\treturn rect;\n\t},\n\n\tposition: function() {\n\t\tif ( !this[ 0 ] ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar offsetParent, offset,\n\t\t\telem = this[ 0 ],\n\t\t\tparentOffset = { top: 0, left: 0 };\n\n\t\t// Fixed elements are offset from window (parentOffset = {top:0, left: 0},\n\t\t// because it is its only offset parent\n\t\tif ( jQuery.css( elem, \"position\" ) === \"fixed\" ) {\n\n\t\t\t// Assume getBoundingClientRect is there when computed position is fixed\n\t\t\toffset = elem.getBoundingClientRect();\n\n\t\t} else {\n\n\t\t\t// Get *real* offsetParent\n\t\t\toffsetParent = this.offsetParent();\n\n\t\t\t// Get correct offsets\n\t\t\toffset = this.offset();\n\t\t\tif ( !jQuery.nodeName( offsetParent[ 0 ], \"html\" ) ) {\n\t\t\t\tparentOffset = offsetParent.offset();\n\t\t\t}\n\n\t\t\t// Add offsetParent borders\n\t\t\tparentOffset = {\n\t\t\t\ttop: parentOffset.top + jQuery.css( offsetParent[ 0 ], \"borderTopWidth\", true ),\n\t\t\t\tleft: parentOffset.left + jQuery.css( offsetParent[ 0 ], \"borderLeftWidth\", true )\n\t\t\t};\n\t\t}\n\n\t\t// Subtract parent offsets and element margins\n\t\treturn {\n\t\t\ttop: offset.top - parentOffset.top - jQuery.css( elem, \"marginTop\", true ),\n\t\t\tleft: offset.left - parentOffset.left - jQuery.css( elem, \"marginLeft\", true )\n\t\t};\n\t},\n\n\t// This method will return documentElement in the following cases:\n\t// 1) For the element inside the iframe without offsetParent, this method will return\n\t//    documentElement of the parent window\n\t// 2) For the hidden or detached element\n\t// 3) For body or html element, i.e. in case of the html node - it will return itself\n\t//\n\t// but those exceptions were never presented as a real life use-cases\n\t// and might be considered as more preferable results.\n\t//\n\t// This logic, however, is not guaranteed and can change at any point in the future\n\toffsetParent: function() {\n\t\treturn this.map( function() {\n\t\t\tvar offsetParent = this.offsetParent;\n\n\t\t\twhile ( offsetParent && jQuery.css( offsetParent, \"position\" ) === \"static\" ) {\n\t\t\t\toffsetParent = offsetParent.offsetParent;\n\t\t\t}\n\n\t\t\treturn offsetParent || documentElement;\n\t\t} );\n\t}\n} );\n\n// Create scrollLeft and scrollTop methods\njQuery.each( { scrollLeft: \"pageXOffset\", scrollTop: \"pageYOffset\" }, function( method, prop ) {\n\tvar top = \"pageYOffset\" === prop;\n\n\tjQuery.fn[ method ] = function( val ) {\n\t\treturn access( this, function( elem, method, val ) {\n\t\t\tvar win = getWindow( elem );\n\n\t\t\tif ( val === undefined ) {\n\t\t\t\treturn win ? win[ prop ] : elem[ method ];\n\t\t\t}\n\n\t\t\tif ( win ) {\n\t\t\t\twin.scrollTo(\n\t\t\t\t\t!top ? val : win.pageXOffset,\n\t\t\t\t\ttop ? val : win.pageYOffset\n\t\t\t\t);\n\n\t\t\t} else {\n\t\t\t\telem[ method ] = val;\n\t\t\t}\n\t\t}, method, val, arguments.length );\n\t};\n} );\n\n// Support: Safari <=7 - 9.1, Chrome <=37 - 49\n// Add the top/left cssHooks using jQuery.fn.position\n// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084\n// Blink bug: https://bugs.chromium.org/p/chromium/issues/detail?id=589347\n// getComputedStyle returns percent when specified for top/left/bottom/right;\n// rather than make the css module depend on the offset module, just check for it here\njQuery.each( [ \"top\", \"left\" ], function( i, prop ) {\n\tjQuery.cssHooks[ prop ] = addGetHookIf( support.pixelPosition,\n\t\tfunction( elem, computed ) {\n\t\t\tif ( computed ) {\n\t\t\t\tcomputed = curCSS( elem, prop );\n\n\t\t\t\t// If curCSS returns percentage, fallback to offset\n\t\t\t\treturn rnumnonpx.test( computed ) ?\n\t\t\t\t\tjQuery( elem ).position()[ prop ] + \"px\" :\n\t\t\t\t\tcomputed;\n\t\t\t}\n\t\t}\n\t);\n} );\n\n\n// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods\njQuery.each( { Height: \"height\", Width: \"width\" }, function( name, type ) {\n\tjQuery.each( { padding: \"inner\" + name, content: type, \"\": \"outer\" + name },\n\t\tfunction( defaultExtra, funcName ) {\n\n\t\t// Margin is only for outerHeight, outerWidth\n\t\tjQuery.fn[ funcName ] = function( margin, value ) {\n\t\t\tvar chainable = arguments.length && ( defaultExtra || typeof margin !== \"boolean\" ),\n\t\t\t\textra = defaultExtra || ( margin === true || value === true ? \"margin\" : \"border\" );\n\n\t\t\treturn access( this, function( elem, type, value ) {\n\t\t\t\tvar doc;\n\n\t\t\t\tif ( jQuery.isWindow( elem ) ) {\n\n\t\t\t\t\t// $( window ).outerWidth/Height return w/h including scrollbars (gh-1729)\n\t\t\t\t\treturn funcName.indexOf( \"outer\" ) === 0 ?\n\t\t\t\t\t\telem[ \"inner\" + name ] :\n\t\t\t\t\t\telem.document.documentElement[ \"client\" + name ];\n\t\t\t\t}\n\n\t\t\t\t// Get document width or height\n\t\t\t\tif ( elem.nodeType === 9 ) {\n\t\t\t\t\tdoc = elem.documentElement;\n\n\t\t\t\t\t// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height],\n\t\t\t\t\t// whichever is greatest\n\t\t\t\t\treturn Math.max(\n\t\t\t\t\t\telem.body[ \"scroll\" + name ], doc[ \"scroll\" + name ],\n\t\t\t\t\t\telem.body[ \"offset\" + name ], doc[ \"offset\" + name ],\n\t\t\t\t\t\tdoc[ \"client\" + name ]\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn value === undefined ?\n\n\t\t\t\t\t// Get width or height on the element, requesting but not forcing parseFloat\n\t\t\t\t\tjQuery.css( elem, type, extra ) :\n\n\t\t\t\t\t// Set width or height on the element\n\t\t\t\t\tjQuery.style( elem, type, value, extra );\n\t\t\t}, type, chainable ? margin : undefined, chainable );\n\t\t};\n\t} );\n} );\n\n\njQuery.fn.extend( {\n\n\tbind: function( types, data, fn ) {\n\t\treturn this.on( types, null, data, fn );\n\t},\n\tunbind: function( types, fn ) {\n\t\treturn this.off( types, null, fn );\n\t},\n\n\tdelegate: function( selector, types, data, fn ) {\n\t\treturn this.on( types, selector, data, fn );\n\t},\n\tundelegate: function( selector, types, fn ) {\n\n\t\t// ( namespace ) or ( selector, types [, fn] )\n\t\treturn arguments.length === 1 ?\n\t\t\tthis.off( selector, \"**\" ) :\n\t\t\tthis.off( types, selector || \"**\", fn );\n\t}\n} );\n\njQuery.parseJSON = JSON.parse;\n\n\n\n\n// Register as a named AMD module, since jQuery can be concatenated with other\n// files that may use define, but not via a proper concatenation script that\n// understands anonymous AMD modules. A named AMD is safest and most robust\n// way to register. Lowercase jquery is used because AMD module names are\n// derived from file names, and jQuery is normally delivered in a lowercase\n// file name. Do this after creating the global so that if an AMD module wants\n// to call noConflict to hide this version of jQuery, it will work.\n\n// Note that for maximum portability, libraries that are not jQuery should\n// declare themselves as anonymous modules, and avoid setting a global if an\n// AMD loader is present. jQuery is a special case. For more information, see\n// https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon\n\nif ( typeof define === \"function\" && define.amd ) {\n\tdefine( \"jquery\", [], function() {\n\t\treturn jQuery;\n\t} );\n}\n\n\n\n\nvar\n\n\t// Map over jQuery in case of overwrite\n\t_jQuery = window.jQuery,\n\n\t// Map over the $ in case of overwrite\n\t_$ = window.$;\n\njQuery.noConflict = function( deep ) {\n\tif ( window.$ === jQuery ) {\n\t\twindow.$ = _$;\n\t}\n\n\tif ( deep && window.jQuery === jQuery ) {\n\t\twindow.jQuery = _jQuery;\n\t}\n\n\treturn jQuery;\n};\n\n// Expose jQuery and $ identifiers, even in AMD\n// (#7102#comment:10, https://github.com/jquery/jquery/pull/557)\n// and CommonJS for browser emulators (#13566)\nif ( !noGlobal ) {\n\twindow.jQuery = window.$ = jQuery;\n}\n\n\n\n\n\nreturn jQuery;\n} );\n\n\n\n// WEBPACK FOOTER //\n// ./~/jquery/dist/jquery.js","module.exports = global[\"jQuery\"] = require(\"-!/Users/cci/repository/nodefony-stage/node_modules/babel-loader/lib/index.js?{\\\"presets\\\":[\\\"es2015\\\"]}!./jquery.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/expose-loader?jQuery!./~/babel-loader/lib?{\"presets\":[\"es2015\"]}!./~/jquery/dist/jquery.js\n// module id = 60\n// module chunks = 0"],"sourceRoot":""}