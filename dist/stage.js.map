{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap cb92b01bca4f8aba5d41","webpack:///./~/jquery/dist/jquery.js?7ccb","webpack:///./~/webrtc-adapter/src/js/utils.js","webpack:///./~/shortid/lib/alphabet.js","webpack:///./~/path-browserify/index.js","webpack:///./~/twig/twig.js","webpack:///fs (ignored)","webpack:///./~/shortid/index.js","webpack:///./~/shortid/lib/encode.js","webpack:///(webpack)/buildin/global.js","webpack:///(webpack)/buildin/module.js","webpack:///./src/core/notificationsCenter.es6","webpack:///./src/core/stage.es6","webpack:///./src/crypto/base64.js","webpack:///./src/crypto/md5.js","webpack:///./src/io/authentication/mechanisms/digest-md5/digestMd5.es6","webpack:///./src/io/authentication/sasl/sasl.es6","webpack:///./src/io/io.es6","webpack:///./src/io/protocols/bayeux/bayeux.es6","webpack:///./src/io/protocols/sip/sdp.es6","webpack:///./src/io/protocols/sip/sip.es6","webpack:///./src/io/realtime/realtime.es6","webpack:///./src/io/transports/in/longPoll.es6","webpack:///./src/io/transports/in/poll.es6","webpack:///./src/io/transports/socket.es6","webpack:///./src/io/transports/websockets/websocket.es6","webpack:///./src/kernel/appKernel.es6","webpack:///./src/kernel/autoload.es6","webpack:///./src/kernel/container.es6","webpack:///./src/kernel/controller.es6","webpack:///./src/kernel/kernel.es6","webpack:///./src/kernel/locationService.es6","webpack:///./src/kernel/module.es6","webpack:///./src/kernel/routerService.es6","webpack:///./src/kernel/service.es6","webpack:///./src/kernel/translationService.es6","webpack:///./src/media/media.es6","webpack:///./src/media/webrtc/webrtc.es6","webpack:///./src/structs/hash/hash.es6","webpack:///./src/structs/queue/queue.es6","webpack:///./src/syslog/syslog.es6","webpack:///./src/tools/xml.js","webpack:///./~/process/browser.js","webpack:///./~/sdp/sdp.js","webpack:///./~/shortid/lib/build.js","webpack:///./~/shortid/lib/decode.js","webpack:///./~/shortid/lib/index.js","webpack:///./~/shortid/lib/is-valid.js","webpack:///./~/shortid/lib/random/random-byte-browser.js","webpack:///./~/shortid/lib/random/random-from-seed.js","webpack:///./~/shortid/lib/util/cluster-worker-id-browser.js","webpack:///./~/webrtc-adapter/src/js/adapter_core.js","webpack:///./~/webrtc-adapter/src/js/chrome/chrome_shim.js","webpack:///./~/webrtc-adapter/src/js/chrome/getusermedia.js","webpack:///./~/webrtc-adapter/src/js/edge/edge_shim.js","webpack:///./~/webrtc-adapter/src/js/edge/getusermedia.js","webpack:///./~/webrtc-adapter/src/js/edge/rtcpeerconnection_shim.js","webpack:///./~/webrtc-adapter/src/js/firefox/firefox_shim.js","webpack:///./~/webrtc-adapter/src/js/firefox/getusermedia.js","webpack:///./~/webrtc-adapter/src/js/safari/safari_shim.js","webpack:///./src/core.js","webpack:///./~/jquery/dist/jquery.js","webpack:///./~/jquery/dist/jquery.js?ec37"],"names":["logDisabled_","utils","disableLog","bool","Error","log","window","console","apply","arguments","extractVersion","uastring","expr","pos","match","length","parseInt","detectBrowser","result","browser","version","navigator","mozGetUserMedia","userAgent","webkitGetUserMedia","webkitRTCPeerConnection","mediaDevices","shimCreateObjectURL","HTMLMediaElement","prototype","undefined","nativeCreateObjectURL","URL","createObjectURL","bind","nativeRevokeObjectURL","revokeObjectURL","streams","Map","newId","stream","url","set","delete","dsc","Object","getOwnPropertyDescriptor","defineProperty","get","srcObject","nativeSetAttribute","setAttribute","toLowerCase","module","exports","browserDetails","randomFromSeed","require","ORIGINAL","alphabet","previousSeed","shuffled","reset","setCharacters","_alphabet_","unique","split","filter","item","ind","arr","lastIndexOf","join","characters","setSeed","seed","shuffle","sourceArray","targetArray","r","nextValue","characterIndex","Math","floor","push","splice","getShuffled","lookup","index","alphabetShuffled","normalizeArray","parts","allowAboveRoot","up","i","last","unshift","splitPathRe","splitPath","filename","exec","slice","resolve","resolvedPath","resolvedAbsolute","path","process","cwd","TypeError","charAt","p","normalize","isAbsolute","trailingSlash","substr","paths","Array","call","relative","from","to","trim","start","end","fromParts","toParts","min","samePartsLength","outputParts","concat","sep","delimiter","dirname","root","dir","basename","ext","f","extname","xs","res","str","len","webpackUniversalModuleDefinition","factory","webpackLoadOptionalExternalModule","e","__WEBPACK_EXTERNAL_MODULE_19__","__WEBPACK_EXTERNAL_MODULE_20__","modules","installedModules","__webpack_require__","moduleId","id","loaded","m","c","Twig","VERSION","trace","debug","cache","noop","placeholders","parent","indexOf","searchElement","hasOwnProperty","t","n","Number","Infinity","abs","k","max","forEach","callback","thisArg","T","O","toString","kValue","merge","target","source","onlyChanged","keys","key","message","name","type","output","error","ChildContext","context","token","logic","comment","raw","output_whitespace_pre","output_whitespace_post","output_whitespace_both","logic_whitespace_pre","logic_whitespace_post","logic_whitespace_both","definitions","open","close","strings","findStart","template","position","close_position","def","token_template","first_key_position","close_key_position","findEnd","token_def","found","offset","str_pos","str_found","end_offset","this_str_pos","end_str_pos","l","tokenize","tokens","error_offset","found_token","value","substring","compile","stack","intermediate_output","logic_token","unclosed_token","prev_token","prev_output","prev_intermediate_output","prev_template","next_token","tok_output","next","compile_output","expression","compile_logic","handler","pop","shift","ex","options","rethrow","parse","allow_async","that","err","is_async","promise","chain","handleException","async","parseToken","filters","parseAsync","then","o","catch","prepare","data","raw_tokens","autoescape","strategy","escaped_output","twig_markup","escape","Markup","Templates","loaders","parsers","registry","validateId","registerLoader","method_name","func","scope","unRegisterLoader","isRegisteredLoader","registerParser","unRegisterParser","isRegisteredParser","save","load","loadRemote","location","params","error_callback","loader","parser","method","fs","is","obj","clas","Template","blocks","macros","base","importedBlocks","originalBlockTokens","child","extend","render","cb","ext_template","allowInlineIncludes","parsePath","getLoaderMethod","renderAsync","v","importFile","file","sub_template","importBlocks","override","importMacros","remoteTemplate","compiler","content","String","JSON","stringify","twig","wrap","amd","pathToTwig","node","cjs2","replace","parseParams","Promise","reservedWords","comma","operator","unary","binary","string","array","object","parameter","subexpression","period","brackets","_function","variable","number","_null","test","operations","expressions","operations_extended","fn","push_both","push_value","regex","modifier","stack_token","transform","associativity","leftToRight","precidence","rightToLeft","temp","key_token","loop","validate","found_subexpression_start","next_subexpression_start_invalid","unclosed_parameter_count","end_token","param_stack","is_expression","new_array","array_ended","last_token","sliceRange","sliceStart","sliceEnd","input","new_object","object_ended","token_key","has_value","_keys","functions","resolveAsync","strict_variables","capitalize","toUpperCase","parameters","tokens_are_parameters","cleanup","extendType","definition","exp_offset","regex_array","token_next","match_found","invalid_matches","match_function","raw_token","loop_token_fixups","loop_token_fixup","containment","a","b","el","isArray","lib","boolval","parseFloat","pow","range","upper","lower","title","p1","p2","reverse","sort","sorted_keys","a1","a2","isNaN","b1","keyset","url_encode","encodeURIComponent","join_str","json_encode","arr_index","param","val","int_key","date","format","date_modify","modifyText","time","strtotime","getTime","Date","pairs","tag","replaceAll","vsprintf","striptags","strip_tags","raw_value","char_code","charCodeAt","sprintf","nl2br","linebreak_tag","br","number_format","decimals","dec","isFinite","prec","s","toFixedFix","round","whitespace","truncate","preserve","separator","startIndex","first","limit","limitedSplit","batch","items","size","fill","missing","ceil","chunkArray","precision","TEMPLATE_NOT_FOUND_MESSAGE","low","high","step","matrix","inival","endval","plus","walker","chars","fromCharCode","cycle","dump","EOL","indentChar","indentTimes","out","args","indent","times","displayVar","dumpVar","dateObj","block","attribute","values","template_from_string","random","LIMIT_INT31","getRandomNumber","limits","ignore_missing","templateSource","templateFound","isNodeEnvironment","__dirname","fetchTemplateSource","copy","src","add","search","returnVal","x","_pad","chr","leftJustify","padding","justify","prefix","minWidth","zeroPad","customPadChar","diff","_formatBaseX","_formatString","doFormat","valueIndex","flags","textTransform","positivePrefix","prefixBaseX","flagsl","j","mode","isHalf","sgn","_typeof","Symbol","iterator","constructor","ar","retVal","argv","argc","_obj2Array","_compare","current","tmp","nl","cl","allowed","tags","commentsAndPhpTags","$0","$1","text","now","parsed","today","year","days","ranges","fail","pattern","RegExp","getFullYear","getMonth","getDate","lastNext","day","getDay","setDate","splt","typeIsNumber","ago","num","timestamp","jsdate","txtWords","formatChr","formatChrCb","d","D","w","N","S","z","Y","W","F","M","L","y","getHours","A","B","H","getUTCHours","getUTCMinutes","getUTCSeconds","g","G","h","getMinutes","getSeconds","u","getMilliseconds","msg","I","UTC","tzo","getTimezoneOffset","P","Z","U","_date","mixedVar","xmlhttp","precompiled","XMLHttpRequest","onreadystatechange","readyState","status","cordova","responseText","send","loadTemplateFn","stat","stats","isFile","readFile","statSync","readFileSync","if_","endif","for_","endfor","else_","elseif","setcapture","endset","endfilter","shortblock","endblock","extends_","use","include","spaceless","endspaceless","macro","endmacro","import_","embed","endembed","key_value","conditional","kv_split","key_var","value_var","continue_chain","buildLoop","isConditional","index0","revindex","revindex0","inner_context","condition","expression_stack","unfiltered","block_output","isImported","hasParent","overwrite","innerContext","ignoreMissing","withContext","only","withStack","rBetweenTagSpaces","macroName","macroContext","_self","prop","contextName","macroExpressions","macroNames","macroMatch","token_template_type","token_type","token_regex","isPromise","namespaces","relativePath","base_path","sep_chr","new_path","tests","empty","odd","even","divisibleby","defined","none","sameas","warn","iterable","executor","state","handlers","changeState","newState","notify","onResolve","onReject","append","reject","onResolved","onRejected","run","done","ready","hasResolved","hasRejected","all","promises","results","forEachAsync","arg_index","callbacks","iterate","ref","href","extendFilter","extendFunction","extendTest","extendTag","markup","settings","renderFile","views","view_options","option","__express","randomByte","encode","loopCounter","Function","eval","webpackPolyfill","deprecate","children","enumerable","stage","regListenOn","Notification","events","garbageEvent","settingsToListen","eventName","event","ContextClosure","fire","ret","localSettings","listen","clearNotifications","notificationsCenter","notification","create","arrayProto","typeOf","propertyIsEnumerable","nodeType","callee","SyntaxError","getBrowser","getBrowserVersion","useragent","Stage","jQuery","crypto","media","structs","controllers","Ie","Gecko","Webkit","Opera","opera","platform","closure","register","_keyStr","encode64","chr1","chr2","chr3","enc1","enc2","enc3","enc4","_utf8_encode","decode64","_utf8_decode","decode","arrayBuffer","lkey1","lkey2","bytes","uarray","Uint8Array","utftext","c2","c3","decodeArrayBuffer","ab","ArrayBuffer","base64","hexcase","b64pad","md5_vm_test","rstr2hex","rstr_md5","binl2rstr","binl_md5","rstr2binl","rstr_hmac_md5","bkey","ipad","opad","hash","hex_tab","rstr2b64","tab","triplet","rstr2any","encoding","divisor","q","quotient","dividend","full_length","remainders","str2rstr_utf8","str2rstr_utf16le","str2rstr_utf16be","olda","oldb","oldc","oldd","md5_ff","md5_gg","md5_hh","md5_ii","safe_add","md5_cmn","bit_rol","lsw","msw","cnt","md5","hex_md5","hex_md5_noUTF8","str_md5","b64_md5","any_md5","hex_hmac_md5","str_hmac_md5","b64_hmac_md5","any_hmac_md5","keyWord","realm","qop","charset","algorithm","nonce","reg","parserAuthenticate","head","MD5","BASE64","DBASE64","generateA1","username","password","cnonce","A1","generateA2","uri","entity_body","A2","entity","responseDigest","noncecount","digestMd5","headers","body","requestUri","protocol","host","parseChallenge","parsing","ele","challenge","challengeB64","line","response","opaque","nc","toSend","io","authentication","Digest","mechanisms","parserSasl","Sasl","mechanism","getBestMechanism","bestMechanism","Class","goodM","user","generateAuthorization","SASL","isSameOrigin","loc","urlToOject","hostname","port","isSecure","authenticate","request","crossDomain","notificationCenter","authType","auth","getAuthenticationType","ajax","getAuthorization","$","beforeSend","xhr","setRequestHeader","success","encodeUriSegment","encodeUriQuery","pctEncodeSpaces","regSearch","parseKeyValue","decodeURIComponent","toKeyValue","getHeaderJSON","json","getResponseHeader","anchor","document","createElement","keyIndex","currentKey","pathname","nativeWebSocket","WebSocket","transportCore","protocols","transport","transports","clientsCapabilities","ws","poll","lpoll","longPoll","jsonp","onHandshakeResponse","successful","socket","getBestConnection","supportedConnectionTypes","onmessage","onMessage","onopen","connect","onerror","onclose","onError","reconnect","onConnectResponse","connected","idconnection","clientId","advice","onDisconnectResponse","onSubscribeResponse","onUnsubscribeResponse","code","arg","mess","bayeux","socketType","req","channel","minimumVersion","connectionType","unListen","subscription","service","dataType","contentType","defaultAparser","rtpmapParser","payloadType","encodingName","clockRate","encodingParameters","rtpmap","candidateParser","foundation","componentId","transportExt","priority","connectionAddress","candidateType","remoteAddr","remotePort","generation","networkId","candidates","aAttribute","aAttributeDirection","parserSdp","sessionBlock","audioBlock","videoBlock","detectBlocks","parseBlocks","nbLines","parseM","parseMline","direction","information","attributes","bandwidths","connection","encryption","nbPort","proto","fmt","nettype","addrtype","address","sessId","sessVersion","unicastAddr","stop","interval","duration","offsets","parseAline","parseCline","originator","parseOline","sessionName","email","phoneNumber","timeZone","timeDescription","parseTline","timeRepeat","parseRline","blockSessionParser","blockMediaParser","sdp","byteToHex","byte","generateId","getRandomValues","map","digest","generateResponse","dialog","userName","sip","server","nonceCount","Digestalgorithm","rawBody","digestMD5","lineResponse","transac","createTransaction","transaction","tagTo","createRequest","bodyType","header","regHeaders","headName","Allow","Via","CallId","fromTo","fromToG","contact","parsefromTo","sp","res2","displayName","res3","headerSip","rawHeader","firstLine","branch","routes","recordRoutes","each","Index","headValue","logger","callId","cseq","parseValue","clean","Supported","bodySip","contentLength","sdpParser","dtmfParser","dtmf","endline","endHeader","sipRequest","bodyMessage","typeBody","serverPort","requestLine","buildRequestline","buildHeader","buildBody","rport","ip","publicAddress","via","tagFrom","expires","maxForward","rawResponse","getRequestline","getHeader","getBody","getMessage","codeMessage","sipResponse","messageCode","responseLine","buildResponseLine","ptr","getResponseline","generateHex","Transaction","Message","hydrate","generateBranchId","responses","requests","hex","incCseq","statusCode","EARLY","ESTABLISHED","TERMINATED","CANCEL","createResponse","clearInterval","INITIAL","Dialog","transactions","generateTag","generateCseq","generateCallId","fromNameDisplay","toName","fromName","fromTag","toTag","toNameDisplay","currentTransaction","trans","userTo","description","typeNotify","info","typeInfo","clear","firstline","regSIP","rawMessage","statusLine","parseHeader","parseBody","getType","getDialog","getTransaction","createDialog","fragment","lastResponse","transportType","registered","registerInterval","authenticateRegister","setInterval","ack","onStart","onStop","defaultSettings","portServer","pwd","SIP","dialogs","diagRegister","initTransport","addr","force","invalid","generateInvalid","generateVia","domain","quit","dia","generateContact","unregister","diagInv","invite","diagNotify","bye","Service","settingsSyslog","moduleName","defaultSeverity","realtime","urlServer","syslog","services","subscribedService","nbSubscribed","handshake","remoteAddress","setTimeout","onSuccess","subscribe","unSubscribe","sendMessage","stopReConnect","disconnect","delay","pollAction","ajaxConfig","pollling","timer","buildAjaxSettings","complete","abort","clearTimeout","connectState","tokenKey","httpData","permanent","transient","idInterval","bestTransport","websocket","appKernel","environnement","loadModule","kernel","shortId","generate","AJAX","css","mineType","js","SCRIPT","insert","script","getElementsByTagName","appendChild","rel","onload","defaultSetting","regType","autoload","pci","severity","msgid","parentNode","removeChild","ISDefined","parseParameterString","ns","Container","protoService","protoParameters","sc","Scope","ExtendedScope","leaveScope","tabFxEvent","Controller","container","i18n","router","redirect","forward","variables","absolute","generateUrl","$controller","domElement","find","jElement","ctrl","closest","attr","resolvePattern","controller","on","evalInContext","element","partial","prepend","html","domParser","getTemplatePattern","html5Mode","hashPrefix","defaultEnvEnable","dev","development","prod","production","loadRemoteTwig","mydata","getModuleName","getTemplateName","registerTemplate","xrh","Kernel","environment","booted","isDomReady","uiContainer","initializeLog","autoloader","initRouter","initTwig","initTranslation","initRest","domReady","resize","unLoad","onLoad","boot","initLocation","locationService","Rest","restService","templateEngine","getModule","getController","action","app","initialize","listenWithConditions","pdu","payload","severityName","timeStamp","xml","parseXml","moduleSrc","registerModule","kernelcontext","addScope","onReady","nativeHistory","history","pushState","PATH_MATCH","DEFAULT_PORTS","changeUrl","lastUrl","initialUrl","newUrl","lastHash","lastUrlr","myurl","same","urlBrowser","History","beginsWith","begin","whole","stripHash","Location","stripFile","parseAbsoluteUrl","_absUrl","_url","_protocol","_host","_port","_path","change","_search","_hash","segments","relativeUrl","prefixed","absoluteUrl","LocationHashbangUrl","withoutBaseUrl","withoutHashUrl","parseRelativeUrl","encodePath","LocationHashbangInHtml5Url","LocationHtml5Url","pathUrl","serverBase","browserService","baseHref","urlParser","regI18n","modelModule","config","rootName","documentXml","overrideMimeType","templates","optionsGlobal","rest","addApi","locale","registerI18n","registerController","view","registerView","styles","style","registerStyle","scripts","registerScript","fonts","font","cacheFont","translations","translation","registerTranslation","icon","author","emailAuthor","authorLink","mvc","initialiseRest","route","defaultParam","createRoute","regPattern","Module","setParameters","getParameters","txt","pathName","templateName","enterScope","reader","Route","defaultParams","defaults","slash","dot","capture","opt","incl","wildcard","regModuleName","Resolver","defaultAction","defaultView","parsePathernController","getRouteByPattern","getAction","getDefaultView","cacheState","regSerch","routePattern","generatedPath","absUrl","resolveRoute","resolver","callController","getRoute","defaultOptions","removeAllListeners","has","translate","translateDispo","fr_FR","en_EN","regNavLang","defaultDomain","trans_default_domain","language","userLanguage","defaultLocale","getLangs","defaulDomain","audioContext","webAudioApi","AudioContext","webkitAudioContext","mediaStream","getMediaStream","updaterMedia","webkitMediaStream","getVideoTracks","videoTracks","getAudioTracks","audioTracks","MediaStream","defaultSettingsStream","audio","video","mediaElement","urlStream","setStream","getUserMedia","videotracks","audiotracks","play","attachMediaStream","trackSettings","gain","panner","analyser","Track","bus","audioNodes","audioBus","buffer","in","sync","retry","muted","currentTime","eventsManager","createNodes","mixer","mediaType","AudioNode","oncanplay","connectSource","createGain","createFilter","createStereoPanner","createAnalyser","smoothingTimeConstant","mute","when","pause","playbackState","PLAYING_STATE","disconnectSource","noteOn","createSource","audioNode","destination","createBufferSource","rawBuffer","Blob","decodeAudioData","decoded","createMediaStreamSource","createMediaElementSource","buf8","nodeGain","responseType","defaultAudioBusSettings","tracks","nbTracks","createChannelSplitter","createPanner","createBiquadFilter","nbChannel","createChannelMerger","createOscillator","createMediaStreamDestination","track","mixSettings","mediaMix","nbBus","createAudioBus","masterBus","analyserLeft","analyserRight","setGain","getGain","unmute","createTrack","removeTrack","parseSdp","sdpLines","newline","userSettings","constraints","mandatory","User","OfferToReceiveAudio","OfferToReceiveVideo","succesCallback","errorMedia","onSucces","desc","webrtc","asyncCandidates","RTCPeerConnection","createPeerConnection","addStream","dtmfSender","initDtmfSender","sendDtmf","peerConnection","localDescription","sessionDescription","webrtcTransaction","diag","iceServers","optional","onicecandidate","old","iceGatheringState","candidate","onaddstream","setRemoteStream","insertDTMF","gap","createDTMFSender","localAudioTrack","ontonechange","tone","createOffer","setDescription","setLocalDescription","constraintsOffer","createMediaStream","remoteDescription","remoteDesc","ClassDesc","RTCSessionDescription","setRemoteDescription","createAnswer","cancel","closeTransaction","decline","sipPort","sipTransport","WebRtc","socketState","init","doAnswer","RTCIceCandidate","addIceCandidate","transation","userMedia","ea","pair","struct","local","createHash","active","codeError","notFound","stopped","eventsQueue","createEventsManager","fireEvent","isEmpty","contain","remove","removeIndexOf","createStruct","Structs","createQueue","queues","maxStack","rateLimit","burstLimit","checkConditions","sysLogSeverity","guid","PDU","uid","translateSeverity","typePayload","toTimeString","operators","ele1","ele2","conditionsObj","sev","logicCondition","myConditions","checkFormatSeverity","checkFormatDate","checkFormatMsgId","severityToString","myint","sanitizeConditions","settingsCondition","condi","mySeverity","myseverity","createPDU","ringStack","burstPrinted","missed","valid","pushStack","contition","getLogs","conditions","myStack","myFuncCondition","Conditions","doEvent","beforeConditions","st","stringToDocumentXML","implementation","createDocument","doc","loadXML","oDomDoc","DOMParser","parseFromString","getDocumentRoot","documentElement","childNodes","myDoc","ownerDocument","parseDOM","__force_array","force_array","parseNode","nodeName","attr_prefix","name_space","nodeValue","addNode","textonly","ntype","cnts","removeColon","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","drainQueue","timeout","nextTick","Item","env","versions","addListener","once","off","removeListener","emit","prependListener","prependOnceListener","listeners","binding","chdir","umask","SDPUtils","generateIdentifier","localCName","splitLines","blob","splitSections","part","matchPrefix","parseCandidate","component","relatedAddress","relatedPort","tcpType","writeCandidate","parseIceOptions","parseRtpMap","numChannels","writeRtpMap","codec","pt","preferredPayloadType","parseExtmap","writeExtmap","headerExtension","preferredId","parseFmtp","kv","writeFmtp","parseRtcpFb","writeRtcpFb","lines","rtcpFeedback","fb","parseSsrcMedia","ssrc","colon","getMid","mediaSection","mid","parseFingerprint","getDtlsParameters","sessionpart","role","fingerprints","writeDtlsParameters","setupType","fp","getIceParameters","iceParameters","usernameFragment","writeIceParameters","parseRtpParameters","codecs","headerExtensions","fecMechanisms","rtcp","mline","rtpmapline","fmtps","writeRtpDescription","kind","caps","maxptime","extension","parseRtpEncodingParameters","hasRed","hasUlpfec","ssrcs","primarySsrc","secondarySsrc","flows","apt","encParam","codecPayloadType","rtx","fec","bandwidth","maxBitrate","parseRtcpParameters","rtcpParameters","cname","remoteSsrc","rsize","reducedSize","compound","mux","parseMsid","spec","planB","writeSessionBoilerplate","writeMediaSection","transceiver","iceGatherer","getLocalParameters","dtlsTransport","rtpSender","rtpReceiver","msid","sendEncodingParameters","getDirection","getKind","isRejected","REDUCE_TIME","counter","previousSeconds","build","clusterWorkerId","seconds","worker","isValid","seedValue","workerId","newCharacters","isShortId","msCrypto","dest","getNextValue","_seed_","logging","chromeShim","edgeShim","firefoxShim","safariShim","shimPeerConnection","browserShim","shimGetUserMedia","shimMediaStream","shimSourceObject","shimOnTrack","shimGetSendersWithDtmf","shimReplaceTrack","shimOnAddStream","_ontrack","self","removeEventListener","_ontrackpoly","addEventListener","te","Event","receiver","dispatchEvent","getTracks","getSenders","_senders","origAddStream","origRemoveStream","removeStream","pc","_dtmf","sender","_srcObject","pcConfig","pcConstraints","iceTransportPolicy","iceTransports","generateCertificate","OrigPeerConnection","newIceServers","urls","origGetStats","getStats","selector","successCallback","errorCallback","fixChromeStats_","standardReport","reports","report","standardStats","localcandidate","remotecandidate","names","makeMapStats","successCallbackWrapper_","nativeMethod","opts","nativeAddIceCandidate","constraintsToChrome_","cc","ideal","exact","oldname_","oc","mix","advanced","shimConstraints_","face","facingMode","getSupportedFacingModeLies","getSupportedConstraints","matches","enumerateDevices","devices","some","label","deviceId","shimError_","PermissionDeniedError","ConstraintNotSatisfiedError","constraint","constraintName","getUserMedia_","getUserMediaPromise_","kinds","MediaStreamTrack","getSources","device","groupId","echoCancellation","frameRate","height","width","origGetUserMedia","cs","DOMException","shimRTCPeerConnection","RTCIceGatherer","origMSTEnabled","ev","enabled","RTCRtpSender","replaceTrack","setTrack","sortTracks","filterIceServers","edgeVersion","hasTurn","isString","validTurn","_eventTarget","createDocumentFragment","ontrack","onremovestream","onsignalingstatechange","oniceconnectionstatechange","onicegatheringstatechange","onnegotiationneeded","ondatachannel","canTrickleIceCandidates","localStreams","remoteStreams","getLocalStreams","getRemoteStreams","signalingState","iceConnectionState","iceOptions","gatherPolicy","usingBundle","bundlePolicy","_config","transceivers","_localIceCandidatesBuffer","_emitGatheringStateChange","_emitBufferedCandidates","sections","sdpMLineIndex","every","iceGatheringStateChange","getConfiguration","clonedStream","clone","idx","clonedTrack","_maybeFireNegotiationNeeded","getReceivers","_getCommonCapabilities","localCapabilities","remoteCapabilities","commonCapabilities","findCodecByPayloadType","rtxCapabilityMatches","lRtx","rRtx","lCodecs","rCodecs","lCodec","rCodec","lHeaderExtension","rHeaderExtension","_createIceAndDtlsTransports","iceTransport","RTCIceTransport","onlocalcandidate","evt","sdpMid","cand","_pendingOffer","onicestatechange","_updateConnectionState","RTCDtlsTransport","ondtlsstatechange","_disposeIceAndDtlsTransports","ondtlssttatechange","_transceive","recv","encodings","recvEncodingParameters","receive","isIceLite","rejected","isDatachannel","remoteIceParameters","remoteDtlsParameters","_updateSignalingState","hasCallback","receiverList","remoteMsid","isComplete","cands","setRemoteCandidates","RTCRtpReceiver","getCapabilities","addTrack","default","setTransport","sid","trackEvent","states","closed","connecting","checking","completed","failed","disconnected","new","offerOptions","numAudioTracks","numVideoTracks","reduce","numTracks","offerToReceiveAudio","offerToReceiveVideo","localStream","wantReceive","localTrack","hasRtx","addRemoteCandidate","mLineIndex","fixStatsType","inboundrtp","outboundrtp","candidatepair","mozSrcObject","mozRTCPeerConnection","newServer","credential","mozRTCSessionDescription","mozRTCIceCandidate","modernStatsTypes","nativeGetStats","onSucc","onErr","assign","NotSupportedError","SecurityError","constraintsToFF37_","infos","orgEnumerateDevices","_onaddstream","_onaddstreampoly","_streams","errcb","global","noGlobal","getProto","getPrototypeOf","class2type","hasOwn","fnToString","ObjectFunctionString","support","DOMEval","rtrim","rmsPrefix","rdashAlpha","fcamelCase","letter","jquery","toArray","elems","prevObject","elem","eq","copyIsArray","deep","isFunction","isPlainObject","expando","isReady","isWindow","isNumeric","Ctor","isEmptyObject","globalEval","camelCase","isArrayLike","makeArray","inArray","second","grep","invert","callbackInverse","callbackExpect","proxy","Sizzle","Expr","getText","isXML","select","outermostContext","sortInput","hasDuplicate","setDocument","docElem","documentIsHTML","rbuggyQSA","rbuggyMatches","contains","preferredDoc","dirruns","classCache","createCache","tokenCache","compilerCache","sortOrder","push_native","list","booleans","identifier","pseudos","rwhitespace","rcomma","rcombinators","rattributeQuotes","rpseudo","ridentifier","matchExpr","rinputs","rheader","rnative","rquickExpr","rsibling","runescape","funescape","_","escaped","escapedWhitespace","rcssescape","fcssescape","ch","asCodePoint","unloadHandler","disabledAncestor","addCombinator","disabled","els","nid","groups","newSelector","newContext","getElementById","getElementsByClassName","qsa","getAttribute","toSelector","testContext","querySelectorAll","qsaError","removeAttribute","cacheLength","markFunction","assert","addHandle","attrs","attrHandle","siblingCheck","cur","sourceIndex","nextSibling","createInputPseudo","createButtonPseudo","createDisabledPseudo","isDisabled","createPositionalPseudo","argument","matchIndexes","hasCompare","subWindow","top","attachEvent","className","createComment","getById","getElementsByName","attrId","getAttributeNode","innerHTML","matchesSelector","webkitMatchesSelector","mozMatchesSelector","oMatchesSelector","msMatchesSelector","disconnectedMatch","compareDocumentPosition","adown","bup","compare","sortDetached","aup","ap","bp","elements","specified","sel","uniqueSort","duplicates","detectDuplicates","sortStable","textContent","firstChild","selectors","createPseudo","preFilter","excess","unquoted","nodeNameSelector","check","what","simple","ofType","uniqueCache","outerCache","nodeIndex","useCache","lastChild","uniqueID","pseudo","setFilters","matched","matcher","unmatched","innerText","lang","elemLang","activeElement","hasFocus","tabIndex","checked","selected","selectedIndex","radio","checkbox","image","submit","parseOnly","soFar","preFilters","cached","combinator","skip","checkNonElements","doneName","oldCache","newCache","elementMatcher","matchers","multipleContexts","contexts","condense","newUnmatched","mapped","setMatcher","postFilter","postFinder","postSelector","preMap","postMap","preexisting","matcherIn","matcherOut","matcherFromTokens","checkContext","leadingRelative","implicitRelative","matchContext","matchAnyContext","matcherFromGroupMatchers","elementMatchers","setMatchers","bySet","byElement","superMatcher","outermost","matchedCount","setMatched","contextBackup","dirrunsUnique","compiled","defaultValue","isXMLDoc","escapeSelector","until","siblings","rneedsContext","needsContext","rsingleTag","risSimple","winnow","qualifier","not","rootjQuery","parseHTML","rparentsprev","guaranteedUnique","contents","prev","targets","prevAll","addBack","sibling","parents","parentsUntil","nextAll","nextUntil","prevUntil","contentDocument","rnothtmlwhite","createOptions","flag","Callbacks","firing","memory","fired","locked","firingIndex","stopOnFalse","disable","lock","fireWith","Identity","Thrower","adoptValue","noValue","Deferred","tuples","always","deferred","pipe","fns","newDefer","tuple","returned","progress","onFulfilled","onProgress","maxDepth","depth","special","mightThrow","notifyWith","resolveWith","exceptionHook","stackTrace","rejectWith","getStackHook","stateString","singleValue","remaining","resolveContexts","resolveValues","master","updateFunc","rerrorNames","readyException","readyList","readyWait","wait","doScroll","access","chainable","emptyGet","bulk","acceptData","owner","Data","configurable","hasData","dataPriv","dataUser","rbrace","rmultiDash","getData","dataAttr","removeData","_data","_removeData","dequeue","startLength","hooks","_queueHooks","setter","clearQueue","count","defer","pnum","rcssNum","cssExpand","isHiddenWithinTree","display","swap","adjustCSS","valueParts","tween","adjusted","scale","maxIterations","currentValue","initial","unit","cssNumber","initialInUnit","defaultDisplayMap","getDefaultDisplay","showHide","show","hide","toggle","rcheckableType","rtagName","rscriptType","wrapMap","thead","col","tr","td","_default","optgroup","tbody","tfoot","colgroup","caption","th","getAll","setGlobalEval","refElements","rhtml","buildFragment","selection","ignored","nodes","createTextNode","htmlPrefilter","div","checkClone","cloneNode","noCloneChecked","rkeyEvent","rmouseEvent","rtypenamespace","returnTrue","returnFalse","safeActiveElement","types","one","origFn","handleObjIn","eventHandle","handleObj","origType","elemData","handle","triggered","dispatch","delegateType","bindType","namespace","delegateCount","setup","mappedTypes","origCount","teardown","removeEvent","nativeEvent","fix","handlerQueue","delegateTarget","preDispatch","isPropagationStopped","currentTarget","isImmediatePropagationStopped","rnamespace","preventDefault","stopPropagation","postDispatch","matchedHandlers","matchedSelectors","button","addProp","hook","originalEvent","writable","noBubble","focus","trigger","blur","click","beforeunload","returnValue","props","isDefaultPrevented","defaultPrevented","relatedTarget","isSimulated","stopImmediatePropagation","altKey","bubbles","cancelable","changedTouches","ctrlKey","detail","eventPhase","metaKey","pageX","pageY","shiftKey","charCode","keyCode","buttons","clientX","clientY","offsetX","offsetY","pointerId","pointerType","screenX","screenY","targetTouches","toElement","touches","which","mouseenter","mouseleave","pointerenter","pointerleave","orig","related","rxhtmlTag","rnoInnerhtml","rchecked","rscriptTypeMasked","rcleanScript","manipulationTarget","disableScript","restoreScript","cloneCopyEvent","pdataOld","pdataCur","udataOld","udataCur","fixInput","domManip","collection","hasScripts","iNoClone","_evalUrl","keepData","cleanData","dataAndEvents","deepDataAndEvents","srcElements","destElements","inPage","detach","insertBefore","before","after","replaceWith","replaceChild","appendTo","prependTo","insertAfter","original","rmargin","rnumnonpx","getStyles","opener","getComputedStyle","computeStyleTests","cssText","divStyle","pixelPositionVal","reliableMarginLeftVal","marginLeft","boxSizingReliableVal","marginRight","pixelMarginRightVal","backgroundClip","clearCloneStyle","pixelPosition","boxSizingReliable","pixelMarginRight","reliableMarginLeft","curCSS","computed","maxWidth","getPropertyValue","addGetHookIf","conditionFn","hookFn","rdisplayswap","rcustomProp","cssShow","visibility","cssNormalTransform","letterSpacing","fontWeight","cssPrefixes","emptyStyle","vendorPropName","capName","finalPropName","cssProps","setPositiveNumber","subtract","augmentWidthOrHeight","extra","isBorderBox","getWidthOrHeight","valueIsBorderBox","cssHooks","opacity","origName","isCustomProp","setProperty","getClientRects","getBoundingClientRect","left","margin","border","suffix","expand","expanded","Tween","easing","propHooks","percent","eased","fx","scrollTop","scrollLeft","linear","swing","cos","PI","fxNow","inProgress","rfxtypes","rrun","schedule","hidden","requestAnimationFrame","tick","createFxNow","genFx","includeWidth","createTween","animation","Animation","tweeners","defaultPrefilter","oldfire","propTween","restoreDisplay","isBox","anim","dataShow","unqueued","overflow","overflowX","overflowY","propFilter","specialEasing","properties","prefilters","startTime","tweens","originalProperties","originalOptions","gotoEnd","tweener","prefilter","speed","speeds","fadeTo","animate","optall","doAnimation","finish","stopQueue","timers","cssFn","slideDown","slideUp","slideToggle","fadeIn","fadeOut","fadeToggle","slow","fast","checkOn","optSelected","radioValue","boolHook","removeAttr","nType","attrHooks","attrNames","getter","lowercaseName","rfocusable","rclickable","removeProp","propFix","tabindex","stripAndCollapse","getClass","addClass","classes","curValue","clazz","finalValue","removeClass","toggleClass","stateVal","classNames","hasClass","rreturn","valHooks","optionSet","rfocusMorph","onlyHandlers","bubbleType","ontype","eventPath","isTrigger","parentWindow","simulate","triggerHandler","hover","fnOver","fnOut","focusin","attaches","rquery","parseXML","rbracket","rCRLF","rsubmitterTypes","rsubmittable","buildParams","traditional","valueOrFunction","serialize","serializeArray","r20","rhash","rantiCache","rheaders","rlocalProtocol","rnoContent","rprotocol","allTypes","originAnchor","addToPrefiltersOrTransports","structure","dataTypeExpression","dataTypes","inspectPrefiltersOrTransports","jqXHR","inspected","seekingTransport","inspect","prefilterOrFactory","dataTypeOrTransport","ajaxExtend","flatOptions","ajaxSettings","ajaxHandleResponses","ct","finalDataType","firstDataType","mimeType","converters","ajaxConvert","isSuccess","conv2","conv","responseFields","dataFilter","throws","lastModified","etag","isLocal","processData","accepts","ajaxSetup","ajaxPrefilter","ajaxTransport","cacheURL","responseHeadersString","responseHeaders","timeoutTimer","urlAnchor","fireGlobals","uncached","callbackContext","globalEventContext","completeDeferred","requestHeaders","requestHeadersNames","strAbort","getAllResponseHeaders","statusText","finalText","hasContent","ifModified","nativeStatusText","modified","getJSON","getScript","wrapAll","firstElementChild","wrapInner","unwrap","visible","offsetWidth","offsetHeight","xhrSuccessStatus","xhrSupported","cors","xhrFields","onabort","scriptCharset","oldCallbacks","rjsonp","jsonpCallback","originalSettings","callbackName","overwritten","responseContainer","jsonProp","createHTMLDocument","keepScripts","animated","setOffset","curPosition","curLeft","curCSSTop","curTop","curOffset","curCSSLeft","calculatePosition","curElem","using","rect","win","pageYOffset","clientTop","pageXOffset","clientLeft","offsetParent","parentOffset","scrollTo","Height","Width","defaultExtra","funcName","unbind","delegate","undelegate","holdReady","hold","parseJSON","define","_jQuery","_$","noConflict"],"mappings":"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","file":"stage.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"stage\"] = factory();\n\telse\n\t\troot[\"stage\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 59);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap cb92b01bca4f8aba5d41","module.exports = global[\"$\"] = require(\"-!/Users/cci/repository/nodefony-stage/node_modules/expose-loader/index.js?jQuery!/Users/cci/repository/nodefony-stage/node_modules/babel-loader/lib/index.js??ref--8-0!./jquery.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/jquery/dist/jquery.js\n// module id = 0\n// module chunks = 0","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar logDisabled_ = true;\n\n// Utility methods.\nvar utils = {\n  disableLog: function(bool) {\n    if (typeof bool !== 'boolean') {\n      return new Error('Argument type: ' + typeof bool +\n          '. Please use a boolean.');\n    }\n    logDisabled_ = bool;\n    return (bool) ? 'adapter.js logging disabled' :\n        'adapter.js logging enabled';\n  },\n\n  log: function() {\n    if (typeof window === 'object') {\n      if (logDisabled_) {\n        return;\n      }\n      if (typeof console !== 'undefined' && typeof console.log === 'function') {\n        console.log.apply(console, arguments);\n      }\n    }\n  },\n\n  /**\n   * Extract browser version out of the provided user agent string.\n   *\n   * @param {!string} uastring userAgent string.\n   * @param {!string} expr Regular expression used as match criteria.\n   * @param {!number} pos position in the version string to be returned.\n   * @return {!number} browser version.\n   */\n  extractVersion: function(uastring, expr, pos) {\n    var match = uastring.match(expr);\n    return match && match.length >= pos && parseInt(match[pos], 10);\n  },\n\n  /**\n   * Browser detector.\n   *\n   * @return {object} result containing browser and version\n   *     properties.\n   */\n  detectBrowser: function() {\n    // Returned result object.\n    var result = {};\n    result.browser = null;\n    result.version = null;\n\n    // Fail early if it's not a browser\n    if (typeof window === 'undefined' || !window.navigator) {\n      result.browser = 'Not a browser.';\n      return result;\n    }\n\n    // Firefox.\n    if (navigator.mozGetUserMedia) {\n      result.browser = 'firefox';\n      result.version = this.extractVersion(navigator.userAgent,\n          /Firefox\\/(\\d+)\\./, 1);\n    } else if (navigator.webkitGetUserMedia) {\n      // Chrome, Chromium, Webview, Opera, all use the chrome shim for now\n      if (window.webkitRTCPeerConnection) {\n        result.browser = 'chrome';\n        result.version = this.extractVersion(navigator.userAgent,\n          /Chrom(e|ium)\\/(\\d+)\\./, 2);\n      } else { // Safari (in an unpublished version) or unknown webkit-based.\n        if (navigator.userAgent.match(/Version\\/(\\d+).(\\d+)/)) {\n          result.browser = 'safari';\n          result.version = this.extractVersion(navigator.userAgent,\n            /AppleWebKit\\/(\\d+)\\./, 1);\n        } else { // unknown webkit-based browser.\n          result.browser = 'Unsupported webkit-based browser ' +\n              'with GUM support but no WebRTC support.';\n          return result;\n        }\n      }\n    } else if (navigator.mediaDevices &&\n        navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) { // Edge.\n      result.browser = 'edge';\n      result.version = this.extractVersion(navigator.userAgent,\n          /Edge\\/(\\d+).(\\d+)$/, 2);\n    } else if (navigator.mediaDevices &&\n        navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) {\n        // Safari, with webkitGetUserMedia removed.\n      result.browser = 'safari';\n      result.version = this.extractVersion(navigator.userAgent,\n          /AppleWebKit\\/(\\d+)\\./, 1);\n    } else { // Default fallthrough: not supported.\n      result.browser = 'Not a supported browser.';\n      return result;\n    }\n\n    return result;\n  },\n\n  // shimCreateObjectURL must be called before shimSourceObject to avoid loop.\n\n  shimCreateObjectURL: function() {\n    if (!(typeof window === 'object' && window.HTMLMediaElement &&\n          'srcObject' in window.HTMLMediaElement.prototype)) {\n      // Only shim CreateObjectURL using srcObject if srcObject exists.\n      return undefined;\n    }\n\n    var nativeCreateObjectURL = URL.createObjectURL.bind(URL);\n    var nativeRevokeObjectURL = URL.revokeObjectURL.bind(URL);\n    var streams = new Map(), newId = 0;\n\n    URL.createObjectURL = function(stream) {\n      if ('getTracks' in stream) {\n        var url = 'polyblob:' + (++newId);\n        streams.set(url, stream);\n        console.log('URL.createObjectURL(stream) is deprecated! ' +\n                    'Use elem.srcObject = stream instead!');\n        return url;\n      }\n      return nativeCreateObjectURL(stream);\n    };\n    URL.revokeObjectURL = function(url) {\n      nativeRevokeObjectURL(url);\n      streams.delete(url);\n    };\n\n    var dsc = Object.getOwnPropertyDescriptor(window.HTMLMediaElement.prototype,\n                                              'src');\n    Object.defineProperty(window.HTMLMediaElement.prototype, 'src', {\n      get: function() {\n        return dsc.get.apply(this);\n      },\n      set: function(url) {\n        this.srcObject = streams.get(url) || null;\n        return dsc.set.apply(this, [url]);\n      }\n    });\n\n    var nativeSetAttribute = HTMLMediaElement.prototype.setAttribute;\n    HTMLMediaElement.prototype.setAttribute = function() {\n      if (arguments.length === 2 &&\n          ('' + arguments[0]).toLowerCase() === 'src') {\n        this.srcObject = streams.get(arguments[1]) || null;\n      }\n      return nativeSetAttribute.apply(this, arguments);\n    };\n  }\n};\n\n// Export.\nmodule.exports = {\n  log: utils.log,\n  disableLog: utils.disableLog,\n  browserDetails: utils.detectBrowser(),\n  extractVersion: utils.extractVersion,\n  shimCreateObjectURL: utils.shimCreateObjectURL,\n  detectBrowser: utils.detectBrowser.bind(utils)\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/webrtc-adapter/src/js/utils.js","'use strict';\n\nvar randomFromSeed = require('./random/random-from-seed');\n\nvar ORIGINAL = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-';\nvar alphabet;\nvar previousSeed;\n\nvar shuffled;\n\nfunction reset() {\n    shuffled = false;\n}\n\nfunction setCharacters(_alphabet_) {\n    if (!_alphabet_) {\n        if (alphabet !== ORIGINAL) {\n            alphabet = ORIGINAL;\n            reset();\n        }\n        return;\n    }\n\n    if (_alphabet_ === alphabet) {\n        return;\n    }\n\n    if (_alphabet_.length !== ORIGINAL.length) {\n        throw new Error('Custom alphabet for shortid must be ' + ORIGINAL.length + ' unique characters. You submitted ' + _alphabet_.length + ' characters: ' + _alphabet_);\n    }\n\n    var unique = _alphabet_.split('').filter(function(item, ind, arr){\n       return ind !== arr.lastIndexOf(item);\n    });\n\n    if (unique.length) {\n        throw new Error('Custom alphabet for shortid must be ' + ORIGINAL.length + ' unique characters. These characters were not unique: ' + unique.join(', '));\n    }\n\n    alphabet = _alphabet_;\n    reset();\n}\n\nfunction characters(_alphabet_) {\n    setCharacters(_alphabet_);\n    return alphabet;\n}\n\nfunction setSeed(seed) {\n    randomFromSeed.seed(seed);\n    if (previousSeed !== seed) {\n        reset();\n        previousSeed = seed;\n    }\n}\n\nfunction shuffle() {\n    if (!alphabet) {\n        setCharacters(ORIGINAL);\n    }\n\n    var sourceArray = alphabet.split('');\n    var targetArray = [];\n    var r = randomFromSeed.nextValue();\n    var characterIndex;\n\n    while (sourceArray.length > 0) {\n        r = randomFromSeed.nextValue();\n        characterIndex = Math.floor(r * sourceArray.length);\n        targetArray.push(sourceArray.splice(characterIndex, 1)[0]);\n    }\n    return targetArray.join('');\n}\n\nfunction getShuffled() {\n    if (shuffled) {\n        return shuffled;\n    }\n    shuffled = shuffle();\n    return shuffled;\n}\n\n/**\n * lookup shuffled letter\n * @param index\n * @returns {string}\n */\nfunction lookup(index) {\n    var alphabetShuffled = getShuffled();\n    return alphabetShuffled[index];\n}\n\nmodule.exports = {\n    characters: characters,\n    seed: setSeed,\n    lookup: lookup,\n    shuffled: getShuffled\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/shortid/lib/alphabet.js","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// Split a filename into [root, dir, basename, ext], unix version\n// 'root' is just a slash, or nothing.\nvar splitPathRe =\n    /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\nvar splitPath = function(filename) {\n  return splitPathRe.exec(filename).slice(1);\n};\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function(path) {\n  var result = splitPath(path),\n      root = result[0],\n      dir = result[1];\n\n  if (!root && !dir) {\n    // No dirname whatsoever\n    return '.';\n  }\n\n  if (dir) {\n    // It has a dirname, strip trailing slash\n    dir = dir.substr(0, dir.length - 1);\n  }\n\n  return root + dir;\n};\n\n\nexports.basename = function(path, ext) {\n  var f = splitPath(path)[2];\n  // TODO: make this comparison case-insensitive on windows?\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\n\nexports.extname = function(path) {\n  return splitPath(path)[3];\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n\n\n\n// WEBPACK FOOTER //\n// ./~/path-browserify/index.js","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory((function webpackLoadOptionalExternalModule() { try { return require(\"fs\"); } catch(e) {} }()), require(\"path\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"fs\", \"path\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Twig\"] = factory((function webpackLoadOptionalExternalModule() { try { return require(\"fs\"); } catch(e) {} }()), require(\"path\"));\n\telse\n\t\troot[\"Twig\"] = factory(root[\"fs\"], root[\"path\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_19__, __WEBPACK_EXTERNAL_MODULE_20__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * Twig.js\n\t *\n\t * @copyright 2011-2016 John Roepke and the Twig.js Contributors\n\t * @license   Available under the BSD 2-Clause License\n\t * @link      https://github.com/twigjs/twig.js\n\t */\n\n\tvar Twig = {\n\t    VERSION: '0.10.2'\n\t};\n\n\t__webpack_require__(1)(Twig);\n\t__webpack_require__(2)(Twig);\n\t__webpack_require__(3)(Twig);\n\t__webpack_require__(5)(Twig);\n\t__webpack_require__(6)(Twig);\n\t__webpack_require__(7)(Twig);\n\t__webpack_require__(17)(Twig);\n\t__webpack_require__(18)(Twig);\n\t__webpack_require__(21)(Twig);\n\t__webpack_require__(22)(Twig);\n\t__webpack_require__(23)(Twig);\n\t__webpack_require__(24)(Twig);\n\t__webpack_require__(25)(Twig);\n\t__webpack_require__(26)(Twig);\n\t__webpack_require__(27)(Twig);\n\n\tmodule.exports = Twig.exports;\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t// ## twig.core.js\n\t//\n\t// This file handles template level tokenizing, compiling and parsing.\n\tmodule.exports = function (Twig) {\n\t    \"use strict\";\n\n\t    Twig.trace = false;\n\t    Twig.debug = false;\n\n\t    // Default caching to true for the improved performance it offers\n\t    Twig.cache = true;\n\n\t    Twig.noop = function() {};\n\n\t    Twig.placeholders = {\n\t        parent: \"{{|PARENT|}}\"\n\t    };\n\n\t    /**\n\t     * Fallback for Array.indexOf for IE8 et al\n\t     */\n\t    Twig.indexOf = function (arr, searchElement /*, fromIndex */ ) {\n\t        if (Array.prototype.hasOwnProperty(\"indexOf\")) {\n\t            return arr.indexOf(searchElement);\n\t        }\n\t        if (arr === void 0 || arr === null) {\n\t            throw new TypeError();\n\t        }\n\t        var t = Object(arr);\n\t        var len = t.length >>> 0;\n\t        if (len === 0) {\n\t            return -1;\n\t        }\n\t        var n = 0;\n\t        if (arguments.length > 0) {\n\t            n = Number(arguments[1]);\n\t            if (n !== n) { // shortcut for verifying if it's NaN\n\t                n = 0;\n\t            } else if (n !== 0 && n !== Infinity && n !== -Infinity) {\n\t                n = (n > 0 || -1) * Math.floor(Math.abs(n));\n\t            }\n\t        }\n\t        if (n >= len) {\n\t            // console.log(\"indexOf not found1 \", JSON.stringify(searchElement), JSON.stringify(arr));\n\t            return -1;\n\t        }\n\t        var k = n >= 0 ? n : Math.max(len - Math.abs(n), 0);\n\t        for (; k < len; k++) {\n\t            if (k in t && t[k] === searchElement) {\n\t                return k;\n\t            }\n\t        }\n\t        if (arr == searchElement) {\n\t            return 0;\n\t        }\n\t        // console.log(\"indexOf not found2 \", JSON.stringify(searchElement), JSON.stringify(arr));\n\n\t        return -1;\n\t    }\n\n\t    Twig.forEach = function (arr, callback, thisArg) {\n\t        if (Array.prototype.forEach ) {\n\t            return arr.forEach(callback, thisArg);\n\t        }\n\n\t        var T, k;\n\n\t        if ( arr == null ) {\n\t          throw new TypeError( \" this is null or not defined\" );\n\t        }\n\n\t        // 1. Let O be the result of calling ToObject passing the |this| value as the argument.\n\t        var O = Object(arr);\n\n\t        // 2. Let lenValue be the result of calling the Get internal method of O with the argument \"length\".\n\t        // 3. Let len be ToUint32(lenValue).\n\t        var len = O.length >>> 0; // Hack to convert O.length to a UInt32\n\n\t        // 4. If IsCallable(callback) is false, throw a TypeError exception.\n\t        // See: http://es5.github.com/#x9.11\n\t        if ( {}.toString.call(callback) != \"[object Function]\" ) {\n\t          throw new TypeError( callback + \" is not a function\" );\n\t        }\n\n\t        // 5. If thisArg was supplied, let T be thisArg; else let T be undefined.\n\t        if ( thisArg ) {\n\t          T = thisArg;\n\t        }\n\n\t        // 6. Let k be 0\n\t        k = 0;\n\n\t        // 7. Repeat, while k < len\n\t        while( k < len ) {\n\n\t          var kValue;\n\n\t          // a. Let Pk be ToString(k).\n\t          //   This is implicit for LHS operands of the in operator\n\t          // b. Let kPresent be the result of calling the HasProperty internal method of O with argument Pk.\n\t          //   This step can be combined with c\n\t          // c. If kPresent is true, then\n\t          if ( k in O ) {\n\n\t            // i. Let kValue be the result of calling the Get internal method of O with argument Pk.\n\t            kValue = O[ k ];\n\n\t            // ii. Call the Call internal method of callback with T as the this value and\n\t            // argument list containing kValue, k, and O.\n\t            callback.call( T, kValue, k, O );\n\t          }\n\t          // d. Increase k by 1.\n\t          k++;\n\t        }\n\t        // 8. return undefined\n\t    };\n\n\t    Twig.merge = function(target, source, onlyChanged) {\n\t        Twig.forEach(Object.keys(source), function (key) {\n\t            if (onlyChanged && !(key in target)) {\n\t                return;\n\t            }\n\n\t            target[key] = source[key]\n\t        });\n\n\t        return target;\n\t    };\n\n\t    /**\n\t     * Exception thrown by twig.js.\n\t     */\n\t    Twig.Error = function(message) {\n\t       this.message = message;\n\t       this.name = \"TwigException\";\n\t       this.type = \"TwigException\";\n\t    };\n\n\t    /**\n\t     * Get the string representation of a Twig error.\n\t     */\n\t    Twig.Error.prototype.toString = function() {\n\t        var output = this.name + \": \" + this.message;\n\n\t        return output;\n\t    };\n\n\t    /**\n\t     * Wrapper for logging to the console.\n\t     */\n\t    Twig.log = {\n\t        trace: function() {if (Twig.trace && console) {console.log(Array.prototype.slice.call(arguments));}},\n\t        debug: function() {if (Twig.debug && console) {console.log(Array.prototype.slice.call(arguments));}}\n\t    };\n\n\n\t    if (typeof console !== \"undefined\") {\n\t        if (typeof console.error !== \"undefined\") {\n\t            Twig.log.error = function() {\n\t                console.error.apply(console, arguments);\n\t            }\n\t        } else if (typeof console.log !== \"undefined\") {\n\t            Twig.log.error = function() {\n\t                console.log.apply(console, arguments);\n\t            }\n\t        }\n\t    } else {\n\t        Twig.log.error = function(){};\n\t    }\n\n\t    /**\n\t     * Wrapper for child context objects in Twig.\n\t     *\n\t     * @param {Object} context Values to initialize the context with.\n\t     */\n\t    Twig.ChildContext = function(context) {\n\t        var ChildContext = function ChildContext() {};\n\t        ChildContext.prototype = context;\n\t        return new ChildContext();\n\t    };\n\n\t    /**\n\t     * Container for methods related to handling high level template tokens\n\t     *      (for example: {{ expression }}, {% logic %}, {# comment #}, raw data)\n\t     */\n\t    Twig.token = {};\n\n\t    /**\n\t     * Token types.\n\t     */\n\t    Twig.token.type = {\n\t        output:                 'output',\n\t        logic:                  'logic',\n\t        comment:                'comment',\n\t        raw:                    'raw',\n\t        output_whitespace_pre:  'output_whitespace_pre',\n\t        output_whitespace_post: 'output_whitespace_post',\n\t        output_whitespace_both: 'output_whitespace_both',\n\t        logic_whitespace_pre:   'logic_whitespace_pre',\n\t        logic_whitespace_post:  'logic_whitespace_post',\n\t        logic_whitespace_both:  'logic_whitespace_both'\n\t    };\n\n\t    /**\n\t     * Token syntax definitions.\n\t     */\n\t    Twig.token.definitions = [\n\t        {\n\t            type: Twig.token.type.raw,\n\t            open: '{% raw %}',\n\t            close: '{% endraw %}'\n\t        },\n\t        {\n\t            type: Twig.token.type.raw,\n\t            open: '{% verbatim %}',\n\t            close: '{% endverbatim %}'\n\t        },\n\t        // *Whitespace type tokens*\n\t        //\n\t        // These typically take the form `{{- expression -}}` or `{{- expression }}` or `{{ expression -}}`.\n\t        {\n\t            type: Twig.token.type.output_whitespace_pre,\n\t            open: '{{-',\n\t            close: '}}'\n\t        },\n\t        {\n\t            type: Twig.token.type.output_whitespace_post,\n\t            open: '{{',\n\t            close: '-}}'\n\t        },\n\t        {\n\t            type: Twig.token.type.output_whitespace_both,\n\t            open: '{{-',\n\t            close: '-}}'\n\t        },\n\t        {\n\t            type: Twig.token.type.logic_whitespace_pre,\n\t            open: '{%-',\n\t            close: '%}'\n\t        },\n\t        {\n\t            type: Twig.token.type.logic_whitespace_post,\n\t            open: '{%',\n\t            close: '-%}'\n\t        },\n\t        {\n\t            type: Twig.token.type.logic_whitespace_both,\n\t            open: '{%-',\n\t            close: '-%}'\n\t        },\n\t        // *Output type tokens*\n\t        //\n\t        // These typically take the form `{{ expression }}`.\n\t        {\n\t            type: Twig.token.type.output,\n\t            open: '{{',\n\t            close: '}}'\n\t        },\n\t        // *Logic type tokens*\n\t        //\n\t        // These typically take a form like `{% if expression %}` or `{% endif %}`\n\t        {\n\t            type: Twig.token.type.logic,\n\t            open: '{%',\n\t            close: '%}'\n\t        },\n\t        // *Comment type tokens*\n\t        //\n\t        // These take the form `{# anything #}`\n\t        {\n\t            type: Twig.token.type.comment,\n\t            open: '{#',\n\t            close: '#}'\n\t        }\n\t    ];\n\n\n\t    /**\n\t     * What characters start \"strings\" in token definitions. We need this to ignore token close\n\t     * strings inside an expression.\n\t     */\n\t    Twig.token.strings = ['\"', \"'\"];\n\n\t    Twig.token.findStart = function (template) {\n\t        var output = {\n\t                position: null,\n\t                close_position: null,\n\t                def: null\n\t            },\n\t            i,\n\t            token_template,\n\t            first_key_position,\n\t            close_key_position;\n\n\t        for (i=0;i<Twig.token.definitions.length;i++) {\n\t            token_template = Twig.token.definitions[i];\n\t            first_key_position = template.indexOf(token_template.open);\n\t            close_key_position = template.indexOf(token_template.close);\n\n\t            Twig.log.trace(\"Twig.token.findStart: \", \"Searching for \", token_template.open, \" found at \", first_key_position);\n\n\t            //Special handling for mismatched tokens\n\t            if (first_key_position >= 0) {\n\t                //This token matches the template\n\t                if (token_template.open.length !== token_template.close.length) {\n\t                    //This token has mismatched closing and opening tags\n\t                    if (close_key_position < 0) {\n\t                        //This token's closing tag does not match the template\n\t                        continue;\n\t                    }\n\t                }\n\t            }\n\t            // Does this token occur before any other types?\n\t            if (first_key_position >= 0 && (output.position === null || first_key_position < output.position)) {\n\t                output.position = first_key_position;\n\t                output.def = token_template;\n\t                output.close_position = close_key_position;\n\t            } else if (first_key_position >= 0 && output.position !== null && first_key_position === output.position) {\n\t                /*This token exactly matches another token,\n\t                greedily match to check if this token has a greater specificity*/\n\t                if (token_template.open.length > output.def.open.length) {\n\t                    //This token's opening tag is more specific than the previous match\n\t                    output.position = first_key_position;\n\t                    output.def = token_template;\n\t                    output.close_position = close_key_position;\n\t                } else if (token_template.open.length === output.def.open.length) {\n\t                    if (token_template.close.length > output.def.close.length) {\n\t                        //This token's opening tag is as specific as the previous match,\n\t                        //but the closing tag has greater specificity\n\t                        if (close_key_position >= 0 && close_key_position < output.close_position) {\n\t                            //This token's closing tag exists in the template,\n\t                            //and it occurs sooner than the previous match\n\t                            output.position = first_key_position;\n\t                            output.def = token_template;\n\t                            output.close_position = close_key_position;\n\t                        }\n\t                    } else if (close_key_position >= 0 && close_key_position < output.close_position) {\n\t                        //This token's closing tag is not more specific than the previous match,\n\t                        //but it occurs sooner than the previous match\n\t                        output.position = first_key_position;\n\t                        output.def = token_template;\n\t                        output.close_position = close_key_position;\n\t                    }\n\t                }\n\t            }\n\t        }\n\n\t        delete output['close_position'];\n\n\t        return output;\n\t    };\n\n\t    Twig.token.findEnd = function (template, token_def, start) {\n\t        var end = null,\n\t            found = false,\n\t            offset = 0,\n\n\t            // String position variables\n\t            str_pos = null,\n\t            str_found = null,\n\t            pos = null,\n\t            end_offset = null,\n\t            this_str_pos = null,\n\t            end_str_pos = null,\n\n\t            // For loop variables\n\t            i,\n\t            l;\n\n\t        while (!found) {\n\t            str_pos = null;\n\t            str_found = null;\n\t            pos = template.indexOf(token_def.close, offset);\n\n\t            if (pos >= 0) {\n\t                end = pos;\n\t                found = true;\n\t            } else {\n\t                // throw an exception\n\t                throw new Twig.Error(\"Unable to find closing bracket '\" + token_def.close +\n\t                                \"'\" + \" opened near template position \" + start);\n\t            }\n\n\t            // Ignore quotes within comments; just look for the next comment close sequence,\n\t            // regardless of what comes before it. https://github.com/justjohn/twig.js/issues/95\n\t            if (token_def.type === Twig.token.type.comment) {\n\t              break;\n\t            }\n\t            // Ignore quotes within raw tag\n\t            // Fixes #283\n\t            if (token_def.type === Twig.token.type.raw) {\n\t                break;\n\t            }\n\n\t            l = Twig.token.strings.length;\n\t            for (i = 0; i < l; i += 1) {\n\t                this_str_pos = template.indexOf(Twig.token.strings[i], offset);\n\n\t                if (this_str_pos > 0 && this_str_pos < pos &&\n\t                        (str_pos === null || this_str_pos < str_pos)) {\n\t                    str_pos = this_str_pos;\n\t                    str_found = Twig.token.strings[i];\n\t                }\n\t            }\n\n\t            // We found a string before the end of the token, now find the string's end and set the search offset to it\n\t            if (str_pos !== null) {\n\t                end_offset = str_pos + 1;\n\t                end = null;\n\t                found = false;\n\t                while (true) {\n\t                    end_str_pos = template.indexOf(str_found, end_offset);\n\t                    if (end_str_pos < 0) {\n\t                        throw \"Unclosed string in template\";\n\t                    }\n\t                    // Ignore escaped quotes\n\t                    if (template.substr(end_str_pos - 1, 1) !== \"\\\\\") {\n\t                        offset = end_str_pos + 1;\n\t                        break;\n\t                    } else {\n\t                        end_offset = end_str_pos + 1;\n\t                    }\n\t                }\n\t            }\n\t        }\n\t        return end;\n\t    };\n\n\t    /**\n\t     * Convert a template into high-level tokens.\n\t     */\n\t    Twig.tokenize = function (template) {\n\t        var tokens = [],\n\t            // An offset for reporting errors locations in the template.\n\t            error_offset = 0,\n\n\t            // The start and type of the first token found in the template.\n\t            found_token = null,\n\t            // The end position of the matched token.\n\t            end = null;\n\n\t        while (template.length > 0) {\n\t            // Find the first occurance of any token type in the template\n\t            found_token = Twig.token.findStart(template);\n\n\t            Twig.log.trace(\"Twig.tokenize: \", \"Found token: \", found_token);\n\n\t            if (found_token.position !== null) {\n\t                // Add a raw type token for anything before the start of the token\n\t                if (found_token.position > 0) {\n\t                    tokens.push({\n\t                        type: Twig.token.type.raw,\n\t                        value: template.substring(0, found_token.position)\n\t                    });\n\t                }\n\t                template = template.substr(found_token.position + found_token.def.open.length);\n\t                error_offset += found_token.position + found_token.def.open.length;\n\n\t                // Find the end of the token\n\t                end = Twig.token.findEnd(template, found_token.def, error_offset);\n\n\t                Twig.log.trace(\"Twig.tokenize: \", \"Token ends at \", end);\n\n\t                tokens.push({\n\t                    type:  found_token.def.type,\n\t                    value: template.substring(0, end).trim()\n\t                });\n\n\t                if (template.substr( end + found_token.def.close.length, 1 ) === \"\\n\") {\n\t                    switch (found_token.def.type) {\n\t                        case \"logic_whitespace_pre\":\n\t                        case \"logic_whitespace_post\":\n\t                        case \"logic_whitespace_both\":\n\t                        case \"logic\":\n\t                            // Newlines directly after logic tokens are ignored\n\t                            end += 1;\n\t                            break;\n\t                    }\n\t                }\n\n\t                template = template.substr(end + found_token.def.close.length);\n\n\t                // Increment the position in the template\n\t                error_offset += end + found_token.def.close.length;\n\n\t            } else {\n\t                // No more tokens -> add the rest of the template as a raw-type token\n\t                tokens.push({\n\t                    type: Twig.token.type.raw,\n\t                    value: template\n\t                });\n\t                template = '';\n\t            }\n\t        }\n\n\t        return tokens;\n\t    };\n\n\n\t    Twig.compile = function (tokens) {\n\t        try {\n\n\t            // Output and intermediate stacks\n\t            var output = [],\n\t                stack = [],\n\t                // The tokens between open and close tags\n\t                intermediate_output = [],\n\n\t                token = null,\n\t                logic_token = null,\n\t                unclosed_token = null,\n\t                // Temporary previous token.\n\t                prev_token = null,\n\t                // Temporary previous output.\n\t                prev_output = null,\n\t                // Temporary previous intermediate output.\n\t                prev_intermediate_output = null,\n\t                // The previous token's template\n\t                prev_template = null,\n\t                // Token lookahead\n\t                next_token = null,\n\t                // The output token\n\t                tok_output = null,\n\n\t                // Logic Token values\n\t                type = null,\n\t                open = null,\n\t                next = null;\n\n\t            var compile_output = function(token) {\n\t                Twig.expression.compile.apply(this, [token]);\n\t                if (stack.length > 0) {\n\t                    intermediate_output.push(token);\n\t                } else {\n\t                    output.push(token);\n\t                }\n\t            };\n\n\t            var compile_logic = function(token) {\n\t                // Compile the logic token\n\t                logic_token = Twig.logic.compile.apply(this, [token]);\n\n\t                type = logic_token.type;\n\t                open = Twig.logic.handler[type].open;\n\t                next = Twig.logic.handler[type].next;\n\n\t                Twig.log.trace(\"Twig.compile: \", \"Compiled logic token to \", logic_token,\n\t                                                 \" next is: \", next, \" open is : \", open);\n\n\t                // Not a standalone token, check logic stack to see if this is expected\n\t                if (open !== undefined && !open) {\n\t                    prev_token = stack.pop();\n\t                    prev_template = Twig.logic.handler[prev_token.type];\n\n\t                    if (Twig.indexOf(prev_template.next, type) < 0) {\n\t                        throw new Error(type + \" not expected after a \" + prev_token.type);\n\t                    }\n\n\t                    prev_token.output = prev_token.output || [];\n\n\t                    prev_token.output = prev_token.output.concat(intermediate_output);\n\t                    intermediate_output = [];\n\n\t                    tok_output = {\n\t                        type: Twig.token.type.logic,\n\t                        token: prev_token\n\t                    };\n\t                    if (stack.length > 0) {\n\t                        intermediate_output.push(tok_output);\n\t                    } else {\n\t                        output.push(tok_output);\n\t                    }\n\t                }\n\n\t                // This token requires additional tokens to complete the logic structure.\n\t                if (next !== undefined && next.length > 0) {\n\t                    Twig.log.trace(\"Twig.compile: \", \"Pushing \", logic_token, \" to logic stack.\");\n\n\t                    if (stack.length > 0) {\n\t                        // Put any currently held output into the output list of the logic operator\n\t                        // currently at the head of the stack before we push a new one on.\n\t                        prev_token = stack.pop();\n\t                        prev_token.output = prev_token.output || [];\n\t                        prev_token.output = prev_token.output.concat(intermediate_output);\n\t                        stack.push(prev_token);\n\t                        intermediate_output = [];\n\t                    }\n\n\t                    // Push the new logic token onto the logic stack\n\t                    stack.push(logic_token);\n\n\t                } else if (open !== undefined && open) {\n\t                    tok_output = {\n\t                        type: Twig.token.type.logic,\n\t                        token: logic_token\n\t                    };\n\t                    // Standalone token (like {% set ... %}\n\t                    if (stack.length > 0) {\n\t                        intermediate_output.push(tok_output);\n\t                    } else {\n\t                        output.push(tok_output);\n\t                    }\n\t                }\n\t            };\n\n\t            while (tokens.length > 0) {\n\t                token = tokens.shift();\n\t                prev_output = output[output.length - 1];\n\t                prev_intermediate_output = intermediate_output[intermediate_output.length - 1];\n\t                next_token = tokens[0];\n\t                Twig.log.trace(\"Compiling token \", token);\n\t                switch (token.type) {\n\t                    case Twig.token.type.raw:\n\t                        if (stack.length > 0) {\n\t                            intermediate_output.push(token);\n\t                        } else {\n\t                            output.push(token);\n\t                        }\n\t                        break;\n\n\t                    case Twig.token.type.logic:\n\t                        compile_logic.call(this, token);\n\t                        break;\n\n\t                    // Do nothing, comments should be ignored\n\t                    case Twig.token.type.comment:\n\t                        break;\n\n\t                    case Twig.token.type.output:\n\t                        compile_output.call(this, token);\n\t                        break;\n\n\t                    //Kill whitespace ahead and behind this token\n\t                    case Twig.token.type.logic_whitespace_pre:\n\t                    case Twig.token.type.logic_whitespace_post:\n\t                    case Twig.token.type.logic_whitespace_both:\n\t                    case Twig.token.type.output_whitespace_pre:\n\t                    case Twig.token.type.output_whitespace_post:\n\t                    case Twig.token.type.output_whitespace_both:\n\t                        if (token.type !== Twig.token.type.output_whitespace_post && token.type !== Twig.token.type.logic_whitespace_post) {\n\t                            if (prev_output) {\n\t                                //If the previous output is raw, pop it off\n\t                                if (prev_output.type === Twig.token.type.raw) {\n\t                                    output.pop();\n\n\t                                    //If the previous output is not just whitespace, trim it\n\t                                    if (prev_output.value.match(/^\\s*$/) === null) {\n\t                                        prev_output.value = prev_output.value.trim();\n\t                                        //Repush the previous output\n\t                                        output.push(prev_output);\n\t                                    }\n\t                                }\n\t                            }\n\n\t                            if (prev_intermediate_output) {\n\t                                //If the previous intermediate output is raw, pop it off\n\t                                if (prev_intermediate_output.type === Twig.token.type.raw) {\n\t                                    intermediate_output.pop();\n\n\t                                    //If the previous output is not just whitespace, trim it\n\t                                    if (prev_intermediate_output.value.match(/^\\s*$/) === null) {\n\t                                        prev_intermediate_output.value = prev_intermediate_output.value.trim();\n\t                                        //Repush the previous intermediate output\n\t                                        intermediate_output.push(prev_intermediate_output);\n\t                                    }\n\t                                }\n\t                            }\n\t                        }\n\n\t                        //Compile this token\n\t                        switch (token.type) {\n\t                            case Twig.token.type.output_whitespace_pre:\n\t                            case Twig.token.type.output_whitespace_post:\n\t                            case Twig.token.type.output_whitespace_both:\n\t                                compile_output.call(this, token);\n\t                                break;\n\t                            case Twig.token.type.logic_whitespace_pre:\n\t                            case Twig.token.type.logic_whitespace_post:\n\t                            case Twig.token.type.logic_whitespace_both:\n\t                                compile_logic.call(this, token);\n\t                                break;\n\t                        }\n\n\t                        if (token.type !== Twig.token.type.output_whitespace_pre && token.type !== Twig.token.type.logic_whitespace_pre) {\n\t                            if (next_token) {\n\t                                //If the next token is raw, shift it out\n\t                                if (next_token.type === Twig.token.type.raw) {\n\t                                    tokens.shift();\n\n\t                                    //If the next token is not just whitespace, trim it\n\t                                    if (next_token.value.match(/^\\s*$/) === null) {\n\t                                        next_token.value = next_token.value.trim();\n\t                                        //Unshift the next token\n\t                                        tokens.unshift(next_token);\n\t                                    }\n\t                                }\n\t                            }\n\t                        }\n\n\t                        break;\n\t                }\n\n\t                Twig.log.trace(\"Twig.compile: \", \" Output: \", output,\n\t                                                 \" Logic Stack: \", stack,\n\t                                                 \" Pending Output: \", intermediate_output );\n\t            }\n\n\t            // Verify that there are no logic tokens left in the stack.\n\t            if (stack.length > 0) {\n\t                unclosed_token = stack.pop();\n\t                throw new Error(\"Unable to find an end tag for \" + unclosed_token.type +\n\t                                \", expecting one of \" + unclosed_token.next);\n\t            }\n\t            return output;\n\t        } catch (ex) {\n\t            if (this.options.rethrow) {\n\t                throw ex\n\t            }\n\t            else {\n\t                Twig.log.error(\"Error compiling twig template \" + this.id + \": \");\n\t                if (ex.stack) {\n\t                    Twig.log.error(ex.stack);\n\t                } else {\n\t                    Twig.log.error(ex.toString());\n\t                }\n\t            }\n\t        }\n\t    };\n\n\t    /**\n\t     * Parse a compiled template.\n\t     *\n\t     * @param {Array} tokens The compiled tokens.\n\t     * @param {Object} context The render context.\n\t     *\n\t     * @return {string} The parsed template.\n\t     */\n\t    Twig.parse = function (tokens, context, allow_async) {\n\t        var that = this,\n\t            output = [],\n\n\t            // Store any error that might be thrown by the promise chain.\n\t            err = null,\n\n\t            // This will be set to is_async if template renders synchronously\n\t            is_async = true,\n\t            promise = null,\n\n\t            // Track logic chains\n\t            chain = true;\n\n\n\t        function handleException(ex) {\n\t            if (that.options.rethrow) {\n\t                throw ex;\n\t            }\n\t            else {\n\t                Twig.log.error(\"Error parsing twig template \" + that.id + \": \");\n\t                if (ex.stack) {\n\t                    Twig.log.error(ex.stack);\n\t                } else {\n\t                    Twig.log.error(ex.toString());\n\t                }\n\n\t                if (Twig.debug) {\n\t                    return ex.toString();\n\t                }\n\t            }\n\t        }\n\n\t        promise = Twig.async.forEach(tokens, function parseToken(token) {\n\t            Twig.log.debug(\"Twig.parse: \", \"Parsing token: \", token);\n\n\t            switch (token.type) {\n\t                case Twig.token.type.raw:\n\t                    output.push(Twig.filters.raw(token.value));\n\t                    break;\n\n\t                case Twig.token.type.logic:\n\t                    var logic_token = token.token;\n\n\t                    return Twig.logic.parseAsync.apply(that, [logic_token, context, chain])\n\t                    .then(function(logic) {\n\t                        if (logic.chain !== undefined) {\n\t                            chain = logic.chain;\n\t                        }\n\t                        if (logic.context !== undefined) {\n\t                            context = logic.context;\n\t                        }\n\t                        if (logic.output !== undefined) {\n\t                            output.push(logic.output);\n\t                        }\n\t                    });\n\t                    break;\n\n\t                case Twig.token.type.comment:\n\t                    // Do nothing, comments should be ignored\n\t                    break;\n\n\t                //Fall through whitespace to output\n\t                case Twig.token.type.output_whitespace_pre:\n\t                case Twig.token.type.output_whitespace_post:\n\t                case Twig.token.type.output_whitespace_both:\n\t                case Twig.token.type.output:\n\t                    Twig.log.debug(\"Twig.parse: \", \"Output token: \", token.stack);\n\t                    // Parse the given expression in the given context\n\t                    return Twig.expression.parseAsync.apply(that, [token.stack, context])\n\t                    .then(function(o) {\n\t                        output.push(o);\n\t                    });\n\t            }\n\t        })\n\t        .then(function() {\n\t            output = Twig.output.apply(that, [output]);\n\t            is_async = false;\n\t            return output;\n\t        })\n\t        .catch(function(e) {\n\t            if (allow_async)\n\t                handleException(e);\n\n\t            err = e;\n\t        });\n\n\t        // If `allow_async` we will always return a promise since we do not\n\t        // know in advance if we are going to run asynchronously or not.\n\t        if (allow_async)\n\t            return promise;\n\n\t        // Handle errors here if we fail synchronously.\n\t        if (err !== null)\n\t            return handleException(err);\n\n\t        // If `allow_async` is not true we should not allow the user\n\t        // to use asynchronous functions or filters.\n\t        if (is_async)\n\t            throw new Twig.Error('You are using Twig.js in sync mode in combination with async extensions.');\n\n\t        return output;\n\t    };\n\n\t    /**\n\t     * Tokenize and compile a string template.\n\t     *\n\t     * @param {string} data The template.\n\t     *\n\t     * @return {Array} The compiled tokens.\n\t     */\n\t    Twig.prepare = function(data) {\n\t        var tokens, raw_tokens;\n\n\t        // Tokenize\n\t        Twig.log.debug(\"Twig.prepare: \", \"Tokenizing \", data);\n\t        raw_tokens = Twig.tokenize.apply(this, [data]);\n\n\t        // Compile\n\t        Twig.log.debug(\"Twig.prepare: \", \"Compiling \", raw_tokens);\n\t        tokens = Twig.compile.apply(this, [raw_tokens]);\n\n\t        Twig.log.debug(\"Twig.prepare: \", \"Compiled \", tokens);\n\n\t        return tokens;\n\t    };\n\n\t    /**\n\t     * Join the output token's stack and escape it if needed\n\t     *\n\t     * @param {Array} Output token's stack\n\t     *\n\t     * @return {string|String} Autoescaped output\n\t     */\n\t    Twig.output = function(output) {\n\t        if (!this.options.autoescape) {\n\t            return output.join(\"\");\n\t        }\n\n\t        var strategy = 'html';\n\t        if(typeof this.options.autoescape == 'string')\n\t            strategy = this.options.autoescape;\n\n\t        // [].map would be better but it's not supported by IE8-\n\t        var escaped_output = [];\n\t        Twig.forEach(output, function (str) {\n\t            if (str && (str.twig_markup !== true && str.twig_markup != strategy)) {\n\t                str = Twig.filters.escape(str, [ strategy ]);\n\t            }\n\t            escaped_output.push(str);\n\t        });\n\t        return Twig.Markup(escaped_output.join(\"\"));\n\t    }\n\n\t    // Namespace for template storage and retrieval\n\t    Twig.Templates = {\n\t        /**\n\t         * Registered template loaders - use Twig.Templates.registerLoader to add supported loaders\n\t         * @type {Object}\n\t         */\n\t        loaders: {},\n\n\t        /**\n\t         * Registered template parsers - use Twig.Templates.registerParser to add supported parsers\n\t         * @type {Object}\n\t         */\n\t        parsers: {},\n\n\t        /**\n\t         * Cached / loaded templates\n\t         * @type {Object}\n\t         */\n\t        registry: {}\n\t    };\n\n\t    /**\n\t     * Is this id valid for a twig template?\n\t     *\n\t     * @param {string} id The ID to check.\n\t     *\n\t     * @throws {Twig.Error} If the ID is invalid or used.\n\t     * @return {boolean} True if the ID is valid.\n\t     */\n\t    Twig.validateId = function(id) {\n\t        if (id === \"prototype\") {\n\t            throw new Twig.Error(id + \" is not a valid twig identifier\");\n\t        } else if (Twig.cache && Twig.Templates.registry.hasOwnProperty(id)) {\n\t            throw new Twig.Error(\"There is already a template with the ID \" + id);\n\t        }\n\t        return true;\n\t    }\n\n\t    /**\n\t     * Register a template loader\n\t     *\n\t     * @example\n\t     * Twig.extend(function(Twig) {\n\t     *    Twig.Templates.registerLoader('custom_loader', function(location, params, callback, error_callback) {\n\t     *        // ... load the template ...\n\t     *        params.data = loadedTemplateData;\n\t     *        // create and return the template\n\t     *        var template = new Twig.Template(params);\n\t     *        if (typeof callback === 'function') {\n\t     *            callback(template);\n\t     *        }\n\t     *        return template;\n\t     *    });\n\t     * });\n\t     *\n\t     * @param {String} method_name The method this loader is intended for (ajax, fs)\n\t     * @param {Function} func The function to execute when loading the template\n\t     * @param {Object|undefined} scope Optional scope parameter to bind func to\n\t     *\n\t     * @throws Twig.Error\n\t     *\n\t     * @return {void}\n\t     */\n\t    Twig.Templates.registerLoader = function(method_name, func, scope) {\n\t        if (typeof func !== 'function') {\n\t            throw new Twig.Error('Unable to add loader for ' + method_name + ': Invalid function reference given.');\n\t        }\n\t        if (scope) {\n\t            func = func.bind(scope);\n\t        }\n\t        this.loaders[method_name] = func;\n\t    };\n\n\t    /**\n\t     * Remove a registered loader\n\t     *\n\t     * @param {String} method_name The method name for the loader you wish to remove\n\t     *\n\t     * @return {void}\n\t     */\n\t    Twig.Templates.unRegisterLoader = function(method_name) {\n\t        if (this.isRegisteredLoader(method_name)) {\n\t            delete this.loaders[method_name];\n\t        }\n\t    };\n\n\t    /**\n\t     * See if a loader is registered by its method name\n\t     *\n\t     * @param {String} method_name The name of the loader you are looking for\n\t     *\n\t     * @return {boolean}\n\t     */\n\t    Twig.Templates.isRegisteredLoader = function(method_name) {\n\t        return this.loaders.hasOwnProperty(method_name);\n\t    };\n\n\t    /**\n\t     * Register a template parser\n\t     *\n\t     * @example\n\t     * Twig.extend(function(Twig) {\n\t     *    Twig.Templates.registerParser('custom_parser', function(params) {\n\t     *        // this template source can be accessed in params.data\n\t     *        var template = params.data\n\t     *\n\t     *        // ... custom process that modifies the template\n\t     *\n\t     *        // return the parsed template\n\t     *        return template;\n\t     *    });\n\t     * });\n\t     *\n\t     * @param {String} method_name The method this parser is intended for (twig, source)\n\t     * @param {Function} func The function to execute when parsing the template\n\t     * @param {Object|undefined} scope Optional scope parameter to bind func to\n\t     *\n\t     * @throws Twig.Error\n\t     *\n\t     * @return {void}\n\t     */\n\t    Twig.Templates.registerParser = function(method_name, func, scope) {\n\t        if (typeof func !== 'function') {\n\t            throw new Twig.Error('Unable to add parser for ' + method_name + ': Invalid function regerence given.');\n\t        }\n\n\t        if (scope) {\n\t            func = func.bind(scope);\n\t        }\n\n\t        this.parsers[method_name] = func;\n\t    };\n\n\t    /**\n\t     * Remove a registered parser\n\t     *\n\t     * @param {String} method_name The method name for the parser you wish to remove\n\t     *\n\t     * @return {void}\n\t     */\n\t    Twig.Templates.unRegisterParser = function(method_name) {\n\t        if (this.isRegisteredParser(method_name)) {\n\t            delete this.parsers[method_name];\n\t        }\n\t    };\n\n\t    /**\n\t     * See if a parser is registered by its method name\n\t     *\n\t     * @param {String} method_name The name of the parser you are looking for\n\t     *\n\t     * @return {boolean}\n\t     */\n\t    Twig.Templates.isRegisteredParser = function(method_name) {\n\t        return this.parsers.hasOwnProperty(method_name);\n\t    };\n\n\t    /**\n\t     * Save a template object to the store.\n\t     *\n\t     * @param {Twig.Template} template   The twig.js template to store.\n\t     */\n\t    Twig.Templates.save = function(template) {\n\t        if (template.id === undefined) {\n\t            throw new Twig.Error(\"Unable to save template with no id\");\n\t        }\n\t        Twig.Templates.registry[template.id] = template;\n\t    };\n\n\t    /**\n\t     * Load a previously saved template from the store.\n\t     *\n\t     * @param {string} id   The ID of the template to load.\n\t     *\n\t     * @return {Twig.Template} A twig.js template stored with the provided ID.\n\t     */\n\t    Twig.Templates.load = function(id) {\n\t        if (!Twig.Templates.registry.hasOwnProperty(id)) {\n\t            return null;\n\t        }\n\t        return Twig.Templates.registry[id];\n\t    };\n\n\t    /**\n\t     * Load a template from a remote location using AJAX and saves in with the given ID.\n\t     *\n\t     * Available parameters:\n\t     *\n\t     *      async:       Should the HTTP request be performed asynchronously.\n\t     *                      Defaults to true.\n\t     *      method:      What method should be used to load the template\n\t     *                      (fs or ajax)\n\t     *      parser:      What method should be used to parse the template\n\t     *                      (twig or source)\n\t     *      precompiled: Has the template already been compiled.\n\t     *\n\t     * @param {string} location  The remote URL to load as a template.\n\t     * @param {Object} params The template parameters.\n\t     * @param {function} callback  A callback triggered when the template finishes loading.\n\t     * @param {function} error_callback  A callback triggered if an error occurs loading the template.\n\t     *\n\t     *\n\t     */\n\t    Twig.Templates.loadRemote = function(location, params, callback, error_callback) {\n\t        var loader;\n\n\t        // Default to async\n\t        if (params.async === undefined) {\n\t            params.async = true;\n\t        }\n\n\t        // Default to the URL so the template is cached.\n\t        if (params.id === undefined) {\n\t            params.id = location;\n\t        }\n\n\t        // Check for existing template\n\t        if (Twig.cache && Twig.Templates.registry.hasOwnProperty(params.id)) {\n\t            // A template is already saved with the given id.\n\t            if (typeof callback === 'function') {\n\t                callback(Twig.Templates.registry[params.id]);\n\t            }\n\t            // TODO: if async, return deferred promise\n\t            return Twig.Templates.registry[params.id];\n\t        }\n\n\t        //if the parser name hasn't been set, default it to twig\n\t        params.parser = params.parser || 'twig';\n\n\t        // Assume 'fs' if the loader is not defined\n\t        loader = this.loaders[params.method] || this.loaders.fs;\n\t        return loader.apply(this, arguments);\n\t    };\n\n\t    // Determine object type\n\t    function is(type, obj) {\n\t        var clas = Object.prototype.toString.call(obj).slice(8, -1);\n\t        return obj !== undefined && obj !== null && clas === type;\n\t    }\n\n\t    /**\n\t     * Create a new twig.js template.\n\t     *\n\t     * Parameters: {\n\t     *      data:   The template, either pre-compiled tokens or a string template\n\t     *      id:     The name of this template\n\t     *      blocks: Any pre-existing block from a child template\n\t     * }\n\t     *\n\t     * @param {Object} params The template parameters.\n\t     */\n\t    Twig.Template = function ( params ) {\n\t        var data = params.data,\n\t            id = params.id,\n\t            blocks = params.blocks,\n\t            macros = params.macros || {},\n\t            base = params.base,\n\t            path = params.path,\n\t            url = params.url,\n\t            name = params.name,\n\t            method = params.method,\n\t            // parser options\n\t            options = params.options;\n\n\t        // # What is stored in a Twig.Template\n\t        //\n\t        // The Twig Template hold several chucks of data.\n\t        //\n\t        //     {\n\t        //          id:     The token ID (if any)\n\t        //          tokens: The list of tokens that makes up this template.\n\t        //          blocks: The list of block this template contains.\n\t        //          base:   The base template (if any)\n\t        //            options:  {\n\t        //                Compiler/parser options\n\t        //\n\t        //                strict_variables: true/false\n\t        //                    Should missing variable/keys emit an error message. If false, they default to null.\n\t        //            }\n\t        //     }\n\t        //\n\n\t        this.id     = id;\n\t        this.method = method;\n\t        this.base   = base;\n\t        this.path   = path;\n\t        this.url    = url;\n\t        this.name   = name;\n\t        this.macros = macros;\n\t        this.options = options;\n\n\t        this.reset(blocks);\n\n\t        if (is('String', data)) {\n\t            this.tokens = Twig.prepare.apply(this, [data]);\n\t        } else {\n\t            this.tokens = data;\n\t        }\n\n\t        if (id !== undefined) {\n\t            Twig.Templates.save(this);\n\t        }\n\t    };\n\n\t    Twig.Template.prototype.reset = function(blocks) {\n\t        Twig.log.debug(\"Twig.Template.reset\", \"Reseting template \" + this.id);\n\t        this.blocks = {};\n\t        this.importedBlocks = [];\n\t        this.originalBlockTokens = {};\n\t        this.child = {\n\t            blocks: blocks || {}\n\t        };\n\t        this.extend = null;\n\t    };\n\n\t    Twig.Template.prototype.render = function (context, params, allow_async) {\n\t        params = params || {};\n\n\t        var that = this,\n\n\t            // Store any error that might be thrown by the promise chain.\n\t            err = null,\n\n\t            // This will be set to is_async if template renders synchronously\n\t            is_async = true,\n\t            promise = null,\n\n\t            result,\n\t            url;\n\n\t        this.context = context || {};\n\n\t        // Clear any previous state\n\t        this.reset();\n\t        if (params.blocks) {\n\t            this.blocks = params.blocks;\n\t        }\n\t        if (params.macros) {\n\t            this.macros = params.macros;\n\t        }\n\n\t        var cb = function(output) {\n\t            // Does this template extend another\n\t            if (that.extend) {\n\t                var ext_template;\n\n\t                // check if the template is provided inline\n\t                if ( that.options.allowInlineIncludes ) {\n\t                    ext_template = Twig.Templates.load(that.extend);\n\t                    if ( ext_template ) {\n\t                        ext_template.options = that.options;\n\t                    }\n\t                }\n\n\t                // check for the template file via include\n\t                if (!ext_template) {\n\t                    url = Twig.path.parsePath(that, that.extend);\n\n\t                    ext_template = Twig.Templates.loadRemote(url, {\n\t                        method: that.getLoaderMethod(),\n\t                        base: that.base,\n\t                        async:  false,\n\t                        id:     url,\n\t                        options: that.options\n\t                    });\n\t                }\n\n\t                that.parent = ext_template;\n\n\t                return that.parent.renderAsync(that.context, {\n\t                    blocks: that.blocks\n\t                });\n\t            }\n\n\t            if (params.output == 'blocks') {\n\t                return that.blocks;\n\t            } else if (params.output == 'macros') {\n\t                return that.macros;\n\t            } else {\n\t                return output;\n\t            }\n\t        };\n\n\t        promise = Twig.parseAsync.apply(this, [this.tokens, this.context])\n\t        .then(cb)\n\t        .then(function(v) {\n\t            is_async = false;\n\t            result = v;\n\t            return v;\n\t        })\n\t        .catch(function(e) {\n\t            if (allow_async)\n\t                throw e;\n\n\t            err = e;\n\t        })\n\n\t        // If `allow_async` we will always return a promise since we do not\n\t        // know in advance if we are going to run asynchronously or not.\n\t        if (allow_async)\n\t            return promise;\n\n\t        // Handle errors here if we fail synchronously.\n\t        if (err !== null)\n\t            throw err;\n\n\t        // If `allow_async` is not true we should not allow the user\n\t        // to use asynchronous functions or filters.\n\t        if (is_async)\n\t            throw new Twig.Error('You are using Twig.js in sync mode in combination with async extensions.');\n\n\t        return result;\n\t    };\n\n\t    Twig.Template.prototype.importFile = function(file) {\n\t        var url, sub_template;\n\t        if (!this.url && this.options.allowInlineIncludes) {\n\t            file = this.path ? Twig.path.parsePath(this, file) : file;\n\t            sub_template = Twig.Templates.load(file);\n\n\t            if (!sub_template) {\n\t                sub_template = Twig.Templates.loadRemote(url, {\n\t                    id: file,\n\t                    method: this.getLoaderMethod(),\n\t                    async: false,\n\t                    path: file,\n\t                    options: this.options\n\t                });\n\n\t                if (!sub_template) {\n\t                    throw new Twig.Error(\"Unable to find the template \" + file);\n\t                }\n\t            }\n\n\t            sub_template.options = this.options;\n\n\t            return sub_template;\n\t        }\n\n\t        url = Twig.path.parsePath(this, file);\n\n\t        // Load blocks from an external file\n\t        sub_template = Twig.Templates.loadRemote(url, {\n\t            method: this.getLoaderMethod(),\n\t            base: this.base,\n\t            async: false,\n\t            options: this.options,\n\t            id: url\n\t        });\n\n\t        return sub_template;\n\t    };\n\n\t    Twig.Template.prototype.importBlocks = function(file, override) {\n\t        var sub_template = this.importFile(file),\n\t            context = this.context,\n\t            that = this,\n\t            key;\n\n\t        override = override || false;\n\n\t        sub_template.render(context);\n\n\t        // Mixin blocks\n\t        Twig.forEach(Object.keys(sub_template.blocks), function(key) {\n\t            if (override || that.blocks[key] === undefined) {\n\t                that.blocks[key] = sub_template.blocks[key];\n\t                that.importedBlocks.push(key);\n\t            }\n\t        });\n\t    };\n\n\t    Twig.Template.prototype.importMacros = function(file) {\n\t        var url = Twig.path.parsePath(this, file);\n\n\t        // load remote template\n\t        var remoteTemplate = Twig.Templates.loadRemote(url, {\n\t            method: this.getLoaderMethod(),\n\t            async: false,\n\t            id: url\n\t        });\n\n\t        return remoteTemplate;\n\t    };\n\n\t    Twig.Template.prototype.getLoaderMethod = function() {\n\t        if (this.path) {\n\t            return 'fs';\n\t        }\n\t        if (this.url) {\n\t            return 'ajax';\n\t        }\n\t        return this.method || 'fs';\n\t    };\n\n\t    Twig.Template.prototype.compile = function(options) {\n\t        // compile the template into raw JS\n\t        return Twig.compiler.compile(this, options);\n\t    };\n\n\t    /**\n\t     * Create safe output\n\t     *\n\t     * @param {string} Content safe to output\n\t     *\n\t     * @return {String} Content wrapped into a String\n\t     */\n\n\t    Twig.Markup = function(content, strategy) {\n\t        if(typeof strategy == 'undefined') {\n\t            strategy = true;\n\t        }\n\n\t        if (typeof content === 'string' && content.length > 0) {\n\t            content = new String(content);\n\t            content.twig_markup = strategy;\n\t        }\n\t        return content;\n\t    };\n\n\t    return Twig;\n\n\t};\n\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t// ## twig.compiler.js\n\t//\n\t// This file handles compiling templates into JS\n\tmodule.exports = function (Twig) {\n\t    /**\n\t     * Namespace for compilation.\n\t     */\n\t    Twig.compiler = {\n\t        module: {}\n\t    };\n\n\t    // Compile a Twig Template to output.\n\t    Twig.compiler.compile = function(template, options) {\n\t        // Get tokens\n\t        var tokens = JSON.stringify(template.tokens)\n\t            , id = template.id\n\t            , output;\n\n\t        if (options.module) {\n\t            if (Twig.compiler.module[options.module] === undefined) {\n\t                throw new Twig.Error(\"Unable to find module type \" + options.module);\n\t            }\n\t            output = Twig.compiler.module[options.module](id, tokens, options.twig);\n\t        } else {\n\t            output = Twig.compiler.wrap(id, tokens);\n\t        }\n\t        return output;\n\t    };\n\n\t    Twig.compiler.module = {\n\t        amd: function(id, tokens, pathToTwig) {\n\t            return 'define([\"' + pathToTwig + '\"], function (Twig) {\\n\\tvar twig, templates;\\ntwig = Twig.twig;\\ntemplates = ' + Twig.compiler.wrap(id, tokens) + '\\n\\treturn templates;\\n});';\n\t        }\n\t        , node: function(id, tokens) {\n\t            return 'var twig = require(\"twig\").twig;\\n'\n\t                + 'exports.template = ' + Twig.compiler.wrap(id, tokens)\n\t        }\n\t        , cjs2: function(id, tokens, pathToTwig) {\n\t            return 'module.declare([{ twig: \"' + pathToTwig + '\" }], function (require, exports, module) {\\n'\n\t                        + '\\tvar twig = require(\"twig\").twig;\\n'\n\t                        + '\\texports.template = ' + Twig.compiler.wrap(id, tokens)\n\t                    + '\\n});'\n\t        }\n\t    };\n\n\t    Twig.compiler.wrap = function(id, tokens) {\n\t        return 'twig({id:\"'+id.replace('\"', '\\\\\"')+'\", data:'+tokens+', precompiled: true});\\n';\n\t    };\n\n\t    return Twig;\n\t};\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// ## twig.expression.js\n\t//\n\t// This file handles tokenizing, compiling and parsing expressions.\n\tmodule.exports = function (Twig) {\n\t    \"use strict\";\n\n\t    function parseParams(thisArg, params, context) {\n\t        if (params)\n\t            return Twig.expression.parseAsync.apply(thisArg, [params, context]);\n\n\t        return Twig.Promise.resolve(false);\n\t    }\n\n\t    /**\n\t     * Namespace for expression handling.\n\t     */\n\t    Twig.expression = { };\n\n\t    __webpack_require__(4)(Twig);\n\n\t    /**\n\t     * Reserved word that can't be used as variable names.\n\t     */\n\t    Twig.expression.reservedWords = [\n\t        \"true\", \"false\", \"null\", \"TRUE\", \"FALSE\", \"NULL\", \"_context\", \"and\", \"b-and\", \"or\", \"b-or\", \"b-xor\", \"in\", \"not in\", \"if\"\n\t    ];\n\n\t    /**\n\t     * The type of tokens used in expressions.\n\t     */\n\t    Twig.expression.type = {\n\t        comma:      'Twig.expression.type.comma',\n\t        operator: {\n\t            unary:  'Twig.expression.type.operator.unary',\n\t            binary: 'Twig.expression.type.operator.binary'\n\t        },\n\t        string:     'Twig.expression.type.string',\n\t        bool:       'Twig.expression.type.bool',\n\t        slice:      'Twig.expression.type.slice',\n\t        array: {\n\t            start:  'Twig.expression.type.array.start',\n\t            end:    'Twig.expression.type.array.end'\n\t        },\n\t        object: {\n\t            start:  'Twig.expression.type.object.start',\n\t            end:    'Twig.expression.type.object.end'\n\t        },\n\t        parameter: {\n\t            start:  'Twig.expression.type.parameter.start',\n\t            end:    'Twig.expression.type.parameter.end'\n\t        },\n\t        subexpression: {\n\t            start:  'Twig.expression.type.subexpression.start',\n\t            end:    'Twig.expression.type.subexpression.end'\n\t        },\n\t        key: {\n\t            period:   'Twig.expression.type.key.period',\n\t            brackets: 'Twig.expression.type.key.brackets'\n\t        },\n\t        filter:     'Twig.expression.type.filter',\n\t        _function:  'Twig.expression.type._function',\n\t        variable:   'Twig.expression.type.variable',\n\t        number:     'Twig.expression.type.number',\n\t        _null:     'Twig.expression.type.null',\n\t        context:    'Twig.expression.type.context',\n\t        test:       'Twig.expression.type.test'\n\t    };\n\n\t    Twig.expression.set = {\n\t        // What can follow an expression (in general)\n\t        operations: [\n\t            Twig.expression.type.filter,\n\t            Twig.expression.type.operator.unary,\n\t            Twig.expression.type.operator.binary,\n\t            Twig.expression.type.array.end,\n\t            Twig.expression.type.object.end,\n\t            Twig.expression.type.parameter.end,\n\t            Twig.expression.type.subexpression.end,\n\t            Twig.expression.type.comma,\n\t            Twig.expression.type.test\n\t        ],\n\t        expressions: [\n\t            Twig.expression.type._function,\n\t            Twig.expression.type.bool,\n\t            Twig.expression.type.string,\n\t            Twig.expression.type.variable,\n\t            Twig.expression.type.number,\n\t            Twig.expression.type._null,\n\t            Twig.expression.type.context,\n\t            Twig.expression.type.parameter.start,\n\t            Twig.expression.type.array.start,\n\t            Twig.expression.type.object.start,\n\t            Twig.expression.type.subexpression.start,\n\t            Twig.expression.type.operator.unary\n\t        ]\n\t    };\n\n\t    // Most expressions allow a '.' or '[' after them, so we provide a convenience set\n\t    Twig.expression.set.operations_extended = Twig.expression.set.operations.concat([\n\t                    Twig.expression.type.key.period,\n\t                    Twig.expression.type.key.brackets,\n\t                    Twig.expression.type.slice]);\n\n\t    // Some commonly used compile and parse functions.\n\t    Twig.expression.fn = {\n\t        compile: {\n\t            push: function(token, stack, output) {\n\t                output.push(token);\n\t            },\n\t            push_both: function(token, stack, output) {\n\t                output.push(token);\n\t                stack.push(token);\n\t            }\n\t        },\n\t        parse: {\n\t            push: function(token, stack, context) {\n\t                stack.push(token);\n\t            },\n\t            push_value: function(token, stack, context) {\n\t                stack.push(token.value);\n\t            }\n\t        }\n\t    };\n\n\t    // The regular expressions and compile/parse logic used to match tokens in expressions.\n\t    //\n\t    // Properties:\n\t    //\n\t    //      type:  The type of expression this matches\n\t    //\n\t    //      regex: One or more regular expressions that matche the format of the token.\n\t    //\n\t    //      next:  Valid tokens that can occur next in the expression.\n\t    //\n\t    // Functions:\n\t    //\n\t    //      compile: A function that compiles the raw regular expression match into a token.\n\t    //\n\t    //      parse:   A function that parses the compiled token into output.\n\t    //\n\t    Twig.expression.definitions = [\n\t        {\n\t            type: Twig.expression.type.test,\n\t            regex: /^is\\s+(not)?\\s*([a-zA-Z_][a-zA-Z0-9_]*(\\s?as)?)/,\n\t            next: Twig.expression.set.operations.concat([Twig.expression.type.parameter.start]),\n\t            compile: function(token, stack, output) {\n\t                token.filter   = token.match[2];\n\t                token.modifier = token.match[1];\n\t                delete token.match;\n\t                delete token.value;\n\t                output.push(token);\n\t            },\n\t            parse: function(token, stack, context) {\n\t                var value = stack.pop();\n\n\t                return parseParams(this, token.params, context)\n\t                .then(function(params) {\n\t                    var result = Twig.test(token.filter, value, params);\n\n\t                    if (token.modifier == 'not') {\n\t                        stack.push(!result);\n\t                    } else {\n\t                        stack.push(result);\n\t                    }\n\t                });\n\t            }\n\t        },\n\t        {\n\t            type: Twig.expression.type.comma,\n\t            // Match a comma\n\t            regex: /^,/,\n\t            next: Twig.expression.set.expressions.concat([Twig.expression.type.array.end, Twig.expression.type.object.end]),\n\t            compile: function(token, stack, output) {\n\t                var i = stack.length - 1,\n\t                    stack_token;\n\n\t                delete token.match;\n\t                delete token.value;\n\n\t                // pop tokens off the stack until the start of the object\n\t                for(;i >= 0; i--) {\n\t                    stack_token = stack.pop();\n\t                    if (stack_token.type === Twig.expression.type.object.start\n\t                            || stack_token.type === Twig.expression.type.parameter.start\n\t                            || stack_token.type === Twig.expression.type.array.start) {\n\t                        stack.push(stack_token);\n\t                        break;\n\t                    }\n\t                    output.push(stack_token);\n\t                }\n\t                output.push(token);\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * Match a number (integer or decimal)\n\t             */\n\t            type: Twig.expression.type.number,\n\t            // match a number\n\t            regex: /^\\-?\\d+(\\.\\d+)?/,\n\t            next: Twig.expression.set.operations,\n\t            compile: function(token, stack, output) {\n\t                token.value = Number(token.value);\n\t                output.push(token);\n\t            },\n\t            parse: Twig.expression.fn.parse.push_value\n\t        },\n\t        {\n\t            type: Twig.expression.type.operator.binary,\n\t            // Match any of ?:, +, *, /, -, %, ~, <, <=, >, >=, !=, ==, **, ?, :, and, b-and, or, b-or, b-xor, in, not in\n\t            // and, or, in, not in can be followed by a space or parenthesis\n\t            regex: /(^\\?\\:|^(b\\-and)|^(b\\-or)|^(b\\-xor)|^[\\+\\-~%\\?]|^[\\:](?!\\d\\])|^[!=]==?|^[!<>]=?|^\\*\\*?|^\\/\\/?|^(and)[\\(|\\s+]|^(or)[\\(|\\s+]|^(in)[\\(|\\s+]|^(not in)[\\(|\\s+]|^\\.\\.)/,\n\t            next: Twig.expression.set.expressions,\n\t            transform: function(match, tokens) {\n\t                switch(match[0]) {\n\t                    case 'and(':\n\t                    case 'or(':\n\t                    case 'in(':\n\t                    case 'not in(':\n\t                        //Strip off the ( if it exists\n\t                        tokens[tokens.length - 1].value = match[2];\n\t                        return match[0];\n\t                        break;\n\t                    default:\n\t                        return '';\n\t                }\n\t            },\n\t            compile: function(token, stack, output) {\n\t                delete token.match;\n\n\t                token.value = token.value.trim();\n\t                var value = token.value,\n\t                    operator = Twig.expression.operator.lookup(value, token);\n\n\t                Twig.log.trace(\"Twig.expression.compile: \", \"Operator: \", operator, \" from \", value);\n\n\t                while (stack.length > 0 &&\n\t                       (stack[stack.length-1].type == Twig.expression.type.operator.unary || stack[stack.length-1].type == Twig.expression.type.operator.binary) &&\n\t                            (\n\t                                (operator.associativity === Twig.expression.operator.leftToRight &&\n\t                                 operator.precidence    >= stack[stack.length-1].precidence) ||\n\n\t                                (operator.associativity === Twig.expression.operator.rightToLeft &&\n\t                                 operator.precidence    >  stack[stack.length-1].precidence)\n\t                            )\n\t                       ) {\n\t                     var temp = stack.pop();\n\t                     output.push(temp);\n\t                }\n\n\t                if (value === \":\") {\n\t                    // Check if this is a ternary or object key being set\n\t                    if (stack[stack.length - 1] && stack[stack.length-1].value === \"?\") {\n\t                        // Continue as normal for a ternary\n\t                    } else {\n\t                        // This is not a ternary so we push the token to the output where it can be handled\n\t                        //   when the assocated object is closed.\n\t                        var key_token = output.pop();\n\n\t                        if (key_token.type === Twig.expression.type.string ||\n\t                                key_token.type === Twig.expression.type.variable) {\n\t                            token.key = key_token.value;\n\t                        } else if (key_token.type === Twig.expression.type.number) {\n\t                            // Convert integer keys into string keys\n\t                            token.key = key_token.value.toString();\n\t                        } else if (key_token.expression &&\n\t                            (key_token.type === Twig.expression.type.parameter.end ||\n\t                            key_token.type == Twig.expression.type.subexpression.end)) {\n\t                            token.params = key_token.params;\n\t                        } else {\n\t                            throw new Twig.Error(\"Unexpected value before ':' of \" + key_token.type + \" = \" + key_token.value);\n\t                        }\n\n\t                        output.push(token);\n\t                        return;\n\t                    }\n\t                } else {\n\t                    stack.push(operator);\n\t                }\n\t            },\n\t            parse: function(token, stack, context) {\n\t                if (token.key) {\n\t                    // handle ternary ':' operator\n\t                    stack.push(token);\n\t                } else if (token.params) {\n\t                    // handle \"{(expression):value}\"\n\t                    return Twig.expression.parseAsync.apply(this, [token.params, context])\n\t                    .then(function(key) {\n\t                        token.key = key;\n\t                        stack.push(token);\n\n\t                        //If we're in a loop, we might need token.params later, especially in this form of \"(expression):value\"\n\t                        if (!context.loop) {\n\t                            delete(token.params);\n\t                        }\n\t                    });\n\t                } else {\n\t                    Twig.expression.operator.parse(token.value, stack);\n\t                }\n\t            }\n\t        },\n\t        {\n\t            type: Twig.expression.type.operator.unary,\n\t            // Match any of not\n\t            regex: /(^not\\s+)/,\n\t            next: Twig.expression.set.expressions,\n\t            compile: function(token, stack, output) {\n\t                delete token.match;\n\n\t                token.value = token.value.trim();\n\t                var value = token.value,\n\t                    operator = Twig.expression.operator.lookup(value, token);\n\n\t                Twig.log.trace(\"Twig.expression.compile: \", \"Operator: \", operator, \" from \", value);\n\n\t                while (stack.length > 0 &&\n\t                       (stack[stack.length-1].type == Twig.expression.type.operator.unary || stack[stack.length-1].type == Twig.expression.type.operator.binary) &&\n\t                            (\n\t                                (operator.associativity === Twig.expression.operator.leftToRight &&\n\t                                 operator.precidence    >= stack[stack.length-1].precidence) ||\n\n\t                                (operator.associativity === Twig.expression.operator.rightToLeft &&\n\t                                 operator.precidence    >  stack[stack.length-1].precidence)\n\t                            )\n\t                       ) {\n\t                     var temp = stack.pop();\n\t                     output.push(temp);\n\t                }\n\n\t                stack.push(operator);\n\t            },\n\t            parse: function(token, stack, context) {\n\t                Twig.expression.operator.parse(token.value, stack);\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * Match a string. This is anything between a pair of single or double quotes.\n\t             */\n\t            type: Twig.expression.type.string,\n\t            // See: http://blog.stevenlevithan.com/archives/match-quoted-string\n\t            regex: /^([\"'])(?:(?=(\\\\?))\\2[\\s\\S])*?\\1/,\n\t            next: Twig.expression.set.operations_extended,\n\t            compile: function(token, stack, output) {\n\t                var value = token.value;\n\t                delete token.match\n\n\t                // Remove the quotes from the string\n\t                if (value.substring(0, 1) === '\"') {\n\t                    value = value.replace('\\\\\"', '\"');\n\t                } else {\n\t                    value = value.replace(\"\\\\'\", \"'\");\n\t                }\n\t                token.value = value.substring(1, value.length-1).replace( /\\\\n/g, \"\\n\" ).replace( /\\\\r/g, \"\\r\" );\n\t                Twig.log.trace(\"Twig.expression.compile: \", \"String value: \", token.value);\n\t                output.push(token);\n\t            },\n\t            parse: Twig.expression.fn.parse.push_value\n\t        },\n\t        {\n\t            /**\n\t             * Match a subexpression set start.\n\t             */\n\t            type: Twig.expression.type.subexpression.start,\n\t            regex: /^\\(/,\n\t            next: Twig.expression.set.expressions.concat([Twig.expression.type.subexpression.end]),\n\t            compile: function(token, stack, output) {\n\t                token.value = '(';\n\t                output.push(token);\n\t                stack.push(token);\n\t            },\n\t            parse: Twig.expression.fn.parse.push\n\t        },\n\t        {\n\t            /**\n\t             * Match a subexpression set end.\n\t             */\n\t            type: Twig.expression.type.subexpression.end,\n\t            regex: /^\\)/,\n\t            next: Twig.expression.set.operations_extended,\n\t            validate: function(match, tokens) {\n\t                // Iterate back through previous tokens to ensure we follow a subexpression start\n\t                var i = tokens.length - 1,\n\t                    found_subexpression_start = false,\n\t                    next_subexpression_start_invalid = false,\n\t                    unclosed_parameter_count = 0;\n\n\t                while(!found_subexpression_start && i >= 0) {\n\t                    var token = tokens[i];\n\n\t                    found_subexpression_start = token.type === Twig.expression.type.subexpression.start;\n\n\t                    // If we have previously found a subexpression end, then this subexpression start is the start of\n\t                    // that subexpression, not the subexpression we are searching for\n\t                    if (found_subexpression_start && next_subexpression_start_invalid) {\n\t                        next_subexpression_start_invalid = false;\n\t                        found_subexpression_start = false;\n\t                    }\n\n\t                    // Count parameter tokens to ensure we dont return truthy for a parameter opener\n\t                    if (token.type === Twig.expression.type.parameter.start) {\n\t                        unclosed_parameter_count++;\n\t                    } else if (token.type === Twig.expression.type.parameter.end) {\n\t                        unclosed_parameter_count--;\n\t                    } else if (token.type === Twig.expression.type.subexpression.end) {\n\t                        next_subexpression_start_invalid = true;\n\t                    }\n\n\t                    i--;\n\t                }\n\n\t                // If we found unclosed parameters, return false\n\t                // If we didnt find subexpression start, return false\n\t                // Otherwise return true\n\n\t                return (found_subexpression_start && (unclosed_parameter_count === 0));\n\t            },\n\t            compile: function(token, stack, output) {\n\t                // This is basically a copy of parameter end compilation\n\t                var stack_token,\n\t                    end_token = token;\n\n\t                stack_token = stack.pop();\n\t                while(stack.length > 0 && stack_token.type != Twig.expression.type.subexpression.start) {\n\t                    output.push(stack_token);\n\t                    stack_token = stack.pop();\n\t                }\n\n\t                // Move contents of parens into preceding filter\n\t                var param_stack = [];\n\t                while(token.type !== Twig.expression.type.subexpression.start) {\n\t                    // Add token to arguments stack\n\t                    param_stack.unshift(token);\n\t                    token = output.pop();\n\t                }\n\n\t                param_stack.unshift(token);\n\n\t                var is_expression = false;\n\n\t                //If the token at the top of the *stack* is a function token, pop it onto the output queue.\n\t                // Get the token preceding the parameters\n\t                stack_token = stack[stack.length-1];\n\n\t                if (stack_token === undefined ||\n\t                    (stack_token.type !== Twig.expression.type._function &&\n\t                    stack_token.type !== Twig.expression.type.filter &&\n\t                    stack_token.type !== Twig.expression.type.test &&\n\t                    stack_token.type !== Twig.expression.type.key.brackets)) {\n\n\t                    end_token.expression = true;\n\n\t                    // remove start and end token from stack\n\t                    param_stack.pop();\n\t                    param_stack.shift();\n\n\t                    end_token.params = param_stack;\n\n\t                    output.push(end_token);\n\t                } else {\n\t                    // This should never be hit\n\t                    end_token.expression = false;\n\t                    stack_token.params = param_stack;\n\t                }\n\t            },\n\t            parse: function(token, stack, context) {\n\t                var new_array = [],\n\t                    array_ended = false,\n\t                    value = null;\n\n\t                if (token.expression) {\n\t                    return Twig.expression.parseAsync.apply(this, [token.params, context])\n\t                    .then(function(value) {\n\t                        stack.push(value);\n\t                    });\n\t                } else {\n\t                    throw new Twig.Error(\"Unexpected subexpression end when token is not marked as an expression\");\n\t                }\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * Match a parameter set start.\n\t             */\n\t            type: Twig.expression.type.parameter.start,\n\t            regex: /^\\(/,\n\t            next: Twig.expression.set.expressions.concat([Twig.expression.type.parameter.end]),\n\t            validate: function(match, tokens) {\n\t                var last_token = tokens[tokens.length - 1];\n\t                // We can't use the regex to test if we follow a space because expression is trimmed\n\t                return last_token && (Twig.indexOf(Twig.expression.reservedWords, last_token.value.trim()) < 0);\n\t            },\n\t            compile: Twig.expression.fn.compile.push_both,\n\t            parse: Twig.expression.fn.parse.push\n\t        },\n\t        {\n\t            /**\n\t             * Match a parameter set end.\n\t             */\n\t            type: Twig.expression.type.parameter.end,\n\t            regex: /^\\)/,\n\t            next: Twig.expression.set.operations_extended,\n\t            compile: function(token, stack, output) {\n\t                var stack_token,\n\t                    end_token = token;\n\n\t                stack_token = stack.pop();\n\t                while(stack.length > 0 && stack_token.type != Twig.expression.type.parameter.start) {\n\t                    output.push(stack_token);\n\t                    stack_token = stack.pop();\n\t                }\n\n\t                // Move contents of parens into preceding filter\n\t                var param_stack = [];\n\t                while(token.type !== Twig.expression.type.parameter.start) {\n\t                    // Add token to arguments stack\n\t                    param_stack.unshift(token);\n\t                    token = output.pop();\n\t                }\n\t                param_stack.unshift(token);\n\n\t                var is_expression = false;\n\n\t                // Get the token preceding the parameters\n\t                token = output[output.length-1];\n\n\t                if (token === undefined ||\n\t                    (token.type !== Twig.expression.type._function &&\n\t                    token.type !== Twig.expression.type.filter &&\n\t                    token.type !== Twig.expression.type.test &&\n\t                    token.type !== Twig.expression.type.key.brackets)) {\n\n\t                    end_token.expression = true;\n\n\t                    // remove start and end token from stack\n\t                    param_stack.pop();\n\t                    param_stack.shift();\n\n\t                    end_token.params = param_stack;\n\n\t                    output.push(end_token);\n\n\t                } else {\n\t                    end_token.expression = false;\n\t                    token.params = param_stack;\n\t                }\n\t            },\n\t            parse: function(token, stack, context) {\n\t                var new_array = [],\n\t                    array_ended = false,\n\t                    value = null;\n\n\t                if (token.expression) {\n\t                    return Twig.expression.parseAsync.apply(this, [token.params, context])\n\t                    .then(function(value) {\n\t                        stack.push(value);\n\t                    });\n\t                } else {\n\n\t                    while (stack.length > 0) {\n\t                        value = stack.pop();\n\t                        // Push values into the array until the start of the array\n\t                        if (value && value.type && value.type == Twig.expression.type.parameter.start) {\n\t                            array_ended = true;\n\t                            break;\n\t                        }\n\t                        new_array.unshift(value);\n\t                    }\n\n\t                    if (!array_ended) {\n\t                        throw new Twig.Error(\"Expected end of parameter set.\");\n\t                    }\n\n\t                    stack.push(new_array);\n\t                }\n\t            }\n\t        },\n\t        {\n\t            type: Twig.expression.type.slice,\n\t            regex: /^\\[(\\d*\\:\\d*)\\]/,\n\t            next: Twig.expression.set.operations_extended,\n\t            compile: function(token, stack, output) {\n\t                var sliceRange = token.match[1].split(':');\n\n\t                //sliceStart can be undefined when we pass parameters to the slice filter later\n\t                var sliceStart = (sliceRange[0]) ? parseInt(sliceRange[0]) : undefined;\n\t                var sliceEnd = (sliceRange[1]) ? parseInt(sliceRange[1]) : undefined;\n\n\t                token.value = 'slice';\n\t                token.params = [sliceStart, sliceEnd];\n\n\t                //sliceEnd can't be undefined as the slice filter doesn't check for this, but it does check the length\n\t                //of the params array, so just shorten it.\n\t                if (!sliceEnd) {\n\t                    token.params = [sliceStart];\n\t                }\n\n\t                output.push(token);\n\t            },\n\t            parse: function(token, stack, context) {\n\t                var input = stack.pop(),\n\t                    params = token.params;\n\n\t                stack.push(Twig.filter.apply(this, [token.value, input, params]));\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * Match an array start.\n\t             */\n\t            type: Twig.expression.type.array.start,\n\t            regex: /^\\[/,\n\t            next: Twig.expression.set.expressions.concat([Twig.expression.type.array.end]),\n\t            compile: Twig.expression.fn.compile.push_both,\n\t            parse: Twig.expression.fn.parse.push\n\t        },\n\t        {\n\t            /**\n\t             * Match an array end.\n\t             */\n\t            type: Twig.expression.type.array.end,\n\t            regex: /^\\]/,\n\t            next: Twig.expression.set.operations_extended,\n\t            compile: function(token, stack, output) {\n\t                var i = stack.length - 1,\n\t                    stack_token;\n\t                // pop tokens off the stack until the start of the object\n\t                for(;i >= 0; i--) {\n\t                    stack_token = stack.pop();\n\t                    if (stack_token.type === Twig.expression.type.array.start) {\n\t                        break;\n\t                    }\n\t                    output.push(stack_token);\n\t                }\n\t                output.push(token);\n\t            },\n\t            parse: function(token, stack, context) {\n\t                var new_array = [],\n\t                    array_ended = false,\n\t                    value = null;\n\n\t                while (stack.length > 0) {\n\t                    value = stack.pop();\n\t                    // Push values into the array until the start of the array\n\t                    if (value.type && value.type == Twig.expression.type.array.start) {\n\t                        array_ended = true;\n\t                        break;\n\t                    }\n\t                    new_array.unshift(value);\n\t                }\n\t                if (!array_ended) {\n\t                    throw new Twig.Error(\"Expected end of array.\");\n\t                }\n\n\t                stack.push(new_array);\n\t            }\n\t        },\n\t        // Token that represents the start of a hash map '}'\n\t        //\n\t        // Hash maps take the form:\n\t        //    { \"key\": 'value', \"another_key\": item }\n\t        //\n\t        // Keys must be quoted (either single or double) and values can be any expression.\n\t        {\n\t            type: Twig.expression.type.object.start,\n\t            regex: /^\\{/,\n\t            next: Twig.expression.set.expressions.concat([Twig.expression.type.object.end]),\n\t            compile: Twig.expression.fn.compile.push_both,\n\t            parse: Twig.expression.fn.parse.push\n\t        },\n\n\t        // Token that represents the end of a Hash Map '}'\n\t        //\n\t        // This is where the logic for building the internal\n\t        // representation of a hash map is defined.\n\t        {\n\t            type: Twig.expression.type.object.end,\n\t            regex: /^\\}/,\n\t            next: Twig.expression.set.operations_extended,\n\t            compile: function(token, stack, output) {\n\t                var i = stack.length-1,\n\t                    stack_token;\n\n\t                // pop tokens off the stack until the start of the object\n\t                for(;i >= 0; i--) {\n\t                    stack_token = stack.pop();\n\t                    if (stack_token && stack_token.type === Twig.expression.type.object.start) {\n\t                        break;\n\t                    }\n\t                    output.push(stack_token);\n\t                }\n\t                output.push(token);\n\t            },\n\t            parse: function(end_token, stack, context) {\n\t                var new_object = {},\n\t                    object_ended = false,\n\t                    token = null,\n\t                    token_key = null,\n\t                    has_value = false,\n\t                    value = null;\n\n\t                while (stack.length > 0) {\n\t                    token = stack.pop();\n\t                    // Push values into the array until the start of the object\n\t                    if (token && token.type && token.type === Twig.expression.type.object.start) {\n\t                        object_ended = true;\n\t                        break;\n\t                    }\n\t                    if (token && token.type && (token.type === Twig.expression.type.operator.binary || token.type === Twig.expression.type.operator.unary) && token.key) {\n\t                        if (!has_value) {\n\t                            throw new Twig.Error(\"Missing value for key '\" + token.key + \"' in object definition.\");\n\t                        }\n\t                        new_object[token.key] = value;\n\n\t                        // Preserve the order that elements are added to the map\n\t                        // This is necessary since JavaScript objects don't\n\t                        // guarantee the order of keys\n\t                        if (new_object._keys === undefined) new_object._keys = [];\n\t                        new_object._keys.unshift(token.key);\n\n\t                        // reset value check\n\t                        value = null;\n\t                        has_value = false;\n\n\t                    } else {\n\t                        has_value = true;\n\t                        value = token;\n\t                    }\n\t                }\n\t                if (!object_ended) {\n\t                    throw new Twig.Error(\"Unexpected end of object.\");\n\t                }\n\n\t                stack.push(new_object);\n\t            }\n\t        },\n\n\t        // Token representing a filter\n\t        //\n\t        // Filters can follow any expression and take the form:\n\t        //    expression|filter(optional, args)\n\t        //\n\t        // Filter parsing is done in the Twig.filters namespace.\n\t        {\n\t            type: Twig.expression.type.filter,\n\t            // match a | then a letter or _, then any number of letters, numbers, _ or -\n\t            regex: /^\\|\\s?([a-zA-Z_][a-zA-Z0-9_\\-]*)/,\n\t            next: Twig.expression.set.operations_extended.concat([\n\t                    Twig.expression.type.parameter.start]),\n\t            compile: function(token, stack, output) {\n\t                token.value = token.match[1];\n\t                output.push(token);\n\t            },\n\t            parse: function(token, stack, context) {\n\t                var that = this,\n\t                    input = stack.pop();\n\n\t                return parseParams(this, token.params, context)\n\t                .then(function(params) {\n\t                    return Twig.filter.apply(that, [token.value, input, params]);\n\t                })\n\t                .then(function(value) {\n\t                    stack.push(value);\n\t                });\n\t            }\n\t        },\n\t        {\n\t            type: Twig.expression.type._function,\n\t            // match any letter or _, then any number of letters, numbers, _ or - followed by (\n\t            regex: /^([a-zA-Z_][a-zA-Z0-9_]*)\\s*\\(/,\n\t            next: Twig.expression.type.parameter.start,\n\t            validate: function(match, tokens) {\n\t                // Make sure this function is not a reserved word\n\t                return match[1] && (Twig.indexOf(Twig.expression.reservedWords, match[1]) < 0);\n\t            },\n\t            transform: function(match, tokens) {\n\t                return '(';\n\t            },\n\t            compile: function(token, stack, output) {\n\t                var fn = token.match[1];\n\t                token.fn = fn;\n\t                // cleanup token\n\t                delete token.match;\n\t                delete token.value;\n\n\t                output.push(token);\n\t            },\n\t            parse: function(token, stack, context) {\n\n\t                var that = this,\n\t                    fn = token.fn,\n\t                    value;\n\n\t                return parseParams(this, token.params, context)\n\t                .then(function(params) {\n\t                    if (Twig.functions[fn]) {\n\t                        // Get the function from the built-in functions\n\t                        value = Twig.functions[fn].apply(that, params);\n\n\t                    } else if (typeof context[fn] == 'function') {\n\t                        // Get the function from the user/context defined functions\n\t                        value = context[fn].apply(context, params);\n\n\t                    } else {\n\t                        throw new Twig.Error(fn + ' function does not exist and is not defined in the context');\n\t                    }\n\n\t                    return value;\n\t                })\n\t                .then(function(result) {\n\t                    stack.push(result);\n\t                });\n\t            }\n\t        },\n\n\t        // Token representing a variable.\n\t        //\n\t        // Variables can contain letters, numbers, underscores and\n\t        // dashes, but must start with a letter or underscore.\n\t        //\n\t        // Variables are retrieved from the render context and take\n\t        // the value of 'undefined' if the given variable doesn't\n\t        // exist in the context.\n\t        {\n\t            type: Twig.expression.type.variable,\n\t            // match any letter or _, then any number of letters, numbers, _ or -\n\t            regex: /^[a-zA-Z_][a-zA-Z0-9_]*/,\n\t            next: Twig.expression.set.operations_extended.concat([\n\t                    Twig.expression.type.parameter.start]),\n\t            compile: Twig.expression.fn.compile.push,\n\t            validate: function(match, tokens) {\n\t                return (Twig.indexOf(Twig.expression.reservedWords, match[0]) < 0);\n\t            },\n\t            parse: function(token, stack, context) {\n\t                // Get the variable from the context\n\t                return Twig.expression.resolveAsync.apply(this, [context[token.value], context])\n\t                .then(function(value) {\n\t                    stack.push(value);\n\t                });\n\t            }\n\t        },\n\t        {\n\t            type: Twig.expression.type.key.period,\n\t            regex: /^\\.([a-zA-Z0-9_]+)/,\n\t            next: Twig.expression.set.operations_extended.concat([\n\t                    Twig.expression.type.parameter.start]),\n\t            compile: function(token, stack, output) {\n\t                token.key = token.match[1];\n\t                delete token.match;\n\t                delete token.value;\n\n\t                output.push(token);\n\t            },\n\t            parse: function(token, stack, context, next_token) {\n\t                var that = this,\n\t                    key = token.key,\n\t                    object = stack.pop(),\n\t                    value;\n\n\t                return parseParams(this, token.params, context)\n\t                .then(function(params) {\n\t                    if (object === null || object === undefined) {\n\t                        if (that.options.strict_variables) {\n\t                            throw new Twig.Error(\"Can't access a key \" + key + \" on an null or undefined object.\");\n\t                        } else {\n\t                            value = undefined;\n\t                        }\n\t                    } else {\n\t                        var capitalize = function (value) {\n\t                            return value.substr(0, 1).toUpperCase() + value.substr(1);\n\t                        };\n\n\t                        // Get the variable from the context\n\t                        if (typeof object === 'object' && key in object) {\n\t                            value = object[key];\n\t                        } else if (object[\"get\" + capitalize(key)] !== undefined) {\n\t                            value = object[\"get\" + capitalize(key)];\n\t                        } else if (object[\"is\" + capitalize(key)] !== undefined) {\n\t                            value = object[\"is\" + capitalize(key)];\n\t                        } else {\n\t                            value = undefined;\n\t                        }\n\t                    }\n\n\t                    // When resolving an expression we need to pass next_token in case the expression is a function\n\t                    return Twig.expression.resolveAsync.apply(that, [value, context, params, next_token, object]);\n\t                })\n\t                .then(function(result) {\n\t                    stack.push(result);\n\t                });\n\t            }\n\t        },\n\t        {\n\t            type: Twig.expression.type.key.brackets,\n\t            regex: /^\\[([^\\]\\:]*)\\]/,\n\t            next: Twig.expression.set.operations_extended.concat([\n\t                    Twig.expression.type.parameter.start]),\n\t            compile: function(token, stack, output) {\n\t                var match = token.match[1];\n\t                delete token.value;\n\t                delete token.match;\n\n\t                // The expression stack for the key\n\t                token.stack = Twig.expression.compile({\n\t                    value: match\n\t                }).stack;\n\n\t                output.push(token);\n\t            },\n\t            parse: function(token, stack, context, next_token) {\n\t                // Evaluate key\n\t                var that = this,\n\t                    params = null,\n\t                    object,\n\t                    value;\n\n\t                return parseParams(this, token.params, context)\n\t                .then(function(parameters) {\n\t                    params = parameters;\n\t                    return Twig.expression.parseAsync.apply(that, [token.stack, context]);\n\t                })\n\t                .then(function(key) {\n\t                    object = stack.pop();\n\n\t                    if (object === null || object === undefined) {\n\t                        if (that.options.strict_variables) {\n\t                            throw new Twig.Error(\"Can't access a key \" + key + \" on an null or undefined object.\");\n\t                        } else {\n\t                            return null;\n\t                        }\n\t                    }\n\n\t                    // Get the variable from the context\n\t                    if (typeof object === 'object' && key in object) {\n\t                        value = object[key];\n\t                    } else {\n\t                        value = null;\n\t                    }\n\n\t                    // When resolving an expression we need to pass next_token in case the expression is a function\n\t                    return Twig.expression.resolveAsync.apply(that, [value, object, params, next_token]);\n\t                })\n\t                .then(function(result) {\n\t                    stack.push(result);\n\t                });\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * Match a null value.\n\t             */\n\t            type: Twig.expression.type._null,\n\t            // match a number\n\t            regex: /^(null|NULL|none|NONE)/,\n\t            next: Twig.expression.set.operations,\n\t            compile: function(token, stack, output) {\n\t                delete token.match;\n\t                token.value = null;\n\t                output.push(token);\n\t            },\n\t            parse: Twig.expression.fn.parse.push_value\n\t        },\n\t        {\n\t            /**\n\t             * Match the context\n\t             */\n\t            type: Twig.expression.type.context,\n\t            regex: /^_context/,\n\t            next: Twig.expression.set.operations_extended.concat([\n\t                    Twig.expression.type.parameter.start]),\n\t            compile: Twig.expression.fn.compile.push,\n\t            parse: function(token, stack, context) {\n\t                stack.push(context);\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * Match a boolean\n\t             */\n\t            type: Twig.expression.type.bool,\n\t            regex: /^(true|TRUE|false|FALSE)/,\n\t            next: Twig.expression.set.operations,\n\t            compile: function(token, stack, output) {\n\t                token.value = (token.match[0].toLowerCase( ) === \"true\");\n\t                delete token.match;\n\t                output.push(token);\n\t            },\n\t            parse: Twig.expression.fn.parse.push_value\n\t        }\n\t    ];\n\n\t    /**\n\t     * Resolve a context value.\n\t     *\n\t     * If the value is a function, it is executed with a context parameter.\n\t     *\n\t     * @param {string} key The context object key.\n\t     * @param {Object} context The render context.\n\t     */\n\t    Twig.expression.resolveAsync = function(value, context, params, next_token, object) {\n\t        if (typeof value == 'function') {\n\t            var promise = Twig.Promise.resolve(params);\n\n\t            /*\n\t            If value is a function, it will have been impossible during the compile stage to determine that a following\n\t            set of parentheses were parameters for this function.\n\n\t            Those parentheses will have therefore been marked as an expression, with their own parameters, which really\n\t            belong to this function.\n\n\t            Those parameters will also need parsing in case they are actually an expression to pass as parameters.\n\t             */\n\t            if (next_token && next_token.type === Twig.expression.type.parameter.end) {\n\t                //When parsing these parameters, we need to get them all back, not just the last item on the stack.\n\t                var tokens_are_parameters = true;\n\n\t                promise = promise.then(function() {\n\t                    return next_token.params && Twig.expression.parseAsync.apply(this, [next_token.params, context, tokens_are_parameters]);\n\t                })\n\t                .then(function(p) {\n\t                    //Clean up the parentheses tokens on the next loop\n\t                    next_token.cleanup = true;\n\n\t                    return p;\n\t                });\n\t            }\n\n\t            return promise.then(function(params) {\n\t                return value.apply(object || context, params || []);\n\t            });\n\t        } else {\n\t            return Twig.Promise.resolve(value);\n\t        }\n\t    };\n\n\t    Twig.expression.resolve = function(value, context, params, next_token, object) {\n\t        var is_async = true,\n\t            result;\n\n\t        Twig.expression.resolveAsync.apply(this, [value, context, params, next_token, object])\n\t        .then(function(r) {\n\t            is_async = false;\n\t            result = r;\n\t        });\n\n\t        if (is_async)\n\t            throw new Twig.Error('You are using Twig.js in sync mode in combination with async extensions.');\n\n\t        return result;\n\t    }\n\n\t    /**\n\t     * Registry for logic handlers.\n\t     */\n\t    Twig.expression.handler = {};\n\n\t    /**\n\t     * Define a new expression type, available at Twig.logic.type.{type}\n\t     *\n\t     * @param {string} type The name of the new type.\n\t     */\n\t    Twig.expression.extendType = function (type) {\n\t        Twig.expression.type[type] = \"Twig.expression.type.\" + type;\n\t    };\n\n\t    /**\n\t     * Extend the expression parsing functionality with a new definition.\n\t     *\n\t     * Token definitions follow this format:\n\t     *  {\n\t     *      type:     One of Twig.expression.type.[type], either pre-defined or added using\n\t     *                    Twig.expression.extendType\n\t     *\n\t     *      next:     Array of types from Twig.expression.type that can follow this token,\n\t     *\n\t     *      regex:    A regex or array of regex's that should match the token.\n\t     *\n\t     *      compile: function(token, stack, output) called when this token is being compiled.\n\t     *                   Should return an object with stack and output set.\n\t     *\n\t     *      parse:   function(token, stack, context) called when this token is being parsed.\n\t     *                   Should return an object with stack and context set.\n\t     *  }\n\t     *\n\t     * @param {Object} definition A token definition.\n\t     */\n\t    Twig.expression.extend = function (definition) {\n\t        if (!definition.type) {\n\t            throw new Twig.Error(\"Unable to extend logic definition. No type provided for \" + definition);\n\t        }\n\t        Twig.expression.handler[definition.type] = definition;\n\t    };\n\n\t    // Extend with built-in expressions\n\t    while (Twig.expression.definitions.length > 0) {\n\t        Twig.expression.extend(Twig.expression.definitions.shift());\n\t    }\n\n\t    /**\n\t     * Break an expression into tokens defined in Twig.expression.definitions.\n\t     *\n\t     * @param {string} expression The string to tokenize.\n\t     *\n\t     * @return {Array} An array of tokens.\n\t     */\n\t    Twig.expression.tokenize = function (expression) {\n\t        var tokens = [],\n\t            // Keep an offset of the location in the expression for error messages.\n\t            exp_offset = 0,\n\t            // The valid next tokens of the previous token\n\t            next = null,\n\t            // Match information\n\t            type, regex, regex_array,\n\t            // The possible next token for the match\n\t            token_next,\n\t            // Has a match been found from the definitions\n\t            match_found, invalid_matches = [], match_function;\n\n\t        match_function = function () {\n\t            var match = Array.prototype.slice.apply(arguments),\n\t                string = match.pop(),\n\t                offset = match.pop();\n\n\t            Twig.log.trace(\"Twig.expression.tokenize\",\n\t                           \"Matched a \", type, \" regular expression of \", match);\n\n\t            if (next && Twig.indexOf(next, type) < 0) {\n\t                invalid_matches.push(\n\t                    type + \" cannot follow a \" + tokens[tokens.length - 1].type +\n\t                           \" at template:\" + exp_offset + \" near '\" + match[0].substring(0, 20) +\n\t                           \"...'\"\n\t                );\n\t                // Not a match, don't change the expression\n\t                return match[0];\n\t            }\n\n\t            // Validate the token if a validation function is provided\n\t            if (Twig.expression.handler[type].validate &&\n\t                    !Twig.expression.handler[type].validate(match, tokens)) {\n\t                return match[0];\n\t            }\n\n\t            invalid_matches = [];\n\n\t            tokens.push({\n\t                type:  type,\n\t                value: match[0],\n\t                match: match\n\t            });\n\n\t            match_found = true;\n\t            next = token_next;\n\t            exp_offset += match[0].length;\n\n\t            // Does the token need to return output back to the expression string\n\t            // e.g. a function match of cycle( might return the '(' back to the expression\n\t            // This allows look-ahead to differentiate between token types (e.g. functions and variable names)\n\t            if (Twig.expression.handler[type].transform) {\n\t                return Twig.expression.handler[type].transform(match, tokens);\n\t            }\n\t            return '';\n\t        };\n\n\t        Twig.log.debug(\"Twig.expression.tokenize\", \"Tokenizing expression \", expression);\n\n\t        while (expression.length > 0) {\n\t            expression = expression.trim();\n\t            for (type in Twig.expression.handler) {\n\t                if (Twig.expression.handler.hasOwnProperty(type)) {\n\t                    token_next = Twig.expression.handler[type].next;\n\t                    regex = Twig.expression.handler[type].regex;\n\t                    Twig.log.trace(\"Checking type \", type, \" on \", expression);\n\t                    if (regex instanceof Array) {\n\t                        regex_array = regex;\n\t                    } else {\n\t                        regex_array = [regex];\n\t                    }\n\n\t                    match_found = false;\n\t                    while (regex_array.length > 0) {\n\t                        regex = regex_array.pop();\n\t                        expression = expression.replace(regex, match_function);\n\t                    }\n\t                    // An expression token has been matched. Break the for loop and start trying to\n\t                    //  match the next template (if expression isn't empty.)\n\t                    if (match_found) {\n\t                        break;\n\t                    }\n\t                }\n\t            }\n\t            if (!match_found) {\n\t                if (invalid_matches.length > 0) {\n\t                    throw new Twig.Error(invalid_matches.join(\" OR \"));\n\t                } else {\n\t                    throw new Twig.Error(\"Unable to parse '\" + expression + \"' at template position\" + exp_offset);\n\t                }\n\t            }\n\t        }\n\n\t        Twig.log.trace(\"Twig.expression.tokenize\", \"Tokenized to \", tokens);\n\t        return tokens;\n\t    };\n\n\t    /**\n\t     * Compile an expression token.\n\t     *\n\t     * @param {Object} raw_token The uncompiled token.\n\t     *\n\t     * @return {Object} The compiled token.\n\t     */\n\t    Twig.expression.compile = function (raw_token) {\n\t        var expression = raw_token.value,\n\t            // Tokenize expression\n\t            tokens = Twig.expression.tokenize(expression),\n\t            token = null,\n\t            output = [],\n\t            stack = [],\n\t            token_template = null;\n\n\t        Twig.log.trace(\"Twig.expression.compile: \", \"Compiling \", expression);\n\n\t        // Push tokens into RPN stack using the Shunting-yard algorithm\n\t        // See http://en.wikipedia.org/wiki/Shunting_yard_algorithm\n\n\t        while (tokens.length > 0) {\n\t            token = tokens.shift();\n\t            token_template = Twig.expression.handler[token.type];\n\n\t            Twig.log.trace(\"Twig.expression.compile: \", \"Compiling \", token);\n\n\t            // Compile the template\n\t            token_template.compile && token_template.compile(token, stack, output);\n\n\t            Twig.log.trace(\"Twig.expression.compile: \", \"Stack is\", stack);\n\t            Twig.log.trace(\"Twig.expression.compile: \", \"Output is\", output);\n\t        }\n\n\t        while(stack.length > 0) {\n\t            output.push(stack.pop());\n\t        }\n\n\t        Twig.log.trace(\"Twig.expression.compile: \", \"Final output is\", output);\n\n\t        raw_token.stack = output;\n\t        delete raw_token.value;\n\n\t        return raw_token;\n\t    };\n\n\n\t    /**\n\t     * Parse an RPN expression stack within a context.\n\t     *\n\t     * @param {Array} tokens An array of compiled expression tokens.\n\t     * @param {Object} context The render context to parse the tokens with.\n\t     *\n\t     * @return {Object} The result of parsing all the tokens. The result\n\t     *                  can be anything, String, Array, Object, etc... based on\n\t     *                  the given expression.\n\t     */\n\t    Twig.expression.parse = function (tokens, context, tokens_are_parameters, allow_async) {\n\t        var that = this;\n\n\t        // If the token isn't an array, make it one.\n\t        if (!(tokens instanceof Array)) {\n\t            tokens = [tokens];\n\t        }\n\n\t        // The output stack\n\t        var stack = [],\n\t            next_token,\n\t            output = null,\n\t            promise = null,\n\t            is_async = true,\n\t            token_template = null,\n\t            loop_token_fixups = [];\n\n\t        promise = Twig.async.forEach(tokens, function (token, index) {\n\t            //If the token is marked for cleanup, we don't need to parse it\n\t            if (token.cleanup) {\n\t                return;\n\t            }\n\n\t            var result = null;\n\n\t            //Determine the token that follows this one so that we can pass it to the parser\n\t            if (tokens.length > index + 1) {\n\t                next_token = tokens[index + 1];\n\t            }\n\n\t            token_template = Twig.expression.handler[token.type];\n\n\t            if (token_template.parse)\n\t                result = token_template.parse.apply(that, [token, stack, context, next_token]);\n\n\t            //Store any binary tokens for later if we are in a loop.\n\t            if (context.loop && token.type === Twig.expression.type.operator.binary) {\n\t                loop_token_fixups.push(token);\n\t            }\n\n\t            return result;\n\t        })\n\t        .then(function() {\n\t            //Check every fixup and remove \"key\" as long as they still have \"params\". This covers the use case where\n\t            //a \":\" operator is used in a loop with a \"(expression):\" statement. We need to be able to evaluate the expression\n\t            Twig.forEach(loop_token_fixups, function (loop_token_fixup) {\n\t                if (loop_token_fixup.params && loop_token_fixup.key) {\n\t                    delete loop_token_fixup[\"key\"];\n\t                }\n\t            });\n\n\t            //If parse has been called with a set of tokens that are parameters, we need to return the whole stack,\n\t            //wrapped in an Array.\n\t            if (tokens_are_parameters) {\n\t                var params = [];\n\t                while (stack.length > 0) {\n\t                    params.unshift(stack.pop());\n\t                }\n\n\t                stack.push(params);\n\t            }\n\n\t            if (allow_async)\n\t                return Twig.Promise.resolve(stack.pop());\n\t        })\n\t        .then(function(v) {\n\t            is_async = false;\n\t            return v;\n\t        });\n\n\t        if (allow_async)\n\t            return promise;\n\n\t        if (is_async)\n\t            throw new Twig.Error('You are using Twig.js in sync mode in combination with async extensions.');\n\n\t        // Pop the final value off the stack\n\t        return stack.pop();\n\t    };\n\n\t    return Twig;\n\n\t};\n\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t// ## twig.expression.operator.js\n\t//\n\t// This file handles operator lookups and parsing.\n\tmodule.exports = function (Twig) {\n\t    \"use strict\";\n\n\t    /**\n\t     * Operator associativity constants.\n\t     */\n\t    Twig.expression.operator = {\n\t        leftToRight: 'leftToRight',\n\t        rightToLeft: 'rightToLeft'\n\t    };\n\n\t    var containment = function(a, b) {\n\t        if (b === undefined || b === null) {\n\t            return null;\n\t        } else if (b.indexOf !== undefined) {\n\t            // String\n\t            return a === b || a !== '' && b.indexOf(a) > -1;\n\t        } else {\n\t            var el;\n\t            for (el in b) {\n\t                if (b.hasOwnProperty(el) && b[el] === a) {\n\t                    return true;\n\t                }\n\t            }\n\t            return false;\n\t        }\n\t    };\n\n\t    /**\n\t     * Get the precidence and associativity of an operator. These follow the order that C/C++ use.\n\t     * See http://en.wikipedia.org/wiki/Operators_in_C_and_C++ for the table of values.\n\t     */\n\t    Twig.expression.operator.lookup = function (operator, token) {\n\t        switch (operator) {\n\t            case \"..\":\n\t                token.precidence = 20;\n\t                token.associativity = Twig.expression.operator.leftToRight;\n\t                break;\n\n\t            case ',':\n\t                token.precidence = 18;\n\t                token.associativity = Twig.expression.operator.leftToRight;\n\t                break;\n\n\t            // Ternary\n\t            case '?:':\n\t            case '?':\n\t            case ':':\n\t                token.precidence = 16;\n\t                token.associativity = Twig.expression.operator.rightToLeft;\n\t                break;\n\n\t            case 'or':\n\t                token.precidence = 14;\n\t                token.associativity = Twig.expression.operator.leftToRight;\n\t                break;\n\n\t            case 'and':\n\t                token.precidence = 13;\n\t                token.associativity = Twig.expression.operator.leftToRight;\n\t                break;\n\n\t            case 'b-or':\n\t                token.precidence = 12;\n\t                token.associativity = Twig.expression.operator.leftToRight;\n\t                break;\n\n\t            case 'b-xor':\n\t                token.precidence = 11;\n\t                token.associativity = Twig.expression.operator.leftToRight;\n\t                break;\n\n\t            case 'b-and':\n\t                token.precidence = 10;\n\t                token.associativity = Twig.expression.operator.leftToRight;\n\t                break;\n\n\t            case '==':\n\t            case '!=':\n\t                token.precidence = 9;\n\t                token.associativity = Twig.expression.operator.leftToRight;\n\t                break;\n\n\t            case '<':\n\t            case '<=':\n\t            case '>':\n\t            case '>=':\n\t            case 'not in':\n\t            case 'in':\n\t                token.precidence = 8;\n\t                token.associativity = Twig.expression.operator.leftToRight;\n\t                break;\n\n\t            case '~': // String concatination\n\t            case '+':\n\t            case '-':\n\t                token.precidence = 6;\n\t                token.associativity = Twig.expression.operator.leftToRight;\n\t                break;\n\n\t            case '//':\n\t            case '**':\n\t            case '*':\n\t            case '/':\n\t            case '%':\n\t                token.precidence = 5;\n\t                token.associativity = Twig.expression.operator.leftToRight;\n\t                break;\n\n\t            case 'not':\n\t                token.precidence = 3;\n\t                token.associativity = Twig.expression.operator.rightToLeft;\n\t                break;\n\n\t            default:\n\t                throw new Twig.Error(\"Failed to lookup operator: \" + operator + \" is an unknown operator.\");\n\t        }\n\t        token.operator = operator;\n\t        return token;\n\t    };\n\n\t    /**\n\t     * Handle operations on the RPN stack.\n\t     *\n\t     * Returns the updated stack.\n\t     */\n\t    Twig.expression.operator.parse = function (operator, stack) {\n\t        Twig.log.trace(\"Twig.expression.operator.parse: \", \"Handling \", operator);\n\t        var a, b, c;\n\n\t        if (operator === '?') {\n\t            c = stack.pop();\n\t        }\n\n\t        b = stack.pop();\n\t        if (operator !== 'not') {\n\t            a = stack.pop();\n\t        }\n\n\t        if (operator !== 'in' && operator !== 'not in') {\n\t            if (a && Array.isArray(a)) {\n\t                a = a.length;\n\t            }\n\n\t            if (b && Array.isArray(b)) {\n\t                b = b.length;\n\t            }\n\t        }\n\n\t        switch (operator) {\n\t            case ':':\n\t                // Ignore\n\t                break;\n\n\t            case '?:':\n\t                if (Twig.lib.boolval(a)) {\n\t                    stack.push(a);\n\t                } else {\n\t                    stack.push(b);\n\t                }\n\t                break;\n\t            case '?':\n\t                if (a === undefined) {\n\t                    //An extended ternary.\n\t                    a = b;\n\t                    b = c;\n\t                    c = undefined;\n\t                }\n\n\t                if (Twig.lib.boolval(a)) {\n\t                    stack.push(b);\n\t                } else {\n\t                    stack.push(c);\n\t                }\n\t                break;\n\n\t            case '+':\n\t                b = parseFloat(b);\n\t                a = parseFloat(a);\n\t                stack.push(a + b);\n\t                break;\n\n\t            case '-':\n\t                b = parseFloat(b);\n\t                a = parseFloat(a);\n\t                stack.push(a - b);\n\t                break;\n\n\t            case '*':\n\t                b = parseFloat(b);\n\t                a = parseFloat(a);\n\t                stack.push(a * b);\n\t                break;\n\n\t            case '/':\n\t                b = parseFloat(b);\n\t                a = parseFloat(a);\n\t                stack.push(a / b);\n\t                break;\n\n\t            case '//':\n\t                b = parseFloat(b);\n\t                a = parseFloat(a);\n\t                stack.push(Math.floor(a / b));\n\t                break;\n\n\t            case '%':\n\t                b = parseFloat(b);\n\t                a = parseFloat(a);\n\t                stack.push(a % b);\n\t                break;\n\n\t            case '~':\n\t                stack.push( (a != null ? a.toString() : \"\")\n\t                          + (b != null ? b.toString() : \"\") );\n\t                break;\n\n\t            case 'not':\n\t            case '!':\n\t                stack.push(!Twig.lib.boolval(b));\n\t                break;\n\n\t            case '<':\n\t                stack.push(a < b);\n\t                break;\n\n\t            case '<=':\n\t                stack.push(a <= b);\n\t                break;\n\n\t            case '>':\n\t                stack.push(a > b);\n\t                break;\n\n\t            case '>=':\n\t                stack.push(a >= b);\n\t                break;\n\n\t            case '===':\n\t                stack.push(a === b);\n\t                break;\n\n\t            case '==':\n\t                stack.push(a == b);\n\t                break;\n\n\t            case '!==':\n\t                stack.push(a !== b);\n\t                break;\n\n\t            case '!=':\n\t                stack.push(a != b);\n\t                break;\n\n\t            case 'or':\n\t                stack.push(a || b);\n\t                break;\n\n\t            case 'b-or':\n\t                stack.push(a | b);\n\t                break;\n\n\t            case 'b-xor':\n\t                stack.push(a ^ b);\n\t                break;\n\n\t            case 'and':\n\t                stack.push(a && b);\n\t                break;\n\n\t            case 'b-and':\n\t                stack.push(a & b);\n\t                break;\n\n\t            case '**':\n\t                stack.push(Math.pow(a, b));\n\t                break;\n\n\t            case 'not in':\n\t                stack.push( !containment(a, b) );\n\t                break;\n\n\t            case 'in':\n\t                stack.push( containment(a, b) );\n\t                break;\n\n\t            case '..':\n\t                stack.push( Twig.functions.range(a, b) );\n\t                break;\n\n\t            default:\n\t                debugger;\n\t                throw new Twig.Error(\"Failed to parse operator: \" + operator + \" is an unknown operator.\");\n\t        }\n\t    };\n\n\t    return Twig;\n\n\t};\n\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t// ## twig.filters.js\n\t//\n\t// This file handles parsing filters.\n\tmodule.exports = function (Twig) {\n\n\t    // Determine object type\n\t    function is(type, obj) {\n\t        var clas = Object.prototype.toString.call(obj).slice(8, -1);\n\t        return obj !== undefined && obj !== null && clas === type;\n\t    }\n\n\t    Twig.filters = {\n\t        // String Filters\n\t        upper:  function(value) {\n\t            if ( typeof value !== \"string\" ) {\n\t               return value;\n\t            }\n\n\t            return value.toUpperCase();\n\t        },\n\t        lower: function(value) {\n\t            if ( typeof value !== \"string\" ) {\n\t               return value;\n\t            }\n\n\t            return value.toLowerCase();\n\t        },\n\t        capitalize: function(value) {\n\t            if ( typeof value !== \"string\" ) {\n\t                 return value;\n\t            }\n\n\t            return value.substr(0, 1).toUpperCase() + value.toLowerCase().substr(1);\n\t        },\n\t        title: function(value) {\n\t            if ( typeof value !== \"string\" ) {\n\t               return value;\n\t            }\n\n\t            return value.toLowerCase().replace( /(^|\\s)([a-z])/g , function(m, p1, p2){\n\t                return p1 + p2.toUpperCase();\n\t            });\n\t        },\n\t        length: function(value) {\n\t            if (Twig.lib.is(\"Array\", value) || typeof value === \"string\") {\n\t                return value.length;\n\t            } else if (Twig.lib.is(\"Object\", value)) {\n\t                if (value._keys === undefined) {\n\t                    return Object.keys(value).length;\n\t                } else {\n\t                    return value._keys.length;\n\t                }\n\t            } else {\n\t                return 0;\n\t            }\n\t        },\n\n\t        // Array/Object Filters\n\t        reverse: function(value) {\n\t            if (is(\"Array\", value)) {\n\t                return value.reverse();\n\t            } else if (is(\"String\", value)) {\n\t                return value.split(\"\").reverse().join(\"\");\n\t            } else if (is(\"Object\", value)) {\n\t                var keys = value._keys || Object.keys(value).reverse();\n\t                value._keys = keys;\n\t                return value;\n\t            }\n\t        },\n\t        sort: function(value) {\n\t            if (is(\"Array\", value)) {\n\t                return value.sort();\n\t            } else if (is('Object', value)) {\n\t                // Sorting objects isn't obvious since the order of\n\t                // returned keys isn't guaranteed in JavaScript.\n\t                // Because of this we use a \"hidden\" key called _keys to\n\t                // store the keys in the order we want to return them.\n\n\t                delete value._keys;\n\t                var keys = Object.keys(value),\n\t                    sorted_keys = keys.sort(function(a, b) {\n\t                        var a1, a2;\n\n\t                        // if a and b are comparable, we're fine :-)\n\t                        if((value[a] > value[b]) == !(value[a] <= value[b])) {\n\t                            return value[a] > value[b] ? 1 :\n\t\t\t\t           value[a] < value[b] ? -1 :\n\t\t\t\t\t   0;\n\t                        }\n\t                        // if a and b can be parsed as numbers, we can compare\n\t                        // their numeric value\n\t                        else if(!isNaN(a1 = parseFloat(value[a])) &&\n\t                                !isNaN(b1 = parseFloat(value[b]))) {\n\t                            return a1 > b1 ? 1 :\n\t\t\t\t           a1 < b1 ? -1 :\n\t\t\t\t\t   0;\n\t                        }\n\t                        // if one of the values is a string, we convert the\n\t                        // other value to string as well\n\t                        else if(typeof value[a] == 'string') {\n\t                            return value[a] > value[b].toString() ? 1 :\n\t                                   value[a] < value[b].toString() ? -1 :\n\t\t\t\t\t   0;\n\t                        }\n\t                        else if(typeof value[b] == 'string') {\n\t                            return value[a].toString() > value[b] ? 1 :\n\t                                   value[a].toString() < value[b] ? -1 :\n\t\t\t\t\t   0;\n\t                        }\n\t                        // everything failed - return 'null' as sign, that\n\t                        // the values are not comparable\n\t                        else {\n\t                            return null;\n\t                        }\n\t                    });\n\t                value._keys = sorted_keys;\n\t                return value;\n\t            }\n\t        },\n\t        keys: function(value) {\n\t            if (value === undefined || value === null){\n\t                return;\n\t           }\n\n\t            var keyset = value._keys || Object.keys(value),\n\t                output = [];\n\n\t            Twig.forEach(keyset, function(key) {\n\t                if (key === \"_keys\") return; // Ignore the _keys property\n\t                if (value.hasOwnProperty(key)) {\n\t                    output.push(key);\n\t                }\n\t            });\n\t            return output;\n\t        },\n\t        url_encode: function(value) {\n\t            if (value === undefined || value === null){\n\t                return;\n\t            }\n\n\t            var result = encodeURIComponent(value);\n\t            result = result.replace(\"'\", \"%27\");\n\t            return result;\n\t        },\n\t        join: function(value, params) {\n\t            if (value === undefined || value === null){\n\t                return;\n\t            }\n\n\t            var join_str = \"\",\n\t                output = [],\n\t                keyset = null;\n\n\t            if (params && params[0]) {\n\t                join_str = params[0];\n\t            }\n\t            if (is(\"Array\", value)) {\n\t                output = value;\n\t            } else {\n\t                keyset = value._keys || Object.keys(value);\n\t                Twig.forEach(keyset, function(key) {\n\t                    if (key === \"_keys\") return; // Ignore the _keys property\n\t                    if (value.hasOwnProperty(key)) {\n\t                        output.push(value[key]);\n\t                    }\n\t                });\n\t            }\n\t            return output.join(join_str);\n\t        },\n\t        \"default\": function(value, params) {\n\t            if (params !== undefined && params.length > 1) {\n\t                throw new Twig.Error(\"default filter expects one argument\");\n\t            }\n\t            if (value === undefined || value === null || value === '' ) {\n\t                if (params === undefined) {\n\t                    return '';\n\t                }\n\n\t                return params[0];\n\t            } else {\n\t                return value;\n\t            }\n\t        },\n\t        json_encode: function(value) {\n\t            if(value === undefined || value === null) {\n\t                return \"null\";\n\t            }\n\t            else if ((typeof value == 'object') && (is(\"Array\", value))) {\n\t                output = [];\n\n\t                Twig.forEach(value, function(v) {\n\t                    output.push(Twig.filters.json_encode(v));\n\t                });\n\n\t                return \"[\" + output.join(\",\") + \"]\";\n\t            }\n\t            else if (typeof value == 'object') {\n\t                var keyset = value._keys || Object.keys(value),\n\t                output = [];\n\n\t                Twig.forEach(keyset, function(key) {\n\t                    output.push(JSON.stringify(key) + \":\" + Twig.filters.json_encode(value[key]));\n\t                });\n\n\t                return \"{\" + output.join(\",\") + \"}\";\n\t            }\n\t            else {\n\t                return JSON.stringify(value);\n\t            }\n\t        },\n\t        merge: function(value, params) {\n\t            var obj = [],\n\t                arr_index = 0,\n\t                keyset = [];\n\n\t            // Check to see if all the objects being merged are arrays\n\t            if (!is(\"Array\", value)) {\n\t                // Create obj as an Object\n\t                obj = { };\n\t            } else {\n\t                Twig.forEach(params, function(param) {\n\t                    if (!is(\"Array\", param)) {\n\t                        obj = { };\n\t                    }\n\t                });\n\t            }\n\t            if (!is(\"Array\", obj)) {\n\t                obj._keys = [];\n\t            }\n\n\t            if (is(\"Array\", value)) {\n\t                Twig.forEach(value, function(val) {\n\t                    if (obj._keys) obj._keys.push(arr_index);\n\t                    obj[arr_index] = val;\n\t                    arr_index++;\n\t                });\n\t            } else {\n\t                keyset = value._keys || Object.keys(value);\n\t                Twig.forEach(keyset, function(key) {\n\t                    obj[key] = value[key];\n\t                    obj._keys.push(key);\n\n\t                    // Handle edge case where a number index in an object is greater than\n\t                    //   the array counter. In such a case, the array counter is increased\n\t                    //   one past the index.\n\t                    //\n\t                    // Example {{ [\"a\", \"b\"]|merge({\"4\":\"value\"}, [\"c\", \"d\"])\n\t                    // Without this, d would have an index of \"4\" and overwrite the value\n\t                    //   of \"value\"\n\t                    var int_key = parseInt(key, 10);\n\t                    if (!isNaN(int_key) && int_key >= arr_index) {\n\t                        arr_index = int_key + 1;\n\t                    }\n\t                });\n\t            }\n\n\t            // mixin the merge arrays\n\t            Twig.forEach(params, function(param) {\n\t                if (is(\"Array\", param)) {\n\t                    Twig.forEach(param, function(val) {\n\t                        if (obj._keys) obj._keys.push(arr_index);\n\t                        obj[arr_index] = val;\n\t                        arr_index++;\n\t                    });\n\t                } else {\n\t                    keyset = param._keys || Object.keys(param);\n\t                    Twig.forEach(keyset, function(key) {\n\t                        if (!obj[key]) obj._keys.push(key);\n\t                        obj[key] = param[key];\n\n\t                        var int_key = parseInt(key, 10);\n\t                        if (!isNaN(int_key) && int_key >= arr_index) {\n\t                            arr_index = int_key + 1;\n\t                        }\n\t                    });\n\t                }\n\t            });\n\t            if (params.length === 0) {\n\t                throw new Twig.Error(\"Filter merge expects at least one parameter\");\n\t            }\n\n\t            return obj;\n\t        },\n\t        date: function(value, params) {\n\t            var date = Twig.functions.date(value);\n\t            var format = params && params.length ? params[0] : 'F j, Y H:i';\n\t            return Twig.lib.date(format, date);\n\t        },\n\n\t        date_modify: function(value, params) {\n\t            if (value === undefined || value === null) {\n\t                return;\n\t            }\n\t            if (params === undefined || params.length !== 1) {\n\t                throw new Twig.Error(\"date_modify filter expects 1 argument\");\n\t            }\n\n\t            var modifyText = params[0], time;\n\n\t            if (Twig.lib.is(\"Date\", value)) {\n\t                time = Twig.lib.strtotime(modifyText, value.getTime() / 1000);\n\t            }\n\t            if (Twig.lib.is(\"String\", value)) {\n\t                time = Twig.lib.strtotime(modifyText, Twig.lib.strtotime(value));\n\t            }\n\t            if (Twig.lib.is(\"Number\", value)) {\n\t                time = Twig.lib.strtotime(modifyText, value);\n\t            }\n\n\t            return new Date(time * 1000);\n\t        },\n\n\t        replace: function(value, params) {\n\t            if (value === undefined||value === null){\n\t                return;\n\t            }\n\n\t            var pairs = params[0],\n\t                tag;\n\t            for (tag in pairs) {\n\t                if (pairs.hasOwnProperty(tag) && tag !== \"_keys\") {\n\t                    value = Twig.lib.replaceAll(value, tag, pairs[tag]);\n\t                }\n\t            }\n\t            return value;\n\t        },\n\n\t        format: function(value, params) {\n\t            if (value === undefined || value === null){\n\t                return;\n\t            }\n\n\t            return Twig.lib.vsprintf(value, params);\n\t        },\n\n\t        striptags: function(value) {\n\t            if (value === undefined || value === null){\n\t                return;\n\t            }\n\n\t            return Twig.lib.strip_tags(value);\n\t        },\n\n\t        escape: function(value, params) {\n\t            if (value === undefined|| value === null){\n\t                return;\n\t            }\n\n\t            var strategy = \"html\";\n\t            if(params && params.length && params[0] !== true)\n\t                strategy = params[0];\n\n\t            if(strategy == \"html\") {\n\t                var raw_value = value.toString().replace(/&/g, \"&amp;\")\n\t                            .replace(/</g, \"&lt;\")\n\t                            .replace(/>/g, \"&gt;\")\n\t                            .replace(/\"/g, \"&quot;\")\n\t                            .replace(/'/g, \"&#039;\");\n\t                return Twig.Markup(raw_value, 'html');\n\t            } else if(strategy == \"js\") {\n\t                var raw_value = value.toString();\n\t                var result = \"\";\n\n\t                for(var i = 0; i < raw_value.length; i++) {\n\t                    if(raw_value[i].match(/^[a-zA-Z0-9,\\._]$/))\n\t                        result += raw_value[i];\n\t                    else {\n\t                        var char_code = raw_value.charCodeAt(i);\n\n\t                        if(char_code < 0x80)\n\t                            result += \"\\\\x\" + char_code.toString(16).toUpperCase();\n\t                        else\n\t                            result += Twig.lib.sprintf(\"\\\\u%04s\", char_code.toString(16).toUpperCase());\n\t                    }\n\t                }\n\n\t                return Twig.Markup(result, 'js');\n\t            } else if(strategy == \"css\") {\n\t                var raw_value = value.toString();\n\t                var result = \"\";\n\n\t                for(var i = 0; i < raw_value.length; i++) {\n\t                    if(raw_value[i].match(/^[a-zA-Z0-9]$/))\n\t                        result += raw_value[i];\n\t                    else {\n\t                        var char_code = raw_value.charCodeAt(i);\n\t                        result += \"\\\\\" + char_code.toString(16).toUpperCase() + \" \";\n\t                    }\n\t                }\n\n\t                return Twig.Markup(result, 'css');\n\t            } else if(strategy == \"url\") {\n\t                var result = Twig.filters.url_encode(value);\n\t                return Twig.Markup(result, 'url');\n\t            } else if(strategy == \"html_attr\") {\n\t                var raw_value = value.toString();\n\t                var result = \"\";\n\n\t                for(var i = 0; i < raw_value.length; i++) {\n\t                    if(raw_value[i].match(/^[a-zA-Z0-9,\\.\\-_]$/))\n\t                        result += raw_value[i];\n\t                    else if(raw_value[i].match(/^[&<>\"]$/))\n\t                        result += raw_value[i].replace(/&/g, \"&amp;\")\n\t                                .replace(/</g, \"&lt;\")\n\t                                .replace(/>/g, \"&gt;\")\n\t                                .replace(/\"/g, \"&quot;\");\n\t                    else {\n\t                        var char_code = raw_value.charCodeAt(i);\n\n\t                        // The following replaces characters undefined in HTML with\n\t                        // the hex entity for the Unicode replacement character.\n\t                        if(char_code <= 0x1f && char_code != 0x09 && char_code != 0x0a && char_code != 0x0d)\n\t                            result += \"&#xFFFD;\";\n\t                        else if(char_code < 0x80)\n\t                            result += Twig.lib.sprintf(\"&#x%02s;\", char_code.toString(16).toUpperCase());\n\t                        else\n\t                            result += Twig.lib.sprintf(\"&#x%04s;\", char_code.toString(16).toUpperCase());\n\t                    }\n\t                }\n\n\t                return Twig.Markup(result, 'html_attr');\n\t            } else {\n\t                throw new Twig.Error(\"escape strategy unsupported\");\n\t            }\n\t        },\n\n\t        /* Alias of escape */\n\t        \"e\": function(value, params) {\n\t            return Twig.filters.escape(value, params);\n\t        },\n\n\t        nl2br: function(value) {\n\t            if (value === undefined || value === null){\n\t                return;\n\t            }\n\t            var linebreak_tag = \"BACKSLASH_n_replace\",\n\t                br = \"<br />\" + linebreak_tag;\n\n\t            value = Twig.filters.escape(value)\n\t                        .replace(/\\r\\n/g, br)\n\t                        .replace(/\\r/g, br)\n\t                        .replace(/\\n/g, br);\n\n\t            value = Twig.lib.replaceAll(value, linebreak_tag, \"\\n\");\n\n\t            return Twig.Markup(value);\n\t        },\n\n\t        /**\n\t         * Adapted from: http://phpjs.org/functions/number_format:481\n\t         */\n\t        number_format: function(value, params) {\n\t            var number = value,\n\t                decimals = (params && params[0]) ? params[0] : undefined,\n\t                dec      = (params && params[1] !== undefined) ? params[1] : \".\",\n\t                sep      = (params && params[2] !== undefined) ? params[2] : \",\";\n\n\t            number = (number + '').replace(/[^0-9+\\-Ee.]/g, '');\n\t            var n = !isFinite(+number) ? 0 : +number,\n\t                prec = !isFinite(+decimals) ? 0 : Math.abs(decimals),\n\t                s = '',\n\t                toFixedFix = function (n, prec) {\n\t                    var k = Math.pow(10, prec);\n\t                    return '' + Math.round(n * k) / k;\n\t                };\n\t            // Fix for IE parseFloat(0.55).toFixed(0) = 0;\n\t            s = (prec ? toFixedFix(n, prec) : '' + Math.round(n)).split('.');\n\t            if (s[0].length > 3) {\n\t                s[0] = s[0].replace(/\\B(?=(?:\\d{3})+(?!\\d))/g, sep);\n\t            }\n\t            if ((s[1] || '').length < prec) {\n\t                s[1] = s[1] || '';\n\t                s[1] += new Array(prec - s[1].length + 1).join('0');\n\t            }\n\t            return s.join(dec);\n\t        },\n\n\t        trim: function(value, params) {\n\t            if (value === undefined|| value === null){\n\t                return;\n\t            }\n\n\t            var str = Twig.filters.escape( '' + value ),\n\t                whitespace;\n\t            if ( params && params[0] ) {\n\t                whitespace = '' + params[0];\n\t            } else {\n\t                whitespace = ' \\n\\r\\t\\f\\x0b\\xa0\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u200b\\u2028\\u2029\\u3000';\n\t            }\n\t            for (var i = 0; i < str.length; i++) {\n\t                if (whitespace.indexOf(str.charAt(i)) === -1) {\n\t                    str = str.substring(i);\n\t                    break;\n\t                }\n\t            }\n\t            for (i = str.length - 1; i >= 0; i--) {\n\t                if (whitespace.indexOf(str.charAt(i)) === -1) {\n\t                    str = str.substring(0, i + 1);\n\t                    break;\n\t                }\n\t            }\n\t            return whitespace.indexOf(str.charAt(0)) === -1 ? str : '';\n\t        },\n\n\t        truncate: function (value, params) {\n\t            var length = 30,\n\t                preserve = false,\n\t                separator = '...';\n\n\t            value =  value + '';\n\t            if (params) {\n\t                if (params[0]) {\n\t                    length = params[0];\n\t                }\n\t                if (params[1]) {\n\t                    preserve = params[1];\n\t                }\n\t                if (params[2]) {\n\t                    separator = params[2];\n\t                }\n\t            }\n\n\t            if (value.length > length) {\n\n\t                if (preserve) {\n\t                    length = value.indexOf(' ', length);\n\t                    if (length === -1) {\n\t                        return value;\n\t                    }\n\t                }\n\n\t                value =  value.substr(0, length) + separator;\n\t            }\n\n\t            return value;\n\t        },\n\n\t        slice: function(value, params) {\n\t            if (value === undefined || value === null) {\n\t                return;\n\t            }\n\t            if (params === undefined || params.length < 1) {\n\t                throw new Twig.Error(\"slice filter expects at least 1 argument\");\n\t            }\n\n\t            // default to start of string\n\t            var start = params[0] || 0;\n\t            // default to length of string\n\t            var length = params.length > 1 ? params[1] : value.length;\n\t            // handle negative start values\n\t            var startIndex = start >= 0 ? start : Math.max( value.length + start, 0 );\n\n\t            if (Twig.lib.is(\"Array\", value)) {\n\t                var output = [];\n\t                for (var i = startIndex; i < startIndex + length && i < value.length; i++) {\n\t                    output.push(value[i]);\n\t                }\n\t                return output;\n\t            } else if (Twig.lib.is(\"String\", value)) {\n\t                return value.substr(startIndex, length);\n\t            } else {\n\t                throw new Twig.Error(\"slice filter expects value to be an array or string\");\n\t            }\n\t        },\n\n\t        abs: function(value) {\n\t            if (value === undefined || value === null) {\n\t                return;\n\t            }\n\n\t            return Math.abs(value);\n\t        },\n\n\t        first: function(value) {\n\t            if (is(\"Array\", value)) {\n\t                return value[0];\n\t            } else if (is(\"Object\", value)) {\n\t                if ('_keys' in value) {\n\t                    return value[value._keys[0]];\n\t                }\n\t            } else if ( typeof value === \"string\" ) {\n\t                return value.substr(0, 1);\n\t            }\n\n\t            return;\n\t        },\n\n\t        split: function(value, params) {\n\t            if (value === undefined || value === null) {\n\t                return;\n\t            }\n\t            if (params === undefined || params.length < 1 || params.length > 2) {\n\t                throw new Twig.Error(\"split filter expects 1 or 2 argument\");\n\t            }\n\t            if (Twig.lib.is(\"String\", value)) {\n\t                var delimiter = params[0],\n\t                    limit = params[1],\n\t                    split = value.split(delimiter);\n\n\t                if (limit === undefined) {\n\n\t                    return split;\n\n\t                } else if (limit < 0) {\n\n\t                    return value.split(delimiter, split.length + limit);\n\n\t                } else {\n\n\t                    var limitedSplit = [];\n\n\t                    if (delimiter == '') {\n\t                        // empty delimiter\n\t                        // \"aabbcc\"|split('', 2)\n\t                        //     -> ['aa', 'bb', 'cc']\n\n\t                        while(split.length > 0) {\n\t                            var temp = \"\";\n\t                            for (var i=0; i<limit && split.length > 0; i++) {\n\t                                temp += split.shift();\n\t                            }\n\t                            limitedSplit.push(temp);\n\t                        }\n\n\t                    } else {\n\t                        // non-empty delimiter\n\t                        // \"one,two,three,four,five\"|split(',', 3)\n\t                        //     -> ['one', 'two', 'three,four,five']\n\n\t                        for (var i=0; i<limit-1 && split.length > 0; i++) {\n\t                            limitedSplit.push(split.shift());\n\t                        }\n\n\t                        if (split.length > 0) {\n\t                            limitedSplit.push(split.join(delimiter));\n\t                        }\n\t                    }\n\n\t                    return limitedSplit;\n\t                }\n\n\t            } else {\n\t                throw new Twig.Error(\"split filter expects value to be a string\");\n\t            }\n\t        },\n\t        last: function(value) {\n\t            if (Twig.lib.is('Object', value)) {\n\t                var keys;\n\n\t                if (value._keys === undefined) {\n\t                    keys = Object.keys(value);\n\t                } else {\n\t                    keys = value._keys;\n\t                }\n\n\t                return value[keys[keys.length - 1]];\n\t            }\n\n\t            // string|array\n\t            return value[value.length - 1];\n\t        },\n\t        raw: function(value) {\n\t            return Twig.Markup(value);\n\t        },\n\t        batch: function(items, params) {\n\t            var size = params.shift(),\n\t                fill = params.shift(),\n\t                result,\n\t                last,\n\t                missing;\n\n\t            if (!Twig.lib.is(\"Array\", items)) {\n\t                throw new Twig.Error(\"batch filter expects items to be an array\");\n\t            }\n\n\t            if (!Twig.lib.is(\"Number\", size)) {\n\t                throw new Twig.Error(\"batch filter expects size to be a number\");\n\t            }\n\n\t            size = Math.ceil(size);\n\n\t            result = Twig.lib.chunkArray(items, size);\n\n\t            if (fill && items.length % size != 0) {\n\t                last = result.pop();\n\t                missing = size - last.length;\n\n\t                while (missing--) {\n\t                    last.push(fill);\n\t                }\n\n\t                result.push(last);\n\t            }\n\n\t            return result;\n\t        },\n\t        round: function(value, params) {\n\t            params = params || [];\n\n\t            var precision = params.length > 0 ? params[0] : 0,\n\t                method = params.length > 1 ? params[1] : \"common\";\n\n\t            value = parseFloat(value);\n\n\t            if(precision && !Twig.lib.is(\"Number\", precision)) {\n\t                throw new Twig.Error(\"round filter expects precision to be a number\");\n\t            }\n\n\t            if (method === \"common\") {\n\t                return Twig.lib.round(value, precision);\n\t            }\n\n\t            if(!Twig.lib.is(\"Function\", Math[method])) {\n\t                throw new Twig.Error(\"round filter expects method to be 'floor', 'ceil', or 'common'\");\n\t            }\n\n\t            return Math[method](value * Math.pow(10, precision)) / Math.pow(10, precision);\n\t        }\n\t    };\n\n\t    Twig.filter = function(filter, value, params) {\n\t        if (!Twig.filters[filter]) {\n\t            throw \"Unable to find filter \" + filter;\n\t        }\n\t        return Twig.filters[filter].apply(this, [value, params]);\n\t    };\n\n\t    Twig.filter.extend = function(filter, definition) {\n\t        Twig.filters[filter] = definition;\n\t    };\n\n\t    return Twig;\n\n\t};\n\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t// ## twig.functions.js\n\t//\n\t// This file handles parsing filters.\n\tmodule.exports = function (Twig) {\n\t    /**\n\t     * @constant\n\t     * @type {string}\n\t     */\n\t    var TEMPLATE_NOT_FOUND_MESSAGE = 'Template \"{name}\" is not defined.';\n\n\t    // Determine object type\n\t    function is(type, obj) {\n\t        var clas = Object.prototype.toString.call(obj).slice(8, -1);\n\t        return obj !== undefined && obj !== null && clas === type;\n\t    }\n\n\t    Twig.functions = {\n\t        //  attribute, block, constant, date, dump, parent, random,.\n\n\t        // Range function from http://phpjs.org/functions/range:499\n\t        // Used under an MIT License\n\t        range: function (low, high, step) {\n\t            // http://kevin.vanzonneveld.net\n\t            // +   original by: Waldo Malqui Silva\n\t            // *     example 1: range ( 0, 12 );\n\t            // *     returns 1: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]\n\t            // *     example 2: range( 0, 100, 10 );\n\t            // *     returns 2: [0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100]\n\t            // *     example 3: range( 'a', 'i' );\n\t            // *     returns 3: ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i']\n\t            // *     example 4: range( 'c', 'a' );\n\t            // *     returns 4: ['c', 'b', 'a']\n\t            var matrix = [];\n\t            var inival, endval, plus;\n\t            var walker = step || 1;\n\t            var chars = false;\n\n\t            if (!isNaN(low) && !isNaN(high)) {\n\t                inival = parseInt(low, 10);\n\t                endval = parseInt(high, 10);\n\t            } else if (isNaN(low) && isNaN(high)) {\n\t                chars = true;\n\t                inival = low.charCodeAt(0);\n\t                endval = high.charCodeAt(0);\n\t            } else {\n\t                inival = (isNaN(low) ? 0 : low);\n\t                endval = (isNaN(high) ? 0 : high);\n\t            }\n\n\t            plus = ((inival > endval) ? false : true);\n\t            if (plus) {\n\t                while (inival <= endval) {\n\t                    matrix.push(((chars) ? String.fromCharCode(inival) : inival));\n\t                    inival += walker;\n\t                }\n\t            } else {\n\t                while (inival >= endval) {\n\t                    matrix.push(((chars) ? String.fromCharCode(inival) : inival));\n\t                    inival -= walker;\n\t                }\n\t            }\n\n\t            return matrix;\n\t        },\n\t        cycle: function(arr, i) {\n\t            var pos = i % arr.length;\n\t            return arr[pos];\n\t        },\n\t        dump: function() {\n\t            var EOL = '\\n',\n\t                indentChar = '  ',\n\t                indentTimes = 0,\n\t                out = '',\n\t                args = Array.prototype.slice.call(arguments),\n\t                indent = function(times) {\n\t                    var ind  = '';\n\t                    while (times > 0) {\n\t                        times--;\n\t                        ind += indentChar;\n\t                    }\n\t                    return ind;\n\t                },\n\t                displayVar = function(variable) {\n\t                    out += indent(indentTimes);\n\t                    if (typeof(variable) === 'object') {\n\t                        dumpVar(variable);\n\t                    } else if (typeof(variable) === 'function') {\n\t                        out += 'function()' + EOL;\n\t                    } else if (typeof(variable) === 'string') {\n\t                        out += 'string(' + variable.length + ') \"' + variable + '\"' + EOL;\n\t                    } else if (typeof(variable) === 'number') {\n\t                        out += 'number(' + variable + ')' + EOL;\n\t                    } else if (typeof(variable) === 'boolean') {\n\t                        out += 'bool(' + variable + ')' + EOL;\n\t                    }\n\t                },\n\t                dumpVar = function(variable) {\n\t                    var i;\n\t                    if (variable === null) {\n\t                        out += 'NULL' + EOL;\n\t                    } else if (variable === undefined) {\n\t                        out += 'undefined' + EOL;\n\t                    } else if (typeof variable === 'object') {\n\t                        out += indent(indentTimes) + typeof(variable);\n\t                        indentTimes++;\n\t                        out += '(' + (function(obj) {\n\t                            var size = 0, key;\n\t                            for (key in obj) {\n\t                                if (obj.hasOwnProperty(key)) {\n\t                                    size++;\n\t                                }\n\t                            }\n\t                            return size;\n\t                        })(variable) + ') {' + EOL;\n\t                        for (i in variable) {\n\t                            out += indent(indentTimes) + '[' + i + ']=> ' + EOL;\n\t                            displayVar(variable[i]);\n\t                        }\n\t                        indentTimes--;\n\t                        out += indent(indentTimes) + '}' + EOL;\n\t                    } else {\n\t                        displayVar(variable);\n\t                    }\n\t                };\n\n\t            // handle no argument case by dumping the entire render context\n\t            if (args.length == 0) args.push(this.context);\n\n\t            Twig.forEach(args, function(variable) {\n\t                dumpVar(variable);\n\t            });\n\n\t            return out;\n\t        },\n\t        date: function(date, time) {\n\t            var dateObj;\n\t            if (date === undefined || date === null || date === \"\") {\n\t                dateObj = new Date();\n\t            } else if (Twig.lib.is(\"Date\", date)) {\n\t                dateObj = date;\n\t            } else if (Twig.lib.is(\"String\", date)) {\n\t                if (date.match(/^[0-9]+$/)) {\n\t                    dateObj = new Date(date * 1000);\n\t                }\n\t                else {\n\t                    dateObj = new Date(Twig.lib.strtotime(date) * 1000);\n\t                }\n\t            } else if (Twig.lib.is(\"Number\", date)) {\n\t                // timestamp\n\t                dateObj = new Date(date * 1000);\n\t            } else {\n\t                throw new Twig.Error(\"Unable to parse date \" + date);\n\t            }\n\t            return dateObj;\n\t        },\n\t        block: function(block) {\n\t            if (this.originalBlockTokens[block]) {\n\t                return Twig.logic.parse.apply(this, [this.originalBlockTokens[block], this.context]).output;\n\t            } else {\n\t                return this.blocks[block];\n\t            }\n\t        },\n\t        parent: function() {\n\t            // Add a placeholder\n\t            return Twig.placeholders.parent;\n\t        },\n\t        attribute: function(object, method, params) {\n\t            if (Twig.lib.is('Object', object)) {\n\t                if (object.hasOwnProperty(method)) {\n\t                    if (typeof object[method] === \"function\") {\n\t                        return object[method].apply(undefined, params);\n\t                    }\n\t                    else {\n\t                        return object[method];\n\t                    }\n\t                }\n\t            }\n\t            // Array will return element 0-index\n\t            return object[method] || undefined;\n\t        },\n\t        max: function(values) {\n\t            if(Twig.lib.is(\"Object\", values)) {\n\t                delete values[\"_keys\"];\n\t                return Twig.lib.max(values);\n\t            }\n\n\t            return Twig.lib.max.apply(null, arguments);\n\t        },\n\t        min: function(values) {\n\t            if(Twig.lib.is(\"Object\", values)) {\n\t                delete values[\"_keys\"];\n\t                return Twig.lib.min(values);\n\t            }\n\n\t            return Twig.lib.min.apply(null, arguments);\n\t        },\n\t        template_from_string: function(template) {\n\t            if (template === undefined) {\n\t                template = '';\n\t            }\n\t            return Twig.Templates.parsers.twig({\n\t                options: this.options,\n\t                data: template\n\t            });\n\t        },\n\t        random: function(value) {\n\t            var LIMIT_INT31 = 0x80000000;\n\n\t            function getRandomNumber(n) {\n\t                var random = Math.floor(Math.random() * LIMIT_INT31);\n\t                var limits = [0, n];\n\t                var min = Math.min.apply(null, limits),\n\t                    max = Math.max.apply(null, limits);\n\t                return min + Math.floor((max - min + 1) * random / LIMIT_INT31);\n\t            }\n\n\t            if(Twig.lib.is(\"Number\", value)) {\n\t                return getRandomNumber(value);\n\t            }\n\n\t            if(Twig.lib.is(\"String\", value)) {\n\t                return value.charAt(getRandomNumber(value.length-1));\n\t            }\n\n\t            if(Twig.lib.is(\"Array\", value)) {\n\t                return value[getRandomNumber(value.length-1)];\n\t            }\n\n\t            if(Twig.lib.is(\"Object\", value)) {\n\t                var keys = Object.keys(value);\n\t                return value[keys[getRandomNumber(keys.length-1)]];\n\t            }\n\n\t            return getRandomNumber(LIMIT_INT31-1);\n\t        },\n\n\t        /**\n\t         * Returns the content of a template without rendering it\n\t         * @param {string} name\n\t         * @param {boolean} [ignore_missing=false]\n\t         * @returns {string}\n\t         */\n\t        source: function(name, ignore_missing) {\n\t            var templateSource;\n\t            var templateFound = false;\n\t            var isNodeEnvironment = typeof module !== 'undefined' && typeof module.exports !== 'undefined' && typeof window === 'undefined';\n\t            var loader;\n\t            var path;\n\n\t            //if we are running in a node.js environment, set the loader to 'fs' and ensure the\n\t            // path is relative to the CWD of the running script\n\t            //else, set the loader to 'ajax' and set the path to the value of name\n\t            if (isNodeEnvironment) {\n\t                loader = 'fs';\n\t                path = __dirname + '/' + name;\n\t            } else {\n\t                loader = 'ajax';\n\t                path = name;\n\t            }\n\n\t            //build the params object\n\t            var params = {\n\t                id: name,\n\t                path: path,\n\t                method: loader,\n\t                parser: 'source',\n\t                async: false,\n\t                fetchTemplateSource: true\n\t            };\n\n\t            //default ignore_missing to false\n\t            if (typeof ignore_missing === 'undefined') {\n\t                ignore_missing = false;\n\t            }\n\n\t            //try to load the remote template\n\t            //\n\t            //on exception, log it\n\t            try {\n\t                templateSource = Twig.Templates.loadRemote(name, params);\n\n\t                //if the template is undefined or null, set the template to an empty string and do NOT flip the\n\t                // boolean indicating we found the template\n\t                //\n\t                //else, all is good! flip the boolean indicating we found the template\n\t                if (typeof templateSource === 'undefined' || templateSource === null) {\n\t                    templateSource = '';\n\t                } else {\n\t                    templateFound = true;\n\t                }\n\t            } catch (e) {\n\t                Twig.log.debug('Twig.functions.source: ', 'Problem loading template  ', e);\n\t            }\n\n\t            //if the template was NOT found AND we are not ignoring missing templates, return the same message\n\t            // that is returned by the PHP implementation of the twig source() function\n\t            //\n\t            //else, return the template source\n\t            if (!templateFound && !ignore_missing) {\n\t                return TEMPLATE_NOT_FOUND_MESSAGE.replace('{name}', name);\n\t            } else {\n\t                return templateSource;\n\t            }\n\t        }\n\t    };\n\n\t    Twig._function = function(_function, value, params) {\n\t        if (!Twig.functions[_function]) {\n\t            throw \"Unable to find function \" + _function;\n\t        }\n\t        return Twig.functions[_function](value, params);\n\t    };\n\n\t    Twig._function.extend = function(_function, definition) {\n\t        Twig.functions[_function] = definition;\n\t    };\n\n\t    return Twig;\n\n\t};\n\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// ## twig.lib.js\n\t//\n\t// This file contains 3rd party libraries used within twig.\n\t//\n\t// Copies of the licenses for the code included here can be found in the\n\t// LICENSES.md file.\n\t//\n\n\tmodule.exports = function(Twig) {\n\n\t    // Namespace for libraries\n\t    Twig.lib = { };\n\n\t    Twig.lib.sprintf = __webpack_require__(8);\n\t    Twig.lib.vsprintf = __webpack_require__(9);\n\t    Twig.lib.round = __webpack_require__(10);\n\t    Twig.lib.max = __webpack_require__(11);\n\t    Twig.lib.min = __webpack_require__(12);\n\t    Twig.lib.strip_tags = __webpack_require__(13);\n\t    Twig.lib.strtotime = __webpack_require__(14);\n\t    Twig.lib.date = __webpack_require__(15);\n\t    Twig.lib.boolval = __webpack_require__(16);\n\n\t    Twig.lib.is = function(type, obj) {\n\t        var clas = Object.prototype.toString.call(obj).slice(8, -1);\n\t        return obj !== undefined && obj !== null && clas === type;\n\t    };\n\n\t    // shallow-copy an object\n\t    Twig.lib.copy = function(src) {\n\t        var target = {},\n\t            key;\n\t        for (key in src)\n\t            target[key] = src[key];\n\n\t        return target;\n\t    };\n\n\t    Twig.lib.extend = function (src, add) {\n\t        var keys = Object.keys(add),\n\t            i;\n\n\t        i = keys.length;\n\n\t        while (i--) {\n\t            src[keys[i]] = add[keys[i]];\n\t        }\n\n\t        return src;\n\t    };\n\n\t    Twig.lib.replaceAll = function(string, search, replace) {\n\t        return string.split(search).join(replace);\n\t    };\n\n\t    // chunk an array (arr) into arrays of (size) items, returns an array of arrays, or an empty array on invalid input\n\t    Twig.lib.chunkArray = function (arr, size) {\n\t        var returnVal = [],\n\t            x = 0,\n\t            len = arr.length;\n\n\t        if (size < 1 || !Twig.lib.is(\"Array\", arr)) {\n\t            return [];\n\t        }\n\n\t        while (x < len) {\n\t            returnVal.push(arr.slice(x, x += size));\n\t        }\n\n\t        return returnVal;\n\t    };\n\n\t    return Twig;\n\t};\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\n\tmodule.exports = function sprintf() {\n\t  //  discuss at: http://locutus.io/php/sprintf/\n\t  // original by: Ash Searle (http://hexmen.com/blog/)\n\t  // improved by: Michael White (http://getsprink.com)\n\t  // improved by: Jack\n\t  // improved by: Kevin van Zonneveld (http://kvz.io)\n\t  // improved by: Kevin van Zonneveld (http://kvz.io)\n\t  // improved by: Kevin van Zonneveld (http://kvz.io)\n\t  // improved by: Dj\n\t  // improved by: Allidylls\n\t  //    input by: Paulo Freitas\n\t  //    input by: Brett Zamir (http://brett-zamir.me)\n\t  //   example 1: sprintf(\"%01.2f\", 123.1)\n\t  //   returns 1: '123.10'\n\t  //   example 2: sprintf(\"[%10s]\", 'monkey')\n\t  //   returns 2: '[    monkey]'\n\t  //   example 3: sprintf(\"[%'#10s]\", 'monkey')\n\t  //   returns 3: '[####monkey]'\n\t  //   example 4: sprintf(\"%d\", 123456789012345)\n\t  //   returns 4: '123456789012345'\n\t  //   example 5: sprintf('%-03s', 'E')\n\t  //   returns 5: 'E00'\n\n\t  var regex = /%%|%(\\d+\\$)?([-+'#0 ]*)(\\*\\d+\\$|\\*|\\d+)?(?:\\.(\\*\\d+\\$|\\*|\\d+))?([scboxXuideEfFgG])/g;\n\t  var a = arguments;\n\t  var i = 0;\n\t  var format = a[i++];\n\n\t  var _pad = function _pad(str, len, chr, leftJustify) {\n\t    if (!chr) {\n\t      chr = ' ';\n\t    }\n\t    var padding = str.length >= len ? '' : new Array(1 + len - str.length >>> 0).join(chr);\n\t    return leftJustify ? str + padding : padding + str;\n\t  };\n\n\t  var justify = function justify(value, prefix, leftJustify, minWidth, zeroPad, customPadChar) {\n\t    var diff = minWidth - value.length;\n\t    if (diff > 0) {\n\t      if (leftJustify || !zeroPad) {\n\t        value = _pad(value, minWidth, customPadChar, leftJustify);\n\t      } else {\n\t        value = [value.slice(0, prefix.length), _pad('', diff, '0', true), value.slice(prefix.length)].join('');\n\t      }\n\t    }\n\t    return value;\n\t  };\n\n\t  var _formatBaseX = function _formatBaseX(value, base, prefix, leftJustify, minWidth, precision, zeroPad) {\n\t    // Note: casts negative numbers to positive ones\n\t    var number = value >>> 0;\n\t    prefix = prefix && number && {\n\t      '2': '0b',\n\t      '8': '0',\n\t      '16': '0x'\n\t    }[base] || '';\n\t    value = prefix + _pad(number.toString(base), precision || 0, '0', false);\n\t    return justify(value, prefix, leftJustify, minWidth, zeroPad);\n\t  };\n\n\t  // _formatString()\n\t  var _formatString = function _formatString(value, leftJustify, minWidth, precision, zeroPad, customPadChar) {\n\t    if (precision !== null && precision !== undefined) {\n\t      value = value.slice(0, precision);\n\t    }\n\t    return justify(value, '', leftJustify, minWidth, zeroPad, customPadChar);\n\t  };\n\n\t  // doFormat()\n\t  var doFormat = function doFormat(substring, valueIndex, flags, minWidth, precision, type) {\n\t    var number, prefix, method, textTransform, value;\n\n\t    if (substring === '%%') {\n\t      return '%';\n\t    }\n\n\t    // parse flags\n\t    var leftJustify = false;\n\t    var positivePrefix = '';\n\t    var zeroPad = false;\n\t    var prefixBaseX = false;\n\t    var customPadChar = ' ';\n\t    var flagsl = flags.length;\n\t    var j;\n\t    for (j = 0; j < flagsl; j++) {\n\t      switch (flags.charAt(j)) {\n\t        case ' ':\n\t          positivePrefix = ' ';\n\t          break;\n\t        case '+':\n\t          positivePrefix = '+';\n\t          break;\n\t        case '-':\n\t          leftJustify = true;\n\t          break;\n\t        case \"'\":\n\t          customPadChar = flags.charAt(j + 1);\n\t          break;\n\t        case '0':\n\t          zeroPad = true;\n\t          customPadChar = '0';\n\t          break;\n\t        case '#':\n\t          prefixBaseX = true;\n\t          break;\n\t      }\n\t    }\n\n\t    // parameters may be null, undefined, empty-string or real valued\n\t    // we want to ignore null, undefined and empty-string values\n\t    if (!minWidth) {\n\t      minWidth = 0;\n\t    } else if (minWidth === '*') {\n\t      minWidth = +a[i++];\n\t    } else if (minWidth.charAt(0) === '*') {\n\t      minWidth = +a[minWidth.slice(1, -1)];\n\t    } else {\n\t      minWidth = +minWidth;\n\t    }\n\n\t    // Note: undocumented perl feature:\n\t    if (minWidth < 0) {\n\t      minWidth = -minWidth;\n\t      leftJustify = true;\n\t    }\n\n\t    if (!isFinite(minWidth)) {\n\t      throw new Error('sprintf: (minimum-)width must be finite');\n\t    }\n\n\t    if (!precision) {\n\t      precision = 'fFeE'.indexOf(type) > -1 ? 6 : type === 'd' ? 0 : undefined;\n\t    } else if (precision === '*') {\n\t      precision = +a[i++];\n\t    } else if (precision.charAt(0) === '*') {\n\t      precision = +a[precision.slice(1, -1)];\n\t    } else {\n\t      precision = +precision;\n\t    }\n\n\t    // grab value using valueIndex if required?\n\t    value = valueIndex ? a[valueIndex.slice(0, -1)] : a[i++];\n\n\t    switch (type) {\n\t      case 's':\n\t        return _formatString(value + '', leftJustify, minWidth, precision, zeroPad, customPadChar);\n\t      case 'c':\n\t        return _formatString(String.fromCharCode(+value), leftJustify, minWidth, precision, zeroPad);\n\t      case 'b':\n\t        return _formatBaseX(value, 2, prefixBaseX, leftJustify, minWidth, precision, zeroPad);\n\t      case 'o':\n\t        return _formatBaseX(value, 8, prefixBaseX, leftJustify, minWidth, precision, zeroPad);\n\t      case 'x':\n\t        return _formatBaseX(value, 16, prefixBaseX, leftJustify, minWidth, precision, zeroPad);\n\t      case 'X':\n\t        return _formatBaseX(value, 16, prefixBaseX, leftJustify, minWidth, precision, zeroPad).toUpperCase();\n\t      case 'u':\n\t        return _formatBaseX(value, 10, prefixBaseX, leftJustify, minWidth, precision, zeroPad);\n\t      case 'i':\n\t      case 'd':\n\t        number = +value || 0;\n\t        // Plain Math.round doesn't just truncate\n\t        number = Math.round(number - number % 1);\n\t        prefix = number < 0 ? '-' : positivePrefix;\n\t        value = prefix + _pad(String(Math.abs(number)), precision, '0', false);\n\t        return justify(value, prefix, leftJustify, minWidth, zeroPad);\n\t      case 'e':\n\t      case 'E':\n\t      case 'f': // @todo: Should handle locales (as per setlocale)\n\t      case 'F':\n\t      case 'g':\n\t      case 'G':\n\t        number = +value;\n\t        prefix = number < 0 ? '-' : positivePrefix;\n\t        method = ['toExponential', 'toFixed', 'toPrecision']['efg'.indexOf(type.toLowerCase())];\n\t        textTransform = ['toString', 'toUpperCase']['eEfFgG'.indexOf(type) % 2];\n\t        value = prefix + Math.abs(number)[method](precision);\n\t        return justify(value, prefix, leftJustify, minWidth, zeroPad)[textTransform]();\n\t      default:\n\t        return substring;\n\t    }\n\t  };\n\n\t  return format.replace(regex, doFormat);\n\t};\n\t//# sourceMappingURL=sprintf.js.map\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tmodule.exports = function vsprintf(format, args) {\n\t  //  discuss at: http://locutus.io/php/vsprintf/\n\t  // original by: ejsanders\n\t  //   example 1: vsprintf('%04d-%02d-%02d', [1988, 8, 1])\n\t  //   returns 1: '1988-08-01'\n\n\t  var sprintf = __webpack_require__(8);\n\n\t  return sprintf.apply(this, [format].concat(args));\n\t};\n\t//# sourceMappingURL=vsprintf.js.map\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\n\tmodule.exports = function round(value, precision, mode) {\n\t  //  discuss at: http://locutus.io/php/round/\n\t  // original by: Philip Peterson\n\t  //  revised by: Onno Marsman (https://twitter.com/onnomarsman)\n\t  //  revised by: T.Wild\n\t  //  revised by: Rafał Kukawski (http://blog.kukawski.pl)\n\t  //    input by: Greenseed\n\t  //    input by: meo\n\t  //    input by: William\n\t  //    input by: Josep Sanz (http://www.ws3.es/)\n\t  // bugfixed by: Brett Zamir (http://brett-zamir.me)\n\t  //      note 1: Great work. Ideas for improvement:\n\t  //      note 1: - code more compliant with developer guidelines\n\t  //      note 1: - for implementing PHP constant arguments look at\n\t  //      note 1: the pathinfo() function, it offers the greatest\n\t  //      note 1: flexibility & compatibility possible\n\t  //   example 1: round(1241757, -3)\n\t  //   returns 1: 1242000\n\t  //   example 2: round(3.6)\n\t  //   returns 2: 4\n\t  //   example 3: round(2.835, 2)\n\t  //   returns 3: 2.84\n\t  //   example 4: round(1.1749999999999, 2)\n\t  //   returns 4: 1.17\n\t  //   example 5: round(58551.799999999996, 2)\n\t  //   returns 5: 58551.8\n\n\t  var m, f, isHalf, sgn; // helper variables\n\t  // making sure precision is integer\n\t  precision |= 0;\n\t  m = Math.pow(10, precision);\n\t  value *= m;\n\t  // sign of the number\n\t  sgn = value > 0 | -(value < 0);\n\t  isHalf = value % 1 === 0.5 * sgn;\n\t  f = Math.floor(value);\n\n\t  if (isHalf) {\n\t    switch (mode) {\n\t      case 'PHP_ROUND_HALF_DOWN':\n\t        // rounds .5 toward zero\n\t        value = f + (sgn < 0);\n\t        break;\n\t      case 'PHP_ROUND_HALF_EVEN':\n\t        // rouds .5 towards the next even integer\n\t        value = f + f % 2 * sgn;\n\t        break;\n\t      case 'PHP_ROUND_HALF_ODD':\n\t        // rounds .5 towards the next odd integer\n\t        value = f + !(f % 2);\n\t        break;\n\t      default:\n\t        // rounds .5 away from zero\n\t        value = f + (sgn > 0);\n\t    }\n\t  }\n\n\t  return (isHalf ? value : Math.round(value)) / m;\n\t};\n\t//# sourceMappingURL=round.js.map\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n\tmodule.exports = function max() {\n\t  //  discuss at: http://locutus.io/php/max/\n\t  // original by: Onno Marsman (https://twitter.com/onnomarsman)\n\t  //  revised by: Onno Marsman (https://twitter.com/onnomarsman)\n\t  // improved by: Jack\n\t  //      note 1: Long code cause we're aiming for maximum PHP compatibility\n\t  //   example 1: max(1, 3, 5, 6, 7)\n\t  //   returns 1: 7\n\t  //   example 2: max([2, 4, 5])\n\t  //   returns 2: 5\n\t  //   example 3: max(0, 'hello')\n\t  //   returns 3: 0\n\t  //   example 4: max('hello', 0)\n\t  //   returns 4: 'hello'\n\t  //   example 5: max(-1, 'hello')\n\t  //   returns 5: 'hello'\n\t  //   example 6: max([2, 4, 8], [2, 5, 7])\n\t  //   returns 6: [2, 5, 7]\n\n\t  var ar;\n\t  var retVal;\n\t  var i = 0;\n\t  var n = 0;\n\t  var argv = arguments;\n\t  var argc = argv.length;\n\t  var _obj2Array = function _obj2Array(obj) {\n\t    if (Object.prototype.toString.call(obj) === '[object Array]') {\n\t      return obj;\n\t    } else {\n\t      var ar = [];\n\t      for (var i in obj) {\n\t        if (obj.hasOwnProperty(i)) {\n\t          ar.push(obj[i]);\n\t        }\n\t      }\n\t      return ar;\n\t    }\n\t  };\n\t  var _compare = function _compare(current, next) {\n\t    var i = 0;\n\t    var n = 0;\n\t    var tmp = 0;\n\t    var nl = 0;\n\t    var cl = 0;\n\n\t    if (current === next) {\n\t      return 0;\n\t    } else if ((typeof current === 'undefined' ? 'undefined' : _typeof(current)) === 'object') {\n\t      if ((typeof next === 'undefined' ? 'undefined' : _typeof(next)) === 'object') {\n\t        current = _obj2Array(current);\n\t        next = _obj2Array(next);\n\t        cl = current.length;\n\t        nl = next.length;\n\t        if (nl > cl) {\n\t          return 1;\n\t        } else if (nl < cl) {\n\t          return -1;\n\t        }\n\t        for (i = 0, n = cl; i < n; ++i) {\n\t          tmp = _compare(current[i], next[i]);\n\t          if (tmp === 1) {\n\t            return 1;\n\t          } else if (tmp === -1) {\n\t            return -1;\n\t          }\n\t        }\n\t        return 0;\n\t      }\n\t      return -1;\n\t    } else if ((typeof next === 'undefined' ? 'undefined' : _typeof(next)) === 'object') {\n\t      return 1;\n\t    } else if (isNaN(next) && !isNaN(current)) {\n\t      if (current === 0) {\n\t        return 0;\n\t      }\n\t      return current < 0 ? 1 : -1;\n\t    } else if (isNaN(current) && !isNaN(next)) {\n\t      if (next === 0) {\n\t        return 0;\n\t      }\n\t      return next > 0 ? 1 : -1;\n\t    }\n\n\t    if (next === current) {\n\t      return 0;\n\t    }\n\n\t    return next > current ? 1 : -1;\n\t  };\n\n\t  if (argc === 0) {\n\t    throw new Error('At least one value should be passed to max()');\n\t  } else if (argc === 1) {\n\t    if (_typeof(argv[0]) === 'object') {\n\t      ar = _obj2Array(argv[0]);\n\t    } else {\n\t      throw new Error('Wrong parameter count for max()');\n\t    }\n\t    if (ar.length === 0) {\n\t      throw new Error('Array must contain at least one element for max()');\n\t    }\n\t  } else {\n\t    ar = argv;\n\t  }\n\n\t  retVal = ar[0];\n\t  for (i = 1, n = ar.length; i < n; ++i) {\n\t    if (_compare(retVal, ar[i]) === 1) {\n\t      retVal = ar[i];\n\t    }\n\t  }\n\n\t  return retVal;\n\t};\n\t//# sourceMappingURL=max.js.map\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n\tmodule.exports = function min() {\n\t  //  discuss at: http://locutus.io/php/min/\n\t  // original by: Onno Marsman (https://twitter.com/onnomarsman)\n\t  //  revised by: Onno Marsman (https://twitter.com/onnomarsman)\n\t  // improved by: Jack\n\t  //      note 1: Long code cause we're aiming for maximum PHP compatibility\n\t  //   example 1: min(1, 3, 5, 6, 7)\n\t  //   returns 1: 1\n\t  //   example 2: min([2, 4, 5])\n\t  //   returns 2: 2\n\t  //   example 3: min(0, 'hello')\n\t  //   returns 3: 0\n\t  //   example 4: min('hello', 0)\n\t  //   returns 4: 'hello'\n\t  //   example 5: min(-1, 'hello')\n\t  //   returns 5: -1\n\t  //   example 6: min([2, 4, 8], [2, 5, 7])\n\t  //   returns 6: [2, 4, 8]\n\n\t  var ar;\n\t  var retVal;\n\t  var i = 0;\n\t  var n = 0;\n\t  var argv = arguments;\n\t  var argc = argv.length;\n\t  var _obj2Array = function _obj2Array(obj) {\n\t    if (Object.prototype.toString.call(obj) === '[object Array]') {\n\t      return obj;\n\t    }\n\t    var ar = [];\n\t    for (var i in obj) {\n\t      if (obj.hasOwnProperty(i)) {\n\t        ar.push(obj[i]);\n\t      }\n\t    }\n\t    return ar;\n\t  };\n\n\t  var _compare = function _compare(current, next) {\n\t    var i = 0;\n\t    var n = 0;\n\t    var tmp = 0;\n\t    var nl = 0;\n\t    var cl = 0;\n\n\t    if (current === next) {\n\t      return 0;\n\t    } else if ((typeof current === 'undefined' ? 'undefined' : _typeof(current)) === 'object') {\n\t      if ((typeof next === 'undefined' ? 'undefined' : _typeof(next)) === 'object') {\n\t        current = _obj2Array(current);\n\t        next = _obj2Array(next);\n\t        cl = current.length;\n\t        nl = next.length;\n\t        if (nl > cl) {\n\t          return 1;\n\t        } else if (nl < cl) {\n\t          return -1;\n\t        }\n\t        for (i = 0, n = cl; i < n; ++i) {\n\t          tmp = _compare(current[i], next[i]);\n\t          if (tmp === 1) {\n\t            return 1;\n\t          } else if (tmp === -1) {\n\t            return -1;\n\t          }\n\t        }\n\t        return 0;\n\t      }\n\t      return -1;\n\t    } else if ((typeof next === 'undefined' ? 'undefined' : _typeof(next)) === 'object') {\n\t      return 1;\n\t    } else if (isNaN(next) && !isNaN(current)) {\n\t      if (current === 0) {\n\t        return 0;\n\t      }\n\t      return current < 0 ? 1 : -1;\n\t    } else if (isNaN(current) && !isNaN(next)) {\n\t      if (next === 0) {\n\t        return 0;\n\t      }\n\t      return next > 0 ? 1 : -1;\n\t    }\n\n\t    if (next === current) {\n\t      return 0;\n\t    }\n\n\t    return next > current ? 1 : -1;\n\t  };\n\n\t  if (argc === 0) {\n\t    throw new Error('At least one value should be passed to min()');\n\t  } else if (argc === 1) {\n\t    if (_typeof(argv[0]) === 'object') {\n\t      ar = _obj2Array(argv[0]);\n\t    } else {\n\t      throw new Error('Wrong parameter count for min()');\n\t    }\n\n\t    if (ar.length === 0) {\n\t      throw new Error('Array must contain at least one element for min()');\n\t    }\n\t  } else {\n\t    ar = argv;\n\t  }\n\n\t  retVal = ar[0];\n\n\t  for (i = 1, n = ar.length; i < n; ++i) {\n\t    if (_compare(retVal, ar[i]) === -1) {\n\t      retVal = ar[i];\n\t    }\n\t  }\n\n\t  return retVal;\n\t};\n\t//# sourceMappingURL=min.js.map\n\n/***/ },\n/* 13 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\n\tmodule.exports = function strip_tags(input, allowed) {\n\t  // eslint-disable-line camelcase\n\t  //  discuss at: http://locutus.io/php/strip_tags/\n\t  // original by: Kevin van Zonneveld (http://kvz.io)\n\t  // improved by: Luke Godfrey\n\t  // improved by: Kevin van Zonneveld (http://kvz.io)\n\t  //    input by: Pul\n\t  //    input by: Alex\n\t  //    input by: Marc Palau\n\t  //    input by: Brett Zamir (http://brett-zamir.me)\n\t  //    input by: Bobby Drake\n\t  //    input by: Evertjan Garretsen\n\t  // bugfixed by: Kevin van Zonneveld (http://kvz.io)\n\t  // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman)\n\t  // bugfixed by: Kevin van Zonneveld (http://kvz.io)\n\t  // bugfixed by: Kevin van Zonneveld (http://kvz.io)\n\t  // bugfixed by: Eric Nagel\n\t  // bugfixed by: Kevin van Zonneveld (http://kvz.io)\n\t  // bugfixed by: Tomasz Wesolowski\n\t  //  revised by: Rafał Kukawski (http://blog.kukawski.pl)\n\t  //   example 1: strip_tags('<p>Kevin</p> <br /><b>van</b> <i>Zonneveld</i>', '<i><b>')\n\t  //   returns 1: 'Kevin <b>van</b> <i>Zonneveld</i>'\n\t  //   example 2: strip_tags('<p>Kevin <img src=\"someimage.png\" onmouseover=\"someFunction()\">van <i>Zonneveld</i></p>', '<p>')\n\t  //   returns 2: '<p>Kevin van Zonneveld</p>'\n\t  //   example 3: strip_tags(\"<a href='http://kvz.io'>Kevin van Zonneveld</a>\", \"<a>\")\n\t  //   returns 3: \"<a href='http://kvz.io'>Kevin van Zonneveld</a>\"\n\t  //   example 4: strip_tags('1 < 5 5 > 1')\n\t  //   returns 4: '1 < 5 5 > 1'\n\t  //   example 5: strip_tags('1 <br/> 1')\n\t  //   returns 5: '1  1'\n\t  //   example 6: strip_tags('1 <br/> 1', '<br>')\n\t  //   returns 6: '1 <br/> 1'\n\t  //   example 7: strip_tags('1 <br/> 1', '<br><br/>')\n\t  //   returns 7: '1 <br/> 1'\n\n\t  // making sure the allowed arg is a string containing only tags in lowercase (<a><b><c>)\n\t  allowed = (((allowed || '') + '').toLowerCase().match(/<[a-z][a-z0-9]*>/g) || []).join('');\n\n\t  var tags = /<\\/?([a-z][a-z0-9]*)\\b[^>]*>/gi;\n\t  var commentsAndPhpTags = /<!--[\\s\\S]*?-->|<\\?(?:php)?[\\s\\S]*?\\?>/gi;\n\n\t  return input.replace(commentsAndPhpTags, '').replace(tags, function ($0, $1) {\n\t    return allowed.indexOf('<' + $1.toLowerCase() + '>') > -1 ? $0 : '';\n\t  });\n\t};\n\t//# sourceMappingURL=strip_tags.js.map\n\n/***/ },\n/* 14 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\n\tmodule.exports = function strtotime(text, now) {\n\t  //  discuss at: http://locutus.io/php/strtotime/\n\t  // original by: Caio Ariede (http://caioariede.com)\n\t  // improved by: Kevin van Zonneveld (http://kvz.io)\n\t  // improved by: Caio Ariede (http://caioariede.com)\n\t  // improved by: A. Matías Quezada (http://amatiasq.com)\n\t  // improved by: preuter\n\t  // improved by: Brett Zamir (http://brett-zamir.me)\n\t  // improved by: Mirko Faber\n\t  //    input by: David\n\t  // bugfixed by: Wagner B. Soares\n\t  // bugfixed by: Artur Tchernychev\n\t  // bugfixed by: Stephan Bösch-Plepelits (http://github.com/plepe)\n\t  //      note 1: Examples all have a fixed timestamp to prevent\n\t  //      note 1: tests to fail because of variable time(zones)\n\t  //   example 1: strtotime('+1 day', 1129633200)\n\t  //   returns 1: 1129719600\n\t  //   example 2: strtotime('+1 week 2 days 4 hours 2 seconds', 1129633200)\n\t  //   returns 2: 1130425202\n\t  //   example 3: strtotime('last month', 1129633200)\n\t  //   returns 3: 1127041200\n\t  //   example 4: strtotime('2009-05-04 08:30:00 GMT')\n\t  //   returns 4: 1241425800\n\t  //   example 5: strtotime('2009-05-04 08:30:00+00')\n\t  //   returns 5: 1241425800\n\t  //   example 6: strtotime('2009-05-04 08:30:00+02:00')\n\t  //   returns 6: 1241418600\n\t  //   example 7: strtotime('2009-05-04T08:30:00Z')\n\t  //   returns 7: 1241425800\n\n\t  var parsed;\n\t  var match;\n\t  var today;\n\t  var year;\n\t  var date;\n\t  var days;\n\t  var ranges;\n\t  var len;\n\t  var times;\n\t  var regex;\n\t  var i;\n\t  var fail = false;\n\n\t  if (!text) {\n\t    return fail;\n\t  }\n\n\t  // Unecessary spaces\n\t  text = text.replace(/^\\s+|\\s+$/g, '').replace(/\\s{2,}/g, ' ').replace(/[\\t\\r\\n]/g, '').toLowerCase();\n\n\t  // in contrast to php, js Date.parse function interprets:\n\t  // dates given as yyyy-mm-dd as in timezone: UTC,\n\t  // dates with \".\" or \"-\" as MDY instead of DMY\n\t  // dates with two-digit years differently\n\t  // etc...etc...\n\t  // ...therefore we manually parse lots of common date formats\n\t  var pattern = new RegExp(['^(\\\\d{1,4})', '([\\\\-\\\\.\\\\/:])', '(\\\\d{1,2})', '([\\\\-\\\\.\\\\/:])', '(\\\\d{1,4})', '(?:\\\\s(\\\\d{1,2}):(\\\\d{2})?:?(\\\\d{2})?)?', '(?:\\\\s([A-Z]+)?)?$'].join(''));\n\t  match = text.match(pattern);\n\n\t  if (match && match[2] === match[4]) {\n\t    if (match[1] > 1901) {\n\t      switch (match[2]) {\n\t        case '-':\n\t          // YYYY-M-D\n\t          if (match[3] > 12 || match[5] > 31) {\n\t            return fail;\n\t          }\n\n\t          return new Date(match[1], parseInt(match[3], 10) - 1, match[5], match[6] || 0, match[7] || 0, match[8] || 0, match[9] || 0) / 1000;\n\t        case '.':\n\t          // YYYY.M.D is not parsed by strtotime()\n\t          return fail;\n\t        case '/':\n\t          // YYYY/M/D\n\t          if (match[3] > 12 || match[5] > 31) {\n\t            return fail;\n\t          }\n\n\t          return new Date(match[1], parseInt(match[3], 10) - 1, match[5], match[6] || 0, match[7] || 0, match[8] || 0, match[9] || 0) / 1000;\n\t      }\n\t    } else if (match[5] > 1901) {\n\t      switch (match[2]) {\n\t        case '-':\n\t          // D-M-YYYY\n\t          if (match[3] > 12 || match[1] > 31) {\n\t            return fail;\n\t          }\n\n\t          return new Date(match[5], parseInt(match[3], 10) - 1, match[1], match[6] || 0, match[7] || 0, match[8] || 0, match[9] || 0) / 1000;\n\t        case '.':\n\t          // D.M.YYYY\n\t          if (match[3] > 12 || match[1] > 31) {\n\t            return fail;\n\t          }\n\n\t          return new Date(match[5], parseInt(match[3], 10) - 1, match[1], match[6] || 0, match[7] || 0, match[8] || 0, match[9] || 0) / 1000;\n\t        case '/':\n\t          // M/D/YYYY\n\t          if (match[1] > 12 || match[3] > 31) {\n\t            return fail;\n\t          }\n\n\t          return new Date(match[5], parseInt(match[1], 10) - 1, match[3], match[6] || 0, match[7] || 0, match[8] || 0, match[9] || 0) / 1000;\n\t      }\n\t    } else {\n\t      switch (match[2]) {\n\t        case '-':\n\t          // YY-M-D\n\t          if (match[3] > 12 || match[5] > 31 || match[1] < 70 && match[1] > 38) {\n\t            return fail;\n\t          }\n\n\t          year = match[1] >= 0 && match[1] <= 38 ? +match[1] + 2000 : match[1];\n\t          return new Date(year, parseInt(match[3], 10) - 1, match[5], match[6] || 0, match[7] || 0, match[8] || 0, match[9] || 0) / 1000;\n\t        case '.':\n\t          // D.M.YY or H.MM.SS\n\t          if (match[5] >= 70) {\n\t            // D.M.YY\n\t            if (match[3] > 12 || match[1] > 31) {\n\t              return fail;\n\t            }\n\n\t            return new Date(match[5], parseInt(match[3], 10) - 1, match[1], match[6] || 0, match[7] || 0, match[8] || 0, match[9] || 0) / 1000;\n\t          }\n\t          if (match[5] < 60 && !match[6]) {\n\t            // H.MM.SS\n\t            if (match[1] > 23 || match[3] > 59) {\n\t              return fail;\n\t            }\n\n\t            today = new Date();\n\t            return new Date(today.getFullYear(), today.getMonth(), today.getDate(), match[1] || 0, match[3] || 0, match[5] || 0, match[9] || 0) / 1000;\n\t          }\n\n\t          // invalid format, cannot be parsed\n\t          return fail;\n\t        case '/':\n\t          // M/D/YY\n\t          if (match[1] > 12 || match[3] > 31 || match[5] < 70 && match[5] > 38) {\n\t            return fail;\n\t          }\n\n\t          year = match[5] >= 0 && match[5] <= 38 ? +match[5] + 2000 : match[5];\n\t          return new Date(year, parseInt(match[1], 10) - 1, match[3], match[6] || 0, match[7] || 0, match[8] || 0, match[9] || 0) / 1000;\n\t        case ':':\n\t          // HH:MM:SS\n\t          if (match[1] > 23 || match[3] > 59 || match[5] > 59) {\n\t            return fail;\n\t          }\n\n\t          today = new Date();\n\t          return new Date(today.getFullYear(), today.getMonth(), today.getDate(), match[1] || 0, match[3] || 0, match[5] || 0) / 1000;\n\t      }\n\t    }\n\t  }\n\n\t  // other formats and \"now\" should be parsed by Date.parse()\n\t  if (text === 'now') {\n\t    return now === null || isNaN(now) ? new Date().getTime() / 1000 | 0 : now | 0;\n\t  }\n\t  if (!isNaN(parsed = Date.parse(text))) {\n\t    return parsed / 1000 | 0;\n\t  }\n\t  // Browsers !== Chrome have problems parsing ISO 8601 date strings, as they do\n\t  // not accept lower case characters, space, or shortened time zones.\n\t  // Therefore, fix these problems and try again.\n\t  // Examples:\n\t  //   2015-04-15 20:33:59+02\n\t  //   2015-04-15 20:33:59z\n\t  //   2015-04-15t20:33:59+02:00\n\t  pattern = new RegExp(['^([0-9]{4}-[0-9]{2}-[0-9]{2})', '[ t]', '([0-9]{2}:[0-9]{2}:[0-9]{2}(\\\\.[0-9]+)?)', '([\\\\+-][0-9]{2}(:[0-9]{2})?|z)'].join(''));\n\t  match = text.match(pattern);\n\t  if (match) {\n\t    // @todo: time zone information\n\t    if (match[4] === 'z') {\n\t      match[4] = 'Z';\n\t    } else if (match[4].match(/^([+-][0-9]{2})$/)) {\n\t      match[4] = match[4] + ':00';\n\t    }\n\n\t    if (!isNaN(parsed = Date.parse(match[1] + 'T' + match[2] + match[4]))) {\n\t      return parsed / 1000 | 0;\n\t    }\n\t  }\n\n\t  date = now ? new Date(now * 1000) : new Date();\n\t  days = {\n\t    'sun': 0,\n\t    'mon': 1,\n\t    'tue': 2,\n\t    'wed': 3,\n\t    'thu': 4,\n\t    'fri': 5,\n\t    'sat': 6\n\t  };\n\t  ranges = {\n\t    'yea': 'FullYear',\n\t    'mon': 'Month',\n\t    'day': 'Date',\n\t    'hou': 'Hours',\n\t    'min': 'Minutes',\n\t    'sec': 'Seconds'\n\t  };\n\n\t  function lastNext(type, range, modifier) {\n\t    var diff;\n\t    var day = days[range];\n\n\t    if (typeof day !== 'undefined') {\n\t      diff = day - date.getDay();\n\n\t      if (diff === 0) {\n\t        diff = 7 * modifier;\n\t      } else if (diff > 0 && type === 'last') {\n\t        diff -= 7;\n\t      } else if (diff < 0 && type === 'next') {\n\t        diff += 7;\n\t      }\n\n\t      date.setDate(date.getDate() + diff);\n\t    }\n\t  }\n\n\t  function process(val) {\n\t    // @todo: Reconcile this with regex using \\s, taking into account\n\t    // browser issues with split and regexes\n\t    var splt = val.split(' ');\n\t    var type = splt[0];\n\t    var range = splt[1].substring(0, 3);\n\t    var typeIsNumber = /\\d+/.test(type);\n\t    var ago = splt[2] === 'ago';\n\t    var num = (type === 'last' ? -1 : 1) * (ago ? -1 : 1);\n\n\t    if (typeIsNumber) {\n\t      num *= parseInt(type, 10);\n\t    }\n\n\t    if (ranges.hasOwnProperty(range) && !splt[1].match(/^mon(day|\\.)?$/i)) {\n\t      return date['set' + ranges[range]](date['get' + ranges[range]]() + num);\n\t    }\n\n\t    if (range === 'wee') {\n\t      return date.setDate(date.getDate() + num * 7);\n\t    }\n\n\t    if (type === 'next' || type === 'last') {\n\t      lastNext(type, range, num);\n\t    } else if (!typeIsNumber) {\n\t      return false;\n\t    }\n\n\t    return true;\n\t  }\n\n\t  times = '(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec' + '|sunday|sun\\\\.?|monday|mon\\\\.?|tuesday|tue\\\\.?|wednesday|wed\\\\.?' + '|thursday|thu\\\\.?|friday|fri\\\\.?|saturday|sat\\\\.?)';\n\t  regex = '([+-]?\\\\d+\\\\s' + times + '|' + '(last|next)\\\\s' + times + ')(\\\\sago)?';\n\n\t  match = text.match(new RegExp(regex, 'gi'));\n\t  if (!match) {\n\t    return fail;\n\t  }\n\n\t  for (i = 0, len = match.length; i < len; i++) {\n\t    if (!process(match[i])) {\n\t      return fail;\n\t    }\n\t  }\n\n\t  return date.getTime() / 1000;\n\t};\n\t//# sourceMappingURL=strtotime.js.map\n\n/***/ },\n/* 15 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\n\tmodule.exports = function date(format, timestamp) {\n\t  //  discuss at: http://locutus.io/php/date/\n\t  // original by: Carlos R. L. Rodrigues (http://www.jsfromhell.com)\n\t  // original by: gettimeofday\n\t  //    parts by: Peter-Paul Koch (http://www.quirksmode.org/js/beat.html)\n\t  // improved by: Kevin van Zonneveld (http://kvz.io)\n\t  // improved by: MeEtc (http://yass.meetcweb.com)\n\t  // improved by: Brad Touesnard\n\t  // improved by: Tim Wiel\n\t  // improved by: Bryan Elliott\n\t  // improved by: David Randall\n\t  // improved by: Theriault (https://github.com/Theriault)\n\t  // improved by: Theriault (https://github.com/Theriault)\n\t  // improved by: Brett Zamir (http://brett-zamir.me)\n\t  // improved by: Theriault (https://github.com/Theriault)\n\t  // improved by: Thomas Beaucourt (http://www.webapp.fr)\n\t  // improved by: JT\n\t  // improved by: Theriault (https://github.com/Theriault)\n\t  // improved by: Rafał Kukawski (http://blog.kukawski.pl)\n\t  // improved by: Theriault (https://github.com/Theriault)\n\t  //    input by: Brett Zamir (http://brett-zamir.me)\n\t  //    input by: majak\n\t  //    input by: Alex\n\t  //    input by: Martin\n\t  //    input by: Alex Wilson\n\t  //    input by: Haravikk\n\t  // bugfixed by: Kevin van Zonneveld (http://kvz.io)\n\t  // bugfixed by: majak\n\t  // bugfixed by: Kevin van Zonneveld (http://kvz.io)\n\t  // bugfixed by: Brett Zamir (http://brett-zamir.me)\n\t  // bugfixed by: omid (http://locutus.io/php/380:380#comment_137122)\n\t  // bugfixed by: Chris (http://www.devotis.nl/)\n\t  //      note 1: Uses global: locutus to store the default timezone\n\t  //      note 1: Although the function potentially allows timezone info\n\t  //      note 1: (see notes), it currently does not set\n\t  //      note 1: per a timezone specified by date_default_timezone_set(). Implementers might use\n\t  //      note 1: $locutus.currentTimezoneOffset and\n\t  //      note 1: $locutus.currentTimezoneDST set by that function\n\t  //      note 1: in order to adjust the dates in this function\n\t  //      note 1: (or our other date functions!) accordingly\n\t  //   example 1: date('H:m:s \\\\m \\\\i\\\\s \\\\m\\\\o\\\\n\\\\t\\\\h', 1062402400)\n\t  //   returns 1: '07:09:40 m is month'\n\t  //   example 2: date('F j, Y, g:i a', 1062462400)\n\t  //   returns 2: 'September 2, 2003, 12:26 am'\n\t  //   example 3: date('Y W o', 1062462400)\n\t  //   returns 3: '2003 36 2003'\n\t  //   example 4: var $x = date('Y m d', (new Date()).getTime() / 1000)\n\t  //   example 4: $x = $x + ''\n\t  //   example 4: var $result = $x.length // 2009 01 09\n\t  //   returns 4: 10\n\t  //   example 5: date('W', 1104534000)\n\t  //   returns 5: '52'\n\t  //   example 6: date('B t', 1104534000)\n\t  //   returns 6: '999 31'\n\t  //   example 7: date('W U', 1293750000.82); // 2010-12-31\n\t  //   returns 7: '52 1293750000'\n\t  //   example 8: date('W', 1293836400); // 2011-01-01\n\t  //   returns 8: '52'\n\t  //   example 9: date('W Y-m-d', 1293974054); // 2011-01-02\n\t  //   returns 9: '52 2011-01-02'\n\t  //        test: skip-1 skip-2 skip-5\n\n\t  var jsdate, f;\n\t  // Keep this here (works, but for code commented-out below for file size reasons)\n\t  // var tal= [];\n\t  var txtWords = ['Sun', 'Mon', 'Tues', 'Wednes', 'Thurs', 'Fri', 'Satur', 'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n\t  // trailing backslash -> (dropped)\n\t  // a backslash followed by any character (including backslash) -> the character\n\t  // empty string -> empty string\n\t  var formatChr = /\\\\?(.?)/gi;\n\t  var formatChrCb = function formatChrCb(t, s) {\n\t    return f[t] ? f[t]() : s;\n\t  };\n\t  var _pad = function _pad(n, c) {\n\t    n = String(n);\n\t    while (n.length < c) {\n\t      n = '0' + n;\n\t    }\n\t    return n;\n\t  };\n\t  f = {\n\t    // Day\n\t    d: function d() {\n\t      // Day of month w/leading 0; 01..31\n\t      return _pad(f.j(), 2);\n\t    },\n\t    D: function D() {\n\t      // Shorthand day name; Mon...Sun\n\t      return f.l().slice(0, 3);\n\t    },\n\t    j: function j() {\n\t      // Day of month; 1..31\n\t      return jsdate.getDate();\n\t    },\n\t    l: function l() {\n\t      // Full day name; Monday...Sunday\n\t      return txtWords[f.w()] + 'day';\n\t    },\n\t    N: function N() {\n\t      // ISO-8601 day of week; 1[Mon]..7[Sun]\n\t      return f.w() || 7;\n\t    },\n\t    S: function S() {\n\t      // Ordinal suffix for day of month; st, nd, rd, th\n\t      var j = f.j();\n\t      var i = j % 10;\n\t      if (i <= 3 && parseInt(j % 100 / 10, 10) === 1) {\n\t        i = 0;\n\t      }\n\t      return ['st', 'nd', 'rd'][i - 1] || 'th';\n\t    },\n\t    w: function w() {\n\t      // Day of week; 0[Sun]..6[Sat]\n\t      return jsdate.getDay();\n\t    },\n\t    z: function z() {\n\t      // Day of year; 0..365\n\t      var a = new Date(f.Y(), f.n() - 1, f.j());\n\t      var b = new Date(f.Y(), 0, 1);\n\t      return Math.round((a - b) / 864e5);\n\t    },\n\n\t    // Week\n\t    W: function W() {\n\t      // ISO-8601 week number\n\t      var a = new Date(f.Y(), f.n() - 1, f.j() - f.N() + 3);\n\t      var b = new Date(a.getFullYear(), 0, 4);\n\t      return _pad(1 + Math.round((a - b) / 864e5 / 7), 2);\n\t    },\n\n\t    // Month\n\t    F: function F() {\n\t      // Full month name; January...December\n\t      return txtWords[6 + f.n()];\n\t    },\n\t    m: function m() {\n\t      // Month w/leading 0; 01...12\n\t      return _pad(f.n(), 2);\n\t    },\n\t    M: function M() {\n\t      // Shorthand month name; Jan...Dec\n\t      return f.F().slice(0, 3);\n\t    },\n\t    n: function n() {\n\t      // Month; 1...12\n\t      return jsdate.getMonth() + 1;\n\t    },\n\t    t: function t() {\n\t      // Days in month; 28...31\n\t      return new Date(f.Y(), f.n(), 0).getDate();\n\t    },\n\n\t    // Year\n\t    L: function L() {\n\t      // Is leap year?; 0 or 1\n\t      var j = f.Y();\n\t      return j % 4 === 0 & j % 100 !== 0 | j % 400 === 0;\n\t    },\n\t    o: function o() {\n\t      // ISO-8601 year\n\t      var n = f.n();\n\t      var W = f.W();\n\t      var Y = f.Y();\n\t      return Y + (n === 12 && W < 9 ? 1 : n === 1 && W > 9 ? -1 : 0);\n\t    },\n\t    Y: function Y() {\n\t      // Full year; e.g. 1980...2010\n\t      return jsdate.getFullYear();\n\t    },\n\t    y: function y() {\n\t      // Last two digits of year; 00...99\n\t      return f.Y().toString().slice(-2);\n\t    },\n\n\t    // Time\n\t    a: function a() {\n\t      // am or pm\n\t      return jsdate.getHours() > 11 ? 'pm' : 'am';\n\t    },\n\t    A: function A() {\n\t      // AM or PM\n\t      return f.a().toUpperCase();\n\t    },\n\t    B: function B() {\n\t      // Swatch Internet time; 000..999\n\t      var H = jsdate.getUTCHours() * 36e2;\n\t      // Hours\n\t      var i = jsdate.getUTCMinutes() * 60;\n\t      // Minutes\n\t      // Seconds\n\t      var s = jsdate.getUTCSeconds();\n\t      return _pad(Math.floor((H + i + s + 36e2) / 86.4) % 1e3, 3);\n\t    },\n\t    g: function g() {\n\t      // 12-Hours; 1..12\n\t      return f.G() % 12 || 12;\n\t    },\n\t    G: function G() {\n\t      // 24-Hours; 0..23\n\t      return jsdate.getHours();\n\t    },\n\t    h: function h() {\n\t      // 12-Hours w/leading 0; 01..12\n\t      return _pad(f.g(), 2);\n\t    },\n\t    H: function H() {\n\t      // 24-Hours w/leading 0; 00..23\n\t      return _pad(f.G(), 2);\n\t    },\n\t    i: function i() {\n\t      // Minutes w/leading 0; 00..59\n\t      return _pad(jsdate.getMinutes(), 2);\n\t    },\n\t    s: function s() {\n\t      // Seconds w/leading 0; 00..59\n\t      return _pad(jsdate.getSeconds(), 2);\n\t    },\n\t    u: function u() {\n\t      // Microseconds; 000000-999000\n\t      return _pad(jsdate.getMilliseconds() * 1000, 6);\n\t    },\n\n\t    // Timezone\n\t    e: function e() {\n\t      // Timezone identifier; e.g. Atlantic/Azores, ...\n\t      // The following works, but requires inclusion of the very large\n\t      // timezone_abbreviations_list() function.\n\t      /*              return that.date_default_timezone_get();\n\t       */\n\t      var msg = 'Not supported (see source code of date() for timezone on how to add support)';\n\t      throw new Error(msg);\n\t    },\n\t    I: function I() {\n\t      // DST observed?; 0 or 1\n\t      // Compares Jan 1 minus Jan 1 UTC to Jul 1 minus Jul 1 UTC.\n\t      // If they are not equal, then DST is observed.\n\t      var a = new Date(f.Y(), 0);\n\t      // Jan 1\n\t      var c = Date.UTC(f.Y(), 0);\n\t      // Jan 1 UTC\n\t      var b = new Date(f.Y(), 6);\n\t      // Jul 1\n\t      // Jul 1 UTC\n\t      var d = Date.UTC(f.Y(), 6);\n\t      return a - c !== b - d ? 1 : 0;\n\t    },\n\t    O: function O() {\n\t      // Difference to GMT in hour format; e.g. +0200\n\t      var tzo = jsdate.getTimezoneOffset();\n\t      var a = Math.abs(tzo);\n\t      return (tzo > 0 ? '-' : '+') + _pad(Math.floor(a / 60) * 100 + a % 60, 4);\n\t    },\n\t    P: function P() {\n\t      // Difference to GMT w/colon; e.g. +02:00\n\t      var O = f.O();\n\t      return O.substr(0, 3) + ':' + O.substr(3, 2);\n\t    },\n\t    T: function T() {\n\t      // The following works, but requires inclusion of the very\n\t      // large timezone_abbreviations_list() function.\n\t      /*              var abbr, i, os, _default;\n\t      if (!tal.length) {\n\t        tal = that.timezone_abbreviations_list();\n\t      }\n\t      if ($locutus && $locutus.default_timezone) {\n\t        _default = $locutus.default_timezone;\n\t        for (abbr in tal) {\n\t          for (i = 0; i < tal[abbr].length; i++) {\n\t            if (tal[abbr][i].timezone_id === _default) {\n\t              return abbr.toUpperCase();\n\t            }\n\t          }\n\t        }\n\t      }\n\t      for (abbr in tal) {\n\t        for (i = 0; i < tal[abbr].length; i++) {\n\t          os = -jsdate.getTimezoneOffset() * 60;\n\t          if (tal[abbr][i].offset === os) {\n\t            return abbr.toUpperCase();\n\t          }\n\t        }\n\t      }\n\t      */\n\t      return 'UTC';\n\t    },\n\t    Z: function Z() {\n\t      // Timezone offset in seconds (-43200...50400)\n\t      return -jsdate.getTimezoneOffset() * 60;\n\t    },\n\n\t    // Full Date/Time\n\t    c: function c() {\n\t      // ISO-8601 date.\n\t      return 'Y-m-d\\\\TH:i:sP'.replace(formatChr, formatChrCb);\n\t    },\n\t    r: function r() {\n\t      // RFC 2822\n\t      return 'D, d M Y H:i:s O'.replace(formatChr, formatChrCb);\n\t    },\n\t    U: function U() {\n\t      // Seconds since UNIX epoch\n\t      return jsdate / 1000 | 0;\n\t    }\n\t  };\n\n\t  var _date = function _date(format, timestamp) {\n\t    jsdate = timestamp === undefined ? new Date() // Not provided\n\t    : timestamp instanceof Date ? new Date(timestamp) // JS Date()\n\t    : new Date(timestamp * 1000) // UNIX timestamp (auto-convert to int)\n\t    ;\n\t    return format.replace(formatChr, formatChrCb);\n\t  };\n\n\t  return _date(format, timestamp);\n\t};\n\t//# sourceMappingURL=date.js.map\n\n/***/ },\n/* 16 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\n\tmodule.exports = function boolval(mixedVar) {\n\t  // original by: Will Rowe\n\t  //   example 1: boolval(true)\n\t  //   returns 1: true\n\t  //   example 2: boolval(false)\n\t  //   returns 2: false\n\t  //   example 3: boolval(0)\n\t  //   returns 3: false\n\t  //   example 4: boolval(0.0)\n\t  //   returns 4: false\n\t  //   example 5: boolval('')\n\t  //   returns 5: false\n\t  //   example 6: boolval('0')\n\t  //   returns 6: false\n\t  //   example 7: boolval([])\n\t  //   returns 7: false\n\t  //   example 8: boolval('')\n\t  //   returns 8: false\n\t  //   example 9: boolval(null)\n\t  //   returns 9: false\n\t  //   example 10: boolval(undefined)\n\t  //   returns 10: false\n\t  //   example 11: boolval('true')\n\t  //   returns 11: true\n\n\t  if (mixedVar === false) {\n\t    return false;\n\t  }\n\n\t  if (mixedVar === 0 || mixedVar === 0.0) {\n\t    return false;\n\t  }\n\n\t  if (mixedVar === '' || mixedVar === '0') {\n\t    return false;\n\t  }\n\n\t  if (Array.isArray(mixedVar) && mixedVar.length === 0) {\n\t    return false;\n\t  }\n\n\t  if (mixedVar === null || mixedVar === undefined) {\n\t    return false;\n\t  }\n\n\t  return true;\n\t};\n\t//# sourceMappingURL=boolval.js.map\n\n/***/ },\n/* 17 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(Twig) {\n\t    'use strict';\n\n\t    Twig.Templates.registerLoader('ajax', function(location, params, callback, error_callback) {\n\t        var template,\n\t            xmlhttp,\n\t            precompiled = params.precompiled,\n\t            parser = this.parsers[params.parser] || this.parser.twig;\n\n\t        if (typeof XMLHttpRequest === \"undefined\") {\n\t            throw new Twig.Error('Unsupported platform: Unable to do ajax requests ' +\n\t                                 'because there is no \"XMLHTTPRequest\" implementation');\n\t        }\n\n\t        xmlhttp = new XMLHttpRequest();\n\t        xmlhttp.onreadystatechange = function() {\n\t            var data = null;\n\n\t            if(xmlhttp.readyState === 4) {\n\t                if (xmlhttp.status === 200 || (window.cordova && xmlhttp.status == 0)) {\n\t                    Twig.log.debug(\"Got template \", xmlhttp.responseText);\n\n\t                    if (precompiled === true) {\n\t                        data = JSON.parse(xmlhttp.responseText);\n\t                    } else {\n\t                        data = xmlhttp.responseText;\n\t                    }\n\n\t                    params.url = location;\n\t                    params.data = data;\n\n\t                    template = parser.call(this, params);\n\n\t                    if (typeof callback === 'function') {\n\t                        callback(template);\n\t                    }\n\t                } else {\n\t                    if (typeof error_callback === 'function') {\n\t                        error_callback(xmlhttp);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        xmlhttp.open(\"GET\", location, !!params.async);\n\t        xmlhttp.send();\n\n\t        if (params.async) {\n\t            // TODO: return deferred promise\n\t            return true;\n\t        } else {\n\t            return template;\n\t        }\n\t    });\n\n\t};\n\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = function(Twig) {\n\t    'use strict';\n\n\t    var fs, path;\n\n\t    try {\n\t    \t// require lib dependencies at runtime\n\t    \tfs = __webpack_require__(19);\n\t    \tpath = __webpack_require__(20);\n\t    } catch (e) {\n\t    \t// NOTE: this is in a try/catch to avoid errors cross platform\n\t    }\n\n\t    Twig.Templates.registerLoader('fs', function(location, params, callback, error_callback) {\n\t        var template,\n\t            data = null,\n\t            precompiled = params.precompiled,\n\t            parser = this.parsers[params.parser] || this.parser.twig;\n\n\t        if (!fs || !path) {\n\t            throw new Twig.Error('Unsupported platform: Unable to load from file ' +\n\t                                 'because there is no \"fs\" or \"path\" implementation');\n\t        }\n\n\t        var loadTemplateFn = function(err, data) {\n\t            if (err) {\n\t                if (typeof error_callback === 'function') {\n\t                    error_callback(err);\n\t                }\n\t                return;\n\t            }\n\n\t            if (precompiled === true) {\n\t                data = JSON.parse(data);\n\t            }\n\n\t            params.data = data;\n\t            params.path = params.path || location;\n\n\t            // template is in data\n\t            template = parser.call(this, params);\n\n\t            if (typeof callback === 'function') {\n\t                callback(template);\n\t            }\n\t        };\n\t        params.path = params.path || location;\n\n\t        if (params.async) {\n\t            fs.stat(params.path, function (err, stats) {\n\t                if (err || !stats.isFile()) {\n\t                    if (typeof error_callback === 'function') {\n\t                        error_callback(new Twig.Error('Unable to find template file ' + params.path));\n\t                    }\n\t                    return;\n\t                }\n\t                fs.readFile(params.path, 'utf8', loadTemplateFn);\n\t            });\n\t            // TODO: return deferred promise\n\t            return true;\n\t        } else {\n\t            try {\n\t                if (!fs.statSync(params.path).isFile()) {\n\t                    throw new Twig.Error('Unable to find template file ' + params.path);\n\t                }\n\t            } catch (err) {\n\t                throw new Twig.Error('Unable to find template file ' + params.path);\n\t            }\n\t            data = fs.readFileSync(params.path, 'utf8');\n\t            loadTemplateFn(undefined, data);\n\t            return template\n\t        }\n\t    });\n\n\t};\n\n\n/***/ },\n/* 19 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"fs\");\n\n/***/ },\n/* 20 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"path\");\n\n/***/ },\n/* 21 */\n/***/ function(module, exports) {\n\n\t// ## twig.logic.js\n\t//\n\t// This file handles tokenizing, compiling and parsing logic tokens. {% ... %}\n\tmodule.exports = function (Twig) {\n\t    \"use strict\";\n\n\t    /**\n\t     * Namespace for logic handling.\n\t     */\n\t    Twig.logic = {};\n\n\t    /**\n\t     * Logic token types.\n\t     */\n\t    Twig.logic.type = {\n\t        if_:       'Twig.logic.type.if',\n\t        endif:     'Twig.logic.type.endif',\n\t        for_:      'Twig.logic.type.for',\n\t        endfor:    'Twig.logic.type.endfor',\n\t        else_:     'Twig.logic.type.else',\n\t        elseif:    'Twig.logic.type.elseif',\n\t        set:       'Twig.logic.type.set',\n\t        setcapture:'Twig.logic.type.setcapture',\n\t        endset:    'Twig.logic.type.endset',\n\t        filter:    'Twig.logic.type.filter',\n\t        endfilter: 'Twig.logic.type.endfilter',\n\t        shortblock: 'Twig.logic.type.shortblock',\n\t        block:     'Twig.logic.type.block',\n\t        endblock:  'Twig.logic.type.endblock',\n\t        extends_:  'Twig.logic.type.extends',\n\t        use:       'Twig.logic.type.use',\n\t        include:   'Twig.logic.type.include',\n\t        spaceless: 'Twig.logic.type.spaceless',\n\t        endspaceless: 'Twig.logic.type.endspaceless',\n\t        macro:     'Twig.logic.type.macro',\n\t        endmacro:  'Twig.logic.type.endmacro',\n\t        import_:   'Twig.logic.type.import',\n\t        from:      'Twig.logic.type.from',\n\t        embed:     'Twig.logic.type.embed',\n\t        endembed:  'Twig.logic.type.endembed'\n\t    };\n\n\n\t    // Regular expressions for handling logic tokens.\n\t    //\n\t    // Properties:\n\t    //\n\t    //      type:  The type of expression this matches\n\t    //\n\t    //      regex: A regular expression that matches the format of the token\n\t    //\n\t    //      next:  What logic tokens (if any) pop this token off the logic stack. If empty, the\n\t    //             logic token is assumed to not require an end tag and isn't push onto the stack.\n\t    //\n\t    //      open:  Does this tag open a logic expression or is it standalone. For example,\n\t    //             {% endif %} cannot exist without an opening {% if ... %} tag, so open = false.\n\t    //\n\t    //  Functions:\n\t    //\n\t    //      compile: A function that handles compiling the token into an output token ready for\n\t    //               parsing with the parse function.\n\t    //\n\t    //      parse:   A function that parses the compiled token into output (HTML / whatever the\n\t    //               template represents).\n\t    Twig.logic.definitions = [\n\t        {\n\t            /**\n\t             * If type logic tokens.\n\t             *\n\t             *  Format: {% if expression %}\n\t             */\n\t            type: Twig.logic.type.if_,\n\t            regex: /^if\\s+([\\s\\S]+)$/,\n\t            next: [\n\t                Twig.logic.type.else_,\n\t                Twig.logic.type.elseif,\n\t                Twig.logic.type.endif\n\t            ],\n\t            open: true,\n\t            compile: function (token) {\n\t                var expression = token.match[1];\n\t                // Compile the expression.\n\t                token.stack = Twig.expression.compile.apply(this, [{\n\t                    type:  Twig.expression.type.expression,\n\t                    value: expression\n\t                }]).stack;\n\t                delete token.match;\n\t                return token;\n\t            },\n\t            parse: function (token, context, chain) {\n\t                var that = this;\n\n\t                return Twig.expression.parseAsync.apply(this, [token.stack, context])\n\t                .then(function(result) {\n\t                    chain = true;\n\n\t                    if (Twig.lib.boolval(result)) {\n\t                        chain = false;\n\n\t                        return Twig.parseAsync.apply(that, [token.output, context]);\n\t                    }\n\n\t                    return '';\n\t                })\n\t                .then(function(output) {\n\t                    return {\n\t                        chain: chain,\n\t                        output: output\n\t                    };\n\t                });\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * Else if type logic tokens.\n\t             *\n\t             *  Format: {% elseif expression %}\n\t             */\n\t            type: Twig.logic.type.elseif,\n\t            regex: /^elseif\\s+([^\\s].*)$/,\n\t            next: [\n\t                Twig.logic.type.else_,\n\t                Twig.logic.type.elseif,\n\t                Twig.logic.type.endif\n\t            ],\n\t            open: false,\n\t            compile: function (token) {\n\t                var expression = token.match[1];\n\t                // Compile the expression.\n\t                token.stack = Twig.expression.compile.apply(this, [{\n\t                    type:  Twig.expression.type.expression,\n\t                    value: expression\n\t                }]).stack;\n\t                delete token.match;\n\t                return token;\n\t            },\n\t            parse: function (token, context, chain) {\n\t                var that = this;\n\n\t                return Twig.expression.parseAsync.apply(this, [token.stack, context])\n\t                .then(function(result) {\n\t                    if (chain && Twig.lib.boolval(result)) {\n\t                        chain = false;\n\n\t                        return Twig.parseAsync.apply(that, [token.output, context]);\n\t                    }\n\n\t                    return '';\n\t                })\n\t                .then(function(output) {\n\t                    return {\n\t                        chain: chain,\n\t                        output: output\n\t                    }\n\t                });\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * Else if type logic tokens.\n\t             *\n\t             *  Format: {% elseif expression %}\n\t             */\n\t            type: Twig.logic.type.else_,\n\t            regex: /^else$/,\n\t            next: [\n\t                Twig.logic.type.endif,\n\t                Twig.logic.type.endfor\n\t            ],\n\t            open: false,\n\t            parse: function (token, context, chain) {\n\t                var promise = Twig.Promise.resolve('');\n\n\t                if (chain) {\n\t                    promise = Twig.parseAsync.apply(this, [token.output, context]);\n\t                }\n\n\t                return promise.then(function(output) {\n\t                    return {\n\t                        chain: chain,\n\t                        output: output\n\t                    };\n\t                });\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * End if type logic tokens.\n\t             *\n\t             *  Format: {% endif %}\n\t             */\n\t            type: Twig.logic.type.endif,\n\t            regex: /^endif$/,\n\t            next: [ ],\n\t            open: false\n\t        },\n\t        {\n\t            /**\n\t             * For type logic tokens.\n\t             *\n\t             *  Format: {% for expression %}\n\t             */\n\t            type: Twig.logic.type.for_,\n\t            regex: /^for\\s+([a-zA-Z0-9_,\\s]+)\\s+in\\s+([^\\s].*?)(?:\\s+if\\s+([^\\s].*))?$/,\n\t            next: [\n\t                Twig.logic.type.else_,\n\t                Twig.logic.type.endfor\n\t            ],\n\t            open: true,\n\t            compile: function (token) {\n\t                var key_value = token.match[1],\n\t                    expression = token.match[2],\n\t                    conditional = token.match[3],\n\t                    kv_split = null;\n\n\t                token.key_var = null;\n\t                token.value_var = null;\n\n\t                if (key_value.indexOf(\",\") >= 0) {\n\t                    kv_split = key_value.split(',');\n\t                    if (kv_split.length === 2) {\n\t                        token.key_var = kv_split[0].trim();\n\t                        token.value_var = kv_split[1].trim();\n\t                    } else {\n\t                        throw new Twig.Error(\"Invalid expression in for loop: \" + key_value);\n\t                    }\n\t                } else {\n\t                    token.value_var = key_value;\n\t                }\n\n\t                // Valid expressions for a for loop\n\t                //   for item     in expression\n\t                //   for key,item in expression\n\n\t                // Compile the expression.\n\t                token.expression = Twig.expression.compile.apply(this, [{\n\t                    type:  Twig.expression.type.expression,\n\t                    value: expression\n\t                }]).stack;\n\n\t                // Compile the conditional (if available)\n\t                if (conditional) {\n\t                    token.conditional = Twig.expression.compile.apply(this, [{\n\t                        type:  Twig.expression.type.expression,\n\t                        value: conditional\n\t                    }]).stack;\n\t                }\n\n\t                delete token.match;\n\t                return token;\n\t            },\n\t            parse: function (token, context, continue_chain) {\n\t                // Parse expression\n\t                var output = [],\n\t                    len,\n\t                    index = 0,\n\t                    keyset,\n\t                    that = this,\n\t                    conditional = token.conditional,\n\t                    buildLoop = function(index, len) {\n\t                        var isConditional = conditional !== undefined;\n\t                        return {\n\t                            index: index+1,\n\t                            index0: index,\n\t                            revindex: isConditional?undefined:len-index,\n\t                            revindex0: isConditional?undefined:len-index-1,\n\t                            first: (index === 0),\n\t                            last: isConditional?undefined:(index === len-1),\n\t                            length: isConditional?undefined:len,\n\t                            parent: context\n\t                        };\n\t                    },\n\t                    // run once for each iteration of the loop\n\t                    loop = function(key, value) {\n\t                        var inner_context = Twig.ChildContext(context);\n\n\t                        inner_context[token.value_var] = value;\n\n\t                        if (token.key_var) {\n\t                            inner_context[token.key_var] = key;\n\t                        }\n\n\t                        // Loop object\n\t                        inner_context.loop = buildLoop(index, len);\n\n\t                        var promise = conditional === undefined ?\n\t                            Twig.Promise.resolve(true) :\n\t                            Twig.expression.parseAsync.apply(that, [conditional, inner_context]);\n\n\t                        promise.then(function(condition) {\n\t                            if (!condition)\n\t                                return;\n\n\t                            return Twig.parseAsync.apply(that, [token.output, inner_context])\n\t                            .then(function(o) {\n\t                                output.push(o);\n\t                                index += 1;\n\t                            });\n\t                        })\n\t                        .then(function() {\n\t                            // Delete loop-related variables from the context\n\t                            delete inner_context['loop'];\n\t                            delete inner_context[token.value_var];\n\t                            delete inner_context[token.key_var];\n\n\t                            // Merge in values that exist in context but have changed\n\t                            // in inner_context.\n\t                            Twig.merge(context, inner_context, true);\n\t                        });\n\t                    };\n\n\n\t                return Twig.expression.parseAsync.apply(this, [token.expression, context])\n\t                .then(function(result) {\n\t                    if (Twig.lib.is('Array', result)) {\n\t                        len = result.length;\n\t                        Twig.async.forEach(result, function (value) {\n\t                            var key = index;\n\n\t                            return loop(key, value);\n\t                        });\n\t                    } else if (Twig.lib.is('Object', result)) {\n\t                        if (result._keys !== undefined) {\n\t                            keyset = result._keys;\n\t                        } else {\n\t                            keyset = Object.keys(result);\n\t                        }\n\t                        len = keyset.length;\n\t                        Twig.forEach(keyset, function(key) {\n\t                            // Ignore the _keys property, it's internal to twig.js\n\t                            if (key === \"_keys\") return;\n\n\t                            loop(key,  result[key]);\n\t                        });\n\t                    }\n\n\t                    // Only allow else statements if no output was generated\n\t                    continue_chain = (output.length === 0);\n\n\t                    return {\n\t                        chain: continue_chain,\n\t                        output: Twig.output.apply(that, [output])\n\t                    };\n\t                });\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * End if type logic tokens.\n\t             *\n\t             *  Format: {% endif %}\n\t             */\n\t            type: Twig.logic.type.endfor,\n\t            regex: /^endfor$/,\n\t            next: [ ],\n\t            open: false\n\t        },\n\t        {\n\t            /**\n\t             * Set type logic tokens.\n\t             *\n\t             *  Format: {% set key = expression %}\n\t             */\n\t            type: Twig.logic.type.set,\n\t            regex: /^set\\s+([a-zA-Z0-9_,\\s]+)\\s*=\\s*([\\s\\S]+)$/,\n\t            next: [ ],\n\t            open: true,\n\t            compile: function (token) {\n\t                var key = token.match[1].trim(),\n\t                    expression = token.match[2],\n\t                    // Compile the expression.\n\t                    expression_stack  = Twig.expression.compile.apply(this, [{\n\t                        type:  Twig.expression.type.expression,\n\t                        value: expression\n\t                    }]).stack;\n\n\t                token.key = key;\n\t                token.expression = expression_stack;\n\n\t                delete token.match;\n\t                return token;\n\t            },\n\t            parse: function (token, context, continue_chain) {\n\t                var key = token.key;\n\n\t                return Twig.expression.parseAsync.apply(this, [token.expression, context])\n\t                .then(function(value) {\n\t                    if (value === context) {\n\t                        /*  If storing the context in a variable, it needs to be a clone of the current state of context.\n\t                            Otherwise we have a context with infinite recursion.\n\t                            Fixes #341\n\t                        */\n\t                        value = Twig.lib.copy(value);\n\t                    }\n\n\t                    context[key] = value;\n\n\t                    return {\n\t                        chain: continue_chain,\n\t                        context: context\n\t                    };\n\t                });\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * Set capture type logic tokens.\n\t             *\n\t             *  Format: {% set key %}\n\t             */\n\t            type: Twig.logic.type.setcapture,\n\t            regex: /^set\\s+([a-zA-Z0-9_,\\s]+)$/,\n\t            next: [\n\t                Twig.logic.type.endset\n\t            ],\n\t            open: true,\n\t            compile: function (token) {\n\t                var key = token.match[1].trim();\n\n\t                token.key = key;\n\n\t                delete token.match;\n\t                return token;\n\t            },\n\t            parse: function (token, context, continue_chain) {\n\t                var that = this,\n\t                    key = token.key;\n\n\t                return Twig.parseAsync.apply(this, [token.output, context])\n\t                .then(function(value) {\n\t                    // set on both the global and local context\n\t                    that.context[key] = value;\n\t                    context[key] = value;\n\n\t                    return {\n\t                        chain: continue_chain,\n\t                        context: context\n\t                    };\n\t                });\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * End set type block logic tokens.\n\t             *\n\t             *  Format: {% endset %}\n\t             */\n\t            type: Twig.logic.type.endset,\n\t            regex: /^endset$/,\n\t            next: [ ],\n\t            open: false\n\t        },\n\t        {\n\t            /**\n\t             * Filter logic tokens.\n\t             *\n\t             *  Format: {% filter upper %} or {% filter lower|escape %}\n\t             */\n\t            type: Twig.logic.type.filter,\n\t            regex: /^filter\\s+(.+)$/,\n\t            next: [\n\t                Twig.logic.type.endfilter\n\t            ],\n\t            open: true,\n\t            compile: function (token) {\n\t                var expression = \"|\" + token.match[1].trim();\n\t                // Compile the expression.\n\t                token.stack = Twig.expression.compile.apply(this, [{\n\t                    type:  Twig.expression.type.expression,\n\t                    value: expression\n\t                }]).stack;\n\t                delete token.match;\n\t                return token;\n\t            },\n\t            parse: function (token, context, chain) {\n\t                return Twig.parseAsync.apply(this, [token.output, context])\n\t                .then(function(unfiltered) {\n\t                    var stack = [{\n\t                        type: Twig.expression.type.string,\n\t                        value: unfiltered\n\t                    }].concat(token.stack);\n\n\t                    return Twig.expression.parseAsync.apply(that, [stack, context]);\n\t                })\n\t                .then(function(output) {\n\t                    return {\n\t                        chain: chain,\n\t                        output: output\n\t                    }\n\t                });\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * End filter logic tokens.\n\t             *\n\t             *  Format: {% endfilter %}\n\t             */\n\t            type: Twig.logic.type.endfilter,\n\t            regex: /^endfilter$/,\n\t            next: [ ],\n\t            open: false\n\t        },\n\t        {\n\t            /**\n\t             * Block logic tokens.\n\t             *\n\t             *  Format: {% block title %}\n\t             */\n\t            type: Twig.logic.type.block,\n\t            regex: /^block\\s+([a-zA-Z0-9_]+)$/,\n\t            next: [\n\t                Twig.logic.type.endblock\n\t            ],\n\t            open: true,\n\t            compile: function (token) {\n\t                token.block = token.match[1].trim();\n\t                delete token.match;\n\t                return token;\n\t            },\n\t            parse: function (token, context, chain) {\n\t                var that = this,\n\t                    block_output,\n\t                    output,\n\t                    promise = Twig.Promise.resolve(),\n\t                    isImported = Twig.indexOf(this.importedBlocks, token.block) > -1,\n\t                    hasParent = this.blocks[token.block] && Twig.indexOf(this.blocks[token.block], Twig.placeholders.parent) > -1;\n\n\t                // Don't override previous blocks unless they're imported with \"use\"\n\t                // Loops should be exempted as well.\n\t                if (this.blocks[token.block] === undefined || isImported || hasParent || context.loop || token.overwrite) {\n\t                    if (token.expression) {\n\t                        promise = Twig.expression.parseAsync.apply(this, [token.output, context])\n\t                        .then(function(value) {\n\t                            return Twig.expression.parseAsync.apply(that, [{\n\t                                type: Twig.expression.type.string,\n\t                                value: value\n\t                            }, context]);\n\t                        });\n\t                    } else {\n\t                        promise = Twig.parseAsync.apply(this, [token.output, context])\n\t                        .then(function(value) {\n\t                            return Twig.expression.parseAsync.apply(that, [{\n\t                                type: Twig.expression.type.string,\n\t                                value: value\n\t                            }, context]);\n\t                        });\n\t                    }\n\n\t                    promise = promise.then(function(block_output) {\n\t                        if (isImported) {\n\t                            // once the block is overridden, remove it from the list of imported blocks\n\t                            that.importedBlocks.splice(that.importedBlocks.indexOf(token.block), 1);\n\t                        }\n\n\t                        if (hasParent) {\n\t                            that.blocks[token.block] = Twig.Markup(that.blocks[token.block].replace(Twig.placeholders.parent, block_output));\n\t                        } else {\n\t                            that.blocks[token.block] = block_output;\n\t                        }\n\n\t                        that.originalBlockTokens[token.block] = {\n\t                            type: token.type,\n\t                            block: token.block,\n\t                            output: token.output,\n\t                            overwrite: true\n\t                        };\n\t                    });\n\t                }\n\n\t                return promise.then(function() {\n\t                    // Check if a child block has been set from a template extending this one.\n\t                    if (that.child.blocks[token.block]) {\n\t                        output = that.child.blocks[token.block];\n\t                    } else {\n\t                        output = that.blocks[token.block];\n\t                    }\n\n\t                    return {\n\t                        chain: chain,\n\t                        output: output\n\t                    };\n\t                });\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * Block shorthand logic tokens.\n\t             *\n\t             *  Format: {% block title expression %}\n\t             */\n\t            type: Twig.logic.type.shortblock,\n\t            regex: /^block\\s+([a-zA-Z0-9_]+)\\s+(.+)$/,\n\t            next: [ ],\n\t            open: true,\n\t            compile: function (token) {\n\t                token.expression = token.match[2].trim();\n\n\t                token.output = Twig.expression.compile({\n\t                    type: Twig.expression.type.expression,\n\t                    value: token.expression\n\t                }).stack;\n\n\t                token.block = token.match[1].trim();\n\t                delete token.match;\n\t                return token;\n\t            },\n\t            parse: function (token, context, chain) {\n\t                return Twig.logic.handler[Twig.logic.type.block].parse.apply(this, arguments);\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * End block logic tokens.\n\t             *\n\t             *  Format: {% endblock %}\n\t             */\n\t            type: Twig.logic.type.endblock,\n\t            regex: /^endblock(?:\\s+([a-zA-Z0-9_]+))?$/,\n\t            next: [ ],\n\t            open: false\n\t        },\n\t        {\n\t            /**\n\t             * Block logic tokens.\n\t             *\n\t             *  Format: {% extends \"template.twig\" %}\n\t             */\n\t            type: Twig.logic.type.extends_,\n\t            regex: /^extends\\s+(.+)$/,\n\t            next: [ ],\n\t            open: true,\n\t            compile: function (token) {\n\t                var expression = token.match[1].trim();\n\t                delete token.match;\n\n\t                token.stack   = Twig.expression.compile.apply(this, [{\n\t                    type:  Twig.expression.type.expression,\n\t                    value: expression\n\t                }]).stack;\n\n\t                return token;\n\t            },\n\t            parse: function (token, context, chain) {\n\t                var template,\n\t                    that = this,\n\t                    innerContext = Twig.ChildContext(context);\n\n\t                // Resolve filename\n\t                return Twig.expression.parseAsync.apply(this, [token.stack, context])\n\t                .then(function(file) {\n\t                    // Set parent template\n\t                    that.extend = file;\n\n\t                    if (file instanceof Twig.Template) {\n\t                        template = file;\n\t                    } else {\n\t                        // Import file\n\t                        template = that.importFile(file);\n\t                    }\n\n\t                    // Render the template in case it puts anything in its context\n\t                    return template.renderAsync(innerContext);\n\t                })\n\t                .then(function() {\n\t                    // Extend the parent context with the extended context\n\t                    Twig.lib.extend(context, innerContext);\n\n\t                    return {\n\t                        chain: chain,\n\t                        output: ''\n\t                    };\n\t                });\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * Block logic tokens.\n\t             *\n\t             *  Format: {% use \"template.twig\" %}\n\t             */\n\t            type: Twig.logic.type.use,\n\t            regex: /^use\\s+(.+)$/,\n\t            next: [ ],\n\t            open: true,\n\t            compile: function (token) {\n\t                var expression = token.match[1].trim();\n\t                delete token.match;\n\n\t                token.stack = Twig.expression.compile.apply(this, [{\n\t                    type:  Twig.expression.type.expression,\n\t                    value: expression\n\t                }]).stack;\n\n\t                return token;\n\t            },\n\t            parse: function (token, context, chain) {\n\t                var that = this;\n\n\t                // Resolve filename\n\t                return Twig.expression.parseAsync.apply(this, [token.stack, context])\n\t                .then(function(file) {\n\t                    // Import blocks\n\t                    that.importBlocks(file);\n\n\t                    return {\n\t                        chain: chain,\n\t                        output: ''\n\t                    };\n\t                });\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * Block logic tokens.\n\t             *\n\t             *  Format: {% includes \"template.twig\" [with {some: 'values'} only] %}\n\t             */\n\t            type: Twig.logic.type.include,\n\t            regex: /^include\\s+(.+?)(?:\\s|$)(ignore missing(?:\\s|$))?(?:with\\s+([\\S\\s]+?))?(?:\\s|$)(only)?$/,\n\t            next: [ ],\n\t            open: true,\n\t            compile: function (token) {\n\t                var match = token.match,\n\t                    expression = match[1].trim(),\n\t                    ignoreMissing = match[2] !== undefined,\n\t                    withContext = match[3],\n\t                    only = ((match[4] !== undefined) && match[4].length);\n\n\t                delete token.match;\n\n\t                token.only = only;\n\t                token.ignoreMissing = ignoreMissing;\n\n\t                token.stack = Twig.expression.compile.apply(this, [{\n\t                    type:  Twig.expression.type.expression,\n\t                    value: expression\n\t                }]).stack;\n\n\t                if (withContext !== undefined) {\n\t                    token.withStack = Twig.expression.compile.apply(this, [{\n\t                        type:  Twig.expression.type.expression,\n\t                        value: withContext.trim()\n\t                    }]).stack;\n\t                }\n\n\t                return token;\n\t            },\n\t            parse: function (token, context, chain) {\n\t                // Resolve filename\n\t                var innerContext = {},\n\t                    i,\n\t                    template,\n\t                    that = this,\n\t                    promise = Twig.Promise.resolve();\n\n\t                if (!token.only) {\n\t                    innerContext = Twig.ChildContext(context);\n\t                }\n\n\t                if (token.withStack !== undefined) {\n\t                    promise = Twig.expression.parseAsync.apply(this, [token.withStack, context])\n\t                    .then(function(withContext) {\n\t                        for (i in withContext) {\n\t                            if (withContext.hasOwnProperty(i))\n\t                                innerContext[i] = withContext[i];\n\t                        }\n\t                    });\n\t                }\n\n\t                return promise\n\t                .then(function() {\n\t                    return Twig.expression.parseAsync.apply(that, [token.stack, context]);\n\t                })\n\t                .then(function(file) {\n\t                    if (file instanceof Twig.Template) {\n\t                        template = file;\n\t                    } else {\n\t                        // Import file\n\t                        try {\n\t                            template = that.importFile(file);\n\t                        } catch (err) {\n\t                            if (token.ignoreMissing) {\n\t                                return '';\n\t                            }\n\n\t                            throw err;\n\t                        }\n\t                    }\n\n\t                    return template.renderAsync(innerContext);\n\t                })\n\t                .then(function(output) {\n\t                    return {\n\t                        chain: chain,\n\t                        output: output\n\t                    };\n\t                });\n\t            }\n\t        },\n\t        {\n\t            type: Twig.logic.type.spaceless,\n\t            regex: /^spaceless$/,\n\t            next: [\n\t                Twig.logic.type.endspaceless\n\t            ],\n\t            open: true,\n\n\t            // Parse the html and return it without any spaces between tags\n\t            parse: function (token, context, chain) {\n\t                // Parse the output without any filter\n\t                return Twig.parseAsync.apply(this, [token.output, context])\n\t                .then(function(unfiltered) {\n\t                    var // A regular expression to find closing and opening tags with spaces between them\n\t                        rBetweenTagSpaces = />\\s+</g,\n\t                        // Replace all space between closing and opening html tags\n\t                        output = unfiltered.replace(rBetweenTagSpaces,'><').trim();\n\t                        // Rewrap output as a Twig.Markup\n\t                        output = Twig.Markup(output);\n\t                    return {\n\t                        chain: chain,\n\t                        output: output\n\t                    };\n\t                });\n\t            }\n\t        },\n\n\t        // Add the {% endspaceless %} token\n\t        {\n\t            type: Twig.logic.type.endspaceless,\n\t            regex: /^endspaceless$/,\n\t            next: [ ],\n\t            open: false\n\t        },\n\t        {\n\t            /**\n\t             * Macro logic tokens.\n\t             *\n\t             * Format: {% maro input(name, value, type, size) %}\n\t             *\n\t             */\n\t            type: Twig.logic.type.macro,\n\t            regex: /^macro\\s+([a-zA-Z0-9_]+)\\s*\\(\\s*((?:[a-zA-Z0-9_]+(?:,\\s*)?)*)\\s*\\)$/,\n\t            next: [\n\t                Twig.logic.type.endmacro\n\t            ],\n\t            open: true,\n\t            compile: function (token) {\n\t                var macroName = token.match[1],\n\t                    parameters = token.match[2].split(/[\\s,]+/);\n\n\t                //TODO: Clean up duplicate check\n\t                for (var i=0; i<parameters.length; i++) {\n\t                    for (var j=0; j<parameters.length; j++){\n\t                        if (parameters[i] === parameters[j] && i !== j) {\n\t                            throw new Twig.Error(\"Duplicate arguments for parameter: \"+ parameters[i]);\n\t                        }\n\t                    }\n\t                }\n\n\t                token.macroName = macroName;\n\t                token.parameters = parameters;\n\n\t                delete token.match;\n\t                return token;\n\t            },\n\t            parse: function (token, context, chain) {\n\t                var template = this;\n\t                this.macros[token.macroName] = function() {\n\t                    // Pass global context and other macros\n\t                    var macroContext = {\n\t                        _self: template.macros\n\t                    }\n\t                    // Add parameters from context to macroContext\n\t                    for (var i=0; i<token.parameters.length; i++) {\n\t                        var prop = token.parameters[i];\n\t                        if(typeof arguments[i] !== 'undefined') {\n\t                            macroContext[prop] = arguments[i];\n\t                        } else {\n\t                            macroContext[prop] = undefined;\n\t                        }\n\t                    }\n\n\t                    // Render\n\t                    return Twig.parseAsync.apply(template, [token.output, macroContext]);\n\t                };\n\n\t                return {\n\t                    chain: chain,\n\t                    output: ''\n\t                };\n\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * End macro logic tokens.\n\t             *\n\t             * Format: {% endmacro %}\n\t             */\n\t             type: Twig.logic.type.endmacro,\n\t             regex: /^endmacro$/,\n\t             next: [ ],\n\t             open: false\n\t        },\n\t        {\n\t            /*\n\t            * import logic tokens.\n\t            *\n\t            * Format: {% import \"template.twig\" as form %}\n\t            */\n\t            type: Twig.logic.type.import_,\n\t            regex: /^import\\s+(.+)\\s+as\\s+([a-zA-Z0-9_]+)$/,\n\t            next: [ ],\n\t            open: true,\n\t            compile: function (token) {\n\t                var expression = token.match[1].trim(),\n\t                    contextName = token.match[2].trim();\n\t                delete token.match;\n\n\t                token.expression = expression;\n\t                token.contextName = contextName;\n\n\t                token.stack = Twig.expression.compile.apply(this, [{\n\t                    type: Twig.expression.type.expression,\n\t                    value: expression\n\t                }]).stack;\n\n\t                return token;\n\t            },\n\t            parse: function (token, context, chain) {\n\t                var that = this,\n\t                    output = { chain: chain, output: '' };\n\n\t                if (token.expression === '_self') {\n\t                    context[token.contextName] = this.macros;\n\t                    return Twig.Promise.resolve(output);\n\t                }\n\n\t                return Twig.expression.parseAsync.apply(this, [token.stack, context])\n\t                .then(function(file) {\n\t                    return that.importFile(file || token.expression);\n\t                })\n\t                .then(function(template) {\n\t                    context[token.contextName] = template.renderAsync({}, {output: 'macros'});\n\n\t                    return output;\n\t                });\n\t            }\n\t        },\n\t        {\n\t            /*\n\t            * from logic tokens.\n\t            *\n\t            * Format: {% from \"template.twig\" import func as form %}\n\t            */\n\t            type: Twig.logic.type.from,\n\t            regex: /^from\\s+(.+)\\s+import\\s+([a-zA-Z0-9_, ]+)$/,\n\t            next: [ ],\n\t            open: true,\n\t            compile: function (token) {\n\t                var expression = token.match[1].trim(),\n\t                    macroExpressions = token.match[2].trim().split(/\\s*,\\s*/),\n\t                    macroNames = {};\n\n\t                for (var i=0; i<macroExpressions.length; i++) {\n\t                    var res = macroExpressions[i];\n\n\t                    // match function as variable\n\t                    var macroMatch = res.match(/^([a-zA-Z0-9_]+)\\s+as\\s+([a-zA-Z0-9_]+)$/);\n\t                    if (macroMatch) {\n\t                        macroNames[macroMatch[1].trim()] = macroMatch[2].trim();\n\t                    }\n\t                    else if (res.match(/^([a-zA-Z0-9_]+)$/)) {\n\t                        macroNames[res] = res;\n\t                    }\n\t                    else {\n\t                        // ignore import\n\t                    }\n\n\t                }\n\n\t                delete token.match;\n\n\t                token.expression = expression;\n\t                token.macroNames = macroNames;\n\n\t                token.stack = Twig.expression.compile.apply(this, [{\n\t                    type: Twig.expression.type.expression,\n\t                    value: expression\n\t                }]).stack;\n\n\t                return token;\n\t            },\n\t            parse: function (token, context, chain) {\n\t                var that = this,\n\t                    promise = Twig.Promise.resolve(this.macros);\n\n\t                if (token.expression !== \"_self\") {\n\t                    promise = Twig.expression.parseAsync.apply(this, [token.stack, context])\n\t                    .then(function(file) {\n\t                        return that.importFile(file || token.expression);\n\t                    })\n\t                    .then(function(template) {\n\t                        return template.renderAsync({}, {output: 'macros'});\n\t                    });\n\t                }\n\n\t                return promise\n\t                .then(function(macros) {\n\t                    for (var macroName in token.macroNames) {\n\t                        if (macros.hasOwnProperty(macroName)) {\n\t                            context[token.macroNames[macroName]] = macros[macroName];\n\t                        }\n\t                    }\n\n\t                    return {\n\t                        chain: chain,\n\t                        output: ''\n\t                    }\n\t                });\n\t            }\n\t        },\n\t        {\n\t            /**\n\t             * The embed tag combines the behaviour of include and extends.\n\t             * It allows you to include another template's contents, just like include does.\n\t             *\n\t             *  Format: {% embed \"template.twig\" [with {some: 'values'} only] %}\n\t             */\n\t            type: Twig.logic.type.embed,\n\t            regex: /^embed\\s+(.+?)(?:\\s|$)(ignore missing(?:\\s|$))?(?:with\\s+([\\S\\s]+?))?(?:\\s|$)(only)?$/,\n\t            next: [\n\t                Twig.logic.type.endembed\n\t            ],\n\t            open: true,\n\t            compile: function (token) {\n\t                var match = token.match,\n\t                    expression = match[1].trim(),\n\t                    ignoreMissing = match[2] !== undefined,\n\t                    withContext = match[3],\n\t                    only = ((match[4] !== undefined) && match[4].length);\n\n\t                delete token.match;\n\n\t                token.only = only;\n\t                token.ignoreMissing = ignoreMissing;\n\n\t                token.stack = Twig.expression.compile.apply(this, [{\n\t                    type:  Twig.expression.type.expression,\n\t                    value: expression\n\t                }]).stack;\n\n\t                if (withContext !== undefined) {\n\t                    token.withStack = Twig.expression.compile.apply(this, [{\n\t                        type:  Twig.expression.type.expression,\n\t                        value: withContext.trim()\n\t                    }]).stack;\n\t                }\n\n\t                return token;\n\t            },\n\t            parse: function (token, context, chain) {\n\t                // Resolve filename\n\t                var innerContext = {},\n\t                    that = this,\n\t                    i,\n\t                    template,\n\t                    promise = Twig.Promise.resolve();\n\n\t                if (!token.only) {\n\t                    for (i in context) {\n\t                        if (context.hasOwnProperty(i))\n\t                            innerContext[i] = context[i];\n\t                    }\n\t                }\n\n\t                if (token.withStack !== undefined) {\n\t                    promise = Twig.expression.parseAsync.apply(this, [token.withStack, context])\n\t                    .then(function(withContext) {\n\t                        for (i in withContext) {\n\t                            if (withContext.hasOwnProperty(i))\n\t                                innerContext[i] = withContext[i];\n\t                        }\n\t                    });\n\t                }\n\n\t                return promise.then(function() {\n\t                    return Twig.expression.parseAsync.apply(that, [token.stack, innerContext]);\n\t                })\n\t                .then(function(file) {\n\t                    if (file instanceof Twig.Template) {\n\t                        template = file;\n\t                    } else {\n\t                        // Import file\n\t                        try {\n\t                            template = that.importFile(file);\n\t                        } catch (err) {\n\t                            if (token.ignoreMissing) {\n\t                                return '';\n\t                            }\n\n\t                            throw err;\n\t                        }\n\t                    }\n\n\t                    // reset previous blocks\n\t                    that.blocks = {};\n\n\t                    // parse tokens. output will be not used\n\t                    return Twig.parseAsync.apply(that, [token.output, innerContext])\n\t                    .then(function() {\n\t                        // render tempalte with blocks defined in embed block\n\t                        return template.renderAsync(innerContext, {'blocks':that.blocks});\n\t                    });\n\t                })\n\t                .then(function(output) {\n\t                    return {\n\t                        chain: chain,\n\t                        output: output\n\t                    };\n\t                });\n\t            }\n\t        },\n\t        /* Add the {% endembed %} token\n\t         *\n\t         */\n\t        {\n\t            type: Twig.logic.type.endembed,\n\t            regex: /^endembed$/,\n\t            next: [ ],\n\t            open: false\n\t        }\n\n\t    ];\n\n\n\t    /**\n\t     * Registry for logic handlers.\n\t     */\n\t    Twig.logic.handler = {};\n\n\t    /**\n\t     * Define a new token type, available at Twig.logic.type.{type}\n\t     */\n\t    Twig.logic.extendType = function (type, value) {\n\t        value = value || (\"Twig.logic.type\" + type);\n\t        Twig.logic.type[type] = value;\n\t    };\n\n\t    /**\n\t     * Extend the logic parsing functionality with a new token definition.\n\t     *\n\t     * // Define a new tag\n\t     * Twig.logic.extend({\n\t     *     type: Twig.logic.type.{type},\n\t     *     // The pattern to match for this token\n\t     *     regex: ...,\n\t     *     // What token types can follow this token, leave blank if any.\n\t     *     next: [ ... ]\n\t     *     // Create and return compiled version of the token\n\t     *     compile: function(token) { ... }\n\t     *     // Parse the compiled token with the context provided by the render call\n\t     *     //   and whether this token chain is complete.\n\t     *     parse: function(token, context, chain) { ... }\n\t     * });\n\t     *\n\t     * @param {Object} definition The new logic expression.\n\t     */\n\t    Twig.logic.extend = function (definition) {\n\n\t        if (!definition.type) {\n\t            throw new Twig.Error(\"Unable to extend logic definition. No type provided for \" + definition);\n\t        } else {\n\t            Twig.logic.extendType(definition.type);\n\t        }\n\t        Twig.logic.handler[definition.type] = definition;\n\t    };\n\n\t    // Extend with built-in expressions\n\t    while (Twig.logic.definitions.length > 0) {\n\t        Twig.logic.extend(Twig.logic.definitions.shift());\n\t    }\n\n\t    /**\n\t     * Compile a logic token into an object ready for parsing.\n\t     *\n\t     * @param {Object} raw_token An uncompiled logic token.\n\t     *\n\t     * @return {Object} A compiled logic token, ready for parsing.\n\t     */\n\t    Twig.logic.compile = function (raw_token) {\n\t        var expression = raw_token.value.trim(),\n\t            token = Twig.logic.tokenize.apply(this, [expression]),\n\t            token_template = Twig.logic.handler[token.type];\n\n\t        // Check if the token needs compiling\n\t        if (token_template.compile) {\n\t            token = token_template.compile.apply(this, [token]);\n\t            Twig.log.trace(\"Twig.logic.compile: \", \"Compiled logic token to \", token);\n\t        }\n\n\t        return token;\n\t    };\n\n\t    /**\n\t     * Tokenize logic expressions. This function matches token expressions against regular\n\t     * expressions provided in token definitions provided with Twig.logic.extend.\n\t     *\n\t     * @param {string} expression the logic token expression to tokenize\n\t     *                (i.e. what's between {% and %})\n\t     *\n\t     * @return {Object} The matched token with type set to the token type and match to the regex match.\n\t     */\n\t    Twig.logic.tokenize = function (expression) {\n\t        var token = {},\n\t            token_template_type = null,\n\t            token_type = null,\n\t            token_regex = null,\n\t            regex_array = null,\n\t            regex = null,\n\t            match = null;\n\n\t        // Ignore whitespace around expressions.\n\t        expression = expression.trim();\n\n\t        for (token_template_type in Twig.logic.handler) {\n\t            if (Twig.logic.handler.hasOwnProperty(token_template_type)) {\n\t                // Get the type and regex for this template type\n\t                token_type = Twig.logic.handler[token_template_type].type;\n\t                token_regex = Twig.logic.handler[token_template_type].regex;\n\n\t                // Handle multiple regular expressions per type.\n\t                regex_array = [];\n\t                if (token_regex instanceof Array) {\n\t                    regex_array = token_regex;\n\t                } else {\n\t                    regex_array.push(token_regex);\n\t                }\n\n\t                // Check regular expressions in the order they were specified in the definition.\n\t                while (regex_array.length > 0) {\n\t                    regex = regex_array.shift();\n\t                    match = regex.exec(expression.trim());\n\t                    if (match !== null) {\n\t                        token.type  = token_type;\n\t                        token.match = match;\n\t                        Twig.log.trace(\"Twig.logic.tokenize: \", \"Matched a \", token_type, \" regular expression of \", match);\n\t                        return token;\n\t                    }\n\t                }\n\t            }\n\t        }\n\n\t        // No regex matches\n\t        throw new Twig.Error(\"Unable to parse '\" + expression.trim() + \"'\");\n\t    };\n\n\t    /**\n\t     * Parse a logic token within a given context.\n\t     *\n\t     * What are logic chains?\n\t     *      Logic chains represent a series of tokens that are connected,\n\t     *          for example:\n\t     *          {% if ... %} {% else %} {% endif %}\n\t     *\n\t     *      The chain parameter is used to signify if a chain is open of closed.\n\t     *      open:\n\t     *          More tokens in this chain should be parsed.\n\t     *      closed:\n\t     *          This token chain has completed parsing and any additional\n\t     *          tokens (else, elseif, etc...) should be ignored.\n\t     *\n\t     * @param {Object} token The compiled token.\n\t     * @param {Object} context The render context.\n\t     * @param {boolean} chain Is this an open logic chain. If false, that means a\n\t     *                        chain is closed and no further cases should be parsed.\n\t     */\n\t    Twig.logic.parse = function (token, context, chain, allow_async) {\n\t        var output = '',\n\t            promise,\n\t            is_async = true,\n\t            token_template;\n\n\t        context = context || { };\n\n\t        Twig.log.debug(\"Twig.logic.parse: \", \"Parsing logic token \", token);\n\n\t        token_template = Twig.logic.handler[token.type];\n\n\t        if (token_template.parse) {\n\t            output = token_template.parse.apply(this, [token, context, chain]);\n\t        }\n\n\t        promise = Twig.isPromise(output) ? output : Twig.Promise.resolve(output);\n\n\t        promise.then(function(o) {\n\t            is_async = false;\n\t            output = o;\n\t        });\n\n\t        if (allow_async)\n\t            return promise || Twig.Promise.resolve(output);\n\n\t        if (is_async)\n\t            throw new Twig.Error('You are using Twig.js in sync mode in combination with async extensions.');\n\n\t        return output;\n\t    };\n\n\t    return Twig;\n\n\t};\n\n\n/***/ },\n/* 22 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(Twig) {\n\t    'use strict';\n\n\t    Twig.Templates.registerParser('source', function(params) {\n\t        return params.data || '';\n\t    });\n\t};\n\n\n/***/ },\n/* 23 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(Twig) {\n\t    'use strict';\n\n\t    Twig.Templates.registerParser('twig', function(params) {\n\t        return new Twig.Template(params);\n\t    });\n\t};\n\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// ## twig.path.js\n\t//\n\t// This file handles path parsing\n\tmodule.exports = function (Twig) {\n\t    \"use strict\";\n\n\t    /**\n\t     * Namespace for path handling.\n\t     */\n\t    Twig.path = {};\n\n\t    /**\n\t     * Generate the canonical version of a url based on the given base path and file path and in\n\t     * the previously registered namespaces.\n\t     *\n\t     * @param  {string} template The Twig Template\n\t     * @param  {string} file     The file path, may be relative and may contain namespaces.\n\t     *\n\t     * @return {string}          The canonical version of the path\n\t     */\n\t     Twig.path.parsePath = function(template, file) {\n\t        var namespaces = null,\n\t            file = file || \"\";\n\n\t        if (typeof template === 'object' && typeof template.options === 'object') {\n\t            namespaces = template.options.namespaces;\n\t        }\n\n\t        if (typeof namespaces === 'object' && (file.indexOf('::') > 0) || file.indexOf('@') >= 0){\n\t            for (var k in namespaces){\n\t                if (namespaces.hasOwnProperty(k)) {\n\t                    file = file.replace(k + '::', namespaces[k]);\n\t                    file = file.replace('@' + k, namespaces[k]);\n\t                }\n\t            }\n\n\t            return file;\n\t        }\n\n\t        return Twig.path.relativePath(template, file);\n\t    };\n\n\t    /**\n\t     * Generate the relative canonical version of a url based on the given base path and file path.\n\t     *\n\t     * @param {Twig.Template} template The Twig.Template.\n\t     * @param {string} file The file path, relative to the base path.\n\t     *\n\t     * @return {string} The canonical version of the path.\n\t     */\n\t    Twig.path.relativePath = function(template, file) {\n\t        var base,\n\t            base_path,\n\t            sep_chr = \"/\",\n\t            new_path = [],\n\t            file = file || \"\",\n\t            val;\n\n\t        if (template.url) {\n\t            if (typeof template.base !== 'undefined') {\n\t                base = template.base + ((template.base.charAt(template.base.length-1) === '/') ? '' : '/');\n\t            } else {\n\t                base = template.url;\n\t            }\n\t        } else if (template.path) {\n\t            // Get the system-specific path separator\n\t            var path = __webpack_require__(20),\n\t                sep = path.sep || sep_chr,\n\t                relative = new RegExp(\"^\\\\.{1,2}\" + sep.replace(\"\\\\\", \"\\\\\\\\\"));\n\t            file = file.replace(/\\//g, sep);\n\n\t            if (template.base !== undefined && file.match(relative) == null) {\n\t                file = file.replace(template.base, '');\n\t                base = template.base + sep;\n\t            } else {\n\t                base = path.normalize(template.path);\n\t            }\n\n\t            base = base.replace(sep+sep, sep);\n\t            sep_chr = sep;\n\t        } else if ((template.name || template.id) && template.method && template.method !== 'fs' && template.method !== 'ajax') {\n\t            // Custom registered loader\n\t            base = template.base || template.name || template.id;\n\t        } else {\n\t            throw new Twig.Error(\"Cannot extend an inline template.\");\n\t        }\n\n\t        base_path = base.split(sep_chr);\n\n\t        // Remove file from url\n\t        base_path.pop();\n\t        base_path = base_path.concat(file.split(sep_chr));\n\n\t        while (base_path.length > 0) {\n\t            val = base_path.shift();\n\t            if (val == \".\") {\n\t                // Ignore\n\t            } else if (val == \"..\" && new_path.length > 0 && new_path[new_path.length-1] != \"..\") {\n\t                new_path.pop();\n\t            } else {\n\t                new_path.push(val);\n\t            }\n\t        }\n\n\t        return new_path.join(sep_chr);\n\t    };\n\n\t    return Twig;\n\t};\n\n\n/***/ },\n/* 25 */\n/***/ function(module, exports) {\n\n\t// ## twig.tests.js\n\t//\n\t// This file handles expression tests. (is empty, is not defined, etc...)\n\tmodule.exports = function (Twig) {\n\t    \"use strict\";\n\t    Twig.tests = {\n\t        empty: function(value) {\n\t            if (value === null || value === undefined) return true;\n\t            // Handler numbers\n\t            if (typeof value === \"number\") return false; // numbers are never \"empty\"\n\t            // Handle strings and arrays\n\t            if (value.length && value.length > 0) return false;\n\t            // Handle objects\n\t            for (var key in value) {\n\t                if (value.hasOwnProperty(key)) return false;\n\t            }\n\t            return true;\n\t        },\n\t        odd: function(value) {\n\t            return value % 2 === 1;\n\t        },\n\t        even: function(value) {\n\t            return value % 2 === 0;\n\t        },\n\t        divisibleby: function(value, params) {\n\t            return value % params[0] === 0;\n\t        },\n\t        defined: function(value) {\n\t            return value !== undefined;\n\t        },\n\t        none: function(value) {\n\t            return value === null;\n\t        },\n\t        'null': function(value) {\n\t            return this.none(value); // Alias of none\n\t        },\n\t        'same as': function(value, params) {\n\t            return value === params[0];\n\t        },\n\t        sameas: function(value, params) {\n\t            console.warn('`sameas` is deprecated use `same as`');\n\t            return Twig.tests['same as'](value, params);\n\t        },\n\t        iterable: function(value) {\n\t            return value && (Twig.lib.is(\"Array\", value) || Twig.lib.is(\"Object\", value));\n\t        }\n\t        /*\n\t        constant ?\n\t         */\n\t    };\n\n\t    Twig.test = function(test, value, params) {\n\t        if (!Twig.tests[test]) {\n\t            throw \"Test \" + test + \" is not defined.\";\n\t        }\n\t        return Twig.tests[test](value, params);\n\t    };\n\n\t    Twig.test.extend = function(test, definition) {\n\t        Twig.tests[test] = definition;\n\t    };\n\n\t    return Twig;\n\t};\n\n\n/***/ },\n/* 26 */\n/***/ function(module, exports) {\n\n\t// ## twig.async.js\n\t//\n\t// This file handles asynchronous tasks within twig.\n\tmodule.exports = function (Twig) {\n\t    \"use strict\";\n\n\t    Twig.parseAsync = function (tokens, context) {\n\t        return Twig.parse.apply(this, [tokens, context, true]);\n\t    }\n\n\t    Twig.expression.parseAsync = function (tokens, context, tokens_are_parameters) {\n\t        return Twig.expression.parse.apply(this, [tokens, context, tokens_are_parameters, true]);\n\t    }\n\n\t    Twig.logic.parseAsync = function (token, context, chain) {\n\t        return Twig.logic.parse.apply(this, [token, context, chain, true]);\n\t    }\n\n\t    Twig.Template.prototype.renderAsync = function (context, params) {\n\t        return this.render(context, params, true);\n\t    }\n\n\t    Twig.async = {};\n\n\t    /**\n\t     * Checks for `thenable` objects\n\t     */\n\t    Twig.isPromise = function(obj) {\n\t        return obj && (typeof obj.then == 'function');\n\t    }\n\n\t    /**\n\t     * An alternate implementation of a Promise that does not fully follow\n\t     * the spec, but instead works fully synchronous while still being\n\t     * thenable.\n\t     *\n\t     * These promises can be mixed with regular promises at which point\n\t     * the synchronous behaviour is lost.\n\t     */\n\t    Twig.Promise = function(executor) {\n\t        // State\n\t        var state = 'unknown';\n\t        var value = null;\n\t        var handlers = null;\n\n\t        function changeState(newState, v) {\n\t            state = newState;\n\t            value = v;\n\t            notify();\n\t        };\n\t        function onResolve(v) { changeState('resolve', v); }\n\t        function onReject(e) { changeState('reject', e); }\n\n\t        function notify() {\n\t            if (!handlers) return;\n\n\t            Twig.forEach(handlers, function(h) {\n\t                append(h.resolve, h.reject);\n\t            });\n\t            handlers = null;\n\t        }\n\n\t        function append(onResolved, onRejected) {\n\t            var h = {\n\t                resolve: onResolved,\n\t                reject: onRejected\n\t            };\n\n\t            // The promise has yet to be rejected or resolved.\n\t            if (state == 'unknown') {\n\t                handlers = handlers || [];\n\t                return handlers.push(h);\n\t            }\n\n\t            // The state has been changed to either resolve, or reject\n\t            // which means we should call the handler.\n\t            if (h[state])\n\t                h[state](value);\n\t        }\n\n\t        function run(fn, resolve, reject) {\n\t            var done = false;\n\t            try {\n\t                fn(function(v) {\n\t                    if (done) return;\n\t                    done = true;\n\t                    resolve(v);\n\t                }, function(e) {\n\t                    if (done) return;\n\t                    done = true;\n\t                    reject(e);\n\t                });\n\t            } catch(e) {\n\t                done = true;\n\t                reject(e);\n\t            }\n\t        }\n\n\t        function ready(result) {\n\t            try {\n\t                if (!Twig.isPromise(result)) {\n\t                    return onResolve(result);\n\t                }\n\n\t                run(result.then.bind(result), ready, onReject);\n\t            } catch (e) {\n\t                onReject(e);\n\t            }\n\t        }\n\n\t        run(executor, ready, onReject);\n\n\t        return {\n\t            then: function(onResolved, onRejected) {\n\t                var hasResolved = typeof onResolved == 'function';\n\t                var hasRejected = typeof onRejected == 'function';\n\n\t                return new Twig.Promise(function(resolve, reject) {\n\t                    append(function(result) {\n\t                        if (hasResolved) {\n\t                            try {\n\t                                resolve(onResolved(result));\n\t                            } catch (e) {\n\t                                reject(e);\n\t                            }\n\t                        } else {\n\t                            resolve(result);\n\t                        }\n\t                    }, function(err) {\n\t                        if (hasRejected) {\n\t                            try {\n\t                                resolve(onRejected(err));\n\t                            } catch (e) {\n\t                                reject(e);\n\t                            }\n\t                        } else {\n\t                            reject(err);\n\t                        }\n\t                    });\n\t                });\n\t            },\n\t            catch: function(onRejected) {\n\t                return this.then(null, onRejected);\n\t            }\n\t        };\n\t    }\n\n\t    Twig.Promise.resolve = function(value) {\n\t        return new Twig.Promise(function(resolve) {\n\t            resolve(value);\n\t        });\n\t    };\n\n\t    Twig.Promise.reject = function(e) {\n\t        return new Twig.Promise(function(resolve, reject) {\n\t            reject(e);\n\t        });\n\t    };\n\n\t    Twig.Promise.all = function(promises) {\n\t        const results = [];\n\n\t        return Twig.async.forEach(promises, function(p, index) {\n\t            if (!Twig.isPromise(p)) {\n\t                results[index] = p;\n\t                return;\n\t            }\n\n\t            return p.then(function(v) {\n\t                results[index] = v;\n\t            });\n\t        })\n\t        .then(function() {\n\t            return results;\n\t        });\n\t    };\n\n\t    /**\n\t    * Go over each item in a fashion compatible with Twig.forEach,\n\t    * allow the function to return a promise or call the third argument\n\t    * to signal it is finished.\n\t    *\n\t    * Each item in the array will be called sequentially.\n\t    */\n\t    Twig.async.forEach = function forEachAsync(arr, callback) {\n\t        var arg_index = 0;\n\t        var callbacks = {};\n\t        var promise = new Twig.Promise(function(resolve, reject) {\n\t            callbacks = {\n\t                resolve: resolve,\n\t                reject: reject\n\t            };\n\t        });\n\n\t        function fail(err) {\n\t            callbacks.reject(err);\n\t        }\n\n\t        function next(value) {\n\t            if (!Twig.isPromise(value))\n\t                return iterate();\n\n\t            value.then(next, fail);\n\t        }\n\n\t        function iterate() {\n\t            var index = arg_index++;\n\n\t            if (index == arr.length) {\n\t                callbacks.resolve();\n\t                return;\n\t            }\n\n\t            next(callback(arr[index], index));\n\t        }\n\n\t        iterate();\n\n\t        return promise;\n\t    };\n\n\t    return Twig;\n\n\t};\n\n\n/***/ },\n/* 27 */\n/***/ function(module, exports) {\n\n\t// ## twig.exports.js\n\t//\n\t// This file provides extension points and other hooks into the twig functionality.\n\n\tmodule.exports = function (Twig) {\n\t    \"use strict\";\n\t    Twig.exports = {\n\t        VERSION: Twig.VERSION\n\t    };\n\n\t    /**\n\t     * Create and compile a twig.js template.\n\t     *\n\t     * @param {Object} param Paramteres for creating a Twig template.\n\t     *\n\t     * @return {Twig.Template} A Twig template ready for rendering.\n\t     */\n\t    Twig.exports.twig = function twig(params) {\n\t        'use strict';\n\t        var id = params.id,\n\t            options = {\n\t                strict_variables: params.strict_variables || false,\n\t                // TODO: turn autoscape on in the next major version\n\t                autoescape: params.autoescape != null && params.autoescape || false,\n\t                allowInlineIncludes: params.allowInlineIncludes || false,\n\t                rethrow: params.rethrow || false,\n\t                namespaces: params.namespaces\n\t            };\n\n\t        if (Twig.cache && id) {\n\t            Twig.validateId(id);\n\t        }\n\n\t        if (params.debug !== undefined) {\n\t            Twig.debug = params.debug;\n\t        }\n\t        if (params.trace !== undefined) {\n\t            Twig.trace = params.trace;\n\t        }\n\n\t        if (params.data !== undefined) {\n\t            return Twig.Templates.parsers.twig({\n\t                data: params.data,\n\t                path: params.hasOwnProperty('path') ? params.path : undefined,\n\t                module: params.module,\n\t                id:   id,\n\t                options: options\n\t            });\n\n\t        } else if (params.ref !== undefined) {\n\t            if (params.id !== undefined) {\n\t                throw new Twig.Error(\"Both ref and id cannot be set on a twig.js template.\");\n\t            }\n\t            return Twig.Templates.load(params.ref);\n\t        \n\t        } else if (params.method !== undefined) {\n\t            if (!Twig.Templates.isRegisteredLoader(params.method)) {\n\t                throw new Twig.Error('Loader for \"' + params.method + '\" is not defined.');\n\t            }\n\t            return Twig.Templates.loadRemote(params.name || params.href || params.path || id || undefined, {\n\t                id: id,\n\t                method: params.method,\n\t                parser: params.parser || 'twig',\n\t                base: params.base,\n\t                module: params.module,\n\t                precompiled: params.precompiled,\n\t                async: params.async,\n\t                options: options\n\n\t            }, params.load, params.error);\n\n\t        } else if (params.href !== undefined) {\n\t            return Twig.Templates.loadRemote(params.href, {\n\t                id: id,\n\t                method: 'ajax',\n\t                parser: params.parser || 'twig',\n\t                base: params.base,\n\t                module: params.module,\n\t                precompiled: params.precompiled,\n\t                async: params.async,\n\t                options: options\n\n\t            }, params.load, params.error);\n\n\t        } else if (params.path !== undefined) {\n\t            return Twig.Templates.loadRemote(params.path, {\n\t                id: id,\n\t                method: 'fs',\n\t                parser: params.parser || 'twig',\n\t                base: params.base,\n\t                module: params.module,\n\t                precompiled: params.precompiled,\n\t                async: params.async,\n\t                options: options\n\n\t            }, params.load, params.error);\n\t        }\n\t    };\n\n\t    // Extend Twig with a new filter.\n\t    Twig.exports.extendFilter = function(filter, definition) {\n\t        Twig.filter.extend(filter, definition);\n\t    };\n\n\t    // Extend Twig with a new function.\n\t    Twig.exports.extendFunction = function(fn, definition) {\n\t        Twig._function.extend(fn, definition);\n\t    };\n\n\t    // Extend Twig with a new test.\n\t    Twig.exports.extendTest = function(test, definition) {\n\t        Twig.test.extend(test, definition);\n\t    };\n\n\t    // Extend Twig with a new definition.\n\t    Twig.exports.extendTag = function(definition) {\n\t        Twig.logic.extend(definition);\n\t    };\n\n\t    // Provide an environment for extending Twig core.\n\t    // Calls fn with the internal Twig object.\n\t    Twig.exports.extend = function(fn) {\n\t        fn(Twig);\n\t    };\n\n\n\t    /**\n\t     * Provide an extension for use with express 2.\n\t     *\n\t     * @param {string} markup The template markup.\n\t     * @param {array} options The express options.\n\t     *\n\t     * @return {string} The rendered template.\n\t     */\n\t    Twig.exports.compile = function(markup, options) {\n\t        var id = options.filename,\n\t            path = options.filename,\n\t            template;\n\n\t        // Try to load the template from the cache\n\t        template = new Twig.Template({\n\t            data: markup,\n\t            path: path,\n\t            id: id,\n\t            options: options.settings['twig options']\n\t        }); // Twig.Templates.load(id) ||\n\n\t        return function(context) {\n\t            return template.render(context);\n\t        };\n\t    };\n\n\t    /**\n\t     * Provide an extension for use with express 3.\n\t     *\n\t     * @param {string} path The location of the template file on disk.\n\t     * @param {Object|Function} The options or callback.\n\t     * @param {Function} fn callback.\n\t     * \n\t     * @throws Twig.Error\n\t     */\n\t    Twig.exports.renderFile = function(path, options, fn) {\n\t        // handle callback in options\n\t        if (typeof options === 'function') {\n\t            fn = options;\n\t            options = {};\n\t        }\n\n\t        options = options || {};\n\n\t        var settings = options.settings || {};\n\n\t        var params = {\n\t            path: path,\n\t            base: settings.views,\n\t            load: function(template) {\n\t                // render and return template as a simple string, see https://github.com/twigjs/twig.js/pull/348 for more information\n\t                fn(null, '' + template.render(options));\n\t            }\n\t        };\n\n\t        // mixin any options provided to the express app.\n\t        var view_options = settings['twig options'];\n\n\t        if (view_options) {\n\t            for (var option in view_options) {\n\t                if (view_options.hasOwnProperty(option)) {\n\t                    params[option] = view_options[option];\n\t                }\n\t            }\n\t        }\n\n\t        Twig.exports.twig(params);\n\t    };\n\n\t    // Express 3 handler\n\t    Twig.exports.__express = Twig.exports.renderFile;\n\n\t    /**\n\t     * Shoud Twig.js cache templates.\n\t     * Disable during development to see changes to templates without\n\t     * reloading, and disable in production to improve performance.\n\t     *\n\t     * @param {boolean} cache\n\t     */\n\t    Twig.exports.cache = function(cache) {\n\t        Twig.cache = cache;\n\t    };\n\n\t    //We need to export the path module so we can effectively test it\n\t    Twig.exports.path = Twig.path;\n\n\t    //Export our filters.\n\t    //Resolves #307\n\t    Twig.exports.filters = Twig.filters;\n\n\t    return Twig;\n\t};\n\n\n/***/ }\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// ./~/twig/twig.js","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// fs (ignored)\n// module id = 5\n// module chunks = 0","'use strict';\nmodule.exports = require('./lib/index');\n\n\n\n// WEBPACK FOOTER //\n// ./~/shortid/index.js","'use strict';\n\nvar randomByte = require('./random/random-byte');\n\nfunction encode(lookup, number) {\n    var loopCounter = 0;\n    var done;\n\n    var str = '';\n\n    while (!done) {\n        str = str + lookup( ( (number >> (4 * loopCounter)) & 0x0f ) | randomByte() );\n        done = number < (Math.pow(16, loopCounter + 1 ) );\n        loopCounter++;\n    }\n    return str;\n}\n\nmodule.exports = encode;\n\n\n\n// WEBPACK FOOTER //\n// ./~/shortid/lib/encode.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n// WEBPACK FOOTER //\n// (webpack)/buildin/global.js","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif(!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// (webpack)/buildin/module.js","module.exports =  function(stage){\n \n\t'use strict';\n  \n        var regListenOn = /^on(.*)$/;\n   \n       /**\n         *      Events  \n         *\n         *      @class Notification\n         *      @module library\n         *      @param {Object} settings Object to pass to `settingToListen` method\n         *      @param {Object} context  to apply `settingToListen` \n         *\n         *      @example\n         *\n         *      \n         */\n\t const Notification = class Notification  {\n\t\t\n\t\tconstructor(settings, context){\n\t\t\tthis.events = {};\n                \tthis.garbageEvent = {};\n                \tif (settings) {\n                        \tthis.settingsToListen(settings, context);\n                \t}\n\t\t}\n\n\t\t/**\n         \t *\n         \t *      @method listen \n         \t *\n         \t */\n\t\tlisten (context, eventName, callback){\n\t\t\tvar event = arguments[1];\n                \tvar ContextClosure = this;\n                \tif (! this.events[eventName]) {\n                        \tthis.events[eventName] = [];\n                        \tthis.garbageEvent[eventName] = [];\n                \t}\n                \tif (typeof callback === 'function') {\n                        \tthis.garbageEvent[eventName].push(callback);\n                        \tthis.events[eventName].push(function(args) {\n                                \tcallback.apply(context, args);\n                        \t});\n                \t}\n                \treturn function() {\n                        \tArray.prototype.unshift.call(arguments, event);\n                        \treturn ContextClosure.fire.apply(ContextClosure, arguments);\n                \t};\n\t\t}\n\n\t\ton (eventName, callback){\n\t\t\tvar event = arguments[1];\n                \tvar ContextClosure = this;\n                \tif (! this.events[eventName] ) {\n                        \tthis.events[eventName] = [];\n                        \tthis.garbageEvent[eventName] = [];\n                \t}\n                \tif (typeof callback === 'function') {\n                        \tthis.garbageEvent[eventName].push(callback);\n                        \tthis.events[eventName].push(function(args) {\n                                \tcallback( args );\n                        \t});\n                \t}\n                \treturn function() {\n                        \tArray.prototype.unshift.call(arguments, event);\n                        \treturn ContextClosure.fire.apply(ContextClosure, arguments);\n                \t};\t\n\t\t}\n\n\t\t/**\n         \t *\n         \t *      @method clearNotifications \n         \t *\n         \t */\n        \tclearNotifications (eventName) {\n                \tif (eventName){\n                        \tif (this.events[eventName]) {\n                                \twhile (this.events[eventName].length > 0) {\n                                        \tthis.events[eventName].pop();\n                                        \tthis.garbageEvent[eventName].pop();\n                                \t}\n                                \tdelete this.events[eventName];\n                                \tdelete this.garbageEvent[eventName];\n                        \t}\n                \t}else{\n                        \tdelete this.events ;\n                        \tdelete this.garbageEvent ;\n                        \tthis.events = {};\n                        \tthis.garbageEvent = {};\n                \t}\n        \t}\n\n\t\t/**\n         \t *\n         \t *      @method fire \n         \t *\n         \t */\n        \tfire (eventName) {\n                \tvar ret = true;\n                \tif (this.events[eventName]) {\n                        \tvar args = Array.prototype.slice.call(arguments, 1);\n                        \tfor (var i = 0; i < this.events[eventName].length; i++) {\n                                \ttry {\n                                        \tret = this.events[eventName][i](args);\n                                        \tif (ret) {\n                                                \tbreak;\n                                        \t}\n                                \t} catch (e) {\n\t\t\t\t\t\tconsole.log(e)\n                                        \tthrow new Error(e);\n                                \t}\n                        \t}\n                \t}\n                \treturn ret;\n        \t}\n\n        \t/**\n         \t *\n         \t *      @method settingsToListen \n         \t *\n         \t */\n        \tsettingsToListen (localSettings, context) {\n                \tfor (var i in localSettings) {\n                        \tvar res = regListenOn.exec(i);\n                        \tif (!res){\n                                \tcontinue;\n\t\t\t\t}\n                        \tthis.listen(context || this, res[0], localSettings[i]);\n                \t}\n        \t}\n\n        \tunListen (eventName, callback){\n\t\t\tif ( this.events[eventName] ){\n\t\t\t\tif (callback){\n                        \t\tfor (var i=0 ; i < this.garbageEvent[eventName].length ; i++){\n                                \t\tif ( this.garbageEvent[eventName][i] === callback ){\n\t\t\t\t\t\t\tthis.events[eventName].splice(i, 1);\n\t\t\t\t\t\t\tthis.garbageEvent[eventName].splice(i, 1);\n                                \t\t}\n                        \t\t}\n\t\t\t\t}else{\n\t\t\t\t\treturn this.clearNotifications(eventName);\t\n\t\t\t\t}\n                \t}else{\n\t\t\t\treturn this.clearNotifications();\t\n\t\t\t}\n        \t}\n\t}\n\n        stage.notificationsCenter = {\n                notification:Notification,\n                create: function(settings, context) {\n                        return new Notification(settings, context);\n                }\n        };\n\n\treturn Notification ;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/notificationsCenter.es6","module.exports = function (){\n\n\t'use strict';\n\n\tvar version = \"0.1.1\";\n\n\t// Traf indexOf IE8 \n\tvar arrayProto = Array.prototype;\n\n\tvar indexOf = function(){\n\t\tif (arrayProto.indexOf){\n\t\t\treturn ;\t\t\n\t\t}\n\t\tarrayProto.indexOf =  function( value, startIndex){\n\t\t\tvar index = ( startIndex ) === null ? 0 : (startIndex < 0 ? Math.max(0, this.length + startIndex) : startIndex);\n\t\t\tfor (var i = index; i < this.length; i++) {\n\t\t\t\tif (i in this && this[i] === value){\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn -1;\n\t\t};\n\t}();\n\n\tvar typeOf = function(value){\n\t\tvar t = typeof value;\n\t\tif (t === 'object'){\n\t\t\tif (value === null ) {return \"object\";}\n\t\t\tif (value instanceof Array ||\n\t\t\t\t(!(value instanceof Object) &&\n           \t\t\t\t(Object.prototype.toString.call((value)) === '[object Array]') ||\n           \t\t\t\ttypeof value.length === 'number' &&\n           \t\t\t\ttypeof value.splice !== 'undefined' &&\n           \t\t\t\ttypeof value.propertyIsEnumerable !== 'undefined' &&\n           \t\t\t\t!value.propertyIsEnumerable('splice')\n          \t\t\t)){\n\t\t\t\treturn \"array\";\n\t\t\t}\n\t\t\tif (!(value instanceof Object) &&\n          \t\t\t(Object.prototype.toString.call((value)) === '[object Function]' ||\n          \t\t\t\ttypeof value.call !== 'undefined' &&\n          \t\t\t\ttypeof value.propertyIsEnumerable !== 'undefined' &&\n          \t\t\t\t!value.propertyIsEnumerable('call'))\n\t\t\t) {\n        \t\t\treturn 'function';\n      \t\t\t}\n\t\t\tif (value.nodeType === 1 ){\n\t\t\t\treturn \"element\";\n\t\t\t}\n\t\t\tif (value.nodeType === 9){\n\t\t\t\treturn \"document\";\n\t\t\t}\n\t\t\tif (value === window){\n\t\t\t\treturn \"window\";\n\t\t\t}\n\t\t\tif (value instanceof Date){\n\t\t\t\treturn \"date\";\n\t\t\t}\n\t\t\tif (value.callee){\n\t\t\t\treturn \"arguments\";\n\t\t\t}\n\t\t\tif (value instanceof SyntaxError){\n\t\t\t\treturn \"SyntaxError\";\n\t\t\t}\n\t\t\tif (value instanceof Error){\n\t\t\t\treturn \"Error\";\n\t\t\t}\n\t\t} else {\n\t\t\tif (t === 'function' && typeof value.call === 'undefined') {\n    \t\t\t\treturn 'object';\n\t\t\t}\n\t\t}\n  \t\treturn t;\n\t};\n\n\tvar getBrowser = function(){\n\t\tif (navigator.userAgent.indexOf('MSIE') > -1){\n\t\t\treturn \"MSIE\";\n\t\t}\n\t\tif (navigator.userAgent.indexOf('Firefox') > -1){\n\t\t\treturn \"Firefox\";\n\t\t}\n\t\tif (navigator.userAgent.indexOf('Chrome') > -1){\n\t\t\treturn \"Chrome\";\n\t\t}\n\t\tif (navigator.userAgent.indexOf('Safari') > -1){\n\t\t\treturn \"Safari\";\n\t\t}\n\t\tif (navigator.userAgent.indexOf('Opera') > -1){\n\t\t\treturn \"Opera\";\n\t\t}\n\t\tif (navigator.userAgent.indexOf('Iceweasel') > -1){\n\t\t\treturn \"Firefox\";\n\t\t}\n\t\treturn \"undefined\";\n\t}();\n\n\tvar getBrowserVersion = function(){\n\n\t\tif (/MSIE (\\d+\\.\\d+);/.test(navigator.userAgent)){\n\t\t\treturn parseInt(RegExp.$1, 10);\n\t\t}\n\t\tif (/Firefox[\\/\\s](\\d+\\.\\d+)/.test(navigator.userAgent)){\n\t\t\treturn parseInt(RegExp.$1, 10);\n\t\t}\n\n\t\tif (/Chrome[\\/\\s](\\d+\\.\\d+)/.test(navigator.userAgent)){\n\t\t//if (/Chrome[\\/\\s](\\d+\\.\\d+\\.?\\d+)/.test(navigator.userAgent))\n\t\t\treturn parseInt(RegExp.$1,10);\n\t\t}\n\n\t\tif (/Safari[\\/\\s](\\d+\\.\\d+)/.test(navigator.userAgent)){\n\t\t\tif (/Version[\\/\\s](\\d+\\.\\d+)/.test(navigator.userAgent)){\n\t\t\t\treturn parseInt(RegExp.$1,10);\n\t\t\t}\n\t\t}\n\n\t\tif (/Opera[\\/\\s](\\d+\\.\\d+)/.test(navigator.userAgent)){\n\t\t\tif (/Version[\\/\\s](\\d+\\.\\d+)/.test(navigator.userAgent)){\n\t\t\t\treturn parseInt(RegExp.$1,10);\n\t\t\t}\n\t\t}\n\n\t\tif (/Iceweasel[\\/\\s](\\d+\\.\\d+)/.test(navigator.userAgent)){\n\t\t\treturn parseInt(RegExp.$1, 10);\n\t\t}\n\n\t\treturn \"undefined\"; \n\t}();\n\n\tvar useragent = navigator.userAgent.toLowerCase();\n\n\t/**\n\t *\tstage class   \n\t *\tThe class is a **`stage client side `** .\n\t *\t@class stage\n\t *\t@constructor\n\t *\t@module library\n\t *\t\n\t */\n\tvar Stage = class Stage  {\n\n\t\tconstructor(){\n\t\t\tthis.version = version; \n\t\t\tthis.typeOf = typeOf ;\n\t\t\tthis.extend = jQuery.extend ;\n\t\t\tthis.crypto = {};\n\t\t\tthis.modules = {};\n\t\t\tthis.media = {};\n\t\t\tthis.structs ={} ;\n\t\t\tthis.controllers = {};\n\t\t\tthis.browser = {\n\t\t\t\tnavigator:getBrowser,\n\t\t\t\tversion:getBrowserVersion,\n\t\t\t\tIe:/msie/.test( useragent ) && !/opera/.test( useragent ),\n\t\t\t\tGecko:navigator.userAgent.indexOf('Gecko') > -1 && navigator.userAgent.indexOf('KHTML') === -1,\n\t\t\t\tWebkit:/webkit/.test( useragent ),\n\t\t\t\tOpera:Object.prototype.toString.call(window.opera) === '[object Opera]',\n\t\t\t\tplatform:navigator.userAgent.match(/ip(?:ad|od|hone)/) ? 'ios' : (navigator.userAgent.match(/(?:webos|android)/) || navigator.platform.toLowerCase().match(/mac|win|linux/) || ['other'])[0]\n\t\t\t};\n\t\t}\n\n\t\tregister (name, closure){\n\t\t\tif (typeof closure === \"function\") {\n\t\t\t\t// exec closure \n\t\t\t\tvar register = closure(this, name);\n\t\t\t} else {\n\t\t\t\tvar register = closure;\n\t\t\t}\n\t\t\treturn this[name] = register;\n\t\t}\n\n\t\tregisterModule (name, closure){\n\t\t\treturn this.register.call(this.modules, name, closure);\n\t\t}\n\n\t\tregisterController (name, closure){\n\t\t\treturn this.register.call(this.controllers, name, closure);\n\t\t}\n\n\t\tbasename (path) {\n\t\t\treturn path.replace(/\\\\/g,'/').replace( /.*\\//, '' );\n\t\t}\n\n\t\tdirname (path) {\n\t\t\treturn path.replace(/\\\\/g,'/').replace(/\\/[^\\/]*$/, '');\n\t\t}\n\n\t};\n\treturn  new Stage();\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/stage.es6","/*\n *\n *\n *\n *\n *\n *\n *\n */\n\n\nmodule.exports =  function(stage){\n\n\t// private property\n\tvar _keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n\n\t// public method for encoding\n\tvar encode64 = function (input) {\n\t\tvar output = \"\";\n\t\tvar chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n\t\tvar i = 0;\n\n\t\tinput = _utf8_encode(input);\n\n\t\twhile (i < input.length) {\n\n\t\t\tchr1 = input.charCodeAt(i++);\n\t\t\tchr2 = input.charCodeAt(i++);\n\t\t\tchr3 = input.charCodeAt(i++);\n\n\t\t\tenc1 = chr1 >> 2;\n\t\t\tenc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n\t\t\tenc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n\t\t\tenc4 = chr3 & 63;\n\n\t\t\tif (isNaN(chr2)) {\n        \t\t\tenc3 = enc4 = 64;\n\t\t\t} else if (isNaN(chr3)) {\n        \t\t\tenc4 = 64;\n\t\t\t}\n\n\t\t\toutput = output +\n\t\t\t_keyStr.charAt(enc1) + _keyStr.charAt(enc2) +\n\t\t\t_keyStr.charAt(enc3) + _keyStr.charAt(enc4);\n\n\t\t}\n\t\treturn output;\n\t};\n\n    \t// public method for decoding\n\tvar decode64 = function (input) {\n        \t var output = \"\";\n        \t var chr1, chr2, chr3;\n        \t var enc1, enc2, enc3, enc4;\n        \t var i = 0;\n\n        \t input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n\n        \t while (i < input.length) {\n\n            \t\t enc1 = _keyStr.indexOf(input.charAt(i++));\n            \t\t enc2 = _keyStr.indexOf(input.charAt(i++));\n            \t\t enc3 = _keyStr.indexOf(input.charAt(i++));\n            \t\t enc4 = _keyStr.indexOf(input.charAt(i++));\n\n            \t\t chr1 = (enc1 << 2) | (enc2 >> 4);\n            \t\t chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n            \t\t chr3 = ((enc3 & 3) << 6) | enc4;\n\n            \t\t output = output + String.fromCharCode(chr1);\n\n            \t\t if (enc3 != 64) {\n                \t\t output = output + String.fromCharCode(chr2);\n            \t\t }\n            \t\t if (enc4 != 64) {\n                \t\t output = output + String.fromCharCode(chr3);\n            \t\t }\n\n        \t }\n\n        \t if (i != input.length) {\n\t\t\t throw new Error (\"BASE64_BROKEN : There were invalid base64 characters in the input text.\\n\" +\n\t              \t\t\t\"Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\\n\" +\n\t              \t\t\t\"Expect errors in decoding.\");\n        \t }\n\n        \t output = _utf8_decode(output);\n\n        \t return output;\n\n    \t };\n\n\t\n\tvar decode =  function(input, arrayBuffer) {\n\t\t//get last chars to see if are valid\n\t\tvar lkey1 = _keyStr.indexOf(input.charAt(input.length-1));\t\t \n\t\tvar lkey2 = _keyStr.indexOf(input.charAt(input.length-2));\t\t \n\n\t\tvar bytes = (input.length/4) * 3;\n\t\tif (lkey1 == 64) bytes--; //padding chars, so skip\n\t\tif (lkey2 == 64) bytes--; //padding chars, so skip\n\n\t\tvar uarray;\n\t\tvar chr1, chr2, chr3;\n\t\tvar enc1, enc2, enc3, enc4;\n\t\tvar i = 0;\n\t\tvar j = 0;\n\n\t\tif (arrayBuffer)\n\t\t\tuarray = new Uint8Array(arrayBuffer);\n\t\telse\n\t\t\tuarray = new Uint8Array(bytes);\n\n\t\tinput = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n\n\t\tfor (i=0; i<bytes; i+=3) {\t\n\t\t\t//get the 3 octects in 4 ascii chars\n\t\t\tenc1 = _keyStr.indexOf(input.charAt(j++));\n\t\t\tenc2 = _keyStr.indexOf(input.charAt(j++));\n\t\t\tenc3 = _keyStr.indexOf(input.charAt(j++));\n\t\t\tenc4 = _keyStr.indexOf(input.charAt(j++));\n\n\t\t\tchr1 = (enc1 << 2) | (enc2 >> 4);\n\t\t\tchr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n\t\t\tchr3 = ((enc3 & 3) << 6) | enc4;\n\n\t\t\tuarray[i] = chr1;\t\t\t\n\t\t\tif (enc3 != 64) uarray[i+1] = chr2;\n\t\t\tif (enc4 != 64) uarray[i+2] = chr3;\n\t\t}\n\t\treturn uarray;\t\n\t}\n\n\n\n\n    \t // private method for UTF-8 encoding\n\tvar _utf8_encode = function (string) {\n        \tstring = string.replace(/\\r\\n/g,\"\\n\");\n        \tvar utftext = \"\";\n\n        \tfor (var n = 0; n < string.length; n++) {\n\n            \t\tvar c = string.charCodeAt(n);\n\n            \t\tif (c < 128) {\n                \t\tutftext += String.fromCharCode(c);\n            \t\t}\n            \t\telse if((c > 127) && (c < 2048)) {\n                \t\tutftext += String.fromCharCode((c >> 6) | 192);\n                \t\tutftext += String.fromCharCode((c & 63) | 128);\n            \t\t}\n            \t\telse {\n                \t\tutftext += String.fromCharCode((c >> 12) | 224);\n                \t\tutftext += String.fromCharCode(((c >> 6) & 63) | 128);\n                \t\tutftext += String.fromCharCode((c & 63) | 128);\n            \t\t};\n\n        \t};\n        \treturn utftext;\n    \t};\n\n    \t// private method for UTF-8 decoding\n\tvar _utf8_decode = function(utftext){\n        \tvar string = \"\";\n        \tvar i = 0;\n        \tvar c = 0;\n\t\t//var c1 = 0;\n\t\tvar c2 = 0;\n\n        \twhile ( i < utftext.length ) {\n\n            \t\tc = utftext.charCodeAt(i);\n\n            \t\tif (c < 128) {\n                \t\tstring += String.fromCharCode(c);\n                \t\ti++;\n            \t\t}\n            \t\telse if((c > 191) && (c < 224)) {\n                \t\tc2 = utftext.charCodeAt(i+1);\n                \t\tstring += String.fromCharCode(((c & 31) << 6) | (c2 & 63));\n                \t\ti += 2;\n            \t\t}\n            \t\telse {\n                \t\tc2 = utftext.charCodeAt(i+1);\n                \t\tvar c3 = utftext.charCodeAt(i+2);\n                \t\tstring += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\n                \t\ti += 3;\n            \t\t}\n\n        \t}\n        \treturn string;\n    \t};\n\n\n\t/* will return a  Uint8Array type */\n\tvar decodeArrayBuffer =  function(input) {\n\t\tvar bytes = (input.length/4) * 3;\n\t\tvar ab = new ArrayBuffer(bytes);\n\t\tdecode(input, ab);\n\t\treturn ab;\n\t};\n\n\n\tstage.crypto.base64 =  {\n\t\tdecodeArrayBuffer:decodeArrayBuffer,\n\t\tencode:encode64,\n\t\tdecode:decode64\n\t};\n\n\treturn stage.crypto.base64 ;\n};\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/crypto/base64.js","/*\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\n\nmodule.exports =  function(stage){\n\n\t/*\n \t * Configurable variables. You may need to tweak these to be compatible with\n \t * the server-side, but the defaults work in most cases.\n \t */\n\tvar hexcase = 0;   /* hex output format. 0 - lowercase; 1 - uppercase        */\n\tvar b64pad  = \"\";  /* base-64 pad character. \"=\" for strict RFC compliance   */\n\n\t/*\n \t * Perform a simple self-test to see if the VM is working\n \t */\n\tvar md5_vm_test = function()\n\t{\n  \t\treturn rstr2hex(\"abc\").toLowerCase() === \"900150983cd24fb0d6963f7d28e17f72\";\n\t};\n\n\t/*\n \t* Calculate the MD5 of a raw string\n \t*/\n\tvar rstr_md5 = function(s)\n\t{\n  \t\treturn binl2rstr(binl_md5(rstr2binl(s), s.length * 8));\n\t};\n\n\t/*\n \t* Calculate the HMAC-MD5, of a key and some data (raw strings)\n \t*/\n\tvar rstr_hmac_md5 = function (key, data)\n\t{\n  \t\tvar bkey = rstr2binl(key);\n  \t\tif(bkey.length > 16) {\n\t\t\tbkey = binl_md5(bkey, key.length * 8);\n\t\t}\n  \t\tvar ipad = Array(16), opad = Array(16);\n  \t\tfor(var i = 0; i < 16; i++)\n  \t\t{\n    \t\t\tipad[i] = bkey[i] ^ 0x36363636;\n    \t\t\topad[i] = bkey[i] ^ 0x5C5C5C5C;\n  \t\t}\n\n  \t\tvar hash = binl_md5(ipad.concat(rstr2binl(data)), 512 + data.length * 8);\n  \t\treturn binl2rstr(binl_md5(opad.concat(hash), 512 + 128));\n\t};\n\n\t/*\n \t * Convert a raw string to a hex string\n \t */\n\tvar rstr2hex = function(input)\n\t{\n  \t\t//try { hexcase } catch(e) { hexcase=0; }\n  \t\tvar hex_tab = hexcase ? \"0123456789ABCDEF\" : \"0123456789abcdef\";\n  \t\tvar output = \"\";\n  \t\tvar x;\n  \t\tfor(var i = 0; i < input.length; i++)\n  \t\t{\n    \t\t\tx = input.charCodeAt(i);\n    \t\t\toutput += hex_tab.charAt((x >>> 4) & 0x0F) + hex_tab.charAt( x  & 0x0F);\n  \t\t}\n  \t\treturn output;\n\t};\n\n\t/*\n \t * Convert a raw string to a base-64 string\n \t */\n\tvar rstr2b64 = function(input)\n\t{\n  \t\t//try { b64pad } catch(e) { b64pad=''; }\n  \t\tvar tab = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n  \t\tvar output = \"\";\n  \t\tvar len = input.length;\n  \t\tfor(var i = 0; i < len; i += 3)\n  \t\t{\n    \t\t\tvar triplet = (input.charCodeAt(i) << 16)\n                \t\t| (i + 1 < len ? input.charCodeAt(i+1) << 8 : 0)\n                \t\t| (i + 2 < len ? input.charCodeAt(i+2)      : 0);\n    \t\t\tfor(var j = 0; j < 4; j++)\n    \t\t\t{\n      \t\t\t\tif(i * 8 + j * 6 > input.length * 8){\n\t\t\t\t\toutput += b64pad;\n      \t\t\t\t}else {\n\t\t\t\t\toutput += tab.charAt((triplet >>> 6*(3-j)) & 0x3F);\n\t\t\t\t}\n    \t\t\t}\n  \t\t}\n  \t\treturn output;\n\t};\n\n\t/*\n \t * Convert a raw string to an arbitrary string encoding\n \t */\n\tvar rstr2any = function (input, encoding)\n\t{\n  \t\tvar divisor = encoding.length;\n  \t\tvar i, j, q, x, quotient;\n\n  \t\t/* Convert to an array of 16-bit big-endian values, forming the dividend */\n  \t\tvar dividend = Array(Math.ceil(input.length / 2));\n  \t\tfor(i = 0; i < dividend.length; i++)\n  \t\t{\n    \t\t\tdividend[i] = (input.charCodeAt(i * 2) << 8) | input.charCodeAt(i * 2 + 1);\n  \t\t}\n\n  \t\t/*\n   \t\t * Repeatedly perform a long division. The binary array forms the dividend,\n   \t\t * the length of the encoding is the divisor. Once computed, the quotient\n   \t\t * forms the dividend for the next step. All remainders are stored for later\n   \t\t * use.\n   \t\t */\n  \t\tvar full_length = Math.ceil(input.length * 8 /\n                                (Math.log(encoding.length) / Math.log(2)));\n  \t\tvar remainders = Array(full_length);\n  \t\tfor(j = 0; j < full_length; j++)\n  \t\t{\n    \t\t\tquotient = Array();\n    \t\t\tx = 0;\n    \t\t\tfor(i = 0; i < dividend.length; i++)\n    \t\t\t{\n      \t\t\t\tx = (x << 16) + dividend[i];\n      \t\t\t\tq = Math.floor(x / divisor);\n      \t\t\t\tx -= q * divisor;\n      \t\t\t\tif(quotient.length > 0 || q > 0){\n        \t\t\t\tquotient[quotient.length] = q;\n\t\t\t\t}\n    \t\t\t}\n    \t\t\tremainders[j] = x;\n    \t\t\tdividend = quotient;\n  \t\t}\n\n  \t\t/* Convert the remainders to the output string */\n  \t\tvar output = \"\";\n  \t\tfor(i = remainders.length - 1; i >= 0; i--){\n    \t\t\toutput += encoding.charAt(remainders[i]);\n\t\t}\n  \t\treturn output;\n\t};\n\t\n\t/*\n \t * Encode a string as utf-8.\n \t * For efficiency, this assumes the input is valid utf-16.\n \t */\n\tvar str2rstr_utf8 = function (input)\n\t{\n  \t\tvar output = \"\";\n  \t\tvar i = -1;\n  \t\tvar x, y;\n\n  \t\twhile(++i < input.length)\n  \t\t{\n    \t\t\t/* Decode utf-16 surrogate pairs */\n    \t\t\tx = input.charCodeAt(i);\n    \t\t\ty = i + 1 < input.length ? input.charCodeAt(i + 1) : 0;\n    \t\t\tif(0xD800 <= x && x <= 0xDBFF && 0xDC00 <= y && y <= 0xDFFF)\n    \t\t\t{\n      \t\t\t\tx = 0x10000 + ((x & 0x03FF) << 10) + (y & 0x03FF);\n      \t\t\t\ti++;\n    \t\t\t}\n\n    \t\t\t/* Encode output as utf-8 */\n    \t\t\tif(x <= 0x7F){\n      \t\t\t\toutput += String.fromCharCode(x);\n    \t\t\t}else if(x <= 0x7FF){\n      \t\t\t\toutput += String.fromCharCode(0xC0 | ((x >>> 6 ) & 0x1F),\n                                    \t\t0x80 | ( x         & 0x3F));\n    \t\t\t}else if(x <= 0xFFFF){\n      \t\t\t\toutput += String.fromCharCode(0xE0 | ((x >>> 12) & 0x0F),\n                                    \t\t0x80 | ((x >>> 6 ) & 0x3F),\n                                    \t\t0x80 | ( x         & 0x3F));\n    \t\t\t}else if(x <= 0x1FFFFF){\n      \t\t\t\toutput += String.fromCharCode(0xF0 | ((x >>> 18) & 0x07),\n                                    \t\t0x80 | ((x >>> 12) & 0x3F),\n                                    \t\t0x80 | ((x >>> 6 ) & 0x3F),\n                                    \t\t0x80 | ( x         & 0x3F));\n\t\t\t}\n  \t\t}\n  \t\treturn output;\n\t};\n\n\t/*\n \t * Encode a string as utf-16\n \t */\n\tvar str2rstr_utf16le = function (input)\n\t{\n  \t\tvar output = \"\";\n  \t\tfor(var i = 0; i < input.length; i++){\n    \t\t\toutput += String.fromCharCode( input.charCodeAt(i)        & 0xFF,\n                                  \t(input.charCodeAt(i) >>> 8) & 0xFF);\n\t\t}\n  \t\treturn output;\n\t};\n\n\tvar str2rstr_utf16be = function (input)\n\t{\n  \t\tvar output = \"\";\n  \t\tfor(var i = 0; i < input.length; i++){\n    \t\t\toutput += String.fromCharCode((input.charCodeAt(i) >>> 8) & 0xFF,\n                                   \tinput.charCodeAt(i)        & 0xFF);\n\t\t}\n  \t\treturn output;\n\t};\n\n\t/*\n \t * Convert a raw string to an array of little-endian words\n \t * Characters >255 have their high-byte silently ignored.\n \t */\n\tvar rstr2binl = function (input)\n\t{\n  \t\tvar output = Array(input.length >> 2);\n  \t\tfor(var i = 0; i < output.length; i++){\n    \t\t\toutput[i] = 0;\n\t\t}\n  \t\tfor(var i = 0; i < input.length * 8; i += 8){\n    \t\t\toutput[i>>5] |= (input.charCodeAt(i / 8) & 0xFF) << (i%32);\n\t\t}\n  \t\treturn output;\n\t};\n\n\t/*\n \t * Convert an array of little-endian words to a string\n \t */\n\tvar binl2rstr = function (input)\n\t{\n  \t\tvar output = \"\";\n  \t\tfor(var i = 0; i < input.length * 32; i += 8){\n    \t\t\toutput += String.fromCharCode((input[i>>5] >>> (i % 32)) & 0xFF);\n\t\t}\n  \t\treturn output;\n\t};\n\n\t/*\n \t * Calculate the MD5 of an array of little-endian words, and a bit length.\n \t */\n\tvar binl_md5 = function (x, len)\n\t{\n  \t\t/* append padding */\n  \t\tx[len >> 5] |= 0x80 << ((len) % 32);\n  \t\tx[(((len + 64) >>> 9) << 4) + 14] = len;\n\n  \t\tvar a =  1732584193;\n  \t\tvar b = -271733879;\n  \t\tvar c = -1732584194;\n  \t\tvar d =  271733878;\n\n  \t\tfor(var i = 0; i < x.length; i += 16)\n  \t\t{\n    \t\t\tvar olda = a;\n    \t\t\tvar oldb = b;\n    \t\t\tvar oldc = c;\n    \t\t\tvar oldd = d;\n\n    \t\t\ta = md5_ff(a, b, c, d, x[i+ 0], 7 , -680876936);\n    \t\t\td = md5_ff(d, a, b, c, x[i+ 1], 12, -389564586);\n    \t\t\tc = md5_ff(c, d, a, b, x[i+ 2], 17,  606105819);\n    \t\t\tb = md5_ff(b, c, d, a, x[i+ 3], 22, -1044525330);\n    \t\t\ta = md5_ff(a, b, c, d, x[i+ 4], 7 , -176418897);\n    \t\t\td = md5_ff(d, a, b, c, x[i+ 5], 12,  1200080426);\n    \t\t\tc = md5_ff(c, d, a, b, x[i+ 6], 17, -1473231341);\n    \t\t\tb = md5_ff(b, c, d, a, x[i+ 7], 22, -45705983);\n    \t\t\ta = md5_ff(a, b, c, d, x[i+ 8], 7 ,  1770035416);\n    \t\t\td = md5_ff(d, a, b, c, x[i+ 9], 12, -1958414417);\n    \t\t\tc = md5_ff(c, d, a, b, x[i+10], 17, -42063);\n    \t\t\tb = md5_ff(b, c, d, a, x[i+11], 22, -1990404162);\n    \t\t\ta = md5_ff(a, b, c, d, x[i+12], 7 ,  1804603682);\n    \t\t\td = md5_ff(d, a, b, c, x[i+13], 12, -40341101);\n    \t\t\tc = md5_ff(c, d, a, b, x[i+14], 17, -1502002290);\n    \t\t\tb = md5_ff(b, c, d, a, x[i+15], 22,  1236535329);\n\n    \t\t\ta = md5_gg(a, b, c, d, x[i+ 1], 5 , -165796510);\n    \t\t\td = md5_gg(d, a, b, c, x[i+ 6], 9 , -1069501632);\n    \t\t\tc = md5_gg(c, d, a, b, x[i+11], 14,  643717713);\n    \t\t\tb = md5_gg(b, c, d, a, x[i+ 0], 20, -373897302);\n    \t\t\ta = md5_gg(a, b, c, d, x[i+ 5], 5 , -701558691);\n    \t\t\td = md5_gg(d, a, b, c, x[i+10], 9 ,  38016083);\n    \t\t\tc = md5_gg(c, d, a, b, x[i+15], 14, -660478335);\n    \t\t\tb = md5_gg(b, c, d, a, x[i+ 4], 20, -405537848);\n    \t\t\ta = md5_gg(a, b, c, d, x[i+ 9], 5 ,  568446438);\n    \t\t\td = md5_gg(d, a, b, c, x[i+14], 9 , -1019803690);\n    \t\t\tc = md5_gg(c, d, a, b, x[i+ 3], 14, -187363961);\n    \t\t\tb = md5_gg(b, c, d, a, x[i+ 8], 20,  1163531501);\n    \t\t\ta = md5_gg(a, b, c, d, x[i+13], 5 , -1444681467);\n    \t\t\td = md5_gg(d, a, b, c, x[i+ 2], 9 , -51403784);\n    \t\t\tc = md5_gg(c, d, a, b, x[i+ 7], 14,  1735328473);\n    \t\t\tb = md5_gg(b, c, d, a, x[i+12], 20, -1926607734);\n\n    \t\t\ta = md5_hh(a, b, c, d, x[i+ 5], 4 , -378558);\n    \t\t\td = md5_hh(d, a, b, c, x[i+ 8], 11, -2022574463);\n    \t\t\tc = md5_hh(c, d, a, b, x[i+11], 16,  1839030562);\n    \t\t\tb = md5_hh(b, c, d, a, x[i+14], 23, -35309556);\n    \t\t\ta = md5_hh(a, b, c, d, x[i+ 1], 4 , -1530992060);\n    \t\t\td = md5_hh(d, a, b, c, x[i+ 4], 11,  1272893353);\n    \t\t\tc = md5_hh(c, d, a, b, x[i+ 7], 16, -155497632);\n    \t\t\tb = md5_hh(b, c, d, a, x[i+10], 23, -1094730640);\n    \t\t\ta = md5_hh(a, b, c, d, x[i+13], 4 ,  681279174);\n    \t\t\td = md5_hh(d, a, b, c, x[i+ 0], 11, -358537222);\n    \t\t\tc = md5_hh(c, d, a, b, x[i+ 3], 16, -722521979);\n    \t\t\tb = md5_hh(b, c, d, a, x[i+ 6], 23,  76029189);\n    \t\t\ta = md5_hh(a, b, c, d, x[i+ 9], 4 , -640364487);\n    \t\t\td = md5_hh(d, a, b, c, x[i+12], 11, -421815835);\n    \t\t\tc = md5_hh(c, d, a, b, x[i+15], 16,  530742520);\n    \t\t\tb = md5_hh(b, c, d, a, x[i+ 2], 23, -995338651);\n\n    \t\t\ta = md5_ii(a, b, c, d, x[i+ 0], 6 , -198630844);\n    \t\t\td = md5_ii(d, a, b, c, x[i+ 7], 10,  1126891415);\n    \t\t\tc = md5_ii(c, d, a, b, x[i+14], 15, -1416354905);\n    \t\t\tb = md5_ii(b, c, d, a, x[i+ 5], 21, -57434055);\n    \t\t\ta = md5_ii(a, b, c, d, x[i+12], 6 ,  1700485571);\n    \t\t\td = md5_ii(d, a, b, c, x[i+ 3], 10, -1894986606);\n    \t\t\tc = md5_ii(c, d, a, b, x[i+10], 15, -1051523);\n    \t\t\tb = md5_ii(b, c, d, a, x[i+ 1], 21, -2054922799);\n    \t\t\ta = md5_ii(a, b, c, d, x[i+ 8], 6 ,  1873313359);\n    \t\t\td = md5_ii(d, a, b, c, x[i+15], 10, -30611744);\n    \t\t\tc = md5_ii(c, d, a, b, x[i+ 6], 15, -1560198380);\n    \t\t\tb = md5_ii(b, c, d, a, x[i+13], 21,  1309151649);\n    \t\t\ta = md5_ii(a, b, c, d, x[i+ 4], 6 , -145523070);\n    \t\t\td = md5_ii(d, a, b, c, x[i+11], 10, -1120210379);\n    \t\t\tc = md5_ii(c, d, a, b, x[i+ 2], 15,  718787259);\n    \t\t\tb = md5_ii(b, c, d, a, x[i+ 9], 21, -343485551);\n\n    \t\t\ta = safe_add(a, olda);\n    \t\t\tb = safe_add(b, oldb);\n    \t\t\tc = safe_add(c, oldc);\n    \t\t\td = safe_add(d, oldd);\n  \t\t}\n  \t\treturn Array(a, b, c, d);\n\t};\n\n\t/*\n \t * These functions implement the four basic operations the algorithm uses.\n \t */\n\tvar md5_cmn = function (q, a, b, x, s, t)\n\t{\n  \t\treturn safe_add(bit_rol(safe_add(safe_add(a, q), safe_add(x, t)), s),b);\n\t};\n\tvar md5_ff = function (a, b, c, d, x, s, t)\n\t{\n  \t\treturn md5_cmn((b & c) | ((~b) & d), a, b, x, s, t);\n\t};\n\tvar md5_gg = function (a, b, c, d, x, s, t)\n\t{\n  \t\treturn md5_cmn((b & d) | (c & (~d)), a, b, x, s, t);\n\t};\n\tvar md5_hh = function (a, b, c, d, x, s, t)\n\t{\n  \t\treturn md5_cmn(b ^ c ^ d, a, b, x, s, t);\n\t};\n\tvar md5_ii = function (a, b, c, d, x, s, t)\n\t{\n  \t\treturn md5_cmn(c ^ (b | (~d)), a, b, x, s, t);\n\t};\n\n\t/*\n \t * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n \t * to work around bugs in some JS interpreters.\n \t */\n\tvar safe_add = function (x, y)\n\t{\n  \t\tvar lsw = (x & 0xFFFF) + (y & 0xFFFF);\n  \t\tvar msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n  \t\treturn (msw << 16) | (lsw & 0xFFFF);\n\t};\n\n\t/*\n \t * Bitwise rotate a 32-bit number to the left.\n \t */\n\tvar bit_rol = function (num, cnt)\n\t{\n  \t\treturn (num << cnt) | (num >>> (32 - cnt));\n\t};\n\n\tstage.crypto.md5 = {\n \t\thex_md5:function(s){ \n\t\t\treturn rstr2hex(rstr_md5(str2rstr_utf8(s)));\n\t\t},\n\t\thex_md5_noUTF8:function(s){ \n\t\t\treturn rstr2hex(rstr_md5(s)); \n\t\t},\n\t\tstr_md5:function(s){ \n\t\t\treturn rstr_md5(str2rstr_utf8(s)); \n\t\t},\n \t\tb64_md5:function(s){ \n\t\t\treturn rstr2b64(rstr_md5(str2rstr_utf8(s)));\n\t\t},\n \t\tany_md5:function(s, e){\n\t\t\treturn rstr2any(rstr_md5(str2rstr_utf8(s)), e); \n\t\t},\n \t\thex_hmac_md5:function(k, d){\n\t\t\treturn rstr2hex(rstr_hmac_md5(str2rstr_utf8(k), str2rstr_utf8(d))); \n\t\t},\n\t\tstr_hmac_md5:function(k, d){\n\t\t\treturn rstr_hmac_md5(str2rstr_utf8(k), str2rstr_utf8(d)); \n\t\t},\n \t\tb64_hmac_md5:function(k, d){\n\t\t\treturn rstr2b64(rstr_hmac_md5(str2rstr_utf8(k), str2rstr_utf8(d)));\n\t\t},\n \t\tany_hmac_md5:function(k, d, e){ \n\t\t\treturn rstr2any(rstr_hmac_md5(str2rstr_utf8(k), str2rstr_utf8(d)), e);\n\t\t}\n\t};\n\treturn stage.crypto.md5 ; \n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/crypto/md5.js","module.exports =  function(stage){\n\n\tvar keyWord= {\n\t\trealm:true,\n\t\tqop:true,\n\t\tcharset:true,\n\t\talgorithm:true,\n\t\tnonce:true\n\t};\n\n\tvar reg =/^([^=]+)=(.+)$/;\n\tvar parserAuthenticate = function(str){\n\t\tvar ret = str.replace(/\"/g,\"\");\n\t\tret = ret.replace(/Digest /g,\"\");\n\t\tvar head = ret.split(\",\");\n\t\tvar obj = {};\n\t\tfor (var i= 0 ; i < head.length ; i++){\n\t\t\tvar res = reg.exec(head[i]);\n\t\t\tif (res && res[1]){\n\t\t\t\tobj[res[1]] = res[2];\n\t\t\t}\n\t\t}\t\n\t\treturn obj;\n\t};\n\n\tvar MD5 = stage.crypto.md5.hex_md5_noUTF8 ;\n\tvar BASE64 = stage.crypto.base64.encode ;\n\tvar DBASE64 = stage.crypto.base64.decode;\n\n\tvar generateA1 = function(username, realm, password, nonce, cnonce){\n\t\tvar A1 = null ;\n\t\tif (cnonce){\n\t\t\tA1 = username + \":\" + realm + \":\" + password + \":\" + nonce+ \":\" + cnonce ;\n\t\t}else{\n\t\t\tA1 = username + \":\" + realm + \":\" + password ;//+ \":\" + nonce ;\n\t\t}\n\t\treturn MD5(A1); \n\t};\n\n\tvar generateA2 = function(method, uri, entity_body, qop){\n\t\tvar A2 = \"\";\n\t\tif( ! qop || qop ===  \"auth\"){\n\t\t\tA2 = method +\":\" + uri ;\n\t\t} else if(qop === \"auth-int\"){\n\t\t\tif( entity_body ){\n\t\t\t\tvar entity = MD5(entity_body);\n\t\t\t\tA2 = method + \":\" + uri + \":\" + entity ; \n\t\t\t}else{\n\t\t\t\tA2 = method + \":\" + uri + \":\" + \"d41d8cd98f00b204e9800998ecf8427e\" ;\n\t\t\t}\n\t\t}\n\t\treturn MD5(A2);\n\t};\n\n\tvar responseDigest = function(A1, nonce, noncecount, cnonce, qop, A2){\n\t\tvar res = \"\";\n\t\tif(qop === \"auth\" || qop === \"auth-int\"){\n\t\t\tres = A1 + \":\" + nonce +\":\" + noncecount +\":\" + cnonce +\":\" + qop + \":\" + A2 ;\n\t\t}else{\n\t\t\tres = A1 + \":\" + nonce + \":\" + A2 ;\n\t\t}\n\t\treturn MD5(res);\n\t};\n\n\t/*\n \t *\n \t */\n\tconst digestMd5 = class digestMd5  {\n\n\t\tconstructor(url, method, headers, body){\n\t\t\tthis.method = method ;\n\t\t\tthis.entity_body = body;\n\t\t\tthis.url = url;\n\t\t\tthis.uri = this.url.requestUri;\n\t\t\tthis.protocol = this.url.protocol.replace(\":\",\"\");\n\t\t\tthis.host = this.url.host;\n\t\t\tswitch (typeof headers){\n\t\t\t\tcase \"object\":\n\t\t\t\t\tthis.parseChallenge(headers);\n \t\t\t\t\tbreak;\t\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error(\"digetMD5 bad format header\");\n\t\t\t}\t\n\t\t}\n\n\t\tparseChallenge (headers){\n\t\t\t//console.log(headers)\n\t\t\tvar parsing = {};\n\t\t\tswitch (typeof headers){\n\t\t\t\tcase \"string\" : \n\t\t\t\t\t//TODO\n\t\t\t\t\tthrow new Error(\"digetMD5 bad format challenge\");\n\t\t\t\tcase \"object\" :\n\t\t\t\t\tfor (var ele in headers ){\n\t\t\t\t\t\tswitch (ele){\n\t\t\t\t\t\t\tcase \"challenge\":\n\t\t\t\t\t\t\t\tif (typeof headers.challenge === \"string\"){\n\t\t\t\t\t\t\t\t\ttry{\n\t\t\t\t\t\t\t\t\t\tthis.challengeB64 = DBASE64(headers.challenge);\n\t\t\t\t\t\t\t\t\t}catch(e){\n\t\t\t\t\t\t\t\t\t\tthis.challengeB64 = headers.challenge ;\n\t\t\t\t\t\t\t\t\t\t//throw new Error(\"DIGEST MD5 ERROR DECODE BAS64\")\t\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tparsing[ele] = headers[ele];\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\t\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error(\"digetMD5 bad format challenge\");\n\t\t\t}\n\t\t\tvar challenge = stage.extend(parserAuthenticate(this.challengeB64), parsing );\n\t\t\t//var challenge = parserAuthenticate(this.challengeB64);\n\t\t\t//console.log(challenge)\n\t\t\tfor (var name in challenge){\n\t\t\t\tif (name in keyWord){\n\t\t\t\t\tthis[name] = challenge[name];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"digestMd5 parser challenge header name dropped: \"+name);\n\t\t\t\t}\t\n\t\t\t}\n\t\t}\n\n\t\tgenerateAuthorization (username, password){\n\n\t\t\tvar line = 'Digest username=\"'+username+'\"';\n\t\t\tif (! this.realm){\n\t\t\t\tthis.realm = username+\"@\"+this.url.host ;\n\t\t\t}\n\n\t\t\tvar res ={\n\t\t\t\tnonce:'\"'+this.nonce+'\"',\n\t\t\t\trealm:'\"'+this.realm+'\"',\n\t\t\t\tresponse:null\n\t\t\t};\n\n\t\t\tthis[\"digest-uri\"] = this.protocol+\"/\"+this.host;\n\t\t\t//this[\"digest-uri\"] = '\"'+this.protocol+\"/\"+this.uri+'\"';\n\n\t\t\tres[\"digest-uri\"] = '\"'+this[\"digest-uri\"]+'\"';\n\n\t\t\t/*if (this.charset){\n\t\t\t  res[\"charset\"]=this.charset;\n\t\t\t  }*/\n\n\t\t\tif (this.qop){\n\t\t\t\tthis.cnonce = BASE64( Math.floor( (Math.random()*100000000)) .toString() ) ;\n\t\t\t\tres[\"cnonce\"]='\"'+this.cnonce+'\"';\n\t\t\t\tres[\"qop\"]=this.qop;\n\t\t\t}\n\t\t\tif (this.opaque){\n\t\t\t\tres[\"opaque\"]=this.opaque;\n\t\t\t}\n\n\t\t\tthis.nc = \"00000001\";\n\t\t\tres[\"nc\"]=this.nc;\n\n\t\t\tthis.A1 = generateA1(username, this.realm, password/*, this.nonce, this.cnonce*/);\t\n\t\t\tthis.A2 = generateA2(this.method, this[\"digest-uri\"], this.entity_body, this.qop);\n\n\n\t\t\tres.response = responseDigest(this.A1, this.nonce, this.nc, this.cnonce, this.qop, this.A2);\t\n\t\t\t// generate Authorization \n\n\t\t\tfor (var ele in res){\n\t\t\t\tline+=\",\"+ele+\"=\"+res[ele];\n\t\t\t}\n\t\t\t//console.log(line)\n\t\t\tvar toSend = BASE64(line);\n\t\t\treturn toSend;\n\n\t\t}\n\t};\n\n\tstage.io.authentication.Digest = digestMd5 ;\n\tstage.io.authentication.mechanisms.Digest = digestMd5 ;\n\treturn digestMd5;\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/io/authentication/mechanisms/digest-md5/digestMd5.es6","module.exports =  function(stage){\n\t\n\tvar reg =/^([^=]+)=(.+)$/;\n\tvar parserSasl = function(str){\n\t\t//console.log(str)\n\t\tvar ret = str.replace(/\"/g,\"\");\n\t\tvar head = ret.split(\",\");\n\t\tvar obj = {}\n\t\tfor (var i= 0 ; i < head.length ; i++){\n\t\t\tvar res = reg.exec(head[i])\n\t\t\tif (res && res[1])\n\t\t\t\tobj[res[1]] = res[2]\n\t\t}\t\n\t\treturn obj;\n\t};\n\n\n\tvar Sasl = class Sasl  {\n\n\t\tconstructor(url, method, headers, body){\n\t\t\tthis.method = method;\n\t\t\tthis.url = url;\n\t\t\tthis.name = \"sasl\" ;\n\t\t\tthis.headers = parserSasl(headers);\n\t\t\tthis.body = body ;\n\t\t\tthis.mechanisms = this.headers.mechanisms;\n\t\t\tvar mechanism = this.getBestMechanism(this.mechanisms);\n\t\t\tif (mechanism){\n\t\t\t\tdelete this.headers.mechanisms\n\t\t\t\t\tthis.bestMechanism = mechanism.name\n\t\t\t\t\tthis.mechanism = new mechanism.Class(this.url, this.method, this.headers, this.body);\t\n\t\t\t}else{\n\t\t\t\tthrow new Error(\"SALS mechanism not found\")\t\n\t\t\t}\t\t\n\t\t}\n\n\t\tgetBestMechanism (mechanism){\n\t\t\tvar goodM = null;\n\t\t\tswitch (typeof mechanism){\n\t\t\t\tcase \"object\" :\n\t\t\t\t\tfor (var i= 0 ; i < mechanism.length ; i++){\n\t\t\t\t\t\tif (mechanism[i] in stage.io.authentication.mechanisms){\n\t\t\t\t\t\t\tvar goodM = stage.io.authentication.mechanisms[mechanism[i]];\n\t\t\t\t\t\t\tvar name = mechanism[i];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"string\" :\n\t\t\t\t\t//console.log(mechanism.split(\" \"));\n\t\t\t\t\treturn this.getBestMechanism( mechanism.split(\" \") );\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error(\"FORMAT SALS mechanism bad format\")\n\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tname:name,\n\t\t\t\t\tClass:goodM\n\t\t\t}\n\t\t};\n\n\t\tgetAuthorization (user, password){\n\t\t\treturn  'SASL mechanism=\"'+this.bestMechanism+'\",'+this.mechanism.generateAuthorization(user, password);\n\t\t}\n\n\t};\n\n\tstage.io.authentication.SASL = Sasl ;\n\t\n\treturn Sasl ;\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/io/authentication/sasl/sasl.es6","module.exports =  function(stage){\n\n\t'use strict';\n\n\tvar isSameOrigin = function (url) {\n\t\tvar loc = window.location;\n\t\tvar a = urlToOject(url);\n\t\treturn a.hostname === loc.hostname &&\n\t\t\ta.port == loc.port &&\n\t\t\ta.protocol === loc.protocol;\n\t};\n\n\tvar isSecure = function(url){\n\t\tvar loc = window.location;\n\t\tvar a = urlToOject(url);\n\t\treturn a.protocol === \"https:\" ;\n\t};\n\n\t/*\n \t *\n \t *   CLASS AUTHENTICATE\n \t *\n \t *\n \t *\tEVENTS\n \t *\n \t *\tonError: \n \t *\n \t *\n \t *\tonSuccess:\n \t *\n \t *\n \t */\n\tvar authenticate = class authenticate  {\n\n\t\tconstructor(url, request, settings){\n\t\t\tthis.url = typeof url === \"object\" ? url : stage.io.urlToOject(url) ;\n\t\t\tthis.crossDomain = ! stage.io.isSameOrigin(url);\n\t\t\t// notification center\n\t\t\tthis.notificationCenter = stage.notificationsCenter.create(settings);\n\t\t\t// get header WWW-Authenticate\n\t\t\tvar authenticate = request[\"WWW-Authenticate\"].split(\" \") ;\n\t\t\t//  get type authentification\n\t\t\tvar authType = Array.prototype.shift.call(authenticate);\n\t\t\tvar headers = request[\"WWW-Authenticate\"].replace(authType+\" \",\"\");\n\t\t\t\t//console.log(authType);\n\t\t\t\tthis.method = \"POST\";\n\t\t\tvar body = request.body;\n\n\t\t\t// intance of authentication\n\t\t\tvar auth = this.getAuthenticationType(authType);\n\t\t\tthis.authentication = new auth(this.url,  this.method, headers, body );\n\t\t\t\tthis.ajax = false;\n\t\t\tif (settings.ajax){\n\t\t\t\tthis.ajax = true;\n\t\t\t}\n\t\t}\n\t\t\n\t\tgetAuthenticationType (type){\n\t\t\tif (type in stage.io.authentication){\n\t\t\t\treturn stage.io.authentication[type];\n\t\t\t}else{\n\t\t\t\tthrow new Error(\"SSE client can't negociate : \"+type );\n\t\t\t}\n\t\t}\n\n\t\tregister (username, password){\n\t\t\tvar line = this.authentication.getAuthorization(username, password);\n\t\t\tthis.notificationCenter.fire(\"onRegister\", this, line);\t\n\t\t\tif (this.ajax){\n\t\t\t\t$.ajax({\n\t\t\t\t\ttype:\t\tthis.method,\n\t\t\t\t\turl:\t\tthis.url.href,\n\t\t\t\t\tcache:\t\tfalse,\n\t\t\t\t\tcrossDomain:\tthis.crossDomain ? false : true ,\n\t\t\t\t\terror:(obj, type, message) => {\n\t\t\t\t\t\tthis.notificationCenter.fire(\"onError\", obj, type, message);\t\n\t\t\t\t\t},\n\t\t\t\t\tbeforeSend:(xhr) => {\n\t\t\t\t\t\txhr.setRequestHeader(\"Authorization\", line );\n\t\t\t\t\t\t//if (this.crossDomain)\n\t\t\t\t\t\t//xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n\t\t\t\t\t},\n\t\t\t\t\tsuccess:(data, state, obj) => {\n\t\t\t\t\t\tthis.notificationCenter.fire(\"onSuccess\", data, state, obj);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\t\t\n\t\t}\n\t};\n\n\t/**\n \t * We need our custom method because encodeURIComponent is too aggressive and doesn't follow\n \t * http://www.ietf.org/rfc/rfc3986.txt with regards to the character set (pchar) allowed in path\n \t * segments:\n \t *    segment       = *pchar\n \t *    pchar         = unreserved / pct-encoded / sub-delims / \":\" / \"@\"\n \t *    pct-encoded   = \"%\" HEXDIG HEXDIG\n \t *    unreserved    = ALPHA / DIGIT / \"-\" / \".\" / \"_\" / \"~\"\n \t *    sub-delims    = \"!\" / \"$\" / \"&\" / \"'\" / \"(\" / \")\"\n \t *                     / \"*\" / \"+\" / \",\" / \";\" / \"=\"\n \t */\n\t var encodeUriSegment = function(val) {\n  \t\treturn encodeUriQuery(val, true).\n             \t\treplace(/%26/gi, '&').\n             \t\treplace(/%3D/gi, '=').\n             \t\treplace(/%2B/gi, '+');\n\t};\n\n\n\t/**\n \t * This method is intended for encoding *key* or *value* parts of query component. We need a custom\n \t * method because encodeURIComponent is too aggressive and encodes stuff that doesn't have to be\n \t * encoded per http://tools.ietf.org/html/rfc3986:\n \t *    query       = *( pchar / \"/\" / \"?\" )\n \t *    pchar         = unreserved / pct-encoded / sub-delims / \":\" / \"@\"\n \t *    unreserved    = ALPHA / DIGIT / \"-\" / \".\" / \"_\" / \"~\"\n \t *    pct-encoded   = \"%\" HEXDIG HEXDIG\n \t *    sub-delims    = \"!\" / \"$\" / \"&\" / \"'\" / \"(\" / \")\"\n \t *                     / \"*\" / \"+\" / \",\" / \";\" / \"=\"\n \t */\n\t var encodeUriQuery = function (val, pctEncodeSpaces) {\n  \t\treturn encodeURIComponent(val).\n             \t\treplace(/%40/gi, '@').\n             \t\treplace(/%3A/gi, ':').\n             \t\treplace(/%24/g, '$').\n             \t\treplace(/%2C/gi, ',').\n             \t\treplace(/%3B/gi, ';').\n             \t\treplace(/%20/g, (pctEncodeSpaces ? '%20' : '+'));\n\t};\n\n\t\n\tvar regSearch = /^\\?(.*)/ ;\n\tvar parseKeyValue = function(search){\n\t\t//console.log(search)\n\t\tvar test = regSearch.exec(search) ;\n\t\t//console.log(test)\n\t\tif (test){\n\t\t\tsearch = test[1];\t\n\t\t}\n\t\tvar obj = {}, key_value, key;\n\t\tvar tab = (search|| \"\").split('&') ;\n\t\tif (tab.length){\n\t\t\tfor (var i = 0 ; i< tab.length;i++){\n\t\t\t\ttry {\n\t\t\t\t\tvar key_value = tab[i].replace(/\\+/g,'%20').split('=');\n\t\t\t\t\tvar key = decodeURIComponent(key_value[0]); \n\t\t\t\t\t//console.log(key_value)\n\t\t\t\t\t//console.log(key)\n\t\t\t\t\tif ( key ){\n\t\t\t\t\t\tvar val =  decodeURIComponent(key_value[1]);\n\t\t\t\t\t\tif ( ! Object.prototype.hasOwnProperty.call(obj, key) ){\n\t\t\t\t\t\t\tobj[key] = val;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tswitch (stage.typeOf(obj[key])){\n\t\t\t\t\t\t\t\tcase \"array\":\n\t\t\t\t\t\t\t\t\tobj[key].push(val);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\tobj[key] = [obj[key],val];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}catch (e){\n\t\t\t\t\t//invalid\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn obj;\n\t};\n\n\tvar toKeyValue = function(obj){\n\t\tvar parts = [];\n\t\tfor (var ele in obj){\n\t\t\tswitch(stage.typeOf(obj[ele])){\n\t\t\t\tcase \"array\":\n\t\t\t\t\tfor (var i = 0 ; i<obj[ele].length ;i++){\n\t\t\t\t\t\tparts.push(encodeUriQuery(ele, true) + (obj[ele][i] === true ? '' : '=' + encodeUriQuery(obj[ele][i], true)));\t\n\t\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\tcase \"string\":\n\t\t\t\tcase \"boolean\":\n\t\t\t\t\tparts.push( encodeUriQuery(ele, true) + (obj[ele] === true ? '' : '=' + encodeUriQuery(obj[ele], true)) );\n\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tcontinue ;\n\t\t\t}\n\t\t}\n\t\treturn parts.length ? parts.join('&') : '';\n  \t};\n\n\n\tvar getHeaderJSON = function(xhr) {\n  \t\tvar json = xhr.getResponseHeader(\"X-Json\"); \n  \t\tif (json) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(json);\n\t\t\t}catch(e){\n\t\t\t\treturn json;\n\t\t\t}\n  \t\t}\n\t\treturn null;\n\t};\n\n\tvar urlToOject = function(url){\n\t\tvar result = {};\n\n\t\tvar anchor = document.createElement('a');\n\t\tanchor.href = url;\n\n\t\tvar keys = 'protocol hostname host pathname port search hash href'.split(' ');\n\t\tfor (var keyIndex in keys) {\n\t\t\tvar currentKey = keys[keyIndex]; \n\t\t\tresult[currentKey] = anchor[currentKey];\n\t\t}\n\n\t\tresult.toString = function() { return anchor.href; };\n\t\tresult.requestUri = result.pathname + result.search;  \n\n\t\tresult.basename = result.pathname.replace(/\\\\/g,'/').replace( /.*\\//, '' ) ;\n\t\tresult.dirname = result.pathname.replace(/\\\\/g,'/').replace(/\\/[^\\/]*$/, '') ;\n\n\t\treturn result;\t\n\t};\n\n\tvar nativeWebSocket = window.WebSocket  ? true : false ; \n\n\tvar transportCore = class transportCore  extends stage.notificationsCenter.notification {\n\n\t\tconstructor(url, settings, context){\n\t\t\tsuper(settings, context );\t\n\t\t\t// Manage Url\n\t\t\tif (url){\n\t\t\t\tthis.url = urlToOject(url);\n\t\t\t\tthis.crossDomain = !isSameOrigin(url);\n\t\t\t\tthis.error = null;\n\t\t\t}else{\n\t\t\t\tthis.fire(\"onError\", new Error(\"Transport URL not defined\") );\n\t\t\t}\t\n\t\t}\n\t};\n\t\n\tstage.io = {\n\t\tnativeWebSocket: nativeWebSocket,\n\t\turlToOject: urlToOject,\n\t\tparseKeyValue:parseKeyValue,\n\t\ttoKeyValue:toKeyValue,\n\t\tencodeUriSegment:encodeUriSegment,\n\t\tencodeUriQuery:encodeUriQuery,\n\t\tgetHeaderJSON: getHeaderJSON,\n\t\tisSameOrigin: isSameOrigin,\n\t\tisSecure:isSecure,\n\t\tprotocols: {},\n\t\tauthentication: {\n\t\t\tauthenticate: authenticate,\n\t\t\tmechanisms: {}\n\t\t},\n\t\ttransport: transportCore,\n\t\ttransports: {}\n\t};\n\n\treturn stage.io ;\n};\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/io/io.es6","module.exports =  function(stage){\n\n\t'use strict';\n\n\tvar clientsCapabilities = function(){\n\t\tvar tab = [];\n\t\tvar ws =  stage.io.nativeWebSocket  ? tab.push(\"websocket\") : null ;\n\t\tvar poll = stage.io.poll ? tab.push(\"poll\") : null ;\n\t\tvar lpoll =stage.io.longPoll ?  tab.push(\"long-polling\") : null ; \n\t\tvar jsonp = stage.io.jsonp ?  tab.push(\"callback-polling\") : null ; \n\t\treturn tab ;\n\t}();\n\n\tvar onHandshakeResponse = function(message){\n\t\tif ( message.successful ){\n\t\t\ttry {\n\t\t\t\tvar socket  = this.getBestConnection(message.supportedConnectionTypes);\n\t\t\t\tthis.socket = new socket.Class( socket.url );\n\t\t\t\tthis.socket.onmessage = (message) => {\n\t\t\t\t\tif (message.data ){\n\t\t\t\t\t\tthis.onMessage(message.data);\n\t\t\t\t\t}\n\t\t\t\t}; \n\t\t\t\tthis.socket.onopen = () => {\n\t\t\t\t\tthis.socket.send( this.connect(message) );\t\n\t\t\t\t\tthis.notificationCenter.fire(\"onHandshake\", message, this.socket);\n\t\t\t\t};\n\t\t\t\tthis.socket.onerror = this.notificationCenter.listen(this, \"onError\");\n\t\t\t\tthis.socket.onclose = (err) => {\n\t\t\t\t\tdelete this.socket ;\n\t\t\t\t\tthis.notificationCenter.fire(\"onClose\",err );\n\t\t\t\t};\n\t\t\t}catch(e){\n\t\t\t\tthrow new Error (e);\n\t\t\t}\n\t\t}else{\n\t\t\tonError.call(this, message);\n\t\t}\t\n\t};\n\n\tvar reconnect  = function(){\n\t\tthis.reconnect = true;\n\t\tthis.notificationCenter.fire(\"reConnect\", this);\t\n\t};\n\n\tvar onConnectResponse = function(message){\n\t\tif ( message.successful ){\n\t\t\tthis.connected = true;\t\n\t\t\tthis.idconnection = message.clientId ;\n\t\t\tif ( message.advice ){\n\t\t\t\tfor (var ele in message.advice ){\n\t\t\t\t\tswitch(ele){\n\t\t\t\t\t\tcase \"reconnect\" :\n\t\t\t\t\t\t\tif (message.advice[ele] === \"retry\" ){\n\t\t\t\t\t\t\t\tif ( ! this.reconnect ){\n\t\t\t\t\t\t\t\t\tthis.notificationCenter.listen(this,\"onClose\", reconnect);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.notificationCenter.fire(\"onConnect\", message);\n\t\t}else{\n\t\t\tthis.connected = false;\t\n\t\t\tonError.call(this, message);\n\t\t}\n\t};\n\n\tvar onDisconnectResponse = function(message){\n\t\tif ( message.successful ){\n\t\t\tif (this.socket){\n\t\t\t\tthis.socket.close();\n\t\t\t\tthis.socket = null ;\n\t\t\t\tthis.notificationCenter.fire(\"onDisconnect\", message);\n\t\t\t}\n\t\t}else{\n\t\t\tonError.call(this, message);\n\t\t}\n\t};\n\n\tvar onSubscribeResponse = function(message){\n\t\tif ( message.successful ){\n\t\t\tthis.notificationCenter.fire(\"onSubscribe\", message);\n\t\t}else{\n\t\t\tonError.call(this, message);\n\t\t}\n\t};\n\n\tvar onUnsubscribeResponse = function(message){\n\t\tif ( message.successful ){\n\t\t\tthis.notificationCenter.fire(\"onUnsubscribe\", message);\n\t\t}else{\n\t\t\tonError.call(this, message);\n\t\t}\n\t};\n\n\tvar onError = function(message){\n\t\tif (message.error){\n\t\t\ttry{ \n\t\t\t\tswitch (stage.typeOf(message.error)) {\n\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\tvar res = message.error.split(\":\");\n\t\t\t\t\t\tvar code = res[0];\n\t\t\t\t\t\tvar arg = res[1];\n\t\t\t\t\t\tvar mess = res[2];\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\tif (message.error){\n\t\t\t\t\t\t\treturn onError.call(this, message.error);\n\t\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Error\":\n\t\t\t\t\t\tmessage.error = \"500::\"+message.error.message;\n\t\t\t\t\t\treturn onError.call(this, message.error);\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthrow new Error(\"Bad protocole error BAYEUX\");\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\treturn this.notificationCenter.fire(\"onError\", code, arg, mess);\n\t\t\t}catch(e){\n\t\t\t\tthrow new Error(\"Bad protocole error BAYEUX\"+ e);\n\t\t\t}\n\t\t}\n\t};\n\n\t/*\n \t *\tBAYEUX PROTOCOL\n \t *\n \t */\n\tconst bayeux = class bayeux {\n\t\t\n\t\tconstructor(url){\n\t\t\tthis.name = \"bayeux\" ;\t\n\t\t\tthis.notificationCenter = stage.notificationsCenter.create(this.settings, this);\n\t\t\tthis.url = url ; \n\t\t\tthis.socket = null;\n\t\t\tthis.connected = false;\n\t\t\tthis.request = {\n\t\t\t\tversion:\"1.0\"\n\t\t\t};\n\t\t}\n\n\t\tgetBestConnection (supportedConnectionTypes){\n\t\t\tif (this.url.protocol === \"https:\" || this.url.protocol === \"wss:\"){\n\t\t\t\tthis.url.protocol = \"wss:\";\n\t\t\t}else{\n\t\t\t\tthis.url.protocol = \"ws:\";\n\t\t\t}\n\t\t\tthis.socketType = \"WEBSOCKET\";\n\t\t\treturn {\n\t\t\t\tClass: window.WebSocket,\n\t\t\t\turl:this.url.protocol+\"//\"+this.url.host+this.url.requestUri\n\t\t\t};\t\n\t\t}\n\n\t\tbuild (obj){\n\t\t\tvar res = [];\n\t\t\tres.push(obj);\n\t\t\treturn res ;\n\t\t}\n\n\t\thandshake (){\n\t\t\tvar req = JSON.stringify( stage.extend({}, this.request , {\n\t\t\t\tchannel : \"/meta/handshake\",\n\t\t\t    minimumVersion: \"1.0\",\n\t\t\t    supportedConnectionTypes:clientsCapabilities\n\t\t\t}));\n\t\t\treturn this.send(req);\t\n\t\t}\n\n\t\tconnect (message){\n\t\t\treturn JSON.stringify({\n\t\t\t\tchannel: \"/meta/connect\",\n\t\t\t       clientId: message.clientId,\n\t\t\t       connectionType: this.socketType\n\t\t\t});\n\t\t}\n\n\t\tstopReConnect (message){\n\t\t\tthis.notificationCenter.unListen(\"onClose\", reconnect);\n\t\t}\n\n\t\tdisconnect (){\n\t\t\treturn JSON.stringify({\n\t\t\t\tchannel: \"/meta/disconnect\",\n\t\t\t       clientId: this.idconnection,\n\t\t\t});\t\n\t\t}\n\n\t\tsubscribe (name, data){\n\t\t\treturn JSON.stringify({\n\t\t\t\tchannel: \"/meta/subscribe\",\n\t\t\t       clientId: this.idconnection,\n\t\t\t       subscription: \"/service/\"+name,\n\t\t\t       data:data\n\t\t\t});\n\t\t}\n\n\t\tunSubscribe (name, clientId, data){\n\t\t\treturn JSON.stringify({\n\t\t\t\tchannel: \"/meta/unsubscribe\",\n\t\t\t       clientId: clientId,\n\t\t\t       subscription: \"/service/\"+name,\n\t\t\t       data:data\n\t\t\t});\n\t\t}\n\n\t\tsendMessage (service, data, clientId){\n\t\t\treturn JSON.stringify({\n\t\t\t\tchannel: \"/service/\"+service,\n\t\t\t       clientId: clientId,\n\t\t\t       id: new Date().getTime(),\n\t\t\t       data:data\n\t\t\t});\t\n\t\t}\n\n\t\tonMessage (message){\n\t\t\ttry {\n\t\t\t\tif (typeof message === \"string\" ){\n\t\t\t\t\tmessage = JSON.parse(message);\n\t\t\t\t}\n\t\t\t}catch (e){\n\t\t\t\tmessage.error = e ;\n\t\t\t\tonError.call(this, message);\n\t\t\t\treturn ;\n\t\t\t}\n\t\t\tswitch (message.channel){\n\t\t\t\tcase \"/meta/handshake\":\n\t\t\t\t\treturn onHandshakeResponse.call(this, message);\n\t\t\t\tcase \"/meta/connect\":\n\t\t\t\t\treturn onConnectResponse.call(this, message);\n\t\t\t\tcase \"/meta/disconnect\":\n\t\t\t\t\treturn onDisconnectResponse.call(this, message);\n\t\t\t\tcase \"/meta/subscribe\":\n\t\t\t\t\treturn onSubscribeResponse.call(this, message);\n\t\t\t\tcase \"/meta/unsubscribe\":\n\t\t\t\t\treturn onUnsubscribeResponse.call(this, message);\n\t\t\t\tdefault:\n\t\t\t\t\t// /some/channel\n\t\t\t\t\tthis.notificationCenter.fire(\"onMessage\", message);\n\t\t\t}\n\t\t}\n\n\t\tsend (data){\n\t\t\tif ( this.socket ){\n\t\t\t\treturn this.socket.send(data);\t\n\t\t\t}\n\t\t\treturn $.ajax({\n            \t\t\tmethod: 'POST',\n\t\t               cache:false,\n            \t\t       url: this.url.href ,\n\t\t               dataType:\"json\",\n\t\t               contentType:\"application/json\",\n\t\t               data : data,\t\t        \n\t\t\t       success:(data, type, xhr) => {\n\t\t\t\t       this.onMessage(data);\t\t\t\n\t\t\t       },\n            \t\t       error: (obj, type, message) => {\n\t\t\t\t       this.notificationCenter.fire('onError', obj, type, message);\n            \t\t       }\n        \t\t});\n\t\t}\n\t};\n\n\tstage.io.protocols.bayeux = bayeux ;\n\treturn bayeux ;\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/io/protocols/bayeux/bayeux.es6","module.exports =  function(stage){\n\n\t'use strict';\n\n\n\tvar defaultAparser = function(value, block){\n\t\tif ( value ){\n\t\t\treturn value ;\n\t\t}\n\t\treturn null ;\n\t};\n\n\tvar rtpmapParser = function(value, block){\n\t\t //a=rtpmap:<payload type> <encoding name>/<clock rate>[/<encoding parameters>]\n\t\tif ( value ){\n\t\t\tvar obj = {\n\t\t\t\tpayloadType\t\t: null,\n\t\t\t\tencodingName\t\t: null,\n\t\t\t\tclockRate\t\t: null,\n\t\t\t\tencodingParameters\t: null,\n\t\t\t\traw\t\t\t: value\n\t\t\t};\n\t\t\tvar res = value.split(\" \");\n\t\t\tfor (var i = 0 ; i< res.length ; i++){\n\t\t\t\tswitch (i){\n\t\t\t\t\tcase 0 :\n\t\t\t\t\t\tobj.payloadType = res[i] ;\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 1 :\n\t\t\t\t\t\tvar ret = res[i].split(\"/\");\n\t\t\t\t\t\tobj.encodingName = ret[0] ;\n\t\t\t\t\t\tif (ret[1]){\n\t\t\t\t\t\t\tobj.clockRate = ret[1];\t\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (ret[2]){\n\t\t\t\t\t\t\tobj.encodingParameters = ret[2] ;\n\t\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif ( ! ( obj.encodingName in block.rtpmap ) ){\n\t\t\t\tvar index = block.rtpmap.push(obj) ;\n\t\t\t\tblock.rtpmap[\"rtpmap_\"+obj.payloadType] = block.rtpmap[index-1] ;\n\t\t\t}\n\t\t\treturn obj ;\n\t\t}\n\t\treturn null;\n\t};\n\n\tvar candidateParser = function(value, block){\n\t\t/* a=candidate:0 1 UDP 2122252543 169.254.105.57 65488 typ host\t\n\t\t * a=candidate:6glsxoSzDfHGkyMz 1 UDP 2130706431 93.20.94.1 35796 typ host\n\t\t * a=candidate:2 1 UDP 1694498815 192.0.2.3 45664 typ srflx raddr 10.0.1.1 rport 8998\n\t\t * a=candidate:86628240 1 udp 2122260223 192.168.10.234 64435 typ host generation 0 network-id 3\n\t\t * \n\t\t * \n \t\t * \n \t\t *\n\t\t *   candidate-attribute   = \"candidate\" \":\" \n\t\t *\t   foundation SP \n\t\t *\t   component-id SP\n                 *         transport SP\n                 *         priority SP\n                 *         connection-address SP     ;from RFC 4566\n                 *         port         ;port from RFC 4566 SP \n                 *         cand-type     \n                 *          [SP rel-addr]\n                 *          [SP rel-port]\n                 *          *(SP extension-att-name SP\n                 *               extension-att-value)\n                 */               \n\t\tif ( value ){\n\t\t\t\n\t\t\tvar obj = {\n\t\t\t\tfoundation\t\t: null,\n\t\t\t\tcomponentId\t\t: null,\n\t\t\t\ttransport\t\t: null,\n\t\t\t\ttransportExt\t\t: null,\n\t\t\t\tpriority\t\t: null,\n\t\t\t\tconnectionAddress\t: null,\n\t\t\t\tport\t\t\t: null,\n\t\t\t\tcandidateType\t\t: null,\n\t\t\t\tremoteAddr\t\t: null,\n\t\t\t\tremotePort\t\t: null,\n\t\t\t\tgeneration\t\t: null,\n\t\t\t\tnetworkId\t\t: null,\n\t\t\t\traw\t\t\t: value\n\t\t\t};\n\t\t\tvar res = value.split(\" \");\n\t\t\tfor (var i = 0 ; i< res.length ; i++){\n\t\t\t\tswitch (i){\n\t\t\t\t\tcase 0 :\n\t\t\t\t\t\tobj.foundation = res[i] ;\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 1 :\n\t\t\t\t\t\tobj.componentId = res[i] ;\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2 :\n\t\t\t\t\t\tobj.transport = res[i] ;\n\t\t\t\t\t\tvar ret = res[i].split(\"/\");\n\t\t\t\t\t\tobj.transport = ret[0] ;\n\t\t\t\t\t\tif (ret[1]){\n\t\t\t\t\t\t\tobj.transportExt = ret[1];\t\n\t\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 3 :\n\t\t\t\t\t\tobj.priority = res[i] ;\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 4 :\n\t\t\t\t\t\tobj.connectionAddress = res[i] ;\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 5 :\n\t\t\t\t\t\tobj.port = res[i] ;\n\t\t\t\t\tbreak;\n\t\t\t\t\tdefault :\n\t\t\t\t\t\tswitch ( res[i] ){\n\t\t\t\t\t\t\tcase \"typ\" :\n\t\t\t\t\t\t\t\tobj.candidateType = res[i+1] ;\t\n\t\t\t\t\t\t\tbreak ;\n\t\t\t\t\t\t\tcase \"raddr\" :\n\t\t\t\t\t\t\t\tobj.remoteAddr = res[i+1] ;\n\t\t\t\t\t\t\tbreak ;\n\t\t\t\t\t\t\tcase \"rport\" :\n\t\t\t\t\t\t\t\tobj.remotePort = res[i+1] ;\n\t\t\t\t\t\t\tbreak ;\n\t\t\t\t\t\t\tcase \"generation\" :\n\t\t\t\t\t\t\t\tobj.generation = res[i+1] ;\n\t\t\t\t\t\t\tbreak ;\n\t\t\t\t\t\t\tcase \"network-id\" :\n\t\t\t\t\t\t\t\tobj.networkId = res[i+1] ;\n\t\t\t\t\t\t\tbreak ;\n\t\t\t\t\t\t}\n\t\t\t\t\tbreak;\t\n\t\t\t\t}\n\t\t\t}\n\t\t\tblock.candidates.push(obj);\n\t\t\treturn value ;\n\t\t}\n\t\treturn null;\n\t};\n\n\tvar aAttribute = {\n\t\t\"cat\"\t\t: defaultAparser,\n\t\t\"keywds\"\t: defaultAparser,\n\t\t\"tool\"\t\t: defaultAparser,\n\t\t\"ptime\"\t\t: defaultAparser,\n\t\t\"maxptime\"\t: defaultAparser,\n\t\t\"rtpmap\"\t: rtpmapParser,\n\t\t\"orient\"\t: defaultAparser,\n\t\t\"type\"\t\t: defaultAparser,\n\t\t\"charset\"\t: defaultAparser,\n\t\t\"sdplang\"\t: defaultAparser,\n\t\t\"lang\"\t\t: defaultAparser,\n\t\t\"framerate\"\t: defaultAparser,\n\t\t\"quality\"\t: defaultAparser,\n\t\t\"fmtp\"\t\t: defaultAparser,\n\t\t\"candidate\"\t: candidateParser\t\n\t};\n\t\n\tvar aAttributeDirection = {\n\t\t\"recvonly\"\t: defaultAparser,\n\t\t\"sendrecv\"\t: defaultAparser,\n\t\t\"sendonly\"\t: defaultAparser,\n\t\t\"inactive\"\t: defaultAparser\n\t};\n\n\t/*\n \t *\tSDP PROTOCOL\n \t *\n \t */\n\tvar parserSdp  = class parserSdp {\n\t\t\n\t\tconstructor(body){\n\t\t\tif ( ! body ){\n\t\t\t\tthrow new Error(\"SDP parser no data found !! \") ;\n\t\t\t}\n\t\t\t//this.line = body.split(\"\\n\");\n\t\t\t//this.nbLines = this.line.length ;\n\t\t\t//this.size = body.length ;\n\t\t\tthis.raw = body ;\n\t\t\tthis.blocks = [];\n\t\t\tthis.sessionBlock = null;\n\t\t\tthis.audioBlock = null;\n\t\t\tthis.videoBlock = null;\n\t\t\tthis.detectBlocks();\n\t\t\tthis.parseBlocks();\n\t\t}\n\n\t\tdetectBlocks (){\n\t\t\tvar line = this.raw.split(\"\\n\");\n\t\t\tvar nbLines = line.length ;\n\t\t\tvar first = 0 ;\n\t\t\tvar m = null ;\n\t\t\tfor (var i = 0 ; i< nbLines ; i++){\n\t\t\t\tvar res = line[i].split(\"=\");\n\t\t\t\tvar key = res[0].replace(/ |\\n|\\r/g,\"\") ;\n\t\t\t\tvar value = res[1] ;\n\t\t\t\tlet data = null ;\n\t\t\t\tlet size = null ;\n\t\t\t\tlet media = null ;\n\t\t\t\tlet type = null ;\n\t\t\t\tswitch(key){\n\t\t\t\t\tcase \"m\":\n\t\t\t\t\t\tif (first == 0 ){\n\t\t\t\t\t\t\tdata = line.slice(first, i);\n\t\t\t\t\t\t\tsize = data.length ;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tdata = line.slice(first+1, i);\n\t\t\t\t\t\t\tsize = data.length ;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet parseM = this.parseMline(m) ;\n\t\t\t\t\t\tif ( parseM ){\n\t\t\t\t\t\t\tmedia = parseM ;\t\n\t\t\t\t\t\t\ttype = parseM.media ;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tmedia = null ;\n\t\t\t\t\t\t\ttype = \"session\" ;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.blocks.push({\n\t\t\t\t\t\t\ttype\t\t: type,\n\t\t\t\t\t\t\tdirection\t: null,\n\t\t\t\t\t\t\t//start\t\t: first,\n\t\t\t\t\t\t\t//end\t\t: i,\n\t\t\t\t\t\t\tdata\t\t: data,\n\t\t\t\t\t\t\t//size\t\t: size,\n\t\t\t\t\t\t\tmedia\t\t: media,\n\t\t\t\t\t\t\tinformation\t: \"\",\n\t\t\t\t\t\t\tattributes\t: [],\n\t\t\t\t\t\t\tbandwidths\t: [],\n\t\t\t\t\t\t\tcandidates\t: [],\n\t\t\t\t\t\t\tconnection\t: null,\n\t\t\t\t\t\t\tencryption\t: null\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfirst = i ;\n\t\t\t\t\t\tm = value ; \t\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\t\n\t\t\tvar data = line.slice(first+1, nbLines) ;\n\t\t\tvar size = data.length ;\n\t\t\tvar media = null ;\n\t\t\tvar type = null ;\n\t\t\tvar parseM = this.parseMline(m) ;\n\t\t\tif ( parseM ){\n\t\t\t\tmedia = parseM ;\n\t\t\t\ttype = parseM.media ;\t\n\t\t\t}else{\n\t\t\t\tmedia = null ;\n\t\t\t\ttype = \"session\" ;\n\t\t\t}\n\t\t\tthis.blocks.push({\n\t\t\t\ttype\t\t: type,\n\t\t\t\tdirection\t: null,\n\t\t\t\t//start\t\t: first,\n\t\t\t\t//end\t\t: nbLines,\n\t\t\t\tdata\t\t: data,\n\t\t\t\t//size\t\t: size,\n\t\t\t\tmedia\t\t: media,\n\t\t\t\tinformation\t: \"\",\n\t\t\t\tattributes\t: [],\n\t\t\t\tbandwidths\t: [],\n\t\t\t\tcandidates\t: [],\n\t\t\t\tconnection\t: null,\n\t\t\t\tencryption\t: null\n\t\t\t});\n\t\t}\n\n\t\tparseMline (data){\n\t\t\t// RFC https://tools.ietf.org/html/rfc4566#section-5.14\n\t\t\t//=<media> <port>/<number of ports> <proto> <fmt> ...\n\t\t\tif ( data ){\n\t\t\t\tvar obj = {\n\t\t\t\t\tmedia\t: \"\",\n\t\t\t\t\tport\t: \"\",\n\t\t\t\t\tnbPort\t: 0,\n\t\t\t\t\tproto\t: \"\",\n\t\t\t\t\tfmt\t: [],\n\t\t\t\t\traw\t: data\n\t\t\t\t};\n\t\t\t\tvar res = data.split(\" \");\n\t\t\t\tfor (var i = 0 ; i< res.length ; i++){\n\t\t\t\t\tswitch (i){\n\t\t\t\t\t\tcase 0 :\n\t\t\t\t\t\t\tobj.media = res[i] ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 1 :\n\t\t\t\t\t\t\tvar ret = res[i].split(\"/\");\n\t\t\t\t\t\t\tobj.port = ret[0] ;\n\t\t\t\t\t\t\tif (ret[1]){\n\t\t\t\t\t\t\t\tobj.nbPort = ret[1];\t\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tobj.nbPort = 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 2 :\n\t\t\t\t\t\t\tobj.proto = res[i] ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tobj.fmt.push(res[i]);\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn obj ;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tparseAline (data, block){\n\t\t\t//a=<attribute>:<value>\n\t\t\tvar obj = {};\n\t\t\tif (  ! data ){\n\t\t\t\treturn obj ;\n\t\t\t}\n\t\t\tvar res = data.split(\":\");\n\t\t\tvar attribute = res[0].replace(/ |\\n|\\r/g,\"\");\n\t\t\tvar value = res[1] ;\n\t\t\tif (  aAttribute[attribute] ){\n\t\t\t\tobj[attribute] = aAttribute[attribute](value, block);\n\t\t\t}else{\n\t\t\t\tswitch (attribute){\n\t\t\t\t\tcase \"setup\":\n\t\t\t\t\t\tobj[attribute] = value;\t\n\t\t\t\t\t\tblock[\"setup\"] = value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif (  aAttributeDirection[attribute] ){\n\t\t\t\t\t\t\tvar ele = aAttributeDirection[attribute](attribute, block); \n\t\t\t\t\t\t\tobj[attribute] = ele;\t\n\t\t\t\t\t\t\tblock.direction = ele ; \n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tobj[attribute] = value ;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn obj ;\n\t\t}\n\n\t\tparseCline (data){\n\t\t\t//c=<nettype> <addrtype> <connection-address>\n\t\t\tif ( data ){\n\t\t\t\tvar obj = {\n\t\t\t\t\tnettype\t\t: null,\n\t\t\t\t\taddrtype\t: null,\n\t\t\t\t\taddress\t\t: null,\n\t\t\t\t\traw\t\t: data\n\t\t\t\t};\n\t\t\t\tvar res = data.split(\" \");\n\t\t\t\tfor (var i = 0 ; i< res.length ; i++){\n\t\t\t\t\tswitch (i){\n\t\t\t\t\t\tcase 0 :\n\t\t\t\t\t\t\tobj.nettype = res[i] ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 1 :\n\t\t\t\t\t\t\tobj.addrtype = res[i] ;\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 2 :\n\t\t\t\t\t\t\tobj.address = res[i] ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn obj ;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tparseOline (data){\n\t\t\t//o=<username> <sess-id> <sess-version> <nettype> <addrtype> <unicast-address>\n\t\t\tif ( data ){\n\t\t\t\tvar obj = {\n\t\t\t\t\tusername\t\t: null,\n\t\t\t\t\tsessId\t\t\t: null,\n\t\t\t\t\tsessVersion\t\t: null,\n\t\t\t\t\tnettype\t\t\t: null,\n\t\t\t\t\taddrtype\t\t: null,\n\t\t\t\t\tunicastAddr\t\t: null,\n\t\t\t\t\traw\t\t\t: data\n\t\t\t\t};\n\t\t\t\tvar res = data.split(\" \");\n\t\t\t\tfor (var i = 0 ; i< res.length ; i++){\n\t\t\t\t\tswitch (i){\n\t\t\t\t\t\tcase 0 :\n\t\t\t\t\t\t\tobj.username = res[i] ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 1 :\n\t\t\t\t\t\t\tobj.sessId = res[i] ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 2 :\n\t\t\t\t\t\t\tobj.sessVersion = res[i] ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 3 :\n\t\t\t\t\t\t\tobj.nettype = res[i] ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 4 :\n\t\t\t\t\t\t\tobj.addrtype = res[i] ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 5 :\n\t\t\t\t\t\t\tobj.unicastAddr = res[i] ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn obj ;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\t/*\n \t \t *\tTIME DESCRIPTION\n \t \t */\n\t\tparseTline (data){\n\t\t\t//t=<start-time> <stop-time>\n\t\t\tif ( data ){\n\t\t\t\tvar obj = {\n\t\t\t\t\tstart\t\t: null,\n\t\t\t\t\tstop\t\t: null,\n\t\t\t\t\traw\t\t: data\n\t\t\t\t};\n\t\t\t\tvar res = data.split(\" \");\n\t\t\t\tfor (var i = 0 ; i< res.length ; i++){\n\t\t\t\t\tswitch (i){\n\t\t\t\t\t\tcase 0 :\n\t\t\t\t\t\t\tobj.start = res[i] ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 1 :\n\t\t\t\t\t\t\tobj.stop = res[i] ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn obj ;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tparseRline (data){\n\t\t\t//r=<repeat interval> <active duration> <offsets from start-time>\n\t\t\tif ( data ){\n\t\t\t\tvar obj = {\n\t\t\t\t\tinterval\t: null,\n\t\t\t\t\tduration\t: null,\n\t\t\t\t\toffsets\t\t: null,\n\t\t\t\t\traw\t\t: data\n\t\t\t\t};\n\t\t\t\tvar res = data.split(\" \");\n\t\t\t\tfor (var i = 0 ; i< res.length ; i++){\n\t\t\t\t\tswitch (i){\n\t\t\t\t\t\tcase 0 :\n\t\t\t\t\t\t\tobj.interval = res[i] ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 1 :\n\t\t\t\t\t\t\tobj.duration = res[i] ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 2 :\n\t\t\t\t\t\t\tobj.offsets = res[i] ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn obj ;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\t/** BLOCK MEDIA\n \t \t *    Media description, if present\n\t \t *  m=  (media name and transport address)\n\t \t *  i= (media title)\n\t \t *  c= (connection information -- optional if included at\n\t \t *     session level)\n\t \t *  b= (zero or more bandwidth information lines)\n\t \t *  k= (encryption key)\n\t \t *  a= (zero or more media attribute lines)\n\t \t */\n\t\tblockMediaParser ( block ){\n\t\t\tblock[\"rtpmap\"] = [] ;\n\t\t\tfor (var j = 0 ; j < block.data.length ; j++){ \n\t\t\t\tvar res = block.data[j].split(\"=\");\n\t\t\t\tvar key = res[0].replace(/ |\\n|\\r/g,\"\") ;\n\t\t\t\tvar value = res[1] ;\t\n\t\t\t\tswitch(key){\n\t\t\t\t\tcase \"a\" :\n\t\t\t\t\t\tblock.attributes.push( this.parseAline(value, block ) ) ;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"c\":\n\t\t\t\t\t\tblock.connection = this.parseCline(value) ;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"i\" :\n\t\t\t\t\t\tblock.information = value ;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"b\" :\n\t\t\t\t\t\tblock.bandwidths.push(value);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"k\" :\n\t\t\t\t\t\tblock.encryption = value ;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn block ;\n\t\t}\n\n\t\t/*  BLOCK SESSION\n \t \t *    session description\n         \t *  v=  (protocol version)\n         \t *  o=  (originator and session identifier)\n         \t *  s=  (session name)\n         \t *  i= (session information)\n         \t *  u= (URI of description)\n         \t *  e= (email address)\n         \t *  p= (phone number)\n         \t *  c= (connection information -- not required if included in\n         \t *     all media)\n         \t *  b= (zero or more bandwidth information lines)\n         \t *     One or more time descriptions (\"t=\" and \"r=\" lines; see below)\n         \t *  z= (time zone adjustments)\n         \t *  k= (encryption key)\n         \t *  a= (zero or more session attribute lines)\n         \t *     Zero or more media descriptions\n\t \t */\n\t\tblockSessionParser (block){\n\t\t\tblock[\"protocol\"] = null ;\n\t\t\tblock[\"originator\"] = null ;\n\t\t\tblock[\"timeZone\"] = null ;\n\t\t\tblock[\"sessionName\"] = null ;\n\t\t\tblock[\"originator\"] = null ;\n\t\t\tblock[\"protocol\"] = null ;\n\t\t\tblock[\"uri\"] = null ;\n\t\t\tblock[\"phoneNumber\"] = null ;\n\t\t\tblock[\"email\"] = null ;\n\t\t\tblock[\"timeDescription\"] = null;\n\t\t\tblock[\"timeRepeat\"] = null;\n\n\t\t\tfor (var j = 0 ; j < block.data.length ; j++){ \n\t\t\t\tvar res = block.data[j].split(\"=\");\n\t\t\t\tvar key = res[0].replace(/ |\\n|\\r/g,\"\") ;\n\t\t\t\tvar value = res[1] ;\t\n\t\t\t\tswitch(key){\n\t\t\t\t\tcase \"v\" :\n\t\t\t\t\t\tblock.protocol = value ;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"o\" :\n\t\t\t\t\t\tblock.originator = this.parseOline( value ) ;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"s\" :\n\t\t\t\t\t\tblock.sessionName = value ;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"u\" :\n\t\t\t\t\t\tblock.uri = value ;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"e\" :\n\t\t\t\t\t\tblock.email = value ;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"p\" :\n\t\t\t\t\t\tblock.phoneNumber = value ;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"z\" :\n\t\t\t\t\t\tblock.timeZone = value ;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"a\" :\n\t\t\t\t\t\tblock.attributes.push( this.parseAline(value, block) ) ;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"c\":\n\t\t\t\t\t\tblock.connection = this.parseCline(value) ;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"i\" :\n\t\t\t\t\t\tblock.information = value ;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"b\" :\n\t\t\t\t\t\tblock.bandwidths.push(value);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"k\" :\n\t\t\t\t\t\tblock.encryption = value ;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t// TIME DESCRIPTION\n\t\t\t\t\tcase \"t\" :\n\t\t\t\t\t\tblock.timeDescription = this.parseTline(value);\n\t\t\t\t\t\tbreak ;\n\t\t\t\t\tcase \"r\" :\n\t\t\t\t\t\tblock.timeRepeat = this.parseRline(value);\n\t\t\t\t\t\tbreak ;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn block ;\n\t\t}\n\n\t\tparseBlocks (){\n\t\t\tfor (var i = 0 ; i< this.blocks.length ; i++){\n\t\t\t\tswitch( this.blocks[i].type ){\n\t\t\t\t\tcase \"session\" :\n\t\t\t\t\t\tthis.sessionBlock = this.blockSessionParser( this.blocks[i] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"audio\" :\n\t\t\t\t\t\tthis.audioBlock = this.blockMediaParser( this.blocks[i] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"video\" :\n\t\t\t\t\t\tthis.videoBlock = this.blockMediaParser( this.blocks[i] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tstage.io.protocols.sdp = parserSdp ;\n\t\n\treturn parserSdp ;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/io/protocols/sip/sdp.es6","module.exports =  function(stage){\n\n\t'use strict';\n\n\n\tvar byteToHex = function (byte) {\n\t\treturn ('0' + byte.toString(16)).slice(-2);\n\t}\n\n\tvar generateId= function(len) {\n\t\tvar arr = new Uint8Array((len || 40) / 2);\n\t\twindow.crypto.getRandomValues(arr);\n\t\treturn [].map.call(arr, byteToHex).join(\"\");\n\t}\n\n\t/*\n \t *\n \t *\tDIGEST authenticate\n \t *\n \t *\n \t */\n\tvar stringify = function(value){\n\t\treturn '\"'+value+'\"';\n\t};\n\n\tvar reg =/^([^=]+)=(.+)$/;\n\tvar parserAuthenticate = function(str){\n\t\tvar ret = str.replace(/\"/g,\"\");\n\t\tret = ret.replace(/Digest /g,\"\");\n\t\tvar head = ret.split(\",\");\n\t\tvar obj = [];\n\t\tfor (var i= 0 ; i < head.length ; i++){\n\t\t\tvar res = reg.exec(head[i]);\n\t\t\tvar key = res[1].replace(/ |\\n|\\r/g,\"\");\n\t\t\tif (res && key){\n\t\t\t\tobj[key] = res[2];\n\t\t\t}\n\t\t}\n\t\treturn obj;\n\t};\n\n\tvar MD5 = stage.crypto.md5.hex_md5_noUTF8 ;\n\t//var BASE64 = stage.crypto.base64.encode ;\n\n\tvar digest = {\n\t\tgenerateA1:function(username, realm, password, nonce, cnonce){\n\t\t\tvar A1 = null ;\n\t\t\tif (cnonce){\n\t\t\t\tA1 = username + \":\" + realm + \":\" + password + \":\" + nonce+ \":\" + cnonce ;\n\t\t\t}else{\n\t\t\t\tA1 = username + \":\" + realm + \":\" + password ;//+ \":\" + nonce ;\n\t\t\t}\n\t\t\t//console.log(A1)\n\t\t\treturn MD5(A1);\n\t\t},\n\t\tgenerateA2:function(method, uri, entity_body, qop){\n\t\t\tvar A2 = \"\";\n\t\t\tif( ! qop || qop ===  \"auth\"){\n\t\t\t\tA2 = method +\":\" + uri ;\n\t\t\t} else if(qop === \"auth-int\"){\n\t\t\t\tif( entity_body ){\n\t\t\t\t\tvar entity = MD5(entity_body);\n\t\t\t\t\tA2 = method + \":\" + uri + \":\" + entity ;\n\t\t\t\t}else{\n\t\t\t\t\tA2 = method + \":\" + uri + \":\" + \"d41d8cd98f00b204e9800998ecf8427e\" ;\n\t\t\t\t}\n\t\t\t}\n\t\t\t//console.log(A2)\n\t\t\treturn MD5(A2);\n\t\t},\n\t\tgenerateResponse:function(A1, nonce, noncecount, cnonce, qop, A2){\n\t\t\tvar res = \"\";\n\t\t\tif(qop === \"auth\" || qop === \"auth-int\"){\n\t\t\t\tres = A1 + \":\" + nonce +\":\" + noncecount +\":\" + cnonce +\":\" + qop + \":\" + A2 ;\n\t\t\t}else{\n\t\t\t\tres = A1 + \":\" + nonce + \":\" + A2 ;\n\t\t\t}\n\t\t\t//console.log(res)\n\t\t\treturn MD5(res);\n\t\t}\n\t};\n\n\n\tvar authenticate  = class authenticate {\n\n\t\tconstructor(dialog, username, password){\n\n\t\t\tthis.dialog = dialog ;\n\t\t\tthis.userName = username ;\n\t\t\tthis.password = password;\n\t\t\tthis.uri = \"sip:\" +this.dialog.sip.server ;\n\t\t\tthis.realm = \"nodefony.com\";\n\t\t\tthis.nonce = null;\n\t\t\tthis.cnonce =null;\n\t\t\tthis.nonceCount = null;\n\t\t\tthis.qop =null;\n\t\t\tthis.algorithm = null;\n\t\t\tthis.entity_body = null;\n\t\t}\n\n\t\tregister (message, type){\n\t\t\t//console.log(\"AUTH REGISTER\")\n\t\t\t//console.log(message);\n\t\t\tvar head = message.authenticate ;\n\t\t\tif ( ! head ){\n\t\t\t\thead = this.dialog.authenticate  ;\n\t\t\t}else{\n\t\t\t\tthis.dialog.authenticate = head ;\n\t\t\t}\n\t\t\tthis.realm = head.realm\t;\n\t\t\tthis.nonce = head.nonce;\n\t\t\tthis.cnonce = head.cnonce;\n\t\t\tthis.qop = head.qop;\n\t\t\tthis.algorithm = head.Digestalgorithm ? head.Digestalgorithm : \"md5\" ;\n\t\t\tif ( message.rawBody ){\n\t\t\t\tthis.entity_body = message.rawBody;\n\t\t\t}\n\t\t\tswitch (this.algorithm.toLowerCase()){\n\t\t\t\tcase \"md5\" :\n\t\t\t\t\tthis.response = this.digestMD5(message.method);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tvar method =\"\";\n\t\t\tif ( ! type ){\n\t\t\t\tmethod = \"Authorization: \";\n\t\t\t}else{\n\t\t\t\tif ( type === \"proxy\"){\n\t\t\t\t\tmethod = \"Proxy-Authorization: \";\n\t\t\t\t}else{\n\t\t\t\t\tmethod = \"Authorization: \";\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar line = \"Digest username=\" +stringify(this.userName)+\", realm=\"+stringify(this.realm)+ \", nonce=\" + stringify(this.nonce) +\", uri=\"+stringify(this.uri)+\", algorithm=\"+this.algorithm+\", response=\"+stringify(this.response);\n\t\t\tthis.lineResponse = method + line ;\n\n\t\t\t//var transac = message.transaction ;\n\t\t\tvar transac = this.dialog.createTransaction(message.transaction.to);\n\t\t\tthis.dialog.tagTo = null ;\n\t\t\t//this.dialog.sip.fire(\"onInitCall\", this.dialog.toName, this.dialog, transac);\n\t\t\tvar request = transac.createRequest(this.dialog.body, this.dialog.bodyType);\n\t\t\trequest.header.response=this.lineResponse;\n\t\t\trequest.send();\n\t\t\treturn transac ;\n\n\t\t}\n\n\t\tdigestMD5 (method){\n\t\t\tvar A1 = digest.generateA1(this.userName, this.realm, this.password, this.nonce, this.cnonce );\n\t\t\tvar A2 = digest.generateA2(method, this.uri, this.entity_body, this.qop );\n\t\t\treturn  digest.generateResponse(A1, this.nonce, this.nonceCount, this.cnonce, this.qop, A2);\n\t\t}\n\t};\n\n\n\t/*\n \t *\n \t * CLASS PARSER HEADER SIP\n \t *\n \t *\n \t */\n\t//var regContact = /.*<(sip:.*)>(.*)|.*<(sips:.*)>(.*)/g;\n\tvar regHeaders = {\n\t\tline:/\\r\\n|\\r|\\n/,\n\t\theadName:/: */,\n\t\tAllow:/, */,\n\t\tVia:/; */,\n\t\tCallId:/^(.*)@.*$/,\n\t\talgorithm:/= */,\n\t\tfromTo:/<sip:(.*)@(.*)>/,\n\t\tfromToG:/(.*)?<sip:(.*)@(.*)>/,\n\t\tcontact: /.*<(sips?:.*)>(.*)?$/\n\t};\n\n\tvar parsefromTo = function(type, value){\n\t\ttry {\n\t\t\tvar sp = value.split(\";\");\n\t\t\tthis.message[type+\"Tag\"] = null;\n\t\t\tvar res = sp.shift();\n\t\t\tvar res2 = regHeaders.fromTo.exec(res);\n\t\t\t//console.log(regHeaders.fromToG.exec(res))\n\t\t\t//console.log(res2)\n\t\t\tthis.message[type+\"Name\"] = (res2.length > 2)  ? res2[1].replace(/ |\\n|\\r/g,\"\").replace(/\"/g,\"\") : \"\" ;\n \t        \tthis.message[type] =  res2[1].replace(\" \",\"\") +\"@\"+ res2[2].replace(/ |\\n|\\r/g,\"\") ;\n\t\t\tvar ret = regHeaders.fromToG.exec(res) ;\n\t\t\tif ( ret && ret[1] ){\n\t\t\t\tvar displayName =  ret[1].replace(/\"/g,\"\")  ;\n\t\t\t\t//this.message[type+\"Name\"] = displayName ;\n\t\t\t\tthis.message[type+\"NameDisplay\"] = displayName ;\n\t\t\t\t//console.log(displayName)\n\t\t\t}\n\n\t\t\tfor (var i = 0 ; i < sp.length ;i++){\n\t\t\t\tvar res3 = sp[i].split(\"=\");\n\t\t\t\tif(res3[0].replace(/ |\\n|\\r/g,\"\") === \"tag\"){\n\t\t\t\t\tthis.message[type+\"Tag\"] = res3[1] ;\n\t\t\t\t}else{\n\t\t\t\t\tthis.message[res3[0]] = res3[1] ;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn value;\n\t\t}catch(e){\n\t\t\tthrow e ;\n\t\t}\n\t};\n\n\n\tvar headerSip  = class headerSip {\n\n\t\tconstructor(message, header){\n\t\t\tthis.rawHeader = {} ;\n\t\t\tthis.message = message;\n\t\t\tthis.method = null;\n\t\t\tthis.firstLine = null;\n\t\t\tthis.branch = null ;\n\t\t\tthis.Via = [];\n\t\t\tthis.routes = [];\n\t\t\tthis.recordRoutes = [];\n\t\t\tif (header && typeof header === \"string\"){\n\t\t\t\ttry {\n\t\t\t\t\tthis.parse(header);\n\t\t\t\t}catch(e){\n\t\t\t\t\t//throw new Error(\"PARSE ERROR MESSAGE SIP\", 500);\n\t\t\t\t\tthrow e ;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tparse (header){\n\t\t\tvar tab = header.split(regHeaders.line);\n\t\t\tvar type = tab.shift();\n\t\t\tthis.firstLine = type.split(\" \");\n\t\t\t$.each(tab, (Index, ele) => {\n\t\t\t\tvar res = regHeaders.headName.exec(ele);\n\t\t\t\tvar size = res[0].length;\n\t\t\t\tvar headName = res.input.substr(0,res.index);\n\t\t\t\tvar headValue = res.input.substr(res.index+size);\n\t\t\t\tthis.rawHeader[headName] = headValue ;\n\t\t\t\tvar func = \"set\"+headName;\n\t\t\t\tif (func === \"setVia\"){\n\t\t\t\t\tvar index = this.Via.push(headValue);\n\t\t\t\t\tthis[headName][index-1] = this[func](headValue, ele);\n\t\t\t\t}else{\n\t\t\t\t\tthis[headName] = headValue;\n\t\t\t\t\tif (this[func]){\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tthis[headName] = this[func](headValue);\n\t\t\t\t\t\t}catch(e){\n\t\t\t\t\t\t\tthis.message.sip.logger(\"Parse : \" + headName , \"ERROR\");\n\t\t\t\t\t\t\tthrow e ;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (!this[\"Content-Type\"]){\n\t\t\t\tthis.message.contentType = null;\n\t\t\t}else{\n\t\t\t\tthis.message.contentType = this[\"Content-Type\"] ;\n\t\t\t}\n\t\t}\n\n\t\tsetFrom (value){\n\t\t\tparsefromTo.call(this, \"from\", value);\n\t\t\treturn value;\n\t\t}\n\n\t\tsetTo (value){\n\t\t\tparsefromTo.call(this, \"to\", value);\n\t\t\treturn value;\n\t\t}\n\n\t\t\"setWWW-Authenticate\" (value){\n\t\t\tthis.message.authenticate = parserAuthenticate(value);\n\t\t\t/*var ele ={};\n\t\t  \tvar res = value.split(\",\")\n\t\t  \tfor (var i=0 ; i < res.length ;i++){\n\t\t  \tvar ret = regHeaders.algorithm.exec(res[i]);\n\t\t  \tvar size = ret[0].length;\n\t\t  \tvar headName = ret.input.substr(0,ret.index).replace(\" \",\"\");\n\t\t  \tvar headValue = ret.input.substr(ret.index+size).replace(/\"/g,\"\");\n\t\t  \tele[headName] = headValue.replace(/\"/g,\"\");\n\t\t  \t}\n\t\t  \tthis.message.authenticate = ele ;*/\n\t\t\treturn value;\n\t\t}\n\n\t\t\"setProxy-Authenticate\" (value){\n\t\t\tthis.message.authenticate = parserAuthenticate(value);\n\t\t\treturn value;\n\t\t}\n\n\t\t\"setRecord-Route\" (value){\n\t\t\tthis.recordRoutes.push(value);\n\t\t\treturn value ;\n\t\t}\n\n\t\t\"setRoute\" (value){\n\t\t\tthis.routes.push(value);\n\t\t\treturn value ;\n\t\t}\n\n\t\tsetDate (value){\n\t\t\ttry{\n\t\t\t\tthis.message.date = new Date(value);\n\t\t\t}\n\t\t\tcatch(e){\n\t\t\t\tthis.message.date = value;\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\n\t\t\"setCall-ID\" (value){\n\t\t\tthis.message.callId = value ;\n\t\t\treturn value ;\n\t\t\t/*this.callIdRaw = value ;\n\t\t  \tvar res = regHeaders.CallId.exec(value);\n\t\t  \tif (res){\n\t\t  \tthis.message.callId =res[1];\n\t\t  \treturn res[1];\n\n\t\t  \t}else{\n\t\t  \tthis.message.callId =value;\n\t\t  \treturn value;\n\t\t  \t}*/\n\t\t}\n\n\t\tsetCSeq (value){\n\t\t\tvar res = value.split(\" \");\n\t\t\tthis.message.cseq = parseInt(res[0],10);\n\t\t\tthis.message.method = res[1];\n\t\t\treturn value;\n\t\t}\n\n\t\tsetContact (value){\n\t\t\tvar parseValue = regHeaders.contact.exec(value) ;\n\t\t\tif ( parseValue ){\n\t\t\t\tthis.message.contact = parseValue[1] ;\n\t\t\t\tif ( parseValue[2] ){\n\t\t\t\t\tvar clean = parseValue[2].replace(/^;(.*)/,\"$1\")\n\t\t\t\t\tvar sp = clean.split(\";\");\n\t\t\t\t\tfor (var i = 0 ; i < sp.length ;i++){\n\t\t\t\t\t\tvar res = sp[i].split(\"=\");\n\t\t\t\t\t\tif ( ! res ){\n\t\t\t\t\t\t\tcontinue ;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar name = res[0].toLowerCase();\n\t\t\t\t\t\tif ( name === \"expires\" ){\n\t\t\t\t\t\t\tthis[\"contact-\"+name] = res[1];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthrow new Error (\"Contact parse error : \" + value );\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\n\t\tsetAllow (value){\n\t\t\tif (value ){\n\t\t\t\treturn this.Allow.split(regHeaders.Allow);\n\t\t\t}else{\n\t\t\t\treturn this.Allow;\n\t\t\t}\n\t\t}\n\n\t\tsetSupported (value){\n\t\t\tif (value ){\n\t\t\t\treturn this.Supported.split(regHeaders.Allow);\n\t\t\t}else{\n\t\t\t\treturn this.Supported;\n\t\t\t}\n\t\t}\n\n\t\tsetVia (value,raw){\n\t\t\tif (value){\n\t\t\t\tvar res = value.split(regHeaders.Via);\n\t\t\t\tvar obj = {\n\t\t\t\t\tline :Array.prototype.shift.call(res),\n\t\t\t\t\traw:raw\n\t\t\t\t};\n\t\t\t\tfor (var i = 0 ; i< res.length ;i++){\n\t\t\t\t\tvar tab = res[i].split('=');\n\t\t\t\t\tif ( tab ){\n\t\t\t\t\t\tif (tab[0] === \"branch\"){\n\t\t\t\t\t\t\tif ( ! this.branch ){\n\t\t\t\t\t\t\t\tthis.branch = tab[1];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tobj[tab[0]] = tab[1];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn obj;\n\t\t\t}else{\n\t\t\t\treturn value;\n\t\t\t}\n\t\t}\n\t};\n\n\n\t/*\n \t *\n \t * CLASS PARSER BODY SIP\n \t *\n \t *\n \t *\n \t */\n\tvar bodySip  = class bodySip {\n\n\t\tconstructor(message, body){\n\t\t\tthis.message = message ;\n\t\t\tthis.message.rawBody = body ;\n\t\t\tthis.size = this.message.contentLength;\n\t\t\tif ( this.size !== body.length ){\n\t\t\t\tthrow new Error(\"BAD SIZE SIP BODY \");\n\t\t\t}\n\t\t\tif (body){\n\t\t\t\tthis.parse(this.message.contentType, body);\n\t\t\t}\n\t\t}\n\n\t\tparse (type, body){\n\t\t\tswitch (type){\n\t\t\t\tcase \"application/sdp\":\n\t\t\t\t\tthis.sdpParser(body);\n\t\t\t\tbreak;\n\t\t\t\tcase \"application/dtmf-relay\":\n\t\t\t\t\tthis.dtmfParser(body);\n\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.body = body;\n\t\t\t}\n\t\t}\n\n\t\tsdpParser (body){\n\t\t\t// Parser SDP\n\t\t\tthis.body = body || \"\" ;\n\t\t\tif ( ! body ){\n\t\t\t\tthis.sdp  = null ;\n\t\t\t}else{\n\t\t\t\ttry {\n\t\t\t\t\tthis.sdp = new stage.io.protocols.sdp(body);\n\t\t\t\t\t//console.log(this.sdp)\n\t\t\t\t}catch(e){\n\t\t\t\t\tthrow e ;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tdtmfParser (body){\n\t\t\t// Parser DTMF\n\t\t\tthis.body = body || \"\" ;\n\t\t\tif ( ! body ){\n\t\t\t\tthis.dtmf  = null ;\n\t\t\t}else{\n\t\t\t\t// Parser dtmf\n\t\t\t\tvar obj = {};\n\t\t\t\tvar line = body.split(\"\\n\");\n\t\t\t\tfor (var i = 0 ; i< line.length ; i++){\n\t\t\t\t\tvar res = line[i].split(\"=\");\n\t\t\t\t\tobj[res[0].replace(/ |\\n|\\r/g,\"\")] = res[1];\n\t\t\t\t}\n\t\t\t\tthis.dtmf = obj ;\n\t\t\t}\n\t\t}\n\t};\n\n\n\t/*\n \t *\n \t * CLASS REQUEST\n \t *\n \t *\n \t *\n \t */\n\tvar endline = \"\\r\\n\";\n\tvar endHeader = \"\\r\\n\\r\\n\";\n\n\tvar sipRequest  = class sipRequest {\n\n\t\tconstructor(transaction, bodyMessage, typeBody){\n\t\t\tthis.transaction = transaction;\n\t\t\tthis[\"request-port\"] = this.transaction.dialog.sip.serverPort ;\n\n\t\t\tthis.type = \"request\";\n\t\t\tthis.requestLine ={};\n\t\t\tthis.buildRequestline();\n\n\t\t\tthis.header = {};\n\t\t\tthis.buildHeader();\n\n\t\t\tthis.buildBody(bodyMessage || \"\", typeBody) ;\n\t\t}\n\n\t\tbuildRequestline (){\n\t\t\tthis.requestLine.method = this.transaction.method.toUpperCase();\n\t\t\tthis.requestLine.version = this.transaction.dialog.sip.version ;\n\t\t}\n\n\t\tgetRequestline (uri){\n\t\t\tswitch (this.transaction.method){\n\t\t\t\tcase \"REGISTER\":\n\t\t\t\t\tthis[\"request-uri\"] = \"sip:\"+this.transaction.dialog.sip.server ;\n\t\t\t\t\treturn  this.transaction.method + \" \"+ this[\"request-uri\"] + \" \" + this.requestLine.version + endline ;\n\t\t\t\tcase \"INVITE\":\n\t\t\t\tcase \"BYE\":\n\t\t\t\tcase \"NOTIFY\":\n\t\t\t\tcase \"INFO\":\n\t\t\t\tcase \"CANCEL\":\n\t\t\t\tcase \"ACK\":\n\t\t\t\t\tthis[\"request-uri\"] = this.transaction.dialog[\"request-uri\"]  ;\n\t\t\t\t\treturn this.transaction.method + \" \" + this[\"request-uri\"] +\" \" + this.requestLine.version + endline ;\n\t\t\t}\n\t\t}\n\n\t\tbuildHeader (){\n\t\t\t//FIXE ME RPORT IN VIA PARSER\n\t\t\t//console.log(this.transaction.dialog.sip.rport)\n\n\t\t\tvar rport = this.transaction.dialog.sip.rport ;\n\t\t\tvar ip = this.transaction.dialog.sip.publicAddress;\n\n\t\t\tthis.header.via  = \"Via: \"+this.transaction.dialog.sip.via+\";\"+\"branch=\"+this.transaction.branch;\n\t\t\t//if ( rport ){\n\t\t\t\t//this.header.via  = \"Via: \"+this.transaction.dialog.sip.version+\"/\"+this.transaction.dialog.sip.settings.transport+\" \" +ip+\":\"+rport+\";\"+\"branch=\"+this.transaction.branch;\n\t\t\t//}else{\n\t\t\t\t//this.header.via  = \"Via: \"+this.transaction.dialog.sip.version+\"/\"+this.transaction.dialog.sip.settings.transport+\" \" +ip+\":\"+this[\"request-port\"]+\";\"+\"branch=\"+this.transaction.branch;\n\t\t\t//}\n\t\t\tthis.header.cseq = \"CSeq: \"+this.transaction.dialog.cseq + \" \" + this.transaction.method;\n\n\t\t\tthis.header.from = \"From: \" +this.transaction.dialog.from + \";tag=\"+this.transaction.dialog.tagFrom ;\n\n\t\t\tvar tagTo = this.transaction.dialog.tagTo ? \";tag=\"+this.transaction.dialog.tagTo : \"\" ;\n\t\t\tthis.header.to = \"To: \"+ this.transaction.to  + tagTo;\n\n\t\t\tthis.header.callId = \"Call-ID: \" + this.transaction.dialog.callId;\n\t\t\tthis.header.expires = \"Expires: \" + this.transaction.dialog.expires;\n\t\t\tthis.header.maxForward = \"Max-Forwards: \" + this.transaction.dialog.maxForward;\n\t\t\tthis.header.userAgent = \"User-Agent: \" + this.transaction.dialog.sip.settings.userAgent;\n\n\t\t\tthis.header.contact = \"Contact: \"+this.transaction.dialog.contact;\n\n\t\t\tif (  this.transaction.dialog.routes && this.transaction.dialog.routes.length){\n\t\t\t\tthis.header.routes = [];\n\t\t\t\tfor (var i = this.transaction.dialog.routes.length - 1 ; i >= 0 ; i--){\n\t\t\t\t\tthis.header.routes.push( \"Route: \"+ this.transaction.dialog.routes[i] ) ;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tgetHeader (){\n\t\t\tvar head = \"\";\n\t\t\tfor (var line in this.header ){\n\t\t\t\tswitch ( stage.typeOf( this.header[line] ) ){\n\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\thead+=this.header[line]+endline;\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"array\":\n\t\t\t\t\t\tfor (var i = 0 ; i <  this.header[line].length ; i++){\n\t\t\t\t\t\t\thead+=this.header[line][i] + endline ;\n\t\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn head ;\n\t\t}\n\n\t\tbuildBody (body, type){\n\t\t\tthis.header.contentLength  = \"Content-Length: \" + body.length ;\n\t\t\tif (type){\n\t\t\t\tthis.header.contentType  = \"Content-Type: \" + type ;\n\t\t\t}\n\t\t\tthis.body = body || \"\" ;\n\t\t}\n\n\t\tgetBody (){\n\t\t\treturn this.body ;\n\t\t}\n\n\t\tgetMessage (){\n\t\t\t//console.log(this.getRequestline() + this.getHeader() + endline + this.getBody())\n\t\t\t//console.log(this.getRequestline() + this.getHeader() + endline + this.getBody())\n\t\t\treturn this.rawResponse = this.getRequestline() + this.getHeader() + endline + this.getBody() ;\n\t\t}\n\n\t\tsend (){\n\t\t\treturn this.transaction.send( this.getMessage() );\n\t\t}\n\t};\n\n\n\t/*\n \t *\n \t * CLASS RESPONSE\n \t *\n \t *\n \t *\n \t */\n\tvar codeMessage = {\n\t\t200\t:\t\"OK\"\n\t};\n\n\tvar sipResponse  = class sipResponse {\n\n\t\tconstructor(message, code ,messageCode, bodyMessage, typeBody){\n\t\t\tthis.message = message ;\n\t\t\tthis.transaction = message.transaction;\n\t\t\tthis.dialog = message.dialog;\n\t\t\tthis.responseLine ={};\n\t\t\tthis.buildResponseLine(code ,messageCode);\n\t\t\tthis.header =[];// message.header.messageHeaders;\n\t\t\tthis.buildHeader(message);\n\t\t\tthis.buildBody(bodyMessage || \"\", typeBody) ;\n\t\t}\n\n\t\tbuildHeader (message){\n\t\t\tfor ( var head in  message.rawHeader){\n\t\t\t\tvar i = 0 ;\n\t\t\t\tswitch (head){\n\t\t\t\t\tcase \"Allow\":\n\t\t\t\t\tcase \"Supported\":\n\t\t\t\t\t\tvar ptr = \"\";\n\t\t\t\t\t\tfor ( i = 0 ; i< message.header[head].length ; i++){\n\t\t\t\t\t\t\tif ( i < message.header[head].length - 1 ){\n\t\t\t\t\t\t\t\tptr += message.header[head][i] + \",\";\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tptr += message.header[head][i] ;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.header.push( head + \": \"+ptr);\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Via\":\n\t\t\t\t\t\tif ( this.responseLine.code == \"487\"  ) {\n\t\t\t\t\t\t\tfor ( i = 0 ; i < this.dialog[head].length ; i++){\n\t\t\t\t\t\t\t\tthis.header.push(this.dialog[head][i].raw);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tfor ( i = 0 ; i< message.header[head].length ; i++){\n\t\t\t\t\t\t\t\tthis.header.push(message.header[head][i].raw);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"User-Agent\" :\n\t\t\t\t\t\tthis.header.push( \"User-Agent: \" + this.transaction.dialog.sip.settings.userAgent);\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Contact\":\n\t\t\t\t\t\t/*var rport = this.transaction.dialog.sip.rport ;\n\t\t\t\t\t\tvar ip = this.transaction.dialog.sip.publicAddress;\n\t\t\t\t\t\tif ( rport ){\n\t\t\t\t\t\t\tthis.header.push( \"Contact: <sip:\" +this.transaction.to+\"@\"+ip+\":\"+rport+\";transport=\"+this.transaction.dialog.sip.settings.transport.toLowerCase()+\">\");\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.header.push( \"Contact: <sip:\" +this.transaction.to+\"@\"+ip+\";transport=\"+this.transaction.dialog.sip.settings.transport.toLowerCase()+\">\");\n\t\t\t\t\t\t}*/\n\t\t\t\t\t\tthis.header.push( \"Contact: \"+this.dialog.contact );\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"To\":\n\t\t\t\t\t\t//console.log(message.header[head] )\n\t\t\t\t\t\t//console.log(this.dialog.sip.displayName )\n\t\t\t\t\t\tvar ret = regHeaders.fromToG.exec( message.header[head] ) ;\n\t\t\t\t\t\t//console.log(ret)\n\t\t\t\t\t\tif ( ret &&  ( ! ret[1] ) ){\n\t\t\t\t\t\t\t//console.log(\"traff to\")\n\t\t\t\t\t\t\tmessage.header[head] = '\"'+this.dialog.sip.displayName+'\"'+message.header[head] ;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//console.log(message.header[head])\n\t\t\t\t\t\tif ( !  message.header[head].match(/;tag=/) ){\n\t\t\t\t\t\t\tthis.header.push(head + \": \"+message.header[head]+ ( this.transaction.dialog.tagFrom ? \";tag=\"+this.transaction.dialog.tagFrom : \"\" ) );\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.header.push( head + \": \"+message.header[head]);\n\t\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Record-Route\":\n\t\t\t\t\t\tfor ( i = this.message.dialog.routes.length - 1  ; i >= 0 ; i--){\n\t\t\t\t\t\t\tthis.header.push(head + \": \"+ this.message.header.recordRoutes[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"CSeq\":\n\t\t\t\t\t\tif ( this.responseLine.code == \"487\" && this.dialog.method === \"CANCEL\"){\n\t\t\t\t\t\t\tthis.header.push( head + \": \"+message.header[head].replace(\"CANCEL\", \"INVITE\"));\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.header.push( head + \": \"+message.header[head]);\n\t\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Content-Type\":\n\t\t\t\t\tcase \"Organization\":\n\t\t\t\t\tcase \"Server\":\n\t\t\t\t\tcase \"Content-Length\":\n\t\t\t\t\tbreak;\n\t\t\t\t\tdefault :\n\t\t\t\t\t\tthis.header.push( head + \": \"+message.header[head]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tgetHeader (){\n\t\t\tvar head = \"\";\n\t\t\tfor (var line in this.header ){\n\t\t\t\thead+=this.header[line]+endline;\n\t\t\t}\n\t\t\treturn head ;\n\t\t}\n\n\t\tbuildBody (body, type){\n\t\t\tthis.header.contentLength  = \"Content-Length: \" + body.length ;\n\t\t\tif (type){\n\t\t\t\tthis.header.contentType  = \"Content-Type: \" + type ;\n\t\t\t}\n\t\t\tthis.body = body || \"\" ;\n\t\t}\n\n\t\tgetBody (){\n\t\t\treturn this.body ;\n\t\t}\n\n\t\tbuildResponseLine (code, messageCode){\n\t\t\tthis.responseLine.method = this.transaction.method.toUpperCase();\n\t\t\tthis.responseLine.version = this.transaction.dialog.sip.version ;\n\t\t\tthis.responseLine.code = code ;\n\t\t\tthis.responseLine.message = messageCode || codeMessage[code] ;\n\t\t}\n\n\t\tgetResponseline (){\n\t\t\tif (this.responseLine.method == \"ACK\"){\n\t\t\t\treturn \tthis.responseLine.method +\" \"+ \"sip:\"+this.transaction.from+\"@\"+this.transaction.dialog.sip.server +\" \"+this.responseLine.version + endline ;\n\t\t\t}\n\t\t\treturn  this.responseLine.version + \" \" + this.responseLine.code + \" \" + this.responseLine.message +  endline ;\n\t\t}\n\n\t\tgetMessage (){\n\t\t\t//console.log(\"RESPONSE : \" +this.getResponseline() + this.getHeader() + endline + this.getBody())\n\t\t\treturn this.rawResponse = this.getResponseline() + this.getHeader() + endline + this.getBody() ;\n\t\t}\n\n\t\tsend (){\n\t\t\treturn this.transaction.send( this.getMessage() );\n\t\t}\n\t};\n\n\n\t/*\n \t *\n \t * CLASS TRANSACTION\n \t *\n \t *\n \t */\n\tvar generateHex = function(){\n\t\treturn Math.floor(Math.random()*167772150000000).toString(16) ;\n\t};\n\n\tconst Transaction  = class Transaction {\n\n\t\tconstructor(to, dialog){\n\t\t\tthis.dialog = dialog ;\n\t\t\tif ( to instanceof Message){\n\t\t\t\tthis.hydrate(to);\n\t\t\t}else{\n\t\t\t\tthis.to = to ;\n\t\t\t\tthis.from = dialog.from ;\n\t\t\t\tthis.method = dialog.method;\n\t\t\t\tthis.branch = this.generateBranchId() ;\n\t\t\t}\n\t\t\tthis.responses = {};\n\t\t\tthis.requests = {};\n\t\t\tthis.interval = null;\n\t\t}\n\n\t\thydrate (message){\n\t\t\tthis.message = message;\n\t\t\tif ( message.type === \"REQUEST\" ){\n\t\t\t\tthis.to = this.dialog.to;\n\t\t\t\tthis.from = this.dialog.from;\n\t\t\t\tthis.method = this.dialog.method;\n\t\t\t\tthis.branch = this.message.header.branch;\n\t\t\t}\n\t\t\tif ( message.type === \"RESPONSE\" ){\n\t\t\t\tthis.to = this.dialog.to;\n\t\t\t\tthis.from = this.dialog.from;\n\t\t\t\tthis.method = this.dialog.method;\n\t\t\t\tthis.branch = this.message.header.branch;\n\t\t\t}\n\t\t}\n\n\t\tgenerateBranchId (){\n\t\t\tvar hex = generateHex();\n\t\t\tif ( hex.length === 12 ){\n\t\t\t\treturn \"z9hG4bK\"+hex;\n\t\t\t}else{\n\t\t\t\treturn this.generateBranchId() ;\n\t\t\t}\n\t\t}\n\n\t\tcreateRequest (body, typeBody){\n\t\t\tif (this.method != \"ACK\" && this.method != \"CANCEL\" ){\n\t\t\t\tthis.dialog.incCseq();\n\t\t\t}\n\t\t\tthis.request = new sipRequest(this, body || \"\", typeBody);\n\t\t\tthis.message = null;\n\t\t\treturn this.request ;\n\t\t}\n\n\t\tcreateResponse (code ,message, body, typeBody){\n\t\t\tif (this.method === \"INVITE\" || this.method === \"ACK\" ){\n\t\t\t\tswitch ( true ){\n\t\t\t\t\tcase code < 200 :\n\t\t\t\t\t\tthis.dialog.status = this.dialog.statusCode.EARLY ;\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase code < 300 :\n\t\t\t\t\t\tthis.dialog.status = this.dialog.statusCode.ESTABLISHED ;\n\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthis.dialog.status = this.dialog.statusCode.TERMINATED ;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.response = new sipResponse(this.message, code, message, body , typeBody );\n\t\t\treturn this.response ;\n\t\t}\n\n\t\tsend (message){\n\t\t\treturn this.dialog.sip.send( message );\n\t\t}\n\n\t\tcancel (){\n\t\t\tthis.method = \"CANCEL\";\n\t\t\tthis.dialog.routes = null ;\n\t\t\tthis.dialog.tagTo = \"\" ;\n\t\t\tvar request = this.createRequest();\n\t\t\trequest.send();\n\t\t\tthis.dialog.status = this.dialog.statusCode.CANCEL ;\n\t\t\treturn request ;\n\t\t}\n\n\t\tdecline (){\n\t\t\tvar ret = this.createResponse(\n\t\t\t\t603,\n\t\t\t\t\"Declined\"\n\t\t\t);\n\t\t\tret.send();\n\t\t\treturn ret ;\n\t\t}\n\n\t\tclear (){\n\t\t\t// CLEAR INTERVAL\n\t\t\tif (this.interval){\n\t\t\t\tclearInterval(this.interval);\n\t\t\t}\n\t\t}\n\t};\n\n\t/*\n \t *\n \t * CLASS DIALOG\n \t *\n \t */\n\tvar statusCode = {\n\t\tINITIAL:\t0,\n\t\tEARLY:\t\t1,\t// on 1xx\n\t\tESTABLISHED:\t2,\t// on 200 ok\n\t\tTERMINATED:\t3,\t// on by\n\t\tCANCEL:\t\t4\t// cancel\n\t};\n\n\tconst Dialog  = class Dialog {\n\n\t\tconstructor(method, sip){\n\t\t\tthis.sip = sip;\n\t\t\tthis.transactions = {};\n\t\t\tthis.statusCode = statusCode ;\n\t\t\tthis.status = this.statusCode.INITIAL ;\n\t\t\tthis.routes = null ;\n\t\t\tthis.from = this.sip.from;\n\t\t\tthis.maxForward = this.sip.settings.maxForward;\n \t\t\tthis.expires = this.sip.settings.expires;\n\t\t\tthis.tagFrom = this.generateTag() ;\n\t\t\tthis.cseq = this.generateCseq();\n\t\t\tif (method instanceof Message ){\n\t\t\t\tthis.hydrate( method );\n\t\t\t}else{\n\n\t\t\t\tthis.method = method;\n\n\t\t\t\tthis.callId = this.generateCallId();\n\t\t\t\tthis.status = this.statusCode.INITIAL ;\n\n\t\t\t\tthis.to = null ;\n\t\t\t\tthis.tagTo = null ;\n\n\t\t\t}\n\t\t\t//this.contact = this.sip.generateContact( null, null, true) ;\n\t\t\tthis.contact = this.sip.contact;\n\t\t}\n\n\t\thydrate (message){\n\n\t\t\tif ( message.type === \"REQUEST\" ){\n\t\t\t\tthis.cseq = message.cseq;\n\t\t\t\tthis.method = message.method ;\n\t\t\t\tthis.callId = message.callId;\n\n\t\t\t\t// to\n\t\t\t\tif ( message.fromNameDisplay ){\n\t\t\t\t\tthis.to = '\"'+message.fromNameDisplay+'\"' + \"<sip:\"+message.from+\">\" ;\n\t\t\t\t}else{\n\t\t\t\t\tthis.to = \"<sip:\"+message.from+\">\" ;\n\t\t\t\t}\n\t\t\t\tthis.toName = message.fromName;\n\t\t\t\tthis.tagTo = message.fromTag || this.generateTag() ;\n\t\t\t\t//from\n\t\t\t\tthis.tagFrom = message.toTag || this.tagFrom;\n \t\t        \tif (message.toNameDisplay){\n\t\t\t\t\tthis.from ='\"'+message.toNameDisplay+'\"' + '<sip:'+message.to+'>';\n\t\t\t\t}else{\n\t\t\t\t\tthis.from = \"<sip:\"+message.to+\">\";\n\t\t\t\t}\n\t\t\t\tthis.fromName= message.toName;\n\n\n\t\t\t\t// manage routes\n\t\t\t\tif ( message.header.recordRoutes.length ){\n\t\t\t\t\tthis.routes = message.header.recordRoutes.reverse();\n\t\t\t\t}\n\n\t\t\t\t// FIXME if (  ! this[\"request-uri\"] &&  message.contact )\n\t\t\t\tif (  message.contact ){\n\t\t\t\t\t//this[\"request-uri\"] =  message.contact + \":\" + message.rport\n\t\t\t\t\tthis[\"request-uri\"] =  message.contact ;\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tif ( message.type === \"RESPONSE\" ){\n\t\t\t\tthis.cseq = message.cseq;\n\t\t\t\tif ( !  this.callId ){\n\t\t\t\t\tthis.callId = message.callId;\n\t\t\t\t}\n\t\t\t\tif ( !  this.to ){\n\t\t\t\t\tif ( message.toNameDisplay ){\n\t\t\t\t\t\tthis.to =  '\"'+message.toNameDisplay+'\"' + \"<sip:\"+message.to+\">\" ;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.to =  \"<sip:\"+message.to+\">\" ;\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tif ( message.toNameDisplay ){\n\t\t\t\t\t\tthis.to =  '\"'+message.toNameDisplay+'\"' + \"<sip:\"+message.to+\">\" ;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( message.toTag ){\n\t\t\t\t\tthis.tagTo = message.toTag ;\n\t\t\t\t}\n\t\t\t\tif ( message.fromTag ){\n\t\t\t\t\tthis.tagFrom = message.fromTag ;\n\t\t\t\t}\n\t\t\t\t// FIXME if (  ! this[\"request-uri\"] &&  message.contact )\n\t\t\t\tif (  message.contact ){\n\t\t\t\t\t//this[\"request-uri\"] =  message.contact + \":\" + message.rport\n\t\t\t\t\tthis[\"request-uri\"] =  message.contact ;\n\t\t\t\t}\n\n\t\t\t\t// manage routes\n\t\t\t\tif ( message.header.recordRoutes.length ){\n\t\t\t\t\tthis.routes = message.header.recordRoutes ;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tgenerateCallId (){\n\t\t\treturn generateId() + \"@nodefony\";\n\t\t}\n\n\t\tgenerateTag (){\n\t\t\treturn \"nodefony\"+parseInt(Math.random()*1000000000,10);\n\t\t}\n\n\t\tgenerateCseq (){\n\t\t\treturn 1;\n\t\t}\n\n\t\tincCseq (){\n\t\t\tthis.cseq = this.cseq + 1 ;\n\t\t\treturn this.cseq ;\n\t\t}\n\n\t\tgetTransaction (id){\n\t\t\tif ( id in this.transactions ){\n\t\t\t\treturn this.transactions[id] ;\n\t\t\t}\n\t\t\treturn null ;\n\t\t}\n\n\t\tcreateTransaction (to){\n\t\t\tthis.currentTransaction = new Transaction( to || this.to , this);\n\t\t\tthis.sip.logger(\"SIP NEW TRANSACTION :\" + this.currentTransaction.branch, \"DEBUG\");\n\t\t\tthis.transactions[this.currentTransaction.branch] = this.currentTransaction;\n\t\t\treturn this.currentTransaction;\n\t\t}\n\n\t\tregister (){\n\t\t\tvar trans = this.createTransaction(this.from);\n\t\t\tthis.to = this.from ;\n\t\t\tvar request = trans.createRequest();\n\t\t\trequest.send();\n\t\t\treturn trans;\n\n\t\t}\n\n\t\tunregister (){\n\t\t\tthis.expires = 0 ;\n\t\t\tthis.contact = \"*\" ;\n\t\t\tvar trans = this.createTransaction(this.from);\n\t\t\tthis.to = this.from ;\n\t\t\tthis.tagTo = null ;\n\t\t\tvar request = trans.createRequest();\n\t\t\trequest.send();\n\t\t\treturn trans;\n\t\t}\n\n\t\tack (message){\n\t\t\tif ( ! this[\"request-uri\"] ){\n\t\t\t\tthis[\"request-uri\"] = this.sip[\"request-uri\"] ;\n\t\t\t}\n\t\t\t//this.method = \"ACK\" ;\n\t\t\tvar trans = this.createTransaction();\n\t\t\ttrans.method = \"ACK\" ;\n\t\t\tvar request = trans.createRequest();\n\t\t\trequest.send();\n\t\t\treturn request ;\n\t\t}\n\n\t\tinvite (userTo, description, type){\n\n\t\t\tif ( this.status  === this.statusCode.CANCEL ){\n\t\t\t\treturn null ;\n\t\t\t}\n\t\t\tthis.sip.logger(\"SIP INVITE DIALOG\");\n\t\t\tif ( userTo ){\n\t\t\t\tthis.to = \"<sip:\"+userTo+\">\" ;\n\t\t\t}\n\t\t\tthis.method = \"INVITE\" ;\n\t\t\tif ( ! this[\"request-uri\"] ){\n\t\t\t\tthis[\"request-uri\"] = \"sip:\"+userTo ;\n\t\t\t}\n\n\t\t\tif ( description.sdp ){\n\t\t\t\tthis.bodyType = \"application/sdp\" ;\n\t\t\t\tthis.body = description.sdp ;\n\t\t\t}else{\n\t\t\t\tthis.bodyType = type ;\n\t\t\t\tthis.body = description ;\n\t\t\t}\n\t\t\tvar trans = this.createTransaction(this.to);\n\t\t\tvar request = trans.createRequest(this.body, this.bodyType);\n\t\t\trequest.send();\n\t\t\treturn trans;\n\n\t\t}\n\n\t\tnotify (userTo, notify, typeNotify){\n\t\t\tthis.method = \"NOTIFY\" ;\n\t\t\tif ( userTo ){\n\t\t\t\tthis.to = \"<sip:\"+userTo+\">\" ;\n\t\t\t}\n\t\t\tif ( ! this[\"request-uri\"] ){\n\t\t\t\tthis[\"request-uri\"] = \"sip:\"+userTo ;\n\t\t\t}\n\t\t\tif (typeNotify){\n\t\t\t\tthis.bodyType = typeNotify ;\n\t\t\t}\n\t\t\tif ( notify ){\n\t\t\t\tthis.body = notify ;\n\t\t\t}\n\t\t\tvar trans = this.createTransaction(this.to);\n\t\t\tvar request = trans.createRequest(this.body, this.bodyType);\n\t\t\trequest.send();\n\t\t\treturn this;\n\n\t\t}\n\n\t\tinfo ( info, typeInfo){\n\t\t\tthis.method = \"INFO\" ;\n\n\t\t\tif (typeInfo){\n\t\t\t\tthis.bodyType = typeInfo ;\n\t\t\t}\n\t\t\tif ( info ){\n\t\t\t\tthis.body = info ;\n\t\t\t}\n\t\t\tvar trans = this.createTransaction(this.to);\n\t\t\tvar request = trans.createRequest(this.body, this.bodyType);\n\t\t\trequest.send();\n\t\t\treturn this;\n\n\t\t}\n\n\t\tbye (){\n\t\t\tthis.method = \"BYE\" ;\n\t\t\tvar trans = this.createTransaction();\n\t\t\tvar request = trans.createRequest();\n\t\t\trequest.send();\n\t\t\treturn this;\n\n\t\t}\n\n\t\tclear (id){\n\t\t\tif ( id ){\n\t\t\t\tif (this.transactions[id]){\n\t\t\t\t\tthis.transactions[id].clear();\n\t\t\t\t}else{\n\t\t\t\t\tthrow new Error(\"TRANSACTION not found :\" + id);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tfor ( var transac in this.transactions ){\n\t\t\t\t\tthis.transactions[transac].clear();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\n\n\t/*\n \t *\n \t *\tMESSAGE SIP\n \t *\n \t *\n \t */\n\tvar firstline = function(firstLine){\n\t\tvar method = firstLine[0];\n\t\tvar code = firstLine[1];\n\t\tif ( method === \"BYE\" && ! code){\n\t\t\tcode = 200 ;\n\t\t}\n\t\tvar message = \"\";\n\t\tfor (var i = 2 ;i<firstLine.length;i++){\n\t\t\tmessage+=firstLine[i]+\" \";\n\t\t}\n\t\treturn {\n\t\t\tmethod : method,\n\t\t\tcode : code,\n\t\t\tmessage : message\n\t\t};\n\t};\n\n\tvar regSIP = /\\r\\n\\r\\n/ ;\n\tvar Message  = class Message {\n\n\t\tconstructor(message, sip){\n\t\t\tthis.sip = sip ;\n\t\t\tif (message){\n\t\t\t\tthis.rawMessage = message ;\n\t\t\t\tthis.header = null;\n\t\t\t\tthis.body = null;\n\t\t\t\tthis.statusLine = null;\n\t\t\t\tthis.contentLength = 0 ;\n\t\t\t\tthis.code = null ;\n\t\t\t\tthis.statusLine = \"\" ;\n\t\t\t\tthis.split = message.split( regSIP );\n\t\t\t\tif (this.split.length && this.split.length <= 2){\n\t\t\t\t\ttry {\n\t\t\t\t\t\tthis.parseHeader();\n\t\t\t\t\t\tthis.contentLength = parseInt(this.header[\"Content-Length\"], 10) ;\n\t\t\t\t\t\tthis.parseBody();\n\t\t\t\t\t\tthis.statusLine =firstline(this.header.firstLine);\n\t\t\t\t\t\tthis.code = parseInt( this.statusLine.code, 10);\n\t\t\t\t\t\tthis.getType();\n\t\t\t\t\t}catch(e){\n\t\t\t\t\t\tthrow e;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.rawHeader = this.header.rawHeader ;\n\t\t\t\t\t//console.log(this.rawHeader)\n\t\t\t\t}\n\t\t\t\tthis.getDialog();\n\t\t\t\tthis.getTransaction();\n\n\t\t\t}else{\n\t\t\t\tthrow new Error( \"BAD FORMAT MESSAGE SIP no message\" , 500);\n\t\t\t}\n\t\t}\n\n\t\tgetType ( ){\n\t\t\tif ( this.code ){\n\t\t\t\tif ( ( typeof this.code ) === \"number\" &&  ! isNaN (this.code) ){\n\t\t\t\t\tthis.type = \"RESPONSE\" ;\n\t\t\t\t}else{\n\t\t\t\t\tthrow new Error(\"BAD FORMAT MESSAGE SIP message code   \") ;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif ( this.method ){\n\t\t\t\t\tthis.type = \"REQUEST\" ;\n\t\t\t\t}else{\n\t\t\t\t\tthis.type = null ;\n\t\t\t\t\tthrow new Error(\"BAD FORMAT MESSAGE SIP message type not defined  \") ;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tparseBody ( ){\n\t\t\ttry {\n\t\t\t\tif ( this.split[1] ){\n\t\t\t\t\tthis.body = new bodySip(this, this.split[1]);\n\t\t\t\t}else{\n\t\t\t\t\tthis.body = new bodySip(this, \"\");\n\t\t\t\t}\n\t\t\t}catch(e){\n\t\t\t\tthis.sip.logger(\"SIP parseBody Message :\" + this.split[1], \"ERROR\");\n\t\t\t\tthrow e ;\n\t\t\t}\n\t\t}\n\n\t\tparseHeader ( ){\n\t\t\tif ( this.split[0] ){\n\t\t\t\ttry {\n\t\t\t\t\tthis.header = new headerSip(this, this.split[0]);\n\t\t\t\t}catch(e){\n\t\t\t\t\tthis.sip.logger(\"SIP parseHeader Message :\" + this.split[0], \"ERROR\");\n\t\t\t\t\tthrow e ;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthrow (\"BAD FORMAT MESSAGE SIP no header \", 500);\n\t\t\t}\n\t\t}\n\n\t\tgetContact (){\n\t\t\treturn this.contact;\n\t\t}\n\n\t\tgetHeader (){\n\t\t\treturn this.header;\n\t\t}\n\n\t\tgetBody (){\n\t\t\treturn this.body;\n\t\t}\n\n\t\tgetStatusLine (){\n\t\t\treturn this.statusLine;\n\t\t}\n\n\t\tgetCode (){\n\t\t\treturn this.code ;\n\t\t}\n\n\t\tgetDialog (){\n\t\t\tif (  this.header[\"Call-ID\"] ){\n\t\t\t\tthis.dialog = this.sip.getDialog( this.header[\"Call-ID\"] ) ;\n\t\t\t\tif ( ! this.dialog ){\n\t\t\t\t\tthis.dialog = this.sip.createDialog(this);\n\t\t\t\t}else{\n\t\t\t\t\tthis.sip.logger(\"SIP HYDRATE DIALOG :\" + this.dialog.callId, \"DEBUG\");\n\t\t\t\t\tthis.dialog.hydrate(this);\n\t\t\t\t}\n\t\t\t\treturn this.dialog ;\n\t\t\t} else{\n\t\t\t\tthrow new Error(\"BAD FORMAT SIP MESSAGE no Call-ID\" , 500);\n\t\t\t}\n\t\t}\n\n\t\tgetTransaction (){\n\t\t\tif ( this.header.branch ){\n\t\t\t\tif ( ! this.dialog ){\n\t\t\t\t\tthis.getDialog();\n\t\t\t\t}\n\t\t\t\tif ( this.dialog ){\n\t\t\t\t\tthis.transaction = this.dialog.getTransaction( this.header.branch ) ;\n\t\t\t\t\tif ( ! this.transaction ){\n\t\t\t\t\t\tthis.transaction = this.dialog.createTransaction(this);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.sip.logger(\"SIP HYDRATE TRANSACTION :\" + this.transaction.branch, \"DEBUG\");\n\t\t\t\t\t\tthis.transaction.hydrate(this);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tthis.transaction = null ;\n\t\t\t\t}\n\t\t\t\treturn this.transaction ;\n\t\t\t}else{\n\t\t\t\t// TODO CSEQ mandatory\n\t\t\t\tthis.sip.logger( this.rawMessage, \"ERROR\" );\n\t\t\t\tthrow new Error(\"BAD FORMAT SIP MESSAGE no Branch\" , 500);\n\t\t\t}\n\t\t}\n\t};\n\n\t/*\n \t *\n \t *\n \t *\tCLASS SIP\n \t *\n \t *\n \t */\n\t// entry point response transport\n\tvar onMessage = function(response){\n\n\t\tthis.logger(response, \"INFO\", \"RECIEVE\")\n\t\tvar message = null ;\n\t\tvar res = null ;\n\t\ttry {\n\t\t\t//console.log(this.fragment)\n\t\t\tif ( this.fragment ){\n\t\t\t\tthis.lastResponse += response;\n\t\t\t\t//console.log(this.lastResponse);\n\t\t\t}else{\n\t\t\t\tthis.lastResponse = response ;\n\t\t\t}\n\t\t\tmessage = new Message(this.lastResponse, this);\n\t\t\tthis.fragment = false ;\n\t\t}catch(e){\n\t\t\t//console.log(e);\n\t\t\t// bad split\n\t\t\tfor ( var i = 0 ; i < e.length ; i++){\n\t\t\t\tif ( e[i] ){\n\t\t\t\t\ttry {\n\t\t\t\t\t\tonMessage.call(this, e[i]);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}catch(e){\n\t\t\t\t\t\t//console.log(\"FRAGMENTE\")\n\t\t\t\t\t\tthis.fragment = true ;\n\t\t\t\t\t\treturn ;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.logger(e, \"ERROR\");\n\t\t\tthis.logger(\"SIP DROP : \"+ response ,\"ERROR\");\n\t\t\tthis.notificationsCenter.fire(\"onDrop\", response);\n\t\t\treturn ;\n\t\t}\n\t\tthis.fire(\"onMessage\", message.rawMessage);\n\n\t\tswitch (message.method){\n\t\t\tcase \"REGISTER\" :\n\t\t\t\tthis.rport = message.header.Via[0].rport;\n\t\t\t\tif (this.rport ){\n\t\t\t\t\tthis[\"request-uri\"] =  \"sip:\"+this.userName+\"@\"+this.publicAddress+\":\"+ this.rport +\";transport=\"+this.transportType;\n\t\t\t\t}\n\t\t\t\tswitch ( message.code ){\n\t\t\t\t\tcase 401 :\n\t\t\t\t\tcase 407 :\n\t\t\t\t\t\tif (this.registered === 200 ) {\n\t\t\t\t\t\t\tif ( this.registerInterval ){\n\t\t\t\t\t\t\t\tclearInterval(this.registerInterval);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.registerInterval = null ;\n\t\t\t\t\t\t}else{\n\n\t\t\t\t\t\t\tif ( this.registered === 401 || this.registered === 407){\n\t\t\t\t\t\t\t\tif ( this.registerInterval ){\n\t\t\t\t\t\t\t\t\tclearInterval(this.registerInterval);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.registerInterval = null ;\n\t\t\t\t\t\t\t\tthis.registered = null;\n\t\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onError\", this, message);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.registered = message.code ;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdelete this.authenticateRegister ;\n\t\t\t\t\t\tthis.authenticateRegister = null;\n\t\t\t\t\t\tthis.authenticateRegister = new authenticate(message.dialog, this.userName , this.settings.password) ;\n\t\t\t\t\t\tthis.authenticateRegister.register(message, message.code === 407 ? \"proxy\" : null);\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 403 :\n\t\t\t\t\t\tif ( this.registerInterval ){\n\t\t\t\t\t\t\tclearInterval( this.registerInterval );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.registered = message.code ;\n\t\t\t\t\t\t//console.log(\"Forbidden (bad auth)\")\n\t\t\t\t\t\tdelete this.authenticateRegister ;\n\t\t\t\t\t\tthis.authenticateRegister = null;\n\t\t\t\t\t\tthis.notificationsCenter.fire(\"onError\", this, message);\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 404 :\n\t\t\t\t\t\tif ( this.registerInterval ){\n\t\t\t\t\t\t\tclearInterval( this.registerInterval );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.registered = message.code ;\n\t\t\t\t\t\tdelete this.authenticateRegister ;\n\t\t\t\t\t\tthis.authenticateRegister = null;\n\t\t\t\t\t\tthis.notificationsCenter.fire(\"onError\", this, message);\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 200 :\n\t\t\t\t\t\tif ( this.registerInterval ){\n\t\t\t\t\t\t\tclearInterval( this.registerInterval );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( ! message.contact ){\n\t\t\t\t\t\t\tthis.registered = \"404\" ;\n\t\t\t\t\t\t\tthis.clear();\n\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onUnRegister\",this, message);\n\t\t\t\t\t\t\treturn ;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this.registered === 401 || this.registered === null ) {\n\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onRegister\", this, message);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.registered = message.code ;\n\n\t\t\t\t\t\tvar expires = message.header[\"contact-expires\"] || this.settings.expires  ;\n\t\t\t\t\t\texpires = parseInt(expires, 10) * 900 ; // 10% (ms)\n\t\t\t\t\t\tthis.registerInterval = setInterval(() => {\n\t\t\t\t\t\t\tthis.authenticateRegister.register(message);\n\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onRenew\", this, this.authenticateRegister, message);\n\t\t\t\t\t\t\t//this.register(this.userName, this.settings.password);\n\t\t\t\t\t\t} ,  expires  );\n\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthis.registered = message.code ;\n\t\t\t\t\t\tdelete this.authenticateRegister ;\n\t\t\t\t\t\tthis.authenticateRegister = null;\n\t\t\t\t\t\t//console.log(message);\n\t\t\t\t\t\tthis.notificationsCenter.fire(\"on\"+message.code, this, message);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\tbreak;\n\t\t\tcase \"INVITE\" :\n\t\t\t\t//this.rport = message.rport || this.rport;\n\n\t\t\t\tswitch ( message.type ){\n\t\t\t\t\tcase \"REQUEST\":\n\t\t\t\t\t\tif ( message.dialog.status === message.dialog.statusCode.INITIAL ){\n\t\t\t\t\t\t\tthis.fire(\"onInitCall\", message.dialog.toName, message.dialog, message.transaction);\n\t\t\t\t\t\t\tif ( message.header.Via ){\n\t\t\t\t\t\t\t\tmessage.dialog.Via = message.header.Via ;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onInvite\", message, message.dialog);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t//console.log(message.dialog.statusCode[message.dialog.status])\n\t\t\t\t\t\t\tif ( message.dialog.status === message.dialog.statusCode.ESTABLISHED ){\n\t\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onInvite\", message, message.dialog);\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tvar ret = message.transaction.createResponse(200, \"OK\");\n\t\t\t\t\t\t\t\tret.send();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"RESPONSE\":\n\t\t\t\t\t\tif ( message.code >= 200 ){\n\t\t\t\t\t\t\tmessage.dialog.ack(message);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tswitch(message.code){\n\t\t\t\t\t\t\tcase 407 :\n\t\t\t\t\t\t\tcase 401 :\n\t\t\t\t\t\t\t\tdelete this.authenticate ;\n\t\t\t\t\t\t\t\tthis.authenticate = null;\n\t\t\t\t\t\t\t\tthis.authenticate = new authenticate(message.dialog, this.userName , this.settings.password) ;\n\t\t\t\t\t\t\t\tvar transaction = this.authenticate.register(message, message.code === 407 ? \"proxy\" : null);\n\t\t\t\t\t\t\t\tthis.fire(\"onInitCall\", message.dialog.toName, message.dialog, transaction);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 180 :\n\t\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onRinging\",this, message);\n\t\t\t\t\t\t\t\tmessage.dialog.status = message.dialog.statusCode.EARLY ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 100 :\n\t\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onTrying\",this, message);\n\t\t\t\t\t\t\t\tmessage.dialog.status = message.dialog.statusCode.EARLY ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 200 :\n\t\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onCall\",message);\n\t\t\t\t\t\t\t\tmessage.dialog.status = message.dialog.statusCode.ESTABLISHED ;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 486 :\n\t\t\t\t\t\t\tcase 603 :\n\t\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onDecline\", message);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 403 :\n\t\t\t\t\t\t\t\tthis.authenticate = false;\n\t\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onError\", this, message);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 487 :\n\t\t\t\t\t\t\tcase 404 :\n\t\t\t\t\t\t\tcase 477 :\n\t\t\t\t\t\t\tcase 480 :\n\t\t\t\t\t\t\tcase 484 :\n\t\t\t\t\t\t\tcase 488 :\n\t\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onError\",this, message);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 408 :\n\t\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onTimeout\",this, message);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 500 :\n\t\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onError\",this, message);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"on\"+message.code, this, message);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\t// error BAD FORMAT\n\t\t\t\t}\n\t\t\tbreak;\n\t\t\tcase \"ACK\" :\n\t\t\t\t//console.log(\"ACK\");\n\t\t\t\t//TODO manage interval messages timer retransmission\n\t\t\tbreak;\n\t\t\tcase \"BYE\" :\n\t\t\t\tswitch(message.code){\n\t\t\t\t\tcase 200 :\n\t\t\t\t\t\t//console.log(\"200\")\n\t\t\t\t\t\tthis.notificationsCenter.fire(\"onBye\",message);\n\t\t\t\t\tbreak;\n\t\t\t\t\tdefault :\n\t\t\t\t\t\tthis.notificationsCenter.fire(\"onBye\",message);\n\t\t\t\t\t\tif ( message.type === \"REQUEST\" ){\n                                                        res = message.transaction.createResponse(200,\"OK\");\n                                                        res.send();\n                                                }\n\t\t\t\t}\n\t\t\tbreak;\n\t\t\tcase \"INFO\" :\n\t\t\t\tswitch ( message.type ){\n\t\t\t\t\tcase \"REQUEST\":\n\t\t\t\t\t\t//console.log(\"SIP   :\"+ message.method + \" \"+\" type: \"+message.contentType );\n\t\t\t\t\t\tthis.notificationsCenter.fire(\"onInfo\",message);\n\t\t\t\t\t\tres = message.transaction.createResponse(200, \"OK\");\n\t\t\t\t\t\tres.send();\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"RESPONSE\":\n\t\t\t\t\t\t//console.log(\"SIP   :\"+ message.method + \" \"+\" code:\"+message.code );\n\t\t\t\t\t\tthis.notificationsCenter.fire(\"onDrop\",message);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\tbreak;\n\n\t\t\tcase \"CANCEL\" :\n\t\t\t\tswitch ( message.type ){\n\t\t\t\t\tcase \"REQUEST\":\n\t\t\t\t\t\tthis.notificationsCenter.fire(\"onCancel\",message);\n\t\t\t\t\t\tres = message.transaction.createResponse(200, \"OK\");\n\t\t\t\t\t\tres.send();\n\t\t\t\t\t\tmessage.dialog.status = message.dialog.statusCode.CANCEL ;\n\t\t\t\t\t\tres = message.transaction.createResponse(487, \"Request Terminated\");\n\t\t\t\t\t\tres.send();\n\t\t\t\t\t\tmessage.dialog.status = message.dialog.statusCode.TERMINATED  ;\n\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"RESPONSE\":\n\n\t\t\t\t\t\tthis.notificationsCenter.fire(\"onDrop\",message);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\tbreak;\n\t\t\tcase \"REFER\":\n\t\t\t\tthis.logger(\"SIP REFER NOT ALLOWED :\"+ message.method ,\"WARNING\");\n\t\t\t\tthis.notificationsCenter.fire(\"onDrop\",message);\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.logger(\"SIP DROP :\"+ message.method + \" \"+\" code:\"+message.code ,\"WARNING\");\n\t\t\t\tthis.notificationsCenter.fire(\"onDrop\",message);\n\t\t\t\t// TODO RESPONSE WITH METHOD NOT ALLOWED\n\t\t}\n\t};\n\n\tvar onStart = function(){\n\t\tthis.fire(\"onStart\",this);\n\t};\n\n\tvar onStop = function(){\n\t\tthis.stop();\n\t};\n\n\tvar defaultSettings = {\n\t\texpires\t\t: 200,\t\t// en secondes\n\t\tmaxForward\t: 70,\n\t\tversion\t\t: \"SIP/2.0\",\n\t\tuserAgent\t: \"nodefony\",\n\t \tportServer\t: \"5060\",\n\t \tuserName\t: \"userName\",\n\t\tdisplayName\t: \"\",\n\t \tpwd\t\t: \"password\",\n\t\ttransport\t: \"TCP\"\n\t};\n\n\n\t// CLASS\n\tconst SIP  = class SIP extends stage.Service {\n\n\t\tconstructor(server, transport, settings){\n\n\t\t\tsuper(\"SIP\", null, null, settings);\n\t\t\tthis.settings = stage.extend({}, defaultSettings, settings);\n\t\t\t//this.settings.url = stage.io.urlToOject(url)\n\t\t\t//this.notificationsCenter = stage.notificationsCenter.create(this.settings, this);\n\t\t\tthis.dialogs = {};\n\t\t\tthis.version = this.settings.version;\n\n\t\t\t//\n\t\t\tthis.server = server ;\n\t\t\tthis.serverPort = this.settings.portServer;\n\n\t\t\tthis.authenticate = false;\n\t\t\tthis.authenticateRegister= null ;\n\n\t\t\t// REGISTER\n\t\t\tthis.registerInterval = null;\n\t\t\tthis.registered = null ;\n\t\t\tthis.diagRegister = null ;\n\n\t\t\t// TRANSPORT\n\t\t\tthis.transport = transport ;\n\t\t\tif ( this.transport ){\n\t\t\t\tthis.initTransport();\n\t\t\t}\n\t\t\tthis.transportType = this.settings.transport.toLowerCase() ;\n\n\t\t\tthis.contact = null ;\n\t\t\tthis.via = null ;\n\t\t\t// IDENTIFIANT\n\t\t\t//  USER\n\t\t\t//this.userName = this.settings.userName ;\n\t\t\t//this.from = \"<sip:\"+this.userName+\"@\"+this.publicAddress+\">\" ;\n\t\t\t//this.contact = this.generateContact();\n\t\t\t//this[\"request-uri\"] =  \"sip:\"+this.userName+\"@\"+this.publicAddress+\";transport=\"+this.transportType ;\n\t\t}\n\n\t\tgenerateInvalid (){\n\t\t\treturn parseInt(Math.random()*1000000000,10)+\".nodefony.invalid\" ;\n\t\t}\n\n\t\tgenerateVia (addr){\n\t\t\tif ( this.rport ){\n\t\t\t\treturn  this.version+\"/\"+this.settings.transport+\" \" +addr+\";rport\" ;\n\t\t\t}else{\n\t\t\t\treturn  this.version+\"/\"+this.settings.transport+\" \" +addr ;\n\t\t\t}\n\t\t}\n\n\t\tgenerateContact ( userName, password , force, settings){\n\t\t\tif ( userName ) {\n\t\t\t\tthis.userName = userName  ;\n\t\t\t\tif ( settings && settings.displayName ){\n\t\t\t\t\tthis.displayName = settings.displayName ;\n\t\t\t\t}else{\n\t\t\t\t\tthis.displayName = userName ;\n\t\t\t\t}\n\t\t\t\tthis.from = '\"'+this.displayName+'\"'+'<sip:'+this.userName+'@'+this.publicAddress+'>' ;\n\t\t\t\tthis[\"request-uri\"] =  \"sip:\"+this.userName+\"@\"+this.publicAddress+\";transport=\"+this.transportType ;\n\t\t\t\tif ( password ){\n\t\t\t\t\tthis.settings.password = password ;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( ! this.contact  || force ){\n\t\t\t\tvar invalid = null ;\n\t\t\t\tswitch ( this.transportType ){\n\t\t\t\t\tcase \"ws\":\n\t\t\t\t\tcase \"wss\":\n\t\t\t\t\t\tinvalid = this.generateInvalid() ;\n\t\t\t\t\t\tthis.via = this.generateVia(invalid);\n\t\t\t\t\t\tif ( this.rport ){\n\t\t\t\t\t\t\treturn  '\"'+this.displayName+'\"'+\"<sip:\"+this.userName+\"@\"+ invalid +\":\"+ this.rport +\";transport=\"+this.transportType+\">\" ;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\treturn  '\"'+this.displayName+'\"'+\"<sip:\"+this.userName+\"@\"+ invalid +\";transport=\"+this.transportType+\">\" ;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"tcp\" :\n\t\t\t\t\tcase \"udp\" :\n\t\t\t\t\t\tinvalid = this.generateInvalid() ;\n\t\t\t\t\t\tthis.via = this.generateVia(invalid);\n\t\t\t\t\t\t//this.via = this.generateVia(this.publicAddress);\n\t\t\t\t\t\tif ( this.rport ){\n\t\t\t\t\t\t\treturn  '\"'+this.displayName+'\"'+\"<sip:\"+this.userName+\"@\"+invalid+\":\"+this.rport+\";transport=\"+this.transportType+\">\" ;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\treturn  '\"'+this.displayName+'\"'+\"<sip:\"+this.userName+\"@\"+invalid+\";transport=\"+this.transportType+\">\" ;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault :\n\t\t\t\t\t\tthrow new Error(\"SIP TRANSPORT TYPE NOT ALLOWED\") ;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this.contact ;\n\t\t}\n\n\t\tgetDialog (id){\n\t\t\tif ( id in this.dialogs ){\n\t\t\t\treturn this.dialogs[id] ;\n\t\t\t}\n\t\t\treturn null ;\n\t\t}\n\n\t\tinitTransport (transport){\n\t\t\tif ( transport ){\n\t\t\t\tthis.transport = transport ;\n\t\t\t}\n\n\t\t\t// GET REMOTE IP\n\t\t\tif (this.transport.publicAddress){\n\t\t\t\tthis.publicAddress = this.transport.domain.hostname ;\n\t\t\t\tthis.publicAddress = this.server ;\n\t\t\t}else{\n\t\t\t\tthis.publicAddress = this.server ;\n\t\t\t}\n\n\t\t\tswitch(this.settings.transport) {\n\t\t\t\t// realtime nodefony\n\t\t\t\tcase \"TCP\" :\n\t\t\t\tcase \"UDP\" :\n\t\t\t\t\tthis.transport.listen(this, \"onSubscribe\", function(service, message){\n\t\t\t\t\t\tif (service === \"SIP\" || service === \"OPENSIP\"){\n\t\t\t\t\t\t\tonStart.call(this, message);\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t\tthis.transport.listen(this, \"onUnsubscribe\", function(service, message){\n\t\t\t\t\t\tif (service === \"SIP\" || service === \"OPENSIP\"){\n\t\t\t\t\t\t\tonStop.call(this, message);\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t\tthis.transport.listen(this, \"onMessage\", function(service, message){\n\t\t\t\t\t\tif (service === \"SIP\" || service === \"OPENSIP\"){\n\t\t\t\t\t\t\tonMessage.call(this, message);\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t\tthis.transport.listen(this, \"onClose\", function( message){\n\t\t\t\t\t\tthis.quit(message);\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"WS\":\n\t\t\t\tcase \"WSS\":\n\t\t\t\t\tthis.transport.listen(this, \"onMessage\",  function( message){\n\t\t\t\t\t\t//this.notificationsCenter.fire(\"onMessage\",message.data);\n\t\t\t\t\t\tonMessage.call(this, message.data);\n\t\t\t\t\t});\n\t\t\t\t\tthis.transport.listen(this, \"onError\",function( message ){\n\t\t\t\t\t\tthis.notificationsCenter.fire(\"onError\", this.transport, message);\n\t\t\t\t\t});\n\t\t\t\t\tthis.transport.listen(this, \"onConnect\", function(message){\n\t\t\t\t\t\tthis.connect(message);\n\t\t\t\t\t});\n\t\t\t\t\tthis.transport.listen(this, \"onClose\", function( message){\n\t\t\t\t\t\tthis.quit(message);\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\t\t\t\tdefault :\n\t\t\t\t\tthis.fire(\"onError\", new Error(\"TRANSPORT LAYER NOT DEFINED\") ) ;\n\t\t\t}\n\t\t}\n\n\t\tclear (){\n\t\t\tif ( this.registerInterval  ){\n\t\t\t\tclearInterval(this.registerInterval);\n\t\t\t}\n\t\t\t//TODO\n\t\t\t//clean all setinterval\n\t\t\tfor (var dia in this.dialogs){\n\t\t\t\t//this.dialogs[dia].unregister();\n\t\t\t\tthis.dialogs[dia].clear();\n\t\t\t}\n\t\t}\n\n\t\tquit (message){\n\t\t\tthis.fire(\"onQuit\",this, message);\n\t\t\t//this.unregister();\n\t\t\tthis.clear();\n\t\t}\n\n\t\tconnect (message){\n\t\t\tthis.fire(\"onConnect\",this, message);\n\t\t}\n\n\t\tcreateDialog (method){\n\t\t\tvar dialog = new Dialog( method , this);\n\t\t\tthis.logger(\"SIP NEW DIALOG :\" + dialog.callId, \"DEBUG\");\n\t\t\tthis.dialogs[dialog.callId] = dialog;\n\t\t\treturn dialog ;\n\t\t}\n\n\t\tregister (userName, password, settings){\n\t\t\tthis.logger(\"TRY TO REGISTER SIP : \" + userName + password, \"DEBUG\");\n\t\t\tthis.contact = this.generateContact(userName, password, false, settings);\n\t\t\tthis.diagRegister = this.createDialog(\"REGISTER\");\n\t\t\tthis.diagRegister.register();\n\t\t\treturn this.diagRegister;\n\t\t}\n\n\t\tunregister (){\n\t\t\tif ( this.diagRegister && this.registered ){\n\t\t\t\treturn this.diagRegister.unregister();\n\t\t\t}\n\t\t}\n\n\t\tinvite (userTo, description){\n\t\t\tvar diagInv = this.createDialog(\"INVITE\");\n\t\t\tvar transaction = diagInv.invite( userTo+\"@\"+this.publicAddress , description);\n\t\t\tdiagInv.toName = userTo ;\n\t\t\tthis.fire(\"onInitCall\", userTo ,diagInv, transaction);\n\t\t\treturn diagInv;\n\t\t}\n\n\t\tnotify (userTo, description, type){\n\t\t\tvar diagNotify = this.createDialog(\"NOTIFY\");\n\t\t\tdiagNotify.notify( userTo+\"@\"+this.publicAddress , description, type);\n\t\t\treturn diagNotify;\n\t\t}\n\n\t\tsend (data){\n\t\t\tthis.logger(data, \"INFO\", \"SEND\")\n\t\t\tthis.fire(\"onSend\", data) ;\n\t\t\tthis.transport.send( data );\n\t\t}\n\n\t\tbye (callId){\n\t\t\tfor ( var dialog in this.dialogs ){\n\t\t\t\tif (   callId ){\n\t\t\t\t\tif ( this.dialogs[dialog].callId === callId && this.dialogs[dialog].method !== \"REGISTER\" && this.dialogs[dialog].status === this.dialogs[dialog].statusCode.ESTABLISHED   ){\n\t\t\t\t\t\tthis.dialogs[dialog].bye();\n\t\t\t\t\t\tbreak ;\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tthis.dialogs[dialog].bye();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tstage.io.protocols.sip = SIP ;\n\treturn SIP ;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/io/protocols/sip/sip.es6","module.exports =  function(stage){\n \n\t'use strict';\n\n\tvar defaultSettings = {\n\t\n\t};\n\n\tvar settingsSyslog = {\n\t\tmoduleName:\"REALTIME\",\n\t\tdefaultSeverity:\"INFO\"\n\t};\n\n\tvar send = function(data){\n\t\tthis.protocol.send(data)\t\n\t};\n\n\n\tvar realtime = class realtime  {\n\n\t\tconstructor(urlServer, settings){\n\t\t\tif (! urlServer){\n\t\t\t\tthrow new Error(\"realtime url server is not defined\");\n\t\t\t}\n\t\t\tthis.settings = stage.extend({}, defaultSettings, settings); \n\t\t\tthis.notificationCenter = stage.notificationsCenter.create(this.settings, this);\n\t\t\tthis.syslog =  new stage.syslog(settingsSyslog);\n\t\t\tthis.url = stage.io.urlToOject(urlServer) ;\n\t\t\t//this.crossDomain =  ! stage.io.isSameOrigin(this.url.href);\t\n\t\t\tthis.protocol = new stage.io.protocols.bayeux(this.url); \n\t\t\tthis.services = null;\n\t\t\tthis.subscribedService = {};\n\t\t\tthis.nbSubscribed = 0 ;\n\t\t\tthis.connected = false ;\n\t\t\tthis.publicAddress = null;\n\t\t\tthis.domain = null;\n\n\t\t\t/*\n \t\t \t*\tEVENT REALTIME\n \t\t \t*/\n\t\t\tthis.notificationCenter.listen(this, \"onAuthorized\", function(){\n\t\t\t\tthis.protocol.handshake(this.url.href)\n\t\t\t});\n\n\t\t\t/*\n \t\t \t*\tEVENTS PROTOCOL BAYEUX\n \t\t \t*/\n\t\t\tthis.protocol.notificationCenter.listen(this, \"onMessage\", this.onMessage);\n\t\t\tthis.protocol.notificationCenter.listen(this, \"onHandshake\", function(message, socket){\n\t\t\t\tif (message.ext && message.ext.address){\n\t\t\t\t\tvar addr = JSON.parse(message.ext.address);\n\t\t\t\t\tthis.publicAddress = addr.remoteAddress ;\n\t\t\t\t\tthis.domain = addr.host;\n\t\t\t\t}\n\t\t\t\tthis.notificationCenter.fire(\"onHandshake\", message, socket, this)\t\n\t\t\t});\n\t\t\tthis.protocol.notificationCenter.listen(this, \"onConnect\", function(message){\n\t\t\t\tthis.services = message.data;\n\t\t\t\tthis.connected = true ;\n\t\t\t\tif (message.ext && message.ext.address){\n\t\t\t\t\tvar addr = JSON.parse(message.ext.address);\n\t\t\t\t\tthis.publicAddress = addr.remoteAddress ;\n\t\t\t\t\tthis.domain = addr.host;\n\t\t\t\t}\n\t\t\t\tthis.notificationCenter.fire(\"onConnect\", message, this)\n\t\t\t}); \n\t\t\tthis.protocol.notificationCenter.listen(this, \"onDisconnect\", function(message){\n\t\t\t\tthis.services = message.data;\n\t\t\t\tthis.connected = false ;\n\t\t\t\tthis.notificationCenter.fire(\"onDisconnect\", message, this)\n\t\t\t});\n\t\t\tthis.protocol.notificationCenter.listen(this, \"reConnect\", function(bayeux){\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.start();\n\t\t\t\t}, 60000)\n\t\t\t});\n\t\t\tthis.protocol.notificationCenter.listen(this, \"onSubscribe\", function(message){\n\t\t\t\tvar service = message.subscription.split(\"/\")[2];\n\t\t\t\tthis.subscribedService[service] = message ;\n\t\t\t\tthis.nbSubscribed ++ ;\n\t\t\t\tthis.notificationCenter.fire(\"onSubscribe\", service, message, this)\n\t\t\t}); \n\t\t\tthis.protocol.notificationCenter.listen(this, \"onUnsubscribe\", function(message){\n\t\t\t\tvar service = message.subscription.split(\"/\")[2];\n\t\t\t\tdelete this.subscribedService[service];\n\t\t\t\tthis.nbSubscribed -- ;\n\t\t\t\tthis.notificationCenter.fire(\"onUnSubscribe\", service, message, this)\n\t\t\t});\n\t\t\tthis.protocol.notificationCenter.listen(this, \"onError\", function(code, arg, message){\n\t\t\t\tthis.notificationCenter.fire(\"onError\", code, arg, message);\n\t\t\t}); \n\t\t\tthis.protocol.notificationCenter.listen(this, \"onClose\", function(message){\n\t\t\t\tthis.connected = false ;\n\t\t\t\tthis.notificationCenter.fire(\"onClose\", message);\n\t\t\t\tfor(var service in this.subscribedService ){\n\t\t\t\t\t//this.unSubscribe(service);\n\t\t\t\t\tdelete this.subscribedService[service];\n\t\t\t\t}\n\t\t\t});\n\t\t\t//this.start();\t\n\t\t}\n\n\t\tlisten (){\n\t\t\treturn \tthis.notificationCenter.listen.apply(this.notificationCenter, arguments);\n\t\t}\n\n\t\tunListen (){\n\t\t\treturn \tthis.notificationCenter.unListen.apply(this.notificationCenter, arguments);\n\t\t}\n\n\t\tstart (){\n\t\t\tif ( this.connected ){\n\t\t\t\t//throw new Error(\"connection already started\");\n\t\t\t\tthis.notificationCenter.fire(\"onError\", 500, this, \"connection already started\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar statusCode  = {\n\t\t\t\t\n                \t\t401: (request, type, message) => {\n\t\t\t\t\tvar auth = request.getResponseHeader(\"WWW-Authenticate\");\n\t\t\t\t\tvar res = request.responseText;\n\t\t\t\t\tvar obj =  {\n\t\t\t\t\t\t\"WWW-Authenticate\":request.getResponseHeader(\"WWW-Authenticate\"),\n\t\t\t\t\t\tbody:request.responseText\n\t\t\t\t\t}\n\t\t\t\t\tthis.authenticate = new stage.io.authentication.authenticate(this.url, obj, {\n\t\t\t\t\t\tajax:true,\n\t\t\t\t\t\tonSuccess:(data, type, xhr) => {\n\t\t\t\t\t\t\tthis.notificationCenter.fire('onAuthorized',data, type, xhr);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonError:(obj, type, message) => {\n\t\t\t\t\t\t\tvar res = stage.io.getHeaderJSON(obj);\n\t\t\t\t\t\t\tif (res){\n\t\t\t\t\t\t\t\tthis.notificationCenter.fire('onError',401, obj, res)\t\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tthis.notificationCenter.fire('onError',401, obj, message)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthis.notificationCenter.fire('onUnauthorized', this.authenticate , this);\n                \t\t},\n\t\t\t\t404:(obj, type, message) => {\n\t\t\t\t\t// '404 - realtimeD server not available'\n\t\t\t\t\tthis.notificationCenter.fire('onError',404, obj, message );\t\n\t\t\t\t},\n                \t\t503: (obj, type, message) => {\n\t\t\t\t\t//  '503 - Service Unavailable'\n\t\t\t    \t\tthis.notificationCenter.fire('onError',503, obj, message);\n                \t\t}   \n            \t\t};\n\n\t\t\treturn $.ajax({\n            \t\t\tmethod: 'GET',\n\t\t        \tcache:false,\n            \t\t\turl: this.url.href ,\n            \t\t\tstatusCode:statusCode,\n\t\t        \tsuccess:(data, type, xhr) => {\n\t\t\t\t\tthis.notificationCenter.fire('onAuthorized',data, type, xhr);\n\t\t\t\t},\n            \t\t\terror: (obj, type, message) => {\n\t\t\t\t\tif (obj.status in statusCode )\n\t\t\t\t\t\treturn ;\n\t\t\t\t\tthis.notificationCenter.fire('onError', obj.status, obj, message);\n            \t\t\t}\n        \t\t});\n\t\t}\n\n\t\tsubscribe (name, data){\n\t\t\tif ( ! this.connected ){\n\t\t\t\tthis.notificationCenter.fire('onError', 500, this, \"Not connected\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif ( name in this.services ){\n\t\t\t\tif (name in this.subscribedService ){\n\t\t\t\t\tthis.notificationCenter.fire('onError', 500, this, \"already subscribed\");\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn send.call(this,  this.protocol.subscribe(name, data) ) ;\t\n\t\t\t}\t\n\t\t\tthis.notificationCenter.fire('onError', 500, this, \"service : \"+ name + \" not exist\");\t\n\t\t\treturn false ;\n\t\t}\n\n\t\tunSubscribe (name, data){\n\t\t\tif ( ! this.connected ){\n\t\t\t\tthis.notificationCenter.fire('onError', 500, this, \"Not connected\");\t\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif ( name in this.services ){\n\t\t\t\t\n\t\t\t\tif (  name in this.subscribedService ){\n\t\t\t\t\tvar clientId = this.subscribedService[name].clientId;\n\t\t\t\t\treturn send.call(this,  this.protocol.unSubscribe(name, clientId, data) ) ;\t\n\t\t\t\t}else{\n\t\t\t\t\tthis.notificationCenter.fire('onError', 500, this, \"service : \"+ name + \" not subcribed\");\t\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.notificationCenter.fire('onError', 404, this, \"service : \"+ name + \" not exist\");\t\n\t\t\treturn false;\n\t\t}\n\n\t\tsendMessage (service , data){\n\t\t\tif ( ! this.connected ){\n\t\t\t\tthis.notificationCenter.fire('onError', 500, this, \"Not connected\");\t\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif ( service in this.services ){\n\t\t\t\tif (service in this.subscribedService ){\n\t\t\t\t\tvar clientId = this.subscribedService[service].clientId;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar proto = this.protocol.sendMessage(service, data, clientId) ;\n\t\t\t\t\t\tsend.call(this,  proto );\n\t\t\t\t\t\treturn JSON.parse(proto).id\t\n\t\t\t\t\t}catch(e){\n\t\t\t\t\t\tthis.fire(\"onError\",500, e, e.message);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tthis.notificationCenter.fire('onError', 500, this, \"service : \"+ service + \" not subcribed\");\t\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.fire(\"onError\",404, this, \"service :\"+service + \" not exit\");\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tstop (){\n\t\t\tif (  this.connected ){\n\t\t\t\tthis.protocol.stopReConnect();\n\t\t\t\tfor(var service in this.subscribedService ){\n\t\t\t\t\t//this.unSubscribe(service);\n\t\t\t\t\tdelete this.subscribedService[service];\n\t\t\t\t}\n\t\t\t\treturn send.call(this, this.protocol.disconnect() );\n\t\t\t}\n\t\t\tthrow new Error(\"connection already stoped\");\n\t\t}\n\n\t\tonMessage (message){\n\t\t\tif (message.error){\n\t\t\t\tif (message.channel){\n\t\t\t\t\tthis.notificationCenter.fire(\"onError\", message.error);\n\t\t\t\t}else{\n\t\t\t\t\tthis.notificationCenter.fire(\"onError\",message.id, message.successful );\t\t\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif (message.channel){\n\t\t\t\t\tthis.notificationCenter.fire(\"onMessage\", message.channel.split(\"/\")[2], message.data);\n\t\t\t\t}else{\n\t\t\t\t\tthis.notificationCenter.fire(\"onMessage\",message.id, message.successful);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tstage.realtime = realtime ;\n\treturn realtime ;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/io/realtime/realtime.es6","module.exports =  function(stage){\n\n\n\tvar defaultSettings = {\n\t\tdelay: 0,\n\t\tasync: false,\n\t\t\n\t\tajax: {\n\t\t\tcache: true,\n\t\t\tdataType: 'json',\n\t\t\ttype: 'GET',\n\t\t\tcontentType: 'application/x-www-form-urlencoded; charset=UTF-8'\n\t\t}\n\t};\n\t\n\tvar pollAction = function(ajaxConfig){\n\t\tajaxConfig.data = this.data.get();\n\t\tthis.transport = jQuery.ajax(ajaxConfig);\n\t};\n\t\n\tvar pollling = function(ajaxConfig){\n\t\t\n\t\tif(this.settings.delay){\n\t\t\tthis.timer = setTimeout(pollAction.bind(this, ajaxConfig), this.settings.delay);\t\n\t\t} else {\n\t\t\tpollAction.call(this, ajaxConfig);\n\t\t}\t\t\n\t};\n\t\n\t/*\n \t *\n \t *\n \t */\n\tvar longPoll = class longPoll extends stage.io.transports.poll  {\n\n\t\tconstructor(url, settings){\n\t\t\tsuper(url, settings);\n\t\t\tthis.settings = stage.extend(true, {}, defaultSettings, settings);\n\t\t}\n\n\t\tstart (){\n\t\t\tvar ajaxConfig = this.buildAjaxSettings();\n\t\t\tthis.transport = null;\n\t\t\tajaxConfig.complete = (xhr, status) => {\n\t\t\t\tpollling.call(this, ajaxConfig);\n\t\t\t};\n\t\t\tpollling.call(this, ajaxConfig);\n\t\t\treturn this;\n\t\t}\n\n\t\tstop (){\n\t\t\tthis.transport.abort();\n\t\t\tthis.transport = null;\n\n\t\t\tif(this.timer){\n\t\t\t\tclearTimeout(this.timer);\n\t\t\t}\n\t\t\tthis.connectState = false;\n\t\t\tthis.fire('onStop', this);\n\t\t\treturn this;\n\t\t}\n\t}\n\n\tstage.io.transports.longPoll = longPoll ;\n\treturn longPoll;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/io/transports/in/longPoll.es6","module.exports =  function(stage){\n\n\tvar defaultSettings = {\n\t\tdelay: 1000,\n\t\tasync : true,\n\t\t\n\t\tajax: {\n\t\t\tcache: true,\n\t\t\tdataType: 'json',\n\t\t\ttype: 'GET',\n\t\t\tcontentType: 'application/x-www-form-urlencoded; charset=UTF-8'\n\t\t}\n\t};\n\n\tvar pollling = function(ajaxConfig){\n\t\t\n\t\tvar tokenKey = (new Date()).getTime();\n\t\tajaxConfig.data = this.data.get();\n\t\tvar transport = jQuery.ajax(ajaxConfig);\n\t\ttransport.tokenKey = tokenKey;\n\t\tthis.transport[tokenKey] = transport;\n\t};\n\t\n\t/*\n \t *\n \t */\n\tvar httpData = class httpData  {\n\t\tconstructor(contentType, method){\n\t\t\tthis.reset();\n\t\t\tif(contentType) {\n\t\t\t\tthis.contentType = contentType;\n\t\t\t}\n\t\t\tif(method) {\n\t\t\t\tthis.method = method;\n\t\t\t}\n\t\t}\n\n\t\tadd (data, permanent){\n\t\t\tthis[permanent ? \"permanent\" : \"transient\"] = data;\n\t\t}\n\n\t\tget (){\n\n\t    \t\tvar data = (this.transient ? this.transient : this.permanent);\n\t    \t\tthis.transient = '';\n        \t\t//return this.contentType.search('json') >= 0 && typeof(data) == 'object' && this.method.toUpperCase() != 'GET' ? JSON.stringify(data) : data;\n\t    \t\tswitch(this.contentType.split(';')[0].replace(/ /g, '')){\n\t    \t\t\tcase 'application/json':\n\t    \t\t\tcase 'text/json':\n\t    \t\t\t\tif(this.method.toUpperCase() != 'GET' && typeof(data) == 'object'){\n\t    \t\t\t\t\tdata = JSON.stringify(data);\n\t    \t\t\t\t} \n\t    \t\t\t\tbreak;\n\t    \t\t}\n\n\t    \t\treturn data;\n\t\t}\n\n\t\treset (){\n\t    \t\tthis.contentType = '';\n\t    \t\tthis.method = 'GET';\n\t\t\tthis.permanent = '';\n\t\t\tthis.transient = '';\n\t\t}\n\n\t};\n\n\t/*\n\t *\tEVENT :\n\t *\t\tonStart\n\t *\t\tonStop\n\t *\t\tonMessage\n\t *\t\tonError \n\t */\n\tvar poll = class poll extends stage.io.transport  {\n\n\t\tconstructor(url, settings){\n\t\t\tsuper(url, settings);\n\t\t\tthis.settings = jQuery.extend(true, {}, defaultSettings, settings);\n\t\t\tthis.data = new httpData(this.settings.ajax.contentType, this.settings.ajax.type);\n\t\t\tthis.connectState = false;\t\n\t\t}\n\n\t\tbuildAjaxSettings (){\n\n\t\t\tvar settings = jQuery.extend(true, {}, this.settings.ajax,{\n\t\t\t\turl: this.url.href,\n\t\t\t    crossDomain: this.crossDomain,\n\t\t\t    beforeSend: function(xhr){\n\t\t\t\t    if ( ! this.connectState){\n\t\t\t\t\t    this.fire.call(this, \"onStart\", this);\n\t\t\t\t\t    this.connectState = true;\n\t\t\t\t    }\n\t\t\t    }.bind(this),\n\t\t\t    success: function(data, state, xhr){\n\t\t\t\t    this.fire(\"onMessage\", data , this, xhr);\n\t\t\t    }.bind(this),\n\t\t\t    error: function(xhr, status, error){\n\t\t\t\t    switch(status){\n\t\t\t\t\t    case 'abort':\n\t\t\t\t\t\t    this.fire(\"onAbort\", error, this, xhr);\t\n\t\t\t\t\t\t    break;\n\n\t\t\t\t\t    case 'timeout':\n\t\t\t\t\t\t    this.fire(\"onTimeout\", error, this, xhr);\t\n\t\t\t\t\t\t    break;\n\n\t\t\t\t\t    default:\n\t\t\t\t\t\t    this.fire(\"onError\", error, this, xhr);\n\t\t\t\t    }\n\t\t\t    }.bind(this)\n\t\t\t});\n\t\t\treturn settings;\n\t\t}\n\n\t\tstart (){\n\n\t\t\tvar ajaxConfig = this.buildAjaxSettings();\n\n\t\t\tthis.transport = {};\n\t\t\tajaxConfig.complete = function(xhr, status){\n\t\t\t\tif(this.transport[xhr.tokenKey]) delete this.transport[xhr.tokenKey];\n\t\t\t}.bind(this);\n\t\t\tpollling.call(this, ajaxConfig);\n\t\t\tthis.idInterval = setInterval(pollling.bind(this, ajaxConfig), this.settings.delay);\n\n\t\t\treturn this;\n\t\t}\n\n\t\tsetData (data, permanent){\n\t\t\tthis.data.add(data, permanent);\n\t\t\treturn this;\n\t\t}\n\n\t\tstop (){\n\n\t\t\tif (Object.keys(this.transport).length > 0){\n\t\t\t\tfor(var tokenKey in this.transport){\n\t\t\t\t\tthis.transport[tokenKey].abort();\n\t\t\t\t\tdelete this.transport[tokenKey];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.idInterval) {\n\t\t\t\tclearInterval(this.idInterval);\n\t\t\t\tthis.idInterval = null;\n\t\t\t}\n\n\t\t\tthis.connectState = false;\n\n\t\t\tthis.fire('onStop', this);\n\t\t\treturn this;\n\t\t}\n\n\t\tdestroy (){\n\t\t\tthis.close();\n\t\t\treturn this;\n\t\t}\n\t};\t\n\t\n\tstage.io.transports.poll = poll ;\n\treturn poll;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/io/transports/in/poll.es6","module.exports =  function(stage){\n\n\tvar defaultSettings = {\n\t\ttype:\"websocket\" //   websocket | poll | longPoll \n\t};\n\n\tvar bestTransport = function(){\n\t\n\t}; \n\n\tvar socket = class socket extends stage.notificationsCenter.notification  {\n\n\t\tconstructor(url, localSettings){\n\n\t\t\tvar settings = stage.extend({}, defaultSettings, localSettings);\n\n\t\t\tsuper(settings);\t\n\n\t\t\tthis.settings = settings ;\n\n\t\t\tswitch (this.settings.type){\n\t\t\t\tcase \"websocket\":\n\t\t\t\t\tthis.socket = stage.io.transports.websocket ; \n\t\t\t\t\tbreak;\n\t\t\t\tcase \"poll\":\n\t\t\t\t\tthis.socket = stage.io.transports.ajax ;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"longPoll\":\n\t\t\t\t\tthis.socket = stage.io.transports.ajax ;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tthis.listen(this, \"onConnect\");\n\t\t\tthis.listen(this, \"onClose\");\n\t\t\tthis.listen(this, \"onError\");\n\t\t\tthis.listen(this, \"onMessage\");\n\t\t\tthis.listen(this, \"onTimeout\");\n\t\t}\n\n\t\twrite(settings){\n\t\t\tthis.transport.send();\n\t\t}\n\n\t\tclose (settings){\n\t\t\tthis.transport.close();\n\t\t}\n\n\t\tconnect (url, settings){\n\t\t\tthis.transport = new this.socket(url, settings);\n\t\t\tthis.transport.onmessage = this.listen(this, \"onMessage\");\n\t\t}\n\n\t\tdestroy (settings){\n\t\t\tthis.transport = null ;\n\t\t\tthis.clearNotifications();\n\t\t}\n\t};\n\n\tstage.io.socket = socket ;\n\treturn socket ;\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/io/transports/socket.es6","module.exports =  function(stage){\n\n\t/*\n \t *\n \t */\n\tvar websocket = class websocket extends stage.io.transport  {\n\n\t\tconstructor(url, settings){\n\t\t\tif (url){\n\t\t\t\tsuper(url, settings);\n\t\t\t\tthis.connect(url, settings);\n\t\t\t}else{\n\t\t\t\tsuper();\n\t\t\t\tthis.socket = null;\n\t\t\t}\n\t\t}\n\n\t\tconnect (url, settings){\n\t\t\tthis.socket = new WebSocket(url, settings.protocol );\n\t\t\tthis.socket.onmessage = this.listen(this, \"onMessage\");\n\t\t\tthis.socket.onerror = this.listen(this, \"onError\");\n\t\t\tthis.socket.onopen = this.listen(this, \"onConnect\");\n\t\t\tthis.socket.onclose = this.listen(this, \"onClose\");\n\t\t\treturn this.socket ;\n\t\t}\n\n\n\t\tclose (url, settings){\n\t\t\tthis.socket.close();\n\t\t}\n\n\t\tsend (data){\n\t\t\tthis.socket.send(data);\n\t\t}\n\n\t\tdestroy (data){\n\t\t\tdelete this.socket ;\n\t\t\tthis.socket = null;\n\t\t}\n\t};\n\n\tstage.io.transports.websocket = websocket ;\n\n\treturn websocket;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/io/transports/websockets/websocket.es6","module.exports =  function(stage){\n\n\t'use strict';\n\n\t\t \n\tvar appKernel = class appKernel extends  stage.kernel  {\n\n\t\tconstructor(url, environnement, settings){\n\n\t\t\tswitch (arguments.length){\n\t\t\t\tcase 0 :\n\t\t\t\t\turl = null ;\n\t\t\t\t\tenvironnement = \"prod\" ;\n\t\t\t\t\tsettings = {} ;\n\t\t\t\tbreak;\n\t\t\t\tcase 1 :\n\t\t\t\t\tenvironnement = url ;\n\t\t\t\t\tsettings = {} ;\n\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\tsettings = environnement;\n\t\t\t\t\tenvironnement = url;\n\t\t\t\t\turl = null ;\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tsuper(environnement, settings);\n\t\t\tif ( url ){\n\t\t\t\tthis.loadModule(url,{\n\t\t\t\t\tasync:false\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tthis.fire(\"onBoot\", this);\n\t\t\t}\n\t\t}\n\t};\n\n\tstage.appKernel = appKernel ;\n\treturn appKernel ;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/kernel/appKernel.es6","const shortId = require('shortid');\n\nmodule.exports =  function(stage){\n\n\t'use strict';\n\n\tvar generateId = function(){\n\t\treturn shortId.generate();\n\t};\n\n\n\tvar loader = function(){\n\t\t\n\t\tvar AJAX = {\n\t\t\tcss : {\n\t\t\t\tmineType :\t\"text/css\",\n\t\t\t\ttag:\t\t\"style\",\n\t\t\t\tmedia:\t\t\"screen\",\n\t\t\t\ttype:\t\t\"stylesheet\",\n\t\t\t\tposition:\t\"HEAD\"\n\t\t\t},\n\t\t\tjs:{\n\t\t\t\tmineType :\t\"text/javascript\",\n\t\t\t\ttag:\t\t\"script\",\n\t\t\t\tposition:\t\"BODY\"\n\t\t\t}\n\t\t};\n\n\t\tvar SCRIPT = {\n\t\t\tcss : {\n\t\t\t\tmineType :\t\"text/css\",\n\t\t\t\ttag:\t\t\"link\",\n\t\t\t\tmedia:\t\t\"screen\",\n\t\t\t\ttype:\t\t\"stylesheet\",\n\t\t\t\tposition:\t\"HEAD\"\n\t\t\t},\n\t\t\tjs:{\n\t\t\t\tmineType :\t\"text/javascript\",\n\t\t\t\ttag:\t\t\"script\",\n\t\t\t\tposition:\t\"BODY\"\n\t\t\t}\n\t\t};\n\n\t\tvar insert = function(position, script){\n\t\t\tswitch(position){\n\t\t\t\tcase \"HEAD\" :\n\t\t\t\t\tvar head = document.getElementsByTagName('head')[0];\n\t\t\t\t\thead.appendChild(script);\n\t\t\t\tbreak;\n\t\t\t\tcase \"BODY\" :\n\t\t\t\t\tvar body = document.getElementsByTagName('body')[0]\n\t\t\t\t\tbody.appendChild(script);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t};\n\n\n\t\treturn function(src, tag , id, transport, callback){\n\t\t\t//if (tag == \"js\") transport = \"ajax\";\n\t\t\t//if (tag == \"css\") transport = \"ajax\";\n\t\t\tswitch (tag){\n\t\t\t\tcase \"js\":\n\t\t\t\t\t/*var def = AJAX[tag];\n\t\t\t\t\tvar script = document.createElement(def.tag);\n\t\t\t\t\tscript.setAttribute('type', def.mineType);\n\t\t\t\t\tscript.setAttribute('id', id + '_'+tag);\n\t\t\t\t\tif ( tag === \"css\" ){\n\t\t\t\t\t\tscript.setAttribute('media', def.media);\n\t\t\t\t\t}\n\t\t\t\t\t$.ajax(src, {\n\t\t\t\t\t\tasync:false,\n\t\t\t\t\t\t//cache:true,\n\t\t\t\t\t\tdataType:\"text\",\n\t\t\t\t\t\tsuccess:function(data, status, xhr){\n\t\t\t\t\t\t\tthis.cache[id] = script ;\n\t\t\t\t\t\t\tinsert(def.position, script);\n\t\t\t\t\t\t\t$(script).text(data);\n\t\t\t\t\t\t\tthis.logger(\"LOAD FILE :\" + src,\"DEBUG\");\n\t\t\t\t\t\t\tcallback(null, xhr);\n\t\t\t\t\t\t}.bind(this),\n\t\t\t\t\t\terror:function(xhr, status, message){\n\t\t\t\t\t\t\tthis.logger(src+\" :\" +message,\"ERROR\");\n\t\t\t\t\t\t\tcallback(message, xhr);\n\t\t\t\t\t\t}.bind(this)\n\t\t\t\t\t});*/\n\t\t\t\t\t \n\t\t\t\t\treturn $.ajax({\n\t\t\t\t\t\turl: src,\n\t\t\t\t\t        async:false,\n\t\t\t\t\t\tdataType: \"script\",\n\t\t\t\t\t\tsuccess: (data, status, xhr) => {\n\t\t\t\t\t\t\t//this.logger(\"LOAD FILE :\" + src,\"DEBUG\");\n\t\t\t\t\t\t\tcallback(null, xhr);\t\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror:(xhr, status, message) => {\n\t\t\t\t\t\t\tthis.logger(src+\" :\" +message,\"ERROR\");\n\t\t\t\t\t\t\tcallback(message, xhr);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\n\n\n\t\t\t\tbreak;\n\t\t\t\tcase \"css\":\n\t\t\t\t\tvar def = SCRIPT[tag];\n\t\t\t\t\tvar script = document.createElement(def.tag);\n\t\t\t\t\tscript.setAttribute('type', def.mineType);\n\t\t\t\t\tscript.setAttribute('id', id + '_'+tag);\n\t\t\t\t\tif ( tag === \"css\" ){\n\t\t\t\t\t\tscript.setAttribute('media', def.media);\n\t\t\t\t\t\tscript.href = src;/*+ '?time=' + id;*/\n\t\t\t\t\t\tscript.rel = def.type;\n\t\t\t\t\t\tscript.async = false;\n\t\t\t\t\t}\n\t\t\t\t\tif (tag === \"js\"){\n\t\t\t\t\t\tscript.src = src;/*+ '?time=' + id;*/\n\t\t\t\t\t\tscript.async = false;\n\t\t\t\t\t}\n\t\t\t\t\tscript.onload = () => {\n\t\t\t\t\t\tthis.cache[id] = script;\n\t\t\t\t\t\tthis.logger(\"LOAD FILE :\" + src,\"DEBUG\");\n\t\t\t\t\t\tcallback(null, script);\n\t\t\t\t\t};\n\t\t\t\t\tscript.onerror = (error) => {\n\t\t\t\t\t\tthis.logger(src ,\"ERROR\");\n\t\t\t\t\t\tcallback(error, script);\n\t\t\t\t\t};\n\t\t\t\t\tinsert(def.position, script);\n\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.logger( new Error (\"autoload  type transport error \"), \"ERROR\" );\n\t\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn script ;\n\t\t}\n\t}();\n\n\n\n\t/*\n \t *\n \t * CLASS AUTOLOAD\n \t *\n \t */\n\tvar defaultSetting = {\n\t\ttransport:\"script\",\n\t\tprefix:null\n\t};\n\n\tvar regType = /(.*)\\.(js)$|(.*)\\.(css)$/;\n\n\tvar autoload = class autoload {\n\n\t\tconstructor(kernel, settings){\n\t\t\tthis.settings = jQuery.extend({}, defaultSetting, settings)\n\t\t\tthis.cache = {};\n\t\t\tthis.prefix = this.settings.prefix  ;\n\t\t\tthis.syslog = kernel.syslog || null ;\n\t\t\tthis.transport = this.settings.transport ;\n\t\t\tthis.logger(\"INITIALIZE AUTOLOAD SERVICE\", \"DEBUG\");\n\t\t}\n\n\t\tload (file, callback){\n\t\t\tvar id = generateId();\n\t\t\tvar res = regType.exec(file);\n\t\t\tif ( ! res) {\n\t\t\t\tthis.logger(\"autoload error type file  \",\"ERROR\")\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tvar script = loader.call(this, file, res[2] || res[4] , id, this.transport, callback)\n\t\t\treturn id \n\t\t}\n\n\t\tlogger (pci, severity, msgid,  msg){\n\t\t\tif (this.syslog){\n\t\t\t\tif (! msgid) msgid = \"AUTOLOADER  \";\n\t\t\t\treturn this.syslog.logger(pci, severity , msgid,  msg);\n\t\t\t}else{\n\t\t\t\tconsole.log(pci);\n\t\t\t}\n\t\t}\n\n\t\tunLoad (id, callback){\n\t\t\tif (id in this.cache){\n\t\t\t\tvar tag = this.cache[id]\n\t\t\t\ttag.parentNode.removeChild(tag);\n\t\t\t\tdelete \tthis.cache[id] ;\t\n\t\t\t\treturn callback(id);\n\t\t\t}else{\n\t\t\t\tthis.logger(\"Autoload unLoad no tag find :\" +id ,\"ERROR\")\n\t\t\t}\n\t\t}\n\t};\n\n\tstage.autoload =  autoload ;\n\treturn autoload ; \n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/kernel/autoload.es6","const shortId = require('shortid');\n\nmodule.exports =  function(stage){\n\n\t'use strict';\n\n\n\tvar ISDefined = function(ele){\n\t\tif (ele !== null && ele !== undefined ){\n\t\t\treturn true ;\n\t\t}\n\t\treturn false;\n\t};\n\n\tvar generateId = function(){\n\t\treturn shortId.generate();\n\t};\n\n\tvar parseParameterString = function(str, value){\n\t\tvar ns = null ; \n\t\tswitch( stage.typeOf(str) ){\n\t\t\tcase \"string\" :\n\t\t\t\treturn parseParameterString.call(this,str.split(\".\") , value);\n\t\t\tcase \"array\" :\n\t\t\t\tswitch(str.length){\n\t\t\t\t\tcase 1 :\n\t\t\t\t\t\tns = Array.prototype.shift.call(str);\n\t\t\t\t\t\tif ( ! this[ns] ){\n\t\t\t\t\t\t\tthis[ns] = value;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif ( ISDefined(value) ){\n\t\t\t\t\t\t\t\tthis[ns] = value ;\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\treturn this[ns];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn value ;\n\t\t\t\t\tdefault :\n\t\t\t\t\t\tns = Array.prototype.shift.call(str);\n\t\t\t\t\t\tif ( ! this[ns] && ISDefined(value)  ){\n\t\t\t\t\t\t\tthis[ns] = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn parseParameterString.call(this[ns], str, value);\t\n\t\t\t\t}\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t}\n\t};\n\n\t/*\n \t *\n \t *\tCONTAINER CLASS\n \t *\n \t */\n\tvar Container = class Container {\n\n\t\tconstructor (services, parameters){\n\t\t\tthis.protoService = function(){};\n\t\t\tthis.protoParameters = function(){};\n\t\t\tthis.scope = {};\n\t\t\tthis.services = new this.protoService();\n\t\t\tif (services && typeof services === \"object\"){\n\t\t\t\tfor (var service in services){\n\t\t\t\t\tthis.set(service, services[service]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.parameters = new this.protoParameters();\n\t\t\tif (parameters && typeof parameters === \"object\"){\n\t\t\t\tfor (var parameter in parameters){\n\t\t\t\t\tthis.set(parameter, parameters[parameter]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlogger (pci, severity, msgid,  msg){\n\t\t\tvar syslog = this.get(\"syslog\");\n\t\t\tif (! msgid) { msgid = \"CONTAINER SERVICES \"; }\n\t\t\treturn syslog.logger(pci, severity, msgid,  msg);\n\t\t}\n\n\t\tset (name, object){\n\t\t\treturn this.protoService.prototype[name] = object;\n\t\t}\n\n\t\tget (name){\n\t\t\tif (name in this.services){\n\t\t\t\treturn this.services[name];\n\t\t\t}\n\t\t\treturn null;\n\t\t\t//this.logger(\"GET : \" + name+\" don't exist\", \"WARNING\");\t\n\t\t}\n\n\t\thas (name){\n\t\t\treturn this.services[name];\n\t\t}\n\n\t\taddScope (name){\n\t\t\tif (! this.scope[name] ){\n\t\t\t\treturn  this.scope[name] = {};\n\t\t\t}\n\t\t\treturn this.scope[name];\n\t\t}\n\n\t\tenterScope (name){\n\t\t\tvar sc = new Scope(name, this);\n\t\t\tthis.scope[name][sc.id] = sc ;\n\t\t\treturn sc;\n\t\t}\n\n\t\tenterScopeExtended (name){\n\t\t\tvar sc = new ExtendedScope(name, this);\n\t\t\tthis.scope[name][sc.id] = sc ;\n\t\t\treturn sc;\n\t\t}\n\n\t\tleaveScope (scope){\n\t\t\tif ( this.scope[scope.name] ){\n\t\t\t\tvar sc = this.scope[scope.name][scope.id];\n\t\t\t\tif (sc){\n\t\t\t\t\tsc.clean();\n\t\t\t\t\t//console.log(\"pass leaveScope \"+ scope.id)\n\t\t\t\t\tdelete this.scope[scope.name][scope.id];\n\t\t\t\t\tsc= null ;\n\t\t\t\t}\n\t\t\t\t//console.log(this.scope)\n\t\t\t}\n\t\t}\n\n\t\tremoveScope (name){\n\t\t\tif ( this.scope[name] ){\n\t\t\t\tfor( var scope in this.scope[name] ){\n\t\t\t\t\tthis.leaveScope(this.scope[name][scope]) ;\n\t\t\t\t}\n\t\t\t\tdelete this.scope[name] ;\n\t\t\t}\n\t\t}\n\n\t\tsetParameters (name, str){\n\t\t\tif (typeof name !== \"string\"){\n\t\t\t\tthis.logger(new Error(\"setParameters : container parameter name must be a string\"));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif ( ! ISDefined(str) ){\n\t\t\t\tthis.logger(new Error(\"setParameters : \"+name+\" container parameter value must be define\"));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif ( parseParameterString.call(this.protoParameters.prototype, name, str) === str ){\n\t\t\t\treturn str;\n\t\t\t}else{\n\t\t\t\tthis.logger(new Error(\"container parameter \"+ name+\" parse error\"));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tgetParameters (name){\n\t\t\tif (typeof name !== \"string\"){\n\t\t\t\tthis.logger(new Error(\"container parameter name must be a string\"));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t//return parseParameterString.call(this.protoParameters.prototype, name, null);  \n\t\t\treturn parseParameterString.call(this.parameters, name, null);  \n\t\t}\n\t};\n\n\t/*\n \t *\n \t *\tSCOPE CLASS\n \t *\n \t */\n\n\tvar Scope = class Scope extends Container {\n\n\t\tconstructor( name, parent){\n    \t\t\tsuper();\n    \t\t\tthis.name = name;\n\t\t\tthis.parent = parent;\n    \t\t\tthis.services = new parent.protoService();\n    \t\t\tthis.parameters = new parent.protoParameters();\n    \t\t\tthis.scope = parent.scope;\n\t\t\tthis.id = generateId();\n\n\t\t}\n\n\t\tset (name, obj){\n    \t\t\tthis.services[name] = obj ;\n    \t\t\treturn super.set(name, obj);\n\t\t}\n\n\t\tclean (){\n\t\t\tthis.services = null ; \n\t\t\tdelete this.services ;\n\t\t\tthis.parameters = null ;\n\t\t\tdelete this.parameters ;\n\t\t}\n\n\t\tsetParameters (name, str){\n\t\t\tif ( parseParameterString.call(this.parameters, name, str) === str ){\n\t\t\t\treturn super.setParameters(name, str);\n\t\t\t}else{\n\t\t\t\tthis.logger(new Error(\"container parameter \"+ name+\" parse error\"));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t};\n\n\t/*\n \t *\n \t *\tExtendedScope CLASS\n \t *\n \t */\n\tvar ExtendedScope = class ExtendedScope extends Container {\n\n\t\tconstructor (name, parent){\n    \t\t\tsuper();\n    \t\t\tthis.name = name;\n\t\t\tthis.parent = parent;\n    \t\t\tthis.services = new parent.protoService();\n    \t\t\tthis.parameters = new parent.protoParameters();\n    \t\t\tthis.scope = parent.scope;\n\t\t\tthis.id = generateId();\n\n\t\t\tthis.protoService = function(){};\n\t\t\tthis.protoService.prototype = stage.extend({},this.parent.protoService.prototype);\n\n\t\t\tthis.protoParameters = function(){};\n\t\t\tthis.protoParameters.prototype = stage.extend({},this.parent.protoParameters.prototype) ;\n\t\t}\n\n\t\tclean (){\n\t\t\tthis.services = null ; \n\t\t\tdelete this.services ;\n\t\t\tthis.parameters = null ;\n\t\t\tdelete this.parameters ;\n\t\t\tthis.protoService = null ;\n\t\t\tthis.protoParameters = null ;\n\t\t}\n\n\n\t\tset (name, obj){\n    \t\t\tthis.services[name] = obj ;\n    \t\t\treturn super.set(name, obj);\n\t\t}\n\n\t\tsetParameters (name, str){\n\t\t\tif ( parseParameterString.call(this.parameters, name, str) === str ){\n\t\t\t\treturn super.setParameters(name, str);\n\t\t\t}else{\n\t\t\t\tthis.logger(new Error(\"container parameter \"+ name+\" parse error\"));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t};\n\t\n\tstage.Container = Container ;\n\treturn Container;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/kernel/container.es6","module.exports =  function(stage){\n\n\t'use strict';\n\n\n\t/*\n \t *\n \t *\tCLASS CONTROLLER\n \t *\n \t */\n\tvar tabFxEvent = [\"stage-click\", \"stage-dblclick\", \"stage-focus\", \"stage-blur\", \"stage-mouseover\", \"stage-mouseout\", \"stage-mouseenter\", \"stage-mouseleave\", \"stage-change\"];\n\n\tvar Controller = class Controller extends stage.Service{\n\n\t\tconstructor(name, container, module){\n\t\t\tsuper(name, container, container.get(\"notificationsCenter\") );\n\t\t\tthis.module = module ; \n\t\t\tthis.i18n = this.kernel.i18n;\n\t\t\tthis.router = this.kernel.router;\n\t\t}\n\t\t\n\t\tredirect (url){\n\t\t\treturn this.router.redirect.apply(this.router, arguments)\n\t\t}\n\n\t\t/*\n\t \t*\n\t \t*\n\t \t*/\n\t\tforward (pattern, args){\n\t\t\treturn this.router.forward(pattern, args)\n\t\t}\n\n\t\t/*\n\t \t*\n\t \t*\n\t \t*/\n\t\tgenerateUrl (name, variables, absolute){\n\t\t\tif (absolute === true){\n\t\t\t\tvar url = this.router.url().split(\"#\");\n\t\t\t\tabsolute = this.router.url[0];\n\t\t\t}\n\t\t\treturn this.router.generateUrl.apply(this.router, arguments);\n\t\t}\n\n\t\tevalInContext (js, context){\n\t\t\tvar func = function(context) { \n\t\t\t\tvar $controller = context;\n\t\t\t\treturn function(js){\n\t\t\t\t\t\"use strict\";\n\t\t\t\t\treturn eval(js);\n\t\t\t\t}\n\t\t\t}(this);\n\t\t\ttry {\n\t\t\t\treturn func.call( context || this , jQuery.trim( js ));\n\t\t\t}catch(e){\n\t\t\t\tthis.logger(\"DOM PARSER TWIG ERROR \" + e, \"ERROR\");\t\n\t\t\t}\n\t\t}\n\n\n\t\tdomParser (domElement){\n\t\t\tdomElement.find('[' + tabFxEvent.join('],[') + ']').each((index, ele) => {\n\t\t\t\tvar attributes = ele.attributes;\n\t\t\t\tvar jElement = $(ele);\n\t\t\t\tvar ctrl = jElement.closest('[stage-ctrl]');\n\t\t\t\tvar scope = null ;\n\t\t\t\tif(ctrl.length){\n\t\t\t\t\tvar pattern = $(ctrl).attr(\"stage-ctrl\") ;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tscope = this.router.resolvePattern(pattern).controller;\n\t\t\t\t\t}catch (e){\n\t\t\t\t\t\tthis.logger(\"DOM PARSER ERROR : \" + e , \"ERROR\")\n\t\t\t\t\t\treturn ;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tscope = this;\n\t\t\t\t}\n\t\t\t\tfor(var i = 0; i < attributes.length; i++){\n\t\t\t\t\tvar attribute = attributes[i];\n\t\t\t\t\tif(tabFxEvent.indexOf(attribute.name) > -1){\n\t\t\t\t\t\tvar ele = function(){\n\t\t\t\t\t\t\tvar content = attribute.value;\n\t\t\t\t\t\t\tjElement.on(attribute.name.replace('stage-', ''), function(){\n\t\t\t\t\t\t\t\tscope.evalInContext(content, this);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t/*\n\t \t*\n\t \t*\n\t \t*/\n\t\trender (element, partial, type){\n\t\t\tvar ele = $(element);\n\t\t\ttry {\n\t\t\t\tswitch (type){\n\t\t\t\t\tcase \"append\":\n\t\t\t\t\t\tele.append(partial) ;\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"prepend\":\n\t\t\t\t\t\tele.prepend(partial) ;\n\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tele.empty();\n\t\t\t\t\t\tele.html(partial);\n\n\t\t\t\t}\n\t\t\t\treturn this.domParser(ele);\n\t\t\t}catch(e){\n\t\t\t\tthis.logger(\"DOM PARSER TWIG ERROR : \"+e, \"ERROR\") ;\n\t\t\t}\n\n\t\t}\n\n\t\trenderPartial (pattern, obj){\n\t\t\ttry {\n\t\t\t\tvar template = this.module.getTemplatePattern(pattern);\n\t\t\t\treturn template.render(obj);\n\t\t\t}catch(e){\n\t\t\t\tthis.logger(e, \"ERROR\")\n\t\t\t}\n\t\t}\n\t};\n\n\tstage.Controller = Controller ;\n\treturn Controller ;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/kernel/controller.es6","const Twig = require(\"twig\");\n\nmodule.exports =  function(stage){\n\n\t'use strict';\n\n\tvar settingsSyslog = {\n\t\t//rateLimit:100,\n\t\t//burstLimit:10,\n\t\tmoduleName:\"KERNEL\",\n\t\tdefaultSeverity:\"INFO\"\n\t};\n\n\tvar defaultSettings = {\n\t\tdebug:false,\n\t\trouter:true,\n\t\ti18n:true,\n\t\tlocation:{\n\t\t\thtml5Mode:false,\n\t\t\thashPrefix:\"/\"\n\t\t}\n\t};\n\n\tvar defaultEnvEnable = {\n\t\tdev:\t\ttrue,\n\t\tdevelopment:\ttrue,\t\n\t\tprod:\t\ttrue,\n\t\tproduction:\ttrue,\t\n\t};\n\n\n\t/*\n \t *\tOVERRIDE TWIG IMPORT TEMPLATE\n \t */\n\tvar loadRemoteTwig = function(Twig, location, params, callback, error_callback){\n\t\tvar id  = params.id,\n\t\tmethod      = params.method,\n\t\tasync       = params.async,\n\t\tprecompiled = params.precompiled,\n\t\ttemplate    = null;\n\n\t\t// Default to async\n\t\tif (async === undefined) async = true;\n\n\t\t// Default to the URL so the template is cached.\n\t\tif (id === undefined) {\n\t\t\tid = location;\n\t\t}\n\t\tparams.id = id;\n\n\t\t// Check for existing template\n\t\tif (Twig.cache && Twig.Templates.registry.hasOwnProperty(id)) {\n\t\t\t// A template is already saved with the given id.\n\t\t\tif (callback) {\n\t\t\t\tcallback(Twig.Templates.registry[id]);\n\t\t\t}\n\t\t\treturn Twig.Templates.registry[id];\n\t\t}\n\t\t//console.log(params.async)\n\t\t$.ajax({\n\t\t\turl:location,\n\t\t\tasync:async,\n\t\t\tsuccess:(mydata, status, xhr) => {\n\t\t\t\tvar moduleName = this.getModuleName( location )\n\t\t\t        if (precompiled === true) {\n\t\t\t\t\tmydata = JSON.parse(mydata);\n\t\t\t\t}\n\t\t\t\tparams.url = location;\n\t\t\t\tparams.data = mydata;\n\t\t\t\ttemplate = new Twig.Template(params);\n\t\t\t\tif (this.modules[moduleName]){\n\t\t\t\t\tvar module = this.modules[moduleName] ;\n\t\t\t\t\tvar name = module.getTemplateName(location)\n\t\t\t\t\tmodule.registerTemplate(name, template, \"template\")\n\t\t\t\t}\n\t\t\t\tif (callback) {\n\t\t\t\t\tcallback(template);\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: (xrh, status, message) => {\n\t\t\t\terror_callback(xrh, status, message)\n\t\t\t}\n\t\t})\n\t\tif (async === false) {\n\t\t\treturn template;\n\t\t} else {\n\t\t\t// placeholder for now, should eventually return a deferred object.\n\t\t\treturn true;\n\t\t}\t\n\t};\n\n\t/*\n\t*\n\t*\tKERNEL CLASS\t\n\t*/\n\n\tvar Kernel = class Kernel  extends stage.Service {\n\n\t\tconstructor(environment, settings){\n\n\t\t\tsuper(\"KERNEL\",null, null ,{\n\t\t\t\tsyslog:settingsSyslog\n\t\t\t});\n\n\t\t\tthis.container.set(\"kernel\", this);\n\n\t\t\tthis.modules = {};\n\t\t\tthis.settings = stage.extend(true, {}, defaultSettings , settings );\n\n\t\t\tif ( environment in defaultEnvEnable ){\n\t\t\t\tswitch ( environment ){\n\t\t\t\t\tcase \"dev\" :\n\t\t\t\t\tcase \"development\" :\n\t\t\t\t\t\tthis.environment = \"dev\";\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"prod\" :\n\t\t\t\t\tcase \"production\" :\n\t\t\t\t\t\tthis.environment = \"prod\";\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.logger(\"Bad Variable environment :\" + environment,\"WARNING\");\n\t\t\t\tthis.environment = \"prod\";\n\t\t\t}\n\n\t\t\tthis.debug = this.settings.debug ;\n\t\t\tthis.booted = false;\n\t\t\tthis.isDomReady = false;\n\t\t\tthis.uiContainer = null;\n\n\t\t\t// syslog\n\t\t\tthis.initializeLog(settingsSyslog);\n\n\t\t\t// autoloader\n\t\t\tthis.autoloader = new stage.autoload(this, {\n\t\t\t\ttransport:\"script\"\n\t\t\t});\n\t\t\tthis.container.set(\"autoloader\", this.autoloader);\n\n\t\t\t\n\t\t\t// Router\n\t\t\tthis.initRouter();\n\n\t\t\t// template\n\t\t\tthis.initTwig();\n\n\t\t\t// translation i18n\n\t\t\tthis.initTranslation();\n\n\t\t\t// Service REST\n\t\t\tthis.initRest()\n\n\t\t\t// EVENT NATIF\n\t\t\t$(document).ready( this.listen(this, \"onDomReady\", this.domReady) );\n\t\t\t$(window).resize( this.listen(this,\"onResize\") );\n\t\t\t$(window).on( \"unload\",  this.unLoad.bind(this) );\n\t\t\t$(window).on( \"load\", this.onLoad.bind(this) );\n\n\t\t\t//BOOT\t\n\t\t\tthis.listen(this, \"onBoot\" , this.boot)\n\t\t\t//READY\n\t\t\tthis.listen(this, \"onReady\" , this.ready)\n\n\t\t\tthis.notificationsCenter.settingsToListen(this.settings, this);\n\t\t}\n\t\t\n\t\tinitRouter (){\n\t\t\tif ( this.settings.router ){\n\t\t\t\t// location\n\t\t\t\tthis.initLocation();\n\t\t\t\tthis.router = new stage.router(this, this.container);\n\t\t\t\tthis.container.set(\"router\", this.router);\n\t\t\t}\n\t\t}\n\n\t\tinitLocation (){\n\t\t\tthis.locationService = new stage.location(this, this.settings.location) ;\n\t\t\tthis.container.set(\"location\", this.locationService);\n\t\t}\n\n\t\tinitRest (){\n\t\t\tif (stage.Rest) {\n\t\t\t\tthis.restService = new stage.Rest(this.container);\n\t\t\t\tthis.set(\"rest\", this.restService);\n\t\t\t}\n\t\t}\n\n\t\tinitTranslation (){\n\t\t\tif ( this.settings.i18n ){\n\t\t\t\tif ( ! stage.i18n ){\n \t\t       \t\t\tthis.logger(\"you must load transation i18n services js file !!!!!\", \"ERROR\")\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.i18n = new stage.i18n(this, this.container);\n\t\t\t\tthis.container.set(\"i18n\", this.i18n);\n\t\t\t}\n\t\t}\n\n\t\tinitTwig (){\n\t\t\tthis.logger(\"INITIALIZE TWIG SERVICE\", \"DEBUG\");\n\t\t\tif (this.environment === \"dev\"){\n\t\t\t\tTwig.cache = false ;\t\n\t\t\t}\n\t\t\tthis.templateEngine = Twig.twig  ; \n\t\t\t//extended log error traf\n\t\t\tTwig.extend((Twig) => {\n\t\t\t\tTwig.log.error = (message) => {\n\t\t\t\t\tthis.logger(message, \"ERROR\");\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tTwig.extend((Twig) => {\n\t\t\t\tTwig.Templates.loadRemote = loadRemoteTwig.bind(this, Twig) \n\t\t\t});\n\n\t\t\t//extended FUNCTION\n\t\t\tTwig.extendFunction(\"controller\", function() {\n\t\t\t\tvar pattern = Array.prototype.shift.call(arguments);\n\t\t\t\tvar sp = pattern.split(\":\");\n\t\t\t\tvar module = this.getModule(sp[0]);\n\t\t\t\tif (module){\n\t\t\t\t\tvar controller = module.getController(sp[1]);\n\t\t\t\t\tif (controller){\n\t\t\t\t\t\tvar action = sp[2];\n\t\t\t\t\t\tif ( controller[action] ){\n\t\t\t\t\t\t\treturn controller[action].apply(controller, arguments);\t\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t\tthis.container.set(\"twig\", this.templateEngine);\n\t\t\treturn this.templateEngine ;\n\t\t}\n\n\t\tdomReady (){\n\t\t\tif ( ! this.booted ) return ; \n\t\t\tthis.logger(\"domReady\", \"DEBUG\");\n\t\t\tthis.fire(\"onDomLoad\", this);\n\t\t\tvar element = this.uiContainer ? $(this.uiContainer) : $(\"body\");\n\t\t\ttry {\n\t\t\t\tif ( this.modules.app ){\n\t\t\t\t\tthis.modules.app.initialize(element);\t\n\t\t\t\t}\t\t\n\t\t\t\tfor (var module in this.modules){\n\t\t\t\t\tif (module === \"app\") continue;\n\t\t\t\t\tthis.modules[module].initialize(element);\n\t\t\t\t}\t\n\t\t\t\tthis.fire(\"onReady\", this);\n\t\t\t\tthis.isDomReady = true;\n\t\t\t}catch(e){\n\t\t\t\tthis.logger(e,\"ERROR\");\n\t\t\t}\n\t\t}\n\n\t\tonLoad (event){\n\t\t\tthis.fire(\"onLoad\", this, event);\t\n\t\t}\n\n\t\tunLoad (event){\n\t\t\tthis.fire(\"onUnLoad\", this, event);\t\n\t\t}\n\t\n\t\tgetModule (name){\n\t\t\treturn this.modules[name] ;\n\t\t}\n\n\t\tinitializeLog (settings){\n\t\t\tif (this.environment === \"dev\"){\n\t\t\t\t// CRITIC ERROR\n\t\t\t\tthis.syslog.listenWithConditions(this,{\n\t\t\t\t\tseverity:{\n\t\t\t\t\t\tdata:\"CRITIC,ERROR\"\n\t\t\t\t\t}\t\t\n\t\t\t\t},function(pdu){\n\t\t\t\t\tif (pdu.payload.stack ){\n\t\t\t\t\t\tconsole.error( \"SYSLOG \" + pdu.severityName +\" \" + pdu.msgid + \" \"+new Date(pdu.timeStamp) + \" \" + pdu.msg+\" : \"+  pdu.payload.stack);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.error( \"SYSLOG \" + pdu.severityName +\" \" + pdu.msgid + \" \"+new Date(pdu.timeStamp) + \" \" + pdu.msg+\" : \"+  pdu.payload);\t\n\t\t\t\t\t}\n\t\t\t\t\t/*if (pdu.typePayload === \"Error\" ){\n\t\t\t\t\t\tif (pdu.payload.stack ){\n\t\t\t\t\t\t\tconsole.error( \"SYSLOG \" + pdu.severityName +\" \" + pdu.msgid + \" \"+new Date(pdu.timeStamp) + \" \" + pdu.msg+\" : \"+  pdu.payload.stack);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconsole.error( \"SYSLOG \" + pdu.severityName +\" \" + pdu.msgid + \" \"+new Date(pdu.timeStamp) + \" \" + pdu.msg+\" : \"+  pdu.payload);*/\t\n\t\t\t\t});\n\n\t\t\t\t// INFO DEBUG\n\t\t\t\tvar data ;\n\t\t\t\tthis.debug ? data = \"INFO,DEBUG\" : data = \"INFO\" ;\n\t\t\t\tthis.syslog.listenWithConditions(this,{\n\t\t\t\t\tseverity:{\n\t\t\t\t\t\tdata:data\n\t\t\t\t\t}\t\t\n\t\t\t\t},function(pdu){\n\t\t\t\t\tconsole.info( \"SYSLOG \" + pdu.severityName +\" \" + pdu.msgid + \" \"+new Date(pdu.timeStamp) + \" \" + pdu.msg+\" : \"+ pdu.payload);\n\t\t\t\t});\n\t\t\t\tthis.syslog.listenWithConditions(this,{\n\t\t\t\t\tseverity:{\n\t\t\t\t\t\tdata:\"WARNING\"\n\t\t\t\t\t}\t\t\n\t\t\t\t},function(pdu){\n\t\t\t\t\tconsole.warn( \"SYSLOG \" + pdu.severityName +\" \" + pdu.msgid + \" \"+new Date(pdu.timeStamp) + \" \" + pdu.msg+\" : \"+ pdu.payload);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn this.syslog;\n\t\t}\n\n\t\tboot (){\n\t\t\tthis.booted = true;\n\t\t}\n\n\t\tready (){\n\t\t\t//this.fire(\"onUrlChange\", this.router.url() )\n\t\t}\n\n\t\tloadModule (url, settings){\n\t\t\tvar res = stage.io.urlToOject(url);\n\t\t\tvar moduleName = res.basename ;\n\t\t\t\t\t\n\t\t\treturn $.ajax(url,stage.extend( {\n\t\t\t\tcache:false,\n\t\t\t\tmethod:\"GET\",\n\t\t\t\t//async:false,\n\t\t\t\tdataType:\"xml\",\n\t\t\t\tsuccess:(data, status, xhr) => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\t//FIXME try to parse with url\n\t\t\t\t\t\tvar res = stage.xml.parseXml(data);\n\t\t\t\t\t\tvar moduleName = res.module[\"@id\"];\n\t\t\t\t\t\tvar type = res.module[\"@type\"];\n\t\t\t\t\t\tvar moduleSrc = res.module[\"@src\"];\n\t\t\t\t \t\n\t\t\t\t\t\tswitch ( type ){\n\t\t\t\t\t\t\tcase \"application/javascript\" :\n\t\t\t\t\t\t\t\tif ( moduleSrc ){\n\t\t\t\t\t\t\t\t\tif (moduleName in this.modules) {\n\t\t\t\t\t\t\t\t\t\tthis.modules[moduleName].initialize();\n\t\t\t\t\t\t\t\t\t\tthis.modules[moduleName].fire(\"onInitialize\", moduleName);\t\n\t\t\t\t\t\t\t\t\t\tthis.fire(\"onInitializeModule\", moduleName);\t\n\t\t\t\t\t\t\t\t\t} else {\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\tthis.autoloader.load(moduleSrc, (error, transport) => {\n\t\t\t\t\t\t\t\t\t\t\tif (error){\n\t\t\t\t\t\t\t\t\t\t\t\tthis.fire(\"onError\", error);\n\t\t\t\t\t\t\t\t\t\t\t\tthrow error;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tthis.registerModule(moduleName, res);\n\t\t\t\t\t\t\t\t\t\t\tif (moduleName === \"app\")\n\t\t\t\t\t\t\t\t\t\t\t\tthis.fire(\"onBoot\", this);\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}catch(e){\n\t\t\t\t\t\tthis.logger(e, \"ERROR\");\n\t\t\t\t\t\tthis.fire(\"onError\", e);\n\t\t\t\t\t\tthrow e ;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror:(xhr, status, message) => {\n\t\t\t\t\tthis.fire(\"onGetConfigError\", moduleName);\n\t\t\t\t\tthis.fire(\"onError\", message);\t\n\t\t\t\t}\n\t\t\t}, settings))\n\t\t}\n\n\t\tregisterModule (name, xml){\n\t\t\tif (name in stage.modules){\n\t\t\t\tvar kernelcontext = this;\n\t\t\t\tvar Class = stage.modules[name]; //.herite(stage.Module);\n\t\t\t\tthis.container.addScope(name);\n\t\t\t\tClass.prototype.name = name;\n\t\t\t\ttry {\n\t\t\t\t\tif (this.isDomReady){\n\t\t\t\t\t\tthis.modules[name] = new Class(this, xml,{\n\t\t\t\t\t\t\tonReady:() => {\n\t\t\t\t\t\t\t\tif (this.initialize){\n\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\tthis.initialize();\n\t\t\t\t\t\t\t\t\t\tthis.fire(\"onInitialize\", name);\t\n\t\t\t\t\t\t\t\t\t\tkernelcontext.fire(\"onInitializeModule\", name);\n\t\t\t\t\t\t\t\t\t}catch(e){\n\t\t\t\t\t\t\t\t\t\tthis.logger(\"INITIALIZE MODULE : \"+name +\" \"+e, \"ERRROR\");\n\t\t\t\t\t\t\t\t\t\tthrow e;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}});\t\n\t\t\t\t\t\t\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.modules[name] = new Class(this, xml);\n\t\t\t\t\t}\n\t\t\t\t\tthis.container.set(name, this.modules[name]);\n\t\t\t\t}catch(e){\n\t\t\t\t\tthis.logger(\"INSTANCE MODULE : \"+name +\" \"+e, \"ERRROR\")\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tgetModuleName (url){\n\t\t\tvar module = stage.dirname(url);\n\t\t\tvar tab = module.split(\"/\")\n\t\t\treturn tab[tab.indexOf(\"Resources\")-1];\n\t\t}\n\t};\n\n\tstage.kernel = Kernel ;\n\treturn  Kernel;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/kernel/kernel.es6","module.exports =  function(stage){\n\n\t'use strict';\n\n\tvar nativeHistory = !!(window.history && window.history.pushState );\n\tvar PATH_MATCH = /^([^\\?#]*)(\\?([^#]*))?(#(.*))?$/;\n\tvar DEFAULT_PORTS = {'http': 80, 'https': 443};\n\n\n\t/*\n \t *\tCLASS BROWSER\n \t *\n \t */\n\n\tvar changeUrl = function(event){\n\t\tvar cache = null ;\n\t\tvar location = this.kernel.locationService ;\n\t\tvar url = this.url();\n\n\t\tif ( ( url === this.lastUrl && url === this.location.href ) && this.lastUrl !== location.initialUrl){ \n\t\t\t//console.log(\" changeUrl PASS SAME\")\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! event ){\n\t\t\tthis.kernel.logger(\" FORCE URL CHANGE BROWER EVENT NOT FIRE\" , \"WARNING\" );\n\t\t\t//console.log(location.url())\n\t\t\tvar newUrl = location.url() ;\n\t\t\tthis.kernel.notificationsCenter.fire(\"onUrlChange\", newUrl , this.lastHash, url ,cache)\n\t\t\tthis.lastUrlr= url;\n\t\t\tthis.lastHash = newUrl ;\n\t\t\treturn ;\n\t\t}\n\t\t//console.log(\"change URL :\" + url +\" IINIT \"+location.initialUrl)\n\t\t//console.log(\"change LAST URL :\" + this.lastUrl)\n\t\tvar parse = location.parse(url);\n\t\t//console.log(location)\n\t\tif ( ! parse ){\n\t\t\tthis.kernel.notificationsCenter.fire(\"onUrlChange\", \"\", this.lastHash, url,  cache)\n\t\t\tthis.lastUrl = \"\";\n\t\t\tthis.lastHash = \"\";\n\t\t\treturn ;\n\t\t}\n\n\t\tvar newUrl = location.url() ;\n\t\t\n\t\tthis.kernel.notificationsCenter.fire(\"onUrlChange\", newUrl, this.lastHash , url ,cache)\n\t\tthis.lastUrl = url;\n\t\tthis.lastHash = newUrl ;\n\t};\n\n\n\tvar myurl = function(options){\n\t\tif (nativeHistory && options.html5Mode){\n\t\t\treturn function (url, replace, state) {\n\t\t\t\t//TODO\n\t\t\t\t/*if (this.location !== window.location) this.location = window.location;\n\t\t\t\tif (this.history !== window.History) this.history = window.History;\n\n\t\t\t\tif (url){\n\t\t\t\t\tthis.kernel.logger(replace ? \"REPLACE URL : \" + url : \"CHANGE URL : \" + url,\"WARNING\")\n\t\t\t\t\t\tthis.history[replace ? 'replaceState' : 'pushState'](state, '', url);\n\t\t\t\t}else{\n\t\t\t\t\treturn this.location.href.replace(/%27/g,\"'\");\t\n\t\t\t\t}*/\n\t\t\t}\n\t\t}else{\n\t\t\treturn function (url, replace, state)  {\n\t\t\t\tif (url){\n\t\t\t\t\tif (this.kernel && this.kernel.get(\"location\") )\n\n\t\t\t\t\tif (this.location !== window.location) this.location = window.location;\n\t\t\t\t\tvar same = ( url === this.lastUrl && url === this.location.href ? true : false );\n\t\t\t\t\tif (this.history !== window.history) this.history = window.history;\n\t\t\t\t\tthis.kernel.logger(replace ? \"REPLACE URL : \" + url : \"CHANGE URL : \" + url,\"WARNING\");\n\t\t\t\t\tif ( same ){\n\t\t\t\t\t\tif  (  url === this.kernel.locationService.initialUrl ){\n\t\t\t\t\t\t\t\t//FORCE changeUrl \n\t\t\t\t\t\t\t\tchangeUrl.call(this)\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn url ;\n\t\t\t\t\t}\n\t\t\t\t\t//console.log(url)\n\t\t\t\t\tif ( replace ){\n\t\t\t\t\t\tthis.location.replace(url);\t\n\t\t\t\t\t\treturn url ;\n\t\t\t\t\t}\n\t\t\t\t\treturn this.location.href = url;\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\treturn this.location.href.replace(/%27/g,\"'\");\t\n\t\t\t\t}\t\t\t\n\t\t\t}\n\t\t}\t\n\t}; \n\n\tvar urlBrowser = null ;\n\tvar browser = class browser {\n\n\t\tconstructor(kernel, settings){\n\t\t\tthis.location = window.location;\n\t\t\tthis.history = window.History;\n\t\t\turlBrowser = myurl.call(this, settings);\n\t\t\tthis.lastUrl = this.url();\n\t\t\tthis.kernel = \tkernel ;\n\t\t\t$(window).bind('hashchange', changeUrl.bind(this)); \n\t\t\t//if (nativeHistory){\n\t\t\t//\t$(window).bind('popstate', changeUrl.bind(this))\n\t\t\t//}\n\t\t}\n\n\t\turl (url, replace, state){\n\t\t\treturn urlBrowser.call(this, url, replace, state);\t\t\n\t\t}\n\n\t};\n\n\n\n\t/*\n \t *\tCLASS LOCATION\n \t *\n \t */\n\n\n\t\n\tvar beginsWith = function(begin, whole) {\n  \t\tif (whole.indexOf(begin) === 0) {\n    \t\t\treturn whole.substr(begin.length);\n  \t\t}\n\t};\n\n\tvar stripHash = function(url){\n\t\tvar index = url.indexOf('#');\n  \t\treturn index == -1 ? url : url.substr(0, index);\n\t};\n\n\n\tvar Location = class Location  extends stage.Service {\n\n\n\t\tconstructor(browser, base, kernel, settings){\n\t\t\tsuper(\"LOCATION\", kernel.container, kernel.notificationsCenter );\n\t\t\tthis.settings = settings\n\t\t\tthis.browser = browser ;\n\t\t\tthis.replace = false ;\n\t\t\t\n\t\t\tthis.initialUrl = this.browser.url();\n\t\t\tthis.base = base\n\t\t\tthis.hashPrefix = \"#\"+this.settings.hashPrefix ;\n\t\t\tthis.proto = this.stripFile(this.base);\n\t\t\tthis.parseAbsoluteUrl(this.initialUrl);\n\t\t\tthis.parse(this.initialUrl);\n\t\t\tthis.logger(\"INITIALIZE LOCATION SERVICE\", \"DEBUG\");\n\n\t\t\t// rewrite hashbang url <> html5 url\n\t\t\t//var abs = this.absUrl();\n\t\t\t//if ( abs != this.initialUrl) {\n\t\t\t//\tthis.browser.url(abs, true);\n\t\t\t//}\n\t\t}\n\t\t\n\t\tabsUrl (){\n\t\t\treturn this._absUrl ;\n\t\t}\n\n\t\turl (url){\n\t\t\tif (typeof url === \"undefined\")\n\t\t\t\treturn this._url;\n\t\t\tvar match = PATH_MATCH.exec(url);\n\t\t\tif (match[1]) this.path(decodeURIComponent(match[1]));\n\t\t\tif (match[2] || match[1]) this.search(match[3] || '');\n\t\t\tthis.hash(match[5] || '');\n\t\t}\n\n\t\tprotocol (){\n\t\t\treturn this._protocol;\t\n\t\t}\n\n\t\thost (){\n\t\t\treturn this._host;\t\n\t\t}\n\n\t\tport (){\n\t\t\treturn this._port ;\t\n\t\t}\n\n\t\tpath (path){\n\t\t\tif (typeof path === \"undefined\"){\n\t\t\t\treturn this._path ;\n\t\t\t}\n\t\t\tthis._path = path ;\n\t\t\ttry {\n\t\t\t\tthis.change();\n\t\t\t}catch(e){\n\t\t\t\tthis.logger(e,\"ERROR\");\n\t\t\t\tthrow e\n\t\t\t}\n\t\t\treturn this._path;\n\t\t}\n\n\t\tsearch (search){\n\t\t\tif (typeof search === \"undefined\"){\n\t\t\t\treturn this._search ;\n\t\t\t}\n\t\t\tthis._search = search ;\n\t\t\ttry {\n\t\t\t\tthis.change();\n\t\t\t}catch(e){\n\t\t\t\tthis.logger(e,\"ERROR\");\n\t\t\t\tthrow e\n\t\t\t}\n\t\t\treturn this._search;\n\n\t\t\t\n\t\t}\n\t\t\n\t\thash (hash){\n\t\t\tif (typeof hash === \"undefined\"){\n\t\t\t\treturn this._hash ;\n\t\t\t}\n\t\t\tthis._hash = hash ;\n\t\t\ttry {\n\t\t\t\tthis.change();\n\t\t\t}catch(e){\n\t\t\t\tthis.logger(e,\"ERROR\");\n\t\t\t\tthrow e\n\t\t\t}\n\t\t\treturn this._hash;\n\t\t}\t\n\n\t\tstate (){\n\t\t\n\t\t}\n\n\t\treplace (value){\n\t\t\tif (value)\n\t\t\t\treturn  this.replace = value ;\t\n\t\t\treturn this.replace ;\n\t\t}\n\n\t\tencodePath (path) {\n  \t\t\tvar segments = path.split('/');\n      \t\t\tvar i = segments.length;\n\n  \t\t\twhile (i--) {\n    \t\t\t\tsegments[i] = stage.io.encodeUriSegment(segments[i]);\n  \t\t\t}\n\n  \t\t\treturn segments.join('/');\n\t\t}\n\n\t\tstripFile (url){\n\t\t\treturn url.substr(0, stripHash(url).lastIndexOf('/') + 1);\n\t\t}\n\t\n\t\t// parsing end URL ex : http://domain.com:port(/path)(?search)(#hash)\n\t\tparseRelativeUrl (relativeUrl){\n\t\t\t//console.log(\"relative :\" + relativeUrl)\n\t\t\tvar prefixed = (relativeUrl.charAt(0) !== '/');\n\t\t\tif (prefixed) {\n\t\t\t\trelativeUrl = '/' + relativeUrl;\n\t\t\t}\n\t\t\tvar resolve = stage.io.urlToOject(relativeUrl);\n\t\t\t//console.log(resolve)\n\t\t\tthis._path = decodeURIComponent(prefixed && resolve.pathname.charAt(0) === '/' ?\n\t\t\t\tresolve.pathname.substring(1) : resolve.pathname);\n\t\t\tthis._search = stage.io.parseKeyValue(resolve.search);\n\t\t\tthis._hash = decodeURIComponent(resolve.hash);\n\n\t\t\t// make sure path starts with '/';\n\t\t\tif (typeof this._path !== \"undefined\" && this._path.charAt(0) != '/') {\n\t\t\t\tthis._path = '/' + this._path;\n\t\t\t}\n\t\t\t//console.log(\"PATH:\" + this._path)\n\t\t}\n\n\t\t// parsing begin URL ex : (http)://(domain.com):(port)\n\t\tparseAbsoluteUrl (absoluteUrl){\n\t\t\tvar resolve = stage.io.urlToOject(absoluteUrl);\n  \t\t\tthis._protocol = resolve.protocol.replace(\":\", \"\");\n  \t\t\tthis._host = resolve.hostname;\n  \t\t\tthis._port = parseInt(resolve.port, 10) || DEFAULT_PORTS[this._protocol] ||null;\n\t\t}\n\t};\n\n\t/**\n \t * LocationHashbangUrl represents url\n \t * This object is exposed as $location service when developer doesn't opt into html5 mode.\n \t * It also serves as the base class for html5 mode fallback on legacy browsers.\n \t *\n \t * @constructor\n \t * @param {string} appBase application base URL\n \t * @param {string} hashPrefix hashbang prefix\n \t*/\n\tvar LocationHashbangUrl = class LocationHashbangUrl extends  Location  {\n\n\t\tconstructor(browser, base, kernel, settings) {\n\t\t\tsuper(browser, base, kernel, settings);\n\t\t}\n\n\t\tparse (url){\n\t\t\t//console.log(\"URL to parse LocationHashbangUrl  :\" + url)\n\t\t\t//console.log(\"base : \" + this.base)\n\t\t\t//console.log(\"beginsWith BASE : \"+beginsWith(this.base, url))\n\t\t\t//console.log(\"beginsWith PROTO  :\"+beginsWith(this.proto, url))\n\t\t\tvar withoutBaseUrl = beginsWith(this.base, url) || beginsWith(this.proto, url);\n\t\t\t//console.log(\"withoutBaseUrl : \" +withoutBaseUrl)\n\t\t\tvar withoutHashUrl = withoutBaseUrl.charAt(0) == '#'\n\t\t\t\t? beginsWith(this.hashPrefix, withoutBaseUrl)\n\t\t\t\t: \"\";\n\n    \t\t\tif (typeof withoutHashUrl !== \"string\") {\n\t\t\t\tthis.logger('Invalid url '+url+', missing hash prefix ' +this.hashPrefix , \"ERROR\");\n      \t\t\t\treturn null; \n    \t\t\t}\n\t\t\t//console.log(\"withoutHashUrl : \" +withoutHashUrl)\n    \t\t\tthis.parseRelativeUrl(withoutHashUrl);\n\t\t\treturn this.change();\n\t\t}\n\t\t\n\t\tchange (){\n\t\t\tvar search = stage.io.toKeyValue(this._search);\n\t\t\t//console.log(this._search)\n\t\t\t//var hash = this._hash ? '#' + stage.io.encodeUriSegment(this._hash) : '';\n\n\t\t\tvar hash = this._hash ? '#' + this._hash : '';\n\n\t\t\t//console.log(this._path)\n\t\t\tthis._url = this.encodePath(this._path) + (search ? '?' + search : '') + hash\t\t\n\t\t\t//console.log(this._url)\n\t\t\t//var temp = (this._url ? this.hashPrefix + this._url : '').replace(\"//\",\"/\");\n\t\t\t//this._absUrl = this.base + temp;\t\n\t\t\t//console.log( this.hashPrefix)\n\t\t\t//console.log( this._url)\n\t\t\tthis._absUrl = this.base + (this._url ? \"#\" + this._url : '');\t\n\t\t\t//console.log(\"URL :\"+ this._url)\n\t\t\t//console.log(\"HASH :\"+ this._hash)\n\t\t\t//console.log(\"ABSURL :\"+ this._absUrl)\n\t\t\t//console.log(\"PATH :\"+ this._path)\n\t\t\treturn this;\n\t\t}\n\t};\n\n\n\t/**\n \t * LocationHashbangInHtml5Url represents url\n \t * This object is exposed as location service when html5 history api is enabled but the browser\n \t * does not support it.\n \t *\n \t * @constructor\n \t * @param {string} appBase application base URL\n \t * @param {string} hashPrefix hashbang prefix\n \t*/\n\tvar LocationHashbangInHtml5Url = class LocationHashbangInHtml5Url extends  LocationHashbangUrl  {\n\n\t\tconstructor(browser, base, kernel, settings){\n\t\t\tsuper(browser, base, kernel, settings);\n\t\t}\n\n\t\tparse (url){\n\t\t\treturn this.change();\n\t\t}\n\t\t\n\t\tchange(){\n\t\t\treturn this;\n\t\t}\n\t};\n\n\t/**\n \t * LocationHtml5Url represents an url\n \t * This object is exposed as location service when HTML5 mode is enabled and supported\n \t *\n \t * @constructor\n \t * @param {string} appBase application base URL\n \t * @param {string} basePrefix url path prefix\n \t*/\n\tvar LocationHtml5Url = class LocationHtml5Url extends Location  {\n\n\t\tconstructor (browser, base, kernel, settings) {\n\t\t\tsuper(browser, base, kernel, settings);\n\t\t}\n\n\t\tparse (url){\n\t\t\tvar pathUrl = beginsWith(this.proto, url);\n\t\t\tif (pathUrl){\n\t\t\t\tthis.parseRelativeUrl(pathUrl);\n\t\t\t}\n\t\t\tif (! this._path)\n\t\t\t\tthis._path = \"/\"\n\t\t\treturn this.change();\n\t\t}\n\t\t\n\t\tchange (){\n\t\t\tvar search = stage.io.toKeyValue(this._search);\n\t\t\tvar hash = this._hash ? '#' + stage.io.encodeUriSegment(this._hash) : '';\n\t\t\tthis._url = this.encodePath(this._path) + (search ? '?' + search : '') + hash;\n\t\t\tthis._absUrl = this.proto + this._url.substr(1);\n\t\t\treturn this\n\t\t}\n\t};\n\n\n\t/*\n \t *\tSERVICE LOCATION\n \t */\n\n\tvar defaultSettings = {\n\t\thtml5Mode:true,\n\t\thashPrefix:\"/\"\n\t};\n\n\tvar serverBase = function (url) {\n\t\treturn url.substring(0, url.indexOf('/', url.indexOf('//') + 2));\n\t};\n\n\tvar service = function(kernel, settings){\n\t\n\t\tvar options = $.extend(defaultSettings, settings)\n\t\t\t\n\t\tvar browserService = new browser(kernel, options);\n\t\tkernel.set(\"browser\", browserService);\n\t\tvar initialUrl = browserService.url();\n\t\tvar baseHref = options.base || \"\" ;\n\t\tvar mode = null ;\n\t\tvar base = null ;\n\n\t\tif (options.html5Mode) {\n\t\t\tmode = nativeHistory ? LocationHtml5Url : LocationHashbangInHtml5Url;\n\t\t\tbase = serverBase(initialUrl) + (baseHref || '/');\n\t\t}else{\n\t\t\tmode = LocationHashbangUrl ;\n\t\t\tbase = stripHash(initialUrl);\n\t\t}\n\t\t\n\t\treturn new mode(browserService, base, kernel, options);\n\t}; \n\t\n\tstage.location = service ;\n\treturn service;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/kernel/locationService.es6","module.exports =  function(stage){\n\n\t'use strict';\n\n\t/*\n \t *\n \t *\tModel\n \t *\n \t */\n\n\tvar urlParser = function(container, url, name, template, obj){\n  \t\tvar index = url.indexOf(\"views\") ;\n  \t\tif (index < 0 ){\n    \t\t\tvar text = \"URL TEMPLATE BAD PATH :\" + url ;\n    \t\t\tthis.logger(text ,\"ERROR\")\n    \t\t\t\tthrow new Error(text) ;\n  \t\t}\n  \t\tvar res = url.slice(index+\"views\".length+1).split(\"/\");\n  \t\tres.pop();\n  \t\tif (res.length){\n    \t\t\tvar obj = container ;\n    \t\t\tfor (var i = 0; i<res.length;i++){\n      \t\t\t\tif ( obj[res[i]] ){\n        \t\t\t\tif (i !== res.length-1){\t\n        \t\t\t\t\tobj = obj[res[i]] ;\n        \t\t\t\t}else{\n          \t\t\t\t\tobj[res[i]][name] = template;\n        \t\t\t\t}\n      \t\t\t\t}else{\n        \t\t\t\tif (i !== res.length-1){\n        \t\t\t\t\tobj[res[i]] = {};\t\n        \t\t\t\t\tobj = obj[res[i]] ;\n        \t\t\t\t}else{\n          \t\t\t\t\tobj[res[i]] = {};\n          \t\t\t\t\tobj[res[i]][name] = template;\n        \t\t\t\t}\n      \t\t\t\t}\n    \t\t\t}\n  \t\t}else{\n    \t\t\tcontainer[name] = template ;\n  \t\t}\n\t};\n\n\tvar regI18n = new RegExp(\"^(.*)\\.(.._..)\\.(.*)$\");\n\n\tvar modelModule = class modelModule {\n\n\t\tconstructor(config){\n\t\t\tthis.rootName = \"module\";\n\t\t\tvar documentXml = this.parser(config);\t\t\n\t\t\t//this.name = this.config.name[\"@short\"];\n\t\t\tthis.name = documentXml.module['@id'];\n\t\t}\n\n\t\tparser (ele){\n\t\t\tswitch ( stage.typeOf(ele) ){\n\t\t\t\tcase \"document\" :\n\t\t\t\t\tvar res  = stage.xml.parseXml(ele) ; \n\t\t\t\t\tbreak;\n\t\t\t\tcase \"object\" :\t\n\t\t\t\t\tres = ele ;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( !  res[ this.rootName ]){\n\t\t\t\tthrow new Error (\"BAD MODULE CONFIG \");\n\t\t\t}\n\t\t\tthis.config = res[ this.rootName ] ; \n\t\t\treturn res;\n\t\t}\n\n\t\tregisterScript ( src){\n\t\t\tthis.autoloader.load( src, (error, transport) => {\n\t\t\t\tif (error){\n\t\t\t\t\tthis.logger(error, \"ERROR\");\n \t\t\t       \t\treturn ;\n\t\t\t\t}\n\t\t\t\tthis.logger(\"LOAD SCRIPT : \"+src ,\"DEBUG\");\n\t\t\t});\n\t\t}\n\n\t\tregisterStyle ( src){\n\t\t\tthis.autoloader.load( src, (error, transport) => {\n\t\t\t\tif (error){\n\t\t\t\t\tthis.logger(error, \"ERROR\");\n \t\t\t       \t\treturn ;\n\t\t\t\t}\n\t\t\t\tthis.logger(\"LOAD STYLE : \"+src ,\"DEBUG\");\n\t\t\t});\n\t\t}\n\n\t\tcacheFont ( src){\n\t\t\t$.ajax({\n\t\t\t\tasync: false,\n\t\t\tcache: true,\n\t\t\turl: src,\n\t\t\tbeforeSend:  ( xhr ) =>  {\n\t\t\t\txhr.overrideMimeType(\"application/octet-stream\");\n\t\t\t},\n\t\t\tsuccess: () => {\n\t\t\t\tthis.logger(\"LOAD FONT : \" + src, \"DEBUG\");\n\t\t\t},\n\t\t\terror: (e) => {\n\t\t\t\tconsole.log(e);\n\t\t\t\tthis.logger(src + \" : \" + message, \"ERROR\");\n\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tregisterTemplate (name, src, type){\n\t\t\t//console.log(\"NAME :\" + name)\n\t\t\tswitch(type){\n\t\t\t\tcase \"application/twig\":\n\t\t\t\t\t//var obj = urlParser.call(this, this.templates, src, name);\n\t\t\t\t\tthis.twig({\n\t\t\t\t\t\tid: this.name+\":\"+name,\n\t\t\t\t\thref: src,\n\t\t\t\t\tasync: false,\n\t\t\t\t\t//debug:true,\n\t\t\t\t\tload:(template) => {\n\t\t\t\t\t\turlParser.call(this, this.templates, src, name , template )\n\t\t\t\t\t\tthis.logger(\"LOAD TEMPLATE : \"+name +\" ==>\"+src ,\"DEBUG\");\n\t\t\t\t\t//console.log(this.templates)\n\t\t\t\t\t//obj[name] = template;\n\t\t\t\t\t//console.log(template.extend)\n\t\t\t\t\t//this.templateEngine\n\t\t\t\t\t},\n\t\t\t\t\terror:(xrh, status, message) => {\n\t\t\t\t\t\tthis.logger(\"TEMPLATE :\" + src + \" : \"+ message, \"ERROR\")\n\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"text/html\":\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"application/xml\":\n\t\t\t\tcase \"text/xml\":\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"template\":\n\t\t\t\t\tvar obj = urlParser.call(this, this.templates, src.url, name, src);\n\t\t\t\t\t//obj[name] = src;\n\t\t\t\t\tthis.logger(\"LOAD IMPORT TEMPLATE : \"+name +\" ==>\"+src.url ,\"DEBUG\");\n\t\t\t\t\tbreak;\n\t\t\t\tdefault :\n\t\t\t\t\tthis.registerTemplate( name, src, \"application/twig\" );\n\t\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\n\t\tregisterView (name, src, type){\n\t\t\tswitch(type){\n\t\t\t\tcase \"text/javascript\":\n\t\t\t\tcase \"application/javascript\":\n\t\t\t\t\tthis.autoloader.load( src, (error, transport) => {\n\t\t\t\t\t\tif (error){\n\t\t\t\t\t\t\tthis.logger(error, \"ERROR\");\n\t\t\t\t\t\t\treturn ;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//this.views[name] = new ;\n\t\t\t\t\t\tvar Class = stage.views[name];\n\t\t\t\t\t\tthis.views[name] = new Class(this.container, this);\n\t\t\t\t\t\tthis.logger(\"LOAD VIEW : \"+src ,\"DEBUG\");\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t}\n\t\t}\n\n\t\tregisterController (name, src){\n\t\t\tthis.autoloader.load( src, (error, transport) => {\n\t\t\t\tif (error){\n\t\t\t\t\tthis.logger(error, \"ERROR\")\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t\ttry {\n\t\t\t\t\tvar Class = stage.controllers[name]; \n\t\t\t\t\tthis.controllers[name] = new Class(name, this.container, this);\n\t\t\t\t\tthis.logger(\"LOAD CONTROLLER : \"+name +\" ==>\"+src ,\"DEBUG\");\n\t\t\t\t}catch(e){\n\t\t\t\t\tthrow e ;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tinitialiseRest (name, url, optionsGlobal){\n\t\t\tvar rest = this.kernel.restService ;\n\t\t\tvar ele = rest.addApi(name, url, optionsGlobal);\n\t\t\tthis.kernel.set(name, ele);\n\t\t}\n\n\t\tregisterTranslation (src, type){\n\t\t\tvar service = this.get(\"i18n\");\n\t\t\tif (! service){\n\t\t\t\tthis.logger(\"SERVICE I18N not loaded abort load Translation : \"+src,\"WARNING\");\n\t\t\t\treturn ;\n\t\t\t}\n\t\t\t$.ajax({\n\t\t\t\turl:src,\n\t\t\t\tasync:false,\n\t\t\t\tsuccess:(data, status, xhr) => {\n\t\t\t\t\tvar name = stage.basename(src) ;\n\t\t\t\t\tthis.logger(\"LOAD TRANSLATION \"+ type +\" : \"+name +\" URL = \"+src ,\"DEBUG\");\n\t\t\t\t\tvar res = regI18n.exec(name);\t\n\t\t\t\t\tif ( ! res ){\n\t\t\t\t\t\tthis.logger(\"SERVICE I18N  abort load Translation : \"+src+ \" Bad File name format\",\"WARNING\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar domain = res[1];\n\t\t\t\t\tvar locale = res[2];\n\t\t\t\t\tservice.registerI18n(name, locale, domain, data);\n\t\t\t\t},\n\t\t\t\tdataType: type || \"json\",\n\t\t\t\terror:(xhr, status, err) => {\n\t\t\t\t\tthis.logger(err, \"ERROR\")\n\t\t\t\t}\t\n\t\t\t});\n\t\t}\n\n\t\treader (){\n\t\t\tvar root = this.config;\n\t\t\tfor (var node in this.config){\n\t\t\t\tswitch ( node ){\n\t\t\t\t\tcase \"content\" :\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"controllers\":\n\n\t\t\t\t\t\tvar controllers = root[node].controller;\n\t\t\t\t\t\tif(controllers){\n\t\t\t\t\t\t\tvar tab = stage.typeOf(controllers) === \"object\" ? [controllers] : controllers ;\n\t\t\t\t\t\t\tfor (var i = 0 ; i < tab.length ; i++){\n\t\t\t\t\t\t\t\tvar name = tab[i][\"@name\"];\n\t\t\t\t\t\t\t\tvar src = tab[i][\"@src\"];\n\t\t\t\t\t\t\t\tthis.registerController(name, src)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"views\":\n\t\t\t\t\t\tvar views = root[node].view;\n\t\t\t\t\t\tif(views){\n\t\t\t\t\t\t\tvar tab = stage.typeOf(views) === \"object\" ? [views] : views ;\n\t\t\t\t\t\t\tfor (var i = 0 ; i < tab.length ; i++){\n\t\t\t\t\t\t\t\tvar name = tab[i][\"@name\"];\n\t\t\t\t\t\t\t\tvar src = tab[i][\"@src\"];\n\t\t\t\t\t\t\t\tvar type = tab[i][\"@type\"];\n\t\t\t\t\t\t\t\tthis.registerView(name, src, type);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"modules\":\n\t\t\t\t\t\tvar modules = root[node].module;\n\t\t\t\t\t\tif(modules){\n\t\t\t\t\t\t\tvar tab = stage.typeOf(modules) === \"object\" ? [modules] : modules ;\n\t\t\t\t\t\t\tfor (var i = 0 ; i < tab.length ; i++){\n\t\t\t\t\t\t\t\t//var name = tab[i][\"@name\"];\n\t\t\t\t\t\t\t\tvar url = tab[i][\"@href\"];\n\t\t\t\t\t\t\t\tif ( ! this.isDomReady){\n\t\t\t\t\t\t\t\t\tthis.kernel.listen(this,\"onBoot\",function(url){\n\t\t\t\t\t\t\t\t\t\tthis.kernel.loadModule(url, {\n\t\t\t\t\t\t\t\t\t\t\tasync:false\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}.bind(this, url))\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\tthis.kernel.loadModule(url);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"templates\":\n\t\t\t\t\t\tvar templates = root[node].template;\n\t\t\t\t\t\tif(templates){\n\t\t\t\t\t\t\tvar tab = stage.typeOf(templates) === \"object\" ? [templates] : templates ;\n\t\t\t\t\t\t\tfor (var i = 0 ; i < tab.length ; i++){\n\t\t\t\t\t\t\t\tvar name = tab[i][\"@name\"];\n\n\t\t\t\t\t\t\t\tvar src = tab[i][\"@src\"];\n\t\t\t\t\t\t\t\tvar type = tab[i][\"@type\"];\n\t\t\t\t\t\t\t\tif ( ! name){\n\t\t\t\t\t\t\t\t\tname = this.getTemplateName(src)\t\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.registerTemplate(name, src, type);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"styles\":\n\t\t\t\t\t\tvar styles = root[node].style;\n\t\t\t\t\t\tif(styles){\n\t\t\t\t\t\t\tvar tab = stage.typeOf(styles) === \"object\" ? [styles] : styles ;\n\t\t\t\t\t\t\tfor (var i = 0 ; i < tab.length ; i++){\n\t\t\t\t\t\t\t\tvar src = tab[i][\"@src\"];\n\t\t\t\t\t\t\t\tthis.registerStyle(src);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"scripts\":\n\t\t\t\t\t\tvar scripts = root[node].script;\n\t\t\t\t\t\tif(scripts){\n\t\t\t\t\t\t\tvar tab = stage.typeOf(scripts) === \"object\" ? [scripts] : scripts ;\n\t\t\t\t\t\t\tfor (var i = 0 ; i < tab.length ; i++){\n\t\t\t\t\t\t\t\tvar src = tab[i][\"@src\"];\n\t\t\t\t\t\t\t\tthis.registerScript(src);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"fonts\":\n\t\t\t\t\t\tvar fonts = root[node].font;\n\t\t\t\t\t\tif(fonts){\n\t\t\t\t\t\t\tvar tab = stage.typeOf(fonts) === \"object\" ? [fonts] : fonts ;\n\t\t\t\t\t\t\tfor (var i = 0 ; i < tab.length ; i++){\n\t\t\t\t\t\t\t\tvar src = tab[i][\"@src\"];\n\t\t\t\t\t\t\t\tthis.cacheFont(src);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"translations\":\n\t\t\t\t\t\tvar translations = root[node].translation;\n\t\t\t\t\t\tif(translations){\n\t\t\t\t\t\t\tvar tab = stage.typeOf(translations) === \"object\" ? [translations] : translations ;\n\t\t\t\t\t\t\tfor (var i = 0 ; i < tab.length ; i++){\n\t\t\t\t\t\t\t\tvar src = tab[i][\"@src\"];\n\t\t\t\t\t\t\t\tvar type = tab[i][\"@type\"];\n\t\t\t\t\t\t\t\tthis.registerTranslation(src, type );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"icon\" :\n\t\t\t\t\t\tthis.icon = root[node][\"@src\"];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t/*case \"name\" :\n\t\t\t\t\t\t  console.log(root[node])\n\t\t\t\t\t\t  this.name = root[node][\"@short\"];\n\t\t\t\t\t\t  break;*/\n\t\t\t\t\tcase \"preference\":\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"author\":\n\t\t\t\t\t\tvar author = root[node];\n\t\t\t\t\t\tthis.author = author[\"#text\"];\n\t\t\t\t\t\tthis.emailAuthor = author[\"@email\"];\n\t\t\t\t\t\tthis.authorLink = author[\"@href\"];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"description\":\n\t\t\t\t\t\tthis.description = root[node];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"api\":\n\t\t\t\t\t\t//console.log(root[node]);\n\t\t\t\t\t\tfor(var ele in root[node]){\n\t\t\t\t\t\t\tvar mvc = root[node][ele];\n\t\t\t\t\t\t\tvar tab = stage.typeOf(mvc) === \"object\" ? [mvc] : mvc;\n\t\t\t\t\t\t\tfor(var i = 0; i < tab.length; i++){\n\t\t\t\t\t\t\t\tif(ele === \"rest\"){\n\t\t\t\t\t\t\t\t\tif( this.kernel.restService )\n\t\t\t\t\t\t\t\t\t\tthis.initialiseRest(tab[i][\"@name\"], tab[i][\"@url\"]);\n\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\tthis.logger(\"Api \" + ele + \" SERVICE REST NOT FOUND\" ,\"ERROR\")\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis.logger(\"Api \" + ele + \" not exist for modules\" ,\"ERROR\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"routes\":\n\t\t\t\t\t\tvar routes = root[node].route;\n\t\t\t\t\t\tswitch(stage.typeOf( routes)){\n\t\t\t\t\t\t\tcase \"array\":\n\t\t\t\t\t\t\t\tfor (var i = 0 ;i<routes.length; i++){\n\t\t\t\t\t\t\t\t\tvar id = routes[i][\"@id\"];\n\t\t\t\t\t\t\t\t\tvar path = routes[i][\"@path\"];\n\t\t\t\t\t\t\t\t\tvar defaultParam = {};\n\t\t\t\t\t\t\t\t\tswitch(stage.typeOf( routes[i][\"default\"])){\n\t\t\t\t\t\t\t\t\t\tcase \"array\":\n\t\t\t\t\t\t\t\t\t\t\tfor (var j=0 ;j<routes[i][\"default\"].length;j++){\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultParam[routes[i][\"default\"][j][\"@key\"]] =  routes[i][\"default\"][j][\"#text\"];\n\t\t\t\t\t\t\t\t\t\t\t\t//console.log(defaultParam)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\t\t\t\t\tif (routes[i][\"default\"][\"@key\"])\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultParam[routes[i][\"default\"][\"@key\"]] = routes[i][\"default\"][\"#text\"];\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tthis.routes[id] = this.router.createRoute(id, path, defaultParam);\t\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\t\tfor (var route in routes){\n\t\t\t\t\t\t\t\t\tswitch (route){\n\t\t\t\t\t\t\t\t\t\tcase \"@id\":\n\t\t\t\t\t\t\t\t\t\t\tvar id = routes[route];\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase \"@path\":\n\t\t\t\t\t\t\t\t\t\t\tvar path = routes[route];\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase \"default\":\n\t\t\t\t\t\t\t\t\t\t\tvar defaultParam = {};\n\t\t\t\t\t\t\t\t\t\t\tswitch(stage.typeOf( routes[route] )){\n\t\t\t\t\t\t\t\t\t\t\t\tcase \"array\":\n\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var j=0 ;j<routes[route].length;j++){\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultParam[routes[route][j][\"@key\"]] =  routes[route][j][\"#text\"];\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultParam[routes[route][\"@key\"]] = routes[route][\"#text\"]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.routes[id] = this.router.createRoute(id, path, defaultParam);\n\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\n\t/*\n \t*\n \t*\tCLASS Module\n \t*\n \t*/\n\tvar regPattern = /(.*)Module:(.*):(.*)$/;\n\n\tvar Module = class Module extends  modelModule  {\n\n\t\tconstructor(kernel, config, settings){\n\t\t\tsuper(config);\n\t\t\tthis.kernel = kernel;\n\t\t\tthis.container = kernel.container;\n\t\t\tthis.syslog = this.get(\"syslog\");\n\t\t\tthis.logger(\"REGISTER MODULE \"+this.name, \"DEBUG\");\n\t\t\tthis.autoloader = new stage.autoload(this, {\n\t\t\t\ttransport:\"script\"\n\t\t\t});\n\t\t\tthis.views = {};\n\t\t\tthis.controllers = {};\n\t\t\tthis.templates = {};\n\t\t\tthis.routes = {};\n\n\t\t\tthis.twig = this.get(\"twig\");\n\n\t\t\tthis.setParameters(\"module.\"+this.name, this.config);\n\t\t\tthis.set(this.name, this);\n\t\t\tthis.boot(settings);\n\t\t}\n\n\t\tlisten (){\n\t\t\treturn this.notificationsCenter.listen.apply(this.notificationsCenter, arguments);\n\t\t}\n\n\t\tfire (event){\n\t\t\tthis.logger(event+\" : \"+ this.name , \"DEBUG\", \"EVENT MODULE\")\n\t\t\t\treturn this.notificationsCenter.fire.apply(this.notificationsCenter, arguments);\n\t\t}\n\n\t\tlogger (pci, severity, msgid,  msg){\n\t\t\tif (! msgid) msgid = \"MODULE  \"+this.name;\n\t\t\treturn this.syslog.logger(pci, severity, msgid,  msg);\t\n\t\t}\n\n\t\t/**\n\t \t\t*\t@method get\n\t \t\t*\t@param {String} name of service\n         \t\t*/\n\t\tget (name){\n\t\t\treturn this.container.get(name);\n\t\t}\n\n\t\t/**\n\t \t\t*\t@method set\n\t \t\t*\t@param {String} name of service\n\t \t\t*\t@param {Object} instance of service\n         \t\t*/\n\t\tset (name, obj){\n\t\t\treturn this.container.set(name, obj);\n\t\t}\n\n\t\tsetParameters (name, value){\n\t\t\treturn this.container.setParameters(name, value);\t\n\t\t}\n\n\t\tgetParameters (name){\n\t\t\treturn this.container.getParameters(name);\t\n\t\t}\n\n\t\tgetController (name){\n\t\t\treturn this.controllers[name];\n\t\t}\n\n\t\tgetTemplate (name){\n\t\t\treturn this.templates[name];\n\t\t}\n\n\t\tgetTemplateName (url){\n\t\t\tvar name = stage.basename(url);\n\t\t\tvar index = name.indexOf(\".\");\n\t\t\tif (index < 0)\n\t\t\t\treturn url;\n\t\t\treturn name.slice(0, name.indexOf(\".\") );\n\t\t}\n\n\t\tgetTemplatePattern (pattern){\n\t\t\tvar res  = regPattern.exec(pattern);\n\t\t\tif ( ! res ){\n\t\t\t\tvar txt = \"IN PATTERN :\" + pattern +\" BAD FORMAT \" ;\n\t\t\t\tthis.logger(txt,\"ERROR\")\n\t\t\t\t\tthrow new Error(txt);\n\t\t\t}\n\t\t\tvar moduleName = res[1];\n\t\t\tvar pathName = res[2];\n\t\t\tvar templateName = res[3];\t\n\t\t\tvar module = this.kernel.getModule(moduleName);\n\t\t\tif ( ! module ){\n\t\t\t\tvar txt = \"IN PATTERN :\" + pattern +\" MODULE :\"+ moduleName +\" not defined\" ;\n\t\t\t\tthis.logger(txt,\"ERROR\")\n\t\t\t\t\tthrow new Error(txt);\n\t\t\t}\n\t\t\tvar obj = module.templates ;\n\t\t\tif (pathName !== \"\"){\n\t\t\t\tvar tab = pathName.split(\"/\");\n\t\t\t\tfor (var i = 0 ; i<tab.length ; i++){\n\t\t\t\t\tif (tab[i]){\n\t\t\t\t\t\tif (tab[i] in obj){\n\t\t\t\t\t\t\tobj = obj[tab[i]];\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tvar txt = \"IN PATTERN :\" + pattern +\" pathName :\"+ pathName +\" not defined\" ;\n\t\t\t\t\t\t\tthis.logger(txt,\"ERROR\")\n\t\t\t\t\t\t\t\tthrow new Error(txt);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (templateName !== \"\" ){\n\t\t\t\tvar name = this.getTemplateName(templateName);\n\t\t\t\tif (obj[name]){\n\t\t\t\t\treturn obj[name];\n\t\t\t\t}else{\n\t\t\t\t\tvar txt = \"IN PATTERN :\" + pattern +\" MODULE :\"+ moduleName +\"  template : \"+ templateName +\" not defined\" ;\n\t\t\t\t\tthis.logger(txt,\"ERROR\")\n\t\t\t\t\t\tthrow new Error(txt);\t\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif (obj[\"index\"]){\n\t\t\t\t\treturn obj[\"index\"];\n\t\t\t\t}else{\n\t\t\t\t\tvar txt = \"IN PATTERN :\" + pattern +\" MODULE :\"+ moduleName +\" default template not defined\" ;\n\t\t\t\t\tthis.logger(txt,\"ERROR\")\n\t\t\t\t\t\tthrow new Error(txt);\t\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tgetView (name){\n\t\t\treturn this.views[name];\n\t\t}\n\n\t\tboot (settings){\n\t\t\tthis.logger(\"BOOT \"+ this.name , \"DEBUG\");\n\t\t\tthis.container = this.kernel.container.enterScope(this.name);\n\t\t\tthis.notificationsCenter = stage.notificationsCenter.create(settings,this);\n\t\t\tthis.set(\"notificationsCenter\", this.notificationsCenter);\n\t\t\tthis.router = this.kernel.router ;\n\n\t\t\ttry {\n\t\t\t\tthis.fire(\"onBoot\", this);\t\n\t\t\t\tthis.reader();\n\t\t\t\tthis.fire(\"onReady\",this);\n\t\t\t}catch (e){\n\t\t\t\tthis.logger(\"MODULE : \"+ this.name +\"  \"+e, \"ERROR\");\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t}\n\t};\n\n\tstage.Module = Module; \n\treturn Module ;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/kernel/module.es6","const  Twig = require(\"twig\");\n\nmodule.exports =  function(stage){\n\n\t'use strict';\n\t\t\t\n\t/*\n \t *\n \t *\tROUTE\n \t *\n \t */\n\n\tvar decode = function(str) {\n\t\ttry {\n\t\t\treturn decodeURIComponent(str);\n\t\t} catch(err) {\n\t\t\treturn str;\n\t\t}\n\t};\n\tvar Route = class Route {\n\n\t\tconstructor(id, path, defaultParams){\n\t\t\tthis.id = id ;\n\t\t\tthis.path = path;\n\t\t\tthis.template = null;\t\n\t\t\tthis.controller =null;\n\t\t\tthis.defaults =  defaultParams;\n\t\t\tthis.variables = [];\n\t\t\tthis.pattern = this.compile();\n\t\t};\n\n\t\tcompile (){\n\t\t\tvar pattern = this.path.replace(/(\\/)?(\\.)?\\{([^}]+)\\}(?:\\(([^)]*)\\))?(\\?)?/g, (match, slash, dot, key, capture, opt, offset) =>  {\n\t\t\t\tvar incl = (this.path[match.length+offset] || '/') === '/';\n\t\t\t\tthis.variables.push(key);\n\t\t\t\treturn (incl ? '(?:' : '')+(slash || '')+(incl ? '' : '(?:')+(dot || '')+'('+(capture || '[^/]+')+'))'+(opt || '');\n\t\t\t});\n\t\t\tpattern = pattern.replace(/([\\/.])/g, '\\\\$1').replace(/\\*/g, '(.+)');\n\t\t\tthis.pattern = new RegExp('^'+pattern+'[\\\\/]?$', 'i');\n\t\t\treturn this.pattern ;\t\n\t\t}\n\n\t\tmatch (url){\n\t\t\tvar res = url.match(this.pattern);\n\t\t\t//console.log(res)\n\t\t\tif (!res) {\n\t\t\t\treturn res;\n\t\t\t}\n\t\t\tvar map = [];\n\t\t\tvar tab = res.slice(1) ;\n\t\t\tfor (var i = 0 ; i<tab.length; i++){\n\t\t\t\tvar k = this.variables[i] || 'wildcard';\n\t\t\t\tvar param = tab[i] && decode(tab[i]);\n\t\t\t\t//var index = map.push( map[k] ? [].concat(map[k]).concat(param) : param );\n\t\t\t\tvar index = map.push( param )\n\t\t\t\tmap[k] = map[index-1] ;\n\n\t\t\t}\n\t\t\tif ( map && map.wildcard) {\n\t\t\t\tmap['*'] = map.wildcard;\n\t\t\t}\n\t\t\treturn map;\n\t\t}\n\t};\n\n\t/*\n \t *\n \t *\tRESOLVER\n \t *\n \t */\n\tvar regModuleName = /^(.*)Module[\\.js]{0,3}$/;\n\tvar Resolver = class Resolver {\n\n\t\tconstructor(container){\n\t\t\tthis.container = container;\n\t\t\tthis.resolve = false;\n\t\t\tthis.kernel = this.container.get(\"kernel\");\n\t\t\tthis.defaultAction = null;\n\t\t\tthis.defaultView = null;\n\t\t\tthis.variables = new Array();\n\t\t\tthis.router = this.container.get(\"router\")\n\t\t\tthis.browser = this.container.get(\"browser\")\n\t\t\t//this.notificationsCenter = this.container.get(\"notificationsCenter\") ;\n\t\t\n\t\t}\n\n\t\tmatch (route, url){\n\t\t\tvar match = route.match(url); \n\t\t\tif ( match ){\n\t\t\t\tthis.variables = match;\n\t\t\t\tthis.url = url;\n\t\t\t\tthis.route = route;\n\t\t\t\tthis.parsePathernController(route.defaults.controller)\n\t\t\t}\t\t\n\t\t\treturn match;\n\t\t}\n\n\n\t\tgetModuleName (str){\n\t\t\tvar ret = regModuleName.exec(str);\n\t\t\tif (ret){\n\t\t\t\treturn  ret[1] ;\n\t\t\t}else{\n\t\t\t\tthrow \"BAD MODULE PATTERN \";\n\t\t\t}\n\t\t}\n\n\t\tgetController (name){\n\t\t\treturn this.module.controllers[name+\"Controller\"];\n\t\t}\n\n\t\tgetAction (name){\n\t\t\tvar ele = name+\"Action\" ;\n\t\t\tif ( ele in this.controller ){\n\t\t\t\treturn this.controller[ele]\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tgetDefaultView (controller, action){\n\t\t\tvar res = this.module.name+\"Module\"+\":\"+controller+\":\"+action+\".html.twig\";\n\t\t\treturn res ; \n\t\t}\n\n\t\tparsePathernController (pattern){\n\t\t\tif (typeof pattern !== \"string\"){\n\t\t\t\tthrow new Error(\"Resolver : pattern : \"+pattern +\" MUST be a string\");\t\n\t\t\t}\n\t\t\tthis.route = this.router.getRouteByPattern(pattern);\n\t\t\tvar tab = pattern.split(\":\")\n\t\t\ttry {\n\t\t\t\tthis.module = this.kernel.getModule( this.getModuleName(tab[0]) );\n\t\t\t}catch(e){\n\t\t\t\tthrow new Error(\"Resolver pattern error module :  \" + pattern + \" : \" +e );\n\t\t\t}\n\t\t\tif ( this.module ){\n\t\t\t\tthis.controller = this.getController(tab[1]);\n\t\t\t\tif ( this.controller ){\n\t\t\t\t\tif (tab[2]){\n\t\t\t\t\t\tthis.action = this.getAction(tab[2]);\n\t\t\t\t\t\tif (! this.action ){\n\t\t\t\t\t\t\tthrow new Error(\"Resolver :In CONTROLLER: \"+ tab[1] +\" ACTION  :\"+tab[2] + \" not exist\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.action = null;\t\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tthrow new Error(\"Resolver :controller not exist :\"+tab[1] );\n\t\t\t\t}\n\t\t\t\tthis.defaultView = this.getDefaultView(tab[1], tab[2] );\n\t\t\t\tthis.resolve = true;\n\t\t\t}else{\n\t\t\t\t//this.logger(\"Resolver : not exist :\"+tab[0] , \"ERROR\")\n\t\t\t\tthrow new Error(\"Resolver : module not exist :\"+tab[0] );\n\t\t\t}\n\t\t}\n\t\t\n\t\tcallController (arg){\n\t\t\ttry{\n\t\t\t\tvar ret = this.action.apply(this.controller, arg || [])\t\n\t\t\t}catch(e){\n\t\t\t\tthis.controller.logger.call(this.controller, e, \"ERROR\");\t\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t\treturn ret;\n\t\t}\n\t};\n\n\t/*\n\t *\tROUTER\n\t */\n\n\tvar cacheState = function(){\n\t\tvar cacheState = window.history.state === undefined ? null : window.history.state;\t\n\t\treturn cacheState ;\n\t}\n\n\tvar nativeHistory = !!(window.history && window.history.pushState );\n\tvar regSerch = /(.*)\\?.*$/;\n\n\tvar service = class service  extends stage.Service {\n\n\t\tconstructor(kernel, container){\n\n\t\t\tsuper(\"ROUTER\", container );\n\t\t\t//this.kernel = kernel ;\n\t\t\t//this.container = container ;\n\t\t\t//this.notificationsCenter = this.container.get(\"notificationsCenter\");\n\t\t\t//this.syslog = kernel.syslog ;\t\n\t\t\tthis.routes = {};\n\t\t\tthis.routePattern = {};\n\t\t\tthis.location = this.get(\"location\");\n\t\t\tthis.browser = this.get(\"browser\");\n\t\t\tthis.logger(\"INITIALIZE ROUTER SERVICE\", \"DEBUG\");\n\n\t\t\t/*\n \t\t \t* Extend Twig js\t\n \t\t \t*/\n\t\t\tTwig.extendFunction(\"path\", (name, variables, host) => {\n\t\t\t\ttry {\n\t\t\t\t\tif (host){\n\t\t\t\t\t\treturn  this.generateUrl.call(this, name, variables, host);\t\n\t\t\t\t\t}else{\n\t\t\t\t\t\tvar generatedPath = this.generateUrl.call(this, name, variables, host);\n\t\t\t\t\t\treturn generatedPath?\"#\"+generatedPath:\"\";\n\t\t\t\t\t}\n\t\t\t\t}catch(e){\n\t\t\t\t\tthis.logger(e.error)\n\t\t\t\t\tthrow e.error\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.notificationsCenter.listen(this,\"onUrlChange\" , (url, lastUrl, absUrl ,cache) => {\n\t\t\t\ttry{\n\t\t\t\t\tvar res = this.resolve(url);\n\t\t\t\t\tif(! res.resolve ){\n\t\t\t\t\t\tthis.forward(\"appModule:app:404\");\n\t\t\t\t\t\treturn ;\n\t\t\t\t\t}\n\t\t\t\t\tvar last = this.resolveRoute(lastUrl) \n\t\t\t\t\tif (last){\n\t\t\t\t\t\tthis.notificationsCenter.fire(\"onRouteChange\",{id:res.route.id, route:res.route, args:res.variables} ,{id:last.route.id, route:last.route, args:last.variables});\n\t\t\t\t\t}\n\t\t\t\t}catch (e){\n\t\t\t\t\tthis.logger(e, \"ERROR\");\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\tcreateRoute (id, path, defaultParams){\n\t\t\tif (id in this.routes ){\n\t\t\t\tthis.logger(\"CREATE ROUTE : \"+ id + \"Already exist \", \"ERROR\");\t\n\t\t\t}\n\t\t\tvar route  = new Route(id, path, defaultParams);\n\t\t\tthis.routes[id] = route;\n\t\t\tthis.routePattern[this.routes[id].defaults.controller] = {\n\t\t\t\troute:this.routes[id],\n \t\t        \tpath:path\t\n\t\t\t}\n\t\t\tthis.logger(\"CREATE ROUTE : \"+ id, \"DEBUG\");\n\t\t\treturn route ;\n\t\t}\n\n\t\tgetRoute (name){\n\t\t\tif (this.routes[name])\n\t\t\t\treturn this.routes[name];\n\t\t\treturn null;\n\t\t}\n\n\t\tresolveRoute (url){\n\t\t\tvar resolver = new Resolver(this.container);\n\t\t\tvar res = [];\n\t\t\tfor (var routes in this.routes){\n\t\t\t\tvar route = this.routes[routes];\n\t\t\t\ttry {\n\t\t\t\t\tres = resolver.match(route, url);\n\t\t\t\t\tif (res){\n\t\t\t\t\t\treturn resolver ; \n\t\t\t\t\t}\n\t\t\t\t}catch(e){\n\t\t\t\t\tcontinue ;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\t\n\t\tresolve (url){\n\t\t\t//console.log(\"RESOLVE \" +url)\n\t\t\t//console.log(regSerch.exec(url) );\n\t\t\tvar test = regSerch.exec(url) ;\n\t\t\tif ( test )\n\t\t\t\turl = test[1] ;\n\t\t\tvar resolver = new Resolver(this.container);\n\t\t\tvar res = [];\n\t\t\tfor (var routes in this.routes){\n\t\t\t\tvar route = this.routes[routes];\n\t\t\t\ttry {\n\t\t\t\t\tres = resolver.match(route, url);\n\t\t\t\t\tif (res){\n\t\t\t\t\t\tthis.notificationsCenter.fire(\"onBeforeAction\", url, resolver );\n\t\t\t\t\t\tvar ret = resolver.callController( res)\n\t\t\t\t\t\tthis.notificationsCenter.fire(\"onAfterAction\", url, resolver, ret );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}catch(e){\n\t\t\t\t\tthis.logger(\"RESOLVE URL : \"+ url + \" \" + e,\"ERROR\")\n\t\t\t\t\tthis.forward(\"appModule:app:500\", [e]);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn resolver;\n\t\t}\n\n\t\tgetRouteByPattern (pattern, args){\n\t\t\t//console.log(pattern)\n\t\t\t//console.log(this.routePattern)\n\t\t\tif (pattern in this.routePattern){\n\t\t\t\t//console.log(\"FIND\")\n\t\t\t\tvar route = this.routePattern[pattern].route ;\n\t\t\t\treturn route;\n\t\t\t}\n\t\t\t\t//console.log(\"NOT FIND\")\n\t\t\treturn null;\n\t\t};\n\n\t\tresolvePattern (pattern){\n\t\t\tvar resolver = new Resolver(this.container);\t\n\t\t\tvar route = resolver.parsePathernController(pattern);\n\t\t\treturn resolver;\n\t\t};\n\n\t\tforward (pattern, args){\n\t\t\tvar resolver = this.resolvePattern(pattern);\n\t\t\tif (resolver.resolve){\n\t\t\t\ttry {\n\t\t\t\t\tif (resolver.route){\n\t\t\t\t\t\tthis.logger(\"FORWARD PATTERN : \"+ pattern + \"  FIND ROUTE ==> REDIRECT \",\"DEBUG\")\n\t\t\t\t\t\tthis.redirect(resolver.route.path);\n\t\t\t\t\t\t//this.location.url(resolver.route.path);\n\t\t\t\t\t\t//this.logger(\"FORWARD PATTERN : \"+ pattern + \" find ROUTE : \"+resolver.route.path +\" redirect to URL :\" + this.location.absUrl(),\"DEBUG\")\n\t\t\t\t\t\t//this.browser.url(this.location.absUrl(), true);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.logger(\"FORWARD PATTERN : \"+ pattern + \"  NO ROUTE FIND  ==> CALL CONTROLLER\"  , \"DEBUG\")\n\t\t\t\t\t\tvar ret = resolver.callController(args);\t\n\t\t\t\t\t}\n\t\t\t\t}catch(e){\n\t\t\t\t\tthis.logger(\"FORWARD \"+ pattern +\" CALL CONTROLER  \"+ resolver.controller.name +\" : \"+e,\"ERROR\")\n\t\t\t\t\tthis.forward(\"appModule:app:500\", [e]);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.logger(\"Router Can't resolve : \"+pattern ,\"ERROR\");\n\t\t\t}\n\t\t\treturn false;\t\n\t\t};\n\t\t\n\t\tredirect (url){\n\t\t\tthis.location.url(url);\n\t\t\tthis.logger(\"REDIRECT URL : \"+ url  +\" BROWSER  URL :\" + this.location.absUrl(),\"DEBUG\")\n\t\t\tthis.browser.url(this.location.absUrl() , true);\n\t\t};\n\t\t\t\n\t\tgenerateUrl (name, variables, host){\n\t\t\tvar route =  this.getRoute(name) ;\n\t\t\tif (! route ){\n\t\t\t\tthis.logger(\"no route to host  :\"+ name, \"WARNING\")\n\t\t\t\t//throw {error:\"no route to host  \"+ name};\n\t\t\t\treturn null ; \n\t\t\t}\n\t\t\tvar path = route.path;\n\t\t\tif ( route.variables.length ){\n\t\t\t\tif (! variables  ){\n\t\t\t\t\tvar txt = \"\";\n\t\t\t\t\tfor (var i= 0 ; i < route.variables.length ;i++ ){\n\t\t\t\t\t\ttxt += \"{\"+route.variables[i]+\"} \";\n\t\t\t\t\t}\n\t\t\t\t\tthis.logger(\"router generate path route '\"+ name + \"' must have variable \"+ txt, \"ERROR\")\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tfor (var ele in variables ){\n\t\t\t\t\tif (ele === \"_keys\") continue ;\n\t\t\t\t\tvar index = route.variables.indexOf(ele);\n\t\t\t\t\tif ( index >= 0 ){\n\t\t\t\t\t\tpath = path.replace(\"{\"+ele+\"}\",  variables[ele]);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.logger(\"router generate path route '\"+ name + \"' don't  have variable \"+ ele, \"WARNING\")\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\t\n\t\t\t\t}\t\n\t\t\t}\n\t\t\tif (host){\n\t\t\t\treturn host+\"#\"+path ;\n\t\t\t}\n\t\t\treturn path ;\n\t\t}\n\t};\n\n\tstage.router = service ;\n\treturn service ; \n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/kernel/routerService.es6","module.exports =  function(stage){\n\n\t'use strict';\n\n\tvar settingsSyslog = {\n\t\t//rateLimit:100,\n\t\t//burstLimit:10,\n\t\tmoduleName:\"SERVICE \",\n\t\tdefaultSeverity:\"INFO\"\n\t};\n\n\tvar defaultOptions = {\n\t};\n\n\n\tconst Service = class Service {\n\t\n\t\tconstructor(name, container, notificationsCenter, options ){\n\n\t\t\tif (name){\n\t\t\t\tthis.name = name ;\n\t\t\t}\n\t\t\toptions = stage.extend( {}, defaultOptions, options) ;\n\n\t\t\tif ( container instanceof stage.Container  ){\n\t\t\t\tthis.container = container ;\n\t\t\t}else{\n\t\t\t\tif ( container ){\n\t\t\t\t\tthrow new Error (\"Service stage container not valid must be instance of stage.Container\");\n\t\t\t\t}\n\t\t\t\tthis.container = new stage.Container(); \n\t\t\t\tthis.container.set(\"container\", this.container);\n\t\t\t}\n\t\t\tthis.kernel = this.container.get(\"kernel\");\n\t\t\tthis.syslog = this.container.get(\"syslog\");\n\t\t\tif ( ! this.syslog ){\n\t\t\t\tthis.settingsSyslog = stage.extend({}, settingsSyslog , {\n\t\t\t\t\tmoduleName: this.name\t\n\t\t\t\t},options.syslog || {} );\n\t\t\t\tthis.syslog = new stage.syslog( this.settingsSyslog );\t\n\t\t\t\tthis.set(\"syslog\", this.syslog);\n\t\t\t}else{\n\t\t\t\tthis.settingsSyslog = this.syslog.settings ;\t\n\t\t\t}\n\t\t\tif ( notificationsCenter instanceof stage.notificationsCenter.notification ){\n\t\t\t\tthis.notificationsCenter = notificationsCenter ;\n\t\t\t}else{\n\t\t\t\tif ( notificationsCenter ){\n\t\t\t\t\tthrow new Error (\"Service stage notificationsCenter not valid must be instance of stage.notificationsCenter.notification\");\n\t\t\t\t}\n\t\t\t\tthis.notificationsCenter = this.container.get(\"notificationsCenter\");\n\t\t\t\tif ( ! this.notificationsCenter ){\n\t\t\t\t\tthis.notificationsCenter = stage.notificationsCenter.create(options, this);\n\t\t\t\t\tif (! this.kernel ){\n\t\t\t\t\t\tthis.set(\"notificationsCenter\", this.notificationsCenter);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif ( this.kernel.container !== this.container ){\n\t\t\t\t\t\t\tthis.set(\"notificationsCenter\", this.notificationsCenter);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\t\n\t\t}\n\n\t\tgetName (){\n\t\t\treturn this.name;\n\t\t}\n\n\t\tclean(){\n\t\t\tthis.settingsSyslog = null ;\n\t\t\tdelete this.settingsSyslog ;\n\t\t\tthis.syslog = null  ;\n\t\t\tdelete this.syslog ;\n\t\t\tthis.removeAllListeners();\n\t\t\tthis.notificationsCenter = null ;\n\t\t\tdelete this.notificationsCenter ;\n\t\t\tthis.container = null ;\n\t\t\tdelete this.container ;\n\t\t\tthis.kernel = null ;\n\t\t\tdelete this.kernel ;\n\t\t}\n\t\n\t\tlogger(pci, severity, msgid,  msg){\n\t\t\ttry {\n\t\t\t\tif (! msgid) { msgid = \"SERVICE \" + this.name + \" \"; }\n\t\t\t\treturn this.syslog.logger(pci, severity, msgid,  msg);\t\n\t\t\t}catch(e){\n\t\t\t\tconsole.log(pci);\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t \t*\t@method fire\n\t \t*\t@param {String} event name \n\t \t*\t@param {Arguments} ... arguments to inject  \n         \t*/\n\t\tfire (){\n\t\t\t//this.logger(ev, \"DEBUG\", \"EVENT KERNEL\")\n\t\t\treturn this.notificationsCenter.fire.apply(this.notificationsCenter, arguments);\n\t\t}\n\n\t\t/**\n\t \t*\t@method listen\n\t \t*\t@param {Oject} context\n\t \t*\t@param {String} eventName\n\t \t*\t@param {Function} listener\n         \t*/\n\t\tlisten (){\n\t\t\treturn this.notificationsCenter.listen.apply(this.notificationsCenter, arguments);\n\t\t}\n\n\t\t/**\n\t \t*\t@method removeListener\n\t \t*\t@param {Oject} eventName \n\t \t*\t@param {String} listener\n         \t*/\n\t\tremoveListener (){\n\t\t\treturn this.notificationsCenter.unListen.apply(this.notificationsCenter, arguments);\n\t\t}\n\t\t\n\t\tunListen (){\n\t\t\treturn this.notificationsCenter.unListen.apply(this.notificationsCenter, arguments);\n\t\t}\n\n\n\t\t/**\n\t \t*\t@method removeAllListeners\n         \t*/\n\t\tremoveAllListeners (){\n\t\t\treturn this.notificationsCenter.clearNotifications.apply(this.notificationsCenter, arguments);\n\t\t}\n\n\t\t/**\n\t \t *\t@method get\n\t \t *\t@param {String} name of service\n         \t */\n\t\tget (name){\n\t\t\tif (this.container){\n\t\t\t\treturn this.container.get(name);\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\t/**\n\t \t*\t@method set\n\t \t*\t@param {String} name of service\n\t \t*\t@param {Object} instance of service\n         \t*/\n\t\tset (name, obj){\n\t\t\tif (this.container){\n\t\t\t\treturn this.container.set(name, obj);\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tgetParameters (){\n\t\t\treturn this.container.getParameters.apply(this.container , arguments);\n\t\t}\n\n\t\tsetParameters (){\n\t\t\treturn this.container.setParameters.apply(this.container ,arguments);\n\t\t}\n\n\t\thas (){\n\t\t\treturn this.container.has.apply(this.container ,arguments);\t\n\t\t}\n\t};\n\n\tstage.Service = Service;\t\n\treturn Service ;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/kernel/service.es6","var Twig = require(\"twig\");\n\nmodule.exports =  function(stage){\n\n\t'use strict';\n\n\n\tvar translate = {};\n\n\n\tvar translateDispo = {\n\t\tfr_FR:\"français\",\n\t\ten_EN:\"english\"\n\t};\n\n\tvar regNavLang = /(..)-?.*/;\n\n\n\tvar service = class service extends stage.Service {\n\n\t\tconstructor(kernel, container){\n\n\t\t\tsuper(\"I18N\", container, container.get(\"notificationsCenter\"));\n\n\t\t\tthis.logger(\"INITIALIZE I18N SERVICE\", \"DEBUG\");\n\n\t\t\tthis.container.setParameters(\"translate\", translate);\n\t\t\tthis.defaultDomain = this.trans_default_domain();\n\t\t\tvar locale = navigator.language || navigator.userLanguage ;\n\t\t\tvar res = regNavLang.exec(locale);\n\t\t\tif (res){\n                                this.defaultLocale = res[1]+\"_\"+locale.toUpperCase();\n\t\t\t}else{\n\t\t\t\tthis.defaultLocale = \"fr_FR\";\t\n\t\t\t}\n\n                        translate[this.defaultLocale] = {};\n\n\t\t\tthis.listen(this, \"onBoot\",() => {\n\t\t\t\tthis.boot();\n\t\t\t})\t\n\t\t}\n\n\t\t\n\t\tboot (){\n\t\t\t//GET APP locale\n\t\t\tif ( this.kernel.modules.app &&  this.container.getParameters(\"module.app\") ){\n\t\t\t\tthis.defaultLocale = this.container.getParameters(\"module.app\").locale || this.defaultLocale;\n\t\t\t}\n\n\t\t\tif  ( ! translate[this.defaultLocale]){\n\t\t\t\ttranslate[this.defaultLocale] = {};\n\t\t\t}\n\n\t\t\tthis.logger(\"DEFAULT LOCALE APPLICATION ==> \" + this.defaultLocale ,\"DEBUG\");\n\t\t\tif (Twig){\n\t\t\t\tTwig.extendFunction(\"getLangs\", this.getLangs.bind(this));\n\t\t\t\tTwig.extendFunction(\"trans_default_domain\", this.trans_default_domain.bind(this));\n\t\t\t\tTwig.extendFilter(\"trans\", this.translation.bind(this));\n\t\t\t\tTwig.extendFunction(\"trans\", this.translation.bind(this));\n\t\t\t\tTwig.extendFilter(\"getLangs\", this.getLangs.bind(this));\n\t\t\t}\n\t\t}\n\n\t\tgetLangs (locale, data){\n\t\t\tvar obj = [];\n\t\t\tfor ( var ele in translateDispo){\n\t\t\t\tobj.push({\n\t\t\t\t\tname:translateDispo[ele],\n\t\t\t\t\tvalue:ele\n\t\t\t\t});\t\n\t\t\t}\n\t\t\treturn obj;\n\t\t}\n\n\n\t\tregisterI18n (name, locale, domain, data){\n\t\t\tif ( locale ){\n\t\t\t\tif( !translate[locale] )\n\t\t\t\t\ttranslate[locale] = stage.extend(true, {}, translate[this.defaultLocale]);\t\n\t\t\t}\n\t\t\tif ( domain ){\n\t\t\t\tif( !translate[locale][domain] ){\n\t\t\t\t\ttranslate[locale][domain] = stage.extend(true, {}, translate[this.defaultLocale][domain]);\n\t\t\t\t}\n\t\t\t\tstage.extend(true, translate[locale][domain], data);\t\t\n\t\t\t}else{\n\t\t\t\tstage.extend(true, translate[locale], data);\t\n\t\t\t} \n\t\t}\n\n\t\ttrans_default_domain (domain){\n\t\t\tif ( ! domain ){\n\t\t\t\treturn this.defaultDomain = \"messages\" ; \n\t\t\t}\n\t\t\treturn this.defaultDomain = domain ;\n\t\t}\n\n\t\t/*\n \t \t*\n \t \t*\n \t \t*\n \t \t*\n \t \t*/\n\t\ttranslation (value, args){\n\t\t\t\n\t\t\tvar defaulDomain = ( args && args[1] ) ? args[1] : this.defaultDomain ;\n\t\t\tvar str = this.container.getParameters(\"translate.\"+this.defaultLocale+\".\"+defaulDomain+\".\"+value) || value;\n\t\t\tif (args){\n\t\t\t\tif (args[0]){\n\t\t\t\t\tfor (var ele in args[0]){\n\t\t\t\t\t\tstr = str.replace(ele, args[0][ele]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn str;\n\t\t}\n\t};\n\n\tstage.i18n = service ;\n\n\treturn service;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/kernel/translationService.es6","require(\"webrtc-adapter\");\n\nmodule.exports =  function(stage){\n\n\t'use strict';\n\n\tvar audioContext = null ;\n\n\tvar webAudioApi = function(){\n\t\taudioContext = window.AudioContext || window.webkitAudioContext  ;\n\t\tif (audioContext)\n\t\t\treturn true;\n\t\treturn false;\n\t}();\n\n\t// UDPATER\n \tvar mediaStream = null ;\n\tvar getMediaStream =null;\n\n\tvar updaterMedia = function(){\n\t\t// MediaStream\tAPI\n\t\ttry {\n\t\t\tif (stage.browser.Webkit){\n\n\t\t\t\tgetMediaStream = function(stream){\n\t\t\t\t\treturn URL.createObjectURL(stream);\n\t\t\t\t};\n\n\t\t\t\tmediaStream =  webkitMediaStream ;\n  \t\t\t\t// The representation of tracks in a stream is changed in M26.\n  \t\t\t\t// Unify them for earlier Chrome versions in the coexisting period.\n  \t\t\t\tif (!webkitMediaStream.prototype.getVideoTracks) {\n\t\t\t\t\twebkitMediaStream.prototype.getVideoTracks = function() {\n\t\t\t\t\t\treturn this.videoTracks;\n\t\t\t\t\t};\n\t\t\t\t\twebkitMediaStream.prototype.getAudioTracks = function() {\n\t\t\t\t\t\treturn this.audioTracks;\n\t\t\t\t\t};\n  \t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (stage.browser.Gecko){\n\n\t\t\t\tgetMediaStream = function(stream){\n\t\t\t\t\treturn window.URL.createObjectURL(stream);\n\t\t\t\t};\n\n\t\t\t\tmediaStream =  MediaStream ;\n  \t\t\t\t// Fake get{Video,Audio}Tracks\n\t\t\t\tif (!MediaStream.prototype.getVideoTracks) {\n\t\t\t\t\tMediaStream.prototype.getVideoTracks = function() {\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (!MediaStream.prototype.getAudioTracks) {\n\t\t\t\t\tMediaStream.prototype.getAudioTracks = function() {\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (stage.browser.Opera){\n\t\t\t\t//getUserMedia = navigator.getUserMedia ;\n\t\t\t\tgetMediaStream = function(stream){\n\t\t\t\t\treturn stream;\n\t\t\t\t};\n\t\t\t\t// Fake get{Video,Audio}Tracks\n\t\t\t\tif (!MediaStream.prototype.getVideoTracks) {\n\t\t\t\t\tMediaStream.prototype.getVideoTracks = function() {\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (!MediaStream.prototype.getAudioTracks) {\n\t\t\t\t\tMediaStream.prototype.getAudioTracks = function() {\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tconsole.error(\"Browser does not appear to be mediaStream-capable\");\n\t\t}catch(e){\n\t\t\tconsole.error(e)\n\t\t}\n\t}();\n\n\t/*\n \t *\tMEDIA STREAM\n \t *\n \t *\n \t *\n \t *\n \t */\n\tvar defaultSettingsStream = {\n\t\taudio:true,\n\t\tvideo:true\n\t};\n\t\t\n\t/*var attachMediaStream = function(){\n\t\tif (stage.browser.Webkit || stage.browser.Opera){\n\t\t\treturn function(element){\n\t\t\t\t// Attach a media stream to an element.\n\t\t\t\tthis.mediaElement = element;\n\t\t\t\tthis.mediaElement.srcObject = this.stream ;\n\t\t\t\t//element.src = this.getMediaStream(this.stream);\n\t\t\t\tthis.mediaElement.play();\n\t\t\t}\n\t\t}\n\t\tif (stage.browser.Gecko){\n\t\t\treturn function(element){\n\t\t\t\t// Attach a media stream to an element.\n\t\t\t\tthis.mediaElement = element;\n\t\t\t\tthis.mediaElement.srcObject = this.stream ;\n\t\t\t\t//element.mozSrcObject = this.stream;\n\t\t\t\tthis.mediaElement.play();\n\t\t\t}\n\t\t}\n  \t}();*/\n\n\t//FIXME\n\t/*var reattachMediaStream = function (){\n\t\tif (stage.browser.Webkit){\n\t\t\treturn function(to){\n\t\t\t\t// reattach a media stream to an element.\n\t\t\t\tthis.mediaElement.src = this.getMediaStream(this.stream);\n\t\t\t\t//to.src = this.mediaElement.src;\n\t\t\t\tthis.mediaElement.play()\n\t\t\t\t//this.mediaElement = to;\n\t\t\t}\n\t\t}\n\t\tif (stage.browser.Gecko){\n\t\t\treturn function(to){\n\t\t\t\t// reattach a media stream to an element.\n\t\t\t\tto.mozSrcObject = this.mediaElement.mozSrcObject;\n\t\t\t\tto.play();\n\t\t\t\tthis.mediaElement = to;\n\t\t\t}\n\t\t}\n  \t}();*/\n\n\tvar mediaStream = class mediaStream  {\n\n\t\tconstructor(mediaElement, settings){\n\t\t\tthis.settings = stage.extend({},defaultSettingsStream, settings)\n\t\t\tthis.notificationsCenter = stage.notificationsCenter.create(this.settings, this);\n\t\t\tthis.urlStream = null;\n\t\t\tthis.stream = this.settings.stream ? this.setStream(this.settings.stream):null;\n\t\t\tthis.mediaElement = mediaElement ? mediaElement : null ;\n\t\t\tthis.getMediaStream = getMediaStream ;\n\t\t}\n\n\t\tgetUserMedia (settings, success, error){\n\n\t\t\tif (settings){\n\t\t\t\tthis.settings = stage.extend( {}, defaultSettingsStream, settings)\n\t\t\t\tthis.notificationsCenter.settingsToListen(settings);\n\t\t\t}\n\t\t\treturn navigator.getUserMedia({\n\t\t\t\t\tvideo:this.settings.video,\n\t\t\t\t\taudio:this.settings.audio\n\t\t\t\t},\n\t\t\t\t(stream) => {\n\t\t\t\t\tthis.setStream(stream);\n\t\t\t\t\tif (success)\n\t\t\t\t\t\tsuccess(this);\n\t\t\t\t\tthis.notificationsCenter.fire(\"onSucces\", stream, this);\n\t\t\t\t},\n\t\t\t\t(e) => {\n\t\t\t\t\tif (error){\n\t\t\t\t\t\terror(e);\n\t\t\t\t\t}\n\t\t\t\t\tthis.notificationsCenter.listen(this, \"onError\")\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tsetStream (stream){\n\t\t\tthis.stream = stream ;\n\t\t\tthis.urlStream = this.getMediaStream(stream);\n\t\t\tthis.videotracks = this.getVideoTracks();\n\t\t\tthis.audiotracks = this.getAudioTracks();\n\t\t\treturn stream ;\n\t\t}\n\n\t\tstop (){\n\t\t\tif (this.stream){\n\t\t\t\tthis.stream.stop();\n\t\t\t}\n\t\t}\n\n\t\tattachMediaStream (element){\n\t\t\tthis.mediaElement = element;\n\t\t\tthis.mediaElement.srcObject = this.stream ;\n\t\t\t//element.mozSrcObject = this.stream;\n\t\t\tthis.mediaElement.play(); \n  \t\t}\n\n\t\treattachMediaStream (stream){\n\t\t\tthis.stream = stream;\n\t\t\tthis.attachMediaStream(this.mediaElement);\n  \t\t}\n\t\t\t\n\t\tgetVideoTracks (){\n\t\t\treturn this.stream.getVideoTracks();\n\t\t}\n\n\t\tgetAudioTracks (){\n\t\t\treturn this.stream.getAudioTracks();\n\t\t}\n\n\t\t/*startRecording (stream){\n\t\t\tvar mediaStreamSource = this.audioContext.createMediaStreamSource(stream);\n\t\t\tconsole.log(mediaStreamSource);\n\t\t\tmediaStreamSource.connect(this.audioContext.destination);\n\t\t\tthis.recorder = new Recorder(mediaStreamSource);\n\t\t}\n\t\tstopRecording (){\n\t\t\tthis.recorder.stop();\n\t\t\tthis.recorder.exportWAV((stream) => {\n\t\t\t\tthis.recordSource = window.URL.createObjectURL(stream);\n\t\t\t});\n\t\t}*/\n\t};\n\n\n\n\t/*\n \t *\n \t *\tTRACK\n \t *\t\n \t *\n \t */\n\tvar trackSettings = {\n\t\tgain\t\t: true,\n\t\tpanner\t\t: true,\n\t\tfilter\t\t: false,\n\t\tanalyser\t: false,\n\t\tconnect\t\t: true,\n\t};\n\n\tvar Track = class Track {\n\n\t\tconstructor(media, bus, settings){\n\t\t\tthis.media = media ;\n\t\t\tthis.bus = bus ;\n\t\t\tthis.settings = stage.extend({}, trackSettings, settings);\n\t\t\tthis.audioNodes = {} ;\n\t\t\tthis.audioBus = {};\n\t\t\tthis.transport = null;\n\t\t\tthis.context = bus.audioContext ;\n\n\t\t\tthis.source = null;\n\t\t\tthis.buffer = null;\n\t\t\tthis.out = null ;\n\t\t\tthis.in = null ;\n\n\t\t\tthis.name = this.settings.name ;\n\t\t\tthis.id = this.generateId();\n\n\t\t\tthis.sync = 0;\n\t\t\tthis.retry = 0;\n\t\t\tthis.ready = false ;\n\t\t\tthis.muted = false ;\n\t\t\tthis.currentTime = 0 ;\n\t\t\tthis.eventsManager = stage.notificationsCenter.create(this.settings, this);\n\t\t\tthis.createNodes();\n\n\t\t\tif ( this.settings.connect ){\n\t\t\t\tthis.connect(this.bus.in);\n\t\t\t}\n\n\t\t\tthis.listen(this, \"onReady\" , function(){\n\t\t\t\tthis.bus.mixer.fire('onReadyTrack', this.bus, this);\n\t\t\t})\n\n\t\t\tvar type = stage.typeOf(media) ;\n\t\t\tswitch ( type ){\n\t\t\t\tcase \"object\" :\n\t\t\t\t\tswitch (true ){\n\t\t\t\t\t\tcase  media instanceof mediaStream :\n\t\t\t\t\t\t\tthis.mediaType = \"stream\" ;\n\t\t\t\t\t\t\tthis.buffer = media.stream;\n\t\t\t\t\t\t\tthis.url = stage.io.urlToOject(media.urlStream);\n\t\t\t\t\t\t\tthis.ready = true;\n\t\t\t\t\t\t\tthis.fire(\"onReady\", this);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase  media instanceof AudioNode :\n\t\t\t\t\t\t\tthis.mediaType = \"audioNode\" ;\n\t\t\t\t\t\t\tthis.buffer = media ;\n\t\t\t\t\t\t\tthis.ready = true;\n\t\t\t\t\t\t\tthis.fire(\"onReady\", this);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault :\n\t\t\t\t\t\t\tvar error = new Error (\"media type not allowed \") ;\n\t\t\t\t\t\t\tthis.fire(\"onError\",  error) ;\n\t\t\t\t\t\t\tthrow error ;\n\t\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\tcase \"element\":\n\t\t\t\t\tthis.mediaType = \"element\";\n\t\t\t\t\t/*this.media.onloadstart = () => {\n\t\t\t\t\t\tconsole.log(\"loadstart\");\n\t\t\t\t\t}\n\t\t\t\t\tthis.media.onloadeddata = () => {\n\t\t\t\t\t\tconsole.log(\"onloadeddata\");\n\t\t\t\t\t}*/\t\n\t\t\t\t\tthis.media.oncanplay= () => {\n\t\t\t\t\t\tthis.connectSource( this.media );\n\t\t\t\t\t\tthis.ready = true;\n\t\t\t\t\t\tthis.fire(\"onReady\", this);\n\t\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t\tcase \"string\" :\n\t\t\t\t\tthis.url = stage.io.urlToOject(media);\n\t\t\t\t\tthis.load(media);\n\t\t\t\tbreak;\n\t\t\t\tdefault :\n\t\t\t\t\tvar error = new Error (\"Track media type error\") ;\n\t\t\t\t\tthis.fire(\"onError\",  error) ;\n\t\t\t\t\tthrow error ;\n\t\t\t}\n\t\t}\n\n\t\tgenerateId (){\n\t\t\treturn parseInt(Math.random()*1000000000,10);\n\t\t}\n\n\t\tsetName (name){\n\t\t\tthis.name = name ;\n\t\t}\n\n\t\tlisten (){\n\t\t\treturn this.eventsManager.listen.apply(this.eventsManager, arguments);\n\t\t}\n\n\t\tunListen (){\n\t\t\treturn this.eventsManager.unListen.apply(this.eventsManager, arguments);\n\t\t}\n\n\t\tfire (){\n\t\t\treturn this.eventsManager.fire.apply(this.eventsManager, arguments);\n\t\t}\n\n\t\tcreateNodes (){\n\n\t\t\tthis.audioNodes[\"mute\"] = this.bus.createGain() ;\n\t\t\tthis.in = this.audioNodes[\"mute\"];\n\t\t\tthis.out = this.audioNodes[\"mute\"];\n\n\t\t\tif (this.settings.gain){\n\t\t\t\tthis.audioNodes[\"gain\"] = this.bus.createGain() ;\n\t\t\t\tthis.out.connect( this.audioNodes[\"gain\"] )\n\t\t\t\tthis.out = this.audioNodes[\"gain\"];\n\t\t\t}\n\t\t\tif (this.settings.filter){\n\t\t\t\tthis.audioNodes[\"filter\"]  = this.bus.createFilter();\n\t\t\t\tthis.out.connect(this.audioNodes[\"filter\"])\n\t\t\t\tthis.out = this.audioNodes[\"filter\"] ;\n\t\t\t}\n\n\t\t\tif (this.settings.panner){\n\t\t\t\tthis.audioNodes[\"panner\"]  = this.bus.createStereoPanner();\n\t\t\t\tthis.out.connect( this.audioNodes[\"panner\"] );\n\t\t\t\tthis.out = this.audioNodes[\"panner\"] ;\n\t\t\t}\n\t\t\tif (this.settings.analyser){\n\t\t\t\tthis.audioNodes[\"analyser\"] = this.bus.createAnalyser();\n\t\t\t\tthis.audioNodes[\"analyser\"].smoothingTimeConstant = 0.85;\n\t\t\t\tthis.out.connect( this.audioNodes[\"analyser\"] );\n\t\t\t}\n\t\t}\n\n\t\tsetGain (value) {\n\t\t\tthis.audioNodes.gain.gain.value = value ;\n\t\t\tthis.fire(\"onSetGain\", value);\n\t\t\treturn this;\n  \t\t}\n\n\t\tgetGain () {\n\t\t\treturn this.audioNodes.gain.gain.value  ;\n  \t\t}\n\n\t\tmute () {\n\t\t\tthis.audioNodes.mute.gain.value = 0;\n\t\t\tthis.muted = true;\n\t\t\tthis.fire(\"onMute\",this);\n\t\t\treturn this;\n  \t\t}\n\n\t\tunmute (){\n\t\t\tthis.audioNodes.mute.gain.value = 1;\n\t\t\tthis.muted = false;\n\t\t\tthis.fire(\"onUnMute\",this);\n\t\t\treturn this;\n  \t\t}\n\n\t\tpause (when) {\n\t\t\tswitch ( this.mediaType ){\n\t\t\t\tcase \"element\":\n\t\t\t\t\tthis.media.pause();\n\t\t\t\t\tthis.fire(\"onPause\",this);\n\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tif ( this.source ) {\n\t\t\t\t\t\tif (this.source.node && this.source.playbackState == this.source.node.PLAYING_STATE) {\n\t\t\t\t\t\t\tthis.source.node.stop( when || 0 );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.disconnectSource();\n\t\t\t\t\t\tthis.fire(\"onPause\",this);\n\t\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n  \t\t}\n\n\t\tplay ( time , loop) {\n\t\t\tswitch ( this.mediaType ){\n\t\t\t\tcase \"element\":\n\t\t\t\t\tthis.media.play();\n\t\t\t\t\tthis.fire(\"onPlay\",this)\n\t\t\t\tbreak;\n\t\t\t\tdefault: \n\t\t\t\t\tthis.pause().connectSource();\n\t  \t\t\t\tif ( loop )\n \t\t\t\t\t\tthis.source.loop = true;\n \t \t\t\t\tif ( this.source.noteOn )\n \t\t \t\t\t\tthis.source.noteOn(this.context.currentTime, time);\n \t \t\t\t\tif ( this.source.start )\n \t\t \t\t\t\tthis.source.start(this.context.currentTime, time)\n\t\t\t\t\t}\n\t\t\t\t\tthis.fire(\"onPlay\",this)\n\t\t\treturn this ;\n  \t\t}\n\n\t\tconnectSource (){\n\t\t\tthis.source = this.createSource();\n\t\t\tthis.source.connect( this.in );\n\t\t}\n\n\t\tdisconnectSource (){\n\t\t\tthis.source.disconnect( this.in );\n\t\t\tthis.source = null;\n\t\t\tthis.fire(\"onDisconnectSource\",this)\n\t\t}\n\n\t\tconnect (audioNode){\n\t\t\tthis.destination = audioNode ;\n\t\t\tthis.out.connect(audioNode);\n\t\t\tthis.fire(\"onConnect\", audioNode, this);\n\t\t}\n\n\t\tdisconnect (){\n\t\t\tthis.out.disconnect( this.destination );\n\t\t\tthis.destination = null ;\n\t\t\tthis.fire(\"onDisconnect\",  this);\n\t\t}\n\n\t\tcreateSource ( buffer ){\n\t\t\t//console.log(arguments);\n\t\t\tswitch ( this.mediaType ){\n\t\t\t\tcase \"audioNode\":\n\t\t\t\t\tvar source = buffer || this.buffer ;\n\t\t\t\tbreak;\n\t\t\t\tcase \"video\":\n\t\t\t\tcase \"audio\":\n\t\t\t\t\tvar source = this.context.createBufferSource();\n\t\t\t\t\tsource.buffer = buffer || this.buffer;\n\t\t\t\tbreak;\n\t\t\t\tcase \"decode\" :\n\t\t\t\t\tthis.rawBuffer = buffer ;\n\t\t\t\t\tthis.urlStream = URL.createObjectURL ( new Blob([this.rawBuffer]) )\n\t\t\t\t\tthis.context.decodeAudioData(buffer,\n\t\t\t\t\t\t(decoded) => {\n\t\t\t\t\t\t\tthis.buffer = decoded ;\n\t\t\t\t\t\t\tthis.ready = true;\n\t\t\t\t\t\t\tthis.fire(\"onReady\", this);\n\t\t\t\t\t\t},\n\t\t\t\t\t\t(error) => {\n\t\t\t\t\t\t\tconsole.log(arguments)\n\t\t\t\t\t\t\tthis.eventsManager.fire(\"onError\", this, error);\n\t\t\t\t\t\t\t// only on error attempt to sync on frame boundary\n\t\t\t\t\t\t\t//if(this.syncStream()) this.createSource(type, buffer);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\t\tcase \"stream\":\n\t\t\t\t\tvar source = this.context.createMediaStreamSource(buffer || this.buffer);\n\t\t\t\tbreak;\n\t\t\t\tcase \"element\":\n\t\t\t\t\tvar source = this.context.createMediaElementSource(this.media);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn source;\n\t\t}\n\n\t\tsyncStream (){\n\t\t\tvar buf8 = new Uint8Array(this.buffer);\n    \t\t\tUint8Array.prototype.indexOf = Array.prototype.indexOf;\n    \t\t\tvar i=this.sync, b=buf8;\n    \t\t\twhile(1) {\n        \t\t\tthis.retry++;nodeGain\n        \t\t\ti=b.indexOf(0xFF,i); if(i==-1 || (b[i+1] & 0xE0 == 0xE0 )) break;\n        \t\t\ti++;\n    \t\t\t}\n    \t\t\tif(i!=-1) {\n        \t\t\tvar tmp=this.buffer.slice(i); //carefull there it returns copy\n        \t\t\tdelete(this.buffer); this.buffer=null;\n        \t\t\tthis.buffer=tmp;\n        \t\t\tthis.sync=i;\n        \t\t\treturn true;\n    \t\t\t}\n    \t\t\treturn false;\n\t\t}\n\n\t\tload  (url) {\n\t\t\tthis.transport = new XMLHttpRequest();\n\t\t\tthis.transport.open(\"GET\", url, true);\n\t\t\tthis.transport.responseType = \"arraybuffer\";\n\t\t\tthis.transport.onload = () => {\n\t\t    \t// Asynchronously decode the audio file data in request.response\n\t\t\t\tthis.mediaType = \"decode\" ;\n\t\t\t\tthis.createSource( this.transport.response ) ;\n\t\t\t\tthis.contentType = this.transport.getResponseHeader(\"content-type\").split(\";\")[0];\n\t\t\t\tswitch(this.contentType){\n\t\t\t\t\tcase (/audio\\/.*/.test(this.contentType) ? this.contentType : null ) :\n\t\t\t\t\t\tthis.mediaType = \"audio\" ;\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase (/video\\/.*/.test(this.contentType) ? this.contentType : null ) :\n\t\t\t\t\t\tthis.mediaType = \"video\" ;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t  \t};\n\n\t\t\tthis.transport.onerror = () => {\n\t\t\t\tconsole.error('BufferLoader: XHR error');\n\t\t\t}\n\n\t\t\tthis.transport.send();\n\t\t}\n\t};\n\n\t/*\n\t *\n\t *\tCLASS AUDIOBUS\n\t *\n\t */\n\t var defaultAudioBusSettings = {\n\t\t panner: false,\n\t\t analyser:false\n\t };\n\n\t var audioBus = class audioBus  {\n\n\t\tconstructor(name, mixer, settings){\n\t\t\tthis.name = name ;\n\t\t\tthis.mixer = mixer ;\n\t\t\tthis.settings = stage.extend({}, defaultAudioBusSettings, settings);\n\t\t\tthis.eventsManager = stage.notificationsCenter.create(this.settings, this);\n\t\t\tthis.audioContext = new audioContext();\n\t\t\tthis.tracks = [];\n\t\t\tthis.nbTracks = 0 ;\n\t\t\tthis.audioNodes = {} ;\n\t\t\tthis.in = null ;\n\t\t\tthis.out = null ;\n\t\t\tthis.destination = null ;\n\t\t\tthis.muted = false;\n\t\t\tthis.createNodes();\n\t\t}\n\n\t\tlisten (){\n\t\t\treturn this.eventsManager.listen.apply(this.eventsManager, arguments);\n\t\t}\n\n\t\tunListen (){\n\t\t\treturn this.eventsManager.unListen.apply(this.eventsManager, arguments);\n\t\t}\n\n\t\tfire (){\n\t\t\treturn this.eventsManager.fire.apply(this.eventsManager, arguments);\n\t\t}\n\n\t\tcreateNodes (){\n\t\t\t// mute\n\t\t\tthis.audioNodes[\"mute\"] = this.createGain();\n\t\t\tthis.in = this.audioNodes[\"mute\"];\n\n\t\t\t// gain\n\t\t\tthis.audioNodes[\"gain\"] = this.createGain();\n\t\t\tthis.in.connect( this.audioNodes[\"gain\"] );\n\t\t\tthis.out = this.audioNodes[\"gain\"];\n\n\t\t\t// analyseur stéreo\n\t\t\tif ( this.settings.analyser ){\n\t\t\t\tthis.audioNodes[\"splitter\"]= this.createChannelSplitter(2);\n\t\t\t\tthis.out.connect( this.audioNodes[\"splitter\"] );\n\t\t\t\tthis.audioNodes[\"analyserLeft\"] = this.createAnalyser();\n\t\t\t\tthis.audioNodes[\"analyserLeft\"].smoothingTimeConstant = 0.85;\n\t\t\t\tthis.audioNodes[\"splitter\"].connect(this.audioNodes[\"analyserLeft\"], 0, 0);\n\n\t\t\t\tthis.audioNodes[\"analyserRight\"] = this.createAnalyser();\n\t\t\t\tthis.audioNodes[\"analyserRight\"].smoothingTimeConstant = 0.85;\n\t\t\t\tthis.audioNodes[\"splitter\"].connect(this.audioNodes[\"analyserRight\"], 1, 0);\n\t\t\t}\n\n\t\t\t// panoramique\n\t\t\tif ( this.settings.panner ){\n\t\t\t\tthis.audioNodes[\"panner\"]  = this.createStereoPanner();\n\t\t\t\tthis.out.connect( this.audioNodes[\"panner\"] );\n\t\t\t\tthis.out = this.audioNodes[\"panner\"] ;\n\t\t\t}\n\t\t}\n\n\t\tconnect(audioNode){\n\t\t\tthis.destination = audioNode ;\n\t\t\tthis.out.connect(audioNode);\n\t\t\tthis.fire(\"onConnect\", audioNode, this)\n\t\t}\n\n\t\tdisconnect (audioNode){\n\t\t\tif ( this.destination ){\n\t\t\t\tthis.out.disconnect(this.destination);\n\t\t\t\tthis.destination = null;\n\t\t\t\tthis.fire(\"onDisconnect\",  this);\n\t\t\t}\n\t\t}\n\n\t\tsetGain (value) {\n\t\t\tthis.audioNodes.gain.gain.value = value ;\n\t\t\tthis.fire(\"onSetGain\", value);\n\t\t\treturn this;\n  \t\t}\n\n\t\tgetGain () {\n\t\t\treturn this.audioNodes.gain.gain.value  ;\n  \t\t}\n\n\t\tmute () {\n\t\t\tthis.audioNodes.mute.gain.value = 0;\n\t\t\tthis.muted = true;\n\t\t\tthis.fire(\"onMute\",this);\n\t\t\treturn this;\n  \t\t}\n\n\t\tunmute (){\n\t\t\tthis.audioNodes.mute.gain.value = 1;\n\t\t\tthis.muted = false;\n\t\t\tthis.fire(\"onUnMute\",this);\n\t\t\treturn this;\n  \t\t}\n\n\t\tcreateGain (){\n\t\t\treturn this.audioContext.createGain();\n\t\t}\n\n\t\tcreatePanner (){\n\t\t\treturn this.audioContext.createPanner();\n\t\t}\n\n\t\tcreateStereoPanner (){\n\t\t\treturn this.audioContext.createStereoPanner();\n\t\t}\n\n\t\tcreateFilter (){\n\t\t\treturn this.audioContext.createBiquadFilter();\n\t\t}\n\n\t\tcreateAnalyser (){\n\t\t\treturn this.audioContext.createAnalyser();\n\t\t}\n\n\t\tcreateChannelSplitter (nbChannel){\n\t\t\treturn this.audioContext.createChannelSplitter(nbChannel);\n\t\t}\n\n\t\tcreateChannelMerger (nbChannel){\n\t\t\treturn this.audioContext.createChannelMerger(nbChannel);\n\t\t}\n\n\t\tcreateOscillator (){\n\t\t\treturn this.audioContext.createOscillator();\n\t\t}\n\n\t\tcreateMediaStreamDestination (){\n\t\t\tvar destination = this.audioContext.createMediaStreamDestination();\n\t\t\tthis.disconnect();\n\t\t\tthis.connect(destination);\n\t\t\treturn destination ;\n\t\t}\n\n\t\tcreateTrack (media, settings){\n\t\t\tvar track = new Track(media, this, settings );\n\t\t\tthis.tracks.push(track);\n\t\t\tthis.nbTracks++ ;\n\t\t\tthis.fire(\"onCreateTrack\", track , this) ;\n\t\t\treturn track ;\n\t\t}\n\t\t\n\t\tremoveTrack (track){\n\t\t\tvar ele = null ;\n\t\t\tswitch (true){\n\t\t\t\tcase track instanceof Track :\n\t\t\t\t\tfor (var i = 0 ; i < this.tracks.length ; i++){\n\t\t\t\t\t\tif ( this.tracks[i] === track ){\n\t\t\t\t\t\t\tvar name = track.name ;\n\t\t\t\t\t\t\ttrack.pause();\n\t\t\t\t\t\t\ttrack.disconnect();\n\t\t\t\t\t\t\t// remove from tab\n\t\t\t\t\t\t\tele = this.tracks.splice( i, 1 );\n\t\t\t\t\t\t\tthis.nbTracks--;\n\t\t\t\t\t\t\tthis.fire(\"onRemoveTrack\", ele[0] , this) ;\n\t\t\t\t\t\t\tdelete ele[0] ;\n\t\t\t\t\t\t\tbreak ;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\tbreak ;\t\n\t\t\t\tcase typeof track === \"number\" :\n\t\t\t\tcase typeof track === \"string\" :\n\t\t\t\t\tvar name = track ;\n\t\t\t\t\tfor (var i = 0 ; i < this.tracks.length ; i++){\n\t\t\t\t\t\tif ( this.tracks[i].name === name ){\n\t\t\t\t\t\t\tthis.tracks[i].pause();\n\t\t\t\t\t\t\tthis.tracks[i].disconnect();\n\t\t\t\t\t\t\t// remove from tab\n\t\t\t\t\t\t\tele = this.tracks.splice( i, 1 );\n\t\t\t\t\t\t\tthis.nbTracks--;\n\t\t\t\t\t\t\tthis.fire(\"onRemoveTrack\", ele[0] , this) ;\n\t\t\t\t\t\t\tdelete ele[0] ;\n\t\t\t\t\t\t\tbreak ;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( ! ele )\n\t\t\t\tthrow new Error (\"this track doesn't exist in  bus : \" + this.name)\n\t\t\treturn true ;\n\t\t}\n\t};\n\n\n\t/*\n\t *\n\t *\n\t *\tMEDIA MIX\n\t *\n\t *\n\t */\n\tvar mixSettings = {};\n\n\tvar mediaMix = class mediaMix  {\n\n\t\tconstructor(settings){\n\t\t\t\n\t\t\tthis.audioBus = {} ;\n\t\t\tthis.nbBus = 0 ;\n\t\t\tthis.settings = stage.extend({}, mixSettings, settings);\n\t\t\tthis.eventsManager = new stage.notificationsCenter.create(this.settings, this);\n\n\t \t\tthis.createAudioBus(\"MASTER\", {\n\t\t\t\tpanner:true,\n\t\t\t\tanalyser:true\n\t\t\t});\n\t\t\tthis.masterBus = this.audioBus[\"MASTER\"];\n\n\t\t\tthis.tracks = this.masterBus.tracks;\n\t\t\tthis.audioContext = this.masterBus.audioContext ;\n\t\t\tthis.muted = this.masterBus.muted;\n\t\t\tthis.panner = this.masterBus.audioNodes.panner ;\n\t\t\tthis.analyserLeft = this.masterBus.audioNodes[\"analyserLeft\"];\n\t\t\tthis.analyserRight = this.masterBus.audioNodes[\"analyserRight\"];\n\t\t\tthis.gain = this.masterBus.audioNodes[\"gain\"];\n\n\t\t\tthis.connect(this.audioContext.destination);\n\t\t}\n\n\t\tlisten (){\n\t\t\treturn this.eventsManager.listen.apply(this.eventsManager, arguments);\n\t\t}\n\n\t\tunListen (){\n\t\t\treturn this.eventsManager.unListen.apply(this.eventsManager, arguments);\n\t\t}\n\n\t\tfire (){\n\t\t\treturn this.eventsManager.fire.apply(this.eventsManager, arguments);\n\t\t}\n\n\t\tcreateAudioBus (name, settings){\n\t\t\ttry {\n\t\t\t\tvar bus = new audioBus(name, this , settings );\n\t\t\t}catch(e){\n\t\t\t\t\tthrow e ;\n\t\t\t}\n\t\t\tthis.audioBus[name] = bus ;\n\t\t\tthis.nbBus++ ;\n\t\t\tbus.listen(this, \"onCreateTrack\", function(track, bus){\n\t\t\t\tthis.fire(\"onCreateTrack\", track, bus, this)\n\t\t\t})\n\t\t\tbus.listen(this, \"onRemoveTrack\", function(track, bus){\n\t\t\t\tthis.fire(\"onRemoveTrack\", track, bus, this)\n\t\t\t})\n\t\t\treturn bus ;\n\t\t}\n\n\t\tremoveAudioBus (bus){\n\t\t\tvar ele = null ;\n\t\t\tswitch (true){\n\t\t\t\tcase bus instanceof audioBus :\n\t\t\t\t\t\n\t\t\t\tbreak ;\t\n\t\t\t\tcase typeof track === \"number\" :\n\t\t\t\tcase typeof track === \"string\" :\n\t\t\t\t\t\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( ! ele ){\n\t\t\t\tthrow new Error (\"remove bus : this bus doesn't exist in  mixer  \");\n\t\t\t}\n\t\t\treturn true ;\n\t\t}\n\n\t\tconnect (audioNode){\n\t\t\tthis.destination = audioNode ;\n\t\t\tvar ret = this.masterBus.connect(audioNode);\n\t\t\tthis.fire(\"onConnect\", audioNode, this)\n\t\t\treturn ret;\n\t\t}\n\n\t\tdisconnect (){\n\t\t\tthis.masterBus.disconnect();\n\t\t\tthis.destination = null ;\n\t\t\tthis.fire(\"onDisconnect\",  this);\n\t\t}\n\n\t\tsetGain (value) {\n\t\t\tthis.masterBus.setGain(value);\n\t\t\treturn this;\n  \t\t}\n\n\t\tgetGain () {\n\t\t\treturn this.masterBus.getGain();\n  \t\t}\n\n\t\tmute () {\n\t\t\tthis.masterBus.mute();\n\t\t\tthis.muted = this.masterBus.muted ;\n\t\t\treturn this;\n  \t\t}\n\n\t\tunmute (){\n\t\t\tthis.masterBus.unmute();\n\t\t\tthis.muted = this.masterBus.muted ;\n\t\t\treturn this;\n  \t\t}\n\n\t\tcreateTrack (media, settings){\n\t\t\treturn this.masterBus.createTrack(media, settings);\n\t\t}\n\n\t\tremoveTrack (track){\n\t\t\treturn this.masterBus.removeTrack(track)\n\t\t}\n\n\t\tplayTracks (time, loop){\n\t\t\tfor (var i = 0 ; i<this.tracks.length ; i++){\n\t\t\t\tthis.tracks[i].play( time, loop );\n\t\t\t}\n\t\t}\n\n\t\tcreateGain (){\n\t\t\treturn this.audioContext.createGain();\n\t\t}\n\n\t\tcreatePanner (){\n\t\t\treturn this.audioContext.createPanner();\n\t\t}\n\n\t\tcreateStereoPanner (){\n\t\t\treturn this.audioContext.createStereoPanner();\n\t\t}\n\n\t\tcreateFilter (){\n\t\t\treturn this.audioContext.createBiquadFilter();\n\t\t}\n\n\t\tcreateAnalyser (){\n\t\t\treturn this.audioContext.createAnalyser();\n\t\t}\n\n\t\tcreateChannelSplitter (nbChannel){\n\t\t\treturn this.audioContext.createChannelSplitter(nbChannel);\n\t\t}\n\n\t\tcreateChannelMerger(nbChannel){\n\t\t\treturn this.audioContext.createChannelMerger(nbChannel);\n\t\t}\n\n\t\tcreateOscillator(){\n\t\t\treturn this.audioContext.createOscillator();\n\t\t}\n\t};\n\n\tstage.media = {\n\t\tmediaStream\t\t: mediaStream,\n\t\twebAudioApi\t\t: webAudioApi,\n\t\tmediaMix\t\t: mediaMix,\n\t\tTrack\t\t\t: Track,\n\t\taudioBus\t\t: audioBus\n\n\t}\n\treturn stage.media ;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/media/media.es6","module.exports =  function(stage){\n\n\t'use strict';\n\n\n\t// FIXME CALLBACK SDP PARSER\n\tvar parseSdp = function(description){\n\t\tvar sdpLines = description.sdp.split('\\r\\n');\n\t\tvar newline = \"\";\n\t\t// Search for m line.\n\t\tfor (var i = 0; i < sdpLines.length; i++) {\n\t\t\tvar line = sdpLines[i];\n\t\t\tswitch (description.type ){\n\t\t\t\tcase \"offer\":\n\t\t\t\t\t/*if (line.search('a=crypto') !== -1) {\n\t\t\t\t\t\tconsole.log(\"PARSE SDP DELETE CRYPTO \");\n\t\t\t\t\t\tcontinue ;\n\t\t\t\t\t}*/\n\t\t\t\t\t/*if (line.search('a=setup:actpass') !== -1) {\n\t\t\t\t\t\tconsole.log(\"PARSE SDP REPLACE setup :  actpass by active  \");\n\t\t\t\t\t\tline = line.replace(\"a=setup:actpass\", \"a=setup:active\")\n\t\t\t\t\t}*/\n\t\t\t\tbreak;\n\t\t\t\tcase \"answer\":\n\t\t\t\t\t/*if (line.search('a=crypto') !== -1) {\n\t\t\t\t\t\tconsole.log(\"PARSE SDP DELETE CRYPTO \");\n\t\t\t\t\t\tcontinue ;\n\t\t\t\t\t}*/\n\t\t\t\t\t/*if (line.search('a=setup:actpass') !== -1) {\n\t\t\t\t\t\tconsole.log(\"PARSE SDP REPLACE setup :  actpass by active  \");\n\t\t\t\t\t\tline = line.replace(\"a=setup:actpass\", \"a=setup:active\")\n\t\t\t\t\t}*/\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( i === sdpLines.length-1 ){\n\t\t\t\tnewline+=line;\n\t\t\t}else{\n\t\t\t\tnewline+=line+\"\\r\\n\";\n\t\t\t}\n\t\t}\n\t\tdescription.sdp = newline ;\n\t\treturn description;\n\t};\n\n\n\t/*\n \t *\n \t *\tCLASS USER\n \t *\n \t */\n\tvar userSettings = {\n\t\tconstraints\t: { mandatory: { 'OfferToReceiveAudio': true, 'OfferToReceiveVideo': true } },\n\t\t//constraintsOffer: stage.browser.Gecko ? {'mandatory': {'MozDontOfferDataChannel':true}} : null\n\t\tdisplayName\t: \"\"\n\t};\n\n\tvar User = class User  {\n\n\t\tconstructor(userName, settings){\n\t\t\tthis.name = userName ;\n\n\t\t\tthis.settings = stage.extend({}, userSettings, settings );\n\n\t\t\tthis.displayName = this.settings.displayName || userName ;\n\n\t\t\tthis.audio = this.settings.constraints.mandatory.OfferToReceiveAudio ;\n\t\t\tthis.video = this.settings.constraints.mandatory.OfferToReceiveVideo ;\n\t\t\tthis.mediaStream = null ;\n\t\t\tthis.description = \"\" ;\n\n\t\t}\n\n\t\tcreateMediaStream (succesCallback, errorMedia){\n\t\t\tthis.mediaStream = new stage.media.mediaStream(null, {\n\t\t\t\taudio: this.audio,\n\t\t\t\tvideo:this.video,\n\t\t\t\tonSucces:succesCallback,\n\t\t\t\tonError:errorMedia\n\t\t\t});\n\t\t\treturn this.mediaStream ;\n\t\t}\n\n\t\tsetDescription (desc){\n\t\t\tthis.description = desc ;\n\t\t}\n\t};\n\n\t/*\n \t *\n \t *\tCLASS TRANSACTION WEBRTC\n \t *\n \t */\n\tvar Transaction = class Transaction extends stage.Service {\n\t\tconstructor(webrtc, from, to, dialog, settings){\n\t\t\tsuper(\"WEBRTC TRANSACTION\", webrtc.container, stage.notificationsCenter.create(settings || {}) )\n\t\t\tthis.webrtc = webrtc ;\n\t\t\t//this.notificationsCenter = stage.notificationsCenter.create(settings || {}, this);\n\t\t\tthis.dialog = dialog || null ;\n\t\t\tthis.error = null ;\n\t\t\tif ( this.dialog ){\n\t\t\t\tthis.callId = this.dialog.callId;\n\t\t\t}\n\t\t\tthis.protocol =  webrtc.protocol;\n\t\t\tthis.from = from ;\n\t\t\ttry {\n\t\t\t\tif (to instanceof User ){\n\t\t\t\t\tthis.to = to;\n\t\t\t\t}else{\n\t\t\t\t\tthis.to = new User(to, settings) ;\n\t\t\t\t}\n\t\t\t}catch(e){\n\t\t\t\tthrow e ;\n\t\t\t}\n\t\t\tthis.asyncCandidates = this.webrtc.settings.asyncCandidates ;\n\n\t\t\tthis.logger(\"CREATE TRANSATION WEBRTC\", \"DEBUG\");\n\t\t\tthis.RTCPeerConnection = this.createPeerConnection() ;\n\t\t\tthis.RTCPeerConnection.addStream(this.from.stream)\n\n\t\t\t// MANAGE DTMF\n\t\t\tthis.dtmfSender= null ;\n\t\t\tif ( this.webrtc.settings.dtmf ){\n\t\t\t\ttry {\n\t\t\t\t\tthis.initDtmfSender( this.from.stream );\n\t\t\t\t\tthis.webrtc.listen(this, \"onKeyPress\", this.sendDtmf ) ;\n\t\t\t\t\t// FIXME TRY TO RECEIVE DTMF RTP-EVENT\n\t\t\t\t\t/*this.webrtc.listen(this, \"onRemoteStream\",function(event, mediaStream, transaction){\n\t\t\t\t\t\tthis.logger( \"DTMF setRemoteStream\", \"DEBUG\")\n\t\t\t\t\t\tthis.initDtmfReceiver( this.from.stream );\n\t\t\t\t\t});*/\n\t\t\t\t}catch(e){\n\t\t\t\t\tthis.webrtc.logger(e, \"ERROR\") ;\n\t\t\t\t\tthrow e ;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// MANAGE CANDIDATES\n\t\t\tthis.candidates = [];\n\t\t\tthis.listen(this, \"onIcecandidate\" , function(transaction, candidates, peerConnection){\n\t\t\t\t//console.log(\" onIcecandidate : \" + peerConnection.localDescription.type )\n\t\t\t\tif ( this.asyncCandidates && this.candidates.length){\n\t\t\t\t\t//console.log( message.dailog)\n\t\t\t\t\tvar to = this.dialog.to.replace(\"<sip:\", \"\").replace(\">\",\"\") ;\n\t\t\t\t\tthis.logger(\"CANDIDATE TO\" + to, \"DEBUG\");\n\t\t\t\t\tthis.logger(\"CANDIDATE TO\" + this.to.name, \"DEBUG\");\n\t\t\t\t\tthis.dialog.invite(to, JSON.stringify(this.candidates), \"ice/candidate\")\n\t\t\t\t}else{\n\t\t\t\t\tif ( peerConnection.localDescription.type == \"offer\" ){\n\t\t\t\t\t\tthis.sessionDescription = parseSdp.call(this, peerConnection.localDescription ) ;\n\t\t\t\t\t\tif ( this.dialog ){\n\t\t\t\t\t\t\tvar to = this.dialog.to.replace(\"<sip:\", \"\").replace(\">\",\"\") ;\n\t\t\t\t\t\t\tthis.logger(\"CANDIDATE TO\" + to, \"DEBUG\");\n\t\t\t\t\t\t\tthis.logger(\"CANDIDATE TO\" + this.to.name, \"DEBUG\");\n\t\t\t\t\t\t\tthis.dialog.invite(to, this.sessionDescription);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.dialog = this.webrtc.protocol.invite(this.to.name, this.sessionDescription);\n\t\t\t\t\t\t\tthis.callId = this.dialog.callId ;\n\t\t\t\t\t\t\tthis.webrtc.fire(\"onInvite\", this, this.to, this.sessionDescription );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (peerConnection.localDescription.type == \"answer\" ){\n\t\t\t\t\t\tthis.sessionDescription = peerConnection.localDescription ;\n\t\t\t\t\t\tif ( this.sessionDescription && ! ( this.error ) )\n\t\t\t\t\t\tthis.fire(\"onCreateAnwser\", this.to, this.sessionDescription, this, this.dialog);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tthis.listen(this, \"onCreateAnwser\", function(to, sessionDescription, webrtcTransaction, diag){\n\t\t\t\tvar response = this.dialog.currentTransaction.createResponse( 200, \"OK\", this.sessionDescription.sdp, \"application/sdp\"  );\n\t\t\t\tresponse.send();\n\t\t\t});\n\t\t}\n\n\t\tcreatePeerConnection (){\n\t\t\ttry {\n\t\t\t\t// CREATE PeerConnection\n\t\t\t\tthis.RTCPeerConnection = new RTCPeerConnection( this.webrtc.iceServers , this.webrtc.settings.optional );\n\n\t\t\t\t// MANAGE EVENT CANDIDATES\n\t\t\t\tthis.RTCPeerConnection.onicecandidate =  (event)  => {\n\t\t\t\t\t// FIX firefox fire many time onicecandidate  iceGatheringState === complete\n\t\t\t\t\tvar old = this.iceGatheringState ;\n\t\t\t\t\tif ( event.target ){\n\t\t\t\t\t\tthis.iceGatheringState = event.target.iceGatheringState || this.RTCPeerConnection.iceGatheringState ;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.iceGatheringState = this.RTCPeerConnection.iceGatheringState ;\n\t\t\t\t\t}\n\t\t\t\t\tvar type = this.RTCPeerConnection.localDescription.type ;\n\t\t\t\t\t//console.log( this.iceGatheringState )\n\t\t\t\t\t//console.log( type )\n\t\t\t\t\tif (type === \"offer\"  && this.iceGatheringState === 'complete'  && old !== \"complete\")  {\n\t\t\t\t\t\t//console.log(\"PASSS CANDIDATE\")\n\t\t\t\t\t\tthis.fire(\"onIcecandidate\", this, this.candidates ,this.RTCPeerConnection );\n    \t\t\t\t\t} else if (event && event.candidate == null) {\n\t\t\t\t\t\t// candidates null !!!\n    \t\t\t\t\t} else {\n\t\t\t\t\t\tthis.logger(\"WEBRTC : ADD CANDIDATE\", \"DEBUG\");\n\t\t\t\t\t\tif (event.candidate){\n\t\t\t\t\t\t\tthis.candidates.push(event.candidate);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (type === \"answer\"){\n\t\t\t\t\t\t\tthis.fire(\"onIcecandidate\", this, this.candidates ,this.RTCPeerConnection );\n\t\t\t\t\t\t\tthis.RTCPeerConnection.onicecandidate = null ;\n\t\t\t\t\t\t}\n    \t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t// MANAGE STREAM\n\t\t\t\tthis.RTCPeerConnection.onaddstream = (event) => {\n\t\t\t\t\t//console.log(event)\n\t\t\t\t\tthis.setRemoteStream( event)\n\t\t\t\t\tthis.logger(\"WEBRTC : ADD STREAM \", \"DEBUG\");\n\t\t\t\t};\n\t\t\t\treturn this.RTCPeerConnection;\n\t\t\t}catch (e){\n\t\t\t\tthis.logger(e, \"ERROR\");\n\t\t\t\tthis.webrtc.fire(\"onError\", this, e);\n\t\t\t}\n\t\t}\n\n\t\t// FIXME TRY TO RECEIVE DTMF RTP-EVENT\n\t\t/*initDtmfReceiver (mediaStream){\n\t\t\tconsole.log(this.RTCPeerConnection)\n\t\t\tif ( ! this.RTCPeerConnection.createDTMFSender ) {\n\t\t\t\tthrow new Error(\" RTCPeerConnection method createDTMFSender() !!!! which is not support by this browser\");\n\t\t\t}\n  \t\t\tif (mediaStream !== null) {\n\t\t\t\ttry {\n\t\t\t\t\tvar remoteAudioTrack = mediaStream.getAudioTracks()[0];\n\t\t\t\t\tvar dtmfSender = this.RTCPeerConnection.createDTMFSender(remoteAudioTrack);\n\t\t\t\t\tdtmfSender.ontonechange = (tone) => {\n\t\t\t\t\t\tthis.logger(\"dtmfOnToneChange\", \"DEBUG\") ;\n\t\t\t\t\t\tthis.webrtc.fire(\"dtmfOnToneChange\", tone , this);\n\t\t\t\t\t};\n\t\t\t\t}catch(e){\n\t\t\t\t\tthrow e ;\n\t\t\t\t}\n\n  \t\t\t} else {\n\t\t\t\tthrow new Error( 'No local stream to create DTMF Sender', 500)\n  \t\t\t}\n\t\t}*/\n\n\t\tinitDtmfSender (mediaStream) {\n\n\t\t\tswitch ( this.webrtc.settings.dtmf ){\n\t\t\t\tcase \"SIP-INFO\" :\n\t\t\t\t\tvar func = function(){} ;\n\t\t\t\t\tfunc.prototype.insertDTMF = (key, duration, gap) =>{\n\t\t\t\t\t\tvar description = \"Signal=\"+key+\"\\nDuration=\"+duration ;\n\t\t\t\t\t\tvar type= \"application/dtmf-relay\";\n\t\t\t\t\t\tthis.dialog.info( description, type)\n\t\t\t\t\t};\n\t\t\t\t\tthis.dtmfSender = new func() ;\n\t\t\t\tbreak;\n\t\t\t\tcase \"RTP-EVENT\" :\n\t\t\t\t\tif ( ! this.RTCPeerConnection.createDTMFSender ) {\n\t\t\t\t\t\tthrow new Error(\" RTCPeerConnection method createDTMFSender() !!!! which is not support by this browser\", 500);\n\t\t\t\t\t}\n  \t\t\t\t\tif (mediaStream !== null) {\n    \t\t\t\t\t\tvar localAudioTrack = mediaStream.getAudioTracks()[0];\n\t\t\t\t\t\tthis.dtmfSender = this.RTCPeerConnection.createDTMFSender(localAudioTrack);\n\t\t\t\t\t\tthis.dtmfSender.ontonechange = (tone) => {\n\t\t\t\t\t\t\tthis.webrtc.fire(\"dtmfOnToneChange\", tone , this);\n\t\t\t\t\t\t};\n\n  \t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error( 'No local stream to create DTMF Sender', 500)\n  \t\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tsendDtmf (code, key, event) {\n\t\t\tif ( this.dialog.status !== this.dialog.statusCode.ESTABLISHED ) {\n\t\t\t\treturn ;\n\t\t\t}\n\t\t\tif (this.dtmfSender) {\n\t\t\t\tvar duration = 500;\n\t\t\t\tvar gap = 50;\n\t\t\t\tthis.logger('DTMF SEND ' + key + '  duration :  '+ duration + ' gap :  ' + gap , \"DEBUG\");\n\t\t\t\treturn this.dtmfSender.insertDTMF(key, duration, gap);\n\t\t\t}\n\t\t\tthrow new Error(\" DTMF SENDER not ready\");\n\t\t}\n\n\t\tcreateOffer (){\n\t\t\treturn  this.RTCPeerConnection.createOffer((sessionDescription) => {\n\t\t\t\tthis.sessionDescription = parseSdp.call(this, sessionDescription);\n\t\t\t\ttry{\n\t\t\t\t\tthis.from.setDescription(this.RTCPeerConnection.setLocalDescription(this.sessionDescription, () => {\n\t\t\t\t\t\t// ASYNC CANDIDATES\n\t\t\t\t\t\tif (  this.asyncCandidates ){\n\t\t\t\t\t\t\t// INVITE\n\t\t\t\t\t\t\tthis.dialog = this.webrtc.protocol.invite(this.to.name, this.sessionDescription);\n\t\t\t\t\t\t\tthis.callId = this.dialog.callId ;\n\t\t\t\t\t\t\tthis.webrtc.fire(\"onInvite\", this, this.to, this.sessionDescription );\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t// SYNC CANDIDATES\n\t\t\t\t\t\t\t/*this.webrtc.listen(this, \"onIcecandidate\" , function(transaction, candidates, peerConnection){\n\t\t\t\t\t\t\t\tif ( peerConnection.localDescription.type == \"offer\" ){\n\t\t\t\t\t\t\t\t\tthis.sessionDescription = parseSdp.call(this, peerConnection.localDescription ) ;\n\t\t\t\t\t\t\t\t\tif ( this.dialog ){\n\t\t\t\t\t\t\t\t\t\tvar to = this.dialog.to.replace(\"<sip:\", \"\").replace(\">\",\"\") ;\n\t\t\t\t\t\t\t\t\t\tthis.dialog.invite(to, this.sessionDescription);\n\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\tthis.dialog = this.webrtc.protocol.invite(this.to.name, this.sessionDescription);\n\t\t\t\t\t\t\t\t\t\tthis.webrtc.fire(\"onInvite\", this, this.to.name, this.sessionDescription );\n\t\t\t\t\t\t\t\t\t\tthis.callId = this.dialog.callId ;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})*/\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t(error) => {\n\t\t\t\t\t\tthis.error = error ;\n\t\t\t\t\t\tthis.webrtc.fire(\"onError\", this , error) ;\n\t\t\t\t\t}));\n\t\t\t\t}catch(e){\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t},\n \t\t\t(error) => {\n\t\t\t\tthis.webrtc.fire(\"onError\", this , error) ;\n\t\t\t},\n\t\t\tthis.from.settings.constraintsOffer);\n\t\t}\n\n\t\tsetRemoteStream (event){\n\t\t\tif (event){\n\t\t\t\t//console.log(event.stream.getVideoTracks());\n\t\t\t\tthis.to.createMediaStream(null, null);\n\t\t\t\tthis.to.mediaStream.setStream(event.stream);\n\t\t\t\tvar type = this.RTCPeerConnection.remoteDescription.type ;\n\t\t\t\tif (event.type === \"video\" || event.type === \"addstream\" ){\n\t\t\t\t\tthis.webrtc.notificationsCenter.fire( \"onRemoteStream\", type, event, this.to.mediaStream, this);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this.to.createMediaStream ;\n\t\t}\n\n\t\tsetRemoteDescription (type, user, description, dialog){\n\t\t\t//console.log(\"setRemoteDescription\")\n\t\t\tthis.currentTransaction = dialog.currentTransaction ;\n\t\t\tvar desc = {\n\t\t\t\ttype:type,\n\t\t\t\tsdp:description\n\t\t\t}\n\t\t\t//console.log( desc );\n\t\t\tvar remoteDesc = parseSdp.call(this, desc);\n\t\t\tvar ClassDesc = new RTCSessionDescription( remoteDesc );\n\n\t\t\tthis.remoteDescription = this.RTCPeerConnection.setRemoteDescription(\n\t\t\t\tClassDesc,\n\t\t\t\t() => {\n\t\t\t\t\tif (this.RTCPeerConnection.remoteDescription.type == \"offer\"){\n\t\t\t\t\t\t//console.log(\"WEBRTC : onRemoteDescription \");\n\t\t\t\t\t\t//this.doAnswer(dialog);\n\t\t\t\t\t\tthis.webrtc.fire(\"onOffer\", this.webrtc, this);\n\t\t\t\t\t\tthis.webrtc.fire(\"onRemoteDescription\", this.from, this, this.to);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.webrtc.fire( \"onOffHook\", this , dialog );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t(error) => {\n\t\t\t\t\tthis.error = error ;\n\t\t\t\t\tthis.webrtc.fire( \"onError\", this, error )\n\t\t\t\t}\n\t\t\t);\n\t\t\treturn this.remoteDescription;\n\t\t}\n\n\t\tdoAnswer (dialog) {\n\t\t\treturn this.RTCPeerConnection.createAnswer(\n\t\t\t\t(sessionDescription) => {\n\t\t\t\t\tthis.from.setDescription(sessionDescription) ;\n\t\t\t\t\tthis.RTCPeerConnection.setLocalDescription(sessionDescription, () => {\n\t\t\t\t\t\tthis.sessionDescription = sessionDescription ;\n\t\t\t\t\t\tif ( this.asyncCandidates ){\n\t\t\t\t\t\t\tthis.fire(\"onCreateAnwser\", this.to, this.sessionDescription, this, dialog);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.webrtc.fire( \"onOffHook\",this , dialog );\n\t\t\t\t\t},\n\t\t\t\t\t(error) => {\n\t\t\t\t\t\tthis.error = error ;\n\t\t\t\t\t\tthis.webrtc.fire( \"onError\", this , error);\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\t// error\n\t\t\t\t(e) => {\n\t\t\t\t\tthis.error = e ;\n\t\t\t\t\tthis.webrtc.fire( \"onError\", this ,e);\n\t\t\t\t},\n\t\t\t\tthis.from.settings.constraints\n\t\t\t);\n\t\t}\n\n\t\tbye (){\n\t\t\tif ( this.dialog  ){\n\t\t\t\tthis.dialog.bye();\n\t\t\t}\n\t\t}\n\n\t\tcancel (){\n\t\t\tif ( this.currentTransaction ){\n\t\t\t\tthis.currentTransaction.cancel();\n\t\t\t}\n\t\t\tthis.webrtc.closeTransaction(this, this.to.name)\n\t\t}\n\n\t\tdecline (){\n\t\t\tif ( this.currentTransaction ){\n\t\t\t\tthis.currentTransaction.decline();\n\t\t\t}\n\t\t\tthis.webrtc.closeTransaction(this, this.to.name);\n\t\t}\n\n\t\tclose (){\n\t\t\tthis.logger(\"WEBRTC CLOSE TRANSACTION  : \"+ this.callId, \"DEBUG\" );\n\t\t\tif ( this.RTCPeerConnection ){\n\t\t\t\tthis.RTCPeerConnection.close();\n\t\t\t}else{\n\t\t\t\tthis.logger(\"WEBRTC  TRANSACTION ALREADY CLOSED : \"+ this.callId, \"WARNING\" );\n\t\t\t}\n\t\t\tthis.webrtc.unListen( \"onKeyPress\", this.sendDtmf ) ;\n\t\t\tdelete this.RTCPeerConnection ;\n\t\t\treturn this ;\n\t\t}\n\t};\n\n\t/*\n \t *\n \t *\tCLASS WEBRTC\n \t *\n \t */\n\tvar defaultSettings = {\n\t\taudio\t\t: true,\n\t\tvideo\t\t: true,\n\t\tprotocol\t: \"SIP\",\n\t\tsipPort\t\t: 5060,\n\t\tsipTransport\t: \"WSS\",\n\t\tdtmf\t\t: \"SIP-INFO\",\t// \"SIP-INFO\", \"RTP-EVENT\"\n\t\t/*\n \t\t * STUN  => { iceServers: [{ url: ! stage.browser.Gecko ? 'stun:stun.l.google.com:19302' : 'stun:23.21.150.121'}] }\n \t\t * TURN  => { iceServers: [{ url: \"turn:webrtc%40live.com@numb.viagenie.ca\", credential: \"\"}] }\n\t\t */\n\t\ticeServers\t: null,\t \n\t\t//constraints\t: { mandatory: { 'OfferToReceiveAudio': true, 'OfferToReceiveVideo': true } },\n\t\t//constraintsOffer: stage.browser.Gecko ? {'mandatory': {'MozDontOfferDataChannel':true}} : null,\n\t\t//optional\t: { optional: [{ \"RtpDataChannels\": true},{'DtlsSrtpKeyAgreement': 'true'}]}\n\t\t//optional\t: stage.browser.Gecko ? { optional: [{ \"RtpDataChannels\": true}]} :  { optional: [{ \"RtpDataChannels\": true},{'DtlsSrtpKeyAgreement': 'true'}]},\n\t\toptional\t: stage.browser.Gecko ? { optional: []} :  { optional: [{'DtlsSrtpKeyAgreement': 'true'}]},\n\t\tasyncCandidates : false\n\t};\n\n\n\tvar WebRtc = class WebRtc  extends stage.Service {\n\n\t\tconstructor(server, transport, settings){\n\n\t\t\tsuper(\"WEBRTC\", null, null, settings);\n\t\t\tthis.settings = stage.extend(true, {}, defaultSettings, settings);\n\t\t\tthis.protocol = null;\n\t\t\tthis.socketState = \"close\" ;\n\t\t\tthis.transactions = {};\n\t\t\t//this.users = {};\n\t\t\tthis.transport = this.connect( transport ) ;\n\t\t\tif ( this.transport && this.transport.publicAddress ){\n\t\t\t\tthis.publicAddress = this.transport.publicAddress;\n\t\t\t\t//this.publicAddress = server;\n\t\t\t\t//this.publicAddress = this.transport.domain;\n\t\t\t}\n\t\t\tthis.server = server ;\n\t\t\tthis.init();\n\t\t}\n\n\t\tinit (){\n\t\t\tdelete this.protocol ;\n\t\t\tthis.protocol = null ;\n\n\t\t\t// EVENTS WEBRTC\n\t\t\tthis.listen(this, \"onInvite\", function(transaction , userTo, description){\n\t\t\t\tthis.transactions[transaction.callId] = transaction ;\n\t\t\t});\n\n\t\t\tthis.listen(this, \"onOffer\", function(webrtc, transaction){\n\t\t\t\tthis.transactions[transaction.callId] = transaction ;\n\t\t\t});\n\n\t\t\tthis.listen(this, \"onAccept\", function(webrtc, transac){\n\t\t\t\ttransac.doAnswer(transac.dialog);\n\t\t\t\t//transac.setRemoteDescription(\"offer\", transac.to, transac.to.description, transac.dialog);\n\t\t\t});\n\n\t\t\tthis.listen(this, \"onDeclineOffer\", function(webrtc, transac){\n\n\t\t\t\tvar ret = transac.dialog.currentTransaction.createResponse(\n\t\t\t\t\t603,\n\t\t\t\t\t\"Declined\"\n\t\t\t\t);\n\t\t\t\tret.send();\n\n\t\t\t\t/*var ret = message.transaction.createResponse(\n\t\t\t\t\t603,\n\t\t\t\t\t\"Declined\"\n\t\t\t\t);\n\t\t\t\tret.send();*/\n\t\t\t\tthis.closeTransaction(transac);\n\t\t\t});\n\n\t\t\t// MANAGE PROTOCOL\n\t\t\tswitch (this.settings.protocol){\n\t\t\t\tcase \"SIP\":\n\t\t\t\t\tthis.protocol = new stage.io.protocols.sip(this.server, this.transport,{\n\t\t\t\t\t\tportServer\t: this.settings.sipPort ,\n\t\t\t\t\t\ttransport\t: this.settings.sipTransport,\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.protocol.listen(this, \"onRegister\", function(sip, message){\n\t\t\t\t\t\tswitch (message.code){\n\t\t\t\t\t\t\tcase 200 :\n\t\t\t\t\t\t\t\tthis.user.createMediaStream((stream) => {\n\t\t\t\t\t\t\t\t\tthis.user.stream = stream ;\n\t\t\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onMediaSucces\", this.user.mediaStream, this.user);\n\t\t\t\t\t\t\t\t},(e) => {\n\t\t\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onError\", this, e);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onRegister\", this.user, this);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault :\n\t\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onError\", this.protocol, message);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.protocol.listen(this, \"onUnRegister\",function(sip, message){\n\t\t\t\t\t\tthis.fire(\"onUnRegister\", sip, message);\n\t\t\t\t\t})\n\n\t\t\t\t\tthis.protocol.listen(this,\"onRinging\",function(sip, message){\n\t\t\t\t\t\tvar transaction = this.transactions[message.callId];\n\t\t\t\t\t\tif ( transaction ){\n\t\t\t\t\t\t\tthis.notificationsCenter.fire( \"onRinging\", message.toName , transaction);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.protocol.listen(this,\"onTrying\",function(sip, message){\n\t\t\t\t\t\tvar transaction = this.transactions[message.callId];\n\t\t\t\t\t\tif ( transaction ){\n\t\t\t\t\t\t\tthis.notificationsCenter.fire( \"onTrying\", message.toName , transaction);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.protocol.listen(this,\"onInfo\",function(message){\n\t\t\t\t\t\tvar transaction = this.transactions[message.callId];\n\t\t\t\t\t\t//console.log(message);\n\t\t\t\t\t\tif (message.contentType === \"application/dtmf-relay\" ){\n\t\t\t\t\t\t\tthis.fire( \"onDtmf\", message.body.dtmf , transaction);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.protocol.listen(this,\"onCancel\",function(message){\n\t\t\t\t\t\tvar transaction = this.transactions[message.callId];\n\t\t\t\t\t\tif (transaction){\n\t\t\t\t\t\t\tthis.notificationsCenter.fire( \"onCancel\", message.body.body , transaction );\n\t\t\t\t\t\t\tthis.closeTransaction(transaction, message.fromName);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.protocol.listen(this, \"onInvite\", function(message, dialog){\n\t\t\t\t\t\tswitch(message.header[\"Content-Type\"]){\n\t\t\t\t\t\t\tcase \"application/sdp\" :\n\t\t\t\t\t\t\t\tif ( message.rawBody ){\n\n\t\t\t\t\t\t\t\t\tif ( dialog.status === dialog.statusCode.INITIAL){\n\n\t\t\t\t\t\t\t\t\t\t// TODO MANAGE MULTI CALL\n\n\t\t\t\t\t\t\t\t\t\tvar res = message.transaction.createResponse(100, \"trying\");\n\t\t\t\t\t\t\t\t\t\tres.send();\n\n\t\t\t\t\t\t\t\t\t\t// transaction WEBRTC\n\t\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\tvar transac = this.createTransaction(message.fromName, dialog , {\n\t\t\t\t\t\t\t\t\t\t\t\tdisplayName: message.fromNameDisplay || \"\"\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\ttransac.to.setDescription( message.rawBody );\n\t\t\t\t\t\t\t\t\t\t}catch(e){\n\t\t\t\t\t\t\t\t\t\t\tvar res = message.transaction.createResponse(500, e.message || e);\n\t\t\t\t\t\t\t\t\t\t\tres.send();\n\t\t\t\t\t\t\t\t\t\t\treturn ;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tvar res = message.transaction.createResponse(180, \"Ringing\");\n\t\t\t\t\t\t\t\t\t\tres.send();\n\n\t\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\ttransac.setRemoteDescription(\"offer\", transac.to, transac.to.description, transac.dialog);\n\t\t\t\t\t\t\t\t\t\t\t//this.notificationsCenter.fire(\"onOffer\", message, transac.to, transac);\n\t\t\t\t\t\t\t\t\t\t\t//this.fire(\"onOffer\", this, transac);\n\t\t\t\t\t\t\t\t\t\t}catch(e){\n\t\t\t\t\t\t\t\t\t\t\tvar res = message.transaction.createResponse(500, e.message || e);\n\t\t\t\t\t\t\t\t\t\t\tres.send();\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\treturn ;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif ( dialog.status === dialog.statusCode.ESTABLISHED){\n\t\t\t\t\t\t\t\t\t\t// HOLD THE LINE\n\t\t\t\t\t\t\t\t\t\tmessage.transaction.decline();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"ice/candidate\" :\n\t\t\t\t\t\t\t\tif ( message.rawBody ){\n\t\t\t\t\t\t\t\t\tvar transaction = this.transactions[message.callId];\n\t\t\t\t\t\t\t\t\tif ( ! transaction ) {\n\t\t\t\t\t\t\t\t\t\tvar ret = message.transaction.createResponse(500, \"no transaction \");\n\t\t\t\t\t\t\t\t\t\tret.send();\n\t\t\t\t\t\t\t\t\t\treturn ;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tvar res = JSON.parse(message.rawBody) ;\n\t\t\t\t\t\t\t\t\tvar ret = message.transaction.createResponse(100, \"trying\");\n\t\t\t\t\t\t\t\t\tret.send();\n\t\t\t\t\t\t\t\t\tfor (let i=0 ; i<res.length;i++){\n\t\t\t\t\t\t\t\t\t\tvar candidate = new RTCIceCandidate(res[i]);\n\t\t\t\t\t\t\t\t\t\ttransaction.RTCPeerConnection.addIceCandidate(candidate,\n\t\t\t\t\t\t\t\t\t\t\t() =>{\n\t\t\t\t\t\t\t\t\t\t\t\tthis.logger(\"WEBRTC remote CANDIDATES   \" +res[i].candidate, \"DEBUG\" );\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(e);\n\t\t\t\t\t\t\t\t\t\t\t\tthis.logger(\"WEBRTC Error CANDIDATES \" +res[i].candidate ,\"ERROR\");\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif ( transaction.candidates.length ){\n\t\t\t\t\t\t\t\t\t\tvar ret = message.transaction.createResponse(200, \"OK\", JSON.stringify(transaction.candidates), \"ice/candidate\");\n\t\t\t\t\t\t\t\t\t\tret.send();\n\t\t\t\t\t\t\t\t\t\ttransaction.candidates= [];\n\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\tvar ret = message.transaction.createResponse(200, \"OK\");\n\t\t\t\t\t\t\t\t\t\tret.send();\n\t\t\t\t\t\t\t\t\t\t//transaction.candidates= [];\n\t\t\t\t\t\t\t\t\t\t/*this.listen(this, \"onIcecandidate\" , function(transaction, candidates, peerConnection){\n\t\t\t\t\t\t\t\t\t\t\tvar ret = message.transaction.createResponse(200, \"OK\", JSON.stringify(transaction.candidates), \"ice/candidate\");\n\t\t\t\t\t\t\t\t\t\t\tret.send();\n\t\t\t\t\t\t\t\t\t\t\ttransaction.candidates= [];\n\t\t\t\t\t\t\t\t\t\t});*/\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onError\", this.protocol,  message);\n\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.protocol.listen(this, \"onTimeout\",function(sip, message){\n\t\t\t\t\t\tthis.notificationsCenter.fire(\"onTimeout\", message.method, 408, message);\n\t\t\t\t\t\tvar transac =  this.transactions[message.callId];\n\t\t\t\t\t\tif ( transac ){\n\t\t\t\t\t\t\tthis.closeTransaction(transac, transac.to.name);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.protocol.listen(this, \"onDecline\",function(message){\n\t\t\t\t\t\tif ( message.callId in  this.transactions ){\n\t\t\t\t\t\t\tvar transac =  this.transactions[message.callId];\n\t\t\t\t\t\t\tthis.fire(\"onDecline\", this, transac );\n\t\t\t\t\t\t\tthis.closeTransaction(transac);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.protocol.listen(this, \"onError\",function(Class, message){\n\t\t\t\t\t\tthis.notificationsCenter.fire(\"onError\", Class, message);\n\t\t\t\t\t\tvar transac =  this.transactions[message.callId];\n\t\t\t\t\t\tif  (transac ){\n\t\t\t\t\t\t\tthis.closeTransaction(transac, transac.to.name);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.protocol.listen(this, \"onQuit\",function(protocol){\n\t\t\t\t\t\tthis.close();\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.protocol.listen(this, \"onInitCall\",function(to, dialog, transaction){\n\t\t\t\t\t\tif ( dialog.callId in this.transactions ){\n\t\t\t\t\t\t\tvar transac =  this.transactions[dialog.callId];\n\t\t\t\t\t\t\ttransac.currentTransaction = transaction ;\n\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onInitCall\", transac );\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.protocol.listen(this, \"onBye\",function(message){\n\t\t\t\t\t\tif ( message.callId in  this.transactions ){\n\t\t\t\t\t\t\tvar transac =  this.transactions[message.callId];\n\t\t\t\t\t\t\tvar name = message.fromName\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( transac ){\n\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onOnHook\", transac ,message);\n\t\t\t\t\t\t\tthis.closeTransaction(transac, name);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t// WHEN USER LOCAL STOP REGISTRATION\n\t\t\t\t\t\t\tif ( message.fromName === this.user.name ){\n\t\t\t\t\t\t\t\tthis.close()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.protocol.listen(this, \"onCall\", function(message){\n\t\t\t\t\t\tvar transac =  this.transactions[message.callId];\n\t\t\t\t\t\tif ( message.toNameDisplay ){\n\t\t\t\t\t\t\ttransac.to.displayName = message.toNameDisplay ;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//var from = this.users[message.toName];\n\t\t\t\t\t\tif ( message.dialog.status === message.dialog.statusCode.EARLY && message.header[\"Content-Type\"] == \"application/sdp\"){\n\t\t\t\t\t\t\tthis.notificationsCenter.fire(\"onAnwer\", message);\n\t\t\t\t\t\t\ttransac.to.setDescription(message.rawBody);\n\t\t\t\t\t\t\ttransac.setRemoteDescription(\"answer\", transac.to, message.rawBody, message.dialog);\n\t\t\t\t\t\t\t/*if ( this.settings.asyncCandidates && transac.candidates.length){\n\t\t\t\t\t\t\t\t//console.log( message.dailog)\n\t\t\t\t\t\t\t\tmessage.dialog.invite(message.to, JSON.stringify(transac.candidates), \"ice/candidate\")\n\t\t\t\t\t\t\t}*/\n\t\t\t\t\t\t\t//this.notificationsCenter.fire( \"onOffHook\", transac , message );\n\t\t\t\t\t\t}else{\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( message.header[\"Content-Type\"] == \"ice/candidate\"){\n\t\t\t\t\t\t\tif (transac.candidates.length){\n\t\t\t\t\t\t\t\tvar res = JSON.parse(message.rawBody) ;\n\t\t\t\t\t\t\t\tfor (let i=0 ; i<res.length;i++){\n\t\t\t\t\t\t\t\t\tvar candidate = new RTCIceCandidate(res[i]);\n\t\t\t\t\t\t\t\t\ttransac.RTCPeerConnection.addIceCandidate(candidate,\n\t\t\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\t\t\t//console.log(\"Succes Candidate\")\n\t\t\t\t\t\t\t\t\t\t\tthis.logger(\"WEBRTC ADD remote CANDIDATES :  \" + res[i].candidate);\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t(e) => {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(e);\n\t\t\t\t\t\t\t\t\t\t\tthis.logger(\"WEBRTC Error CANDIDATES \" + res[i].candidate, \"ERROR\" );\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.protocol.listen(this, \"onMessage\",function(message){\n\t\t\t\t\t\tthis.fire(\"onMessage\", message);\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.protocol.listen(this, \"onSend\",function(message){\n\t\t\t\t\t\tthis.fire(\"onSend\", message);\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.listen(this, \"onError\", function(Class, error){\n\t\t\t\t\t\tswitch (true){\n\t\t\t\t\t\t\tcase ( Class instanceof  WebRtc ) :\n\t\t\t\t\t\t\tbreak ;\n\t\t\t\t\t\t\tcase ( Class instanceof Transaction ) :\n\t\t\t\t\t\t\t\t//console.log(Class.currentTransaction )\n\t\t\t\t\t\t\t\tif ( Class.currentTransaction ){\n\t\t\t\t\t\t\t\t\tvar response = Class.currentTransaction.createResponse( 500, error.message || error );\n\t\t\t\t\t\t\t\t\tresponse.send();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.closeTransaction(Class, Class.to.name);\n\t\t\t\t\t\t\tbreak ;\n\t\t\t\t\t\t\tcase ( Class instanceof  Error ) :\n\t\t\t\t\t\t\tbreak ;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error(\"WEBRTC Protocol not found \" ) ;\n\t\t\t}\n\t\t}\n\n\t\tconnect (transport){\n\t\t\t//console.log(transport instanceof stage.realtime  )\n\t\t\tif ( transport ){\n\t\t\t\ttransport.listen(this, \"onConnect\" , function(){\n\t\t\t\t\tthis.socketState = \"open\" ;\n\t\t\t\t});\n\t\t\t\ttransport.listen(this, \"onClose\" , function(){\n\t\t\t\t\tthis.socketState = \"close\" ;\n\t\t\t\t})\n\t\t\t\treturn \ttransport ;\n\t\t\t}\n\t\t}\n\n\t\tcreateTransaction (userTo, dialog, settings){\n\t\t\ttry {\n\t\t\t\tvar transaction = new Transaction(this, this.user, userTo, dialog, settings);\n\t\t\t\treturn transaction ;\n\t\t\t}catch(e){\n\t\t\t\tthis.fire(\"onError\", this, e);\n\t\t\t\tthrow e ;\n\t\t\t}\n\t\t}\n\n\t\tunRegister (){\n\t\t\t//console.log( \"WEBRTC unregister\")\n\t\t\tthis.close();\n\t\t\tif (this.protocol){\n\t\t\t\tthis.protocol.unregister();\n\t\t\t}\n\t\t}\n\n\t\tregister (userName, password, settings){\n\t\t\tthis.user = new User(userName, settings);\n\t\t\tthis.protocol.register( userName, password, settings )\n\t\t}\n\n\n\t\tcreateOffer (userTo) {\n\t\t\tvar to = new User(userTo);\n\t\t\t//this.users[userTo] = to ;\n\t\t\tvar transac = this.createTransaction(to);\n\t\t\ttransac.createOffer();\n\t\t\treturn transac ;\n\t\t}\n\n\t\tacceptOffer (transaction){\n\t\t\tthis.fire(\"onAccept\", this, transaction);\n\t\t\treturn transaction ;\n\t\t}\n\n\t\tdeclineOffer (transaction){\n\t\t\tthis.fire(\"onDeclineOffer\", this, transaction);\n\t\t\treturn transaction ;\n\t\t}\n\n\t\tcloseTransaction (transation, name) {\n\t\t\tif ( transation ){\n\t\t\t\ttransation.close();\n\t\t\t\tdelete this.transactions[transation.callId];\n\t\t\t\t//delete this.users[name];\n\t\t\t}\n\t\t}\n\n\t\tclose (){\n\t\t\tthis.fire(\"onQuit\", this);\n\t\t\tfor (var trans in this.transactions){\n\t\t\t\ttry {\n\t\t\t\t\tthis.transactions[trans].bye();\n\t\t\t\t\tthis.transactions[trans].close();\n\t\t\t\t}catch(e){\n\n\t\t\t\t}\n\t\t\t\tdelete this.transactions[trans];\n\t\t\t}\n\t\t}\n\n\t\tquit () {\n\t\t\tthis.protocol.bye();\n\t\t}\n\t};\n\n\tstage.media.webrtc = WebRtc ;\n\tstage.media.webrtcTransaction = Transaction ;\n\tstage.media.userMedia = User ;\n\treturn WebRtc ;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/media/webrtc/webrtc.es6","module.exports =  function(stage){\n\n\t'use strict';\n\n\n\tvar ea = function(){\n\t\tif (stage.browser.Ie){\n\t\t\treturn function(callback){\n\t\t\t\tvar iterator = 0;\n\t\t\t\tfor (var key in this.data) {\n\t\t\t\t\t//if ( ! Array.prototype[key] ){\n\t\t\t\t\tif ( this.data.hasOwnProperty(key) ){\n\t\t\t\t\t\tvar value = this.data[key]; \n\t\t\t\t\t\tvar pair = [key, value];\n\t\t\t\t\t\tpair.key = key;\n\t\t\t\t\t\tpair.value = value;\n\t\t\t\t\t\tcallback(pair, iterator);\n\t\t\t\t\t}\n\t\t\t\t\titerator++;\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\treturn function(callback){\n\t\t\t\tvar iterator = 0;\n\t\t\t\tfor (var key in this.data) {\n\t\t\t\t\tvar value = this.data[key]; \n\t\t\t\t\tvar pair = [key, value];\n\t\t\t\t\tpair.key = key;\n\t\t\t\t\tpair.value = value;\n\t\t\t\t\tcallback(pair, iterator);\n\t\t\t\t\titerator++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}();\n\n\n\t\n\tvar struct = class struct {\n\n\t\tconstructor(data){\n\t\t\tthis.data = stage.typeOf(data) === \"object\" ? stage.extend(true, {}, data) : {} ;\n\t\t}\n\n\n\t\tget (key){\n\t\t\tif ((key === null) || (key === undefined)){\n\t\t\t\treturn this.data;\n\t\t\t}\n\t\t\tif ( (key in this.data)){\n\t\t\t\treturn this.data[key];\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tset (key, value){\n\t\t\tif ((key !== null) || (key !== undefined)){\n\t\t\t\treturn this.data[key] = value;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tunset (key){\n\t\t\tif (key in this.data){\n\t\t\t\tdelete this.data[key];\n\t\t\t\treturn true\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\thasKey (key){\n\t\t\tif (key in this.data){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tclear (){\n\t\t\tthis.data = {};\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\tclone (){\n\t\t\treturn stage.extend(true, {}, this.data);\n\t\t}\n\n\t\t//TODO\n\t\tinspect (){\n\t\t\t\n\t\t}\n\n\t\t//TODO\n\t\tkeys (){\n\t\t}\n\n\t\t//TODO\n\t\tvalues (){\n\t\t}\n\n\t\teach (){\n\t\t\treturn ea.apply(this, arguments);\t\n\t\t}\n\n\t\tclone (){\n\t\t\treturn  new struct(this.data);\n\t\t}\n\n\t\ttoObject (key){\n\t\t\treturn stage.extend(true, {}, this.data) ;\n\t\t}\n\n\n\t\tmerge (hash){\n\t\t\tthis.data = stage.extend(true, {}, this.data, hash) ;\n\t\t}\n\n\t\ttoJson (key){\n\t\t\tif (key)\n\t\t\t\treturn stage.json.stringify(this.get(key));\n\t\t\treturn stage.json.stringify(this.data);\n\t\t}\n\n\t\t//TODO\n\t\ttoQueryString (){\n\n\t\t}\n\n\t};\n\n\tvar obj = {\n\t\tstruct:struct,\n\t\tlocal:{\n\t\t\tcreateHash:function(data){\n\t\t\t\treturn new struct(data);\n\t\t\t}\n\t\t}\n\t};\n\n\tstage.structs.hash = obj ;\n\treturn obj;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/structs/hash/hash.es6","module.exports =  function(stage){\n\n\t'use strict';\n\n\n\tvar defaultSettings = {\n\t\ttype:\"FIFO\",\t\n\t\tactive:true\n\t};\n\n\n\tvar codeError = {\n\t\tempty:0,\n\t\tnotFound:1,\n\t\tstopped:2\n\t};\n\n\t/*\n \t*\n \t*\n \t*\n \t*  EVENTS QUEUE : \n \t*\tonQueued(queue) :\t// fire when add value to queue\n \t*\tonDeQueued(queue) :\t// fire when add value to queue\n \t*\tonRunStart:(queue)\t// fire when begin to run along the queue\n \t*\tonRunFinish:(queue)\t// fire when finish to run along the queue\n \t*\tonError(queue, error, errorCode):\t// fire when an error \n \t*\n \t*  ERROR CODES :\n \t*\t0 : \tempty\n \t*\t1 :\tnotFound\n \t*\t2 :\tstopped\n \t*\n \t*  SETTINGS : default\n \t*\ttype : \"FIFO\"  // \"LIFO\"\n \t*\n \t*\n \t*\n \t*/\n\tvar struct = class struct {\n\n\t\tconstructor(localSettings){\n\t\t\t// Manage settings\n\t\t\tthis.settings = stage.extend( true, {}, defaultSettings, localSettings);\n\t\t\tthis.data = [];\n\t\t\tthis.error= null;\n\t\t\tthis.eventsQueue = stage.createEventsManager();\n\t\t}\n\n\t\tlisten (context, eventName, callback){\n\t\t\treturn this.eventsQueue.listen(context, eventName, callback);\n\t\t}\n\t\t\n\t\t// TODO LIFO\n\t\tenqueue (value){\n\t\t\tif (this.settings.active){\n\t\t\t\tvar ret = this.data.push(value);\n\t\t\t\tthis.eventsQueue.fireEvent(\"onQueued\",this);\n\t\t\t\treturn ret;\n\t\t\t}else{\n\t\t\t\tthis.error = new Error(\"QUEUE is stoped\");\n\t\t\t\tthis.eventsQueue.fireEvent(\"onError\",this, this.error, codeError.stopped);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t\tremove (data){\n\t\t\tif (this.isEmpty()) {\n\t\t\t\tthis.error = new Error(\"QUEUE is empty\")\n\t\t\t\tthis.eventsQueue.fireEvent(\"onError\",this, this.error, codeError.empty);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tif (stage.array.contain(this.data, data) )\n\t\t\t\treturn stage.array.remove(this.data, data)\n\t\t\tthis.error = new Error(data+\" Not found\");\n\t\t\tthis.eventsQueue.fireEvent(\"onError\",this, this.error, codeError.notFound);\n\t\t\treturn null;\n\t\t}\n\n\t\t// TODO LIFO\n\t\tdequeue (){\n\t\t\tif (this.settings.active){\n\t\t\t\tif (this.isEmpty()) {\n\t\t\t\t\tthis.error = new Error(\"QUEUE is empty\")\n\t\t\t\t\tthis.eventsQueue.fireEvent(\"onError\",this, this.error, codeError.empty);\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tvar value = this.data[0];\n\t\t\t\tstage.array.removeIndexOf(this.data,0);\n\t\t\t\tthis.eventsQueue.fireEvent(\"onDeQueued\",this);\n\t\t\t\treturn value;\n\t\t\t}else{\n\t\t\t\tthis.error = new Error(\"QUEUE is stoped\")\n\t\t\t\tthis.eventsQueue.fireEvent(\"onError\",this, this.error, codeError.stopped);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\n\t\tpeek (data){\n\t\t\tif (this.isEmpty()) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn this.data[0];\n\t\t}\n\n\t\tpurge (){\n\t\t\tthis.data.length = 0;\n\t\t}\n\n\t\tisEmpty (){\n\t\t\treturn this.data.length === 0;\n\t\t}\n\n\t\tcount (){\n\t\t\treturn this.data.length;\n\t\t}\n\n\t\tgetQueue () {\n\t\t\treturn this.data;\n\t\t}\n\n\t\tstart () {\n\t\t\tthis.settings.active = true;\n\t\t}\n\n\t\tstop (){\n\t\t\tthis.settings.active = false;\n\t\t}\n\n\t\trun (callback) {\n\t\t\tif (this.settings.active){\n\t\t\t\tthis.eventsQueue.fireEvent(\"onRunStart\",this);\n\t\t\t\tstage.each(this.data,callback)\n\t\t\t\tthis.eventsQueue.fireEvent(\"onRunFinish\",this);\n\t\t\t}else{\n\t\t\t\tthis.error = new Error(\"QUEUE is stoped\")\n\t\t\t\tthis.eventsQueue.fireEvent(\"onError\",this, this.error, codeError.stopped);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t};\n\n\n\n\tvar createStruct = function(localSettings){\n\t\tvar Structs = new struct(localSettings);\t\n\t\tStructs.eventsQueue.settingsToListen(localSettings)\t\n\t\tif(Structs.error){\t\t\t\n\t\t\tStructs.eventsQueue.fireEvent(\"onError\", Structs, Structs.error);\n\t\t\treturn Structs;\n\t\t}\t\n\t\treturn Structs;\n\t};\n\n\tvar obj = {\n\t\tstruct:struct,\n\t\tlocal:{\n\t\t\tcreateQueue:function(localSettings){\n\t\t\t\tif (! localSettings){\n\t\t\t\t\tlocalSettings = {};\n\t\t\t\t}\n\t\t\t\treturn createStruct(localSettings);\n\t\t\t}\n\t\t}\n\t};\n\n\tstage.structs.queues = obj ;\n\treturn obj;\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/structs/queue/queue.es6","\n\n/*\n *\n *\n *\n */\nmodule.exports =  function(stage){\n\n\t'use strict';\n   \t/*\n    \t * default settings\n    \t * <pre>\n    \t *   moduleName:      \"stage\"\n    \t *   maxStack:        100\n    \t *   rateLimit:       false\n    \t *   burstLimit:      3\n    \t *   defaultSeverity: \"DEBUG\"\n   \t *   checkConditions: \"&&\"\n   \t *   async:         false\n    \t *\n    \t * </pre>\n    \t */\n   \tvar defaultSettings = {\n           \tmoduleName:\"SYSLOG\",\n\t\tmaxStack: 100,\n\t\trateLimit:false,\n\t\tburstLimit:3,\n\t\tdefaultSeverity:\"DEBUG\",\n\t\tcheckConditions:\"&&\",\n\t\tasync:false\n   \t};\n\n   \t/*\n    \t * Severity syslog\n    \t * <pre>\n    \t *    EMERGENCY   = 0\n    \t *    ALERT       = 1\n    \t *    CRITIC      = 2\n    \t *    ERROR       = 3\n    \t *    WARNING     = 4\n    \t *    NOTICE      = 5\n    \t *    INFO        = 6\n    \t *    DEBUG       = 7\n    \t * </pre>\n    \t */\n   \tvar sysLogSeverity = [\n           \t\"EMERGENCY\",\n           \t\"ALERT\",\n           \t\"CRITIC\",\n           \t\"ERROR\",\n           \t\"WARNING\",\n           \t\"NOTICE\",\n           \t\"INFO\",\n           \t\"DEBUG\"\n   \t];\n   \tsysLogSeverity[\"EMERGENCY\"]=0;\n   \tsysLogSeverity[\"ALERT\"]=1;\n   \tsysLogSeverity[\"CRITIC\"]=2;\n   \tsysLogSeverity[\"ERROR\"]=3;\n   \tsysLogSeverity[\"WARNING\"]=4;\n   \tsysLogSeverity[\"NOTICE\"]=5;\n   \tsysLogSeverity[\"INFO\"]=6;\n   \tsysLogSeverity[\"DEBUG\"]=7;\n\n\t/**\n    \t *  Protocol Data Unit\n     \t * @class  PDU\n    \t * @constructor\n    \t * @module library\n    \t * @return {PDU}\n    \t */\n\tvar guid = 0;\n\tvar PDU = class PDU {\n\t\tconstructor(pci, severity, moduleName, msgid, msg, date ) {\n\t\t\t/* timeStamp @type Date*/\n               \t\tthis.timeStamp = new Date(date).getTime() || new Date().getTime();\n           \t\t/* uid */\n               \t\tthis.uid =  ++guid;\n           \t\t/* severity */\n               \t\tthis.severity = translateSeverity(severity);\n           \t\t/* severityName */\n               \t\tthis.severityName = sysLogSeverity[this.severity];\n            \t\t/* typePayload */\n               \t\tthis.typePayload = stage.typeOf(pci);\n           \t\t/*\n             \t\t* protocole controle information\n             \t\t* @type Void\n             \t\t*/\n               \t\tthis.payload = pci;\n           \t\t/* moduleName */\n               \t\tthis.moduleName = moduleName;\n           \t\t/* msgid */\n               \t\tthis.msgid = msgid || \"\";\n           \t\t/* msg */\n               \t\tthis.msg = msg || \"\";\n\t\t}\n\n\t\t/**\n    \t \t* Get Date in string format\n    \t \t* @method getDate\n    \t \t* @return {String} a date in string format .\n    \t \t*/\n   \t\tgetDate(){\n       \t\t\treturn new Date(this.timeStamp).toTimeString();\n   \t\t}\n\n   \t\t/**\n    \t \t* get a string representating the PDU protocole\n    \t \t* @method toString\n    \t \t* @return {String}  .\n    \t \t*/\n   \t\ttoString (){\n       \t\t\treturn  \"TimeStamp:\"+this.getDate() +\n           \t\t\t\"  Log:\" +this.payload +\n           \t\t\t\"  ModuleName:\" +this.moduleName +\n           \t\t\t\"  SeverityName:\"+this.severityName+\n           \t\t\t\"  MessageID:\"+this.msgid +\n           \t\t\t\"  UID:\"+this.uid +\n                   \t\t\"  Message:\"+this.msg;\n   \t\t}\n\n\t\tparseJson (str){\n\t\t\tvar json = null ;\n\t\t\ttry {\n\t\t\t\tjson = JSON.parse(str);\n\t\t\t\tfor (var ele in json){\n\t\t\t\t\tif (ele in this){\n\t\t\t\t\t\tthis[ele] = json[ele];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}catch(e){\n\t\t\t\tthrow e ;\n\t\t\t}\n\t\t\treturn json ;\n\t\t}\n\t};\n\n   \tvar operators = {\n       \t\t\"<\":function(ele1, ele2){ return ele1 < ele2},\n       \t\t\">\":function(ele1, ele2){ return ele1 > ele2},\n       \t\t\"<=\":function(ele1, ele2){ return ele1 <= ele2},\n       \t\t\">=\":function(ele1, ele2){ return ele1 >= ele2},\n       \t\t\"==\":function(ele1, ele2){ return ele1 === ele2},\n       \t\t\"!=\":function(ele1, ele2){ return ele1 !== ele2},\n\t\t\"RegExp\":function(ele1, ele2){return  ( ele2.test(ele1) )}\n   \t}\n\n   \tvar conditionsObj = {\n       \t\tseverity:function(pdu, condition){\n           \t\tif (condition.operator !== \"==\"){\n               \t\t\t//console.log(pdu.severity);\n               \t\t\t//console.log(condition.data)\n               \t\t\treturn  operators[condition.operator](pdu.severity, condition.data)\n           \t\t}else{\n               \t\t\tfor (var sev in condition.data){\n                   \t\t\tif ( sev === pdu.severityName)\n                       \t\t\t\treturn true\n               \t\t\t}\n           \t\t}\n           \t\treturn false\n       \t\t},\n       \t\tmsgid:function(pdu, condition){\n\t\t\tif (condition.operator !== \"==\"){\n\t\t\t\treturn operators[condition.operator](pdu.msgid, condition.data)\n\t\t\t}else{\n           \t\t\tfor (var sev in condition.data){\n               \t\t\t\tif ( sev === pdu.msgid)\n                   \t\t\t\treturn true\n           \t\t\t}\n\t\t\t}\n           \t\treturn false\n       \t\t},\n       \t\tdate:function(pdu, condition){\n           \t\treturn  operators[condition.operator](pdu.timeStamp, condition.data)\n       \t\t}\n   \t}\n\n   \tvar logicCondition ={\n       \t\t\"&&\" : function(myConditions, pdu){\n           \t\tvar res= null\n           \t\t\tfor (var ele in myConditions){\n               \t\t\t\tvar res = conditionsObj[ele](pdu, myConditions[ele] )\n               \t\t\t\t\t//console.log(\"condition :\" +ele +\"  \"+res)\n               \t\t\t\t\tif ( ! res ){\n                   \t\t\t\t\tbreak;\n               \t\t\t\t\t}\n           \t\t\t}\n           \t\treturn res\n       \t\t},\n       \t\t\"||\" : function(myConditions, pdu){\n           \t\tvar res= null\n           \t\t\tfor (var ele in myConditions){\n               \t\t\t\tvar res = conditionsObj[ele](pdu, myConditions[ele] )\n               \t\t\t\t\tif ( res ){\n                   \t\t\t\t\tbreak;\n               \t\t\t\t\t}\n           \t\t\t}\n           \t\treturn res\n       \t\t}\n   \t}\n\n   \tvar checkFormatSeverity = function(ele){\n       \t\tvar res = false;\n       \t\tswitch ( stage.typeOf(ele) ){\n           \t\tcase \"string\":\n               \t\t\tres = ele.split(/,| /);\n           \t\t\tbreak;\n           \t\tcase \"number\" :\n               \t\t\tres = ele;\n           \t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"checkFormatSeverity bad format \"+stage.typeOf(ele)+\" : \" + ele);\n       \t\t}\n       \t\treturn res;\n   \t}\n\n   \tvar checkFormatDate = function(ele){\n       \t\tvar res = false;\n       \t\tswitch ( stage.typeOf(ele) ){\n           \t\tcase \"date\":\n               \t\t\tres = ele.getTime();\n           \t\t\tbreak;\n           \t\tcase \"string\":\n               \t\t\tres = new Date(ele);\n           \t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"checkFormatDate bad format \"+stage.typeOf(ele)+\" : \" + ele);\n       \t\t}\n       \t\treturn res;\n   \t}\n\n\tvar checkFormatMsgId = function(ele){\n\t\tvar res = false;\n       \t\tswitch ( stage.typeOf(ele) ){\n           \t\tcase \"string\":\n               \t\t\tres = ele.split(/,| /);\n           \t\t\tbreak;\n           \t\tcase \"number\" :\n               \t\t\tres = ele;\n           \t\t\tbreak;\n\t\t\tcase \"object\" :\n\t\t\t\tif (ele instanceof RegExp ){\n\t\t\t\t\tres = ele;\n\t\t\t\t}\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"checkFormatMsgId bad format \"+stage.typeOf(ele)+\" : \" + ele);\n       \t\t}\n       \t\treturn res;\n\n\t}\n\n   \tvar severityToString = function(severity){\n       \t\tvar myint = parseInt(severity,10) ;\n       \t\tif (! isNaN(myint)){\n           \t\tvar ele = sysLogSeverity[myint];\n       \t\t}else{\n           \t\tvar ele = severity;\n       \t\t}\n       \t\tif (ele in sysLogSeverity)\n           \t\treturn ele;\n        \treturn false;\n   \t};\n\n\n   \tvar sanitizeConditions = function(settingsCondition){\n       \t\tvar res = true;\n       \t\tif (stage.typeOf(settingsCondition) !== \"object\" )\n           \t\treturn false;\n       \t\tfor (var ele in settingsCondition){\n           \t\tif (! ele in conditionsObj){\n               \t\t\treturn false;\n           \t\t}\n           \t\tvar condi = settingsCondition[ele];\n\n           \t\tif (condi.operator && ! (condi.operator in operators) ){\n\t\t\t\tthrow new Error(\"Contitions bad operator : \" + condi.operator );\n           \t\t}\n           \t\tif ( condi.data ){\n               \t\t\tswitch (ele){\n                   \t\t\tcase \"severity\":\n                       \t\t\t\tif (condi.operator){\n                           \t\t\t\tres = checkFormatSeverity(condi.data);\n                           \t\t\t\tif (res !== false){\n                               \t\t\t\t\tcondi.data = sysLogSeverity[severityToString(res[0])];\n                           \t\t\t\t}else{\n                               \t\t\t\t\treturn false\n                           \t\t\t\t}\n                       \t\t\t\t}else{\n                           \t\t\t\tcondi.operator = \"==\";\n                           \t\t\t\tres = checkFormatSeverity(condi.data);\n                           \t\t\t\tif (res !== false){\n                               \t\t\t\t\tcondi.data = {};\n                               \t\t\t\t\tif (stage.typeOf(res) === \"array\"){\n                                   \t\t\t\t\tfor (var i = 0 ; i < res.length; i++){\n                                       \t\t\t\t\t\tvar mySeverity = severityToString(res[i]) ;\n                                       \t\t\t\t\t\tif (mySeverity){\n                                           \t\t\t\t\t\tcondi.data[mySeverity] = sysLogSeverity[mySeverity];\n                                       \t\t\t\t\t\t}else{\n                                           \t\t\t\t\t\treturn false;\n                                       \t\t\t\t\t\t}\n                                   \t\t\t\t\t}\n                               \t\t\t\t\t}else{\n                                   \t\t\t\t\treturn false;\n                               \t\t\t\t\t}\n                           \t\t\t\t}else{\n                               \t\t\t\t\treturn false\n                           \t\t\t\t}\n                       \t\t\t\t}\n                   \t\t\t\tbreak;\n                   \t\t\tcase \"msgid\":\n\t\t\t\t\t\tif ( ! condi.operator){\n\t\t\t\t\t\t\tcondi.operator = \"==\";\t\n\t\t\t\t\t\t}\n\t\t\t\t\t\tres = checkFormatMsgId(condi.data);\n                       \t\t\t\tif (res !== false){\n                           \t\t\t\tif (stage.typeOf(res) === \"array\"){\n\t\t\t\t\t\t\t\tcondi.data = {};\n                               \t\t\t\t\tfor (var i = 0 ; i < res.length; i++){\n                                   \t\t\t\t\tcondi.data[res[i]] = \"||\";\n                               \t\t\t\t\t}\n                           \t\t\t\t}else{\n\t\t\t\t\t\t\t\tcondi.data = res;\t\n\t\t\t\t\t\t\t}\n                       \t\t\t\t}else{\n                           \t\t\t\treturn false\n                       \t\t\t\t}\n                   \t\t\t\tbreak;\n                   \t\t\tcase \"date\":\n                       \t\t\t\tres =checkFormatDate(condi.data);\n                       \t\t\t\tif (res)\n                           \t\t\t\tcondi.data = res;\n                       \t\t\t\telse\n                           \t\t\t\treturn false;\n                   \t\t\t\tbreak;\n                   \t\t\tdefault:\n                       \t\t\t\treturn false;\n               \t\t\t}\n           \t\t}else{\n               \t\t\treturn false;\n           \t\t}\n       \t\t}\n       \t\treturn settingsCondition ;\n       \t\t//console.log(settingsCondition);\n   \t};\n\n\n   \tvar translateSeverity = function(severity){\n       \t\tif (severity in sysLogSeverity){\n           \t\tif (typeof severity === 'number')\n               \t\t\tvar myseverity = sysLogSeverity[sysLogSeverity[severity]]\n           \t\telse\n               \t\t\tvar myseverity = sysLogSeverity[severity];\n       \t\t}else{\n\t\t\tif (! severity)\n\t\t\t\treturn null;\n\t\t\telse\n\t\t\t\tthrow new Error (\"not stage syslog severity :\"+severity);\n       \t\t}\n       \t\treturn myseverity;\n   \t};\n\n   \tvar createPDU = function(payload, severity, moduleName, msgid, msg){\n       \t\tif ( ! severity ){\n               \t\tvar myseverity = sysLogSeverity[this.settings.defaultSeverity];\n           \t}else{\n           \t\tvar myseverity = severity;\n           \t}\n       \t\treturn new PDU(payload, myseverity,\n                           \tmoduleName,\n                           \tmsgid,\n                           \tmsg);\n   \t};\n\n   \t/**\n    \t * A class for product log in stage.\n    \t * @example\n    \t *\n    \t *    var ERROR_DEFINE = {\n    \t *       '-101': 'I18N string'\n    \t *    };\n    \t *\n    \t *    var settings = {\n    \t *        rateLimit:100,\n    \t *        burstLimit:10,\n    \t *        moduleName:\"LIVE\",\n    \t *        defaultSeverity:\"ERROR\"\n    \t *    };\n   \t *\n    \t *    var logIntance = new stage.syslog(settings);\n    \t *\n    \t *\n    \t *    controller.logIntance.listen(context,function(pdu){\n    \t *        logView(pdu)\n    \t *    } )\n    \t *\n    \t *    controller.logIntance.listenWithConditions(context,{\n    \t *        checkConditions: \"&&\",\n   \t *        severity:{\n   \t *            data:\"CRITIC,ERROR\"\n   \t *            //data:\"1,7\"\n   \t *        },\n   \t *        date:{\n   \t *            operator:\">=\",\n   \t *            data:new Date()\n   \t *        },\n   \t *        msgid:{\n   \t *            data:\"myFunction\"\n   \t *        }\n   \t *\n    \t *\n    \t *    },function(pdu){\n    \t *        logView(pdu)\n    \t *    } )\n    \t *\n    \t *\n    \t *    var myFunction = function(error){\n    \t *        controller.logIntance.logger(error, \"ERROR\", \"myFunction\", ERROR_DEFINE[error] );\n    \t *    }\n    \t *\n    \t *\n    \t *\n    \t *    @class syslog\n   \t *    @module library\n    \t *    @constructor\n    \t *    @param {Object} settings The settings to extend.\n    \t *    @return syslog\n    \t */\n\tvar syslog = class syslog extends stage.notificationsCenter.notification {\n\n\t\tconstructor(settings){\n\n       \t\t\tsuper( settings );\n       \t\t\t/**\n             \t \t * extended settings\n        \t \t * @property settings\n             \t \t * @type Object\n             \t \t * @see defaultSettings\n             \t \t */\n           \t\tthis.settings = stage.extend({},defaultSettings, settings);\n       \t\t\t/**\n             \t \t * ring buffer structure container instances of PDU\n        \t \t * @property ringStack\n             \t \t * @type Array\n             \t \t */\n           \t\tthis.ringStack = new Array();\n       \t\t\t/**\n             \t \t * Ratelimit  Management log printed\n        \t \t * @property burstPrinted\n             \t \t * @type Number\n             \t \t */\n           \t\tthis.burstPrinted = 0;\n       \t\t\t/**\n             \t \t * Ratelimit  Management log dropped\n        \t \t * @property missed\n             \t \t * @type Number\n             \t \t */\n           \t\tthis.missed =0;\n       \t\t\t/**\n             \t \t * Management log invalid\n        \t \t * @property invalid\n             \t \t * @type Number\n             \t \t */\n       \t\t\tthis.invalid = 0;\n\n       \t\t\t/**\n             \t \t * Counter log valid\n        \t \t * @property valid\n             \t \t * @type Number\n             \t \t */\n       \t\t\tthis.valid = 0;\n       \t\t\t/**\n             \t \t * Ratelimit  Management begin of burst\n        \t \t * @property start\n             \t \t * @private\n             \t \t * @type Number\n             \t \t */\n           \t\tthis.start = 0;\n\n       \t\t\tthis.fire = this.settings.async ? super.fireAsync : super.fire ;\n   \t\t}\n\n   \t\tpushStack (pdu){\n       \t\t\tif (this.ringStack.length === this.settings.maxStack){\n               \t\t\tthis.ringStack.shift();\n           \t\t}\n       \t\t\tvar index = this.ringStack.push(pdu);\n       \t\t\t//console.log(this);\n       \t\t\tthis.valid++;\n       \t\t\treturn index;\n   \t\t}\n\n   \t\t/**\n     \t \t * logger message\n    \t \t * @method logger\n     \t \t * @param {void} payload payload for log. protocole controle information\n     \t \t * @param {Number || String} severity severity syslog like.\n     \t \t * @param {String} msgid informations for message. example(Name of function for debug)\n     \t \t * @param {String} msg  message to add in log. example (I18N)\n     \t \t */\n   \t\tlogger (payload, severity, msgid, msg){\n           \t\tif (this.settings.rateLimit){\n               \t\t\tvar now = new Date().getTime();\n               \t\t\tthis.start = this.start || now;\n               \t\t\tif (now > this.start + this.settings.rateLimit){\n               \t\t\t\tthis.burstPrinted = 0;\n               \t\t\t\tthis.missed =0;\n               \t\t\t\tthis.start = 0;\n               \t\t\t}\n               \t\t\tif(this.settings.burstLimit && this.settings.burstLimit > this.burstPrinted ){\n               \t\t\t\ttry {\n                   \t\t\t\tif (payload instanceof  PDU ){\n                       \t\t\t\t\tvar pdu = payload\n                   \t\t\t\t}else{\n                       \t\t\t\t\tvar pdu = createPDU.call(this, payload, severity, this.settings.moduleName, msgid, msg);\n                   \t\t\t\t}\n               \t\t\t\t}catch(e){\n\t\t\t\t\t\tconsole.error(e);\n                   \t\t\t\tthis.invalid++;\n                   \t\t\t\treturn \"INVALID\"\n               \t\t\t\t}\n               \t\t\t\tthis.pushStack( pdu);\n               \t\t\t\tthis.fire(\"onLog\", pdu);\n               \t\t\t\tthis.burstPrinted++;\n               \t\t\t\treturn \"ACCEPTED\";\n               \t\t\t}\n               \t\t\tthis.missed++;\n               \t\t\treturn \"DROPPED\";\n           \t\t}else{\n           \t\t\ttry {\n               \t\t\t\tif (payload instanceof  PDU ){\n                   \t\t\t\tvar pdu = payload;\n               \t\t\t\t}else{\n                   \t\t\t\tvar pdu = createPDU.call(this, payload, severity, this.settings.moduleName, msgid, msg);\n               \t\t\t\t}\n           \t\t\t}catch(e){\n\t\t\t\t\tconsole.error(e);\n               \t\t\t\tthis.invalid++;\n               \t\t\t\treturn \"INVALID\";\n           \t\t\t}\n               \t\t\tthis.pushStack( pdu);\n               \t\t\tthis.fire(\"onLog\", pdu);\n           \t\t\treturn \"ACCEPTED\";\n           \t\t}\n   \t\t}\n\n   \t\t/**\n     \t \t * Clear stack of logs\n     \t \t *\n     \t \t * @method clearLogStack\n      \t \t *\n      \t \t *\n     \t \t *\n     \t \t */\n   \t\tclearLogStack (){\n       \t\t\tthis.ringStack.length = 0;\n   \t\t}\n\n   \t\t/**\n     \t \t * get hitory of stack\n    \t \t * @method getLogStack\n      \t \t * @param {Number} start .\n     \t \t * @param {Number} end .\n     \t \t * @return {array} new array between start end\n     \t \t * @return {PDU} pdu\n     \t \t */\n   \t\tgetLogStack (start, end, contition){\n\t\t\tif (contition){\n\t\t\t\tvar stack = this.getLogs(contition) ; \n\t\t\t}else{\n\t\t\t\tvar stack = this.ringStack ;\n\t\t\t}\n           \t\tif ( arguments.length  === 0)\n               \t\t\treturn stack[stack.length-1];\n           \t\tif ( ! end)\n               \t\t\treturn stack.slice(start);\n           \t\tif (start === end)\n               \t\t\treturn stack[stack.length - start-1];\n\t\t\treturn stack.slice(start, end );\n   \t\t}\n\n\n   \t\t/**\n     \t \t * get logs with conditions\n    \t \t * @method getLogs\n      \t \t * @param {Object} conditions .\n     \t \t * @return {array} new array with matches conditions\n     \t \t */\n   \t\tgetLogs (conditions, stack){\n\t\t\tvar myStack = stack || this.ringStack ;\n       \t\t\tif ( conditions.checkConditions && conditions.checkConditions in logicCondition ){\n           \t\t\tvar myFuncCondition = logicCondition[conditions.checkConditions];\n           \t\t\tdelete conditions.checkConditions;\n       \t\t\t}else{\n           \t\t\tvar myFuncCondition = logicCondition[this.settings.checkConditions];\n       \t\t\t}\n       \t\t\tvar tab = [];\n\t\t\ttry {\n\t\t\t\tvar Conditions = sanitizeConditions(conditions);\n\t\t\t}catch(e){\n\t\t\t\tthrow new Error(\"registreNotification conditions format error: \"+ e);\n\t\t\t}\n       \t\t\tif (Conditions){\n           \t\t\tfor (var i = 0 ; i<myStack.length; i++){\n               \t\t\t\tvar res = myFuncCondition(Conditions,myStack[i])\n               \t\t\t\t\tif (res)\n                   \t\t\t\t\ttab.push(myStack[i]);\n           \t\t\t}\n       \t\t\t}\n       \t\t\treturn tab;\n   \t\t}\n\n\n   \t\t/**\n     \t \t * take the stack and build a JSON string\n    \t \t * @method logToJson\n     \t \t * @return {String} string in JSON format\n     \t \t */\n   \t\tlogToJson (conditions){\n       \t\t\tif (conditions)\n           \t\t\tvar stack = this.getLogs(conditions)\n       \t\t\telse\n           \t\t\tvar stack = this.ringStack\n           \t\t\t\treturn JSON.stringify(stack);\n   \t\t}\n\n   \t\t/**\n    \t \t * load the stack as JSON string\n   \t \t * @method loadStack\n   \t \t * @param {Object} json or string stack serialize\n\t \t * @param {boolean} fire conditions events  .\n\t \t * @param {function} callback before fire conditions events\n    \t \t * @return {String}\n    \t \t */\n   \t\tloadStack (stack, doEvent, beforeConditions){\n       \t\t\tif (! stack )\n           \t\t\tthrow new Error(\"syslog loadStack : not stack in arguments \")\n               \t\t\t\tswitch(stage.typeOf(stack)){\n                   \t\t\t\tcase \"string\" :\n                       \t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t//console.log(stack);\n                           \t\t\t\t\tvar st = JSON.parse(stack);\n                           \t\t\t\t\treturn arguments.callee.call(this, st, doEvent);\n                       \t\t\t\t\t}catch(e){\n                           \t\t\t\t\tthrow e;\n                       \t\t\t\t\t}\n                       \t\t\t\t\tbreak;\n                   \t\t\t\tcase \"array\" :\n                   \t\t\t\tcase \"object\" :\n                       \t\t\t\t\ttry {\n                           \t\t\t\t\tfor(var i= 0 ; i<stack.length ; i++){\n                               \t\t\t\t\t\tvar pdu = new PDU(stack[i].payload, stack[i].severity, stack[i].moduleName || this.settings.moduleName , stack[i].msgid, stack[i].msg, stack[i].timeStamp)\n                                   \t\t\t\t\t\tthis.pushStack( pdu);\n\n                                   \t\t\t\t\tif (doEvent) {\n\t\t\t\t\t\t\t\t\t\tif (beforeConditions && typeof beforeConditions  === \"function\")\n\t\t\t\t\t\t\t\t\t\t\tbeforeConditions.call(this, pdu, stack[i]);\n                                       \t\t\t\t\t\tthis.fire(\"onLog\", pdu);\n                                   \t\t\t\t\t}\n                           \t\t\t\t\t}\n                       \t\t\t\t\t}catch(e){\n                           \t\t\t\t\tthrow e;\n                       \t\t\t\t\t}\n                       \t\t\t\t\tbreak;\n                   \t\t\t\tdefault :\n                       \t\t\t\t\tthrow new Error(\"syslog loadStack : bad stack in arguments type\")\n               \t\t\t\t};\n               \t\treturn st || stack;\n   \t\t}\n\n\n   \t\t/**\n     \t \t *\n     \t \t *    @method  listenWithConditions\n     \t \t *\n     \t \t */\n   \t\tlistenWithConditions (context, conditions, callback  ){\n       \t\t\tif ( conditions.checkConditions && conditions.checkConditions in logicCondition ){\n           \t\t\tvar myFuncCondition = logicCondition[conditions.checkConditions];\n           \t\t\tdelete conditions.checkConditions;\n       \t\t\t}else{\n           \t\t\tvar myFuncCondition = logicCondition[this.settings.checkConditions];\n       \t\t\t}\n\t\t\ttry {\n\t\t\t\tvar Conditions = sanitizeConditions(conditions);\n\t\t\t}catch(e){\n\t\t\t\tthrow new Error(\"registreNotification conditions format error: \"+ e);\t\n\t\t\t}\n       \t\t\tif (Conditions){\n\t\t\t\tvar func = function(pdu){\n               \t\t\t\tvar res = myFuncCondition(Conditions, pdu);\n               \t\t\t\tif (res){\n                   \t\t\t\tcallback.apply(context || this, arguments)\n               \t\t\t\t}\n           \t\t\t};\n           \t\t\tsuper.listen(this, \"onLog\", func);\n\t\t\t\treturn func ;\n       \t\t\t}\n   \t\t}\n\n\t}\n\tstage.syslog = syslog;\n\tstage.PDU = PDU;\n\treturn syslog ; \n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/syslog/syslog.es6","/*\n *\n *\n *\n *\n *\n *\n *\n */\n\nmodule.exports = function(stage){\n\n\t/**\n   \t* \\brief changes the given string to XML doc.\n   \t*\n   \t* \\param string an XML string\n   \t* \\return  the document  node root\n   \t*/\n  \tvar stringToDocumentXML = function(){\n\n\t\tif ( ! document.implementation.createDocument){\n\t\t\treturn function(str){\n\t\t\t\tvar doc = createDocument();\n\t\t\t\tdoc.async=\"false\";\n\t\t\t\tdoc.loadXML(str);\n\t\t\t\treturn doc;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn function(str){\n    \t\t\ttry{\n\t\t\t\tvar oDomDoc = (new DOMParser()).parseFromString(str, 'application/xml');\n      \t\t\t}catch(e){\n\t\t\t\tthrow Error('xml function stringToDocumentXML : '+e);\n      \t\t\t}\n\t\t\treturn oDomDoc;\n\t\t}\n  \t}();\n  \t\n  \tvar getDocumentRoot = function(doc){ \n\t\tvar type = stage.typeOf(doc);\n\t\tif ( type === \"document\" ){\n\t\t\treturn (doc.documentElement || doc.childNodes[0]);\t\t\n\t\t}\n\t\tif ( type === \"element\" ){\n\t\t\tvar myDoc = doc.ownerDocument ;\n\t\t\treturn (myDoc.documentElement || myDoc.childNodes[0]);\n\t\t}\n  \t};\n\n\n\n\n\n\t//parseXML\n\tvar parseXml = function( xml ){\n\t\tswitch (stage.typeOf(xml)){\n\t\t\tcase \"string\":\n\t\t\t\tvar root = getDocumentRoot(stringToDocumentXML(xml));\n\t\t\tbreak;\n\t\t\tcase \"document\":\n\t\t\t\tvar root = getDocumentRoot(xml);\n\t\t\tbreak;\n\t\t\tcase \"element\":\n\t\t\t\tvar root = xml;\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"parseXml  bad type arguments\");\n\t\t\n\t\t}\n\t\treturn parseDOM( root );\n\t};\n\n\tvar __force_array = null;\n\tvar parseDOM = function(root){\n\t\tif ( ! root ) return null;\n\t\tvar force_array = null;\n\t\t__force_array = {};\n        \tif ( force_array ) {\n            \t\tfor( var i=0; i<force_array.length; i++ ) {\n                \t\t__force_array[force_array[i]] = 1;\n            \t\t}\n        \t}\n\n        \tvar json = parseNode( root );   // parse root node\n        \tif ( __force_array[root.nodeName] ) {\n            \t\tjson = [ json ];\n        \t}\n        \tif ( root.nodeType != 11 ) {            // DOCUMENT_FRAGMENT_NODE\n            \t\tvar tmp = {};\n            \t\ttmp[root.nodeName] = json;          // root nodeName\n            \t\tjson = tmp;\n        \t}\n        \treturn json;\n\t};\n\n\n\tvar attr_prefix =\"@\";\n\tvar name_space = \":\";\n\tvar parseNode = function(node){\n\t\tif ( ! node ) return null;\n\t\tswitch( node.nodeType ){\n\t\t\t// COMMENT_NODE\n\t\t\tcase 7:\n\t\t\t\treturn null;\n\t\t\t// TEXT_NODE \n\t\t\tcase 3:\n\t\t\t// CDATA_SECTION_NODE\n\t\t\tcase 4:\n\t\t\t\tif ( node.nodeValue.match( /[^\\x00-\\x20]/ ) )\n\t\t\t\t\treturn node.nodeValue;\n\t\t\t\treturn null;\n\t\t\tbreak;\t\t\n\t\t}\n\t\tvar ret = null;\n\t\tvar data = {};\t\n\n\t\t// parse Attributes \n\t\tif ( node.attributes && node.attributes.length ){\n\t\t\tret = {};\n\t\t\tfor ( var i=0; i<node.attributes.length; i++ ) {\n\t\t\t\tvar key = node.attributes[i].nodeName;\n                \t\tif ( typeof(key) !== \"string\" ) continue;\n                \t\tvar val =  node.attributes[i].value || node.attributes[i].nodeValue;\n                \t\tif ( ! val ) continue;\n                \t\tkey = attr_prefix + key;\n                \t\tif ( typeof(data[key]) == \"undefined\" ) data[key] = 0;\n                \t\tdata[key] ++;\n\t\t\t\taddNode( ret, key, data[key], val );\n\t\t\t}\n\t\t\t//console.log(data)\n\t\t}\n\n\t\tif ( node.childNodes && node.childNodes.length ) {\n            \t\tvar textonly = true;\n            \t\tif ( ret ) textonly = false;        // some attributes exists\n            \t\tfor ( var i=0; i<node.childNodes.length && textonly; i++ ) {\n                \t\tvar ntype = node.childNodes[i].nodeType;\n                \t\tif ( ntype == 3 || ntype == 4 ) continue;\n                \t\ttextonly = false;\n            \t\t}\n            \t\tif ( textonly ) {\n                \t\tif ( ! ret ) ret = \"\";\n                \t\tfor ( var i=0; i<node.childNodes.length; i++ ) {\n                    \t\t\tret += node.childNodes[i].nodeValue;\n                \t\t}\n            \t\t} else {\n                \t\tif ( ! ret ) ret = {};\n                \t\tfor ( var i=0; i<node.childNodes.length; i++ ) {\n                    \t\t\tvar key = node.childNodes[i].nodeName;\n                    \t\t\tif ( typeof(key) !== \"string\" ) continue;\n                    \t\t\tvar val = parseNode( node.childNodes[i] );\n                    \t\t\tif ( ! val ) continue;\n                    \t\t\tif ( typeof(data[key]) === \"undefined\" ) data[key] = 0;\n                    \t\t\tdata[key] ++;\n                    \t\t\taddNode( ret, key, data[key], val );\n                \t\t}\n            \t\t}\n        \t}\n\t\treturn ret;\n\t};\n\n\tvar addNode = function ( hash, key, cnts, val ) {\n        \tkey = removeColon(key);\n        \tif ( __force_array && __force_array[key] ) {\n            \t\tif ( cnts == 1 ) hash[key] = [];\n            \t\thash[key][hash[key].length] = val;      // push\n        \t} else if ( cnts == 1 ) {                   // 1st sibling\n            \t\thash[key] = val;\n        \t} else if ( cnts == 2 ) {                   // 2nd sibling\n            \t\thash[key] = [ hash[key], val ];\n        \t} else {                                    // 3rd sibling and more\n            \t\thash[key][hash[key].length] = val;\n        \t}\n\t};\n\t\n\tvar removeColon = function(name){\n\t\treturn name ? (name.replace(':',name_space)): name;\n\t};\n\n\treturn stage.xml =  {\n\t\tparseXml:parseXml,\n\t\t//parseNode:parseDOM,\n\t  \tstringToDocumentXML : stringToDocumentXML ,\n\t  \t//getDocumentRoot :getDocumentRoot\n\t}\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/tools/xml.js","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n// WEBPACK FOOTER //\n// ./~/process/browser.js"," /* eslint-env node */\n'use strict';\n\n// SDP helpers.\nvar SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substr(2, 10);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(function(line) {\n    return line.trim();\n  });\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  var parts = blob.split('\\nm=');\n  return parts.map(function(part, index) {\n    return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n  });\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(function(line) {\n    return line.indexOf(prefix) === 0;\n  });\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\nSDPUtils.parseCandidate = function(line) {\n  var parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  var candidate = {\n    foundation: parts[0],\n    component: parseInt(parts[1], 10),\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7]\n  };\n\n  for (var i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      default: // extension handling, in particular ufrag\n        candidate[parts[i]] = parts[i + 1];\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\nSDPUtils.writeCandidate = function(candidate) {\n  var sdp = [];\n  sdp.push(candidate.foundation);\n  sdp.push(candidate.component);\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.ip);\n  sdp.push(candidate.port);\n\n  var type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress); // was: relAddr\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort); // was: relPort\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n  return line.substr(14).split(' ');\n}\n\n// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  var parts = line.substr(9).split(' ');\n  var parsed = {\n    payloadType: parseInt(parts.shift(), 10) // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  // was: channels\n  parsed.numChannels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  return parsed;\n};\n\n// Generate an a=rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (codec.numChannels !== 1 ? '/' + codec.numChannels : '') + '\\r\\n';\n};\n\n// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n    uri: parts[1]\n  };\n};\n\n// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n          ? '/' + headerExtension.direction\n          : '') +\n      ' ' + headerExtension.uri + '\\r\\n';\n};\n\n// Parses an ftmp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  var parsed = {};\n  var kv;\n  var parts = line.substr(line.indexOf(' ') + 1).split(';');\n  for (var j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  var line = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    var params = [];\n    Object.keys(codec.parameters).forEach(function(param) {\n      params.push(param + '=' + codec.parameters[param]);\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' ')\n  };\n};\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  var lines = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(function(fb) {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses an RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  var sp = line.indexOf(' ');\n  var parts = {\n    ssrc: parseInt(line.substr(7, sp - 7), 10)\n  };\n  var colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substr(sp + 1, colon - sp - 1);\n    parts.value = line.substr(colon + 1);\n  } else {\n    parts.attribute = line.substr(sp + 1);\n  }\n  return parts;\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n  var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n  if (mid) {\n    return mid.substr(6);\n  }\n}\n\nSDPUtils.parseFingerprint = function(line) {\n  var parts = line.substr(14).split(' ');\n  return {\n    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n    value: parts[1]\n  };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n      'a=fingerprint:');\n  // Note: a=setup line is ignored since we use the 'auto' role.\n  // Note2: 'algorithm' is not case sensitive except in Edge.\n  return {\n    role: 'auto',\n    fingerprints: lines.map(SDPUtils.parseFingerprint)\n  };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  var sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(function(fp) {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  // Search in session part, too.\n  lines = lines.concat(SDPUtils.splitLines(sessionpart));\n  var iceParameters = {\n    usernameFragment: lines.filter(function(line) {\n      return line.indexOf('a=ice-ufrag:') === 0;\n    })[0].substr(12),\n    password: lines.filter(function(line) {\n      return line.indexOf('a=ice-pwd:') === 0;\n    })[0].substr(10)\n  };\n  return iceParameters;\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  var description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: []\n  };\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    var pt = mline[i];\n    var rtpmapline = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      var codec = SDPUtils.parseRtpMap(rtpmapline);\n      var fmtps = SDPUtils.matchPrefix(\n          mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n          mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  var sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' UDP/TLS/RTP/SAVPF ';\n  sdp += caps.codecs.map(function(codec) {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(function(codec) {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  var maxptime = 0;\n  caps.codecs.forEach(function(codec) {\n    if (codec.maxptime > maxptime) {\n      maxptime = codec.maxptime;\n    }\n  });\n  if (maxptime > 0) {\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n  }\n  sdp += 'a=rtcp-mux\\r\\n';\n\n  caps.headerExtensions.forEach(function(extension) {\n    sdp += SDPUtils.writeExtmap(extension);\n  });\n  // FIXME: write fecMechanisms.\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  var encodingParameters = [];\n  var description = SDPUtils.parseRtpParameters(mediaSection);\n  var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n  .map(function(line) {\n    return SDPUtils.parseSsrcMedia(line);\n  })\n  .filter(function(parts) {\n    return parts.attribute === 'cname';\n  });\n  var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  var secondarySsrc;\n\n  var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n  .map(function(line) {\n    var parts = line.split(' ');\n    parts.shift();\n    return parts.map(function(part) {\n      return parseInt(part, 10);\n    });\n  });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(function(codec) {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      var encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10),\n        rtx: {\n          ssrc: secondarySsrc\n        }\n      };\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: secondarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(5), 10);\n    }\n    encodingParameters.forEach(function(params) {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n  var rtcpParameters = {};\n\n  var cname;\n  // Gets the first SSRC. Note that with RTX there might be multiple\n  // SSRCs.\n  var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n      .map(function(line) {\n        return SDPUtils.parseSsrcMedia(line);\n      })\n      .filter(function(obj) {\n        return obj.attribute === 'cname';\n      })[0];\n  if (remoteSsrc) {\n    rtcpParameters.cname = remoteSsrc.value;\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\n  }\n\n  // Edge uses the compound attribute instead of reducedSize\n  // compound is !reducedSize\n  var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n  rtcpParameters.reducedSize = rsize.length > 0;\n  rtcpParameters.compound = rsize.length === 0;\n\n  // parses the rtcp-mux attrіbute.\n  // Note that Edge does not support unmuxed RTCP.\n  var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n  rtcpParameters.mux = mux.length > 0;\n\n  return rtcpParameters;\n};\n\n// parses either a=msid: or a=ssrc:... msid lines an returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n  var parts;\n  var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n  if (spec.length === 1) {\n    parts = spec[0].substr(7).split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n  var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n  .map(function(line) {\n    return SDPUtils.parseSsrcMedia(line);\n  })\n  .filter(function(parts) {\n    return parts.attribute === 'msid';\n  });\n  if (planB.length > 0) {\n    parts = planB[0].value.split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n};\n\nSDPUtils.writeSessionBoilerplate = function() {\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=thisisadapterortc 8169639915646943137 2 IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\nSDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n      transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n      transceiver.dtlsTransport.getLocalParameters(),\n      type === 'offer' ? 'actpass' : 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.direction) {\n    sdp += 'a=' + transceiver.direction + '\\r\\n';\n  } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    // spec.\n    var msid = 'msid:' + stream.id + ' ' +\n        transceiver.rtpSender.track.id + '\\r\\n';\n    sdp += 'a=' + msid;\n\n    // for Chrome.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  var lines = SDPUtils.splitLines(mediaSection);\n  for (var i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substr(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  return mline[0].substr(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n  return mediaSection.split(' ', 2)[1] === '0';\n};\n\n// Expose public methods.\nmodule.exports = SDPUtils;\n\n\n\n// WEBPACK FOOTER //\n// ./~/sdp/sdp.js","'use strict';\n\nvar encode = require('./encode');\nvar alphabet = require('./alphabet');\n\n// Ignore all milliseconds before a certain time to reduce the size of the date entropy without sacrificing uniqueness.\n// This number should be updated every year or so to keep the generated id short.\n// To regenerate `new Date() - 0` and bump the version. Always bump the version!\nvar REDUCE_TIME = 1459707606518;\n\n// don't change unless we change the algos or REDUCE_TIME\n// must be an integer and less than 16\nvar version = 6;\n\n// Counter is used when shortid is called multiple times in one second.\nvar counter;\n\n// Remember the last time shortid was called in case counter is needed.\nvar previousSeconds;\n\n/**\n * Generate unique id\n * Returns string id\n */\nfunction build(clusterWorkerId) {\n\n    var str = '';\n\n    var seconds = Math.floor((Date.now() - REDUCE_TIME) * 0.001);\n\n    if (seconds === previousSeconds) {\n        counter++;\n    } else {\n        counter = 0;\n        previousSeconds = seconds;\n    }\n\n    str = str + encode(alphabet.lookup, version);\n    str = str + encode(alphabet.lookup, clusterWorkerId);\n    if (counter > 0) {\n        str = str + encode(alphabet.lookup, counter);\n    }\n    str = str + encode(alphabet.lookup, seconds);\n\n    return str;\n}\n\nmodule.exports = build;\n\n\n\n// WEBPACK FOOTER //\n// ./~/shortid/lib/build.js","'use strict';\nvar alphabet = require('./alphabet');\n\n/**\n * Decode the id to get the version and worker\n * Mainly for debugging and testing.\n * @param id - the shortid-generated id.\n */\nfunction decode(id) {\n    var characters = alphabet.shuffled();\n    return {\n        version: characters.indexOf(id.substr(0, 1)) & 0x0f,\n        worker: characters.indexOf(id.substr(1, 1)) & 0x0f\n    };\n}\n\nmodule.exports = decode;\n\n\n\n// WEBPACK FOOTER //\n// ./~/shortid/lib/decode.js","'use strict';\n\nvar alphabet = require('./alphabet');\nvar encode = require('./encode');\nvar decode = require('./decode');\nvar build = require('./build');\nvar isValid = require('./is-valid');\n\n// if you are using cluster or multiple servers use this to make each instance\n// has a unique value for worker\n// Note: I don't know if this is automatically set when using third\n// party cluster solutions such as pm2.\nvar clusterWorkerId = require('./util/cluster-worker-id') || 0;\n\n/**\n * Set the seed.\n * Highly recommended if you don't want people to try to figure out your id schema.\n * exposed as shortid.seed(int)\n * @param seed Integer value to seed the random alphabet.  ALWAYS USE THE SAME SEED or you might get overlaps.\n */\nfunction seed(seedValue) {\n    alphabet.seed(seedValue);\n    return module.exports;\n}\n\n/**\n * Set the cluster worker or machine id\n * exposed as shortid.worker(int)\n * @param workerId worker must be positive integer.  Number less than 16 is recommended.\n * returns shortid module so it can be chained.\n */\nfunction worker(workerId) {\n    clusterWorkerId = workerId;\n    return module.exports;\n}\n\n/**\n *\n * sets new characters to use in the alphabet\n * returns the shuffled alphabet\n */\nfunction characters(newCharacters) {\n    if (newCharacters !== undefined) {\n        alphabet.characters(newCharacters);\n    }\n\n    return alphabet.shuffled();\n}\n\n/**\n * Generate unique id\n * Returns string id\n */\nfunction generate() {\n  return build(clusterWorkerId);\n}\n\n// Export all other functions as properties of the generate function\nmodule.exports = generate;\nmodule.exports.generate = generate;\nmodule.exports.seed = seed;\nmodule.exports.worker = worker;\nmodule.exports.characters = characters;\nmodule.exports.decode = decode;\nmodule.exports.isValid = isValid;\n\n\n\n// WEBPACK FOOTER //\n// ./~/shortid/lib/index.js","'use strict';\nvar alphabet = require('./alphabet');\n\nfunction isShortId(id) {\n    if (!id || typeof id !== 'string' || id.length < 6 ) {\n        return false;\n    }\n\n    var characters = alphabet.characters();\n    var len = id.length;\n    for(var i = 0; i < len;i++) {\n        if (characters.indexOf(id[i]) === -1) {\n            return false;\n        }\n    }\n    return true;\n}\n\nmodule.exports = isShortId;\n\n\n\n// WEBPACK FOOTER //\n// ./~/shortid/lib/is-valid.js","'use strict';\n\nvar crypto = typeof window === 'object' && (window.crypto || window.msCrypto); // IE 11 uses window.msCrypto\n\nfunction randomByte() {\n    if (!crypto || !crypto.getRandomValues) {\n        return Math.floor(Math.random() * 256) & 0x30;\n    }\n    var dest = new Uint8Array(1);\n    crypto.getRandomValues(dest);\n    return dest[0] & 0x30;\n}\n\nmodule.exports = randomByte;\n\n\n\n// WEBPACK FOOTER //\n// ./~/shortid/lib/random/random-byte-browser.js","'use strict';\n\n// Found this seed-based random generator somewhere\n// Based on The Central Randomizer 1.3 (C) 1997 by Paul Houle (houle@msc.cornell.edu)\n\nvar seed = 1;\n\n/**\n * return a random number based on a seed\n * @param seed\n * @returns {number}\n */\nfunction getNextValue() {\n    seed = (seed * 9301 + 49297) % 233280;\n    return seed/(233280.0);\n}\n\nfunction setSeed(_seed_) {\n    seed = _seed_;\n}\n\nmodule.exports = {\n    nextValue: getNextValue,\n    seed: setSeed\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/shortid/lib/random/random-from-seed.js","'use strict';\n\nmodule.exports = 0;\n\n\n\n// WEBPACK FOOTER //\n// ./~/shortid/lib/util/cluster-worker-id-browser.js","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\n'use strict';\n\n// Shimming starts here.\n(function() {\n  // Utils.\n  var utils = require('./utils');\n  var logging = utils.log;\n  var browserDetails = utils.browserDetails;\n  // Export to the adapter global object visible in the browser.\n  module.exports.browserDetails = browserDetails;\n  module.exports.extractVersion = utils.extractVersion;\n  module.exports.disableLog = utils.disableLog;\n\n  // Uncomment the line below if you want logging to occur, including logging\n  // for the switch statement below. Can also be turned on in the browser via\n  // adapter.disableLog(false), but then logging from the switch statement below\n  // will not appear.\n  // require('./utils').disableLog(false);\n\n  // Browser shims.\n  var chromeShim = require('./chrome/chrome_shim') || null;\n  var edgeShim = require('./edge/edge_shim') || null;\n  var firefoxShim = require('./firefox/firefox_shim') || null;\n  var safariShim = require('./safari/safari_shim') || null;\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection) {\n        logging('Chrome shim is not included in this adapter release.');\n        return;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      module.exports.browserShim = chromeShim;\n\n      chromeShim.shimGetUserMedia();\n      chromeShim.shimMediaStream();\n      utils.shimCreateObjectURL();\n      chromeShim.shimSourceObject();\n      chromeShim.shimPeerConnection();\n      chromeShim.shimOnTrack();\n      chromeShim.shimGetSendersWithDtmf();\n      break;\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection) {\n        logging('Firefox shim is not included in this adapter release.');\n        return;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      module.exports.browserShim = firefoxShim;\n\n      firefoxShim.shimGetUserMedia();\n      utils.shimCreateObjectURL();\n      firefoxShim.shimSourceObject();\n      firefoxShim.shimPeerConnection();\n      firefoxShim.shimOnTrack();\n      break;\n    case 'edge':\n      if (!edgeShim || !edgeShim.shimPeerConnection) {\n        logging('MS edge shim is not included in this adapter release.');\n        return;\n      }\n      logging('adapter.js shimming edge.');\n      // Export to the adapter global object visible in the browser.\n      module.exports.browserShim = edgeShim;\n\n      edgeShim.shimGetUserMedia();\n      utils.shimCreateObjectURL();\n      edgeShim.shimPeerConnection();\n      edgeShim.shimReplaceTrack();\n      break;\n    case 'safari':\n      if (!safariShim) {\n        logging('Safari shim is not included in this adapter release.');\n        return;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      module.exports.browserShim = safariShim;\n\n      safariShim.shimOnAddStream();\n      safariShim.shimGetUserMedia();\n      break;\n    default:\n      logging('Unsupported browser!');\n  }\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./~/webrtc-adapter/src/js/adapter_core.js","\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\nvar logging = require('../utils.js').log;\nvar browserDetails = require('../utils.js').browserDetails;\n\nvar chromeShim = {\n  shimMediaStream: function() {\n    window.MediaStream = window.MediaStream || window.webkitMediaStream;\n  },\n\n  shimOnTrack: function() {\n    if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n        window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n        get: function() {\n          return this._ontrack;\n        },\n        set: function(f) {\n          var self = this;\n          if (this._ontrack) {\n            this.removeEventListener('track', this._ontrack);\n            this.removeEventListener('addstream', this._ontrackpoly);\n          }\n          this.addEventListener('track', this._ontrack = f);\n          this.addEventListener('addstream', this._ontrackpoly = function(e) {\n            // onaddstream does not fire when a track is added to an existing\n            // stream. But stream.onaddtrack is implemented so we use that.\n            e.stream.addEventListener('addtrack', function(te) {\n              var event = new Event('track');\n              event.track = te.track;\n              event.receiver = {track: te.track};\n              event.streams = [e.stream];\n              self.dispatchEvent(event);\n            });\n            e.stream.getTracks().forEach(function(track) {\n              var event = new Event('track');\n              event.track = track;\n              event.receiver = {track: track};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            }.bind(this));\n          }.bind(this));\n        }\n      });\n    }\n  },\n\n  shimGetSendersWithDtmf: function() {\n    if (typeof window === 'object' && window.RTCPeerConnection &&\n        !('getSenders' in RTCPeerConnection.prototype) &&\n        'createDTMFSender' in RTCPeerConnection.prototype) {\n      RTCPeerConnection.prototype.getSenders = function() {\n        return this._senders;\n      };\n      var origAddStream = RTCPeerConnection.prototype.addStream;\n      var origRemoveStream = RTCPeerConnection.prototype.removeStream;\n\n      RTCPeerConnection.prototype.addStream = function(stream) {\n        var pc = this;\n        pc._senders = pc._senders || [];\n        origAddStream.apply(pc, [stream]);\n        stream.getTracks().forEach(function(track) {\n          pc._senders.push({\n            track: track,\n            get dtmf() {\n              if (this._dtmf === undefined) {\n                if (track.kind === 'audio') {\n                  this._dtmf = pc.createDTMFSender(track);\n                } else {\n                  this._dtmf = null;\n                }\n              }\n              return this._dtmf;\n            }\n          });\n        });\n      };\n\n      RTCPeerConnection.prototype.removeStream = function(stream) {\n        var pc = this;\n        pc._senders = pc._senders || [];\n        origRemoveStream.apply(pc, [stream]);\n        stream.getTracks().forEach(function(track) {\n          var sender = pc._senders.find(function(s) {\n            return s.track === track;\n          });\n          if (sender) {\n            pc._senders.splice(pc._senders.indexOf(sender), 1); // remove sender\n          }\n        });\n      };\n    }\n  },\n\n  shimSourceObject: function() {\n    if (typeof window === 'object') {\n      if (window.HTMLMediaElement &&\n        !('srcObject' in window.HTMLMediaElement.prototype)) {\n        // Shim the srcObject property, once, when HTMLMediaElement is found.\n        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n          get: function() {\n            return this._srcObject;\n          },\n          set: function(stream) {\n            var self = this;\n            // Use _srcObject as a private property for this shim\n            this._srcObject = stream;\n            if (this.src) {\n              URL.revokeObjectURL(this.src);\n            }\n\n            if (!stream) {\n              this.src = '';\n              return undefined;\n            }\n            this.src = URL.createObjectURL(stream);\n            // We need to recreate the blob url when a track is added or\n            // removed. Doing it manually since we want to avoid a recursion.\n            stream.addEventListener('addtrack', function() {\n              if (self.src) {\n                URL.revokeObjectURL(self.src);\n              }\n              self.src = URL.createObjectURL(stream);\n            });\n            stream.addEventListener('removetrack', function() {\n              if (self.src) {\n                URL.revokeObjectURL(self.src);\n              }\n              self.src = URL.createObjectURL(stream);\n            });\n          }\n        });\n      }\n    }\n  },\n\n  shimPeerConnection: function() {\n    // The RTCPeerConnection object.\n    if (!window.RTCPeerConnection) {\n      window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n        // Translate iceTransportPolicy to iceTransports,\n        // see https://code.google.com/p/webrtc/issues/detail?id=4869\n        // this was fixed in M56 along with unprefixing RTCPeerConnection.\n        logging('PeerConnection');\n        if (pcConfig && pcConfig.iceTransportPolicy) {\n          pcConfig.iceTransports = pcConfig.iceTransportPolicy;\n        }\n\n        return new webkitRTCPeerConnection(pcConfig, pcConstraints);\n      };\n      window.RTCPeerConnection.prototype = webkitRTCPeerConnection.prototype;\n      // wrap static methods. Currently just generateCertificate.\n      if (webkitRTCPeerConnection.generateCertificate) {\n        Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n          get: function() {\n            return webkitRTCPeerConnection.generateCertificate;\n          }\n        });\n      }\n    } else {\n      // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n      var OrigPeerConnection = RTCPeerConnection;\n      window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n        if (pcConfig && pcConfig.iceServers) {\n          var newIceServers = [];\n          for (var i = 0; i < pcConfig.iceServers.length; i++) {\n            var server = pcConfig.iceServers[i];\n            if (!server.hasOwnProperty('urls') &&\n                server.hasOwnProperty('url')) {\n              console.warn('RTCIceServer.url is deprecated! Use urls instead.');\n              server = JSON.parse(JSON.stringify(server));\n              server.urls = server.url;\n              newIceServers.push(server);\n            } else {\n              newIceServers.push(pcConfig.iceServers[i]);\n            }\n          }\n          pcConfig.iceServers = newIceServers;\n        }\n        return new OrigPeerConnection(pcConfig, pcConstraints);\n      };\n      window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n      // wrap static methods. Currently just generateCertificate.\n      Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n        get: function() {\n          return OrigPeerConnection.generateCertificate;\n        }\n      });\n    }\n\n    var origGetStats = RTCPeerConnection.prototype.getStats;\n    RTCPeerConnection.prototype.getStats = function(selector,\n        successCallback, errorCallback) {\n      var self = this;\n      var args = arguments;\n\n      // If selector is a function then we are in the old style stats so just\n      // pass back the original getStats format to avoid breaking old users.\n      if (arguments.length > 0 && typeof selector === 'function') {\n        return origGetStats.apply(this, arguments);\n      }\n\n      // When spec-style getStats is supported, return those when called with\n      // either no arguments or the selector argument is null.\n      if (origGetStats.length === 0 && (arguments.length === 0 ||\n          typeof arguments[0] !== 'function')) {\n        return origGetStats.apply(this, []);\n      }\n\n      var fixChromeStats_ = function(response) {\n        var standardReport = {};\n        var reports = response.result();\n        reports.forEach(function(report) {\n          var standardStats = {\n            id: report.id,\n            timestamp: report.timestamp,\n            type: {\n              localcandidate: 'local-candidate',\n              remotecandidate: 'remote-candidate'\n            }[report.type] || report.type\n          };\n          report.names().forEach(function(name) {\n            standardStats[name] = report.stat(name);\n          });\n          standardReport[standardStats.id] = standardStats;\n        });\n\n        return standardReport;\n      };\n\n      // shim getStats with maplike support\n      var makeMapStats = function(stats) {\n        return new Map(Object.keys(stats).map(function(key) {\n          return[key, stats[key]];\n        }));\n      };\n\n      if (arguments.length >= 2) {\n        var successCallbackWrapper_ = function(response) {\n          args[1](makeMapStats(fixChromeStats_(response)));\n        };\n\n        return origGetStats.apply(this, [successCallbackWrapper_,\n            arguments[0]]);\n      }\n\n      // promise-support\n      return new Promise(function(resolve, reject) {\n        origGetStats.apply(self, [\n          function(response) {\n            resolve(makeMapStats(fixChromeStats_(response)));\n          }, reject]);\n      }).then(successCallback, errorCallback);\n    };\n\n    // add promise support -- natively available in Chrome 51\n    if (browserDetails.version < 51) {\n      ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n          .forEach(function(method) {\n            var nativeMethod = RTCPeerConnection.prototype[method];\n            RTCPeerConnection.prototype[method] = function() {\n              var args = arguments;\n              var self = this;\n              var promise = new Promise(function(resolve, reject) {\n                nativeMethod.apply(self, [args[0], resolve, reject]);\n              });\n              if (args.length < 2) {\n                return promise;\n              }\n              return promise.then(function() {\n                args[1].apply(null, []);\n              },\n              function(err) {\n                if (args.length >= 3) {\n                  args[2].apply(null, [err]);\n                }\n              });\n            };\n          });\n    }\n\n    // promise support for createOffer and createAnswer. Available (without\n    // bugs) since M52: crbug/619289\n    if (browserDetails.version < 52) {\n      ['createOffer', 'createAnswer'].forEach(function(method) {\n        var nativeMethod = RTCPeerConnection.prototype[method];\n        RTCPeerConnection.prototype[method] = function() {\n          var self = this;\n          if (arguments.length < 1 || (arguments.length === 1 &&\n              typeof arguments[0] === 'object')) {\n            var opts = arguments.length === 1 ? arguments[0] : undefined;\n            return new Promise(function(resolve, reject) {\n              nativeMethod.apply(self, [resolve, reject, opts]);\n            });\n          }\n          return nativeMethod.apply(this, arguments);\n        };\n      });\n    }\n\n    // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          var nativeMethod = RTCPeerConnection.prototype[method];\n          RTCPeerConnection.prototype[method] = function() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                RTCIceCandidate : RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          };\n        });\n\n    // support for addIceCandidate(null or undefined)\n    var nativeAddIceCandidate =\n        RTCPeerConnection.prototype.addIceCandidate;\n    RTCPeerConnection.prototype.addIceCandidate = function() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n  }\n};\n\n\n// Expose public methods.\nmodule.exports = {\n  shimMediaStream: chromeShim.shimMediaStream,\n  shimOnTrack: chromeShim.shimOnTrack,\n  shimGetSendersWithDtmf: chromeShim.shimGetSendersWithDtmf,\n  shimSourceObject: chromeShim.shimSourceObject,\n  shimPeerConnection: chromeShim.shimPeerConnection,\n  shimGetUserMedia: require('./getusermedia')\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/webrtc-adapter/src/js/chrome/chrome_shim.js","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\nvar logging = require('../utils.js').log;\nvar browserDetails = require('../utils.js').browserDetails;\n\n// Expose public methods.\nmodule.exports = function() {\n  var constraintsToChrome_ = function(c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    var cc = {};\n    Object.keys(c).forEach(function(key) {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      var r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      var oldname_ = function(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return (name === 'deviceId') ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        var oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(function(mix) {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  var shimConstraints_ = function(constraints, func) {\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && constraints.audio) {\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && typeof constraints.video === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      var face = constraints.video.facingMode;\n      face = face && ((typeof face === 'object') ? face : {ideal: face});\n      var getSupportedFacingModeLies = browserDetails.version < 61;\n\n      if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                    face.ideal === 'user' || face.ideal === 'environment')) &&\n          !(navigator.mediaDevices.getSupportedConstraints &&\n            navigator.mediaDevices.getSupportedConstraints().facingMode &&\n            !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        var matches;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices()\n          .then(function(devices) {\n            devices = devices.filter(function(d) {\n              return d.kind === 'videoinput';\n            });\n            var dev = devices.find(function(d) {\n              return matches.some(function(match) {\n                return d.label.toLowerCase().indexOf(match) !== -1;\n              });\n            });\n            if (!dev && devices.length && matches.indexOf('back') !== -1) {\n              dev = devices[devices.length - 1]; // more likely the back cam\n            }\n            if (dev) {\n              constraints.video.deviceId = face.exact ? {exact: dev.deviceId} :\n                                                        {ideal: dev.deviceId};\n            }\n            constraints.video = constraintsToChrome_(constraints.video);\n            logging('chrome: ' + JSON.stringify(constraints));\n            return func(constraints);\n          });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  var shimError_ = function(e) {\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraintName,\n      toString: function() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  var getUserMedia_ = function(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, function(c) {\n      navigator.webkitGetUserMedia(c, onSuccess, function(e) {\n        onError(shimError_(e));\n      });\n    });\n  };\n\n  navigator.getUserMedia = getUserMedia_;\n\n  // Returns the result of getUserMedia as a Promise.\n  var getUserMediaPromise_ = function(constraints) {\n    return new Promise(function(resolve, reject) {\n      navigator.getUserMedia(constraints, resolve, reject);\n    });\n  };\n\n  if (!navigator.mediaDevices) {\n    navigator.mediaDevices = {\n      getUserMedia: getUserMediaPromise_,\n      enumerateDevices: function() {\n        return new Promise(function(resolve) {\n          var kinds = {audio: 'audioinput', video: 'videoinput'};\n          return MediaStreamTrack.getSources(function(devices) {\n            resolve(devices.map(function(device) {\n              return {label: device.label,\n                      kind: kinds[device.kind],\n                      deviceId: device.id,\n                      groupId: ''};\n            }));\n          });\n        });\n      },\n      getSupportedConstraints: function() {\n        return {\n          deviceId: true, echoCancellation: true, facingMode: true,\n          frameRate: true, height: true, width: true\n        };\n      }\n    };\n  }\n\n  // A shim for getUserMedia method on the mediaDevices object.\n  // TODO(KaptenJansson) remove once implemented in Chrome stable.\n  if (!navigator.mediaDevices.getUserMedia) {\n    navigator.mediaDevices.getUserMedia = function(constraints) {\n      return getUserMediaPromise_(constraints);\n    };\n  } else {\n    // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n    // function which returns a Promise, it does not accept spec-style\n    // constraints.\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(cs) {\n      return shimConstraints_(cs, function(c) {\n        return origGetUserMedia(c).then(function(stream) {\n          if (c.audio && !stream.getAudioTracks().length ||\n              c.video && !stream.getVideoTracks().length) {\n            stream.getTracks().forEach(function(track) {\n              track.stop();\n            });\n            throw new DOMException('', 'NotFoundError');\n          }\n          return stream;\n        }, function(e) {\n          return Promise.reject(shimError_(e));\n        });\n      });\n    };\n  }\n\n  // Dummy devicechange event methods.\n  // TODO(KaptenJansson) remove once implemented in Chrome stable.\n  if (typeof navigator.mediaDevices.addEventListener === 'undefined') {\n    navigator.mediaDevices.addEventListener = function() {\n      logging('Dummy mediaDevices.addEventListener called.');\n    };\n  }\n  if (typeof navigator.mediaDevices.removeEventListener === 'undefined') {\n    navigator.mediaDevices.removeEventListener = function() {\n      logging('Dummy mediaDevices.removeEventListener called.');\n    };\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/webrtc-adapter/src/js/chrome/getusermedia.js","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar browserDetails = require('../utils').browserDetails;\nvar shimRTCPeerConnection = require('./rtcpeerconnection_shim');\n\nmodule.exports = {\n  shimGetUserMedia: require('./getusermedia'),\n  shimPeerConnection: function() {\n    if (window.RTCIceGatherer) {\n      // ORTC defines an RTCIceCandidate object but no constructor.\n      // Not implemented in Edge.\n      if (!window.RTCIceCandidate) {\n        window.RTCIceCandidate = function(args) {\n          return args;\n        };\n      }\n      // ORTC does not have a session description object but\n      // other browsers (i.e. Chrome) that will support both PC and ORTC\n      // in the future might have this defined already.\n      if (!window.RTCSessionDescription) {\n        window.RTCSessionDescription = function(args) {\n          return args;\n        };\n      }\n      // this adds an additional event listener to MediaStrackTrack that signals\n      // when a tracks enabled property was changed. Workaround for a bug in\n      // addStream, see below. No longer required in 15025+\n      if (browserDetails.version < 15025) {\n        var origMSTEnabled = Object.getOwnPropertyDescriptor(\n            MediaStreamTrack.prototype, 'enabled');\n        Object.defineProperty(MediaStreamTrack.prototype, 'enabled', {\n          set: function(value) {\n            origMSTEnabled.set.call(this, value);\n            var ev = new Event('enabled');\n            ev.enabled = value;\n            this.dispatchEvent(ev);\n          }\n        });\n      }\n    }\n    window.RTCPeerConnection = shimRTCPeerConnection(browserDetails.version);\n  },\n  shimReplaceTrack: function() {\n    // ORTC has replaceTrack -- https://github.com/w3c/ortc/issues/614\n    if (window.RTCRtpSender && !('replaceTrack' in RTCRtpSender.prototype)) {\n      RTCRtpSender.prototype.replaceTrack = RTCRtpSender.prototype.setTrack;\n    }\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/webrtc-adapter/src/js/edge/edge_shim.js","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\n// Expose public methods.\nmodule.exports = function() {\n  var shimError_ = function(e) {\n    return {\n      name: {PermissionDeniedError: 'NotAllowedError'}[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint,\n      toString: function() {\n        return this.name;\n      }\n    };\n  };\n\n  // getUserMedia error shim.\n  var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n  navigator.mediaDevices.getUserMedia = function(c) {\n    return origGetUserMedia(c).catch(function(e) {\n      return Promise.reject(shimError_(e));\n    });\n  };\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/webrtc-adapter/src/js/edge/getusermedia.js","/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar SDPUtils = require('sdp');\n\n// sort tracks such that they follow an a-v-a-v...\n// pattern.\nfunction sortTracks(tracks) {\n  var audioTracks = tracks.filter(function(track) {\n    return track.kind === 'audio';\n  });\n  var videoTracks = tracks.filter(function(track) {\n    return track.kind === 'video';\n  });\n  tracks = [];\n  while (audioTracks.length || videoTracks.length) {\n    if (audioTracks.length) {\n      tracks.push(audioTracks.shift());\n    }\n    if (videoTracks.length) {\n      tracks.push(videoTracks.shift());\n    }\n  }\n  return tracks;\n}\n\n// Edge does not like\n// 1) stun:\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nfunction filterIceServers(iceServers, edgeVersion) {\n  var hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(function(server) {\n    if (server && (server.urls || server.url)) {\n      var urls = server.urls || server.url;\n      if (server.url && !server.urls) {\n        console.warn('RTCIceServer.url is deprecated! Use urls instead.');\n      }\n      var isString = typeof urls === 'string';\n      if (isString) {\n        urls = [urls];\n      }\n      urls = urls.filter(function(url) {\n        var validTurn = url.indexOf('turn:') === 0 &&\n            url.indexOf('transport=udp') !== -1 &&\n            url.indexOf('turn:[') === -1 &&\n            !hasTurn;\n\n        if (validTurn) {\n          hasTurn = true;\n          return true;\n        }\n        return url.indexOf('stun:') === 0 && edgeVersion >= 14393;\n      });\n\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n    return false;\n  });\n}\n\nmodule.exports = function(edgeVersion) {\n  var RTCPeerConnection = function(config) {\n    var self = this;\n\n    var _eventTarget = document.createDocumentFragment();\n    ['addEventListener', 'removeEventListener', 'dispatchEvent']\n        .forEach(function(method) {\n          self[method] = _eventTarget[method].bind(_eventTarget);\n        });\n\n    this.onicecandidate = null;\n    this.onaddstream = null;\n    this.ontrack = null;\n    this.onremovestream = null;\n    this.onsignalingstatechange = null;\n    this.oniceconnectionstatechange = null;\n    this.onicegatheringstatechange = null;\n    this.onnegotiationneeded = null;\n    this.ondatachannel = null;\n    this.canTrickleIceCandidates = null;\n\n    this.localStreams = [];\n    this.remoteStreams = [];\n    this.getLocalStreams = function() {\n      return self.localStreams;\n    };\n    this.getRemoteStreams = function() {\n      return self.remoteStreams;\n    };\n\n    this.localDescription = new RTCSessionDescription({\n      type: '',\n      sdp: ''\n    });\n    this.remoteDescription = new RTCSessionDescription({\n      type: '',\n      sdp: ''\n    });\n    this.signalingState = 'stable';\n    this.iceConnectionState = 'new';\n    this.iceGatheringState = 'new';\n\n    this.iceOptions = {\n      gatherPolicy: 'all',\n      iceServers: []\n    };\n    if (config && config.iceTransportPolicy) {\n      switch (config.iceTransportPolicy) {\n        case 'all':\n        case 'relay':\n          this.iceOptions.gatherPolicy = config.iceTransportPolicy;\n          break;\n        default:\n          // don't set iceTransportPolicy.\n          break;\n      }\n    }\n    this.usingBundle = config && config.bundlePolicy === 'max-bundle';\n\n    if (config && config.iceServers) {\n      this.iceOptions.iceServers = filterIceServers(config.iceServers,\n          edgeVersion);\n    }\n    this._config = config || {};\n\n    // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\n    // everything that is needed to describe a SDP m-line.\n    this.transceivers = [];\n\n    // since the iceGatherer is currently created in createOffer but we\n    // must not emit candidates until after setLocalDescription we buffer\n    // them in this array.\n    this._localIceCandidatesBuffer = [];\n  };\n\n  RTCPeerConnection.prototype._emitGatheringStateChange = function() {\n    var event = new Event('icegatheringstatechange');\n    this.dispatchEvent(event);\n    if (this.onicegatheringstatechange !== null) {\n      this.onicegatheringstatechange(event);\n    }\n  };\n\n  RTCPeerConnection.prototype._emitBufferedCandidates = function() {\n    var self = this;\n    var sections = SDPUtils.splitSections(self.localDescription.sdp);\n    // FIXME: need to apply ice candidates in a way which is async but\n    // in-order\n    this._localIceCandidatesBuffer.forEach(function(event) {\n      var end = !event.candidate || Object.keys(event.candidate).length === 0;\n      if (end) {\n        for (var j = 1; j < sections.length; j++) {\n          if (sections[j].indexOf('\\r\\na=end-of-candidates\\r\\n') === -1) {\n            sections[j] += 'a=end-of-candidates\\r\\n';\n          }\n        }\n      } else {\n        sections[event.candidate.sdpMLineIndex + 1] +=\n            'a=' + event.candidate.candidate + '\\r\\n';\n      }\n      self.localDescription.sdp = sections.join('');\n      self.dispatchEvent(event);\n      if (self.onicecandidate !== null) {\n        self.onicecandidate(event);\n      }\n      if (!event.candidate && self.iceGatheringState !== 'complete') {\n        var complete = self.transceivers.every(function(transceiver) {\n          return transceiver.iceGatherer &&\n              transceiver.iceGatherer.state === 'completed';\n        });\n        if (complete && self.iceGatheringStateChange !== 'complete') {\n          self.iceGatheringState = 'complete';\n          self._emitGatheringStateChange();\n        }\n      }\n    });\n    this._localIceCandidatesBuffer = [];\n  };\n\n  RTCPeerConnection.prototype.getConfiguration = function() {\n    return this._config;\n  };\n\n  RTCPeerConnection.prototype.addStream = function(stream) {\n    if (edgeVersion >= 15025) {\n      this.localStreams.push(stream);\n    } else {\n      // Clone is necessary for local demos mostly, attaching directly\n      // to two different senders does not work (build 10547).\n      // Fixed in 15025 (or earlier)\n      var clonedStream = stream.clone();\n      stream.getTracks().forEach(function(track, idx) {\n        var clonedTrack = clonedStream.getTracks()[idx];\n        track.addEventListener('enabled', function(event) {\n          clonedTrack.enabled = event.enabled;\n        });\n      });\n      this.localStreams.push(clonedStream);\n    }\n    this._maybeFireNegotiationNeeded();\n  };\n\n  RTCPeerConnection.prototype.removeStream = function(stream) {\n    var idx = this.localStreams.indexOf(stream);\n    if (idx > -1) {\n      this.localStreams.splice(idx, 1);\n      this._maybeFireNegotiationNeeded();\n    }\n  };\n\n  RTCPeerConnection.prototype.getSenders = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpSender;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpSender;\n    });\n  };\n\n  RTCPeerConnection.prototype.getReceivers = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpReceiver;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpReceiver;\n    });\n  };\n\n  // Determines the intersection of local and remote capabilities.\n  RTCPeerConnection.prototype._getCommonCapabilities = function(\n      localCapabilities, remoteCapabilities) {\n    var commonCapabilities = {\n      codecs: [],\n      headerExtensions: [],\n      fecMechanisms: []\n    };\n\n    var findCodecByPayloadType = function(pt, codecs) {\n      pt = parseInt(pt, 10);\n      for (var i = 0; i < codecs.length; i++) {\n        if (codecs[i].payloadType === pt ||\n            codecs[i].preferredPayloadType === pt) {\n          return codecs[i];\n        }\n      }\n    };\n\n    var rtxCapabilityMatches = function(lRtx, rRtx, lCodecs, rCodecs) {\n      var lCodec = findCodecByPayloadType(lRtx.parameters.apt, lCodecs);\n      var rCodec = findCodecByPayloadType(rRtx.parameters.apt, rCodecs);\n      return lCodec && rCodec &&\n          lCodec.name.toLowerCase() === rCodec.name.toLowerCase();\n    };\n\n    localCapabilities.codecs.forEach(function(lCodec) {\n      for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\n        var rCodec = remoteCapabilities.codecs[i];\n        if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&\n            lCodec.clockRate === rCodec.clockRate) {\n          if (lCodec.name.toLowerCase() === 'rtx' &&\n              lCodec.parameters && rCodec.parameters.apt) {\n            // for RTX we need to find the local rtx that has a apt\n            // which points to the same local codec as the remote one.\n            if (!rtxCapabilityMatches(lCodec, rCodec,\n                localCapabilities.codecs, remoteCapabilities.codecs)) {\n              continue;\n            }\n          }\n          rCodec = JSON.parse(JSON.stringify(rCodec)); // deepcopy\n          // number of channels is the highest common number of channels\n          rCodec.numChannels = Math.min(lCodec.numChannels,\n              rCodec.numChannels);\n          // push rCodec so we reply with offerer payload type\n          commonCapabilities.codecs.push(rCodec);\n\n          // determine common feedback mechanisms\n          rCodec.rtcpFeedback = rCodec.rtcpFeedback.filter(function(fb) {\n            for (var j = 0; j < lCodec.rtcpFeedback.length; j++) {\n              if (lCodec.rtcpFeedback[j].type === fb.type &&\n                  lCodec.rtcpFeedback[j].parameter === fb.parameter) {\n                return true;\n              }\n            }\n            return false;\n          });\n          // FIXME: also need to determine .parameters\n          //  see https://github.com/openpeer/ortc/issues/569\n          break;\n        }\n      }\n    });\n\n    localCapabilities.headerExtensions\n        .forEach(function(lHeaderExtension) {\n          for (var i = 0; i < remoteCapabilities.headerExtensions.length;\n               i++) {\n            var rHeaderExtension = remoteCapabilities.headerExtensions[i];\n            if (lHeaderExtension.uri === rHeaderExtension.uri) {\n              commonCapabilities.headerExtensions.push(rHeaderExtension);\n              break;\n            }\n          }\n        });\n\n    // FIXME: fecMechanisms\n    return commonCapabilities;\n  };\n\n  // Create ICE gatherer, ICE transport and DTLS transport.\n  RTCPeerConnection.prototype._createIceAndDtlsTransports = function(mid,\n      sdpMLineIndex) {\n    var self = this;\n    var iceGatherer = new RTCIceGatherer(self.iceOptions);\n    var iceTransport = new RTCIceTransport(iceGatherer);\n    iceGatherer.onlocalcandidate = function(evt) {\n      var event = new Event('icecandidate');\n      event.candidate = {sdpMid: mid, sdpMLineIndex: sdpMLineIndex};\n\n      var cand = evt.candidate;\n      var end = !cand || Object.keys(cand).length === 0;\n      // Edge emits an empty object for RTCIceCandidateComplete‥\n      if (end) {\n        // polyfill since RTCIceGatherer.state is not implemented in\n        // Edge 10547 yet.\n        if (iceGatherer.state === undefined) {\n          iceGatherer.state = 'completed';\n        }\n      } else {\n        // RTCIceCandidate doesn't have a component, needs to be added\n        cand.component = iceTransport.component === 'RTCP' ? 2 : 1;\n        event.candidate.candidate = SDPUtils.writeCandidate(cand);\n      }\n\n      // update local description.\n      var sections = SDPUtils.splitSections(self.localDescription.sdp);\n      if (!end) {\n        sections[event.candidate.sdpMLineIndex + 1] +=\n            'a=' + event.candidate.candidate + '\\r\\n';\n      } else {\n        sections[event.candidate.sdpMLineIndex + 1] +=\n            'a=end-of-candidates\\r\\n';\n      }\n      self.localDescription.sdp = sections.join('');\n      var transceivers = self._pendingOffer ? self._pendingOffer :\n          self.transceivers;\n      var complete = transceivers.every(function(transceiver) {\n        return transceiver.iceGatherer &&\n            transceiver.iceGatherer.state === 'completed';\n      });\n\n      // Emit candidate if localDescription is set.\n      // Also emits null candidate when all gatherers are complete.\n      switch (self.iceGatheringState) {\n        case 'new':\n          if (!end) {\n            self._localIceCandidatesBuffer.push(event);\n          }\n          if (end && complete) {\n            self._localIceCandidatesBuffer.push(\n                new Event('icecandidate'));\n          }\n          break;\n        case 'gathering':\n          self._emitBufferedCandidates();\n          if (!end) {\n            self.dispatchEvent(event);\n            if (self.onicecandidate !== null) {\n              self.onicecandidate(event);\n            }\n          }\n          if (complete) {\n            self.dispatchEvent(new Event('icecandidate'));\n            if (self.onicecandidate !== null) {\n              self.onicecandidate(new Event('icecandidate'));\n            }\n            self.iceGatheringState = 'complete';\n            self._emitGatheringStateChange();\n          }\n          break;\n        case 'complete':\n          // should not happen... currently!\n          break;\n        default: // no-op.\n          break;\n      }\n    };\n    iceTransport.onicestatechange = function() {\n      self._updateConnectionState();\n    };\n\n    var dtlsTransport = new RTCDtlsTransport(iceTransport);\n    dtlsTransport.ondtlsstatechange = function() {\n      self._updateConnectionState();\n    };\n    dtlsTransport.onerror = function() {\n      // onerror does not set state to failed by itself.\n      dtlsTransport.state = 'failed';\n      self._updateConnectionState();\n    };\n\n    return {\n      iceGatherer: iceGatherer,\n      iceTransport: iceTransport,\n      dtlsTransport: dtlsTransport\n    };\n  };\n\n  // Destroy ICE gatherer, ICE transport and DTLS transport.\n  // Without triggering the callbacks.\n  RTCPeerConnection.prototype._disposeIceAndDtlsTransports = function(\n      sdpMLineIndex) {\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer) {\n      delete iceGatherer.onlocalcandidate;\n      delete this.transceivers[sdpMLineIndex].iceGatherer;\n    }\n    var iceTransport = this.transceivers[sdpMLineIndex].iceTransport;\n    if (iceTransport) {\n      delete iceTransport.onicestatechange;\n      delete this.transceivers[sdpMLineIndex].iceTransport;\n    }\n    var dtlsTransport = this.transceivers[sdpMLineIndex].dtlsTransport;\n    if (dtlsTransport) {\n      delete dtlsTransport.ondtlssttatechange;\n      delete dtlsTransport.onerror;\n      delete this.transceivers[sdpMLineIndex].dtlsTransport;\n    }\n  };\n\n  // Start the RTP Sender and Receiver for a transceiver.\n  RTCPeerConnection.prototype._transceive = function(transceiver,\n      send, recv) {\n    var params = this._getCommonCapabilities(transceiver.localCapabilities,\n        transceiver.remoteCapabilities);\n    if (send && transceiver.rtpSender) {\n      params.encodings = transceiver.sendEncodingParameters;\n      params.rtcp = {\n        cname: SDPUtils.localCName,\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.recvEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpSender.send(params);\n    }\n    if (recv && transceiver.rtpReceiver) {\n      // remove RTX field in Edge 14942\n      if (transceiver.kind === 'video'\n          && transceiver.recvEncodingParameters\n          && edgeVersion < 15019) {\n        transceiver.recvEncodingParameters.forEach(function(p) {\n          delete p.rtx;\n        });\n      }\n      params.encodings = transceiver.recvEncodingParameters;\n      params.rtcp = {\n        cname: transceiver.rtcpParameters.cname,\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.sendEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpReceiver.receive(params);\n    }\n  };\n\n  RTCPeerConnection.prototype.setLocalDescription = function(description) {\n    var self = this;\n    var sections;\n    var sessionpart;\n    if (description.type === 'offer') {\n      // FIXME: What was the purpose of this empty if statement?\n      // if (!this._pendingOffer) {\n      // } else {\n      if (this._pendingOffer) {\n        // VERY limited support for SDP munging. Limited to:\n        // * changing the order of codecs\n        sections = SDPUtils.splitSections(description.sdp);\n        sessionpart = sections.shift();\n        sections.forEach(function(mediaSection, sdpMLineIndex) {\n          var caps = SDPUtils.parseRtpParameters(mediaSection);\n          self._pendingOffer[sdpMLineIndex].localCapabilities = caps;\n        });\n        this.transceivers = this._pendingOffer;\n        delete this._pendingOffer;\n      }\n    } else if (description.type === 'answer') {\n      sections = SDPUtils.splitSections(self.remoteDescription.sdp);\n      sessionpart = sections.shift();\n      var isIceLite = SDPUtils.matchPrefix(sessionpart,\n          'a=ice-lite').length > 0;\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var transceiver = self.transceivers[sdpMLineIndex];\n        var iceGatherer = transceiver.iceGatherer;\n        var iceTransport = transceiver.iceTransport;\n        var dtlsTransport = transceiver.dtlsTransport;\n        var localCapabilities = transceiver.localCapabilities;\n        var remoteCapabilities = transceiver.remoteCapabilities;\n\n        var rejected = SDPUtils.isRejected(mediaSection);\n\n        if (!rejected && !transceiver.isDatachannel) {\n          var remoteIceParameters = SDPUtils.getIceParameters(\n              mediaSection, sessionpart);\n          var remoteDtlsParameters = SDPUtils.getDtlsParameters(\n              mediaSection, sessionpart);\n          if (isIceLite) {\n            remoteDtlsParameters.role = 'server';\n          }\n\n          if (!self.usingBundle || sdpMLineIndex === 0) {\n            iceTransport.start(iceGatherer, remoteIceParameters,\n                isIceLite ? 'controlling' : 'controlled');\n            dtlsTransport.start(remoteDtlsParameters);\n          }\n\n          // Calculate intersection of capabilities.\n          var params = self._getCommonCapabilities(localCapabilities,\n              remoteCapabilities);\n\n          // Start the RTCRtpSender. The RTCRtpReceiver for this\n          // transceiver has already been started in setRemoteDescription.\n          self._transceive(transceiver,\n              params.codecs.length > 0,\n              false);\n        }\n      });\n    }\n\n    this.localDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    switch (description.type) {\n      case 'offer':\n        this._updateSignalingState('have-local-offer');\n        break;\n      case 'answer':\n        this._updateSignalingState('stable');\n        break;\n      default:\n        throw new TypeError('unsupported type \"' + description.type +\n            '\"');\n    }\n\n    // If a success callback was provided, emit ICE candidates after it\n    // has been executed. Otherwise, emit callback after the Promise is\n    // resolved.\n    var hasCallback = arguments.length > 1 &&\n      typeof arguments[1] === 'function';\n    if (hasCallback) {\n      var cb = arguments[1];\n      window.setTimeout(function() {\n        cb();\n        if (self.iceGatheringState === 'new') {\n          self.iceGatheringState = 'gathering';\n          self._emitGatheringStateChange();\n        }\n        self._emitBufferedCandidates();\n      }, 0);\n    }\n    var p = Promise.resolve();\n    p.then(function() {\n      if (!hasCallback) {\n        if (self.iceGatheringState === 'new') {\n          self.iceGatheringState = 'gathering';\n          self._emitGatheringStateChange();\n        }\n        // Usually candidates will be emitted earlier.\n        window.setTimeout(self._emitBufferedCandidates.bind(self), 500);\n      }\n    });\n    return p;\n  };\n\n  RTCPeerConnection.prototype.setRemoteDescription = function(description) {\n    var self = this;\n    var streams = {};\n    var receiverList = [];\n    var sections = SDPUtils.splitSections(description.sdp);\n    var sessionpart = sections.shift();\n    var isIceLite = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-lite').length > 0;\n    var usingBundle = SDPUtils.matchPrefix(sessionpart,\n        'a=group:BUNDLE ').length > 0;\n    var iceOptions = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-options:')[0];\n    if (iceOptions) {\n      this.canTrickleIceCandidates = iceOptions.substr(14).split(' ')\n          .indexOf('trickle') >= 0;\n    } else {\n      this.canTrickleIceCandidates = false;\n    }\n\n    sections.forEach(function(mediaSection, sdpMLineIndex) {\n      var lines = SDPUtils.splitLines(mediaSection);\n      var kind = SDPUtils.getKind(mediaSection);\n      var rejected = SDPUtils.isRejected(mediaSection);\n      var protocol = lines[0].substr(2).split(' ')[2];\n\n      var direction = SDPUtils.getDirection(mediaSection, sessionpart);\n      var remoteMsid = SDPUtils.parseMsid(mediaSection);\n\n      var mid = SDPUtils.getMid(mediaSection) || SDPUtils.generateIdentifier();\n\n      // Reject datachannels which are not implemented yet.\n      if (kind === 'application' && protocol === 'DTLS/SCTP') {\n        self.transceivers[sdpMLineIndex] = {\n          mid: mid,\n          isDatachannel: true\n        };\n        return;\n      }\n\n      var transceiver;\n      var iceGatherer;\n      var iceTransport;\n      var dtlsTransport;\n      var rtpSender;\n      var rtpReceiver;\n      var sendEncodingParameters;\n      var recvEncodingParameters;\n      var localCapabilities;\n\n      var track;\n      // FIXME: ensure the mediaSection has rtcp-mux set.\n      var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\n      var remoteIceParameters;\n      var remoteDtlsParameters;\n      if (!rejected) {\n        remoteIceParameters = SDPUtils.getIceParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters.role = 'client';\n      }\n      recvEncodingParameters =\n          SDPUtils.parseRtpEncodingParameters(mediaSection);\n\n      var rtcpParameters = SDPUtils.parseRtcpParameters(mediaSection);\n\n      var isComplete = SDPUtils.matchPrefix(mediaSection,\n          'a=end-of-candidates', sessionpart).length > 0;\n      var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\n          .map(function(cand) {\n            return SDPUtils.parseCandidate(cand);\n          })\n          .filter(function(cand) {\n            return cand.component === '1';\n          });\n      if (description.type === 'offer' && !rejected) {\n        var transports = usingBundle && sdpMLineIndex > 0 ? {\n          iceGatherer: self.transceivers[0].iceGatherer,\n          iceTransport: self.transceivers[0].iceTransport,\n          dtlsTransport: self.transceivers[0].dtlsTransport\n        } : self._createIceAndDtlsTransports(mid, sdpMLineIndex);\n\n        if (isComplete && (!usingBundle || sdpMLineIndex === 0)) {\n          transports.iceTransport.setRemoteCandidates(cands);\n        }\n\n        localCapabilities = RTCRtpReceiver.getCapabilities(kind);\n\n        // filter RTX until additional stuff needed for RTX is implemented\n        // in adapter.js\n        if (edgeVersion < 15019) {\n          localCapabilities.codecs = localCapabilities.codecs.filter(\n              function(codec) {\n                return codec.name !== 'rtx';\n              });\n        }\n\n        sendEncodingParameters = [{\n          ssrc: (2 * sdpMLineIndex + 2) * 1001\n        }];\n\n        if (direction === 'sendrecv' || direction === 'sendonly') {\n          rtpReceiver = new RTCRtpReceiver(transports.dtlsTransport,\n              kind);\n\n          track = rtpReceiver.track;\n          // FIXME: does not work with Plan B.\n          if (remoteMsid) {\n            if (!streams[remoteMsid.stream]) {\n              streams[remoteMsid.stream] = new MediaStream();\n              Object.defineProperty(streams[remoteMsid.stream], 'id', {\n                get: function() {\n                  return remoteMsid.stream;\n                }\n              });\n            }\n            Object.defineProperty(track, 'id', {\n              get: function() {\n                return remoteMsid.track;\n              }\n            });\n            streams[remoteMsid.stream].addTrack(track);\n            receiverList.push([track, rtpReceiver,\n                streams[remoteMsid.stream]]);\n          } else {\n            if (!streams.default) {\n              streams.default = new MediaStream();\n            }\n            streams.default.addTrack(track);\n            receiverList.push([track, rtpReceiver, streams.default]);\n          }\n        }\n\n        self.transceivers[sdpMLineIndex] = {\n          iceGatherer: transports.iceGatherer,\n          iceTransport: transports.iceTransport,\n          dtlsTransport: transports.dtlsTransport,\n          localCapabilities: localCapabilities,\n          remoteCapabilities: remoteCapabilities,\n          rtpSender: rtpSender,\n          rtpReceiver: rtpReceiver,\n          kind: kind,\n          mid: mid,\n          rtcpParameters: rtcpParameters,\n          sendEncodingParameters: sendEncodingParameters,\n          recvEncodingParameters: recvEncodingParameters\n        };\n        // Start the RTCRtpReceiver now. The RTPSender is started in\n        // setLocalDescription.\n        self._transceive(self.transceivers[sdpMLineIndex],\n            false,\n            direction === 'sendrecv' || direction === 'sendonly');\n      } else if (description.type === 'answer' && !rejected) {\n        if (usingBundle && sdpMLineIndex > 0) {\n          self._disposeIceAndDtlsTransports(sdpMLineIndex);\n          self.transceivers[sdpMLineIndex].iceGatherer =\n              self.transceivers[0].iceGatherer;\n          self.transceivers[sdpMLineIndex].iceTransport =\n              self.transceivers[0].iceTransport;\n          self.transceivers[sdpMLineIndex].dtlsTransport =\n              self.transceivers[0].dtlsTransport;\n          if (self.transceivers[sdpMLineIndex].rtpSender) {\n            self.transceivers[sdpMLineIndex].rtpSender.setTransport(\n                self.transceivers[0].dtlsTransport);\n          }\n          if (self.transceivers[sdpMLineIndex].rtpReceiver) {\n            self.transceivers[sdpMLineIndex].rtpReceiver.setTransport(\n                self.transceivers[0].dtlsTransport);\n          }\n        }\n        transceiver = self.transceivers[sdpMLineIndex];\n        iceGatherer = transceiver.iceGatherer;\n        iceTransport = transceiver.iceTransport;\n        dtlsTransport = transceiver.dtlsTransport;\n        rtpSender = transceiver.rtpSender;\n        rtpReceiver = transceiver.rtpReceiver;\n        sendEncodingParameters = transceiver.sendEncodingParameters;\n        localCapabilities = transceiver.localCapabilities;\n\n        self.transceivers[sdpMLineIndex].recvEncodingParameters =\n            recvEncodingParameters;\n        self.transceivers[sdpMLineIndex].remoteCapabilities =\n            remoteCapabilities;\n        self.transceivers[sdpMLineIndex].rtcpParameters = rtcpParameters;\n\n        if ((isIceLite || isComplete) && cands.length) {\n          iceTransport.setRemoteCandidates(cands);\n        }\n        if (!usingBundle || sdpMLineIndex === 0) {\n          iceTransport.start(iceGatherer, remoteIceParameters,\n              'controlling');\n          dtlsTransport.start(remoteDtlsParameters);\n        }\n\n        self._transceive(transceiver,\n            direction === 'sendrecv' || direction === 'recvonly',\n            direction === 'sendrecv' || direction === 'sendonly');\n\n        if (rtpReceiver &&\n            (direction === 'sendrecv' || direction === 'sendonly')) {\n          track = rtpReceiver.track;\n          if (remoteMsid) {\n            if (!streams[remoteMsid.stream]) {\n              streams[remoteMsid.stream] = new MediaStream();\n            }\n            streams[remoteMsid.stream].addTrack(track);\n            receiverList.push([track, rtpReceiver, streams[remoteMsid.stream]]);\n          } else {\n            if (!streams.default) {\n              streams.default = new MediaStream();\n            }\n            streams.default.addTrack(track);\n            receiverList.push([track, rtpReceiver, streams.default]);\n          }\n        } else {\n          // FIXME: actually the receiver should be created later.\n          delete transceiver.rtpReceiver;\n        }\n      }\n    });\n    this.usingBundle = usingBundle;\n\n    this.remoteDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    switch (description.type) {\n      case 'offer':\n        this._updateSignalingState('have-remote-offer');\n        break;\n      case 'answer':\n        this._updateSignalingState('stable');\n        break;\n      default:\n        throw new TypeError('unsupported type \"' + description.type +\n            '\"');\n    }\n    Object.keys(streams).forEach(function(sid) {\n      var stream = streams[sid];\n      if (stream.getTracks().length) {\n        self.remoteStreams.push(stream);\n        var event = new Event('addstream');\n        event.stream = stream;\n        self.dispatchEvent(event);\n        if (self.onaddstream !== null) {\n          window.setTimeout(function() {\n            self.onaddstream(event);\n          }, 0);\n        }\n\n        receiverList.forEach(function(item) {\n          var track = item[0];\n          var receiver = item[1];\n          if (stream.id !== item[2].id) {\n            return;\n          }\n          var trackEvent = new Event('track');\n          trackEvent.track = track;\n          trackEvent.receiver = receiver;\n          trackEvent.streams = [stream];\n          self.dispatchEvent(trackEvent);\n          if (self.ontrack !== null) {\n            window.setTimeout(function() {\n              self.ontrack(trackEvent);\n            }, 0);\n          }\n        });\n      }\n    });\n    if (arguments.length > 1 && typeof arguments[1] === 'function') {\n      window.setTimeout(arguments[1], 0);\n    }\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.close = function() {\n    this.transceivers.forEach(function(transceiver) {\n      /* not yet\n      if (transceiver.iceGatherer) {\n        transceiver.iceGatherer.close();\n      }\n      */\n      if (transceiver.iceTransport) {\n        transceiver.iceTransport.stop();\n      }\n      if (transceiver.dtlsTransport) {\n        transceiver.dtlsTransport.stop();\n      }\n      if (transceiver.rtpSender) {\n        transceiver.rtpSender.stop();\n      }\n      if (transceiver.rtpReceiver) {\n        transceiver.rtpReceiver.stop();\n      }\n    });\n    // FIXME: clean up tracks, local streams, remote streams, etc\n    this._updateSignalingState('closed');\n  };\n\n  // Update the signaling state.\n  RTCPeerConnection.prototype._updateSignalingState = function(newState) {\n    this.signalingState = newState;\n    var event = new Event('signalingstatechange');\n    this.dispatchEvent(event);\n    if (this.onsignalingstatechange !== null) {\n      this.onsignalingstatechange(event);\n    }\n  };\n\n  // Determine whether to fire the negotiationneeded event.\n  RTCPeerConnection.prototype._maybeFireNegotiationNeeded = function() {\n    // Fire away (for now).\n    var event = new Event('negotiationneeded');\n    this.dispatchEvent(event);\n    if (this.onnegotiationneeded !== null) {\n      this.onnegotiationneeded(event);\n    }\n  };\n\n  // Update the connection state.\n  RTCPeerConnection.prototype._updateConnectionState = function() {\n    var self = this;\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      connecting: 0,\n      checking: 0,\n      connected: 0,\n      completed: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function(transceiver) {\n      states[transceiver.iceTransport.state]++;\n      states[transceiver.dtlsTransport.state]++;\n    });\n    // ICETransport.completed and connected are the same for this purpose.\n    states.connected += states.completed;\n\n    newState = 'new';\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.connecting > 0 || states.checking > 0) {\n      newState = 'connecting';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0 || states.completed > 0) {\n      newState = 'connected';\n    }\n\n    if (newState !== self.iceConnectionState) {\n      self.iceConnectionState = newState;\n      var event = new Event('iceconnectionstatechange');\n      this.dispatchEvent(event);\n      if (this.oniceconnectionstatechange !== null) {\n        this.oniceconnectionstatechange(event);\n      }\n    }\n  };\n\n  RTCPeerConnection.prototype.createOffer = function() {\n    var self = this;\n    if (this._pendingOffer) {\n      throw new Error('createOffer called while there is a pending offer.');\n    }\n    var offerOptions;\n    if (arguments.length === 1 && typeof arguments[0] !== 'function') {\n      offerOptions = arguments[0];\n    } else if (arguments.length === 3) {\n      offerOptions = arguments[2];\n    }\n\n    var tracks = [];\n    var numAudioTracks = 0;\n    var numVideoTracks = 0;\n    // Default to sendrecv.\n    if (this.localStreams.length) {\n      numAudioTracks = this.localStreams.reduce(function(numTracks, stream) {\n        return numTracks + stream.getAudioTracks().length;\n      }, 0);\n      numVideoTracks = this.localStreams.reduce(function(numTracks, stream) {\n        return numTracks + stream.getVideoTracks().length;\n      }, 0);\n    }\n    // Determine number of audio and video tracks we need to send/recv.\n    if (offerOptions) {\n      // Reject Chrome legacy constraints.\n      if (offerOptions.mandatory || offerOptions.optional) {\n        throw new TypeError(\n            'Legacy mandatory/optional constraints not supported.');\n      }\n      if (offerOptions.offerToReceiveAudio !== undefined) {\n        if (offerOptions.offerToReceiveAudio === true) {\n          numAudioTracks = 1;\n        } else if (offerOptions.offerToReceiveAudio === false) {\n          numAudioTracks = 0;\n        } else {\n          numAudioTracks = offerOptions.offerToReceiveAudio;\n        }\n      }\n      if (offerOptions.offerToReceiveVideo !== undefined) {\n        if (offerOptions.offerToReceiveVideo === true) {\n          numVideoTracks = 1;\n        } else if (offerOptions.offerToReceiveVideo === false) {\n          numVideoTracks = 0;\n        } else {\n          numVideoTracks = offerOptions.offerToReceiveVideo;\n        }\n      }\n    }\n\n    // Push local streams.\n    this.localStreams.forEach(function(localStream) {\n      localStream.getTracks().forEach(function(track) {\n        tracks.push({\n          kind: track.kind,\n          track: track,\n          stream: localStream,\n          wantReceive: track.kind === 'audio' ?\n              numAudioTracks > 0 : numVideoTracks > 0\n        });\n        if (track.kind === 'audio') {\n          numAudioTracks--;\n        } else if (track.kind === 'video') {\n          numVideoTracks--;\n        }\n      });\n    });\n\n    // Create M-lines for recvonly streams.\n    while (numAudioTracks > 0 || numVideoTracks > 0) {\n      if (numAudioTracks > 0) {\n        tracks.push({\n          kind: 'audio',\n          wantReceive: true\n        });\n        numAudioTracks--;\n      }\n      if (numVideoTracks > 0) {\n        tracks.push({\n          kind: 'video',\n          wantReceive: true\n        });\n        numVideoTracks--;\n      }\n    }\n    // reorder tracks\n    tracks = sortTracks(tracks);\n\n    var sdp = SDPUtils.writeSessionBoilerplate();\n    var transceivers = [];\n    tracks.forEach(function(mline, sdpMLineIndex) {\n      // For each track, create an ice gatherer, ice transport,\n      // dtls transport, potentially rtpsender and rtpreceiver.\n      var track = mline.track;\n      var kind = mline.kind;\n      var mid = SDPUtils.generateIdentifier();\n\n      var transports = self.usingBundle && sdpMLineIndex > 0 ? {\n        iceGatherer: transceivers[0].iceGatherer,\n        iceTransport: transceivers[0].iceTransport,\n        dtlsTransport: transceivers[0].dtlsTransport\n      } : self._createIceAndDtlsTransports(mid, sdpMLineIndex);\n\n      var localCapabilities = RTCRtpSender.getCapabilities(kind);\n      // filter RTX until additional stuff needed for RTX is implemented\n      // in adapter.js\n      if (edgeVersion < 15019) {\n        localCapabilities.codecs = localCapabilities.codecs.filter(\n            function(codec) {\n              return codec.name !== 'rtx';\n            });\n      }\n      localCapabilities.codecs.forEach(function(codec) {\n        // work around https://bugs.chromium.org/p/webrtc/issues/detail?id=6552\n        // by adding level-asymmetry-allowed=1\n        if (codec.name === 'H264' &&\n            codec.parameters['level-asymmetry-allowed'] === undefined) {\n          codec.parameters['level-asymmetry-allowed'] = '1';\n        }\n      });\n\n      var rtpSender;\n      var rtpReceiver;\n\n      // generate an ssrc now, to be used later in rtpSender.send\n      var sendEncodingParameters = [{\n        ssrc: (2 * sdpMLineIndex + 1) * 1001\n      }];\n      if (track) {\n        // add RTX\n        if (edgeVersion >= 15019 && kind === 'video') {\n          sendEncodingParameters[0].rtx = {\n            ssrc: (2 * sdpMLineIndex + 1) * 1001 + 1\n          };\n        }\n        rtpSender = new RTCRtpSender(track, transports.dtlsTransport);\n      }\n\n      if (mline.wantReceive) {\n        rtpReceiver = new RTCRtpReceiver(transports.dtlsTransport, kind);\n      }\n\n      transceivers[sdpMLineIndex] = {\n        iceGatherer: transports.iceGatherer,\n        iceTransport: transports.iceTransport,\n        dtlsTransport: transports.dtlsTransport,\n        localCapabilities: localCapabilities,\n        remoteCapabilities: null,\n        rtpSender: rtpSender,\n        rtpReceiver: rtpReceiver,\n        kind: kind,\n        mid: mid,\n        sendEncodingParameters: sendEncodingParameters,\n        recvEncodingParameters: null\n      };\n    });\n\n    // always offer BUNDLE and dispose on return if not supported.\n    if (this._config.bundlePolicy !== 'max-compat') {\n      sdp += 'a=group:BUNDLE ' + transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    sdp += 'a=ice-options:trickle\\r\\n';\n\n    tracks.forEach(function(mline, sdpMLineIndex) {\n      var transceiver = transceivers[sdpMLineIndex];\n      sdp += SDPUtils.writeMediaSection(transceiver,\n          transceiver.localCapabilities, 'offer', mline.stream);\n      sdp += 'a=rtcp-rsize\\r\\n';\n    });\n\n    this._pendingOffer = transceivers;\n    var desc = new RTCSessionDescription({\n      type: 'offer',\n      sdp: sdp\n    });\n    if (arguments.length && typeof arguments[0] === 'function') {\n      window.setTimeout(arguments[0], 0, desc);\n    }\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.createAnswer = function() {\n    var self = this;\n\n    var sdp = SDPUtils.writeSessionBoilerplate();\n    if (this.usingBundle) {\n      sdp += 'a=group:BUNDLE ' + this.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    this.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      if (transceiver.isDatachannel) {\n        sdp += 'm=application 0 DTLS/SCTP 5000\\r\\n' +\n            'c=IN IP4 0.0.0.0\\r\\n' +\n            'a=mid:' + transceiver.mid + '\\r\\n';\n        return;\n      }\n\n      // FIXME: look at direction.\n      if (self.localStreams.length > 0 &&\n          self.localStreams[0].getTracks().length >= sdpMLineIndex) {\n        var localTrack;\n        if (transceiver.kind === 'audio') {\n          localTrack = self.localStreams[0].getAudioTracks()[0];\n        } else if (transceiver.kind === 'video') {\n          localTrack = self.localStreams[0].getVideoTracks()[0];\n        }\n        if (localTrack) {\n          // add RTX\n          if (edgeVersion >= 15019 && transceiver.kind === 'video') {\n            transceiver.sendEncodingParameters[0].rtx = {\n              ssrc: (2 * sdpMLineIndex + 2) * 1001 + 1\n            };\n          }\n          transceiver.rtpSender = new RTCRtpSender(localTrack,\n              transceiver.dtlsTransport);\n        }\n      }\n\n      // Calculate intersection of capabilities.\n      var commonCapabilities = self._getCommonCapabilities(\n          transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n\n      var hasRtx = commonCapabilities.codecs.filter(function(c) {\n        return c.name.toLowerCase() === 'rtx';\n      }).length;\n      if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n        delete transceiver.sendEncodingParameters[0].rtx;\n      }\n\n      sdp += SDPUtils.writeMediaSection(transceiver, commonCapabilities,\n          'answer', self.localStreams[0]);\n      if (transceiver.rtcpParameters &&\n          transceiver.rtcpParameters.reducedSize) {\n        sdp += 'a=rtcp-rsize\\r\\n';\n      }\n    });\n\n    var desc = new RTCSessionDescription({\n      type: 'answer',\n      sdp: sdp\n    });\n    if (arguments.length && typeof arguments[0] === 'function') {\n      window.setTimeout(arguments[0], 0, desc);\n    }\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.addIceCandidate = function(candidate) {\n    if (!candidate) {\n      for (var j = 0; j < this.transceivers.length; j++) {\n        this.transceivers[j].iceTransport.addRemoteCandidate({});\n        if (this.usingBundle) {\n          return Promise.resolve();\n        }\n      }\n    } else {\n      var mLineIndex = candidate.sdpMLineIndex;\n      if (candidate.sdpMid) {\n        for (var i = 0; i < this.transceivers.length; i++) {\n          if (this.transceivers[i].mid === candidate.sdpMid) {\n            mLineIndex = i;\n            break;\n          }\n        }\n      }\n      var transceiver = this.transceivers[mLineIndex];\n      if (transceiver) {\n        var cand = Object.keys(candidate.candidate).length > 0 ?\n            SDPUtils.parseCandidate(candidate.candidate) : {};\n        // Ignore Chrome's invalid candidates since Edge does not like them.\n        if (cand.protocol === 'tcp' && (cand.port === 0 || cand.port === 9)) {\n          return Promise.resolve();\n        }\n        // Ignore RTCP candidates, we assume RTCP-MUX.\n        if (cand.component !== '1') {\n          return Promise.resolve();\n        }\n        transceiver.iceTransport.addRemoteCandidate(cand);\n\n        // update the remoteDescription.\n        var sections = SDPUtils.splitSections(this.remoteDescription.sdp);\n        sections[mLineIndex + 1] += (cand.type ? candidate.candidate.trim()\n            : 'a=end-of-candidates') + '\\r\\n';\n        this.remoteDescription.sdp = sections.join('');\n      }\n    }\n    if (arguments.length > 1 && typeof arguments[1] === 'function') {\n      window.setTimeout(arguments[1], 0);\n    }\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.getStats = function() {\n    var promises = [];\n    this.transceivers.forEach(function(transceiver) {\n      ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport',\n          'dtlsTransport'].forEach(function(method) {\n            if (transceiver[method]) {\n              promises.push(transceiver[method].getStats());\n            }\n          });\n    });\n    var cb = arguments.length > 1 && typeof arguments[1] === 'function' &&\n        arguments[1];\n    var fixStatsType = function(stat) {\n      return {\n        inboundrtp: 'inbound-rtp',\n        outboundrtp: 'outbound-rtp',\n        candidatepair: 'candidate-pair',\n        localcandidate: 'local-candidate',\n        remotecandidate: 'remote-candidate'\n      }[stat.type] || stat.type;\n    };\n    return new Promise(function(resolve) {\n      // shim getStats with maplike support\n      var results = new Map();\n      Promise.all(promises).then(function(res) {\n        res.forEach(function(result) {\n          Object.keys(result).forEach(function(id) {\n            result[id].type = fixStatsType(result[id]);\n            results.set(id, result[id]);\n          });\n        });\n        if (cb) {\n          window.setTimeout(cb, 0, results);\n        }\n        resolve(results);\n      });\n    });\n  };\n  return RTCPeerConnection;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/webrtc-adapter/src/js/edge/rtcpeerconnection_shim.js","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar browserDetails = require('../utils').browserDetails;\n\nvar firefoxShim = {\n  shimOnTrack: function() {\n    if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n        window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n        get: function() {\n          return this._ontrack;\n        },\n        set: function(f) {\n          if (this._ontrack) {\n            this.removeEventListener('track', this._ontrack);\n            this.removeEventListener('addstream', this._ontrackpoly);\n          }\n          this.addEventListener('track', this._ontrack = f);\n          this.addEventListener('addstream', this._ontrackpoly = function(e) {\n            e.stream.getTracks().forEach(function(track) {\n              var event = new Event('track');\n              event.track = track;\n              event.receiver = {track: track};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            }.bind(this));\n          }.bind(this));\n        }\n      });\n    }\n  },\n\n  shimSourceObject: function() {\n    // Firefox has supported mozSrcObject since FF22, unprefixed in 42.\n    if (typeof window === 'object') {\n      if (window.HTMLMediaElement &&\n        !('srcObject' in window.HTMLMediaElement.prototype)) {\n        // Shim the srcObject property, once, when HTMLMediaElement is found.\n        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n          get: function() {\n            return this.mozSrcObject;\n          },\n          set: function(stream) {\n            this.mozSrcObject = stream;\n          }\n        });\n      }\n    }\n  },\n\n  shimPeerConnection: function() {\n    if (typeof window !== 'object' || !(window.RTCPeerConnection ||\n        window.mozRTCPeerConnection)) {\n      return; // probably media.peerconnection.enabled=false in about:config\n    }\n    // The RTCPeerConnection object.\n    if (!window.RTCPeerConnection) {\n      window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n        if (browserDetails.version < 38) {\n          // .urls is not supported in FF < 38.\n          // create RTCIceServers with a single url.\n          if (pcConfig && pcConfig.iceServers) {\n            var newIceServers = [];\n            for (var i = 0; i < pcConfig.iceServers.length; i++) {\n              var server = pcConfig.iceServers[i];\n              if (server.hasOwnProperty('urls')) {\n                for (var j = 0; j < server.urls.length; j++) {\n                  var newServer = {\n                    url: server.urls[j]\n                  };\n                  if (server.urls[j].indexOf('turn') === 0) {\n                    newServer.username = server.username;\n                    newServer.credential = server.credential;\n                  }\n                  newIceServers.push(newServer);\n                }\n              } else {\n                newIceServers.push(pcConfig.iceServers[i]);\n              }\n            }\n            pcConfig.iceServers = newIceServers;\n          }\n        }\n        return new mozRTCPeerConnection(pcConfig, pcConstraints);\n      };\n      window.RTCPeerConnection.prototype = mozRTCPeerConnection.prototype;\n\n      // wrap static methods. Currently just generateCertificate.\n      if (mozRTCPeerConnection.generateCertificate) {\n        Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n          get: function() {\n            return mozRTCPeerConnection.generateCertificate;\n          }\n        });\n      }\n\n      window.RTCSessionDescription = mozRTCSessionDescription;\n      window.RTCIceCandidate = mozRTCIceCandidate;\n    }\n\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          var nativeMethod = RTCPeerConnection.prototype[method];\n          RTCPeerConnection.prototype[method] = function() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                RTCIceCandidate : RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          };\n        });\n\n    // support for addIceCandidate(null or undefined)\n    var nativeAddIceCandidate =\n        RTCPeerConnection.prototype.addIceCandidate;\n    RTCPeerConnection.prototype.addIceCandidate = function() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n\n    // shim getStats with maplike support\n    var makeMapStats = function(stats) {\n      var map = new Map();\n      Object.keys(stats).forEach(function(key) {\n        map.set(key, stats[key]);\n        map[key] = stats[key];\n      });\n      return map;\n    };\n\n    var modernStatsTypes = {\n      inboundrtp: 'inbound-rtp',\n      outboundrtp: 'outbound-rtp',\n      candidatepair: 'candidate-pair',\n      localcandidate: 'local-candidate',\n      remotecandidate: 'remote-candidate'\n    };\n\n    var nativeGetStats = RTCPeerConnection.prototype.getStats;\n    RTCPeerConnection.prototype.getStats = function(selector, onSucc, onErr) {\n      return nativeGetStats.apply(this, [selector || null])\n        .then(function(stats) {\n          if (browserDetails.version < 48) {\n            stats = makeMapStats(stats);\n          }\n          if (browserDetails.version < 53 && !onSucc) {\n            // Shim only promise getStats with spec-hyphens in type names\n            // Leave callback version alone; misc old uses of forEach before Map\n            try {\n              stats.forEach(function(stat) {\n                stat.type = modernStatsTypes[stat.type] || stat.type;\n              });\n            } catch (e) {\n              if (e.name !== 'TypeError') {\n                throw e;\n              }\n              // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n              stats.forEach(function(stat, i) {\n                stats.set(i, Object.assign({}, stat, {\n                  type: modernStatsTypes[stat.type] || stat.type\n                }));\n              });\n            }\n          }\n          return stats;\n        })\n        .then(onSucc, onErr);\n    };\n  }\n};\n\n// Expose public methods.\nmodule.exports = {\n  shimOnTrack: firefoxShim.shimOnTrack,\n  shimSourceObject: firefoxShim.shimSourceObject,\n  shimPeerConnection: firefoxShim.shimPeerConnection,\n  shimGetUserMedia: require('./getusermedia')\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/webrtc-adapter/src/js/firefox/firefox_shim.js","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar logging = require('../utils').log;\nvar browserDetails = require('../utils').browserDetails;\n\n// Expose public methods.\nmodule.exports = function() {\n  var shimError_ = function(e) {\n    return {\n      name: {\n        NotSupportedError: 'TypeError',\n        SecurityError: 'NotAllowedError',\n        PermissionDeniedError: 'NotAllowedError'\n      }[e.name] || e.name,\n      message: {\n        'The operation is insecure.': 'The request is not allowed by the ' +\n        'user agent or the platform in the current context.'\n      }[e.message] || e.message,\n      constraint: e.constraint,\n      toString: function() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  // getUserMedia constraints shim.\n  var getUserMedia_ = function(constraints, onSuccess, onError) {\n    var constraintsToFF37_ = function(c) {\n      if (typeof c !== 'object' || c.require) {\n        return c;\n      }\n      var require = [];\n      Object.keys(c).forEach(function(key) {\n        if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n          return;\n        }\n        var r = c[key] = (typeof c[key] === 'object') ?\n            c[key] : {ideal: c[key]};\n        if (r.min !== undefined ||\n            r.max !== undefined || r.exact !== undefined) {\n          require.push(key);\n        }\n        if (r.exact !== undefined) {\n          if (typeof r.exact === 'number') {\n            r. min = r.max = r.exact;\n          } else {\n            c[key] = r.exact;\n          }\n          delete r.exact;\n        }\n        if (r.ideal !== undefined) {\n          c.advanced = c.advanced || [];\n          var oc = {};\n          if (typeof r.ideal === 'number') {\n            oc[key] = {min: r.ideal, max: r.ideal};\n          } else {\n            oc[key] = r.ideal;\n          }\n          c.advanced.push(oc);\n          delete r.ideal;\n          if (!Object.keys(r).length) {\n            delete c[key];\n          }\n        }\n      });\n      if (require.length) {\n        c.require = require;\n      }\n      return c;\n    };\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (browserDetails.version < 38) {\n      logging('spec: ' + JSON.stringify(constraints));\n      if (constraints.audio) {\n        constraints.audio = constraintsToFF37_(constraints.audio);\n      }\n      if (constraints.video) {\n        constraints.video = constraintsToFF37_(constraints.video);\n      }\n      logging('ff37: ' + JSON.stringify(constraints));\n    }\n    return navigator.mozGetUserMedia(constraints, onSuccess, function(e) {\n      onError(shimError_(e));\n    });\n  };\n\n  // Returns the result of getUserMedia as a Promise.\n  var getUserMediaPromise_ = function(constraints) {\n    return new Promise(function(resolve, reject) {\n      getUserMedia_(constraints, resolve, reject);\n    });\n  };\n\n  // Shim for mediaDevices on older versions.\n  if (!navigator.mediaDevices) {\n    navigator.mediaDevices = {getUserMedia: getUserMediaPromise_,\n      addEventListener: function() { },\n      removeEventListener: function() { }\n    };\n  }\n  navigator.mediaDevices.enumerateDevices =\n      navigator.mediaDevices.enumerateDevices || function() {\n        return new Promise(function(resolve) {\n          var infos = [\n            {kind: 'audioinput', deviceId: 'default', label: '', groupId: ''},\n            {kind: 'videoinput', deviceId: 'default', label: '', groupId: ''}\n          ];\n          resolve(infos);\n        });\n      };\n\n  if (browserDetails.version < 41) {\n    // Work around http://bugzil.la/1169665\n    var orgEnumerateDevices =\n        navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);\n    navigator.mediaDevices.enumerateDevices = function() {\n      return orgEnumerateDevices().then(undefined, function(e) {\n        if (e.name === 'NotFoundError') {\n          return [];\n        }\n        throw e;\n      });\n    };\n  }\n  if (browserDetails.version < 49) {\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      return origGetUserMedia(c).then(function(stream) {\n        // Work around https://bugzil.la/802326\n        if (c.audio && !stream.getAudioTracks().length ||\n            c.video && !stream.getVideoTracks().length) {\n          stream.getTracks().forEach(function(track) {\n            track.stop();\n          });\n          throw new DOMException('The object can not be found here.',\n                                 'NotFoundError');\n        }\n        return stream;\n      }, function(e) {\n        return Promise.reject(shimError_(e));\n      });\n    };\n  }\n  navigator.getUserMedia = function(constraints, onSuccess, onError) {\n    if (browserDetails.version < 44) {\n      return getUserMedia_(constraints, onSuccess, onError);\n    }\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    console.warn('navigator.getUserMedia has been replaced by ' +\n                 'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/webrtc-adapter/src/js/firefox/getusermedia.js","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\nvar safariShim = {\n  // TODO: DrAlex, should be here, double check against LayoutTests\n\n  // TODO: once the back-end for the mac port is done, add.\n  // TODO: check for webkitGTK+\n  // shimPeerConnection: function() { },\n\n  shimOnAddStream: function() {\n    if (typeof window === 'object' && window.RTCPeerConnection &&\n        !('onaddstream' in window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n        get: function() {\n          return this._onaddstream;\n        },\n        set: function(f) {\n          if (this._onaddstream) {\n            this.removeEventListener('addstream', this._onaddstream);\n            this.removeEventListener('track', this._onaddstreampoly);\n          }\n          this.addEventListener('addstream', this._onaddstream = f);\n          this.addEventListener('track', this._onaddstreampoly = function(e) {\n            var stream = e.streams[0];\n            if (!this._streams) {\n              this._streams = [];\n            }\n            if (this._streams.indexOf(stream) >= 0) {\n              return;\n            }\n            this._streams.push(stream);\n            var event = new Event('addstream');\n            event.stream = e.streams[0];\n            this.dispatchEvent(event);\n          }.bind(this));\n        }\n      });\n    }\n  },\n\n  shimGetUserMedia: function() {\n    if (!navigator.getUserMedia) {\n      if (navigator.webkitGetUserMedia) {\n        navigator.getUserMedia = navigator.webkitGetUserMedia.bind(navigator);\n      } else if (navigator.mediaDevices &&\n          navigator.mediaDevices.getUserMedia) {\n        navigator.getUserMedia = function(constraints, cb, errcb) {\n          navigator.mediaDevices.getUserMedia(constraints)\n          .then(cb, errcb);\n        }.bind(navigator);\n      }\n    }\n  }\n};\n\n// Expose public methods.\nmodule.exports = {\n  shimOnAddStream: safariShim.shimOnAddStream,\n  shimGetUserMedia: safariShim.shimGetUserMedia\n  // TODO\n  // shimPeerConnection: safariShim.shimPeerConnection\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/webrtc-adapter/src/js/safari/safari_shim.js","/*\n *\n *\tThe CeCILL-B License\n *\t\n *\tCopyright (c) {{ projectYear }}/{{ projectYearNow }} {{authorName}} | {{authorEmail}}\n *\n *\n *\tThis software is a computer program whose purpose is to [describe\n *\tfunctionalities and technical features of your software].\n *\n *\tThis software is governed by the CeCILL-B license under French law and\n *\tabiding by the rules of distribution of free software.  You can  use, \n *\tmodify and/ or redistribute the software under the terms of the CeCILL-B\n *\tlicense as circulated by CEA, CNRS and INRIA at the following URL\n *\t\"http://www.cecill.info\". \n *\n *\tAs a counterpart to the access to the source code and  rights to copy,\n *\tmodify and redistribute granted by the license, users are provided only\n *\twith a limited warranty  and the software's author,  the holder of the\n *\teconomic rights,  and the successive licensors  have only  limited\n *\tliability. \n *\n *\tIn this respect, the user's attention is drawn to the risks associated\n *\twith loading,  using,  modifying and/or developing or reproducing the\n *\tsoftware by the user in light of its specific status of free software,\n *\tthat may mean  that it is complicated to manipulate,  and  that  also\n *\ttherefore means  that it is reserved for developers  and  experienced\n *\tprofessionals having in-depth computer knowledge. Users are therefore\n *\tencouraged to load and test the software's suitability as regards their\n *\trequirements in conditions enabling the security of their systems and/or \n *\tdata to be ensured and,  more generally, to use and operate it in the \n *\tsame conditions as regards security. \n *\n *\tThe fact that you are presently reading this means that you have had\n *\tknowledge of the CeCILL-B license and that you accept its terms.\n *\n */\n\n// CORE\nconst stage = require('./core/stage.es6')();\nrequire('./core/notificationsCenter.es6')(stage);\nrequire('./syslog/syslog.es6')(stage);\nrequire('./kernel/service.es6')(stage);\nrequire('./kernel/container.es6')(stage);\n\n\n// TOOLS\nrequire('./tools/xml.js')(stage);\nrequire('./structs/hash/hash.es6')(stage);\nrequire('./structs/queue/queue.es6')(stage);\n\n// CRYPTO\nrequire('./crypto/base64.js')(stage);\nrequire('./crypto/md5.js')(stage);\n\n// IO\nrequire('./io/io.es6')(stage);\nrequire('./io/authentication/mechanisms/digest-md5/digestMd5.es6')(stage);\nrequire('./io/authentication/sasl/sasl.es6')(stage);\n\n// IO TRANSPORT\nrequire('./io/transports/socket.es6')(stage);\nrequire('./io/transports/websockets/websocket.es6')(stage);\nrequire('./io/transports/in/poll.es6')(stage);\nrequire('./io/transports/in/longPoll.es6')(stage);\n\n// IO PROTOCOLS\nrequire('./io/protocols/bayeux/bayeux.es6')(stage);\nrequire('./io/protocols/sip/sdp.es6')(stage);\nrequire('./io/protocols/sip/sip.es6')(stage);\n\n// IO REALTIME\nrequire('./io/realtime/realtime.es6')(stage);\n\n// MEDIAS\nrequire('./media/media.es6')(stage);\nrequire('./media/webrtc/webrtc.es6')(stage);\n\n\n// KERNEL STAGE ( nodefony )\nrequire('./kernel/kernel.es6')(stage);\nrequire('./kernel/appKernel.es6')(stage);\nrequire('./kernel/autoload.es6')(stage);\nrequire('./kernel/controller.es6')(stage);\nrequire('./kernel/locationService.es6')(stage);\nrequire('./kernel/module.es6')(stage);\nrequire('./kernel/routerService.es6')(stage);\nrequire('./kernel/translationService.es6')(stage);\n\n// EXPORT\nmodule.exports = stage ;\n\n\n\n// WEBPACK FOOTER //\n// ./src/core.js","/*!\n * jQuery JavaScript Library v3.2.1\n * https://jquery.com/\n *\n * Includes Sizzle.js\n * https://sizzlejs.com/\n *\n * Copyright JS Foundation and other contributors\n * Released under the MIT license\n * https://jquery.org/license\n *\n * Date: 2017-03-20T18:59Z\n */\n( function( global, factory ) {\n\n\t\"use strict\";\n\n\tif ( typeof module === \"object\" && typeof module.exports === \"object\" ) {\n\n\t\t// For CommonJS and CommonJS-like environments where a proper `window`\n\t\t// is present, execute the factory and get jQuery.\n\t\t// For environments that do not have a `window` with a `document`\n\t\t// (such as Node.js), expose a factory as module.exports.\n\t\t// This accentuates the need for the creation of a real `window`.\n\t\t// e.g. var jQuery = require(\"jquery\")(window);\n\t\t// See ticket #14549 for more info.\n\t\tmodule.exports = global.document ?\n\t\t\tfactory( global, true ) :\n\t\t\tfunction( w ) {\n\t\t\t\tif ( !w.document ) {\n\t\t\t\t\tthrow new Error( \"jQuery requires a window with a document\" );\n\t\t\t\t}\n\t\t\t\treturn factory( w );\n\t\t\t};\n\t} else {\n\t\tfactory( global );\n\t}\n\n// Pass this if window is not defined yet\n} )( typeof window !== \"undefined\" ? window : this, function( window, noGlobal ) {\n\n// Edge <= 12 - 13+, Firefox <=18 - 45+, IE 10 - 11, Safari 5.1 - 9+, iOS 6 - 9.1\n// throw exceptions when non-strict code (e.g., ASP.NET 4.5) accesses strict mode\n// arguments.callee.caller (trac-13335). But as of jQuery 3.0 (2016), strict mode should be common\n// enough that all such attempts are guarded in a try block.\n\"use strict\";\n\nvar arr = [];\n\nvar document = window.document;\n\nvar getProto = Object.getPrototypeOf;\n\nvar slice = arr.slice;\n\nvar concat = arr.concat;\n\nvar push = arr.push;\n\nvar indexOf = arr.indexOf;\n\nvar class2type = {};\n\nvar toString = class2type.toString;\n\nvar hasOwn = class2type.hasOwnProperty;\n\nvar fnToString = hasOwn.toString;\n\nvar ObjectFunctionString = fnToString.call( Object );\n\nvar support = {};\n\n\n\n\tfunction DOMEval( code, doc ) {\n\t\tdoc = doc || document;\n\n\t\tvar script = doc.createElement( \"script\" );\n\n\t\tscript.text = code;\n\t\tdoc.head.appendChild( script ).parentNode.removeChild( script );\n\t}\n/* global Symbol */\n// Defining this global in .eslintrc.json would create a danger of using the global\n// unguarded in another place, it seems safer to define global only for this module\n\n\n\nvar\n\tversion = \"3.2.1\",\n\n\t// Define a local copy of jQuery\n\tjQuery = function( selector, context ) {\n\n\t\t// The jQuery object is actually just the init constructor 'enhanced'\n\t\t// Need init if jQuery is called (just allow error to be thrown if not included)\n\t\treturn new jQuery.fn.init( selector, context );\n\t},\n\n\t// Support: Android <=4.0 only\n\t// Make sure we trim BOM and NBSP\n\trtrim = /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,\n\n\t// Matches dashed string for camelizing\n\trmsPrefix = /^-ms-/,\n\trdashAlpha = /-([a-z])/g,\n\n\t// Used by jQuery.camelCase as callback to replace()\n\tfcamelCase = function( all, letter ) {\n\t\treturn letter.toUpperCase();\n\t};\n\njQuery.fn = jQuery.prototype = {\n\n\t// The current version of jQuery being used\n\tjquery: version,\n\n\tconstructor: jQuery,\n\n\t// The default length of a jQuery object is 0\n\tlength: 0,\n\n\ttoArray: function() {\n\t\treturn slice.call( this );\n\t},\n\n\t// Get the Nth element in the matched element set OR\n\t// Get the whole matched element set as a clean array\n\tget: function( num ) {\n\n\t\t// Return all the elements in a clean array\n\t\tif ( num == null ) {\n\t\t\treturn slice.call( this );\n\t\t}\n\n\t\t// Return just the one element from the set\n\t\treturn num < 0 ? this[ num + this.length ] : this[ num ];\n\t},\n\n\t// Take an array of elements and push it onto the stack\n\t// (returning the new matched element set)\n\tpushStack: function( elems ) {\n\n\t\t// Build a new jQuery matched element set\n\t\tvar ret = jQuery.merge( this.constructor(), elems );\n\n\t\t// Add the old object onto the stack (as a reference)\n\t\tret.prevObject = this;\n\n\t\t// Return the newly-formed element set\n\t\treturn ret;\n\t},\n\n\t// Execute a callback for every element in the matched set.\n\teach: function( callback ) {\n\t\treturn jQuery.each( this, callback );\n\t},\n\n\tmap: function( callback ) {\n\t\treturn this.pushStack( jQuery.map( this, function( elem, i ) {\n\t\t\treturn callback.call( elem, i, elem );\n\t\t} ) );\n\t},\n\n\tslice: function() {\n\t\treturn this.pushStack( slice.apply( this, arguments ) );\n\t},\n\n\tfirst: function() {\n\t\treturn this.eq( 0 );\n\t},\n\n\tlast: function() {\n\t\treturn this.eq( -1 );\n\t},\n\n\teq: function( i ) {\n\t\tvar len = this.length,\n\t\t\tj = +i + ( i < 0 ? len : 0 );\n\t\treturn this.pushStack( j >= 0 && j < len ? [ this[ j ] ] : [] );\n\t},\n\n\tend: function() {\n\t\treturn this.prevObject || this.constructor();\n\t},\n\n\t// For internal use only.\n\t// Behaves like an Array's method, not like a jQuery method.\n\tpush: push,\n\tsort: arr.sort,\n\tsplice: arr.splice\n};\n\njQuery.extend = jQuery.fn.extend = function() {\n\tvar options, name, src, copy, copyIsArray, clone,\n\t\ttarget = arguments[ 0 ] || {},\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif ( typeof target === \"boolean\" ) {\n\t\tdeep = target;\n\n\t\t// Skip the boolean and the target\n\t\ttarget = arguments[ i ] || {};\n\t\ti++;\n\t}\n\n\t// Handle case when target is a string or something (possible in deep copy)\n\tif ( typeof target !== \"object\" && !jQuery.isFunction( target ) ) {\n\t\ttarget = {};\n\t}\n\n\t// Extend jQuery itself if only one argument is passed\n\tif ( i === length ) {\n\t\ttarget = this;\n\t\ti--;\n\t}\n\n\tfor ( ; i < length; i++ ) {\n\n\t\t// Only deal with non-null/undefined values\n\t\tif ( ( options = arguments[ i ] ) != null ) {\n\n\t\t\t// Extend the base object\n\t\t\tfor ( name in options ) {\n\t\t\t\tsrc = target[ name ];\n\t\t\t\tcopy = options[ name ];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif ( target === copy ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\tif ( deep && copy && ( jQuery.isPlainObject( copy ) ||\n\t\t\t\t\t( copyIsArray = Array.isArray( copy ) ) ) ) {\n\n\t\t\t\t\tif ( copyIsArray ) {\n\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\tclone = src && Array.isArray( src ) ? src : [];\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone = src && jQuery.isPlainObject( src ) ? src : {};\n\t\t\t\t\t}\n\n\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\ttarget[ name ] = jQuery.extend( deep, clone, copy );\n\n\t\t\t\t// Don't bring in undefined values\n\t\t\t\t} else if ( copy !== undefined ) {\n\t\t\t\t\ttarget[ name ] = copy;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\njQuery.extend( {\n\n\t// Unique for each copy of jQuery on the page\n\texpando: \"jQuery\" + ( version + Math.random() ).replace( /\\D/g, \"\" ),\n\n\t// Assume jQuery is ready without the ready module\n\tisReady: true,\n\n\terror: function( msg ) {\n\t\tthrow new Error( msg );\n\t},\n\n\tnoop: function() {},\n\n\tisFunction: function( obj ) {\n\t\treturn jQuery.type( obj ) === \"function\";\n\t},\n\n\tisWindow: function( obj ) {\n\t\treturn obj != null && obj === obj.window;\n\t},\n\n\tisNumeric: function( obj ) {\n\n\t\t// As of jQuery 3.0, isNumeric is limited to\n\t\t// strings and numbers (primitives or objects)\n\t\t// that can be coerced to finite numbers (gh-2662)\n\t\tvar type = jQuery.type( obj );\n\t\treturn ( type === \"number\" || type === \"string\" ) &&\n\n\t\t\t// parseFloat NaNs numeric-cast false positives (\"\")\n\t\t\t// ...but misinterprets leading-number strings, particularly hex literals (\"0x...\")\n\t\t\t// subtraction forces infinities to NaN\n\t\t\t!isNaN( obj - parseFloat( obj ) );\n\t},\n\n\tisPlainObject: function( obj ) {\n\t\tvar proto, Ctor;\n\n\t\t// Detect obvious negatives\n\t\t// Use toString instead of jQuery.type to catch host objects\n\t\tif ( !obj || toString.call( obj ) !== \"[object Object]\" ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tproto = getProto( obj );\n\n\t\t// Objects with no prototype (e.g., `Object.create( null )`) are plain\n\t\tif ( !proto ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Objects with prototype are plain iff they were constructed by a global Object function\n\t\tCtor = hasOwn.call( proto, \"constructor\" ) && proto.constructor;\n\t\treturn typeof Ctor === \"function\" && fnToString.call( Ctor ) === ObjectFunctionString;\n\t},\n\n\tisEmptyObject: function( obj ) {\n\n\t\t/* eslint-disable no-unused-vars */\n\t\t// See https://github.com/eslint/eslint/issues/6125\n\t\tvar name;\n\n\t\tfor ( name in obj ) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\n\ttype: function( obj ) {\n\t\tif ( obj == null ) {\n\t\t\treturn obj + \"\";\n\t\t}\n\n\t\t// Support: Android <=2.3 only (functionish RegExp)\n\t\treturn typeof obj === \"object\" || typeof obj === \"function\" ?\n\t\t\tclass2type[ toString.call( obj ) ] || \"object\" :\n\t\t\ttypeof obj;\n\t},\n\n\t// Evaluates a script in a global context\n\tglobalEval: function( code ) {\n\t\tDOMEval( code );\n\t},\n\n\t// Convert dashed to camelCase; used by the css and data modules\n\t// Support: IE <=9 - 11, Edge 12 - 13\n\t// Microsoft forgot to hump their vendor prefix (#9572)\n\tcamelCase: function( string ) {\n\t\treturn string.replace( rmsPrefix, \"ms-\" ).replace( rdashAlpha, fcamelCase );\n\t},\n\n\teach: function( obj, callback ) {\n\t\tvar length, i = 0;\n\n\t\tif ( isArrayLike( obj ) ) {\n\t\t\tlength = obj.length;\n\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\tif ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor ( i in obj ) {\n\t\t\t\tif ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn obj;\n\t},\n\n\t// Support: Android <=4.0 only\n\ttrim: function( text ) {\n\t\treturn text == null ?\n\t\t\t\"\" :\n\t\t\t( text + \"\" ).replace( rtrim, \"\" );\n\t},\n\n\t// results is for internal usage only\n\tmakeArray: function( arr, results ) {\n\t\tvar ret = results || [];\n\n\t\tif ( arr != null ) {\n\t\t\tif ( isArrayLike( Object( arr ) ) ) {\n\t\t\t\tjQuery.merge( ret,\n\t\t\t\t\ttypeof arr === \"string\" ?\n\t\t\t\t\t[ arr ] : arr\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tpush.call( ret, arr );\n\t\t\t}\n\t\t}\n\n\t\treturn ret;\n\t},\n\n\tinArray: function( elem, arr, i ) {\n\t\treturn arr == null ? -1 : indexOf.call( arr, elem, i );\n\t},\n\n\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t// push.apply(_, arraylike) throws on ancient WebKit\n\tmerge: function( first, second ) {\n\t\tvar len = +second.length,\n\t\t\tj = 0,\n\t\t\ti = first.length;\n\n\t\tfor ( ; j < len; j++ ) {\n\t\t\tfirst[ i++ ] = second[ j ];\n\t\t}\n\n\t\tfirst.length = i;\n\n\t\treturn first;\n\t},\n\n\tgrep: function( elems, callback, invert ) {\n\t\tvar callbackInverse,\n\t\t\tmatches = [],\n\t\t\ti = 0,\n\t\t\tlength = elems.length,\n\t\t\tcallbackExpect = !invert;\n\n\t\t// Go through the array, only saving the items\n\t\t// that pass the validator function\n\t\tfor ( ; i < length; i++ ) {\n\t\t\tcallbackInverse = !callback( elems[ i ], i );\n\t\t\tif ( callbackInverse !== callbackExpect ) {\n\t\t\t\tmatches.push( elems[ i ] );\n\t\t\t}\n\t\t}\n\n\t\treturn matches;\n\t},\n\n\t// arg is for internal usage only\n\tmap: function( elems, callback, arg ) {\n\t\tvar length, value,\n\t\t\ti = 0,\n\t\t\tret = [];\n\n\t\t// Go through the array, translating each of the items to their new values\n\t\tif ( isArrayLike( elems ) ) {\n\t\t\tlength = elems.length;\n\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\tvalue = callback( elems[ i ], i, arg );\n\n\t\t\t\tif ( value != null ) {\n\t\t\t\t\tret.push( value );\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Go through every key on the object,\n\t\t} else {\n\t\t\tfor ( i in elems ) {\n\t\t\t\tvalue = callback( elems[ i ], i, arg );\n\n\t\t\t\tif ( value != null ) {\n\t\t\t\t\tret.push( value );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Flatten any nested arrays\n\t\treturn concat.apply( [], ret );\n\t},\n\n\t// A global GUID counter for objects\n\tguid: 1,\n\n\t// Bind a function to a context, optionally partially applying any\n\t// arguments.\n\tproxy: function( fn, context ) {\n\t\tvar tmp, args, proxy;\n\n\t\tif ( typeof context === \"string\" ) {\n\t\t\ttmp = fn[ context ];\n\t\t\tcontext = fn;\n\t\t\tfn = tmp;\n\t\t}\n\n\t\t// Quick check to determine if target is callable, in the spec\n\t\t// this throws a TypeError, but we will just return undefined.\n\t\tif ( !jQuery.isFunction( fn ) ) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// Simulated bind\n\t\targs = slice.call( arguments, 2 );\n\t\tproxy = function() {\n\t\t\treturn fn.apply( context || this, args.concat( slice.call( arguments ) ) );\n\t\t};\n\n\t\t// Set the guid of unique handler to the same of original handler, so it can be removed\n\t\tproxy.guid = fn.guid = fn.guid || jQuery.guid++;\n\n\t\treturn proxy;\n\t},\n\n\tnow: Date.now,\n\n\t// jQuery.support is not used in Core but other projects attach their\n\t// properties to it so it needs to exist.\n\tsupport: support\n} );\n\nif ( typeof Symbol === \"function\" ) {\n\tjQuery.fn[ Symbol.iterator ] = arr[ Symbol.iterator ];\n}\n\n// Populate the class2type map\njQuery.each( \"Boolean Number String Function Array Date RegExp Object Error Symbol\".split( \" \" ),\nfunction( i, name ) {\n\tclass2type[ \"[object \" + name + \"]\" ] = name.toLowerCase();\n} );\n\nfunction isArrayLike( obj ) {\n\n\t// Support: real iOS 8.2 only (not reproducible in simulator)\n\t// `in` check used to prevent JIT error (gh-2145)\n\t// hasOwn isn't used here due to false negatives\n\t// regarding Nodelist length in IE\n\tvar length = !!obj && \"length\" in obj && obj.length,\n\t\ttype = jQuery.type( obj );\n\n\tif ( type === \"function\" || jQuery.isWindow( obj ) ) {\n\t\treturn false;\n\t}\n\n\treturn type === \"array\" || length === 0 ||\n\t\ttypeof length === \"number\" && length > 0 && ( length - 1 ) in obj;\n}\nvar Sizzle =\n/*!\n * Sizzle CSS Selector Engine v2.3.3\n * https://sizzlejs.com/\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license\n * http://jquery.org/license\n *\n * Date: 2016-08-08\n */\n(function( window ) {\n\nvar i,\n\tsupport,\n\tExpr,\n\tgetText,\n\tisXML,\n\ttokenize,\n\tcompile,\n\tselect,\n\toutermostContext,\n\tsortInput,\n\thasDuplicate,\n\n\t// Local document vars\n\tsetDocument,\n\tdocument,\n\tdocElem,\n\tdocumentIsHTML,\n\trbuggyQSA,\n\trbuggyMatches,\n\tmatches,\n\tcontains,\n\n\t// Instance-specific data\n\texpando = \"sizzle\" + 1 * new Date(),\n\tpreferredDoc = window.document,\n\tdirruns = 0,\n\tdone = 0,\n\tclassCache = createCache(),\n\ttokenCache = createCache(),\n\tcompilerCache = createCache(),\n\tsortOrder = function( a, b ) {\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t}\n\t\treturn 0;\n\t},\n\n\t// Instance methods\n\thasOwn = ({}).hasOwnProperty,\n\tarr = [],\n\tpop = arr.pop,\n\tpush_native = arr.push,\n\tpush = arr.push,\n\tslice = arr.slice,\n\t// Use a stripped-down indexOf as it's faster than native\n\t// https://jsperf.com/thor-indexof-vs-for/5\n\tindexOf = function( list, elem ) {\n\t\tvar i = 0,\n\t\t\tlen = list.length;\n\t\tfor ( ; i < len; i++ ) {\n\t\t\tif ( list[i] === elem ) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t},\n\n\tbooleans = \"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",\n\n\t// Regular expressions\n\n\t// http://www.w3.org/TR/css3-selectors/#whitespace\n\twhitespace = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",\n\n\t// http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier\n\tidentifier = \"(?:\\\\\\\\.|[\\\\w-]|[^\\0-\\\\xa0])+\",\n\n\t// Attribute selectors: http://www.w3.org/TR/selectors/#attribute-selectors\n\tattributes = \"\\\\[\" + whitespace + \"*(\" + identifier + \")(?:\" + whitespace +\n\t\t// Operator (capture 2)\n\t\t\"*([*^$|!~]?=)\" + whitespace +\n\t\t// \"Attribute values must be CSS identifiers [capture 5] or strings [capture 3 or capture 4]\"\n\t\t\"*(?:'((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\" + identifier + \"))|)\" + whitespace +\n\t\t\"*\\\\]\",\n\n\tpseudos = \":(\" + identifier + \")(?:\\\\((\" +\n\t\t// To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:\n\t\t// 1. quoted (capture 3; capture 4 or capture 5)\n\t\t\"('((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|\" +\n\t\t// 2. simple (capture 6)\n\t\t\"((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\" + attributes + \")*)|\" +\n\t\t// 3. anything else (capture 2)\n\t\t\".*\" +\n\t\t\")\\\\)|)\",\n\n\t// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter\n\trwhitespace = new RegExp( whitespace + \"+\", \"g\" ),\n\trtrim = new RegExp( \"^\" + whitespace + \"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\" + whitespace + \"+$\", \"g\" ),\n\n\trcomma = new RegExp( \"^\" + whitespace + \"*,\" + whitespace + \"*\" ),\n\trcombinators = new RegExp( \"^\" + whitespace + \"*([>+~]|\" + whitespace + \")\" + whitespace + \"*\" ),\n\n\trattributeQuotes = new RegExp( \"=\" + whitespace + \"*([^\\\\]'\\\"]*?)\" + whitespace + \"*\\\\]\", \"g\" ),\n\n\trpseudo = new RegExp( pseudos ),\n\tridentifier = new RegExp( \"^\" + identifier + \"$\" ),\n\n\tmatchExpr = {\n\t\t\"ID\": new RegExp( \"^#(\" + identifier + \")\" ),\n\t\t\"CLASS\": new RegExp( \"^\\\\.(\" + identifier + \")\" ),\n\t\t\"TAG\": new RegExp( \"^(\" + identifier + \"|[*])\" ),\n\t\t\"ATTR\": new RegExp( \"^\" + attributes ),\n\t\t\"PSEUDO\": new RegExp( \"^\" + pseudos ),\n\t\t\"CHILD\": new RegExp( \"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\" + whitespace +\n\t\t\t\"*(even|odd|(([+-]|)(\\\\d*)n|)\" + whitespace + \"*(?:([+-]|)\" + whitespace +\n\t\t\t\"*(\\\\d+)|))\" + whitespace + \"*\\\\)|)\", \"i\" ),\n\t\t\"bool\": new RegExp( \"^(?:\" + booleans + \")$\", \"i\" ),\n\t\t// For use in libraries implementing .is()\n\t\t// We use this for POS matching in `select`\n\t\t\"needsContext\": new RegExp( \"^\" + whitespace + \"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\" +\n\t\t\twhitespace + \"*((?:-\\\\d)?\\\\d*)\" + whitespace + \"*\\\\)|)(?=[^-]|$)\", \"i\" )\n\t},\n\n\trinputs = /^(?:input|select|textarea|button)$/i,\n\trheader = /^h\\d$/i,\n\n\trnative = /^[^{]+\\{\\s*\\[native \\w/,\n\n\t// Easily-parseable/retrievable ID or TAG or CLASS selectors\n\trquickExpr = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,\n\n\trsibling = /[+~]/,\n\n\t// CSS escapes\n\t// http://www.w3.org/TR/CSS21/syndata.html#escaped-characters\n\trunescape = new RegExp( \"\\\\\\\\([\\\\da-f]{1,6}\" + whitespace + \"?|(\" + whitespace + \")|.)\", \"ig\" ),\n\tfunescape = function( _, escaped, escapedWhitespace ) {\n\t\tvar high = \"0x\" + escaped - 0x10000;\n\t\t// NaN means non-codepoint\n\t\t// Support: Firefox<24\n\t\t// Workaround erroneous numeric interpretation of +\"0x\"\n\t\treturn high !== high || escapedWhitespace ?\n\t\t\tescaped :\n\t\t\thigh < 0 ?\n\t\t\t\t// BMP codepoint\n\t\t\t\tString.fromCharCode( high + 0x10000 ) :\n\t\t\t\t// Supplemental Plane codepoint (surrogate pair)\n\t\t\t\tString.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );\n\t},\n\n\t// CSS string/identifier serialization\n\t// https://drafts.csswg.org/cssom/#common-serializing-idioms\n\trcssescape = /([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\0-\\x1f\\x7f-\\uFFFF\\w-]/g,\n\tfcssescape = function( ch, asCodePoint ) {\n\t\tif ( asCodePoint ) {\n\n\t\t\t// U+0000 NULL becomes U+FFFD REPLACEMENT CHARACTER\n\t\t\tif ( ch === \"\\0\" ) {\n\t\t\t\treturn \"\\uFFFD\";\n\t\t\t}\n\n\t\t\t// Control characters and (dependent upon position) numbers get escaped as code points\n\t\t\treturn ch.slice( 0, -1 ) + \"\\\\\" + ch.charCodeAt( ch.length - 1 ).toString( 16 ) + \" \";\n\t\t}\n\n\t\t// Other potentially-special ASCII characters get backslash-escaped\n\t\treturn \"\\\\\" + ch;\n\t},\n\n\t// Used for iframes\n\t// See setDocument()\n\t// Removing the function wrapper causes a \"Permission Denied\"\n\t// error in IE\n\tunloadHandler = function() {\n\t\tsetDocument();\n\t},\n\n\tdisabledAncestor = addCombinator(\n\t\tfunction( elem ) {\n\t\t\treturn elem.disabled === true && (\"form\" in elem || \"label\" in elem);\n\t\t},\n\t\t{ dir: \"parentNode\", next: \"legend\" }\n\t);\n\n// Optimize for push.apply( _, NodeList )\ntry {\n\tpush.apply(\n\t\t(arr = slice.call( preferredDoc.childNodes )),\n\t\tpreferredDoc.childNodes\n\t);\n\t// Support: Android<4.0\n\t// Detect silently failing push.apply\n\tarr[ preferredDoc.childNodes.length ].nodeType;\n} catch ( e ) {\n\tpush = { apply: arr.length ?\n\n\t\t// Leverage slice if possible\n\t\tfunction( target, els ) {\n\t\t\tpush_native.apply( target, slice.call(els) );\n\t\t} :\n\n\t\t// Support: IE<9\n\t\t// Otherwise append directly\n\t\tfunction( target, els ) {\n\t\t\tvar j = target.length,\n\t\t\t\ti = 0;\n\t\t\t// Can't trust NodeList.length\n\t\t\twhile ( (target[j++] = els[i++]) ) {}\n\t\t\ttarget.length = j - 1;\n\t\t}\n\t};\n}\n\nfunction Sizzle( selector, context, results, seed ) {\n\tvar m, i, elem, nid, match, groups, newSelector,\n\t\tnewContext = context && context.ownerDocument,\n\n\t\t// nodeType defaults to 9, since context defaults to document\n\t\tnodeType = context ? context.nodeType : 9;\n\n\tresults = results || [];\n\n\t// Return early from calls with invalid selector or context\n\tif ( typeof selector !== \"string\" || !selector ||\n\t\tnodeType !== 1 && nodeType !== 9 && nodeType !== 11 ) {\n\n\t\treturn results;\n\t}\n\n\t// Try to shortcut find operations (as opposed to filters) in HTML documents\n\tif ( !seed ) {\n\n\t\tif ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {\n\t\t\tsetDocument( context );\n\t\t}\n\t\tcontext = context || document;\n\n\t\tif ( documentIsHTML ) {\n\n\t\t\t// If the selector is sufficiently simple, try using a \"get*By*\" DOM method\n\t\t\t// (excepting DocumentFragment context, where the methods don't exist)\n\t\t\tif ( nodeType !== 11 && (match = rquickExpr.exec( selector )) ) {\n\n\t\t\t\t// ID selector\n\t\t\t\tif ( (m = match[1]) ) {\n\n\t\t\t\t\t// Document context\n\t\t\t\t\tif ( nodeType === 9 ) {\n\t\t\t\t\t\tif ( (elem = context.getElementById( m )) ) {\n\n\t\t\t\t\t\t\t// Support: IE, Opera, Webkit\n\t\t\t\t\t\t\t// TODO: identify versions\n\t\t\t\t\t\t\t// getElementById can match elements by name instead of ID\n\t\t\t\t\t\t\tif ( elem.id === m ) {\n\t\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t// Element context\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// Support: IE, Opera, Webkit\n\t\t\t\t\t\t// TODO: identify versions\n\t\t\t\t\t\t// getElementById can match elements by name instead of ID\n\t\t\t\t\t\tif ( newContext && (elem = newContext.getElementById( m )) &&\n\t\t\t\t\t\t\tcontains( context, elem ) &&\n\t\t\t\t\t\t\telem.id === m ) {\n\n\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t// Type selector\n\t\t\t\t} else if ( match[2] ) {\n\t\t\t\t\tpush.apply( results, context.getElementsByTagName( selector ) );\n\t\t\t\t\treturn results;\n\n\t\t\t\t// Class selector\n\t\t\t\t} else if ( (m = match[3]) && support.getElementsByClassName &&\n\t\t\t\t\tcontext.getElementsByClassName ) {\n\n\t\t\t\t\tpush.apply( results, context.getElementsByClassName( m ) );\n\t\t\t\t\treturn results;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Take advantage of querySelectorAll\n\t\t\tif ( support.qsa &&\n\t\t\t\t!compilerCache[ selector + \" \" ] &&\n\t\t\t\t(!rbuggyQSA || !rbuggyQSA.test( selector )) ) {\n\n\t\t\t\tif ( nodeType !== 1 ) {\n\t\t\t\t\tnewContext = context;\n\t\t\t\t\tnewSelector = selector;\n\n\t\t\t\t// qSA looks outside Element context, which is not what we want\n\t\t\t\t// Thanks to Andrew Dupont for this workaround technique\n\t\t\t\t// Support: IE <=8\n\t\t\t\t// Exclude object elements\n\t\t\t\t} else if ( context.nodeName.toLowerCase() !== \"object\" ) {\n\n\t\t\t\t\t// Capture the context ID, setting it first if necessary\n\t\t\t\t\tif ( (nid = context.getAttribute( \"id\" )) ) {\n\t\t\t\t\t\tnid = nid.replace( rcssescape, fcssescape );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcontext.setAttribute( \"id\", (nid = expando) );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Prefix every selector in the list\n\t\t\t\t\tgroups = tokenize( selector );\n\t\t\t\t\ti = groups.length;\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tgroups[i] = \"#\" + nid + \" \" + toSelector( groups[i] );\n\t\t\t\t\t}\n\t\t\t\t\tnewSelector = groups.join( \",\" );\n\n\t\t\t\t\t// Expand context for sibling selectors\n\t\t\t\t\tnewContext = rsibling.test( selector ) && testContext( context.parentNode ) ||\n\t\t\t\t\t\tcontext;\n\t\t\t\t}\n\n\t\t\t\tif ( newSelector ) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tpush.apply( results,\n\t\t\t\t\t\t\tnewContext.querySelectorAll( newSelector )\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn results;\n\t\t\t\t\t} catch ( qsaError ) {\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tif ( nid === expando ) {\n\t\t\t\t\t\t\tcontext.removeAttribute( \"id\" );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// All others\n\treturn select( selector.replace( rtrim, \"$1\" ), context, results, seed );\n}\n\n/**\n * Create key-value caches of limited size\n * @returns {function(string, object)} Returns the Object data after storing it on itself with\n *\tproperty name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)\n *\tdeleting the oldest entry\n */\nfunction createCache() {\n\tvar keys = [];\n\n\tfunction cache( key, value ) {\n\t\t// Use (key + \" \") to avoid collision with native prototype properties (see Issue #157)\n\t\tif ( keys.push( key + \" \" ) > Expr.cacheLength ) {\n\t\t\t// Only keep the most recent entries\n\t\t\tdelete cache[ keys.shift() ];\n\t\t}\n\t\treturn (cache[ key + \" \" ] = value);\n\t}\n\treturn cache;\n}\n\n/**\n * Mark a function for special use by Sizzle\n * @param {Function} fn The function to mark\n */\nfunction markFunction( fn ) {\n\tfn[ expando ] = true;\n\treturn fn;\n}\n\n/**\n * Support testing using an element\n * @param {Function} fn Passed the created element and returns a boolean result\n */\nfunction assert( fn ) {\n\tvar el = document.createElement(\"fieldset\");\n\n\ttry {\n\t\treturn !!fn( el );\n\t} catch (e) {\n\t\treturn false;\n\t} finally {\n\t\t// Remove from its parent by default\n\t\tif ( el.parentNode ) {\n\t\t\tel.parentNode.removeChild( el );\n\t\t}\n\t\t// release memory in IE\n\t\tel = null;\n\t}\n}\n\n/**\n * Adds the same handler for all of the specified attrs\n * @param {String} attrs Pipe-separated list of attributes\n * @param {Function} handler The method that will be applied\n */\nfunction addHandle( attrs, handler ) {\n\tvar arr = attrs.split(\"|\"),\n\t\ti = arr.length;\n\n\twhile ( i-- ) {\n\t\tExpr.attrHandle[ arr[i] ] = handler;\n\t}\n}\n\n/**\n * Checks document order of two siblings\n * @param {Element} a\n * @param {Element} b\n * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b\n */\nfunction siblingCheck( a, b ) {\n\tvar cur = b && a,\n\t\tdiff = cur && a.nodeType === 1 && b.nodeType === 1 &&\n\t\t\ta.sourceIndex - b.sourceIndex;\n\n\t// Use IE sourceIndex if available on both nodes\n\tif ( diff ) {\n\t\treturn diff;\n\t}\n\n\t// Check if b follows a\n\tif ( cur ) {\n\t\twhile ( (cur = cur.nextSibling) ) {\n\t\t\tif ( cur === b ) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn a ? 1 : -1;\n}\n\n/**\n * Returns a function to use in pseudos for input types\n * @param {String} type\n */\nfunction createInputPseudo( type ) {\n\treturn function( elem ) {\n\t\tvar name = elem.nodeName.toLowerCase();\n\t\treturn name === \"input\" && elem.type === type;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for buttons\n * @param {String} type\n */\nfunction createButtonPseudo( type ) {\n\treturn function( elem ) {\n\t\tvar name = elem.nodeName.toLowerCase();\n\t\treturn (name === \"input\" || name === \"button\") && elem.type === type;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for :enabled/:disabled\n * @param {Boolean} disabled true for :disabled; false for :enabled\n */\nfunction createDisabledPseudo( disabled ) {\n\n\t// Known :disabled false positives: fieldset[disabled] > legend:nth-of-type(n+2) :can-disable\n\treturn function( elem ) {\n\n\t\t// Only certain elements can match :enabled or :disabled\n\t\t// https://html.spec.whatwg.org/multipage/scripting.html#selector-enabled\n\t\t// https://html.spec.whatwg.org/multipage/scripting.html#selector-disabled\n\t\tif ( \"form\" in elem ) {\n\n\t\t\t// Check for inherited disabledness on relevant non-disabled elements:\n\t\t\t// * listed form-associated elements in a disabled fieldset\n\t\t\t//   https://html.spec.whatwg.org/multipage/forms.html#category-listed\n\t\t\t//   https://html.spec.whatwg.org/multipage/forms.html#concept-fe-disabled\n\t\t\t// * option elements in a disabled optgroup\n\t\t\t//   https://html.spec.whatwg.org/multipage/forms.html#concept-option-disabled\n\t\t\t// All such elements have a \"form\" property.\n\t\t\tif ( elem.parentNode && elem.disabled === false ) {\n\n\t\t\t\t// Option elements defer to a parent optgroup if present\n\t\t\t\tif ( \"label\" in elem ) {\n\t\t\t\t\tif ( \"label\" in elem.parentNode ) {\n\t\t\t\t\t\treturn elem.parentNode.disabled === disabled;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn elem.disabled === disabled;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Support: IE 6 - 11\n\t\t\t\t// Use the isDisabled shortcut property to check for disabled fieldset ancestors\n\t\t\t\treturn elem.isDisabled === disabled ||\n\n\t\t\t\t\t// Where there is no isDisabled, check manually\n\t\t\t\t\t/* jshint -W018 */\n\t\t\t\t\telem.isDisabled !== !disabled &&\n\t\t\t\t\t\tdisabledAncestor( elem ) === disabled;\n\t\t\t}\n\n\t\t\treturn elem.disabled === disabled;\n\n\t\t// Try to winnow out elements that can't be disabled before trusting the disabled property.\n\t\t// Some victims get caught in our net (label, legend, menu, track), but it shouldn't\n\t\t// even exist on them, let alone have a boolean value.\n\t\t} else if ( \"label\" in elem ) {\n\t\t\treturn elem.disabled === disabled;\n\t\t}\n\n\t\t// Remaining elements are neither :enabled nor :disabled\n\t\treturn false;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for positionals\n * @param {Function} fn\n */\nfunction createPositionalPseudo( fn ) {\n\treturn markFunction(function( argument ) {\n\t\targument = +argument;\n\t\treturn markFunction(function( seed, matches ) {\n\t\t\tvar j,\n\t\t\t\tmatchIndexes = fn( [], seed.length, argument ),\n\t\t\t\ti = matchIndexes.length;\n\n\t\t\t// Match elements found at the specified indexes\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( seed[ (j = matchIndexes[i]) ] ) {\n\t\t\t\t\tseed[j] = !(matches[j] = seed[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Checks a node for validity as a Sizzle context\n * @param {Element|Object=} context\n * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value\n */\nfunction testContext( context ) {\n\treturn context && typeof context.getElementsByTagName !== \"undefined\" && context;\n}\n\n// Expose support vars for convenience\nsupport = Sizzle.support = {};\n\n/**\n * Detects XML nodes\n * @param {Element|Object} elem An element or a document\n * @returns {Boolean} True iff elem is a non-HTML XML node\n */\nisXML = Sizzle.isXML = function( elem ) {\n\t// documentElement is verified for cases where it doesn't yet exist\n\t// (such as loading iframes in IE - #4833)\n\tvar documentElement = elem && (elem.ownerDocument || elem).documentElement;\n\treturn documentElement ? documentElement.nodeName !== \"HTML\" : false;\n};\n\n/**\n * Sets document-related variables once based on the current document\n * @param {Element|Object} [doc] An element or document object to use to set the document\n * @returns {Object} Returns the current document\n */\nsetDocument = Sizzle.setDocument = function( node ) {\n\tvar hasCompare, subWindow,\n\t\tdoc = node ? node.ownerDocument || node : preferredDoc;\n\n\t// Return early if doc is invalid or already selected\n\tif ( doc === document || doc.nodeType !== 9 || !doc.documentElement ) {\n\t\treturn document;\n\t}\n\n\t// Update global variables\n\tdocument = doc;\n\tdocElem = document.documentElement;\n\tdocumentIsHTML = !isXML( document );\n\n\t// Support: IE 9-11, Edge\n\t// Accessing iframe documents after unload throws \"permission denied\" errors (jQuery #13936)\n\tif ( preferredDoc !== document &&\n\t\t(subWindow = document.defaultView) && subWindow.top !== subWindow ) {\n\n\t\t// Support: IE 11, Edge\n\t\tif ( subWindow.addEventListener ) {\n\t\t\tsubWindow.addEventListener( \"unload\", unloadHandler, false );\n\n\t\t// Support: IE 9 - 10 only\n\t\t} else if ( subWindow.attachEvent ) {\n\t\t\tsubWindow.attachEvent( \"onunload\", unloadHandler );\n\t\t}\n\t}\n\n\t/* Attributes\n\t---------------------------------------------------------------------- */\n\n\t// Support: IE<8\n\t// Verify that getAttribute really returns attributes and not properties\n\t// (excepting IE8 booleans)\n\tsupport.attributes = assert(function( el ) {\n\t\tel.className = \"i\";\n\t\treturn !el.getAttribute(\"className\");\n\t});\n\n\t/* getElement(s)By*\n\t---------------------------------------------------------------------- */\n\n\t// Check if getElementsByTagName(\"*\") returns only elements\n\tsupport.getElementsByTagName = assert(function( el ) {\n\t\tel.appendChild( document.createComment(\"\") );\n\t\treturn !el.getElementsByTagName(\"*\").length;\n\t});\n\n\t// Support: IE<9\n\tsupport.getElementsByClassName = rnative.test( document.getElementsByClassName );\n\n\t// Support: IE<10\n\t// Check if getElementById returns elements by name\n\t// The broken getElementById methods don't pick up programmatically-set names,\n\t// so use a roundabout getElementsByName test\n\tsupport.getById = assert(function( el ) {\n\t\tdocElem.appendChild( el ).id = expando;\n\t\treturn !document.getElementsByName || !document.getElementsByName( expando ).length;\n\t});\n\n\t// ID filter and find\n\tif ( support.getById ) {\n\t\tExpr.filter[\"ID\"] = function( id ) {\n\t\t\tvar attrId = id.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\treturn elem.getAttribute(\"id\") === attrId;\n\t\t\t};\n\t\t};\n\t\tExpr.find[\"ID\"] = function( id, context ) {\n\t\t\tif ( typeof context.getElementById !== \"undefined\" && documentIsHTML ) {\n\t\t\t\tvar elem = context.getElementById( id );\n\t\t\t\treturn elem ? [ elem ] : [];\n\t\t\t}\n\t\t};\n\t} else {\n\t\tExpr.filter[\"ID\"] =  function( id ) {\n\t\t\tvar attrId = id.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\tvar node = typeof elem.getAttributeNode !== \"undefined\" &&\n\t\t\t\t\telem.getAttributeNode(\"id\");\n\t\t\t\treturn node && node.value === attrId;\n\t\t\t};\n\t\t};\n\n\t\t// Support: IE 6 - 7 only\n\t\t// getElementById is not reliable as a find shortcut\n\t\tExpr.find[\"ID\"] = function( id, context ) {\n\t\t\tif ( typeof context.getElementById !== \"undefined\" && documentIsHTML ) {\n\t\t\t\tvar node, i, elems,\n\t\t\t\t\telem = context.getElementById( id );\n\n\t\t\t\tif ( elem ) {\n\n\t\t\t\t\t// Verify the id attribute\n\t\t\t\t\tnode = elem.getAttributeNode(\"id\");\n\t\t\t\t\tif ( node && node.value === id ) {\n\t\t\t\t\t\treturn [ elem ];\n\t\t\t\t\t}\n\n\t\t\t\t\t// Fall back on getElementsByName\n\t\t\t\t\telems = context.getElementsByName( id );\n\t\t\t\t\ti = 0;\n\t\t\t\t\twhile ( (elem = elems[i++]) ) {\n\t\t\t\t\t\tnode = elem.getAttributeNode(\"id\");\n\t\t\t\t\t\tif ( node && node.value === id ) {\n\t\t\t\t\t\t\treturn [ elem ];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn [];\n\t\t\t}\n\t\t};\n\t}\n\n\t// Tag\n\tExpr.find[\"TAG\"] = support.getElementsByTagName ?\n\t\tfunction( tag, context ) {\n\t\t\tif ( typeof context.getElementsByTagName !== \"undefined\" ) {\n\t\t\t\treturn context.getElementsByTagName( tag );\n\n\t\t\t// DocumentFragment nodes don't have gEBTN\n\t\t\t} else if ( support.qsa ) {\n\t\t\t\treturn context.querySelectorAll( tag );\n\t\t\t}\n\t\t} :\n\n\t\tfunction( tag, context ) {\n\t\t\tvar elem,\n\t\t\t\ttmp = [],\n\t\t\t\ti = 0,\n\t\t\t\t// By happy coincidence, a (broken) gEBTN appears on DocumentFragment nodes too\n\t\t\t\tresults = context.getElementsByTagName( tag );\n\n\t\t\t// Filter out possible comments\n\t\t\tif ( tag === \"*\" ) {\n\t\t\t\twhile ( (elem = results[i++]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\t\t\ttmp.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn tmp;\n\t\t\t}\n\t\t\treturn results;\n\t\t};\n\n\t// Class\n\tExpr.find[\"CLASS\"] = support.getElementsByClassName && function( className, context ) {\n\t\tif ( typeof context.getElementsByClassName !== \"undefined\" && documentIsHTML ) {\n\t\t\treturn context.getElementsByClassName( className );\n\t\t}\n\t};\n\n\t/* QSA/matchesSelector\n\t---------------------------------------------------------------------- */\n\n\t// QSA and matchesSelector support\n\n\t// matchesSelector(:active) reports false when true (IE9/Opera 11.5)\n\trbuggyMatches = [];\n\n\t// qSa(:focus) reports false when true (Chrome 21)\n\t// We allow this because of a bug in IE8/9 that throws an error\n\t// whenever `document.activeElement` is accessed on an iframe\n\t// So, we allow :focus to pass through QSA all the time to avoid the IE error\n\t// See https://bugs.jquery.com/ticket/13378\n\trbuggyQSA = [];\n\n\tif ( (support.qsa = rnative.test( document.querySelectorAll )) ) {\n\t\t// Build QSA regex\n\t\t// Regex strategy adopted from Diego Perini\n\t\tassert(function( el ) {\n\t\t\t// Select is set to empty string on purpose\n\t\t\t// This is to test IE's treatment of not explicitly\n\t\t\t// setting a boolean content attribute,\n\t\t\t// since its presence should be enough\n\t\t\t// https://bugs.jquery.com/ticket/12359\n\t\t\tdocElem.appendChild( el ).innerHTML = \"<a id='\" + expando + \"'></a>\" +\n\t\t\t\t\"<select id='\" + expando + \"-\\r\\\\' msallowcapture=''>\" +\n\t\t\t\t\"<option selected=''></option></select>\";\n\n\t\t\t// Support: IE8, Opera 11-12.16\n\t\t\t// Nothing should be selected when empty strings follow ^= or $= or *=\n\t\t\t// The test attribute must be unknown in Opera but \"safe\" for WinRT\n\t\t\t// https://msdn.microsoft.com/en-us/library/ie/hh465388.aspx#attribute_section\n\t\t\tif ( el.querySelectorAll(\"[msallowcapture^='']\").length ) {\n\t\t\t\trbuggyQSA.push( \"[*^$]=\" + whitespace + \"*(?:''|\\\"\\\")\" );\n\t\t\t}\n\n\t\t\t// Support: IE8\n\t\t\t// Boolean attributes and \"value\" are not treated correctly\n\t\t\tif ( !el.querySelectorAll(\"[selected]\").length ) {\n\t\t\t\trbuggyQSA.push( \"\\\\[\" + whitespace + \"*(?:value|\" + booleans + \")\" );\n\t\t\t}\n\n\t\t\t// Support: Chrome<29, Android<4.4, Safari<7.0+, iOS<7.0+, PhantomJS<1.9.8+\n\t\t\tif ( !el.querySelectorAll( \"[id~=\" + expando + \"-]\" ).length ) {\n\t\t\t\trbuggyQSA.push(\"~=\");\n\t\t\t}\n\n\t\t\t// Webkit/Opera - :checked should return selected option elements\n\t\t\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\n\t\t\t// IE8 throws error here and will not see later tests\n\t\t\tif ( !el.querySelectorAll(\":checked\").length ) {\n\t\t\t\trbuggyQSA.push(\":checked\");\n\t\t\t}\n\n\t\t\t// Support: Safari 8+, iOS 8+\n\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=136851\n\t\t\t// In-page `selector#id sibling-combinator selector` fails\n\t\t\tif ( !el.querySelectorAll( \"a#\" + expando + \"+*\" ).length ) {\n\t\t\t\trbuggyQSA.push(\".#.+[+~]\");\n\t\t\t}\n\t\t});\n\n\t\tassert(function( el ) {\n\t\t\tel.innerHTML = \"<a href='' disabled='disabled'></a>\" +\n\t\t\t\t\"<select disabled='disabled'><option/></select>\";\n\n\t\t\t// Support: Windows 8 Native Apps\n\t\t\t// The type and name attributes are restricted during .innerHTML assignment\n\t\t\tvar input = document.createElement(\"input\");\n\t\t\tinput.setAttribute( \"type\", \"hidden\" );\n\t\t\tel.appendChild( input ).setAttribute( \"name\", \"D\" );\n\n\t\t\t// Support: IE8\n\t\t\t// Enforce case-sensitivity of name attribute\n\t\t\tif ( el.querySelectorAll(\"[name=d]\").length ) {\n\t\t\t\trbuggyQSA.push( \"name\" + whitespace + \"*[*^$|!~]?=\" );\n\t\t\t}\n\n\t\t\t// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)\n\t\t\t// IE8 throws error here and will not see later tests\n\t\t\tif ( el.querySelectorAll(\":enabled\").length !== 2 ) {\n\t\t\t\trbuggyQSA.push( \":enabled\", \":disabled\" );\n\t\t\t}\n\n\t\t\t// Support: IE9-11+\n\t\t\t// IE's :disabled selector does not pick up the children of disabled fieldsets\n\t\t\tdocElem.appendChild( el ).disabled = true;\n\t\t\tif ( el.querySelectorAll(\":disabled\").length !== 2 ) {\n\t\t\t\trbuggyQSA.push( \":enabled\", \":disabled\" );\n\t\t\t}\n\n\t\t\t// Opera 10-11 does not throw on post-comma invalid pseudos\n\t\t\tel.querySelectorAll(\"*,:x\");\n\t\t\trbuggyQSA.push(\",.*:\");\n\t\t});\n\t}\n\n\tif ( (support.matchesSelector = rnative.test( (matches = docElem.matches ||\n\t\tdocElem.webkitMatchesSelector ||\n\t\tdocElem.mozMatchesSelector ||\n\t\tdocElem.oMatchesSelector ||\n\t\tdocElem.msMatchesSelector) )) ) {\n\n\t\tassert(function( el ) {\n\t\t\t// Check to see if it's possible to do matchesSelector\n\t\t\t// on a disconnected node (IE 9)\n\t\t\tsupport.disconnectedMatch = matches.call( el, \"*\" );\n\n\t\t\t// This should fail with an exception\n\t\t\t// Gecko does not error, returns false instead\n\t\t\tmatches.call( el, \"[s!='']:x\" );\n\t\t\trbuggyMatches.push( \"!=\", pseudos );\n\t\t});\n\t}\n\n\trbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join(\"|\") );\n\trbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join(\"|\") );\n\n\t/* Contains\n\t---------------------------------------------------------------------- */\n\thasCompare = rnative.test( docElem.compareDocumentPosition );\n\n\t// Element contains another\n\t// Purposefully self-exclusive\n\t// As in, an element does not contain itself\n\tcontains = hasCompare || rnative.test( docElem.contains ) ?\n\t\tfunction( a, b ) {\n\t\t\tvar adown = a.nodeType === 9 ? a.documentElement : a,\n\t\t\t\tbup = b && b.parentNode;\n\t\t\treturn a === bup || !!( bup && bup.nodeType === 1 && (\n\t\t\t\tadown.contains ?\n\t\t\t\t\tadown.contains( bup ) :\n\t\t\t\t\ta.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16\n\t\t\t));\n\t\t} :\n\t\tfunction( a, b ) {\n\t\t\tif ( b ) {\n\t\t\t\twhile ( (b = b.parentNode) ) {\n\t\t\t\t\tif ( b === a ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t/* Sorting\n\t---------------------------------------------------------------------- */\n\n\t// Document order sorting\n\tsortOrder = hasCompare ?\n\tfunction( a, b ) {\n\n\t\t// Flag for duplicate removal\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t\treturn 0;\n\t\t}\n\n\t\t// Sort on method existence if only one input has compareDocumentPosition\n\t\tvar compare = !a.compareDocumentPosition - !b.compareDocumentPosition;\n\t\tif ( compare ) {\n\t\t\treturn compare;\n\t\t}\n\n\t\t// Calculate position if both inputs belong to the same document\n\t\tcompare = ( a.ownerDocument || a ) === ( b.ownerDocument || b ) ?\n\t\t\ta.compareDocumentPosition( b ) :\n\n\t\t\t// Otherwise we know they are disconnected\n\t\t\t1;\n\n\t\t// Disconnected nodes\n\t\tif ( compare & 1 ||\n\t\t\t(!support.sortDetached && b.compareDocumentPosition( a ) === compare) ) {\n\n\t\t\t// Choose the first element that is related to our preferred document\n\t\t\tif ( a === document || a.ownerDocument === preferredDoc && contains(preferredDoc, a) ) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\tif ( b === document || b.ownerDocument === preferredDoc && contains(preferredDoc, b) ) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\t// Maintain original order\n\t\t\treturn sortInput ?\n\t\t\t\t( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :\n\t\t\t\t0;\n\t\t}\n\n\t\treturn compare & 4 ? -1 : 1;\n\t} :\n\tfunction( a, b ) {\n\t\t// Exit early if the nodes are identical\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t\treturn 0;\n\t\t}\n\n\t\tvar cur,\n\t\t\ti = 0,\n\t\t\taup = a.parentNode,\n\t\t\tbup = b.parentNode,\n\t\t\tap = [ a ],\n\t\t\tbp = [ b ];\n\n\t\t// Parentless nodes are either documents or disconnected\n\t\tif ( !aup || !bup ) {\n\t\t\treturn a === document ? -1 :\n\t\t\t\tb === document ? 1 :\n\t\t\t\taup ? -1 :\n\t\t\t\tbup ? 1 :\n\t\t\t\tsortInput ?\n\t\t\t\t( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :\n\t\t\t\t0;\n\n\t\t// If the nodes are siblings, we can do a quick check\n\t\t} else if ( aup === bup ) {\n\t\t\treturn siblingCheck( a, b );\n\t\t}\n\n\t\t// Otherwise we need full lists of their ancestors for comparison\n\t\tcur = a;\n\t\twhile ( (cur = cur.parentNode) ) {\n\t\t\tap.unshift( cur );\n\t\t}\n\t\tcur = b;\n\t\twhile ( (cur = cur.parentNode) ) {\n\t\t\tbp.unshift( cur );\n\t\t}\n\n\t\t// Walk down the tree looking for a discrepancy\n\t\twhile ( ap[i] === bp[i] ) {\n\t\t\ti++;\n\t\t}\n\n\t\treturn i ?\n\t\t\t// Do a sibling check if the nodes have a common ancestor\n\t\t\tsiblingCheck( ap[i], bp[i] ) :\n\n\t\t\t// Otherwise nodes in our document sort first\n\t\t\tap[i] === preferredDoc ? -1 :\n\t\t\tbp[i] === preferredDoc ? 1 :\n\t\t\t0;\n\t};\n\n\treturn document;\n};\n\nSizzle.matches = function( expr, elements ) {\n\treturn Sizzle( expr, null, null, elements );\n};\n\nSizzle.matchesSelector = function( elem, expr ) {\n\t// Set document vars if needed\n\tif ( ( elem.ownerDocument || elem ) !== document ) {\n\t\tsetDocument( elem );\n\t}\n\n\t// Make sure that attribute selectors are quoted\n\texpr = expr.replace( rattributeQuotes, \"='$1']\" );\n\n\tif ( support.matchesSelector && documentIsHTML &&\n\t\t!compilerCache[ expr + \" \" ] &&\n\t\t( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&\n\t\t( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {\n\n\t\ttry {\n\t\t\tvar ret = matches.call( elem, expr );\n\n\t\t\t// IE 9's matchesSelector returns false on disconnected nodes\n\t\t\tif ( ret || support.disconnectedMatch ||\n\t\t\t\t\t// As well, disconnected nodes are said to be in a document\n\t\t\t\t\t// fragment in IE 9\n\t\t\t\t\telem.document && elem.document.nodeType !== 11 ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t} catch (e) {}\n\t}\n\n\treturn Sizzle( expr, document, null, [ elem ] ).length > 0;\n};\n\nSizzle.contains = function( context, elem ) {\n\t// Set document vars if needed\n\tif ( ( context.ownerDocument || context ) !== document ) {\n\t\tsetDocument( context );\n\t}\n\treturn contains( context, elem );\n};\n\nSizzle.attr = function( elem, name ) {\n\t// Set document vars if needed\n\tif ( ( elem.ownerDocument || elem ) !== document ) {\n\t\tsetDocument( elem );\n\t}\n\n\tvar fn = Expr.attrHandle[ name.toLowerCase() ],\n\t\t// Don't get fooled by Object.prototype properties (jQuery #13807)\n\t\tval = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?\n\t\t\tfn( elem, name, !documentIsHTML ) :\n\t\t\tundefined;\n\n\treturn val !== undefined ?\n\t\tval :\n\t\tsupport.attributes || !documentIsHTML ?\n\t\t\telem.getAttribute( name ) :\n\t\t\t(val = elem.getAttributeNode(name)) && val.specified ?\n\t\t\t\tval.value :\n\t\t\t\tnull;\n};\n\nSizzle.escape = function( sel ) {\n\treturn (sel + \"\").replace( rcssescape, fcssescape );\n};\n\nSizzle.error = function( msg ) {\n\tthrow new Error( \"Syntax error, unrecognized expression: \" + msg );\n};\n\n/**\n * Document sorting and removing duplicates\n * @param {ArrayLike} results\n */\nSizzle.uniqueSort = function( results ) {\n\tvar elem,\n\t\tduplicates = [],\n\t\tj = 0,\n\t\ti = 0;\n\n\t// Unless we *know* we can detect duplicates, assume their presence\n\thasDuplicate = !support.detectDuplicates;\n\tsortInput = !support.sortStable && results.slice( 0 );\n\tresults.sort( sortOrder );\n\n\tif ( hasDuplicate ) {\n\t\twhile ( (elem = results[i++]) ) {\n\t\t\tif ( elem === results[ i ] ) {\n\t\t\t\tj = duplicates.push( i );\n\t\t\t}\n\t\t}\n\t\twhile ( j-- ) {\n\t\t\tresults.splice( duplicates[ j ], 1 );\n\t\t}\n\t}\n\n\t// Clear input after sorting to release objects\n\t// See https://github.com/jquery/sizzle/pull/225\n\tsortInput = null;\n\n\treturn results;\n};\n\n/**\n * Utility function for retrieving the text value of an array of DOM nodes\n * @param {Array|Element} elem\n */\ngetText = Sizzle.getText = function( elem ) {\n\tvar node,\n\t\tret = \"\",\n\t\ti = 0,\n\t\tnodeType = elem.nodeType;\n\n\tif ( !nodeType ) {\n\t\t// If no nodeType, this is expected to be an array\n\t\twhile ( (node = elem[i++]) ) {\n\t\t\t// Do not traverse comment nodes\n\t\t\tret += getText( node );\n\t\t}\n\t} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {\n\t\t// Use textContent for elements\n\t\t// innerText usage removed for consistency of new lines (jQuery #11153)\n\t\tif ( typeof elem.textContent === \"string\" ) {\n\t\t\treturn elem.textContent;\n\t\t} else {\n\t\t\t// Traverse its children\n\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n\t\t\t\tret += getText( elem );\n\t\t\t}\n\t\t}\n\t} else if ( nodeType === 3 || nodeType === 4 ) {\n\t\treturn elem.nodeValue;\n\t}\n\t// Do not include comment or processing instruction nodes\n\n\treturn ret;\n};\n\nExpr = Sizzle.selectors = {\n\n\t// Can be adjusted by the user\n\tcacheLength: 50,\n\n\tcreatePseudo: markFunction,\n\n\tmatch: matchExpr,\n\n\tattrHandle: {},\n\n\tfind: {},\n\n\trelative: {\n\t\t\">\": { dir: \"parentNode\", first: true },\n\t\t\" \": { dir: \"parentNode\" },\n\t\t\"+\": { dir: \"previousSibling\", first: true },\n\t\t\"~\": { dir: \"previousSibling\" }\n\t},\n\n\tpreFilter: {\n\t\t\"ATTR\": function( match ) {\n\t\t\tmatch[1] = match[1].replace( runescape, funescape );\n\n\t\t\t// Move the given value to match[3] whether quoted or unquoted\n\t\t\tmatch[3] = ( match[3] || match[4] || match[5] || \"\" ).replace( runescape, funescape );\n\n\t\t\tif ( match[2] === \"~=\" ) {\n\t\t\t\tmatch[3] = \" \" + match[3] + \" \";\n\t\t\t}\n\n\t\t\treturn match.slice( 0, 4 );\n\t\t},\n\n\t\t\"CHILD\": function( match ) {\n\t\t\t/* matches from matchExpr[\"CHILD\"]\n\t\t\t\t1 type (only|nth|...)\n\t\t\t\t2 what (child|of-type)\n\t\t\t\t3 argument (even|odd|\\d*|\\d*n([+-]\\d+)?|...)\n\t\t\t\t4 xn-component of xn+y argument ([+-]?\\d*n|)\n\t\t\t\t5 sign of xn-component\n\t\t\t\t6 x of xn-component\n\t\t\t\t7 sign of y-component\n\t\t\t\t8 y of y-component\n\t\t\t*/\n\t\t\tmatch[1] = match[1].toLowerCase();\n\n\t\t\tif ( match[1].slice( 0, 3 ) === \"nth\" ) {\n\t\t\t\t// nth-* requires argument\n\t\t\t\tif ( !match[3] ) {\n\t\t\t\t\tSizzle.error( match[0] );\n\t\t\t\t}\n\n\t\t\t\t// numeric x and y parameters for Expr.filter.CHILD\n\t\t\t\t// remember that false/true cast respectively to 0/1\n\t\t\t\tmatch[4] = +( match[4] ? match[5] + (match[6] || 1) : 2 * ( match[3] === \"even\" || match[3] === \"odd\" ) );\n\t\t\t\tmatch[5] = +( ( match[7] + match[8] ) || match[3] === \"odd\" );\n\n\t\t\t// other types prohibit arguments\n\t\t\t} else if ( match[3] ) {\n\t\t\t\tSizzle.error( match[0] );\n\t\t\t}\n\n\t\t\treturn match;\n\t\t},\n\n\t\t\"PSEUDO\": function( match ) {\n\t\t\tvar excess,\n\t\t\t\tunquoted = !match[6] && match[2];\n\n\t\t\tif ( matchExpr[\"CHILD\"].test( match[0] ) ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\t// Accept quoted arguments as-is\n\t\t\tif ( match[3] ) {\n\t\t\t\tmatch[2] = match[4] || match[5] || \"\";\n\n\t\t\t// Strip excess characters from unquoted arguments\n\t\t\t} else if ( unquoted && rpseudo.test( unquoted ) &&\n\t\t\t\t// Get excess from tokenize (recursively)\n\t\t\t\t(excess = tokenize( unquoted, true )) &&\n\t\t\t\t// advance to the next closing parenthesis\n\t\t\t\t(excess = unquoted.indexOf( \")\", unquoted.length - excess ) - unquoted.length) ) {\n\n\t\t\t\t// excess is a negative index\n\t\t\t\tmatch[0] = match[0].slice( 0, excess );\n\t\t\t\tmatch[2] = unquoted.slice( 0, excess );\n\t\t\t}\n\n\t\t\t// Return only captures needed by the pseudo filter method (type and argument)\n\t\t\treturn match.slice( 0, 3 );\n\t\t}\n\t},\n\n\tfilter: {\n\n\t\t\"TAG\": function( nodeNameSelector ) {\n\t\t\tvar nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();\n\t\t\treturn nodeNameSelector === \"*\" ?\n\t\t\t\tfunction() { return true; } :\n\t\t\t\tfunction( elem ) {\n\t\t\t\t\treturn elem.nodeName && elem.nodeName.toLowerCase() === nodeName;\n\t\t\t\t};\n\t\t},\n\n\t\t\"CLASS\": function( className ) {\n\t\t\tvar pattern = classCache[ className + \" \" ];\n\n\t\t\treturn pattern ||\n\t\t\t\t(pattern = new RegExp( \"(^|\" + whitespace + \")\" + className + \"(\" + whitespace + \"|$)\" )) &&\n\t\t\t\tclassCache( className, function( elem ) {\n\t\t\t\t\treturn pattern.test( typeof elem.className === \"string\" && elem.className || typeof elem.getAttribute !== \"undefined\" && elem.getAttribute(\"class\") || \"\" );\n\t\t\t\t});\n\t\t},\n\n\t\t\"ATTR\": function( name, operator, check ) {\n\t\t\treturn function( elem ) {\n\t\t\t\tvar result = Sizzle.attr( elem, name );\n\n\t\t\t\tif ( result == null ) {\n\t\t\t\t\treturn operator === \"!=\";\n\t\t\t\t}\n\t\t\t\tif ( !operator ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tresult += \"\";\n\n\t\t\t\treturn operator === \"=\" ? result === check :\n\t\t\t\t\toperator === \"!=\" ? result !== check :\n\t\t\t\t\toperator === \"^=\" ? check && result.indexOf( check ) === 0 :\n\t\t\t\t\toperator === \"*=\" ? check && result.indexOf( check ) > -1 :\n\t\t\t\t\toperator === \"$=\" ? check && result.slice( -check.length ) === check :\n\t\t\t\t\toperator === \"~=\" ? ( \" \" + result.replace( rwhitespace, \" \" ) + \" \" ).indexOf( check ) > -1 :\n\t\t\t\t\toperator === \"|=\" ? result === check || result.slice( 0, check.length + 1 ) === check + \"-\" :\n\t\t\t\t\tfalse;\n\t\t\t};\n\t\t},\n\n\t\t\"CHILD\": function( type, what, argument, first, last ) {\n\t\t\tvar simple = type.slice( 0, 3 ) !== \"nth\",\n\t\t\t\tforward = type.slice( -4 ) !== \"last\",\n\t\t\t\tofType = what === \"of-type\";\n\n\t\t\treturn first === 1 && last === 0 ?\n\n\t\t\t\t// Shortcut for :nth-*(n)\n\t\t\t\tfunction( elem ) {\n\t\t\t\t\treturn !!elem.parentNode;\n\t\t\t\t} :\n\n\t\t\t\tfunction( elem, context, xml ) {\n\t\t\t\t\tvar cache, uniqueCache, outerCache, node, nodeIndex, start,\n\t\t\t\t\t\tdir = simple !== forward ? \"nextSibling\" : \"previousSibling\",\n\t\t\t\t\t\tparent = elem.parentNode,\n\t\t\t\t\t\tname = ofType && elem.nodeName.toLowerCase(),\n\t\t\t\t\t\tuseCache = !xml && !ofType,\n\t\t\t\t\t\tdiff = false;\n\n\t\t\t\t\tif ( parent ) {\n\n\t\t\t\t\t\t// :(first|last|only)-(child|of-type)\n\t\t\t\t\t\tif ( simple ) {\n\t\t\t\t\t\t\twhile ( dir ) {\n\t\t\t\t\t\t\t\tnode = elem;\n\t\t\t\t\t\t\t\twhile ( (node = node[ dir ]) ) {\n\t\t\t\t\t\t\t\t\tif ( ofType ?\n\t\t\t\t\t\t\t\t\t\tnode.nodeName.toLowerCase() === name :\n\t\t\t\t\t\t\t\t\t\tnode.nodeType === 1 ) {\n\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// Reverse direction for :only-* (if we haven't yet done so)\n\t\t\t\t\t\t\t\tstart = dir = type === \"only\" && !start && \"nextSibling\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstart = [ forward ? parent.firstChild : parent.lastChild ];\n\n\t\t\t\t\t\t// non-xml :nth-child(...) stores cache data on `parent`\n\t\t\t\t\t\tif ( forward && useCache ) {\n\n\t\t\t\t\t\t\t// Seek `elem` from a previously-cached index\n\n\t\t\t\t\t\t\t// ...in a gzip-friendly way\n\t\t\t\t\t\t\tnode = parent;\n\t\t\t\t\t\t\touterCache = node[ expando ] || (node[ expando ] = {});\n\n\t\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\t\tuniqueCache = outerCache[ node.uniqueID ] ||\n\t\t\t\t\t\t\t\t(outerCache[ node.uniqueID ] = {});\n\n\t\t\t\t\t\t\tcache = uniqueCache[ type ] || [];\n\t\t\t\t\t\t\tnodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];\n\t\t\t\t\t\t\tdiff = nodeIndex && cache[ 2 ];\n\t\t\t\t\t\t\tnode = nodeIndex && parent.childNodes[ nodeIndex ];\n\n\t\t\t\t\t\t\twhile ( (node = ++nodeIndex && node && node[ dir ] ||\n\n\t\t\t\t\t\t\t\t// Fallback to seeking `elem` from the start\n\t\t\t\t\t\t\t\t(diff = nodeIndex = 0) || start.pop()) ) {\n\n\t\t\t\t\t\t\t\t// When found, cache indexes on `parent` and break\n\t\t\t\t\t\t\t\tif ( node.nodeType === 1 && ++diff && node === elem ) {\n\t\t\t\t\t\t\t\t\tuniqueCache[ type ] = [ dirruns, nodeIndex, diff ];\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Use previously-cached element index if available\n\t\t\t\t\t\t\tif ( useCache ) {\n\t\t\t\t\t\t\t\t// ...in a gzip-friendly way\n\t\t\t\t\t\t\t\tnode = elem;\n\t\t\t\t\t\t\t\touterCache = node[ expando ] || (node[ expando ] = {});\n\n\t\t\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\t\t\tuniqueCache = outerCache[ node.uniqueID ] ||\n\t\t\t\t\t\t\t\t\t(outerCache[ node.uniqueID ] = {});\n\n\t\t\t\t\t\t\t\tcache = uniqueCache[ type ] || [];\n\t\t\t\t\t\t\t\tnodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];\n\t\t\t\t\t\t\t\tdiff = nodeIndex;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// xml :nth-child(...)\n\t\t\t\t\t\t\t// or :nth-last-child(...) or :nth(-last)?-of-type(...)\n\t\t\t\t\t\t\tif ( diff === false ) {\n\t\t\t\t\t\t\t\t// Use the same loop as above to seek `elem` from the start\n\t\t\t\t\t\t\t\twhile ( (node = ++nodeIndex && node && node[ dir ] ||\n\t\t\t\t\t\t\t\t\t(diff = nodeIndex = 0) || start.pop()) ) {\n\n\t\t\t\t\t\t\t\t\tif ( ( ofType ?\n\t\t\t\t\t\t\t\t\t\tnode.nodeName.toLowerCase() === name :\n\t\t\t\t\t\t\t\t\t\tnode.nodeType === 1 ) &&\n\t\t\t\t\t\t\t\t\t\t++diff ) {\n\n\t\t\t\t\t\t\t\t\t\t// Cache the index of each encountered element\n\t\t\t\t\t\t\t\t\t\tif ( useCache ) {\n\t\t\t\t\t\t\t\t\t\t\touterCache = node[ expando ] || (node[ expando ] = {});\n\n\t\t\t\t\t\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\t\t\t\t\t\tuniqueCache = outerCache[ node.uniqueID ] ||\n\t\t\t\t\t\t\t\t\t\t\t\t(outerCache[ node.uniqueID ] = {});\n\n\t\t\t\t\t\t\t\t\t\t\tuniqueCache[ type ] = [ dirruns, diff ];\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tif ( node === elem ) {\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Incorporate the offset, then check against cycle size\n\t\t\t\t\t\tdiff -= last;\n\t\t\t\t\t\treturn diff === first || ( diff % first === 0 && diff / first >= 0 );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t},\n\n\t\t\"PSEUDO\": function( pseudo, argument ) {\n\t\t\t// pseudo-class names are case-insensitive\n\t\t\t// http://www.w3.org/TR/selectors/#pseudo-classes\n\t\t\t// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters\n\t\t\t// Remember that setFilters inherits from pseudos\n\t\t\tvar args,\n\t\t\t\tfn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||\n\t\t\t\t\tSizzle.error( \"unsupported pseudo: \" + pseudo );\n\n\t\t\t// The user may use createPseudo to indicate that\n\t\t\t// arguments are needed to create the filter function\n\t\t\t// just as Sizzle does\n\t\t\tif ( fn[ expando ] ) {\n\t\t\t\treturn fn( argument );\n\t\t\t}\n\n\t\t\t// But maintain support for old signatures\n\t\t\tif ( fn.length > 1 ) {\n\t\t\t\targs = [ pseudo, pseudo, \"\", argument ];\n\t\t\t\treturn Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?\n\t\t\t\t\tmarkFunction(function( seed, matches ) {\n\t\t\t\t\t\tvar idx,\n\t\t\t\t\t\t\tmatched = fn( seed, argument ),\n\t\t\t\t\t\t\ti = matched.length;\n\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\tidx = indexOf( seed, matched[i] );\n\t\t\t\t\t\t\tseed[ idx ] = !( matches[ idx ] = matched[i] );\n\t\t\t\t\t\t}\n\t\t\t\t\t}) :\n\t\t\t\t\tfunction( elem ) {\n\t\t\t\t\t\treturn fn( elem, 0, args );\n\t\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn fn;\n\t\t}\n\t},\n\n\tpseudos: {\n\t\t// Potentially complex pseudos\n\t\t\"not\": markFunction(function( selector ) {\n\t\t\t// Trim the selector passed to compile\n\t\t\t// to avoid treating leading and trailing\n\t\t\t// spaces as combinators\n\t\t\tvar input = [],\n\t\t\t\tresults = [],\n\t\t\t\tmatcher = compile( selector.replace( rtrim, \"$1\" ) );\n\n\t\t\treturn matcher[ expando ] ?\n\t\t\t\tmarkFunction(function( seed, matches, context, xml ) {\n\t\t\t\t\tvar elem,\n\t\t\t\t\t\tunmatched = matcher( seed, null, xml, [] ),\n\t\t\t\t\t\ti = seed.length;\n\n\t\t\t\t\t// Match elements unmatched by `matcher`\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tif ( (elem = unmatched[i]) ) {\n\t\t\t\t\t\t\tseed[i] = !(matches[i] = elem);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}) :\n\t\t\t\tfunction( elem, context, xml ) {\n\t\t\t\t\tinput[0] = elem;\n\t\t\t\t\tmatcher( input, null, xml, results );\n\t\t\t\t\t// Don't keep the element (issue #299)\n\t\t\t\t\tinput[0] = null;\n\t\t\t\t\treturn !results.pop();\n\t\t\t\t};\n\t\t}),\n\n\t\t\"has\": markFunction(function( selector ) {\n\t\t\treturn function( elem ) {\n\t\t\t\treturn Sizzle( selector, elem ).length > 0;\n\t\t\t};\n\t\t}),\n\n\t\t\"contains\": markFunction(function( text ) {\n\t\t\ttext = text.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\treturn ( elem.textContent || elem.innerText || getText( elem ) ).indexOf( text ) > -1;\n\t\t\t};\n\t\t}),\n\n\t\t// \"Whether an element is represented by a :lang() selector\n\t\t// is based solely on the element's language value\n\t\t// being equal to the identifier C,\n\t\t// or beginning with the identifier C immediately followed by \"-\".\n\t\t// The matching of C against the element's language value is performed case-insensitively.\n\t\t// The identifier C does not have to be a valid language name.\"\n\t\t// http://www.w3.org/TR/selectors/#lang-pseudo\n\t\t\"lang\": markFunction( function( lang ) {\n\t\t\t// lang value must be a valid identifier\n\t\t\tif ( !ridentifier.test(lang || \"\") ) {\n\t\t\t\tSizzle.error( \"unsupported lang: \" + lang );\n\t\t\t}\n\t\t\tlang = lang.replace( runescape, funescape ).toLowerCase();\n\t\t\treturn function( elem ) {\n\t\t\t\tvar elemLang;\n\t\t\t\tdo {\n\t\t\t\t\tif ( (elemLang = documentIsHTML ?\n\t\t\t\t\t\telem.lang :\n\t\t\t\t\t\telem.getAttribute(\"xml:lang\") || elem.getAttribute(\"lang\")) ) {\n\n\t\t\t\t\t\telemLang = elemLang.toLowerCase();\n\t\t\t\t\t\treturn elemLang === lang || elemLang.indexOf( lang + \"-\" ) === 0;\n\t\t\t\t\t}\n\t\t\t\t} while ( (elem = elem.parentNode) && elem.nodeType === 1 );\n\t\t\t\treturn false;\n\t\t\t};\n\t\t}),\n\n\t\t// Miscellaneous\n\t\t\"target\": function( elem ) {\n\t\t\tvar hash = window.location && window.location.hash;\n\t\t\treturn hash && hash.slice( 1 ) === elem.id;\n\t\t},\n\n\t\t\"root\": function( elem ) {\n\t\t\treturn elem === docElem;\n\t\t},\n\n\t\t\"focus\": function( elem ) {\n\t\t\treturn elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);\n\t\t},\n\n\t\t// Boolean properties\n\t\t\"enabled\": createDisabledPseudo( false ),\n\t\t\"disabled\": createDisabledPseudo( true ),\n\n\t\t\"checked\": function( elem ) {\n\t\t\t// In CSS3, :checked should return both checked and selected elements\n\t\t\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\n\t\t\tvar nodeName = elem.nodeName.toLowerCase();\n\t\t\treturn (nodeName === \"input\" && !!elem.checked) || (nodeName === \"option\" && !!elem.selected);\n\t\t},\n\n\t\t\"selected\": function( elem ) {\n\t\t\t// Accessing this property makes selected-by-default\n\t\t\t// options in Safari work properly\n\t\t\tif ( elem.parentNode ) {\n\t\t\t\telem.parentNode.selectedIndex;\n\t\t\t}\n\n\t\t\treturn elem.selected === true;\n\t\t},\n\n\t\t// Contents\n\t\t\"empty\": function( elem ) {\n\t\t\t// http://www.w3.org/TR/selectors/#empty-pseudo\n\t\t\t// :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),\n\t\t\t//   but not by others (comment: 8; processing instruction: 7; etc.)\n\t\t\t// nodeType < 6 works because attributes (2) do not appear as children\n\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n\t\t\t\tif ( elem.nodeType < 6 ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\n\t\t\"parent\": function( elem ) {\n\t\t\treturn !Expr.pseudos[\"empty\"]( elem );\n\t\t},\n\n\t\t// Element/input types\n\t\t\"header\": function( elem ) {\n\t\t\treturn rheader.test( elem.nodeName );\n\t\t},\n\n\t\t\"input\": function( elem ) {\n\t\t\treturn rinputs.test( elem.nodeName );\n\t\t},\n\n\t\t\"button\": function( elem ) {\n\t\t\tvar name = elem.nodeName.toLowerCase();\n\t\t\treturn name === \"input\" && elem.type === \"button\" || name === \"button\";\n\t\t},\n\n\t\t\"text\": function( elem ) {\n\t\t\tvar attr;\n\t\t\treturn elem.nodeName.toLowerCase() === \"input\" &&\n\t\t\t\telem.type === \"text\" &&\n\n\t\t\t\t// Support: IE<8\n\t\t\t\t// New HTML5 attribute values (e.g., \"search\") appear with elem.type === \"text\"\n\t\t\t\t( (attr = elem.getAttribute(\"type\")) == null || attr.toLowerCase() === \"text\" );\n\t\t},\n\n\t\t// Position-in-collection\n\t\t\"first\": createPositionalPseudo(function() {\n\t\t\treturn [ 0 ];\n\t\t}),\n\n\t\t\"last\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\treturn [ length - 1 ];\n\t\t}),\n\n\t\t\"eq\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\treturn [ argument < 0 ? argument + length : argument ];\n\t\t}),\n\n\t\t\"even\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\tvar i = 0;\n\t\t\tfor ( ; i < length; i += 2 ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"odd\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\tvar i = 1;\n\t\t\tfor ( ; i < length; i += 2 ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"lt\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\tvar i = argument < 0 ? argument + length : argument;\n\t\t\tfor ( ; --i >= 0; ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"gt\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\tvar i = argument < 0 ? argument + length : argument;\n\t\t\tfor ( ; ++i < length; ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t})\n\t}\n};\n\nExpr.pseudos[\"nth\"] = Expr.pseudos[\"eq\"];\n\n// Add button/input type pseudos\nfor ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {\n\tExpr.pseudos[ i ] = createInputPseudo( i );\n}\nfor ( i in { submit: true, reset: true } ) {\n\tExpr.pseudos[ i ] = createButtonPseudo( i );\n}\n\n// Easy API for creating new setFilters\nfunction setFilters() {}\nsetFilters.prototype = Expr.filters = Expr.pseudos;\nExpr.setFilters = new setFilters();\n\ntokenize = Sizzle.tokenize = function( selector, parseOnly ) {\n\tvar matched, match, tokens, type,\n\t\tsoFar, groups, preFilters,\n\t\tcached = tokenCache[ selector + \" \" ];\n\n\tif ( cached ) {\n\t\treturn parseOnly ? 0 : cached.slice( 0 );\n\t}\n\n\tsoFar = selector;\n\tgroups = [];\n\tpreFilters = Expr.preFilter;\n\n\twhile ( soFar ) {\n\n\t\t// Comma and first run\n\t\tif ( !matched || (match = rcomma.exec( soFar )) ) {\n\t\t\tif ( match ) {\n\t\t\t\t// Don't consume trailing commas as valid\n\t\t\t\tsoFar = soFar.slice( match[0].length ) || soFar;\n\t\t\t}\n\t\t\tgroups.push( (tokens = []) );\n\t\t}\n\n\t\tmatched = false;\n\n\t\t// Combinators\n\t\tif ( (match = rcombinators.exec( soFar )) ) {\n\t\t\tmatched = match.shift();\n\t\t\ttokens.push({\n\t\t\t\tvalue: matched,\n\t\t\t\t// Cast descendant combinators to space\n\t\t\t\ttype: match[0].replace( rtrim, \" \" )\n\t\t\t});\n\t\t\tsoFar = soFar.slice( matched.length );\n\t\t}\n\n\t\t// Filters\n\t\tfor ( type in Expr.filter ) {\n\t\t\tif ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||\n\t\t\t\t(match = preFilters[ type ]( match ))) ) {\n\t\t\t\tmatched = match.shift();\n\t\t\t\ttokens.push({\n\t\t\t\t\tvalue: matched,\n\t\t\t\t\ttype: type,\n\t\t\t\t\tmatches: match\n\t\t\t\t});\n\t\t\t\tsoFar = soFar.slice( matched.length );\n\t\t\t}\n\t\t}\n\n\t\tif ( !matched ) {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\t// Return the length of the invalid excess\n\t// if we're just parsing\n\t// Otherwise, throw an error or return tokens\n\treturn parseOnly ?\n\t\tsoFar.length :\n\t\tsoFar ?\n\t\t\tSizzle.error( selector ) :\n\t\t\t// Cache the tokens\n\t\t\ttokenCache( selector, groups ).slice( 0 );\n};\n\nfunction toSelector( tokens ) {\n\tvar i = 0,\n\t\tlen = tokens.length,\n\t\tselector = \"\";\n\tfor ( ; i < len; i++ ) {\n\t\tselector += tokens[i].value;\n\t}\n\treturn selector;\n}\n\nfunction addCombinator( matcher, combinator, base ) {\n\tvar dir = combinator.dir,\n\t\tskip = combinator.next,\n\t\tkey = skip || dir,\n\t\tcheckNonElements = base && key === \"parentNode\",\n\t\tdoneName = done++;\n\n\treturn combinator.first ?\n\t\t// Check against closest ancestor/preceding element\n\t\tfunction( elem, context, xml ) {\n\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\treturn matcher( elem, context, xml );\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t} :\n\n\t\t// Check against all ancestor/preceding elements\n\t\tfunction( elem, context, xml ) {\n\t\t\tvar oldCache, uniqueCache, outerCache,\n\t\t\t\tnewCache = [ dirruns, doneName ];\n\n\t\t\t// We can't set arbitrary data on XML nodes, so they don't benefit from combinator caching\n\t\t\tif ( xml ) {\n\t\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\t\tif ( matcher( elem, context, xml ) ) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\t\touterCache = elem[ expando ] || (elem[ expando ] = {});\n\n\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\tuniqueCache = outerCache[ elem.uniqueID ] || (outerCache[ elem.uniqueID ] = {});\n\n\t\t\t\t\t\tif ( skip && skip === elem.nodeName.toLowerCase() ) {\n\t\t\t\t\t\t\telem = elem[ dir ] || elem;\n\t\t\t\t\t\t} else if ( (oldCache = uniqueCache[ key ]) &&\n\t\t\t\t\t\t\toldCache[ 0 ] === dirruns && oldCache[ 1 ] === doneName ) {\n\n\t\t\t\t\t\t\t// Assign to newCache so results back-propagate to previous elements\n\t\t\t\t\t\t\treturn (newCache[ 2 ] = oldCache[ 2 ]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Reuse newcache so results back-propagate to previous elements\n\t\t\t\t\t\t\tuniqueCache[ key ] = newCache;\n\n\t\t\t\t\t\t\t// A match means we're done; a fail means we have to keep checking\n\t\t\t\t\t\t\tif ( (newCache[ 2 ] = matcher( elem, context, xml )) ) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n}\n\nfunction elementMatcher( matchers ) {\n\treturn matchers.length > 1 ?\n\t\tfunction( elem, context, xml ) {\n\t\t\tvar i = matchers.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( !matchers[i]( elem, context, xml ) ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t} :\n\t\tmatchers[0];\n}\n\nfunction multipleContexts( selector, contexts, results ) {\n\tvar i = 0,\n\t\tlen = contexts.length;\n\tfor ( ; i < len; i++ ) {\n\t\tSizzle( selector, contexts[i], results );\n\t}\n\treturn results;\n}\n\nfunction condense( unmatched, map, filter, context, xml ) {\n\tvar elem,\n\t\tnewUnmatched = [],\n\t\ti = 0,\n\t\tlen = unmatched.length,\n\t\tmapped = map != null;\n\n\tfor ( ; i < len; i++ ) {\n\t\tif ( (elem = unmatched[i]) ) {\n\t\t\tif ( !filter || filter( elem, context, xml ) ) {\n\t\t\t\tnewUnmatched.push( elem );\n\t\t\t\tif ( mapped ) {\n\t\t\t\t\tmap.push( i );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn newUnmatched;\n}\n\nfunction setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {\n\tif ( postFilter && !postFilter[ expando ] ) {\n\t\tpostFilter = setMatcher( postFilter );\n\t}\n\tif ( postFinder && !postFinder[ expando ] ) {\n\t\tpostFinder = setMatcher( postFinder, postSelector );\n\t}\n\treturn markFunction(function( seed, results, context, xml ) {\n\t\tvar temp, i, elem,\n\t\t\tpreMap = [],\n\t\t\tpostMap = [],\n\t\t\tpreexisting = results.length,\n\n\t\t\t// Get initial elements from seed or context\n\t\t\telems = seed || multipleContexts( selector || \"*\", context.nodeType ? [ context ] : context, [] ),\n\n\t\t\t// Prefilter to get matcher input, preserving a map for seed-results synchronization\n\t\t\tmatcherIn = preFilter && ( seed || !selector ) ?\n\t\t\t\tcondense( elems, preMap, preFilter, context, xml ) :\n\t\t\t\telems,\n\n\t\t\tmatcherOut = matcher ?\n\t\t\t\t// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,\n\t\t\t\tpostFinder || ( seed ? preFilter : preexisting || postFilter ) ?\n\n\t\t\t\t\t// ...intermediate processing is necessary\n\t\t\t\t\t[] :\n\n\t\t\t\t\t// ...otherwise use results directly\n\t\t\t\t\tresults :\n\t\t\t\tmatcherIn;\n\n\t\t// Find primary matches\n\t\tif ( matcher ) {\n\t\t\tmatcher( matcherIn, matcherOut, context, xml );\n\t\t}\n\n\t\t// Apply postFilter\n\t\tif ( postFilter ) {\n\t\t\ttemp = condense( matcherOut, postMap );\n\t\t\tpostFilter( temp, [], context, xml );\n\n\t\t\t// Un-match failing elements by moving them back to matcherIn\n\t\t\ti = temp.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( (elem = temp[i]) ) {\n\t\t\t\t\tmatcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( seed ) {\n\t\t\tif ( postFinder || preFilter ) {\n\t\t\t\tif ( postFinder ) {\n\t\t\t\t\t// Get the final matcherOut by condensing this intermediate into postFinder contexts\n\t\t\t\t\ttemp = [];\n\t\t\t\t\ti = matcherOut.length;\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tif ( (elem = matcherOut[i]) ) {\n\t\t\t\t\t\t\t// Restore matcherIn since elem is not yet a final match\n\t\t\t\t\t\t\ttemp.push( (matcherIn[i] = elem) );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tpostFinder( null, (matcherOut = []), temp, xml );\n\t\t\t\t}\n\n\t\t\t\t// Move matched elements from seed to results to keep them synchronized\n\t\t\t\ti = matcherOut.length;\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\tif ( (elem = matcherOut[i]) &&\n\t\t\t\t\t\t(temp = postFinder ? indexOf( seed, elem ) : preMap[i]) > -1 ) {\n\n\t\t\t\t\t\tseed[temp] = !(results[temp] = elem);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Add elements to results, through postFinder if defined\n\t\t} else {\n\t\t\tmatcherOut = condense(\n\t\t\t\tmatcherOut === results ?\n\t\t\t\t\tmatcherOut.splice( preexisting, matcherOut.length ) :\n\t\t\t\t\tmatcherOut\n\t\t\t);\n\t\t\tif ( postFinder ) {\n\t\t\t\tpostFinder( null, results, matcherOut, xml );\n\t\t\t} else {\n\t\t\t\tpush.apply( results, matcherOut );\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction matcherFromTokens( tokens ) {\n\tvar checkContext, matcher, j,\n\t\tlen = tokens.length,\n\t\tleadingRelative = Expr.relative[ tokens[0].type ],\n\t\timplicitRelative = leadingRelative || Expr.relative[\" \"],\n\t\ti = leadingRelative ? 1 : 0,\n\n\t\t// The foundational matcher ensures that elements are reachable from top-level context(s)\n\t\tmatchContext = addCombinator( function( elem ) {\n\t\t\treturn elem === checkContext;\n\t\t}, implicitRelative, true ),\n\t\tmatchAnyContext = addCombinator( function( elem ) {\n\t\t\treturn indexOf( checkContext, elem ) > -1;\n\t\t}, implicitRelative, true ),\n\t\tmatchers = [ function( elem, context, xml ) {\n\t\t\tvar ret = ( !leadingRelative && ( xml || context !== outermostContext ) ) || (\n\t\t\t\t(checkContext = context).nodeType ?\n\t\t\t\t\tmatchContext( elem, context, xml ) :\n\t\t\t\t\tmatchAnyContext( elem, context, xml ) );\n\t\t\t// Avoid hanging onto element (issue #299)\n\t\t\tcheckContext = null;\n\t\t\treturn ret;\n\t\t} ];\n\n\tfor ( ; i < len; i++ ) {\n\t\tif ( (matcher = Expr.relative[ tokens[i].type ]) ) {\n\t\t\tmatchers = [ addCombinator(elementMatcher( matchers ), matcher) ];\n\t\t} else {\n\t\t\tmatcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );\n\n\t\t\t// Return special upon seeing a positional matcher\n\t\t\tif ( matcher[ expando ] ) {\n\t\t\t\t// Find the next relative operator (if any) for proper handling\n\t\t\t\tj = ++i;\n\t\t\t\tfor ( ; j < len; j++ ) {\n\t\t\t\t\tif ( Expr.relative[ tokens[j].type ] ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn setMatcher(\n\t\t\t\t\ti > 1 && elementMatcher( matchers ),\n\t\t\t\t\ti > 1 && toSelector(\n\t\t\t\t\t\t// If the preceding token was a descendant combinator, insert an implicit any-element `*`\n\t\t\t\t\t\ttokens.slice( 0, i - 1 ).concat({ value: tokens[ i - 2 ].type === \" \" ? \"*\" : \"\" })\n\t\t\t\t\t).replace( rtrim, \"$1\" ),\n\t\t\t\t\tmatcher,\n\t\t\t\t\ti < j && matcherFromTokens( tokens.slice( i, j ) ),\n\t\t\t\t\tj < len && matcherFromTokens( (tokens = tokens.slice( j )) ),\n\t\t\t\t\tj < len && toSelector( tokens )\n\t\t\t\t);\n\t\t\t}\n\t\t\tmatchers.push( matcher );\n\t\t}\n\t}\n\n\treturn elementMatcher( matchers );\n}\n\nfunction matcherFromGroupMatchers( elementMatchers, setMatchers ) {\n\tvar bySet = setMatchers.length > 0,\n\t\tbyElement = elementMatchers.length > 0,\n\t\tsuperMatcher = function( seed, context, xml, results, outermost ) {\n\t\t\tvar elem, j, matcher,\n\t\t\t\tmatchedCount = 0,\n\t\t\t\ti = \"0\",\n\t\t\t\tunmatched = seed && [],\n\t\t\t\tsetMatched = [],\n\t\t\t\tcontextBackup = outermostContext,\n\t\t\t\t// We must always have either seed elements or outermost context\n\t\t\t\telems = seed || byElement && Expr.find[\"TAG\"]( \"*\", outermost ),\n\t\t\t\t// Use integer dirruns iff this is the outermost matcher\n\t\t\t\tdirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1),\n\t\t\t\tlen = elems.length;\n\n\t\t\tif ( outermost ) {\n\t\t\t\toutermostContext = context === document || context || outermost;\n\t\t\t}\n\n\t\t\t// Add elements passing elementMatchers directly to results\n\t\t\t// Support: IE<9, Safari\n\t\t\t// Tolerate NodeList properties (IE: \"length\"; Safari: <number>) matching elements by id\n\t\t\tfor ( ; i !== len && (elem = elems[i]) != null; i++ ) {\n\t\t\t\tif ( byElement && elem ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\tif ( !context && elem.ownerDocument !== document ) {\n\t\t\t\t\t\tsetDocument( elem );\n\t\t\t\t\t\txml = !documentIsHTML;\n\t\t\t\t\t}\n\t\t\t\t\twhile ( (matcher = elementMatchers[j++]) ) {\n\t\t\t\t\t\tif ( matcher( elem, context || document, xml) ) {\n\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ( outermost ) {\n\t\t\t\t\t\tdirruns = dirrunsUnique;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Track unmatched elements for set filters\n\t\t\t\tif ( bySet ) {\n\t\t\t\t\t// They will have gone through all possible matchers\n\t\t\t\t\tif ( (elem = !matcher && elem) ) {\n\t\t\t\t\t\tmatchedCount--;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Lengthen the array for every element, matched or not\n\t\t\t\t\tif ( seed ) {\n\t\t\t\t\t\tunmatched.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// `i` is now the count of elements visited above, and adding it to `matchedCount`\n\t\t\t// makes the latter nonnegative.\n\t\t\tmatchedCount += i;\n\n\t\t\t// Apply set filters to unmatched elements\n\t\t\t// NOTE: This can be skipped if there are no unmatched elements (i.e., `matchedCount`\n\t\t\t// equals `i`), unless we didn't visit _any_ elements in the above loop because we have\n\t\t\t// no element matchers and no seed.\n\t\t\t// Incrementing an initially-string \"0\" `i` allows `i` to remain a string only in that\n\t\t\t// case, which will result in a \"00\" `matchedCount` that differs from `i` but is also\n\t\t\t// numerically zero.\n\t\t\tif ( bySet && i !== matchedCount ) {\n\t\t\t\tj = 0;\n\t\t\t\twhile ( (matcher = setMatchers[j++]) ) {\n\t\t\t\t\tmatcher( unmatched, setMatched, context, xml );\n\t\t\t\t}\n\n\t\t\t\tif ( seed ) {\n\t\t\t\t\t// Reintegrate element matches to eliminate the need for sorting\n\t\t\t\t\tif ( matchedCount > 0 ) {\n\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\tif ( !(unmatched[i] || setMatched[i]) ) {\n\t\t\t\t\t\t\t\tsetMatched[i] = pop.call( results );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Discard index placeholder values to get only actual matches\n\t\t\t\t\tsetMatched = condense( setMatched );\n\t\t\t\t}\n\n\t\t\t\t// Add matches to results\n\t\t\t\tpush.apply( results, setMatched );\n\n\t\t\t\t// Seedless set matches succeeding multiple successful matchers stipulate sorting\n\t\t\t\tif ( outermost && !seed && setMatched.length > 0 &&\n\t\t\t\t\t( matchedCount + setMatchers.length ) > 1 ) {\n\n\t\t\t\t\tSizzle.uniqueSort( results );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Override manipulation of globals by nested matchers\n\t\t\tif ( outermost ) {\n\t\t\t\tdirruns = dirrunsUnique;\n\t\t\t\toutermostContext = contextBackup;\n\t\t\t}\n\n\t\t\treturn unmatched;\n\t\t};\n\n\treturn bySet ?\n\t\tmarkFunction( superMatcher ) :\n\t\tsuperMatcher;\n}\n\ncompile = Sizzle.compile = function( selector, match /* Internal Use Only */ ) {\n\tvar i,\n\t\tsetMatchers = [],\n\t\telementMatchers = [],\n\t\tcached = compilerCache[ selector + \" \" ];\n\n\tif ( !cached ) {\n\t\t// Generate a function of recursive functions that can be used to check each element\n\t\tif ( !match ) {\n\t\t\tmatch = tokenize( selector );\n\t\t}\n\t\ti = match.length;\n\t\twhile ( i-- ) {\n\t\t\tcached = matcherFromTokens( match[i] );\n\t\t\tif ( cached[ expando ] ) {\n\t\t\t\tsetMatchers.push( cached );\n\t\t\t} else {\n\t\t\t\telementMatchers.push( cached );\n\t\t\t}\n\t\t}\n\n\t\t// Cache the compiled function\n\t\tcached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );\n\n\t\t// Save selector and tokenization\n\t\tcached.selector = selector;\n\t}\n\treturn cached;\n};\n\n/**\n * A low-level selection function that works with Sizzle's compiled\n *  selector functions\n * @param {String|Function} selector A selector or a pre-compiled\n *  selector function built with Sizzle.compile\n * @param {Element} context\n * @param {Array} [results]\n * @param {Array} [seed] A set of elements to match against\n */\nselect = Sizzle.select = function( selector, context, results, seed ) {\n\tvar i, tokens, token, type, find,\n\t\tcompiled = typeof selector === \"function\" && selector,\n\t\tmatch = !seed && tokenize( (selector = compiled.selector || selector) );\n\n\tresults = results || [];\n\n\t// Try to minimize operations if there is only one selector in the list and no seed\n\t// (the latter of which guarantees us context)\n\tif ( match.length === 1 ) {\n\n\t\t// Reduce context if the leading compound selector is an ID\n\t\ttokens = match[0] = match[0].slice( 0 );\n\t\tif ( tokens.length > 2 && (token = tokens[0]).type === \"ID\" &&\n\t\t\t\tcontext.nodeType === 9 && documentIsHTML && Expr.relative[ tokens[1].type ] ) {\n\n\t\t\tcontext = ( Expr.find[\"ID\"]( token.matches[0].replace(runescape, funescape), context ) || [] )[0];\n\t\t\tif ( !context ) {\n\t\t\t\treturn results;\n\n\t\t\t// Precompiled matchers will still verify ancestry, so step up a level\n\t\t\t} else if ( compiled ) {\n\t\t\t\tcontext = context.parentNode;\n\t\t\t}\n\n\t\t\tselector = selector.slice( tokens.shift().value.length );\n\t\t}\n\n\t\t// Fetch a seed set for right-to-left matching\n\t\ti = matchExpr[\"needsContext\"].test( selector ) ? 0 : tokens.length;\n\t\twhile ( i-- ) {\n\t\t\ttoken = tokens[i];\n\n\t\t\t// Abort if we hit a combinator\n\t\t\tif ( Expr.relative[ (type = token.type) ] ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( (find = Expr.find[ type ]) ) {\n\t\t\t\t// Search, expanding context for leading sibling combinators\n\t\t\t\tif ( (seed = find(\n\t\t\t\t\ttoken.matches[0].replace( runescape, funescape ),\n\t\t\t\t\trsibling.test( tokens[0].type ) && testContext( context.parentNode ) || context\n\t\t\t\t)) ) {\n\n\t\t\t\t\t// If seed is empty or no tokens remain, we can return early\n\t\t\t\t\ttokens.splice( i, 1 );\n\t\t\t\t\tselector = seed.length && toSelector( tokens );\n\t\t\t\t\tif ( !selector ) {\n\t\t\t\t\t\tpush.apply( results, seed );\n\t\t\t\t\t\treturn results;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Compile and execute a filtering function if one is not provided\n\t// Provide `match` to avoid retokenization if we modified the selector above\n\t( compiled || compile( selector, match ) )(\n\t\tseed,\n\t\tcontext,\n\t\t!documentIsHTML,\n\t\tresults,\n\t\t!context || rsibling.test( selector ) && testContext( context.parentNode ) || context\n\t);\n\treturn results;\n};\n\n// One-time assignments\n\n// Sort stability\nsupport.sortStable = expando.split(\"\").sort( sortOrder ).join(\"\") === expando;\n\n// Support: Chrome 14-35+\n// Always assume duplicates if they aren't passed to the comparison function\nsupport.detectDuplicates = !!hasDuplicate;\n\n// Initialize against the default document\nsetDocument();\n\n// Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)\n// Detached nodes confoundingly follow *each other*\nsupport.sortDetached = assert(function( el ) {\n\t// Should return 1, but returns 4 (following)\n\treturn el.compareDocumentPosition( document.createElement(\"fieldset\") ) & 1;\n});\n\n// Support: IE<8\n// Prevent attribute/property \"interpolation\"\n// https://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx\nif ( !assert(function( el ) {\n\tel.innerHTML = \"<a href='#'></a>\";\n\treturn el.firstChild.getAttribute(\"href\") === \"#\" ;\n}) ) {\n\taddHandle( \"type|href|height|width\", function( elem, name, isXML ) {\n\t\tif ( !isXML ) {\n\t\t\treturn elem.getAttribute( name, name.toLowerCase() === \"type\" ? 1 : 2 );\n\t\t}\n\t});\n}\n\n// Support: IE<9\n// Use defaultValue in place of getAttribute(\"value\")\nif ( !support.attributes || !assert(function( el ) {\n\tel.innerHTML = \"<input/>\";\n\tel.firstChild.setAttribute( \"value\", \"\" );\n\treturn el.firstChild.getAttribute( \"value\" ) === \"\";\n}) ) {\n\taddHandle( \"value\", function( elem, name, isXML ) {\n\t\tif ( !isXML && elem.nodeName.toLowerCase() === \"input\" ) {\n\t\t\treturn elem.defaultValue;\n\t\t}\n\t});\n}\n\n// Support: IE<9\n// Use getAttributeNode to fetch booleans when getAttribute lies\nif ( !assert(function( el ) {\n\treturn el.getAttribute(\"disabled\") == null;\n}) ) {\n\taddHandle( booleans, function( elem, name, isXML ) {\n\t\tvar val;\n\t\tif ( !isXML ) {\n\t\t\treturn elem[ name ] === true ? name.toLowerCase() :\n\t\t\t\t\t(val = elem.getAttributeNode( name )) && val.specified ?\n\t\t\t\t\tval.value :\n\t\t\t\tnull;\n\t\t}\n\t});\n}\n\nreturn Sizzle;\n\n})( window );\n\n\n\njQuery.find = Sizzle;\njQuery.expr = Sizzle.selectors;\n\n// Deprecated\njQuery.expr[ \":\" ] = jQuery.expr.pseudos;\njQuery.uniqueSort = jQuery.unique = Sizzle.uniqueSort;\njQuery.text = Sizzle.getText;\njQuery.isXMLDoc = Sizzle.isXML;\njQuery.contains = Sizzle.contains;\njQuery.escapeSelector = Sizzle.escape;\n\n\n\n\nvar dir = function( elem, dir, until ) {\n\tvar matched = [],\n\t\ttruncate = until !== undefined;\n\n\twhile ( ( elem = elem[ dir ] ) && elem.nodeType !== 9 ) {\n\t\tif ( elem.nodeType === 1 ) {\n\t\t\tif ( truncate && jQuery( elem ).is( until ) ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tmatched.push( elem );\n\t\t}\n\t}\n\treturn matched;\n};\n\n\nvar siblings = function( n, elem ) {\n\tvar matched = [];\n\n\tfor ( ; n; n = n.nextSibling ) {\n\t\tif ( n.nodeType === 1 && n !== elem ) {\n\t\t\tmatched.push( n );\n\t\t}\n\t}\n\n\treturn matched;\n};\n\n\nvar rneedsContext = jQuery.expr.match.needsContext;\n\n\n\nfunction nodeName( elem, name ) {\n\n  return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();\n\n};\nvar rsingleTag = ( /^<([a-z][^\\/\\0>:\\x20\\t\\r\\n\\f]*)[\\x20\\t\\r\\n\\f]*\\/?>(?:<\\/\\1>|)$/i );\n\n\n\nvar risSimple = /^.[^:#\\[\\.,]*$/;\n\n// Implement the identical functionality for filter and not\nfunction winnow( elements, qualifier, not ) {\n\tif ( jQuery.isFunction( qualifier ) ) {\n\t\treturn jQuery.grep( elements, function( elem, i ) {\n\t\t\treturn !!qualifier.call( elem, i, elem ) !== not;\n\t\t} );\n\t}\n\n\t// Single element\n\tif ( qualifier.nodeType ) {\n\t\treturn jQuery.grep( elements, function( elem ) {\n\t\t\treturn ( elem === qualifier ) !== not;\n\t\t} );\n\t}\n\n\t// Arraylike of elements (jQuery, arguments, Array)\n\tif ( typeof qualifier !== \"string\" ) {\n\t\treturn jQuery.grep( elements, function( elem ) {\n\t\t\treturn ( indexOf.call( qualifier, elem ) > -1 ) !== not;\n\t\t} );\n\t}\n\n\t// Simple selector that can be filtered directly, removing non-Elements\n\tif ( risSimple.test( qualifier ) ) {\n\t\treturn jQuery.filter( qualifier, elements, not );\n\t}\n\n\t// Complex selector, compare the two sets, removing non-Elements\n\tqualifier = jQuery.filter( qualifier, elements );\n\treturn jQuery.grep( elements, function( elem ) {\n\t\treturn ( indexOf.call( qualifier, elem ) > -1 ) !== not && elem.nodeType === 1;\n\t} );\n}\n\njQuery.filter = function( expr, elems, not ) {\n\tvar elem = elems[ 0 ];\n\n\tif ( not ) {\n\t\texpr = \":not(\" + expr + \")\";\n\t}\n\n\tif ( elems.length === 1 && elem.nodeType === 1 ) {\n\t\treturn jQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [];\n\t}\n\n\treturn jQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {\n\t\treturn elem.nodeType === 1;\n\t} ) );\n};\n\njQuery.fn.extend( {\n\tfind: function( selector ) {\n\t\tvar i, ret,\n\t\t\tlen = this.length,\n\t\t\tself = this;\n\n\t\tif ( typeof selector !== \"string\" ) {\n\t\t\treturn this.pushStack( jQuery( selector ).filter( function() {\n\t\t\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\t\t\tif ( jQuery.contains( self[ i ], this ) ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} ) );\n\t\t}\n\n\t\tret = this.pushStack( [] );\n\n\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\tjQuery.find( selector, self[ i ], ret );\n\t\t}\n\n\t\treturn len > 1 ? jQuery.uniqueSort( ret ) : ret;\n\t},\n\tfilter: function( selector ) {\n\t\treturn this.pushStack( winnow( this, selector || [], false ) );\n\t},\n\tnot: function( selector ) {\n\t\treturn this.pushStack( winnow( this, selector || [], true ) );\n\t},\n\tis: function( selector ) {\n\t\treturn !!winnow(\n\t\t\tthis,\n\n\t\t\t// If this is a positional/relative selector, check membership in the returned set\n\t\t\t// so $(\"p:first\").is(\"p:last\") won't return true for a doc with two \"p\".\n\t\t\ttypeof selector === \"string\" && rneedsContext.test( selector ) ?\n\t\t\t\tjQuery( selector ) :\n\t\t\t\tselector || [],\n\t\t\tfalse\n\t\t).length;\n\t}\n} );\n\n\n// Initialize a jQuery object\n\n\n// A central reference to the root jQuery(document)\nvar rootjQuery,\n\n\t// A simple way to check for HTML strings\n\t// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)\n\t// Strict HTML recognition (#11290: must start with <)\n\t// Shortcut simple #id case for speed\n\trquickExpr = /^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]+))$/,\n\n\tinit = jQuery.fn.init = function( selector, context, root ) {\n\t\tvar match, elem;\n\n\t\t// HANDLE: $(\"\"), $(null), $(undefined), $(false)\n\t\tif ( !selector ) {\n\t\t\treturn this;\n\t\t}\n\n\t\t// Method init() accepts an alternate rootjQuery\n\t\t// so migrate can support jQuery.sub (gh-2101)\n\t\troot = root || rootjQuery;\n\n\t\t// Handle HTML strings\n\t\tif ( typeof selector === \"string\" ) {\n\t\t\tif ( selector[ 0 ] === \"<\" &&\n\t\t\t\tselector[ selector.length - 1 ] === \">\" &&\n\t\t\t\tselector.length >= 3 ) {\n\n\t\t\t\t// Assume that strings that start and end with <> are HTML and skip the regex check\n\t\t\t\tmatch = [ null, selector, null ];\n\n\t\t\t} else {\n\t\t\t\tmatch = rquickExpr.exec( selector );\n\t\t\t}\n\n\t\t\t// Match html or make sure no context is specified for #id\n\t\t\tif ( match && ( match[ 1 ] || !context ) ) {\n\n\t\t\t\t// HANDLE: $(html) -> $(array)\n\t\t\t\tif ( match[ 1 ] ) {\n\t\t\t\t\tcontext = context instanceof jQuery ? context[ 0 ] : context;\n\n\t\t\t\t\t// Option to run scripts is true for back-compat\n\t\t\t\t\t// Intentionally let the error be thrown if parseHTML is not present\n\t\t\t\t\tjQuery.merge( this, jQuery.parseHTML(\n\t\t\t\t\t\tmatch[ 1 ],\n\t\t\t\t\t\tcontext && context.nodeType ? context.ownerDocument || context : document,\n\t\t\t\t\t\ttrue\n\t\t\t\t\t) );\n\n\t\t\t\t\t// HANDLE: $(html, props)\n\t\t\t\t\tif ( rsingleTag.test( match[ 1 ] ) && jQuery.isPlainObject( context ) ) {\n\t\t\t\t\t\tfor ( match in context ) {\n\n\t\t\t\t\t\t\t// Properties of context are called as methods if possible\n\t\t\t\t\t\t\tif ( jQuery.isFunction( this[ match ] ) ) {\n\t\t\t\t\t\t\t\tthis[ match ]( context[ match ] );\n\n\t\t\t\t\t\t\t// ...and otherwise set as attributes\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.attr( match, context[ match ] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this;\n\n\t\t\t\t// HANDLE: $(#id)\n\t\t\t\t} else {\n\t\t\t\t\telem = document.getElementById( match[ 2 ] );\n\n\t\t\t\t\tif ( elem ) {\n\n\t\t\t\t\t\t// Inject the element directly into the jQuery object\n\t\t\t\t\t\tthis[ 0 ] = elem;\n\t\t\t\t\t\tthis.length = 1;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\n\t\t\t// HANDLE: $(expr, $(...))\n\t\t\t} else if ( !context || context.jquery ) {\n\t\t\t\treturn ( context || root ).find( selector );\n\n\t\t\t// HANDLE: $(expr, context)\n\t\t\t// (which is just equivalent to: $(context).find(expr)\n\t\t\t} else {\n\t\t\t\treturn this.constructor( context ).find( selector );\n\t\t\t}\n\n\t\t// HANDLE: $(DOMElement)\n\t\t} else if ( selector.nodeType ) {\n\t\t\tthis[ 0 ] = selector;\n\t\t\tthis.length = 1;\n\t\t\treturn this;\n\n\t\t// HANDLE: $(function)\n\t\t// Shortcut for document ready\n\t\t} else if ( jQuery.isFunction( selector ) ) {\n\t\t\treturn root.ready !== undefined ?\n\t\t\t\troot.ready( selector ) :\n\n\t\t\t\t// Execute immediately if ready is not present\n\t\t\t\tselector( jQuery );\n\t\t}\n\n\t\treturn jQuery.makeArray( selector, this );\n\t};\n\n// Give the init function the jQuery prototype for later instantiation\ninit.prototype = jQuery.fn;\n\n// Initialize central reference\nrootjQuery = jQuery( document );\n\n\nvar rparentsprev = /^(?:parents|prev(?:Until|All))/,\n\n\t// Methods guaranteed to produce a unique set when starting from a unique set\n\tguaranteedUnique = {\n\t\tchildren: true,\n\t\tcontents: true,\n\t\tnext: true,\n\t\tprev: true\n\t};\n\njQuery.fn.extend( {\n\thas: function( target ) {\n\t\tvar targets = jQuery( target, this ),\n\t\t\tl = targets.length;\n\n\t\treturn this.filter( function() {\n\t\t\tvar i = 0;\n\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\tif ( jQuery.contains( this, targets[ i ] ) ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t},\n\n\tclosest: function( selectors, context ) {\n\t\tvar cur,\n\t\t\ti = 0,\n\t\t\tl = this.length,\n\t\t\tmatched = [],\n\t\t\ttargets = typeof selectors !== \"string\" && jQuery( selectors );\n\n\t\t// Positional selectors never match, since there's no _selection_ context\n\t\tif ( !rneedsContext.test( selectors ) ) {\n\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\tfor ( cur = this[ i ]; cur && cur !== context; cur = cur.parentNode ) {\n\n\t\t\t\t\t// Always skip document fragments\n\t\t\t\t\tif ( cur.nodeType < 11 && ( targets ?\n\t\t\t\t\t\ttargets.index( cur ) > -1 :\n\n\t\t\t\t\t\t// Don't pass non-elements to Sizzle\n\t\t\t\t\t\tcur.nodeType === 1 &&\n\t\t\t\t\t\t\tjQuery.find.matchesSelector( cur, selectors ) ) ) {\n\n\t\t\t\t\t\tmatched.push( cur );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.pushStack( matched.length > 1 ? jQuery.uniqueSort( matched ) : matched );\n\t},\n\n\t// Determine the position of an element within the set\n\tindex: function( elem ) {\n\n\t\t// No argument, return index in parent\n\t\tif ( !elem ) {\n\t\t\treturn ( this[ 0 ] && this[ 0 ].parentNode ) ? this.first().prevAll().length : -1;\n\t\t}\n\n\t\t// Index in selector\n\t\tif ( typeof elem === \"string\" ) {\n\t\t\treturn indexOf.call( jQuery( elem ), this[ 0 ] );\n\t\t}\n\n\t\t// Locate the position of the desired element\n\t\treturn indexOf.call( this,\n\n\t\t\t// If it receives a jQuery object, the first element is used\n\t\t\telem.jquery ? elem[ 0 ] : elem\n\t\t);\n\t},\n\n\tadd: function( selector, context ) {\n\t\treturn this.pushStack(\n\t\t\tjQuery.uniqueSort(\n\t\t\t\tjQuery.merge( this.get(), jQuery( selector, context ) )\n\t\t\t)\n\t\t);\n\t},\n\n\taddBack: function( selector ) {\n\t\treturn this.add( selector == null ?\n\t\t\tthis.prevObject : this.prevObject.filter( selector )\n\t\t);\n\t}\n} );\n\nfunction sibling( cur, dir ) {\n\twhile ( ( cur = cur[ dir ] ) && cur.nodeType !== 1 ) {}\n\treturn cur;\n}\n\njQuery.each( {\n\tparent: function( elem ) {\n\t\tvar parent = elem.parentNode;\n\t\treturn parent && parent.nodeType !== 11 ? parent : null;\n\t},\n\tparents: function( elem ) {\n\t\treturn dir( elem, \"parentNode\" );\n\t},\n\tparentsUntil: function( elem, i, until ) {\n\t\treturn dir( elem, \"parentNode\", until );\n\t},\n\tnext: function( elem ) {\n\t\treturn sibling( elem, \"nextSibling\" );\n\t},\n\tprev: function( elem ) {\n\t\treturn sibling( elem, \"previousSibling\" );\n\t},\n\tnextAll: function( elem ) {\n\t\treturn dir( elem, \"nextSibling\" );\n\t},\n\tprevAll: function( elem ) {\n\t\treturn dir( elem, \"previousSibling\" );\n\t},\n\tnextUntil: function( elem, i, until ) {\n\t\treturn dir( elem, \"nextSibling\", until );\n\t},\n\tprevUntil: function( elem, i, until ) {\n\t\treturn dir( elem, \"previousSibling\", until );\n\t},\n\tsiblings: function( elem ) {\n\t\treturn siblings( ( elem.parentNode || {} ).firstChild, elem );\n\t},\n\tchildren: function( elem ) {\n\t\treturn siblings( elem.firstChild );\n\t},\n\tcontents: function( elem ) {\n        if ( nodeName( elem, \"iframe\" ) ) {\n            return elem.contentDocument;\n        }\n\n        // Support: IE 9 - 11 only, iOS 7 only, Android Browser <=4.3 only\n        // Treat the template element as a regular one in browsers that\n        // don't support it.\n        if ( nodeName( elem, \"template\" ) ) {\n            elem = elem.content || elem;\n        }\n\n        return jQuery.merge( [], elem.childNodes );\n\t}\n}, function( name, fn ) {\n\tjQuery.fn[ name ] = function( until, selector ) {\n\t\tvar matched = jQuery.map( this, fn, until );\n\n\t\tif ( name.slice( -5 ) !== \"Until\" ) {\n\t\t\tselector = until;\n\t\t}\n\n\t\tif ( selector && typeof selector === \"string\" ) {\n\t\t\tmatched = jQuery.filter( selector, matched );\n\t\t}\n\n\t\tif ( this.length > 1 ) {\n\n\t\t\t// Remove duplicates\n\t\t\tif ( !guaranteedUnique[ name ] ) {\n\t\t\t\tjQuery.uniqueSort( matched );\n\t\t\t}\n\n\t\t\t// Reverse order for parents* and prev-derivatives\n\t\t\tif ( rparentsprev.test( name ) ) {\n\t\t\t\tmatched.reverse();\n\t\t\t}\n\t\t}\n\n\t\treturn this.pushStack( matched );\n\t};\n} );\nvar rnothtmlwhite = ( /[^\\x20\\t\\r\\n\\f]+/g );\n\n\n\n// Convert String-formatted options into Object-formatted ones\nfunction createOptions( options ) {\n\tvar object = {};\n\tjQuery.each( options.match( rnothtmlwhite ) || [], function( _, flag ) {\n\t\tobject[ flag ] = true;\n\t} );\n\treturn object;\n}\n\n/*\n * Create a callback list using the following parameters:\n *\n *\toptions: an optional list of space-separated options that will change how\n *\t\t\tthe callback list behaves or a more traditional option object\n *\n * By default a callback list will act like an event callback list and can be\n * \"fired\" multiple times.\n *\n * Possible options:\n *\n *\tonce:\t\t\twill ensure the callback list can only be fired once (like a Deferred)\n *\n *\tmemory:\t\t\twill keep track of previous values and will call any callback added\n *\t\t\t\t\tafter the list has been fired right away with the latest \"memorized\"\n *\t\t\t\t\tvalues (like a Deferred)\n *\n *\tunique:\t\t\twill ensure a callback can only be added once (no duplicate in the list)\n *\n *\tstopOnFalse:\tinterrupt callings when a callback returns false\n *\n */\njQuery.Callbacks = function( options ) {\n\n\t// Convert options from String-formatted to Object-formatted if needed\n\t// (we check in cache first)\n\toptions = typeof options === \"string\" ?\n\t\tcreateOptions( options ) :\n\t\tjQuery.extend( {}, options );\n\n\tvar // Flag to know if list is currently firing\n\t\tfiring,\n\n\t\t// Last fire value for non-forgettable lists\n\t\tmemory,\n\n\t\t// Flag to know if list was already fired\n\t\tfired,\n\n\t\t// Flag to prevent firing\n\t\tlocked,\n\n\t\t// Actual callback list\n\t\tlist = [],\n\n\t\t// Queue of execution data for repeatable lists\n\t\tqueue = [],\n\n\t\t// Index of currently firing callback (modified by add/remove as needed)\n\t\tfiringIndex = -1,\n\n\t\t// Fire callbacks\n\t\tfire = function() {\n\n\t\t\t// Enforce single-firing\n\t\t\tlocked = locked || options.once;\n\n\t\t\t// Execute callbacks for all pending executions,\n\t\t\t// respecting firingIndex overrides and runtime changes\n\t\t\tfired = firing = true;\n\t\t\tfor ( ; queue.length; firingIndex = -1 ) {\n\t\t\t\tmemory = queue.shift();\n\t\t\t\twhile ( ++firingIndex < list.length ) {\n\n\t\t\t\t\t// Run callback and check for early termination\n\t\t\t\t\tif ( list[ firingIndex ].apply( memory[ 0 ], memory[ 1 ] ) === false &&\n\t\t\t\t\t\toptions.stopOnFalse ) {\n\n\t\t\t\t\t\t// Jump to end and forget the data so .add doesn't re-fire\n\t\t\t\t\t\tfiringIndex = list.length;\n\t\t\t\t\t\tmemory = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Forget the data if we're done with it\n\t\t\tif ( !options.memory ) {\n\t\t\t\tmemory = false;\n\t\t\t}\n\n\t\t\tfiring = false;\n\n\t\t\t// Clean up if we're done firing for good\n\t\t\tif ( locked ) {\n\n\t\t\t\t// Keep an empty list if we have data for future add calls\n\t\t\t\tif ( memory ) {\n\t\t\t\t\tlist = [];\n\n\t\t\t\t// Otherwise, this object is spent\n\t\t\t\t} else {\n\t\t\t\t\tlist = \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t// Actual Callbacks object\n\t\tself = {\n\n\t\t\t// Add a callback or a collection of callbacks to the list\n\t\t\tadd: function() {\n\t\t\t\tif ( list ) {\n\n\t\t\t\t\t// If we have memory from a past run, we should fire after adding\n\t\t\t\t\tif ( memory && !firing ) {\n\t\t\t\t\t\tfiringIndex = list.length - 1;\n\t\t\t\t\t\tqueue.push( memory );\n\t\t\t\t\t}\n\n\t\t\t\t\t( function add( args ) {\n\t\t\t\t\t\tjQuery.each( args, function( _, arg ) {\n\t\t\t\t\t\t\tif ( jQuery.isFunction( arg ) ) {\n\t\t\t\t\t\t\t\tif ( !options.unique || !self.has( arg ) ) {\n\t\t\t\t\t\t\t\t\tlist.push( arg );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if ( arg && arg.length && jQuery.type( arg ) !== \"string\" ) {\n\n\t\t\t\t\t\t\t\t// Inspect recursively\n\t\t\t\t\t\t\t\tadd( arg );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t} )( arguments );\n\n\t\t\t\t\tif ( memory && !firing ) {\n\t\t\t\t\t\tfire();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Remove a callback from the list\n\t\t\tremove: function() {\n\t\t\t\tjQuery.each( arguments, function( _, arg ) {\n\t\t\t\t\tvar index;\n\t\t\t\t\twhile ( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {\n\t\t\t\t\t\tlist.splice( index, 1 );\n\n\t\t\t\t\t\t// Handle firing indexes\n\t\t\t\t\t\tif ( index <= firingIndex ) {\n\t\t\t\t\t\t\tfiringIndex--;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Check if a given callback is in the list.\n\t\t\t// If no argument is given, return whether or not list has callbacks attached.\n\t\t\thas: function( fn ) {\n\t\t\t\treturn fn ?\n\t\t\t\t\tjQuery.inArray( fn, list ) > -1 :\n\t\t\t\t\tlist.length > 0;\n\t\t\t},\n\n\t\t\t// Remove all callbacks from the list\n\t\t\tempty: function() {\n\t\t\t\tif ( list ) {\n\t\t\t\t\tlist = [];\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Disable .fire and .add\n\t\t\t// Abort any current/pending executions\n\t\t\t// Clear all callbacks and values\n\t\t\tdisable: function() {\n\t\t\t\tlocked = queue = [];\n\t\t\t\tlist = memory = \"\";\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\tdisabled: function() {\n\t\t\t\treturn !list;\n\t\t\t},\n\n\t\t\t// Disable .fire\n\t\t\t// Also disable .add unless we have memory (since it would have no effect)\n\t\t\t// Abort any pending executions\n\t\t\tlock: function() {\n\t\t\t\tlocked = queue = [];\n\t\t\t\tif ( !memory && !firing ) {\n\t\t\t\t\tlist = memory = \"\";\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\tlocked: function() {\n\t\t\t\treturn !!locked;\n\t\t\t},\n\n\t\t\t// Call all callbacks with the given context and arguments\n\t\t\tfireWith: function( context, args ) {\n\t\t\t\tif ( !locked ) {\n\t\t\t\t\targs = args || [];\n\t\t\t\t\targs = [ context, args.slice ? args.slice() : args ];\n\t\t\t\t\tqueue.push( args );\n\t\t\t\t\tif ( !firing ) {\n\t\t\t\t\t\tfire();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Call all the callbacks with the given arguments\n\t\t\tfire: function() {\n\t\t\t\tself.fireWith( this, arguments );\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// To know if the callbacks have already been called at least once\n\t\t\tfired: function() {\n\t\t\t\treturn !!fired;\n\t\t\t}\n\t\t};\n\n\treturn self;\n};\n\n\nfunction Identity( v ) {\n\treturn v;\n}\nfunction Thrower( ex ) {\n\tthrow ex;\n}\n\nfunction adoptValue( value, resolve, reject, noValue ) {\n\tvar method;\n\n\ttry {\n\n\t\t// Check for promise aspect first to privilege synchronous behavior\n\t\tif ( value && jQuery.isFunction( ( method = value.promise ) ) ) {\n\t\t\tmethod.call( value ).done( resolve ).fail( reject );\n\n\t\t// Other thenables\n\t\t} else if ( value && jQuery.isFunction( ( method = value.then ) ) ) {\n\t\t\tmethod.call( value, resolve, reject );\n\n\t\t// Other non-thenables\n\t\t} else {\n\n\t\t\t// Control `resolve` arguments by letting Array#slice cast boolean `noValue` to integer:\n\t\t\t// * false: [ value ].slice( 0 ) => resolve( value )\n\t\t\t// * true: [ value ].slice( 1 ) => resolve()\n\t\t\tresolve.apply( undefined, [ value ].slice( noValue ) );\n\t\t}\n\n\t// For Promises/A+, convert exceptions into rejections\n\t// Since jQuery.when doesn't unwrap thenables, we can skip the extra checks appearing in\n\t// Deferred#then to conditionally suppress rejection.\n\t} catch ( value ) {\n\n\t\t// Support: Android 4.0 only\n\t\t// Strict mode functions invoked without .call/.apply get global-object context\n\t\treject.apply( undefined, [ value ] );\n\t}\n}\n\njQuery.extend( {\n\n\tDeferred: function( func ) {\n\t\tvar tuples = [\n\n\t\t\t\t// action, add listener, callbacks,\n\t\t\t\t// ... .then handlers, argument index, [final state]\n\t\t\t\t[ \"notify\", \"progress\", jQuery.Callbacks( \"memory\" ),\n\t\t\t\t\tjQuery.Callbacks( \"memory\" ), 2 ],\n\t\t\t\t[ \"resolve\", \"done\", jQuery.Callbacks( \"once memory\" ),\n\t\t\t\t\tjQuery.Callbacks( \"once memory\" ), 0, \"resolved\" ],\n\t\t\t\t[ \"reject\", \"fail\", jQuery.Callbacks( \"once memory\" ),\n\t\t\t\t\tjQuery.Callbacks( \"once memory\" ), 1, \"rejected\" ]\n\t\t\t],\n\t\t\tstate = \"pending\",\n\t\t\tpromise = {\n\t\t\t\tstate: function() {\n\t\t\t\t\treturn state;\n\t\t\t\t},\n\t\t\t\talways: function() {\n\t\t\t\t\tdeferred.done( arguments ).fail( arguments );\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\t\t\t\t\"catch\": function( fn ) {\n\t\t\t\t\treturn promise.then( null, fn );\n\t\t\t\t},\n\n\t\t\t\t// Keep pipe for back-compat\n\t\t\t\tpipe: function( /* fnDone, fnFail, fnProgress */ ) {\n\t\t\t\t\tvar fns = arguments;\n\n\t\t\t\t\treturn jQuery.Deferred( function( newDefer ) {\n\t\t\t\t\t\tjQuery.each( tuples, function( i, tuple ) {\n\n\t\t\t\t\t\t\t// Map tuples (progress, done, fail) to arguments (done, fail, progress)\n\t\t\t\t\t\t\tvar fn = jQuery.isFunction( fns[ tuple[ 4 ] ] ) && fns[ tuple[ 4 ] ];\n\n\t\t\t\t\t\t\t// deferred.progress(function() { bind to newDefer or newDefer.notify })\n\t\t\t\t\t\t\t// deferred.done(function() { bind to newDefer or newDefer.resolve })\n\t\t\t\t\t\t\t// deferred.fail(function() { bind to newDefer or newDefer.reject })\n\t\t\t\t\t\t\tdeferred[ tuple[ 1 ] ]( function() {\n\t\t\t\t\t\t\t\tvar returned = fn && fn.apply( this, arguments );\n\t\t\t\t\t\t\t\tif ( returned && jQuery.isFunction( returned.promise ) ) {\n\t\t\t\t\t\t\t\t\treturned.promise()\n\t\t\t\t\t\t\t\t\t\t.progress( newDefer.notify )\n\t\t\t\t\t\t\t\t\t\t.done( newDefer.resolve )\n\t\t\t\t\t\t\t\t\t\t.fail( newDefer.reject );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tnewDefer[ tuple[ 0 ] + \"With\" ](\n\t\t\t\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\t\t\t\tfn ? [ returned ] : arguments\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} );\n\t\t\t\t\t\tfns = null;\n\t\t\t\t\t} ).promise();\n\t\t\t\t},\n\t\t\t\tthen: function( onFulfilled, onRejected, onProgress ) {\n\t\t\t\t\tvar maxDepth = 0;\n\t\t\t\t\tfunction resolve( depth, deferred, handler, special ) {\n\t\t\t\t\t\treturn function() {\n\t\t\t\t\t\t\tvar that = this,\n\t\t\t\t\t\t\t\targs = arguments,\n\t\t\t\t\t\t\t\tmightThrow = function() {\n\t\t\t\t\t\t\t\t\tvar returned, then;\n\n\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.3.3.3\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-59\n\t\t\t\t\t\t\t\t\t// Ignore double-resolution attempts\n\t\t\t\t\t\t\t\t\tif ( depth < maxDepth ) {\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturned = handler.apply( that, args );\n\n\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.1\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-48\n\t\t\t\t\t\t\t\t\tif ( returned === deferred.promise() ) {\n\t\t\t\t\t\t\t\t\t\tthrow new TypeError( \"Thenable self-resolution\" );\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Support: Promises/A+ sections 2.3.3.1, 3.5\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-54\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-75\n\t\t\t\t\t\t\t\t\t// Retrieve `then` only once\n\t\t\t\t\t\t\t\t\tthen = returned &&\n\n\t\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.4\n\t\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-64\n\t\t\t\t\t\t\t\t\t\t// Only check objects and functions for thenability\n\t\t\t\t\t\t\t\t\t\t( typeof returned === \"object\" ||\n\t\t\t\t\t\t\t\t\t\t\ttypeof returned === \"function\" ) &&\n\t\t\t\t\t\t\t\t\t\treturned.then;\n\n\t\t\t\t\t\t\t\t\t// Handle a returned thenable\n\t\t\t\t\t\t\t\t\tif ( jQuery.isFunction( then ) ) {\n\n\t\t\t\t\t\t\t\t\t\t// Special processors (notify) just wait for resolution\n\t\t\t\t\t\t\t\t\t\tif ( special ) {\n\t\t\t\t\t\t\t\t\t\t\tthen.call(\n\t\t\t\t\t\t\t\t\t\t\t\treturned,\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Identity, special ),\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Thrower, special )\n\t\t\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\t\t// Normal processors (resolve) also hook into progress\n\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t// ...and disregard older resolution values\n\t\t\t\t\t\t\t\t\t\t\tmaxDepth++;\n\n\t\t\t\t\t\t\t\t\t\t\tthen.call(\n\t\t\t\t\t\t\t\t\t\t\t\treturned,\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Identity, special ),\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Thrower, special ),\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Identity,\n\t\t\t\t\t\t\t\t\t\t\t\t\tdeferred.notifyWith )\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Handle all other returned values\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t// Only substitute handlers pass on context\n\t\t\t\t\t\t\t\t\t\t// and multiple values (non-spec behavior)\n\t\t\t\t\t\t\t\t\t\tif ( handler !== Identity ) {\n\t\t\t\t\t\t\t\t\t\t\tthat = undefined;\n\t\t\t\t\t\t\t\t\t\t\targs = [ returned ];\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t// Process the value(s)\n\t\t\t\t\t\t\t\t\t\t// Default process is resolve\n\t\t\t\t\t\t\t\t\t\t( special || deferred.resolveWith )( that, args );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t// Only normal processors (resolve) catch and reject exceptions\n\t\t\t\t\t\t\t\tprocess = special ?\n\t\t\t\t\t\t\t\t\tmightThrow :\n\t\t\t\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\tmightThrow();\n\t\t\t\t\t\t\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\t\t\t\t\t\t\tif ( jQuery.Deferred.exceptionHook ) {\n\t\t\t\t\t\t\t\t\t\t\t\tjQuery.Deferred.exceptionHook( e,\n\t\t\t\t\t\t\t\t\t\t\t\t\tprocess.stackTrace );\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.3.3.4.1\n\t\t\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-61\n\t\t\t\t\t\t\t\t\t\t\t// Ignore post-resolution exceptions\n\t\t\t\t\t\t\t\t\t\t\tif ( depth + 1 >= maxDepth ) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t// Only substitute handlers pass on context\n\t\t\t\t\t\t\t\t\t\t\t\t// and multiple values (non-spec behavior)\n\t\t\t\t\t\t\t\t\t\t\t\tif ( handler !== Thrower ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tthat = undefined;\n\t\t\t\t\t\t\t\t\t\t\t\t\targs = [ e ];\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tdeferred.rejectWith( that, args );\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.3.3.1\n\t\t\t\t\t\t\t// https://promisesaplus.com/#point-57\n\t\t\t\t\t\t\t// Re-resolve promises immediately to dodge false rejection from\n\t\t\t\t\t\t\t// subsequent errors\n\t\t\t\t\t\t\tif ( depth ) {\n\t\t\t\t\t\t\t\tprocess();\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// Call an optional hook to record the stack, in case of exception\n\t\t\t\t\t\t\t\t// since it's otherwise lost when execution goes async\n\t\t\t\t\t\t\t\tif ( jQuery.Deferred.getStackHook ) {\n\t\t\t\t\t\t\t\t\tprocess.stackTrace = jQuery.Deferred.getStackHook();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\twindow.setTimeout( process );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn jQuery.Deferred( function( newDefer ) {\n\n\t\t\t\t\t\t// progress_handlers.add( ... )\n\t\t\t\t\t\ttuples[ 0 ][ 3 ].add(\n\t\t\t\t\t\t\tresolve(\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\tnewDefer,\n\t\t\t\t\t\t\t\tjQuery.isFunction( onProgress ) ?\n\t\t\t\t\t\t\t\t\tonProgress :\n\t\t\t\t\t\t\t\t\tIdentity,\n\t\t\t\t\t\t\t\tnewDefer.notifyWith\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// fulfilled_handlers.add( ... )\n\t\t\t\t\t\ttuples[ 1 ][ 3 ].add(\n\t\t\t\t\t\t\tresolve(\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\tnewDefer,\n\t\t\t\t\t\t\t\tjQuery.isFunction( onFulfilled ) ?\n\t\t\t\t\t\t\t\t\tonFulfilled :\n\t\t\t\t\t\t\t\t\tIdentity\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// rejected_handlers.add( ... )\n\t\t\t\t\t\ttuples[ 2 ][ 3 ].add(\n\t\t\t\t\t\t\tresolve(\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\tnewDefer,\n\t\t\t\t\t\t\t\tjQuery.isFunction( onRejected ) ?\n\t\t\t\t\t\t\t\t\tonRejected :\n\t\t\t\t\t\t\t\t\tThrower\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t} ).promise();\n\t\t\t\t},\n\n\t\t\t\t// Get a promise for this deferred\n\t\t\t\t// If obj is provided, the promise aspect is added to the object\n\t\t\t\tpromise: function( obj ) {\n\t\t\t\t\treturn obj != null ? jQuery.extend( obj, promise ) : promise;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdeferred = {};\n\n\t\t// Add list-specific methods\n\t\tjQuery.each( tuples, function( i, tuple ) {\n\t\t\tvar list = tuple[ 2 ],\n\t\t\t\tstateString = tuple[ 5 ];\n\n\t\t\t// promise.progress = list.add\n\t\t\t// promise.done = list.add\n\t\t\t// promise.fail = list.add\n\t\t\tpromise[ tuple[ 1 ] ] = list.add;\n\n\t\t\t// Handle state\n\t\t\tif ( stateString ) {\n\t\t\t\tlist.add(\n\t\t\t\t\tfunction() {\n\n\t\t\t\t\t\t// state = \"resolved\" (i.e., fulfilled)\n\t\t\t\t\t\t// state = \"rejected\"\n\t\t\t\t\t\tstate = stateString;\n\t\t\t\t\t},\n\n\t\t\t\t\t// rejected_callbacks.disable\n\t\t\t\t\t// fulfilled_callbacks.disable\n\t\t\t\t\ttuples[ 3 - i ][ 2 ].disable,\n\n\t\t\t\t\t// progress_callbacks.lock\n\t\t\t\t\ttuples[ 0 ][ 2 ].lock\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// progress_handlers.fire\n\t\t\t// fulfilled_handlers.fire\n\t\t\t// rejected_handlers.fire\n\t\t\tlist.add( tuple[ 3 ].fire );\n\n\t\t\t// deferred.notify = function() { deferred.notifyWith(...) }\n\t\t\t// deferred.resolve = function() { deferred.resolveWith(...) }\n\t\t\t// deferred.reject = function() { deferred.rejectWith(...) }\n\t\t\tdeferred[ tuple[ 0 ] ] = function() {\n\t\t\t\tdeferred[ tuple[ 0 ] + \"With\" ]( this === deferred ? undefined : this, arguments );\n\t\t\t\treturn this;\n\t\t\t};\n\n\t\t\t// deferred.notifyWith = list.fireWith\n\t\t\t// deferred.resolveWith = list.fireWith\n\t\t\t// deferred.rejectWith = list.fireWith\n\t\t\tdeferred[ tuple[ 0 ] + \"With\" ] = list.fireWith;\n\t\t} );\n\n\t\t// Make the deferred a promise\n\t\tpromise.promise( deferred );\n\n\t\t// Call given func if any\n\t\tif ( func ) {\n\t\t\tfunc.call( deferred, deferred );\n\t\t}\n\n\t\t// All done!\n\t\treturn deferred;\n\t},\n\n\t// Deferred helper\n\twhen: function( singleValue ) {\n\t\tvar\n\n\t\t\t// count of uncompleted subordinates\n\t\t\tremaining = arguments.length,\n\n\t\t\t// count of unprocessed arguments\n\t\t\ti = remaining,\n\n\t\t\t// subordinate fulfillment data\n\t\t\tresolveContexts = Array( i ),\n\t\t\tresolveValues = slice.call( arguments ),\n\n\t\t\t// the master Deferred\n\t\t\tmaster = jQuery.Deferred(),\n\n\t\t\t// subordinate callback factory\n\t\t\tupdateFunc = function( i ) {\n\t\t\t\treturn function( value ) {\n\t\t\t\t\tresolveContexts[ i ] = this;\n\t\t\t\t\tresolveValues[ i ] = arguments.length > 1 ? slice.call( arguments ) : value;\n\t\t\t\t\tif ( !( --remaining ) ) {\n\t\t\t\t\t\tmaster.resolveWith( resolveContexts, resolveValues );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\n\t\t// Single- and empty arguments are adopted like Promise.resolve\n\t\tif ( remaining <= 1 ) {\n\t\t\tadoptValue( singleValue, master.done( updateFunc( i ) ).resolve, master.reject,\n\t\t\t\t!remaining );\n\n\t\t\t// Use .then() to unwrap secondary thenables (cf. gh-3000)\n\t\t\tif ( master.state() === \"pending\" ||\n\t\t\t\tjQuery.isFunction( resolveValues[ i ] && resolveValues[ i ].then ) ) {\n\n\t\t\t\treturn master.then();\n\t\t\t}\n\t\t}\n\n\t\t// Multiple arguments are aggregated like Promise.all array elements\n\t\twhile ( i-- ) {\n\t\t\tadoptValue( resolveValues[ i ], updateFunc( i ), master.reject );\n\t\t}\n\n\t\treturn master.promise();\n\t}\n} );\n\n\n// These usually indicate a programmer mistake during development,\n// warn about them ASAP rather than swallowing them by default.\nvar rerrorNames = /^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;\n\njQuery.Deferred.exceptionHook = function( error, stack ) {\n\n\t// Support: IE 8 - 9 only\n\t// Console exists when dev tools are open, which can happen at any time\n\tif ( window.console && window.console.warn && error && rerrorNames.test( error.name ) ) {\n\t\twindow.console.warn( \"jQuery.Deferred exception: \" + error.message, error.stack, stack );\n\t}\n};\n\n\n\n\njQuery.readyException = function( error ) {\n\twindow.setTimeout( function() {\n\t\tthrow error;\n\t} );\n};\n\n\n\n\n// The deferred used on DOM ready\nvar readyList = jQuery.Deferred();\n\njQuery.fn.ready = function( fn ) {\n\n\treadyList\n\t\t.then( fn )\n\n\t\t// Wrap jQuery.readyException in a function so that the lookup\n\t\t// happens at the time of error handling instead of callback\n\t\t// registration.\n\t\t.catch( function( error ) {\n\t\t\tjQuery.readyException( error );\n\t\t} );\n\n\treturn this;\n};\n\njQuery.extend( {\n\n\t// Is the DOM ready to be used? Set to true once it occurs.\n\tisReady: false,\n\n\t// A counter to track how many items to wait for before\n\t// the ready event fires. See #6781\n\treadyWait: 1,\n\n\t// Handle when the DOM is ready\n\tready: function( wait ) {\n\n\t\t// Abort if there are pending holds or we're already ready\n\t\tif ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Remember that the DOM is ready\n\t\tjQuery.isReady = true;\n\n\t\t// If a normal DOM Ready event fired, decrement, and wait if need be\n\t\tif ( wait !== true && --jQuery.readyWait > 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If there are functions bound, to execute\n\t\treadyList.resolveWith( document, [ jQuery ] );\n\t}\n} );\n\njQuery.ready.then = readyList.then;\n\n// The ready event handler and self cleanup method\nfunction completed() {\n\tdocument.removeEventListener( \"DOMContentLoaded\", completed );\n\twindow.removeEventListener( \"load\", completed );\n\tjQuery.ready();\n}\n\n// Catch cases where $(document).ready() is called\n// after the browser event has already occurred.\n// Support: IE <=9 - 10 only\n// Older IE sometimes signals \"interactive\" too soon\nif ( document.readyState === \"complete\" ||\n\t( document.readyState !== \"loading\" && !document.documentElement.doScroll ) ) {\n\n\t// Handle it asynchronously to allow scripts the opportunity to delay ready\n\twindow.setTimeout( jQuery.ready );\n\n} else {\n\n\t// Use the handy event callback\n\tdocument.addEventListener( \"DOMContentLoaded\", completed );\n\n\t// A fallback to window.onload, that will always work\n\twindow.addEventListener( \"load\", completed );\n}\n\n\n\n\n// Multifunctional method to get and set values of a collection\n// The value/s can optionally be executed if it's a function\nvar access = function( elems, fn, key, value, chainable, emptyGet, raw ) {\n\tvar i = 0,\n\t\tlen = elems.length,\n\t\tbulk = key == null;\n\n\t// Sets many values\n\tif ( jQuery.type( key ) === \"object\" ) {\n\t\tchainable = true;\n\t\tfor ( i in key ) {\n\t\t\taccess( elems, fn, i, key[ i ], true, emptyGet, raw );\n\t\t}\n\n\t// Sets one value\n\t} else if ( value !== undefined ) {\n\t\tchainable = true;\n\n\t\tif ( !jQuery.isFunction( value ) ) {\n\t\t\traw = true;\n\t\t}\n\n\t\tif ( bulk ) {\n\n\t\t\t// Bulk operations run against the entire set\n\t\t\tif ( raw ) {\n\t\t\t\tfn.call( elems, value );\n\t\t\t\tfn = null;\n\n\t\t\t// ...except when executing function values\n\t\t\t} else {\n\t\t\t\tbulk = fn;\n\t\t\t\tfn = function( elem, key, value ) {\n\t\t\t\t\treturn bulk.call( jQuery( elem ), value );\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tif ( fn ) {\n\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\tfn(\n\t\t\t\t\telems[ i ], key, raw ?\n\t\t\t\t\tvalue :\n\t\t\t\t\tvalue.call( elems[ i ], i, fn( elems[ i ], key ) )\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( chainable ) {\n\t\treturn elems;\n\t}\n\n\t// Gets\n\tif ( bulk ) {\n\t\treturn fn.call( elems );\n\t}\n\n\treturn len ? fn( elems[ 0 ], key ) : emptyGet;\n};\nvar acceptData = function( owner ) {\n\n\t// Accepts only:\n\t//  - Node\n\t//    - Node.ELEMENT_NODE\n\t//    - Node.DOCUMENT_NODE\n\t//  - Object\n\t//    - Any\n\treturn owner.nodeType === 1 || owner.nodeType === 9 || !( +owner.nodeType );\n};\n\n\n\n\nfunction Data() {\n\tthis.expando = jQuery.expando + Data.uid++;\n}\n\nData.uid = 1;\n\nData.prototype = {\n\n\tcache: function( owner ) {\n\n\t\t// Check if the owner object already has a cache\n\t\tvar value = owner[ this.expando ];\n\n\t\t// If not, create one\n\t\tif ( !value ) {\n\t\t\tvalue = {};\n\n\t\t\t// We can accept data for non-element nodes in modern browsers,\n\t\t\t// but we should not, see #8335.\n\t\t\t// Always return an empty object.\n\t\t\tif ( acceptData( owner ) ) {\n\n\t\t\t\t// If it is a node unlikely to be stringify-ed or looped over\n\t\t\t\t// use plain assignment\n\t\t\t\tif ( owner.nodeType ) {\n\t\t\t\t\towner[ this.expando ] = value;\n\n\t\t\t\t// Otherwise secure it in a non-enumerable property\n\t\t\t\t// configurable must be true to allow the property to be\n\t\t\t\t// deleted when data is removed\n\t\t\t\t} else {\n\t\t\t\t\tObject.defineProperty( owner, this.expando, {\n\t\t\t\t\t\tvalue: value,\n\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn value;\n\t},\n\tset: function( owner, data, value ) {\n\t\tvar prop,\n\t\t\tcache = this.cache( owner );\n\n\t\t// Handle: [ owner, key, value ] args\n\t\t// Always use camelCase key (gh-2257)\n\t\tif ( typeof data === \"string\" ) {\n\t\t\tcache[ jQuery.camelCase( data ) ] = value;\n\n\t\t// Handle: [ owner, { properties } ] args\n\t\t} else {\n\n\t\t\t// Copy the properties one-by-one to the cache object\n\t\t\tfor ( prop in data ) {\n\t\t\t\tcache[ jQuery.camelCase( prop ) ] = data[ prop ];\n\t\t\t}\n\t\t}\n\t\treturn cache;\n\t},\n\tget: function( owner, key ) {\n\t\treturn key === undefined ?\n\t\t\tthis.cache( owner ) :\n\n\t\t\t// Always use camelCase key (gh-2257)\n\t\t\towner[ this.expando ] && owner[ this.expando ][ jQuery.camelCase( key ) ];\n\t},\n\taccess: function( owner, key, value ) {\n\n\t\t// In cases where either:\n\t\t//\n\t\t//   1. No key was specified\n\t\t//   2. A string key was specified, but no value provided\n\t\t//\n\t\t// Take the \"read\" path and allow the get method to determine\n\t\t// which value to return, respectively either:\n\t\t//\n\t\t//   1. The entire cache object\n\t\t//   2. The data stored at the key\n\t\t//\n\t\tif ( key === undefined ||\n\t\t\t\t( ( key && typeof key === \"string\" ) && value === undefined ) ) {\n\n\t\t\treturn this.get( owner, key );\n\t\t}\n\n\t\t// When the key is not a string, or both a key and value\n\t\t// are specified, set or extend (existing objects) with either:\n\t\t//\n\t\t//   1. An object of properties\n\t\t//   2. A key and value\n\t\t//\n\t\tthis.set( owner, key, value );\n\n\t\t// Since the \"set\" path can have two possible entry points\n\t\t// return the expected data based on which path was taken[*]\n\t\treturn value !== undefined ? value : key;\n\t},\n\tremove: function( owner, key ) {\n\t\tvar i,\n\t\t\tcache = owner[ this.expando ];\n\n\t\tif ( cache === undefined ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( key !== undefined ) {\n\n\t\t\t// Support array or space separated string of keys\n\t\t\tif ( Array.isArray( key ) ) {\n\n\t\t\t\t// If key is an array of keys...\n\t\t\t\t// We always set camelCase keys, so remove that.\n\t\t\t\tkey = key.map( jQuery.camelCase );\n\t\t\t} else {\n\t\t\t\tkey = jQuery.camelCase( key );\n\n\t\t\t\t// If a key with the spaces exists, use it.\n\t\t\t\t// Otherwise, create an array by matching non-whitespace\n\t\t\t\tkey = key in cache ?\n\t\t\t\t\t[ key ] :\n\t\t\t\t\t( key.match( rnothtmlwhite ) || [] );\n\t\t\t}\n\n\t\t\ti = key.length;\n\n\t\t\twhile ( i-- ) {\n\t\t\t\tdelete cache[ key[ i ] ];\n\t\t\t}\n\t\t}\n\n\t\t// Remove the expando if there's no more data\n\t\tif ( key === undefined || jQuery.isEmptyObject( cache ) ) {\n\n\t\t\t// Support: Chrome <=35 - 45\n\t\t\t// Webkit & Blink performance suffers when deleting properties\n\t\t\t// from DOM nodes, so set to undefined instead\n\t\t\t// https://bugs.chromium.org/p/chromium/issues/detail?id=378607 (bug restricted)\n\t\t\tif ( owner.nodeType ) {\n\t\t\t\towner[ this.expando ] = undefined;\n\t\t\t} else {\n\t\t\t\tdelete owner[ this.expando ];\n\t\t\t}\n\t\t}\n\t},\n\thasData: function( owner ) {\n\t\tvar cache = owner[ this.expando ];\n\t\treturn cache !== undefined && !jQuery.isEmptyObject( cache );\n\t}\n};\nvar dataPriv = new Data();\n\nvar dataUser = new Data();\n\n\n\n//\tImplementation Summary\n//\n//\t1. Enforce API surface and semantic compatibility with 1.9.x branch\n//\t2. Improve the module's maintainability by reducing the storage\n//\t\tpaths to a single mechanism.\n//\t3. Use the same single mechanism to support \"private\" and \"user\" data.\n//\t4. _Never_ expose \"private\" data to user code (TODO: Drop _data, _removeData)\n//\t5. Avoid exposing implementation details on user objects (eg. expando properties)\n//\t6. Provide a clear path for implementation upgrade to WeakMap in 2014\n\nvar rbrace = /^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,\n\trmultiDash = /[A-Z]/g;\n\nfunction getData( data ) {\n\tif ( data === \"true\" ) {\n\t\treturn true;\n\t}\n\n\tif ( data === \"false\" ) {\n\t\treturn false;\n\t}\n\n\tif ( data === \"null\" ) {\n\t\treturn null;\n\t}\n\n\t// Only convert to a number if it doesn't change the string\n\tif ( data === +data + \"\" ) {\n\t\treturn +data;\n\t}\n\n\tif ( rbrace.test( data ) ) {\n\t\treturn JSON.parse( data );\n\t}\n\n\treturn data;\n}\n\nfunction dataAttr( elem, key, data ) {\n\tvar name;\n\n\t// If nothing was found internally, try to fetch any\n\t// data from the HTML5 data-* attribute\n\tif ( data === undefined && elem.nodeType === 1 ) {\n\t\tname = \"data-\" + key.replace( rmultiDash, \"-$&\" ).toLowerCase();\n\t\tdata = elem.getAttribute( name );\n\n\t\tif ( typeof data === \"string\" ) {\n\t\t\ttry {\n\t\t\t\tdata = getData( data );\n\t\t\t} catch ( e ) {}\n\n\t\t\t// Make sure we set the data so it isn't changed later\n\t\t\tdataUser.set( elem, key, data );\n\t\t} else {\n\t\t\tdata = undefined;\n\t\t}\n\t}\n\treturn data;\n}\n\njQuery.extend( {\n\thasData: function( elem ) {\n\t\treturn dataUser.hasData( elem ) || dataPriv.hasData( elem );\n\t},\n\n\tdata: function( elem, name, data ) {\n\t\treturn dataUser.access( elem, name, data );\n\t},\n\n\tremoveData: function( elem, name ) {\n\t\tdataUser.remove( elem, name );\n\t},\n\n\t// TODO: Now that all calls to _data and _removeData have been replaced\n\t// with direct calls to dataPriv methods, these can be deprecated.\n\t_data: function( elem, name, data ) {\n\t\treturn dataPriv.access( elem, name, data );\n\t},\n\n\t_removeData: function( elem, name ) {\n\t\tdataPriv.remove( elem, name );\n\t}\n} );\n\njQuery.fn.extend( {\n\tdata: function( key, value ) {\n\t\tvar i, name, data,\n\t\t\telem = this[ 0 ],\n\t\t\tattrs = elem && elem.attributes;\n\n\t\t// Gets all values\n\t\tif ( key === undefined ) {\n\t\t\tif ( this.length ) {\n\t\t\t\tdata = dataUser.get( elem );\n\n\t\t\t\tif ( elem.nodeType === 1 && !dataPriv.get( elem, \"hasDataAttrs\" ) ) {\n\t\t\t\t\ti = attrs.length;\n\t\t\t\t\twhile ( i-- ) {\n\n\t\t\t\t\t\t// Support: IE 11 only\n\t\t\t\t\t\t// The attrs elements can be null (#14894)\n\t\t\t\t\t\tif ( attrs[ i ] ) {\n\t\t\t\t\t\t\tname = attrs[ i ].name;\n\t\t\t\t\t\t\tif ( name.indexOf( \"data-\" ) === 0 ) {\n\t\t\t\t\t\t\t\tname = jQuery.camelCase( name.slice( 5 ) );\n\t\t\t\t\t\t\t\tdataAttr( elem, name, data[ name ] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdataPriv.set( elem, \"hasDataAttrs\", true );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn data;\n\t\t}\n\n\t\t// Sets multiple values\n\t\tif ( typeof key === \"object\" ) {\n\t\t\treturn this.each( function() {\n\t\t\t\tdataUser.set( this, key );\n\t\t\t} );\n\t\t}\n\n\t\treturn access( this, function( value ) {\n\t\t\tvar data;\n\n\t\t\t// The calling jQuery object (element matches) is not empty\n\t\t\t// (and therefore has an element appears at this[ 0 ]) and the\n\t\t\t// `value` parameter was not undefined. An empty jQuery object\n\t\t\t// will result in `undefined` for elem = this[ 0 ] which will\n\t\t\t// throw an exception if an attempt to read a data cache is made.\n\t\t\tif ( elem && value === undefined ) {\n\n\t\t\t\t// Attempt to get data from the cache\n\t\t\t\t// The key will always be camelCased in Data\n\t\t\t\tdata = dataUser.get( elem, key );\n\t\t\t\tif ( data !== undefined ) {\n\t\t\t\t\treturn data;\n\t\t\t\t}\n\n\t\t\t\t// Attempt to \"discover\" the data in\n\t\t\t\t// HTML5 custom data-* attrs\n\t\t\t\tdata = dataAttr( elem, key );\n\t\t\t\tif ( data !== undefined ) {\n\t\t\t\t\treturn data;\n\t\t\t\t}\n\n\t\t\t\t// We tried really hard, but the data doesn't exist.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Set the data...\n\t\t\tthis.each( function() {\n\n\t\t\t\t// We always store the camelCased key\n\t\t\t\tdataUser.set( this, key, value );\n\t\t\t} );\n\t\t}, null, value, arguments.length > 1, null, true );\n\t},\n\n\tremoveData: function( key ) {\n\t\treturn this.each( function() {\n\t\t\tdataUser.remove( this, key );\n\t\t} );\n\t}\n} );\n\n\njQuery.extend( {\n\tqueue: function( elem, type, data ) {\n\t\tvar queue;\n\n\t\tif ( elem ) {\n\t\t\ttype = ( type || \"fx\" ) + \"queue\";\n\t\t\tqueue = dataPriv.get( elem, type );\n\n\t\t\t// Speed up dequeue by getting out quickly if this is just a lookup\n\t\t\tif ( data ) {\n\t\t\t\tif ( !queue || Array.isArray( data ) ) {\n\t\t\t\t\tqueue = dataPriv.access( elem, type, jQuery.makeArray( data ) );\n\t\t\t\t} else {\n\t\t\t\t\tqueue.push( data );\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn queue || [];\n\t\t}\n\t},\n\n\tdequeue: function( elem, type ) {\n\t\ttype = type || \"fx\";\n\n\t\tvar queue = jQuery.queue( elem, type ),\n\t\t\tstartLength = queue.length,\n\t\t\tfn = queue.shift(),\n\t\t\thooks = jQuery._queueHooks( elem, type ),\n\t\t\tnext = function() {\n\t\t\t\tjQuery.dequeue( elem, type );\n\t\t\t};\n\n\t\t// If the fx queue is dequeued, always remove the progress sentinel\n\t\tif ( fn === \"inprogress\" ) {\n\t\t\tfn = queue.shift();\n\t\t\tstartLength--;\n\t\t}\n\n\t\tif ( fn ) {\n\n\t\t\t// Add a progress sentinel to prevent the fx queue from being\n\t\t\t// automatically dequeued\n\t\t\tif ( type === \"fx\" ) {\n\t\t\t\tqueue.unshift( \"inprogress\" );\n\t\t\t}\n\n\t\t\t// Clear up the last queue stop function\n\t\t\tdelete hooks.stop;\n\t\t\tfn.call( elem, next, hooks );\n\t\t}\n\n\t\tif ( !startLength && hooks ) {\n\t\t\thooks.empty.fire();\n\t\t}\n\t},\n\n\t// Not public - generate a queueHooks object, or return the current one\n\t_queueHooks: function( elem, type ) {\n\t\tvar key = type + \"queueHooks\";\n\t\treturn dataPriv.get( elem, key ) || dataPriv.access( elem, key, {\n\t\t\tempty: jQuery.Callbacks( \"once memory\" ).add( function() {\n\t\t\t\tdataPriv.remove( elem, [ type + \"queue\", key ] );\n\t\t\t} )\n\t\t} );\n\t}\n} );\n\njQuery.fn.extend( {\n\tqueue: function( type, data ) {\n\t\tvar setter = 2;\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tdata = type;\n\t\t\ttype = \"fx\";\n\t\t\tsetter--;\n\t\t}\n\n\t\tif ( arguments.length < setter ) {\n\t\t\treturn jQuery.queue( this[ 0 ], type );\n\t\t}\n\n\t\treturn data === undefined ?\n\t\t\tthis :\n\t\t\tthis.each( function() {\n\t\t\t\tvar queue = jQuery.queue( this, type, data );\n\n\t\t\t\t// Ensure a hooks for this queue\n\t\t\t\tjQuery._queueHooks( this, type );\n\n\t\t\t\tif ( type === \"fx\" && queue[ 0 ] !== \"inprogress\" ) {\n\t\t\t\t\tjQuery.dequeue( this, type );\n\t\t\t\t}\n\t\t\t} );\n\t},\n\tdequeue: function( type ) {\n\t\treturn this.each( function() {\n\t\t\tjQuery.dequeue( this, type );\n\t\t} );\n\t},\n\tclearQueue: function( type ) {\n\t\treturn this.queue( type || \"fx\", [] );\n\t},\n\n\t// Get a promise resolved when queues of a certain type\n\t// are emptied (fx is the type by default)\n\tpromise: function( type, obj ) {\n\t\tvar tmp,\n\t\t\tcount = 1,\n\t\t\tdefer = jQuery.Deferred(),\n\t\t\telements = this,\n\t\t\ti = this.length,\n\t\t\tresolve = function() {\n\t\t\t\tif ( !( --count ) ) {\n\t\t\t\t\tdefer.resolveWith( elements, [ elements ] );\n\t\t\t\t}\n\t\t\t};\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tobj = type;\n\t\t\ttype = undefined;\n\t\t}\n\t\ttype = type || \"fx\";\n\n\t\twhile ( i-- ) {\n\t\t\ttmp = dataPriv.get( elements[ i ], type + \"queueHooks\" );\n\t\t\tif ( tmp && tmp.empty ) {\n\t\t\t\tcount++;\n\t\t\t\ttmp.empty.add( resolve );\n\t\t\t}\n\t\t}\n\t\tresolve();\n\t\treturn defer.promise( obj );\n\t}\n} );\nvar pnum = ( /[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/ ).source;\n\nvar rcssNum = new RegExp( \"^(?:([+-])=|)(\" + pnum + \")([a-z%]*)$\", \"i\" );\n\n\nvar cssExpand = [ \"Top\", \"Right\", \"Bottom\", \"Left\" ];\n\nvar isHiddenWithinTree = function( elem, el ) {\n\n\t\t// isHiddenWithinTree might be called from jQuery#filter function;\n\t\t// in that case, element will be second argument\n\t\telem = el || elem;\n\n\t\t// Inline style trumps all\n\t\treturn elem.style.display === \"none\" ||\n\t\t\telem.style.display === \"\" &&\n\n\t\t\t// Otherwise, check computed style\n\t\t\t// Support: Firefox <=43 - 45\n\t\t\t// Disconnected elements can have computed display: none, so first confirm that elem is\n\t\t\t// in the document.\n\t\t\tjQuery.contains( elem.ownerDocument, elem ) &&\n\n\t\t\tjQuery.css( elem, \"display\" ) === \"none\";\n\t};\n\nvar swap = function( elem, options, callback, args ) {\n\tvar ret, name,\n\t\told = {};\n\n\t// Remember the old values, and insert the new ones\n\tfor ( name in options ) {\n\t\told[ name ] = elem.style[ name ];\n\t\telem.style[ name ] = options[ name ];\n\t}\n\n\tret = callback.apply( elem, args || [] );\n\n\t// Revert the old values\n\tfor ( name in options ) {\n\t\telem.style[ name ] = old[ name ];\n\t}\n\n\treturn ret;\n};\n\n\n\n\nfunction adjustCSS( elem, prop, valueParts, tween ) {\n\tvar adjusted,\n\t\tscale = 1,\n\t\tmaxIterations = 20,\n\t\tcurrentValue = tween ?\n\t\t\tfunction() {\n\t\t\t\treturn tween.cur();\n\t\t\t} :\n\t\t\tfunction() {\n\t\t\t\treturn jQuery.css( elem, prop, \"\" );\n\t\t\t},\n\t\tinitial = currentValue(),\n\t\tunit = valueParts && valueParts[ 3 ] || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" ),\n\n\t\t// Starting value computation is required for potential unit mismatches\n\t\tinitialInUnit = ( jQuery.cssNumber[ prop ] || unit !== \"px\" && +initial ) &&\n\t\t\trcssNum.exec( jQuery.css( elem, prop ) );\n\n\tif ( initialInUnit && initialInUnit[ 3 ] !== unit ) {\n\n\t\t// Trust units reported by jQuery.css\n\t\tunit = unit || initialInUnit[ 3 ];\n\n\t\t// Make sure we update the tween properties later on\n\t\tvalueParts = valueParts || [];\n\n\t\t// Iteratively approximate from a nonzero starting point\n\t\tinitialInUnit = +initial || 1;\n\n\t\tdo {\n\n\t\t\t// If previous iteration zeroed out, double until we get *something*.\n\t\t\t// Use string for doubling so we don't accidentally see scale as unchanged below\n\t\t\tscale = scale || \".5\";\n\n\t\t\t// Adjust and apply\n\t\t\tinitialInUnit = initialInUnit / scale;\n\t\t\tjQuery.style( elem, prop, initialInUnit + unit );\n\n\t\t// Update scale, tolerating zero or NaN from tween.cur()\n\t\t// Break the loop if scale is unchanged or perfect, or if we've just had enough.\n\t\t} while (\n\t\t\tscale !== ( scale = currentValue() / initial ) && scale !== 1 && --maxIterations\n\t\t);\n\t}\n\n\tif ( valueParts ) {\n\t\tinitialInUnit = +initialInUnit || +initial || 0;\n\n\t\t// Apply relative offset (+=/-=) if specified\n\t\tadjusted = valueParts[ 1 ] ?\n\t\t\tinitialInUnit + ( valueParts[ 1 ] + 1 ) * valueParts[ 2 ] :\n\t\t\t+valueParts[ 2 ];\n\t\tif ( tween ) {\n\t\t\ttween.unit = unit;\n\t\t\ttween.start = initialInUnit;\n\t\t\ttween.end = adjusted;\n\t\t}\n\t}\n\treturn adjusted;\n}\n\n\nvar defaultDisplayMap = {};\n\nfunction getDefaultDisplay( elem ) {\n\tvar temp,\n\t\tdoc = elem.ownerDocument,\n\t\tnodeName = elem.nodeName,\n\t\tdisplay = defaultDisplayMap[ nodeName ];\n\n\tif ( display ) {\n\t\treturn display;\n\t}\n\n\ttemp = doc.body.appendChild( doc.createElement( nodeName ) );\n\tdisplay = jQuery.css( temp, \"display\" );\n\n\ttemp.parentNode.removeChild( temp );\n\n\tif ( display === \"none\" ) {\n\t\tdisplay = \"block\";\n\t}\n\tdefaultDisplayMap[ nodeName ] = display;\n\n\treturn display;\n}\n\nfunction showHide( elements, show ) {\n\tvar display, elem,\n\t\tvalues = [],\n\t\tindex = 0,\n\t\tlength = elements.length;\n\n\t// Determine new display value for elements that need to change\n\tfor ( ; index < length; index++ ) {\n\t\telem = elements[ index ];\n\t\tif ( !elem.style ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tdisplay = elem.style.display;\n\t\tif ( show ) {\n\n\t\t\t// Since we force visibility upon cascade-hidden elements, an immediate (and slow)\n\t\t\t// check is required in this first loop unless we have a nonempty display value (either\n\t\t\t// inline or about-to-be-restored)\n\t\t\tif ( display === \"none\" ) {\n\t\t\t\tvalues[ index ] = dataPriv.get( elem, \"display\" ) || null;\n\t\t\t\tif ( !values[ index ] ) {\n\t\t\t\t\telem.style.display = \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ( elem.style.display === \"\" && isHiddenWithinTree( elem ) ) {\n\t\t\t\tvalues[ index ] = getDefaultDisplay( elem );\n\t\t\t}\n\t\t} else {\n\t\t\tif ( display !== \"none\" ) {\n\t\t\t\tvalues[ index ] = \"none\";\n\n\t\t\t\t// Remember what we're overwriting\n\t\t\t\tdataPriv.set( elem, \"display\", display );\n\t\t\t}\n\t\t}\n\t}\n\n\t// Set the display of the elements in a second loop to avoid constant reflow\n\tfor ( index = 0; index < length; index++ ) {\n\t\tif ( values[ index ] != null ) {\n\t\t\telements[ index ].style.display = values[ index ];\n\t\t}\n\t}\n\n\treturn elements;\n}\n\njQuery.fn.extend( {\n\tshow: function() {\n\t\treturn showHide( this, true );\n\t},\n\thide: function() {\n\t\treturn showHide( this );\n\t},\n\ttoggle: function( state ) {\n\t\tif ( typeof state === \"boolean\" ) {\n\t\t\treturn state ? this.show() : this.hide();\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tif ( isHiddenWithinTree( this ) ) {\n\t\t\t\tjQuery( this ).show();\n\t\t\t} else {\n\t\t\t\tjQuery( this ).hide();\n\t\t\t}\n\t\t} );\n\t}\n} );\nvar rcheckableType = ( /^(?:checkbox|radio)$/i );\n\nvar rtagName = ( /<([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]+)/i );\n\nvar rscriptType = ( /^$|\\/(?:java|ecma)script/i );\n\n\n\n// We have to close these tags to support XHTML (#13200)\nvar wrapMap = {\n\n\t// Support: IE <=9 only\n\toption: [ 1, \"<select multiple='multiple'>\", \"</select>\" ],\n\n\t// XHTML parsers do not magically insert elements in the\n\t// same way that tag soup parsers do. So we cannot shorten\n\t// this by omitting <tbody> or other required elements.\n\tthead: [ 1, \"<table>\", \"</table>\" ],\n\tcol: [ 2, \"<table><colgroup>\", \"</colgroup></table>\" ],\n\ttr: [ 2, \"<table><tbody>\", \"</tbody></table>\" ],\n\ttd: [ 3, \"<table><tbody><tr>\", \"</tr></tbody></table>\" ],\n\n\t_default: [ 0, \"\", \"\" ]\n};\n\n// Support: IE <=9 only\nwrapMap.optgroup = wrapMap.option;\n\nwrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;\nwrapMap.th = wrapMap.td;\n\n\nfunction getAll( context, tag ) {\n\n\t// Support: IE <=9 - 11 only\n\t// Use typeof to avoid zero-argument method invocation on host objects (#15151)\n\tvar ret;\n\n\tif ( typeof context.getElementsByTagName !== \"undefined\" ) {\n\t\tret = context.getElementsByTagName( tag || \"*\" );\n\n\t} else if ( typeof context.querySelectorAll !== \"undefined\" ) {\n\t\tret = context.querySelectorAll( tag || \"*\" );\n\n\t} else {\n\t\tret = [];\n\t}\n\n\tif ( tag === undefined || tag && nodeName( context, tag ) ) {\n\t\treturn jQuery.merge( [ context ], ret );\n\t}\n\n\treturn ret;\n}\n\n\n// Mark scripts as having already been evaluated\nfunction setGlobalEval( elems, refElements ) {\n\tvar i = 0,\n\t\tl = elems.length;\n\n\tfor ( ; i < l; i++ ) {\n\t\tdataPriv.set(\n\t\t\telems[ i ],\n\t\t\t\"globalEval\",\n\t\t\t!refElements || dataPriv.get( refElements[ i ], \"globalEval\" )\n\t\t);\n\t}\n}\n\n\nvar rhtml = /<|&#?\\w+;/;\n\nfunction buildFragment( elems, context, scripts, selection, ignored ) {\n\tvar elem, tmp, tag, wrap, contains, j,\n\t\tfragment = context.createDocumentFragment(),\n\t\tnodes = [],\n\t\ti = 0,\n\t\tl = elems.length;\n\n\tfor ( ; i < l; i++ ) {\n\t\telem = elems[ i ];\n\n\t\tif ( elem || elem === 0 ) {\n\n\t\t\t// Add nodes directly\n\t\t\tif ( jQuery.type( elem ) === \"object\" ) {\n\n\t\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t\t// push.apply(_, arraylike) throws on ancient WebKit\n\t\t\t\tjQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );\n\n\t\t\t// Convert non-html into a text node\n\t\t\t} else if ( !rhtml.test( elem ) ) {\n\t\t\t\tnodes.push( context.createTextNode( elem ) );\n\n\t\t\t// Convert html into DOM nodes\n\t\t\t} else {\n\t\t\t\ttmp = tmp || fragment.appendChild( context.createElement( \"div\" ) );\n\n\t\t\t\t// Deserialize a standard representation\n\t\t\t\ttag = ( rtagName.exec( elem ) || [ \"\", \"\" ] )[ 1 ].toLowerCase();\n\t\t\t\twrap = wrapMap[ tag ] || wrapMap._default;\n\t\t\t\ttmp.innerHTML = wrap[ 1 ] + jQuery.htmlPrefilter( elem ) + wrap[ 2 ];\n\n\t\t\t\t// Descend through wrappers to the right content\n\t\t\t\tj = wrap[ 0 ];\n\t\t\t\twhile ( j-- ) {\n\t\t\t\t\ttmp = tmp.lastChild;\n\t\t\t\t}\n\n\t\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t\t// push.apply(_, arraylike) throws on ancient WebKit\n\t\t\t\tjQuery.merge( nodes, tmp.childNodes );\n\n\t\t\t\t// Remember the top-level container\n\t\t\t\ttmp = fragment.firstChild;\n\n\t\t\t\t// Ensure the created nodes are orphaned (#12392)\n\t\t\t\ttmp.textContent = \"\";\n\t\t\t}\n\t\t}\n\t}\n\n\t// Remove wrapper from fragment\n\tfragment.textContent = \"\";\n\n\ti = 0;\n\twhile ( ( elem = nodes[ i++ ] ) ) {\n\n\t\t// Skip elements already in the context collection (trac-4087)\n\t\tif ( selection && jQuery.inArray( elem, selection ) > -1 ) {\n\t\t\tif ( ignored ) {\n\t\t\t\tignored.push( elem );\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\n\t\tcontains = jQuery.contains( elem.ownerDocument, elem );\n\n\t\t// Append to fragment\n\t\ttmp = getAll( fragment.appendChild( elem ), \"script\" );\n\n\t\t// Preserve script evaluation history\n\t\tif ( contains ) {\n\t\t\tsetGlobalEval( tmp );\n\t\t}\n\n\t\t// Capture executables\n\t\tif ( scripts ) {\n\t\t\tj = 0;\n\t\t\twhile ( ( elem = tmp[ j++ ] ) ) {\n\t\t\t\tif ( rscriptType.test( elem.type || \"\" ) ) {\n\t\t\t\t\tscripts.push( elem );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn fragment;\n}\n\n\n( function() {\n\tvar fragment = document.createDocumentFragment(),\n\t\tdiv = fragment.appendChild( document.createElement( \"div\" ) ),\n\t\tinput = document.createElement( \"input\" );\n\n\t// Support: Android 4.0 - 4.3 only\n\t// Check state lost if the name is set (#11217)\n\t// Support: Windows Web Apps (WWA)\n\t// `name` and `type` must use .setAttribute for WWA (#14901)\n\tinput.setAttribute( \"type\", \"radio\" );\n\tinput.setAttribute( \"checked\", \"checked\" );\n\tinput.setAttribute( \"name\", \"t\" );\n\n\tdiv.appendChild( input );\n\n\t// Support: Android <=4.1 only\n\t// Older WebKit doesn't clone checked state correctly in fragments\n\tsupport.checkClone = div.cloneNode( true ).cloneNode( true ).lastChild.checked;\n\n\t// Support: IE <=11 only\n\t// Make sure textarea (and checkbox) defaultValue is properly cloned\n\tdiv.innerHTML = \"<textarea>x</textarea>\";\n\tsupport.noCloneChecked = !!div.cloneNode( true ).lastChild.defaultValue;\n} )();\nvar documentElement = document.documentElement;\n\n\n\nvar\n\trkeyEvent = /^key/,\n\trmouseEvent = /^(?:mouse|pointer|contextmenu|drag|drop)|click/,\n\trtypenamespace = /^([^.]*)(?:\\.(.+)|)/;\n\nfunction returnTrue() {\n\treturn true;\n}\n\nfunction returnFalse() {\n\treturn false;\n}\n\n// Support: IE <=9 only\n// See #13393 for more info\nfunction safeActiveElement() {\n\ttry {\n\t\treturn document.activeElement;\n\t} catch ( err ) { }\n}\n\nfunction on( elem, types, selector, data, fn, one ) {\n\tvar origFn, type;\n\n\t// Types can be a map of types/handlers\n\tif ( typeof types === \"object\" ) {\n\n\t\t// ( types-Object, selector, data )\n\t\tif ( typeof selector !== \"string\" ) {\n\n\t\t\t// ( types-Object, data )\n\t\t\tdata = data || selector;\n\t\t\tselector = undefined;\n\t\t}\n\t\tfor ( type in types ) {\n\t\t\ton( elem, type, selector, data, types[ type ], one );\n\t\t}\n\t\treturn elem;\n\t}\n\n\tif ( data == null && fn == null ) {\n\n\t\t// ( types, fn )\n\t\tfn = selector;\n\t\tdata = selector = undefined;\n\t} else if ( fn == null ) {\n\t\tif ( typeof selector === \"string\" ) {\n\n\t\t\t// ( types, selector, fn )\n\t\t\tfn = data;\n\t\t\tdata = undefined;\n\t\t} else {\n\n\t\t\t// ( types, data, fn )\n\t\t\tfn = data;\n\t\t\tdata = selector;\n\t\t\tselector = undefined;\n\t\t}\n\t}\n\tif ( fn === false ) {\n\t\tfn = returnFalse;\n\t} else if ( !fn ) {\n\t\treturn elem;\n\t}\n\n\tif ( one === 1 ) {\n\t\torigFn = fn;\n\t\tfn = function( event ) {\n\n\t\t\t// Can use an empty set, since event contains the info\n\t\t\tjQuery().off( event );\n\t\t\treturn origFn.apply( this, arguments );\n\t\t};\n\n\t\t// Use same guid so caller can remove using origFn\n\t\tfn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );\n\t}\n\treturn elem.each( function() {\n\t\tjQuery.event.add( this, types, fn, data, selector );\n\t} );\n}\n\n/*\n * Helper functions for managing events -- not part of the public interface.\n * Props to Dean Edwards' addEvent library for many of the ideas.\n */\njQuery.event = {\n\n\tglobal: {},\n\n\tadd: function( elem, types, handler, data, selector ) {\n\n\t\tvar handleObjIn, eventHandle, tmp,\n\t\t\tevents, t, handleObj,\n\t\t\tspecial, handlers, type, namespaces, origType,\n\t\t\telemData = dataPriv.get( elem );\n\n\t\t// Don't attach events to noData or text/comment nodes (but allow plain objects)\n\t\tif ( !elemData ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Caller can pass in an object of custom data in lieu of the handler\n\t\tif ( handler.handler ) {\n\t\t\thandleObjIn = handler;\n\t\t\thandler = handleObjIn.handler;\n\t\t\tselector = handleObjIn.selector;\n\t\t}\n\n\t\t// Ensure that invalid selectors throw exceptions at attach time\n\t\t// Evaluate against documentElement in case elem is a non-element node (e.g., document)\n\t\tif ( selector ) {\n\t\t\tjQuery.find.matchesSelector( documentElement, selector );\n\t\t}\n\n\t\t// Make sure that the handler has a unique ID, used to find/remove it later\n\t\tif ( !handler.guid ) {\n\t\t\thandler.guid = jQuery.guid++;\n\t\t}\n\n\t\t// Init the element's event structure and main handler, if this is the first\n\t\tif ( !( events = elemData.events ) ) {\n\t\t\tevents = elemData.events = {};\n\t\t}\n\t\tif ( !( eventHandle = elemData.handle ) ) {\n\t\t\teventHandle = elemData.handle = function( e ) {\n\n\t\t\t\t// Discard the second event of a jQuery.event.trigger() and\n\t\t\t\t// when an event is called after a page has unloaded\n\t\t\t\treturn typeof jQuery !== \"undefined\" && jQuery.event.triggered !== e.type ?\n\t\t\t\t\tjQuery.event.dispatch.apply( elem, arguments ) : undefined;\n\t\t\t};\n\t\t}\n\n\t\t// Handle multiple events separated by a space\n\t\ttypes = ( types || \"\" ).match( rnothtmlwhite ) || [ \"\" ];\n\t\tt = types.length;\n\t\twhile ( t-- ) {\n\t\t\ttmp = rtypenamespace.exec( types[ t ] ) || [];\n\t\t\ttype = origType = tmp[ 1 ];\n\t\t\tnamespaces = ( tmp[ 2 ] || \"\" ).split( \".\" ).sort();\n\n\t\t\t// There *must* be a type, no attaching namespace-only handlers\n\t\t\tif ( !type ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// If event changes its type, use the special event handlers for the changed type\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\n\t\t\t// If selector defined, determine special event api type, otherwise given type\n\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n\n\t\t\t// Update special based on newly reset type\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\n\t\t\t// handleObj is passed to all event handlers\n\t\t\thandleObj = jQuery.extend( {\n\t\t\t\ttype: type,\n\t\t\t\torigType: origType,\n\t\t\t\tdata: data,\n\t\t\t\thandler: handler,\n\t\t\t\tguid: handler.guid,\n\t\t\t\tselector: selector,\n\t\t\t\tneedsContext: selector && jQuery.expr.match.needsContext.test( selector ),\n\t\t\t\tnamespace: namespaces.join( \".\" )\n\t\t\t}, handleObjIn );\n\n\t\t\t// Init the event handler queue if we're the first\n\t\t\tif ( !( handlers = events[ type ] ) ) {\n\t\t\t\thandlers = events[ type ] = [];\n\t\t\t\thandlers.delegateCount = 0;\n\n\t\t\t\t// Only use addEventListener if the special events handler returns false\n\t\t\t\tif ( !special.setup ||\n\t\t\t\t\tspecial.setup.call( elem, data, namespaces, eventHandle ) === false ) {\n\n\t\t\t\t\tif ( elem.addEventListener ) {\n\t\t\t\t\t\telem.addEventListener( type, eventHandle );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( special.add ) {\n\t\t\t\tspecial.add.call( elem, handleObj );\n\n\t\t\t\tif ( !handleObj.handler.guid ) {\n\t\t\t\t\thandleObj.handler.guid = handler.guid;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add to the element's handler list, delegates in front\n\t\t\tif ( selector ) {\n\t\t\t\thandlers.splice( handlers.delegateCount++, 0, handleObj );\n\t\t\t} else {\n\t\t\t\thandlers.push( handleObj );\n\t\t\t}\n\n\t\t\t// Keep track of which events have ever been used, for event optimization\n\t\t\tjQuery.event.global[ type ] = true;\n\t\t}\n\n\t},\n\n\t// Detach an event or set of events from an element\n\tremove: function( elem, types, handler, selector, mappedTypes ) {\n\n\t\tvar j, origCount, tmp,\n\t\t\tevents, t, handleObj,\n\t\t\tspecial, handlers, type, namespaces, origType,\n\t\t\telemData = dataPriv.hasData( elem ) && dataPriv.get( elem );\n\n\t\tif ( !elemData || !( events = elemData.events ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Once for each type.namespace in types; type may be omitted\n\t\ttypes = ( types || \"\" ).match( rnothtmlwhite ) || [ \"\" ];\n\t\tt = types.length;\n\t\twhile ( t-- ) {\n\t\t\ttmp = rtypenamespace.exec( types[ t ] ) || [];\n\t\t\ttype = origType = tmp[ 1 ];\n\t\t\tnamespaces = ( tmp[ 2 ] || \"\" ).split( \".\" ).sort();\n\n\t\t\t// Unbind all events (on this namespace, if provided) for the element\n\t\t\tif ( !type ) {\n\t\t\t\tfor ( type in events ) {\n\t\t\t\t\tjQuery.event.remove( elem, type + types[ t ], handler, selector, true );\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n\t\t\thandlers = events[ type ] || [];\n\t\t\ttmp = tmp[ 2 ] &&\n\t\t\t\tnew RegExp( \"(^|\\\\.)\" + namespaces.join( \"\\\\.(?:.*\\\\.|)\" ) + \"(\\\\.|$)\" );\n\n\t\t\t// Remove matching events\n\t\t\torigCount = j = handlers.length;\n\t\t\twhile ( j-- ) {\n\t\t\t\thandleObj = handlers[ j ];\n\n\t\t\t\tif ( ( mappedTypes || origType === handleObj.origType ) &&\n\t\t\t\t\t( !handler || handler.guid === handleObj.guid ) &&\n\t\t\t\t\t( !tmp || tmp.test( handleObj.namespace ) ) &&\n\t\t\t\t\t( !selector || selector === handleObj.selector ||\n\t\t\t\t\t\tselector === \"**\" && handleObj.selector ) ) {\n\t\t\t\t\thandlers.splice( j, 1 );\n\n\t\t\t\t\tif ( handleObj.selector ) {\n\t\t\t\t\t\thandlers.delegateCount--;\n\t\t\t\t\t}\n\t\t\t\t\tif ( special.remove ) {\n\t\t\t\t\t\tspecial.remove.call( elem, handleObj );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove generic event handler if we removed something and no more handlers exist\n\t\t\t// (avoids potential for endless recursion during removal of special event handlers)\n\t\t\tif ( origCount && !handlers.length ) {\n\t\t\t\tif ( !special.teardown ||\n\t\t\t\t\tspecial.teardown.call( elem, namespaces, elemData.handle ) === false ) {\n\n\t\t\t\t\tjQuery.removeEvent( elem, type, elemData.handle );\n\t\t\t\t}\n\n\t\t\t\tdelete events[ type ];\n\t\t\t}\n\t\t}\n\n\t\t// Remove data and the expando if it's no longer used\n\t\tif ( jQuery.isEmptyObject( events ) ) {\n\t\t\tdataPriv.remove( elem, \"handle events\" );\n\t\t}\n\t},\n\n\tdispatch: function( nativeEvent ) {\n\n\t\t// Make a writable jQuery.Event from the native event object\n\t\tvar event = jQuery.event.fix( nativeEvent );\n\n\t\tvar i, j, ret, matched, handleObj, handlerQueue,\n\t\t\targs = new Array( arguments.length ),\n\t\t\thandlers = ( dataPriv.get( this, \"events\" ) || {} )[ event.type ] || [],\n\t\t\tspecial = jQuery.event.special[ event.type ] || {};\n\n\t\t// Use the fix-ed jQuery.Event rather than the (read-only) native event\n\t\targs[ 0 ] = event;\n\n\t\tfor ( i = 1; i < arguments.length; i++ ) {\n\t\t\targs[ i ] = arguments[ i ];\n\t\t}\n\n\t\tevent.delegateTarget = this;\n\n\t\t// Call the preDispatch hook for the mapped type, and let it bail if desired\n\t\tif ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Determine handlers\n\t\thandlerQueue = jQuery.event.handlers.call( this, event, handlers );\n\n\t\t// Run delegates first; they may want to stop propagation beneath us\n\t\ti = 0;\n\t\twhile ( ( matched = handlerQueue[ i++ ] ) && !event.isPropagationStopped() ) {\n\t\t\tevent.currentTarget = matched.elem;\n\n\t\t\tj = 0;\n\t\t\twhile ( ( handleObj = matched.handlers[ j++ ] ) &&\n\t\t\t\t!event.isImmediatePropagationStopped() ) {\n\n\t\t\t\t// Triggered event must either 1) have no namespace, or 2) have namespace(s)\n\t\t\t\t// a subset or equal to those in the bound event (both can have no namespace).\n\t\t\t\tif ( !event.rnamespace || event.rnamespace.test( handleObj.namespace ) ) {\n\n\t\t\t\t\tevent.handleObj = handleObj;\n\t\t\t\t\tevent.data = handleObj.data;\n\n\t\t\t\t\tret = ( ( jQuery.event.special[ handleObj.origType ] || {} ).handle ||\n\t\t\t\t\t\thandleObj.handler ).apply( matched.elem, args );\n\n\t\t\t\t\tif ( ret !== undefined ) {\n\t\t\t\t\t\tif ( ( event.result = ret ) === false ) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Call the postDispatch hook for the mapped type\n\t\tif ( special.postDispatch ) {\n\t\t\tspecial.postDispatch.call( this, event );\n\t\t}\n\n\t\treturn event.result;\n\t},\n\n\thandlers: function( event, handlers ) {\n\t\tvar i, handleObj, sel, matchedHandlers, matchedSelectors,\n\t\t\thandlerQueue = [],\n\t\t\tdelegateCount = handlers.delegateCount,\n\t\t\tcur = event.target;\n\n\t\t// Find delegate handlers\n\t\tif ( delegateCount &&\n\n\t\t\t// Support: IE <=9\n\t\t\t// Black-hole SVG <use> instance trees (trac-13180)\n\t\t\tcur.nodeType &&\n\n\t\t\t// Support: Firefox <=42\n\t\t\t// Suppress spec-violating clicks indicating a non-primary pointer button (trac-3861)\n\t\t\t// https://www.w3.org/TR/DOM-Level-3-Events/#event-type-click\n\t\t\t// Support: IE 11 only\n\t\t\t// ...but not arrow key \"clicks\" of radio inputs, which can have `button` -1 (gh-2343)\n\t\t\t!( event.type === \"click\" && event.button >= 1 ) ) {\n\n\t\t\tfor ( ; cur !== this; cur = cur.parentNode || this ) {\n\n\t\t\t\t// Don't check non-elements (#13208)\n\t\t\t\t// Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)\n\t\t\t\tif ( cur.nodeType === 1 && !( event.type === \"click\" && cur.disabled === true ) ) {\n\t\t\t\t\tmatchedHandlers = [];\n\t\t\t\t\tmatchedSelectors = {};\n\t\t\t\t\tfor ( i = 0; i < delegateCount; i++ ) {\n\t\t\t\t\t\thandleObj = handlers[ i ];\n\n\t\t\t\t\t\t// Don't conflict with Object.prototype properties (#13203)\n\t\t\t\t\t\tsel = handleObj.selector + \" \";\n\n\t\t\t\t\t\tif ( matchedSelectors[ sel ] === undefined ) {\n\t\t\t\t\t\t\tmatchedSelectors[ sel ] = handleObj.needsContext ?\n\t\t\t\t\t\t\t\tjQuery( sel, this ).index( cur ) > -1 :\n\t\t\t\t\t\t\t\tjQuery.find( sel, this, null, [ cur ] ).length;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( matchedSelectors[ sel ] ) {\n\t\t\t\t\t\t\tmatchedHandlers.push( handleObj );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ( matchedHandlers.length ) {\n\t\t\t\t\t\thandlerQueue.push( { elem: cur, handlers: matchedHandlers } );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Add the remaining (directly-bound) handlers\n\t\tcur = this;\n\t\tif ( delegateCount < handlers.length ) {\n\t\t\thandlerQueue.push( { elem: cur, handlers: handlers.slice( delegateCount ) } );\n\t\t}\n\n\t\treturn handlerQueue;\n\t},\n\n\taddProp: function( name, hook ) {\n\t\tObject.defineProperty( jQuery.Event.prototype, name, {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\n\t\t\tget: jQuery.isFunction( hook ) ?\n\t\t\t\tfunction() {\n\t\t\t\t\tif ( this.originalEvent ) {\n\t\t\t\t\t\t\treturn hook( this.originalEvent );\n\t\t\t\t\t}\n\t\t\t\t} :\n\t\t\t\tfunction() {\n\t\t\t\t\tif ( this.originalEvent ) {\n\t\t\t\t\t\t\treturn this.originalEvent[ name ];\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\tset: function( value ) {\n\t\t\t\tObject.defineProperty( this, name, {\n\t\t\t\t\tenumerable: true,\n\t\t\t\t\tconfigurable: true,\n\t\t\t\t\twritable: true,\n\t\t\t\t\tvalue: value\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t},\n\n\tfix: function( originalEvent ) {\n\t\treturn originalEvent[ jQuery.expando ] ?\n\t\t\toriginalEvent :\n\t\t\tnew jQuery.Event( originalEvent );\n\t},\n\n\tspecial: {\n\t\tload: {\n\n\t\t\t// Prevent triggered image.load events from bubbling to window.load\n\t\t\tnoBubble: true\n\t\t},\n\t\tfocus: {\n\n\t\t\t// Fire native event if possible so blur/focus sequence is correct\n\t\t\ttrigger: function() {\n\t\t\t\tif ( this !== safeActiveElement() && this.focus ) {\n\t\t\t\t\tthis.focus();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelegateType: \"focusin\"\n\t\t},\n\t\tblur: {\n\t\t\ttrigger: function() {\n\t\t\t\tif ( this === safeActiveElement() && this.blur ) {\n\t\t\t\t\tthis.blur();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelegateType: \"focusout\"\n\t\t},\n\t\tclick: {\n\n\t\t\t// For checkbox, fire native event so checked state will be right\n\t\t\ttrigger: function() {\n\t\t\t\tif ( this.type === \"checkbox\" && this.click && nodeName( this, \"input\" ) ) {\n\t\t\t\t\tthis.click();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// For cross-browser consistency, don't fire native .click() on links\n\t\t\t_default: function( event ) {\n\t\t\t\treturn nodeName( event.target, \"a\" );\n\t\t\t}\n\t\t},\n\n\t\tbeforeunload: {\n\t\t\tpostDispatch: function( event ) {\n\n\t\t\t\t// Support: Firefox 20+\n\t\t\t\t// Firefox doesn't alert if the returnValue field is not set.\n\t\t\t\tif ( event.result !== undefined && event.originalEvent ) {\n\t\t\t\t\tevent.originalEvent.returnValue = event.result;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\njQuery.removeEvent = function( elem, type, handle ) {\n\n\t// This \"if\" is needed for plain objects\n\tif ( elem.removeEventListener ) {\n\t\telem.removeEventListener( type, handle );\n\t}\n};\n\njQuery.Event = function( src, props ) {\n\n\t// Allow instantiation without the 'new' keyword\n\tif ( !( this instanceof jQuery.Event ) ) {\n\t\treturn new jQuery.Event( src, props );\n\t}\n\n\t// Event object\n\tif ( src && src.type ) {\n\t\tthis.originalEvent = src;\n\t\tthis.type = src.type;\n\n\t\t// Events bubbling up the document may have been marked as prevented\n\t\t// by a handler lower down the tree; reflect the correct value.\n\t\tthis.isDefaultPrevented = src.defaultPrevented ||\n\t\t\t\tsrc.defaultPrevented === undefined &&\n\n\t\t\t\t// Support: Android <=2.3 only\n\t\t\t\tsrc.returnValue === false ?\n\t\t\treturnTrue :\n\t\t\treturnFalse;\n\n\t\t// Create target properties\n\t\t// Support: Safari <=6 - 7 only\n\t\t// Target should not be a text node (#504, #13143)\n\t\tthis.target = ( src.target && src.target.nodeType === 3 ) ?\n\t\t\tsrc.target.parentNode :\n\t\t\tsrc.target;\n\n\t\tthis.currentTarget = src.currentTarget;\n\t\tthis.relatedTarget = src.relatedTarget;\n\n\t// Event type\n\t} else {\n\t\tthis.type = src;\n\t}\n\n\t// Put explicitly provided properties onto the event object\n\tif ( props ) {\n\t\tjQuery.extend( this, props );\n\t}\n\n\t// Create a timestamp if incoming event doesn't have one\n\tthis.timeStamp = src && src.timeStamp || jQuery.now();\n\n\t// Mark it as fixed\n\tthis[ jQuery.expando ] = true;\n};\n\n// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding\n// https://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html\njQuery.Event.prototype = {\n\tconstructor: jQuery.Event,\n\tisDefaultPrevented: returnFalse,\n\tisPropagationStopped: returnFalse,\n\tisImmediatePropagationStopped: returnFalse,\n\tisSimulated: false,\n\n\tpreventDefault: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isDefaultPrevented = returnTrue;\n\n\t\tif ( e && !this.isSimulated ) {\n\t\t\te.preventDefault();\n\t\t}\n\t},\n\tstopPropagation: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isPropagationStopped = returnTrue;\n\n\t\tif ( e && !this.isSimulated ) {\n\t\t\te.stopPropagation();\n\t\t}\n\t},\n\tstopImmediatePropagation: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isImmediatePropagationStopped = returnTrue;\n\n\t\tif ( e && !this.isSimulated ) {\n\t\t\te.stopImmediatePropagation();\n\t\t}\n\n\t\tthis.stopPropagation();\n\t}\n};\n\n// Includes all common event props including KeyEvent and MouseEvent specific props\njQuery.each( {\n\taltKey: true,\n\tbubbles: true,\n\tcancelable: true,\n\tchangedTouches: true,\n\tctrlKey: true,\n\tdetail: true,\n\teventPhase: true,\n\tmetaKey: true,\n\tpageX: true,\n\tpageY: true,\n\tshiftKey: true,\n\tview: true,\n\t\"char\": true,\n\tcharCode: true,\n\tkey: true,\n\tkeyCode: true,\n\tbutton: true,\n\tbuttons: true,\n\tclientX: true,\n\tclientY: true,\n\toffsetX: true,\n\toffsetY: true,\n\tpointerId: true,\n\tpointerType: true,\n\tscreenX: true,\n\tscreenY: true,\n\ttargetTouches: true,\n\ttoElement: true,\n\ttouches: true,\n\n\twhich: function( event ) {\n\t\tvar button = event.button;\n\n\t\t// Add which for key events\n\t\tif ( event.which == null && rkeyEvent.test( event.type ) ) {\n\t\t\treturn event.charCode != null ? event.charCode : event.keyCode;\n\t\t}\n\n\t\t// Add which for click: 1 === left; 2 === middle; 3 === right\n\t\tif ( !event.which && button !== undefined && rmouseEvent.test( event.type ) ) {\n\t\t\tif ( button & 1 ) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\tif ( button & 2 ) {\n\t\t\t\treturn 3;\n\t\t\t}\n\n\t\t\tif ( button & 4 ) {\n\t\t\t\treturn 2;\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn event.which;\n\t}\n}, jQuery.event.addProp );\n\n// Create mouseenter/leave events using mouseover/out and event-time checks\n// so that event delegation works in jQuery.\n// Do the same for pointerenter/pointerleave and pointerover/pointerout\n//\n// Support: Safari 7 only\n// Safari sends mouseenter too often; see:\n// https://bugs.chromium.org/p/chromium/issues/detail?id=470258\n// for the description of the bug (it existed in older Chrome versions as well).\njQuery.each( {\n\tmouseenter: \"mouseover\",\n\tmouseleave: \"mouseout\",\n\tpointerenter: \"pointerover\",\n\tpointerleave: \"pointerout\"\n}, function( orig, fix ) {\n\tjQuery.event.special[ orig ] = {\n\t\tdelegateType: fix,\n\t\tbindType: fix,\n\n\t\thandle: function( event ) {\n\t\t\tvar ret,\n\t\t\t\ttarget = this,\n\t\t\t\trelated = event.relatedTarget,\n\t\t\t\thandleObj = event.handleObj;\n\n\t\t\t// For mouseenter/leave call the handler if related is outside the target.\n\t\t\t// NB: No relatedTarget if the mouse left/entered the browser window\n\t\t\tif ( !related || ( related !== target && !jQuery.contains( target, related ) ) ) {\n\t\t\t\tevent.type = handleObj.origType;\n\t\t\t\tret = handleObj.handler.apply( this, arguments );\n\t\t\t\tevent.type = fix;\n\t\t\t}\n\t\t\treturn ret;\n\t\t}\n\t};\n} );\n\njQuery.fn.extend( {\n\n\ton: function( types, selector, data, fn ) {\n\t\treturn on( this, types, selector, data, fn );\n\t},\n\tone: function( types, selector, data, fn ) {\n\t\treturn on( this, types, selector, data, fn, 1 );\n\t},\n\toff: function( types, selector, fn ) {\n\t\tvar handleObj, type;\n\t\tif ( types && types.preventDefault && types.handleObj ) {\n\n\t\t\t// ( event )  dispatched jQuery.Event\n\t\t\thandleObj = types.handleObj;\n\t\t\tjQuery( types.delegateTarget ).off(\n\t\t\t\thandleObj.namespace ?\n\t\t\t\t\thandleObj.origType + \".\" + handleObj.namespace :\n\t\t\t\t\thandleObj.origType,\n\t\t\t\thandleObj.selector,\n\t\t\t\thandleObj.handler\n\t\t\t);\n\t\t\treturn this;\n\t\t}\n\t\tif ( typeof types === \"object\" ) {\n\n\t\t\t// ( types-object [, selector] )\n\t\t\tfor ( type in types ) {\n\t\t\t\tthis.off( type, selector, types[ type ] );\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t\tif ( selector === false || typeof selector === \"function\" ) {\n\n\t\t\t// ( types [, fn] )\n\t\t\tfn = selector;\n\t\t\tselector = undefined;\n\t\t}\n\t\tif ( fn === false ) {\n\t\t\tfn = returnFalse;\n\t\t}\n\t\treturn this.each( function() {\n\t\t\tjQuery.event.remove( this, types, fn, selector );\n\t\t} );\n\t}\n} );\n\n\nvar\n\n\t/* eslint-disable max-len */\n\n\t// See https://github.com/eslint/eslint/issues/3229\n\trxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]*)[^>]*)\\/>/gi,\n\n\t/* eslint-enable */\n\n\t// Support: IE <=10 - 11, Edge 12 - 13\n\t// In IE/Edge using regex groups here causes severe slowdowns.\n\t// See https://connect.microsoft.com/IE/feedback/details/1736512/\n\trnoInnerhtml = /<script|<style|<link/i,\n\n\t// checked=\"checked\" or checked\n\trchecked = /checked\\s*(?:[^=]|=\\s*.checked.)/i,\n\trscriptTypeMasked = /^true\\/(.*)/,\n\trcleanScript = /^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g;\n\n// Prefer a tbody over its parent table for containing new rows\nfunction manipulationTarget( elem, content ) {\n\tif ( nodeName( elem, \"table\" ) &&\n\t\tnodeName( content.nodeType !== 11 ? content : content.firstChild, \"tr\" ) ) {\n\n\t\treturn jQuery( \">tbody\", elem )[ 0 ] || elem;\n\t}\n\n\treturn elem;\n}\n\n// Replace/restore the type attribute of script elements for safe DOM manipulation\nfunction disableScript( elem ) {\n\telem.type = ( elem.getAttribute( \"type\" ) !== null ) + \"/\" + elem.type;\n\treturn elem;\n}\nfunction restoreScript( elem ) {\n\tvar match = rscriptTypeMasked.exec( elem.type );\n\n\tif ( match ) {\n\t\telem.type = match[ 1 ];\n\t} else {\n\t\telem.removeAttribute( \"type\" );\n\t}\n\n\treturn elem;\n}\n\nfunction cloneCopyEvent( src, dest ) {\n\tvar i, l, type, pdataOld, pdataCur, udataOld, udataCur, events;\n\n\tif ( dest.nodeType !== 1 ) {\n\t\treturn;\n\t}\n\n\t// 1. Copy private data: events, handlers, etc.\n\tif ( dataPriv.hasData( src ) ) {\n\t\tpdataOld = dataPriv.access( src );\n\t\tpdataCur = dataPriv.set( dest, pdataOld );\n\t\tevents = pdataOld.events;\n\n\t\tif ( events ) {\n\t\t\tdelete pdataCur.handle;\n\t\t\tpdataCur.events = {};\n\n\t\t\tfor ( type in events ) {\n\t\t\t\tfor ( i = 0, l = events[ type ].length; i < l; i++ ) {\n\t\t\t\t\tjQuery.event.add( dest, type, events[ type ][ i ] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// 2. Copy user data\n\tif ( dataUser.hasData( src ) ) {\n\t\tudataOld = dataUser.access( src );\n\t\tudataCur = jQuery.extend( {}, udataOld );\n\n\t\tdataUser.set( dest, udataCur );\n\t}\n}\n\n// Fix IE bugs, see support tests\nfunction fixInput( src, dest ) {\n\tvar nodeName = dest.nodeName.toLowerCase();\n\n\t// Fails to persist the checked state of a cloned checkbox or radio button.\n\tif ( nodeName === \"input\" && rcheckableType.test( src.type ) ) {\n\t\tdest.checked = src.checked;\n\n\t// Fails to return the selected option to the default selected state when cloning options\n\t} else if ( nodeName === \"input\" || nodeName === \"textarea\" ) {\n\t\tdest.defaultValue = src.defaultValue;\n\t}\n}\n\nfunction domManip( collection, args, callback, ignored ) {\n\n\t// Flatten any nested arrays\n\targs = concat.apply( [], args );\n\n\tvar fragment, first, scripts, hasScripts, node, doc,\n\t\ti = 0,\n\t\tl = collection.length,\n\t\tiNoClone = l - 1,\n\t\tvalue = args[ 0 ],\n\t\tisFunction = jQuery.isFunction( value );\n\n\t// We can't cloneNode fragments that contain checked, in WebKit\n\tif ( isFunction ||\n\t\t\t( l > 1 && typeof value === \"string\" &&\n\t\t\t\t!support.checkClone && rchecked.test( value ) ) ) {\n\t\treturn collection.each( function( index ) {\n\t\t\tvar self = collection.eq( index );\n\t\t\tif ( isFunction ) {\n\t\t\t\targs[ 0 ] = value.call( this, index, self.html() );\n\t\t\t}\n\t\t\tdomManip( self, args, callback, ignored );\n\t\t} );\n\t}\n\n\tif ( l ) {\n\t\tfragment = buildFragment( args, collection[ 0 ].ownerDocument, false, collection, ignored );\n\t\tfirst = fragment.firstChild;\n\n\t\tif ( fragment.childNodes.length === 1 ) {\n\t\t\tfragment = first;\n\t\t}\n\n\t\t// Require either new content or an interest in ignored elements to invoke the callback\n\t\tif ( first || ignored ) {\n\t\t\tscripts = jQuery.map( getAll( fragment, \"script\" ), disableScript );\n\t\t\thasScripts = scripts.length;\n\n\t\t\t// Use the original fragment for the last item\n\t\t\t// instead of the first because it can end up\n\t\t\t// being emptied incorrectly in certain situations (#8070).\n\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\tnode = fragment;\n\n\t\t\t\tif ( i !== iNoClone ) {\n\t\t\t\t\tnode = jQuery.clone( node, true, true );\n\n\t\t\t\t\t// Keep references to cloned scripts for later restoration\n\t\t\t\t\tif ( hasScripts ) {\n\n\t\t\t\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t\t\t\t// push.apply(_, arraylike) throws on ancient WebKit\n\t\t\t\t\t\tjQuery.merge( scripts, getAll( node, \"script\" ) );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcallback.call( collection[ i ], node, i );\n\t\t\t}\n\n\t\t\tif ( hasScripts ) {\n\t\t\t\tdoc = scripts[ scripts.length - 1 ].ownerDocument;\n\n\t\t\t\t// Reenable scripts\n\t\t\t\tjQuery.map( scripts, restoreScript );\n\n\t\t\t\t// Evaluate executable scripts on first document insertion\n\t\t\t\tfor ( i = 0; i < hasScripts; i++ ) {\n\t\t\t\t\tnode = scripts[ i ];\n\t\t\t\t\tif ( rscriptType.test( node.type || \"\" ) &&\n\t\t\t\t\t\t!dataPriv.access( node, \"globalEval\" ) &&\n\t\t\t\t\t\tjQuery.contains( doc, node ) ) {\n\n\t\t\t\t\t\tif ( node.src ) {\n\n\t\t\t\t\t\t\t// Optional AJAX dependency, but won't run scripts if not present\n\t\t\t\t\t\t\tif ( jQuery._evalUrl ) {\n\t\t\t\t\t\t\t\tjQuery._evalUrl( node.src );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tDOMEval( node.textContent.replace( rcleanScript, \"\" ), doc );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn collection;\n}\n\nfunction remove( elem, selector, keepData ) {\n\tvar node,\n\t\tnodes = selector ? jQuery.filter( selector, elem ) : elem,\n\t\ti = 0;\n\n\tfor ( ; ( node = nodes[ i ] ) != null; i++ ) {\n\t\tif ( !keepData && node.nodeType === 1 ) {\n\t\t\tjQuery.cleanData( getAll( node ) );\n\t\t}\n\n\t\tif ( node.parentNode ) {\n\t\t\tif ( keepData && jQuery.contains( node.ownerDocument, node ) ) {\n\t\t\t\tsetGlobalEval( getAll( node, \"script\" ) );\n\t\t\t}\n\t\t\tnode.parentNode.removeChild( node );\n\t\t}\n\t}\n\n\treturn elem;\n}\n\njQuery.extend( {\n\thtmlPrefilter: function( html ) {\n\t\treturn html.replace( rxhtmlTag, \"<$1></$2>\" );\n\t},\n\n\tclone: function( elem, dataAndEvents, deepDataAndEvents ) {\n\t\tvar i, l, srcElements, destElements,\n\t\t\tclone = elem.cloneNode( true ),\n\t\t\tinPage = jQuery.contains( elem.ownerDocument, elem );\n\n\t\t// Fix IE cloning issues\n\t\tif ( !support.noCloneChecked && ( elem.nodeType === 1 || elem.nodeType === 11 ) &&\n\t\t\t\t!jQuery.isXMLDoc( elem ) ) {\n\n\t\t\t// We eschew Sizzle here for performance reasons: https://jsperf.com/getall-vs-sizzle/2\n\t\t\tdestElements = getAll( clone );\n\t\t\tsrcElements = getAll( elem );\n\n\t\t\tfor ( i = 0, l = srcElements.length; i < l; i++ ) {\n\t\t\t\tfixInput( srcElements[ i ], destElements[ i ] );\n\t\t\t}\n\t\t}\n\n\t\t// Copy the events from the original to the clone\n\t\tif ( dataAndEvents ) {\n\t\t\tif ( deepDataAndEvents ) {\n\t\t\t\tsrcElements = srcElements || getAll( elem );\n\t\t\t\tdestElements = destElements || getAll( clone );\n\n\t\t\t\tfor ( i = 0, l = srcElements.length; i < l; i++ ) {\n\t\t\t\t\tcloneCopyEvent( srcElements[ i ], destElements[ i ] );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcloneCopyEvent( elem, clone );\n\t\t\t}\n\t\t}\n\n\t\t// Preserve script evaluation history\n\t\tdestElements = getAll( clone, \"script\" );\n\t\tif ( destElements.length > 0 ) {\n\t\t\tsetGlobalEval( destElements, !inPage && getAll( elem, \"script\" ) );\n\t\t}\n\n\t\t// Return the cloned set\n\t\treturn clone;\n\t},\n\n\tcleanData: function( elems ) {\n\t\tvar data, elem, type,\n\t\t\tspecial = jQuery.event.special,\n\t\t\ti = 0;\n\n\t\tfor ( ; ( elem = elems[ i ] ) !== undefined; i++ ) {\n\t\t\tif ( acceptData( elem ) ) {\n\t\t\t\tif ( ( data = elem[ dataPriv.expando ] ) ) {\n\t\t\t\t\tif ( data.events ) {\n\t\t\t\t\t\tfor ( type in data.events ) {\n\t\t\t\t\t\t\tif ( special[ type ] ) {\n\t\t\t\t\t\t\t\tjQuery.event.remove( elem, type );\n\n\t\t\t\t\t\t\t// This is a shortcut to avoid jQuery.event.remove's overhead\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tjQuery.removeEvent( elem, type, data.handle );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Support: Chrome <=35 - 45+\n\t\t\t\t\t// Assign undefined instead of using delete, see Data#remove\n\t\t\t\t\telem[ dataPriv.expando ] = undefined;\n\t\t\t\t}\n\t\t\t\tif ( elem[ dataUser.expando ] ) {\n\n\t\t\t\t\t// Support: Chrome <=35 - 45+\n\t\t\t\t\t// Assign undefined instead of using delete, see Data#remove\n\t\t\t\t\telem[ dataUser.expando ] = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n} );\n\njQuery.fn.extend( {\n\tdetach: function( selector ) {\n\t\treturn remove( this, selector, true );\n\t},\n\n\tremove: function( selector ) {\n\t\treturn remove( this, selector );\n\t},\n\n\ttext: function( value ) {\n\t\treturn access( this, function( value ) {\n\t\t\treturn value === undefined ?\n\t\t\t\tjQuery.text( this ) :\n\t\t\t\tthis.empty().each( function() {\n\t\t\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\t\t\tthis.textContent = value;\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t}, null, value, arguments.length );\n\t},\n\n\tappend: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\tvar target = manipulationTarget( this, elem );\n\t\t\t\ttarget.appendChild( elem );\n\t\t\t}\n\t\t} );\n\t},\n\n\tprepend: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\tvar target = manipulationTarget( this, elem );\n\t\t\t\ttarget.insertBefore( elem, target.firstChild );\n\t\t\t}\n\t\t} );\n\t},\n\n\tbefore: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.parentNode ) {\n\t\t\t\tthis.parentNode.insertBefore( elem, this );\n\t\t\t}\n\t\t} );\n\t},\n\n\tafter: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.parentNode ) {\n\t\t\t\tthis.parentNode.insertBefore( elem, this.nextSibling );\n\t\t\t}\n\t\t} );\n\t},\n\n\tempty: function() {\n\t\tvar elem,\n\t\t\ti = 0;\n\n\t\tfor ( ; ( elem = this[ i ] ) != null; i++ ) {\n\t\t\tif ( elem.nodeType === 1 ) {\n\n\t\t\t\t// Prevent memory leaks\n\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n\n\t\t\t\t// Remove any remaining nodes\n\t\t\t\telem.textContent = \"\";\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tclone: function( dataAndEvents, deepDataAndEvents ) {\n\t\tdataAndEvents = dataAndEvents == null ? false : dataAndEvents;\n\t\tdeepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;\n\n\t\treturn this.map( function() {\n\t\t\treturn jQuery.clone( this, dataAndEvents, deepDataAndEvents );\n\t\t} );\n\t},\n\n\thtml: function( value ) {\n\t\treturn access( this, function( value ) {\n\t\t\tvar elem = this[ 0 ] || {},\n\t\t\t\ti = 0,\n\t\t\t\tl = this.length;\n\n\t\t\tif ( value === undefined && elem.nodeType === 1 ) {\n\t\t\t\treturn elem.innerHTML;\n\t\t\t}\n\n\t\t\t// See if we can take a shortcut and just use innerHTML\n\t\t\tif ( typeof value === \"string\" && !rnoInnerhtml.test( value ) &&\n\t\t\t\t!wrapMap[ ( rtagName.exec( value ) || [ \"\", \"\" ] )[ 1 ].toLowerCase() ] ) {\n\n\t\t\t\tvalue = jQuery.htmlPrefilter( value );\n\n\t\t\t\ttry {\n\t\t\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\t\t\telem = this[ i ] || {};\n\n\t\t\t\t\t\t// Remove element nodes and prevent memory leaks\n\t\t\t\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n\t\t\t\t\t\t\telem.innerHTML = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\telem = 0;\n\n\t\t\t\t// If using innerHTML throws an exception, use the fallback method\n\t\t\t\t} catch ( e ) {}\n\t\t\t}\n\n\t\t\tif ( elem ) {\n\t\t\t\tthis.empty().append( value );\n\t\t\t}\n\t\t}, null, value, arguments.length );\n\t},\n\n\treplaceWith: function() {\n\t\tvar ignored = [];\n\n\t\t// Make the changes, replacing each non-ignored context element with the new content\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tvar parent = this.parentNode;\n\n\t\t\tif ( jQuery.inArray( this, ignored ) < 0 ) {\n\t\t\t\tjQuery.cleanData( getAll( this ) );\n\t\t\t\tif ( parent ) {\n\t\t\t\t\tparent.replaceChild( elem, this );\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Force callback invocation\n\t\t}, ignored );\n\t}\n} );\n\njQuery.each( {\n\tappendTo: \"append\",\n\tprependTo: \"prepend\",\n\tinsertBefore: \"before\",\n\tinsertAfter: \"after\",\n\treplaceAll: \"replaceWith\"\n}, function( name, original ) {\n\tjQuery.fn[ name ] = function( selector ) {\n\t\tvar elems,\n\t\t\tret = [],\n\t\t\tinsert = jQuery( selector ),\n\t\t\tlast = insert.length - 1,\n\t\t\ti = 0;\n\n\t\tfor ( ; i <= last; i++ ) {\n\t\t\telems = i === last ? this : this.clone( true );\n\t\t\tjQuery( insert[ i ] )[ original ]( elems );\n\n\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t// .get() because push.apply(_, arraylike) throws on ancient WebKit\n\t\t\tpush.apply( ret, elems.get() );\n\t\t}\n\n\t\treturn this.pushStack( ret );\n\t};\n} );\nvar rmargin = ( /^margin/ );\n\nvar rnumnonpx = new RegExp( \"^(\" + pnum + \")(?!px)[a-z%]+$\", \"i\" );\n\nvar getStyles = function( elem ) {\n\n\t\t// Support: IE <=11 only, Firefox <=30 (#15098, #14150)\n\t\t// IE throws on elements created in popups\n\t\t// FF meanwhile throws on frame elements through \"defaultView.getComputedStyle\"\n\t\tvar view = elem.ownerDocument.defaultView;\n\n\t\tif ( !view || !view.opener ) {\n\t\t\tview = window;\n\t\t}\n\n\t\treturn view.getComputedStyle( elem );\n\t};\n\n\n\n( function() {\n\n\t// Executing both pixelPosition & boxSizingReliable tests require only one layout\n\t// so they're executed at the same time to save the second computation.\n\tfunction computeStyleTests() {\n\n\t\t// This is a singleton, we need to execute it only once\n\t\tif ( !div ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdiv.style.cssText =\n\t\t\t\"box-sizing:border-box;\" +\n\t\t\t\"position:relative;display:block;\" +\n\t\t\t\"margin:auto;border:1px;padding:1px;\" +\n\t\t\t\"top:1%;width:50%\";\n\t\tdiv.innerHTML = \"\";\n\t\tdocumentElement.appendChild( container );\n\n\t\tvar divStyle = window.getComputedStyle( div );\n\t\tpixelPositionVal = divStyle.top !== \"1%\";\n\n\t\t// Support: Android 4.0 - 4.3 only, Firefox <=3 - 44\n\t\treliableMarginLeftVal = divStyle.marginLeft === \"2px\";\n\t\tboxSizingReliableVal = divStyle.width === \"4px\";\n\n\t\t// Support: Android 4.0 - 4.3 only\n\t\t// Some styles come back with percentage values, even though they shouldn't\n\t\tdiv.style.marginRight = \"50%\";\n\t\tpixelMarginRightVal = divStyle.marginRight === \"4px\";\n\n\t\tdocumentElement.removeChild( container );\n\n\t\t// Nullify the div so it wouldn't be stored in the memory and\n\t\t// it will also be a sign that checks already performed\n\t\tdiv = null;\n\t}\n\n\tvar pixelPositionVal, boxSizingReliableVal, pixelMarginRightVal, reliableMarginLeftVal,\n\t\tcontainer = document.createElement( \"div\" ),\n\t\tdiv = document.createElement( \"div\" );\n\n\t// Finish early in limited (non-browser) environments\n\tif ( !div.style ) {\n\t\treturn;\n\t}\n\n\t// Support: IE <=9 - 11 only\n\t// Style of cloned element affects source element cloned (#8908)\n\tdiv.style.backgroundClip = \"content-box\";\n\tdiv.cloneNode( true ).style.backgroundClip = \"\";\n\tsupport.clearCloneStyle = div.style.backgroundClip === \"content-box\";\n\n\tcontainer.style.cssText = \"border:0;width:8px;height:0;top:0;left:-9999px;\" +\n\t\t\"padding:0;margin-top:1px;position:absolute\";\n\tcontainer.appendChild( div );\n\n\tjQuery.extend( support, {\n\t\tpixelPosition: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn pixelPositionVal;\n\t\t},\n\t\tboxSizingReliable: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn boxSizingReliableVal;\n\t\t},\n\t\tpixelMarginRight: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn pixelMarginRightVal;\n\t\t},\n\t\treliableMarginLeft: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn reliableMarginLeftVal;\n\t\t}\n\t} );\n} )();\n\n\nfunction curCSS( elem, name, computed ) {\n\tvar width, minWidth, maxWidth, ret,\n\n\t\t// Support: Firefox 51+\n\t\t// Retrieving style before computed somehow\n\t\t// fixes an issue with getting wrong values\n\t\t// on detached elements\n\t\tstyle = elem.style;\n\n\tcomputed = computed || getStyles( elem );\n\n\t// getPropertyValue is needed for:\n\t//   .css('filter') (IE 9 only, #12537)\n\t//   .css('--customProperty) (#3144)\n\tif ( computed ) {\n\t\tret = computed.getPropertyValue( name ) || computed[ name ];\n\n\t\tif ( ret === \"\" && !jQuery.contains( elem.ownerDocument, elem ) ) {\n\t\t\tret = jQuery.style( elem, name );\n\t\t}\n\n\t\t// A tribute to the \"awesome hack by Dean Edwards\"\n\t\t// Android Browser returns percentage for some values,\n\t\t// but width seems to be reliably pixels.\n\t\t// This is against the CSSOM draft spec:\n\t\t// https://drafts.csswg.org/cssom/#resolved-values\n\t\tif ( !support.pixelMarginRight() && rnumnonpx.test( ret ) && rmargin.test( name ) ) {\n\n\t\t\t// Remember the original values\n\t\t\twidth = style.width;\n\t\t\tminWidth = style.minWidth;\n\t\t\tmaxWidth = style.maxWidth;\n\n\t\t\t// Put in the new values to get a computed value out\n\t\t\tstyle.minWidth = style.maxWidth = style.width = ret;\n\t\t\tret = computed.width;\n\n\t\t\t// Revert the changed values\n\t\t\tstyle.width = width;\n\t\t\tstyle.minWidth = minWidth;\n\t\t\tstyle.maxWidth = maxWidth;\n\t\t}\n\t}\n\n\treturn ret !== undefined ?\n\n\t\t// Support: IE <=9 - 11 only\n\t\t// IE returns zIndex value as an integer.\n\t\tret + \"\" :\n\t\tret;\n}\n\n\nfunction addGetHookIf( conditionFn, hookFn ) {\n\n\t// Define the hook, we'll check on the first run if it's really needed.\n\treturn {\n\t\tget: function() {\n\t\t\tif ( conditionFn() ) {\n\n\t\t\t\t// Hook not needed (or it's not possible to use it due\n\t\t\t\t// to missing dependency), remove it.\n\t\t\t\tdelete this.get;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Hook needed; redefine it so that the support test is not executed again.\n\t\t\treturn ( this.get = hookFn ).apply( this, arguments );\n\t\t}\n\t};\n}\n\n\nvar\n\n\t// Swappable if display is none or starts with table\n\t// except \"table\", \"table-cell\", or \"table-caption\"\n\t// See here for display values: https://developer.mozilla.org/en-US/docs/CSS/display\n\trdisplayswap = /^(none|table(?!-c[ea]).+)/,\n\trcustomProp = /^--/,\n\tcssShow = { position: \"absolute\", visibility: \"hidden\", display: \"block\" },\n\tcssNormalTransform = {\n\t\tletterSpacing: \"0\",\n\t\tfontWeight: \"400\"\n\t},\n\n\tcssPrefixes = [ \"Webkit\", \"Moz\", \"ms\" ],\n\temptyStyle = document.createElement( \"div\" ).style;\n\n// Return a css property mapped to a potentially vendor prefixed property\nfunction vendorPropName( name ) {\n\n\t// Shortcut for names that are not vendor prefixed\n\tif ( name in emptyStyle ) {\n\t\treturn name;\n\t}\n\n\t// Check for vendor prefixed names\n\tvar capName = name[ 0 ].toUpperCase() + name.slice( 1 ),\n\t\ti = cssPrefixes.length;\n\n\twhile ( i-- ) {\n\t\tname = cssPrefixes[ i ] + capName;\n\t\tif ( name in emptyStyle ) {\n\t\t\treturn name;\n\t\t}\n\t}\n}\n\n// Return a property mapped along what jQuery.cssProps suggests or to\n// a vendor prefixed property.\nfunction finalPropName( name ) {\n\tvar ret = jQuery.cssProps[ name ];\n\tif ( !ret ) {\n\t\tret = jQuery.cssProps[ name ] = vendorPropName( name ) || name;\n\t}\n\treturn ret;\n}\n\nfunction setPositiveNumber( elem, value, subtract ) {\n\n\t// Any relative (+/-) values have already been\n\t// normalized at this point\n\tvar matches = rcssNum.exec( value );\n\treturn matches ?\n\n\t\t// Guard against undefined \"subtract\", e.g., when used as in cssHooks\n\t\tMath.max( 0, matches[ 2 ] - ( subtract || 0 ) ) + ( matches[ 3 ] || \"px\" ) :\n\t\tvalue;\n}\n\nfunction augmentWidthOrHeight( elem, name, extra, isBorderBox, styles ) {\n\tvar i,\n\t\tval = 0;\n\n\t// If we already have the right measurement, avoid augmentation\n\tif ( extra === ( isBorderBox ? \"border\" : \"content\" ) ) {\n\t\ti = 4;\n\n\t// Otherwise initialize for horizontal or vertical properties\n\t} else {\n\t\ti = name === \"width\" ? 1 : 0;\n\t}\n\n\tfor ( ; i < 4; i += 2 ) {\n\n\t\t// Both box models exclude margin, so add it if we want it\n\t\tif ( extra === \"margin\" ) {\n\t\t\tval += jQuery.css( elem, extra + cssExpand[ i ], true, styles );\n\t\t}\n\n\t\tif ( isBorderBox ) {\n\n\t\t\t// border-box includes padding, so remove it if we want content\n\t\t\tif ( extra === \"content\" ) {\n\t\t\t\tval -= jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n\t\t\t}\n\n\t\t\t// At this point, extra isn't border nor margin, so remove border\n\t\t\tif ( extra !== \"margin\" ) {\n\t\t\t\tval -= jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\t\t\t}\n\t\t} else {\n\n\t\t\t// At this point, extra isn't content, so add padding\n\t\t\tval += jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n\n\t\t\t// At this point, extra isn't content nor padding, so add border\n\t\t\tif ( extra !== \"padding\" ) {\n\t\t\t\tval += jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\t\t\t}\n\t\t}\n\t}\n\n\treturn val;\n}\n\nfunction getWidthOrHeight( elem, name, extra ) {\n\n\t// Start with computed style\n\tvar valueIsBorderBox,\n\t\tstyles = getStyles( elem ),\n\t\tval = curCSS( elem, name, styles ),\n\t\tisBorderBox = jQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\";\n\n\t// Computed unit is not pixels. Stop here and return.\n\tif ( rnumnonpx.test( val ) ) {\n\t\treturn val;\n\t}\n\n\t// Check for style in case a browser which returns unreliable values\n\t// for getComputedStyle silently falls back to the reliable elem.style\n\tvalueIsBorderBox = isBorderBox &&\n\t\t( support.boxSizingReliable() || val === elem.style[ name ] );\n\n\t// Fall back to offsetWidth/Height when value is \"auto\"\n\t// This happens for inline elements with no explicit setting (gh-3571)\n\tif ( val === \"auto\" ) {\n\t\tval = elem[ \"offset\" + name[ 0 ].toUpperCase() + name.slice( 1 ) ];\n\t}\n\n\t// Normalize \"\", auto, and prepare for extra\n\tval = parseFloat( val ) || 0;\n\n\t// Use the active box-sizing model to add/subtract irrelevant styles\n\treturn ( val +\n\t\taugmentWidthOrHeight(\n\t\t\telem,\n\t\t\tname,\n\t\t\textra || ( isBorderBox ? \"border\" : \"content\" ),\n\t\t\tvalueIsBorderBox,\n\t\t\tstyles\n\t\t)\n\t) + \"px\";\n}\n\njQuery.extend( {\n\n\t// Add in style property hooks for overriding the default\n\t// behavior of getting and setting a style property\n\tcssHooks: {\n\t\topacity: {\n\t\t\tget: function( elem, computed ) {\n\t\t\t\tif ( computed ) {\n\n\t\t\t\t\t// We should always get a number back from opacity\n\t\t\t\t\tvar ret = curCSS( elem, \"opacity\" );\n\t\t\t\t\treturn ret === \"\" ? \"1\" : ret;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t// Don't automatically add \"px\" to these possibly-unitless properties\n\tcssNumber: {\n\t\t\"animationIterationCount\": true,\n\t\t\"columnCount\": true,\n\t\t\"fillOpacity\": true,\n\t\t\"flexGrow\": true,\n\t\t\"flexShrink\": true,\n\t\t\"fontWeight\": true,\n\t\t\"lineHeight\": true,\n\t\t\"opacity\": true,\n\t\t\"order\": true,\n\t\t\"orphans\": true,\n\t\t\"widows\": true,\n\t\t\"zIndex\": true,\n\t\t\"zoom\": true\n\t},\n\n\t// Add in properties whose names you wish to fix before\n\t// setting or getting the value\n\tcssProps: {\n\t\t\"float\": \"cssFloat\"\n\t},\n\n\t// Get and set the style property on a DOM Node\n\tstyle: function( elem, name, value, extra ) {\n\n\t\t// Don't set styles on text and comment nodes\n\t\tif ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Make sure that we're working with the right name\n\t\tvar ret, type, hooks,\n\t\t\torigName = jQuery.camelCase( name ),\n\t\t\tisCustomProp = rcustomProp.test( name ),\n\t\t\tstyle = elem.style;\n\n\t\t// Make sure that we're working with the right name. We don't\n\t\t// want to query the value if it is a CSS custom property\n\t\t// since they are user-defined.\n\t\tif ( !isCustomProp ) {\n\t\t\tname = finalPropName( origName );\n\t\t}\n\n\t\t// Gets hook for the prefixed version, then unprefixed version\n\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n\n\t\t// Check if we're setting a value\n\t\tif ( value !== undefined ) {\n\t\t\ttype = typeof value;\n\n\t\t\t// Convert \"+=\" or \"-=\" to relative numbers (#7345)\n\t\t\tif ( type === \"string\" && ( ret = rcssNum.exec( value ) ) && ret[ 1 ] ) {\n\t\t\t\tvalue = adjustCSS( elem, name, ret );\n\n\t\t\t\t// Fixes bug #9237\n\t\t\t\ttype = \"number\";\n\t\t\t}\n\n\t\t\t// Make sure that null and NaN values aren't set (#7116)\n\t\t\tif ( value == null || value !== value ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If a number was passed in, add the unit (except for certain CSS properties)\n\t\t\tif ( type === \"number\" ) {\n\t\t\t\tvalue += ret && ret[ 3 ] || ( jQuery.cssNumber[ origName ] ? \"\" : \"px\" );\n\t\t\t}\n\n\t\t\t// background-* props affect original clone's values\n\t\t\tif ( !support.clearCloneStyle && value === \"\" && name.indexOf( \"background\" ) === 0 ) {\n\t\t\t\tstyle[ name ] = \"inherit\";\n\t\t\t}\n\n\t\t\t// If a hook was provided, use that value, otherwise just set the specified value\n\t\t\tif ( !hooks || !( \"set\" in hooks ) ||\n\t\t\t\t( value = hooks.set( elem, value, extra ) ) !== undefined ) {\n\n\t\t\t\tif ( isCustomProp ) {\n\t\t\t\t\tstyle.setProperty( name, value );\n\t\t\t\t} else {\n\t\t\t\t\tstyle[ name ] = value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// If a hook was provided get the non-computed value from there\n\t\t\tif ( hooks && \"get\" in hooks &&\n\t\t\t\t( ret = hooks.get( elem, false, extra ) ) !== undefined ) {\n\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\t// Otherwise just get the value from the style object\n\t\t\treturn style[ name ];\n\t\t}\n\t},\n\n\tcss: function( elem, name, extra, styles ) {\n\t\tvar val, num, hooks,\n\t\t\torigName = jQuery.camelCase( name ),\n\t\t\tisCustomProp = rcustomProp.test( name );\n\n\t\t// Make sure that we're working with the right name. We don't\n\t\t// want to modify the value if it is a CSS custom property\n\t\t// since they are user-defined.\n\t\tif ( !isCustomProp ) {\n\t\t\tname = finalPropName( origName );\n\t\t}\n\n\t\t// Try prefixed name followed by the unprefixed name\n\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n\n\t\t// If a hook was provided get the computed value from there\n\t\tif ( hooks && \"get\" in hooks ) {\n\t\t\tval = hooks.get( elem, true, extra );\n\t\t}\n\n\t\t// Otherwise, if a way to get the computed value exists, use that\n\t\tif ( val === undefined ) {\n\t\t\tval = curCSS( elem, name, styles );\n\t\t}\n\n\t\t// Convert \"normal\" to computed value\n\t\tif ( val === \"normal\" && name in cssNormalTransform ) {\n\t\t\tval = cssNormalTransform[ name ];\n\t\t}\n\n\t\t// Make numeric if forced or a qualifier was provided and val looks numeric\n\t\tif ( extra === \"\" || extra ) {\n\t\t\tnum = parseFloat( val );\n\t\t\treturn extra === true || isFinite( num ) ? num || 0 : val;\n\t\t}\n\n\t\treturn val;\n\t}\n} );\n\njQuery.each( [ \"height\", \"width\" ], function( i, name ) {\n\tjQuery.cssHooks[ name ] = {\n\t\tget: function( elem, computed, extra ) {\n\t\t\tif ( computed ) {\n\n\t\t\t\t// Certain elements can have dimension info if we invisibly show them\n\t\t\t\t// but it must have a current display style that would benefit\n\t\t\t\treturn rdisplayswap.test( jQuery.css( elem, \"display\" ) ) &&\n\n\t\t\t\t\t// Support: Safari 8+\n\t\t\t\t\t// Table columns in Safari have non-zero offsetWidth & zero\n\t\t\t\t\t// getBoundingClientRect().width unless display is changed.\n\t\t\t\t\t// Support: IE <=11 only\n\t\t\t\t\t// Running getBoundingClientRect on a disconnected node\n\t\t\t\t\t// in IE throws an error.\n\t\t\t\t\t( !elem.getClientRects().length || !elem.getBoundingClientRect().width ) ?\n\t\t\t\t\t\tswap( elem, cssShow, function() {\n\t\t\t\t\t\t\treturn getWidthOrHeight( elem, name, extra );\n\t\t\t\t\t\t} ) :\n\t\t\t\t\t\tgetWidthOrHeight( elem, name, extra );\n\t\t\t}\n\t\t},\n\n\t\tset: function( elem, value, extra ) {\n\t\t\tvar matches,\n\t\t\t\tstyles = extra && getStyles( elem ),\n\t\t\t\tsubtract = extra && augmentWidthOrHeight(\n\t\t\t\t\telem,\n\t\t\t\t\tname,\n\t\t\t\t\textra,\n\t\t\t\t\tjQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\",\n\t\t\t\t\tstyles\n\t\t\t\t);\n\n\t\t\t// Convert to pixels if value adjustment is needed\n\t\t\tif ( subtract && ( matches = rcssNum.exec( value ) ) &&\n\t\t\t\t( matches[ 3 ] || \"px\" ) !== \"px\" ) {\n\n\t\t\t\telem.style[ name ] = value;\n\t\t\t\tvalue = jQuery.css( elem, name );\n\t\t\t}\n\n\t\t\treturn setPositiveNumber( elem, value, subtract );\n\t\t}\n\t};\n} );\n\njQuery.cssHooks.marginLeft = addGetHookIf( support.reliableMarginLeft,\n\tfunction( elem, computed ) {\n\t\tif ( computed ) {\n\t\t\treturn ( parseFloat( curCSS( elem, \"marginLeft\" ) ) ||\n\t\t\t\telem.getBoundingClientRect().left -\n\t\t\t\t\tswap( elem, { marginLeft: 0 }, function() {\n\t\t\t\t\t\treturn elem.getBoundingClientRect().left;\n\t\t\t\t\t} )\n\t\t\t\t) + \"px\";\n\t\t}\n\t}\n);\n\n// These hooks are used by animate to expand properties\njQuery.each( {\n\tmargin: \"\",\n\tpadding: \"\",\n\tborder: \"Width\"\n}, function( prefix, suffix ) {\n\tjQuery.cssHooks[ prefix + suffix ] = {\n\t\texpand: function( value ) {\n\t\t\tvar i = 0,\n\t\t\t\texpanded = {},\n\n\t\t\t\t// Assumes a single number if not a string\n\t\t\t\tparts = typeof value === \"string\" ? value.split( \" \" ) : [ value ];\n\n\t\t\tfor ( ; i < 4; i++ ) {\n\t\t\t\texpanded[ prefix + cssExpand[ i ] + suffix ] =\n\t\t\t\t\tparts[ i ] || parts[ i - 2 ] || parts[ 0 ];\n\t\t\t}\n\n\t\t\treturn expanded;\n\t\t}\n\t};\n\n\tif ( !rmargin.test( prefix ) ) {\n\t\tjQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;\n\t}\n} );\n\njQuery.fn.extend( {\n\tcss: function( name, value ) {\n\t\treturn access( this, function( elem, name, value ) {\n\t\t\tvar styles, len,\n\t\t\t\tmap = {},\n\t\t\t\ti = 0;\n\n\t\t\tif ( Array.isArray( name ) ) {\n\t\t\t\tstyles = getStyles( elem );\n\t\t\t\tlen = name.length;\n\n\t\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\t\tmap[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );\n\t\t\t\t}\n\n\t\t\t\treturn map;\n\t\t\t}\n\n\t\t\treturn value !== undefined ?\n\t\t\t\tjQuery.style( elem, name, value ) :\n\t\t\t\tjQuery.css( elem, name );\n\t\t}, name, value, arguments.length > 1 );\n\t}\n} );\n\n\nfunction Tween( elem, options, prop, end, easing ) {\n\treturn new Tween.prototype.init( elem, options, prop, end, easing );\n}\njQuery.Tween = Tween;\n\nTween.prototype = {\n\tconstructor: Tween,\n\tinit: function( elem, options, prop, end, easing, unit ) {\n\t\tthis.elem = elem;\n\t\tthis.prop = prop;\n\t\tthis.easing = easing || jQuery.easing._default;\n\t\tthis.options = options;\n\t\tthis.start = this.now = this.cur();\n\t\tthis.end = end;\n\t\tthis.unit = unit || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" );\n\t},\n\tcur: function() {\n\t\tvar hooks = Tween.propHooks[ this.prop ];\n\n\t\treturn hooks && hooks.get ?\n\t\t\thooks.get( this ) :\n\t\t\tTween.propHooks._default.get( this );\n\t},\n\trun: function( percent ) {\n\t\tvar eased,\n\t\t\thooks = Tween.propHooks[ this.prop ];\n\n\t\tif ( this.options.duration ) {\n\t\t\tthis.pos = eased = jQuery.easing[ this.easing ](\n\t\t\t\tpercent, this.options.duration * percent, 0, 1, this.options.duration\n\t\t\t);\n\t\t} else {\n\t\t\tthis.pos = eased = percent;\n\t\t}\n\t\tthis.now = ( this.end - this.start ) * eased + this.start;\n\n\t\tif ( this.options.step ) {\n\t\t\tthis.options.step.call( this.elem, this.now, this );\n\t\t}\n\n\t\tif ( hooks && hooks.set ) {\n\t\t\thooks.set( this );\n\t\t} else {\n\t\t\tTween.propHooks._default.set( this );\n\t\t}\n\t\treturn this;\n\t}\n};\n\nTween.prototype.init.prototype = Tween.prototype;\n\nTween.propHooks = {\n\t_default: {\n\t\tget: function( tween ) {\n\t\t\tvar result;\n\n\t\t\t// Use a property on the element directly when it is not a DOM element,\n\t\t\t// or when there is no matching style property that exists.\n\t\t\tif ( tween.elem.nodeType !== 1 ||\n\t\t\t\ttween.elem[ tween.prop ] != null && tween.elem.style[ tween.prop ] == null ) {\n\t\t\t\treturn tween.elem[ tween.prop ];\n\t\t\t}\n\n\t\t\t// Passing an empty string as a 3rd parameter to .css will automatically\n\t\t\t// attempt a parseFloat and fallback to a string if the parse fails.\n\t\t\t// Simple values such as \"10px\" are parsed to Float;\n\t\t\t// complex values such as \"rotate(1rad)\" are returned as-is.\n\t\t\tresult = jQuery.css( tween.elem, tween.prop, \"\" );\n\n\t\t\t// Empty strings, null, undefined and \"auto\" are converted to 0.\n\t\t\treturn !result || result === \"auto\" ? 0 : result;\n\t\t},\n\t\tset: function( tween ) {\n\n\t\t\t// Use step hook for back compat.\n\t\t\t// Use cssHook if its there.\n\t\t\t// Use .style if available and use plain properties where available.\n\t\t\tif ( jQuery.fx.step[ tween.prop ] ) {\n\t\t\t\tjQuery.fx.step[ tween.prop ]( tween );\n\t\t\t} else if ( tween.elem.nodeType === 1 &&\n\t\t\t\t( tween.elem.style[ jQuery.cssProps[ tween.prop ] ] != null ||\n\t\t\t\t\tjQuery.cssHooks[ tween.prop ] ) ) {\n\t\t\t\tjQuery.style( tween.elem, tween.prop, tween.now + tween.unit );\n\t\t\t} else {\n\t\t\t\ttween.elem[ tween.prop ] = tween.now;\n\t\t\t}\n\t\t}\n\t}\n};\n\n// Support: IE <=9 only\n// Panic based approach to setting things on disconnected nodes\nTween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {\n\tset: function( tween ) {\n\t\tif ( tween.elem.nodeType && tween.elem.parentNode ) {\n\t\t\ttween.elem[ tween.prop ] = tween.now;\n\t\t}\n\t}\n};\n\njQuery.easing = {\n\tlinear: function( p ) {\n\t\treturn p;\n\t},\n\tswing: function( p ) {\n\t\treturn 0.5 - Math.cos( p * Math.PI ) / 2;\n\t},\n\t_default: \"swing\"\n};\n\njQuery.fx = Tween.prototype.init;\n\n// Back compat <1.8 extension point\njQuery.fx.step = {};\n\n\n\n\nvar\n\tfxNow, inProgress,\n\trfxtypes = /^(?:toggle|show|hide)$/,\n\trrun = /queueHooks$/;\n\nfunction schedule() {\n\tif ( inProgress ) {\n\t\tif ( document.hidden === false && window.requestAnimationFrame ) {\n\t\t\twindow.requestAnimationFrame( schedule );\n\t\t} else {\n\t\t\twindow.setTimeout( schedule, jQuery.fx.interval );\n\t\t}\n\n\t\tjQuery.fx.tick();\n\t}\n}\n\n// Animations created synchronously will run synchronously\nfunction createFxNow() {\n\twindow.setTimeout( function() {\n\t\tfxNow = undefined;\n\t} );\n\treturn ( fxNow = jQuery.now() );\n}\n\n// Generate parameters to create a standard animation\nfunction genFx( type, includeWidth ) {\n\tvar which,\n\t\ti = 0,\n\t\tattrs = { height: type };\n\n\t// If we include width, step value is 1 to do all cssExpand values,\n\t// otherwise step value is 2 to skip over Left and Right\n\tincludeWidth = includeWidth ? 1 : 0;\n\tfor ( ; i < 4; i += 2 - includeWidth ) {\n\t\twhich = cssExpand[ i ];\n\t\tattrs[ \"margin\" + which ] = attrs[ \"padding\" + which ] = type;\n\t}\n\n\tif ( includeWidth ) {\n\t\tattrs.opacity = attrs.width = type;\n\t}\n\n\treturn attrs;\n}\n\nfunction createTween( value, prop, animation ) {\n\tvar tween,\n\t\tcollection = ( Animation.tweeners[ prop ] || [] ).concat( Animation.tweeners[ \"*\" ] ),\n\t\tindex = 0,\n\t\tlength = collection.length;\n\tfor ( ; index < length; index++ ) {\n\t\tif ( ( tween = collection[ index ].call( animation, prop, value ) ) ) {\n\n\t\t\t// We're done with this property\n\t\t\treturn tween;\n\t\t}\n\t}\n}\n\nfunction defaultPrefilter( elem, props, opts ) {\n\tvar prop, value, toggle, hooks, oldfire, propTween, restoreDisplay, display,\n\t\tisBox = \"width\" in props || \"height\" in props,\n\t\tanim = this,\n\t\torig = {},\n\t\tstyle = elem.style,\n\t\thidden = elem.nodeType && isHiddenWithinTree( elem ),\n\t\tdataShow = dataPriv.get( elem, \"fxshow\" );\n\n\t// Queue-skipping animations hijack the fx hooks\n\tif ( !opts.queue ) {\n\t\thooks = jQuery._queueHooks( elem, \"fx\" );\n\t\tif ( hooks.unqueued == null ) {\n\t\t\thooks.unqueued = 0;\n\t\t\toldfire = hooks.empty.fire;\n\t\t\thooks.empty.fire = function() {\n\t\t\t\tif ( !hooks.unqueued ) {\n\t\t\t\t\toldfire();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\thooks.unqueued++;\n\n\t\tanim.always( function() {\n\n\t\t\t// Ensure the complete handler is called before this completes\n\t\t\tanim.always( function() {\n\t\t\t\thooks.unqueued--;\n\t\t\t\tif ( !jQuery.queue( elem, \"fx\" ).length ) {\n\t\t\t\t\thooks.empty.fire();\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\t}\n\n\t// Detect show/hide animations\n\tfor ( prop in props ) {\n\t\tvalue = props[ prop ];\n\t\tif ( rfxtypes.test( value ) ) {\n\t\t\tdelete props[ prop ];\n\t\t\ttoggle = toggle || value === \"toggle\";\n\t\t\tif ( value === ( hidden ? \"hide\" : \"show\" ) ) {\n\n\t\t\t\t// Pretend to be hidden if this is a \"show\" and\n\t\t\t\t// there is still data from a stopped show/hide\n\t\t\t\tif ( value === \"show\" && dataShow && dataShow[ prop ] !== undefined ) {\n\t\t\t\t\thidden = true;\n\n\t\t\t\t// Ignore all other no-op show/hide data\n\t\t\t\t} else {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\torig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );\n\t\t}\n\t}\n\n\t// Bail out if this is a no-op like .hide().hide()\n\tpropTween = !jQuery.isEmptyObject( props );\n\tif ( !propTween && jQuery.isEmptyObject( orig ) ) {\n\t\treturn;\n\t}\n\n\t// Restrict \"overflow\" and \"display\" styles during box animations\n\tif ( isBox && elem.nodeType === 1 ) {\n\n\t\t// Support: IE <=9 - 11, Edge 12 - 13\n\t\t// Record all 3 overflow attributes because IE does not infer the shorthand\n\t\t// from identically-valued overflowX and overflowY\n\t\topts.overflow = [ style.overflow, style.overflowX, style.overflowY ];\n\n\t\t// Identify a display type, preferring old show/hide data over the CSS cascade\n\t\trestoreDisplay = dataShow && dataShow.display;\n\t\tif ( restoreDisplay == null ) {\n\t\t\trestoreDisplay = dataPriv.get( elem, \"display\" );\n\t\t}\n\t\tdisplay = jQuery.css( elem, \"display\" );\n\t\tif ( display === \"none\" ) {\n\t\t\tif ( restoreDisplay ) {\n\t\t\t\tdisplay = restoreDisplay;\n\t\t\t} else {\n\n\t\t\t\t// Get nonempty value(s) by temporarily forcing visibility\n\t\t\t\tshowHide( [ elem ], true );\n\t\t\t\trestoreDisplay = elem.style.display || restoreDisplay;\n\t\t\t\tdisplay = jQuery.css( elem, \"display\" );\n\t\t\t\tshowHide( [ elem ] );\n\t\t\t}\n\t\t}\n\n\t\t// Animate inline elements as inline-block\n\t\tif ( display === \"inline\" || display === \"inline-block\" && restoreDisplay != null ) {\n\t\t\tif ( jQuery.css( elem, \"float\" ) === \"none\" ) {\n\n\t\t\t\t// Restore the original display value at the end of pure show/hide animations\n\t\t\t\tif ( !propTween ) {\n\t\t\t\t\tanim.done( function() {\n\t\t\t\t\t\tstyle.display = restoreDisplay;\n\t\t\t\t\t} );\n\t\t\t\t\tif ( restoreDisplay == null ) {\n\t\t\t\t\t\tdisplay = style.display;\n\t\t\t\t\t\trestoreDisplay = display === \"none\" ? \"\" : display;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tstyle.display = \"inline-block\";\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( opts.overflow ) {\n\t\tstyle.overflow = \"hidden\";\n\t\tanim.always( function() {\n\t\t\tstyle.overflow = opts.overflow[ 0 ];\n\t\t\tstyle.overflowX = opts.overflow[ 1 ];\n\t\t\tstyle.overflowY = opts.overflow[ 2 ];\n\t\t} );\n\t}\n\n\t// Implement show/hide animations\n\tpropTween = false;\n\tfor ( prop in orig ) {\n\n\t\t// General show/hide setup for this element animation\n\t\tif ( !propTween ) {\n\t\t\tif ( dataShow ) {\n\t\t\t\tif ( \"hidden\" in dataShow ) {\n\t\t\t\t\thidden = dataShow.hidden;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdataShow = dataPriv.access( elem, \"fxshow\", { display: restoreDisplay } );\n\t\t\t}\n\n\t\t\t// Store hidden/visible for toggle so `.stop().toggle()` \"reverses\"\n\t\t\tif ( toggle ) {\n\t\t\t\tdataShow.hidden = !hidden;\n\t\t\t}\n\n\t\t\t// Show elements before animating them\n\t\t\tif ( hidden ) {\n\t\t\t\tshowHide( [ elem ], true );\n\t\t\t}\n\n\t\t\t/* eslint-disable no-loop-func */\n\n\t\t\tanim.done( function() {\n\n\t\t\t/* eslint-enable no-loop-func */\n\n\t\t\t\t// The final step of a \"hide\" animation is actually hiding the element\n\t\t\t\tif ( !hidden ) {\n\t\t\t\t\tshowHide( [ elem ] );\n\t\t\t\t}\n\t\t\t\tdataPriv.remove( elem, \"fxshow\" );\n\t\t\t\tfor ( prop in orig ) {\n\t\t\t\t\tjQuery.style( elem, prop, orig[ prop ] );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\t// Per-property setup\n\t\tpropTween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );\n\t\tif ( !( prop in dataShow ) ) {\n\t\t\tdataShow[ prop ] = propTween.start;\n\t\t\tif ( hidden ) {\n\t\t\t\tpropTween.end = propTween.start;\n\t\t\t\tpropTween.start = 0;\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction propFilter( props, specialEasing ) {\n\tvar index, name, easing, value, hooks;\n\n\t// camelCase, specialEasing and expand cssHook pass\n\tfor ( index in props ) {\n\t\tname = jQuery.camelCase( index );\n\t\teasing = specialEasing[ name ];\n\t\tvalue = props[ index ];\n\t\tif ( Array.isArray( value ) ) {\n\t\t\teasing = value[ 1 ];\n\t\t\tvalue = props[ index ] = value[ 0 ];\n\t\t}\n\n\t\tif ( index !== name ) {\n\t\t\tprops[ name ] = value;\n\t\t\tdelete props[ index ];\n\t\t}\n\n\t\thooks = jQuery.cssHooks[ name ];\n\t\tif ( hooks && \"expand\" in hooks ) {\n\t\t\tvalue = hooks.expand( value );\n\t\t\tdelete props[ name ];\n\n\t\t\t// Not quite $.extend, this won't overwrite existing keys.\n\t\t\t// Reusing 'index' because we have the correct \"name\"\n\t\t\tfor ( index in value ) {\n\t\t\t\tif ( !( index in props ) ) {\n\t\t\t\t\tprops[ index ] = value[ index ];\n\t\t\t\t\tspecialEasing[ index ] = easing;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tspecialEasing[ name ] = easing;\n\t\t}\n\t}\n}\n\nfunction Animation( elem, properties, options ) {\n\tvar result,\n\t\tstopped,\n\t\tindex = 0,\n\t\tlength = Animation.prefilters.length,\n\t\tdeferred = jQuery.Deferred().always( function() {\n\n\t\t\t// Don't match elem in the :animated selector\n\t\t\tdelete tick.elem;\n\t\t} ),\n\t\ttick = function() {\n\t\t\tif ( stopped ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar currentTime = fxNow || createFxNow(),\n\t\t\t\tremaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),\n\n\t\t\t\t// Support: Android 2.3 only\n\t\t\t\t// Archaic crash bug won't allow us to use `1 - ( 0.5 || 0 )` (#12497)\n\t\t\t\ttemp = remaining / animation.duration || 0,\n\t\t\t\tpercent = 1 - temp,\n\t\t\t\tindex = 0,\n\t\t\t\tlength = animation.tweens.length;\n\n\t\t\tfor ( ; index < length; index++ ) {\n\t\t\t\tanimation.tweens[ index ].run( percent );\n\t\t\t}\n\n\t\t\tdeferred.notifyWith( elem, [ animation, percent, remaining ] );\n\n\t\t\t// If there's more to do, yield\n\t\t\tif ( percent < 1 && length ) {\n\t\t\t\treturn remaining;\n\t\t\t}\n\n\t\t\t// If this was an empty animation, synthesize a final progress notification\n\t\t\tif ( !length ) {\n\t\t\t\tdeferred.notifyWith( elem, [ animation, 1, 0 ] );\n\t\t\t}\n\n\t\t\t// Resolve the animation and report its conclusion\n\t\t\tdeferred.resolveWith( elem, [ animation ] );\n\t\t\treturn false;\n\t\t},\n\t\tanimation = deferred.promise( {\n\t\t\telem: elem,\n\t\t\tprops: jQuery.extend( {}, properties ),\n\t\t\topts: jQuery.extend( true, {\n\t\t\t\tspecialEasing: {},\n\t\t\t\teasing: jQuery.easing._default\n\t\t\t}, options ),\n\t\t\toriginalProperties: properties,\n\t\t\toriginalOptions: options,\n\t\t\tstartTime: fxNow || createFxNow(),\n\t\t\tduration: options.duration,\n\t\t\ttweens: [],\n\t\t\tcreateTween: function( prop, end ) {\n\t\t\t\tvar tween = jQuery.Tween( elem, animation.opts, prop, end,\n\t\t\t\t\t\tanimation.opts.specialEasing[ prop ] || animation.opts.easing );\n\t\t\t\tanimation.tweens.push( tween );\n\t\t\t\treturn tween;\n\t\t\t},\n\t\t\tstop: function( gotoEnd ) {\n\t\t\t\tvar index = 0,\n\n\t\t\t\t\t// If we are going to the end, we want to run all the tweens\n\t\t\t\t\t// otherwise we skip this part\n\t\t\t\t\tlength = gotoEnd ? animation.tweens.length : 0;\n\t\t\t\tif ( stopped ) {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t\tstopped = true;\n\t\t\t\tfor ( ; index < length; index++ ) {\n\t\t\t\t\tanimation.tweens[ index ].run( 1 );\n\t\t\t\t}\n\n\t\t\t\t// Resolve when we played the last frame; otherwise, reject\n\t\t\t\tif ( gotoEnd ) {\n\t\t\t\t\tdeferred.notifyWith( elem, [ animation, 1, 0 ] );\n\t\t\t\t\tdeferred.resolveWith( elem, [ animation, gotoEnd ] );\n\t\t\t\t} else {\n\t\t\t\t\tdeferred.rejectWith( elem, [ animation, gotoEnd ] );\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t}\n\t\t} ),\n\t\tprops = animation.props;\n\n\tpropFilter( props, animation.opts.specialEasing );\n\n\tfor ( ; index < length; index++ ) {\n\t\tresult = Animation.prefilters[ index ].call( animation, elem, props, animation.opts );\n\t\tif ( result ) {\n\t\t\tif ( jQuery.isFunction( result.stop ) ) {\n\t\t\t\tjQuery._queueHooks( animation.elem, animation.opts.queue ).stop =\n\t\t\t\t\tjQuery.proxy( result.stop, result );\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t}\n\n\tjQuery.map( props, createTween, animation );\n\n\tif ( jQuery.isFunction( animation.opts.start ) ) {\n\t\tanimation.opts.start.call( elem, animation );\n\t}\n\n\t// Attach callbacks from options\n\tanimation\n\t\t.progress( animation.opts.progress )\n\t\t.done( animation.opts.done, animation.opts.complete )\n\t\t.fail( animation.opts.fail )\n\t\t.always( animation.opts.always );\n\n\tjQuery.fx.timer(\n\t\tjQuery.extend( tick, {\n\t\t\telem: elem,\n\t\t\tanim: animation,\n\t\t\tqueue: animation.opts.queue\n\t\t} )\n\t);\n\n\treturn animation;\n}\n\njQuery.Animation = jQuery.extend( Animation, {\n\n\ttweeners: {\n\t\t\"*\": [ function( prop, value ) {\n\t\t\tvar tween = this.createTween( prop, value );\n\t\t\tadjustCSS( tween.elem, prop, rcssNum.exec( value ), tween );\n\t\t\treturn tween;\n\t\t} ]\n\t},\n\n\ttweener: function( props, callback ) {\n\t\tif ( jQuery.isFunction( props ) ) {\n\t\t\tcallback = props;\n\t\t\tprops = [ \"*\" ];\n\t\t} else {\n\t\t\tprops = props.match( rnothtmlwhite );\n\t\t}\n\n\t\tvar prop,\n\t\t\tindex = 0,\n\t\t\tlength = props.length;\n\n\t\tfor ( ; index < length; index++ ) {\n\t\t\tprop = props[ index ];\n\t\t\tAnimation.tweeners[ prop ] = Animation.tweeners[ prop ] || [];\n\t\t\tAnimation.tweeners[ prop ].unshift( callback );\n\t\t}\n\t},\n\n\tprefilters: [ defaultPrefilter ],\n\n\tprefilter: function( callback, prepend ) {\n\t\tif ( prepend ) {\n\t\t\tAnimation.prefilters.unshift( callback );\n\t\t} else {\n\t\t\tAnimation.prefilters.push( callback );\n\t\t}\n\t}\n} );\n\njQuery.speed = function( speed, easing, fn ) {\n\tvar opt = speed && typeof speed === \"object\" ? jQuery.extend( {}, speed ) : {\n\t\tcomplete: fn || !fn && easing ||\n\t\t\tjQuery.isFunction( speed ) && speed,\n\t\tduration: speed,\n\t\teasing: fn && easing || easing && !jQuery.isFunction( easing ) && easing\n\t};\n\n\t// Go to the end state if fx are off\n\tif ( jQuery.fx.off ) {\n\t\topt.duration = 0;\n\n\t} else {\n\t\tif ( typeof opt.duration !== \"number\" ) {\n\t\t\tif ( opt.duration in jQuery.fx.speeds ) {\n\t\t\t\topt.duration = jQuery.fx.speeds[ opt.duration ];\n\n\t\t\t} else {\n\t\t\t\topt.duration = jQuery.fx.speeds._default;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Normalize opt.queue - true/undefined/null -> \"fx\"\n\tif ( opt.queue == null || opt.queue === true ) {\n\t\topt.queue = \"fx\";\n\t}\n\n\t// Queueing\n\topt.old = opt.complete;\n\n\topt.complete = function() {\n\t\tif ( jQuery.isFunction( opt.old ) ) {\n\t\t\topt.old.call( this );\n\t\t}\n\n\t\tif ( opt.queue ) {\n\t\t\tjQuery.dequeue( this, opt.queue );\n\t\t}\n\t};\n\n\treturn opt;\n};\n\njQuery.fn.extend( {\n\tfadeTo: function( speed, to, easing, callback ) {\n\n\t\t// Show any hidden elements after setting opacity to 0\n\t\treturn this.filter( isHiddenWithinTree ).css( \"opacity\", 0 ).show()\n\n\t\t\t// Animate to the value specified\n\t\t\t.end().animate( { opacity: to }, speed, easing, callback );\n\t},\n\tanimate: function( prop, speed, easing, callback ) {\n\t\tvar empty = jQuery.isEmptyObject( prop ),\n\t\t\toptall = jQuery.speed( speed, easing, callback ),\n\t\t\tdoAnimation = function() {\n\n\t\t\t\t// Operate on a copy of prop so per-property easing won't be lost\n\t\t\t\tvar anim = Animation( this, jQuery.extend( {}, prop ), optall );\n\n\t\t\t\t// Empty animations, or finishing resolves immediately\n\t\t\t\tif ( empty || dataPriv.get( this, \"finish\" ) ) {\n\t\t\t\t\tanim.stop( true );\n\t\t\t\t}\n\t\t\t};\n\t\t\tdoAnimation.finish = doAnimation;\n\n\t\treturn empty || optall.queue === false ?\n\t\t\tthis.each( doAnimation ) :\n\t\t\tthis.queue( optall.queue, doAnimation );\n\t},\n\tstop: function( type, clearQueue, gotoEnd ) {\n\t\tvar stopQueue = function( hooks ) {\n\t\t\tvar stop = hooks.stop;\n\t\t\tdelete hooks.stop;\n\t\t\tstop( gotoEnd );\n\t\t};\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tgotoEnd = clearQueue;\n\t\t\tclearQueue = type;\n\t\t\ttype = undefined;\n\t\t}\n\t\tif ( clearQueue && type !== false ) {\n\t\t\tthis.queue( type || \"fx\", [] );\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tvar dequeue = true,\n\t\t\t\tindex = type != null && type + \"queueHooks\",\n\t\t\t\ttimers = jQuery.timers,\n\t\t\t\tdata = dataPriv.get( this );\n\n\t\t\tif ( index ) {\n\t\t\t\tif ( data[ index ] && data[ index ].stop ) {\n\t\t\t\t\tstopQueue( data[ index ] );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor ( index in data ) {\n\t\t\t\t\tif ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {\n\t\t\t\t\t\tstopQueue( data[ index ] );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor ( index = timers.length; index--; ) {\n\t\t\t\tif ( timers[ index ].elem === this &&\n\t\t\t\t\t( type == null || timers[ index ].queue === type ) ) {\n\n\t\t\t\t\ttimers[ index ].anim.stop( gotoEnd );\n\t\t\t\t\tdequeue = false;\n\t\t\t\t\ttimers.splice( index, 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Start the next in the queue if the last step wasn't forced.\n\t\t\t// Timers currently will call their complete callbacks, which\n\t\t\t// will dequeue but only if they were gotoEnd.\n\t\t\tif ( dequeue || !gotoEnd ) {\n\t\t\t\tjQuery.dequeue( this, type );\n\t\t\t}\n\t\t} );\n\t},\n\tfinish: function( type ) {\n\t\tif ( type !== false ) {\n\t\t\ttype = type || \"fx\";\n\t\t}\n\t\treturn this.each( function() {\n\t\t\tvar index,\n\t\t\t\tdata = dataPriv.get( this ),\n\t\t\t\tqueue = data[ type + \"queue\" ],\n\t\t\t\thooks = data[ type + \"queueHooks\" ],\n\t\t\t\ttimers = jQuery.timers,\n\t\t\t\tlength = queue ? queue.length : 0;\n\n\t\t\t// Enable finishing flag on private data\n\t\t\tdata.finish = true;\n\n\t\t\t// Empty the queue first\n\t\t\tjQuery.queue( this, type, [] );\n\n\t\t\tif ( hooks && hooks.stop ) {\n\t\t\t\thooks.stop.call( this, true );\n\t\t\t}\n\n\t\t\t// Look for any active animations, and finish them\n\t\t\tfor ( index = timers.length; index--; ) {\n\t\t\t\tif ( timers[ index ].elem === this && timers[ index ].queue === type ) {\n\t\t\t\t\ttimers[ index ].anim.stop( true );\n\t\t\t\t\ttimers.splice( index, 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Look for any animations in the old queue and finish them\n\t\t\tfor ( index = 0; index < length; index++ ) {\n\t\t\t\tif ( queue[ index ] && queue[ index ].finish ) {\n\t\t\t\t\tqueue[ index ].finish.call( this );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Turn off finishing flag\n\t\t\tdelete data.finish;\n\t\t} );\n\t}\n} );\n\njQuery.each( [ \"toggle\", \"show\", \"hide\" ], function( i, name ) {\n\tvar cssFn = jQuery.fn[ name ];\n\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n\t\treturn speed == null || typeof speed === \"boolean\" ?\n\t\t\tcssFn.apply( this, arguments ) :\n\t\t\tthis.animate( genFx( name, true ), speed, easing, callback );\n\t};\n} );\n\n// Generate shortcuts for custom animations\njQuery.each( {\n\tslideDown: genFx( \"show\" ),\n\tslideUp: genFx( \"hide\" ),\n\tslideToggle: genFx( \"toggle\" ),\n\tfadeIn: { opacity: \"show\" },\n\tfadeOut: { opacity: \"hide\" },\n\tfadeToggle: { opacity: \"toggle\" }\n}, function( name, props ) {\n\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n\t\treturn this.animate( props, speed, easing, callback );\n\t};\n} );\n\njQuery.timers = [];\njQuery.fx.tick = function() {\n\tvar timer,\n\t\ti = 0,\n\t\ttimers = jQuery.timers;\n\n\tfxNow = jQuery.now();\n\n\tfor ( ; i < timers.length; i++ ) {\n\t\ttimer = timers[ i ];\n\n\t\t// Run the timer and safely remove it when done (allowing for external removal)\n\t\tif ( !timer() && timers[ i ] === timer ) {\n\t\t\ttimers.splice( i--, 1 );\n\t\t}\n\t}\n\n\tif ( !timers.length ) {\n\t\tjQuery.fx.stop();\n\t}\n\tfxNow = undefined;\n};\n\njQuery.fx.timer = function( timer ) {\n\tjQuery.timers.push( timer );\n\tjQuery.fx.start();\n};\n\njQuery.fx.interval = 13;\njQuery.fx.start = function() {\n\tif ( inProgress ) {\n\t\treturn;\n\t}\n\n\tinProgress = true;\n\tschedule();\n};\n\njQuery.fx.stop = function() {\n\tinProgress = null;\n};\n\njQuery.fx.speeds = {\n\tslow: 600,\n\tfast: 200,\n\n\t// Default speed\n\t_default: 400\n};\n\n\n// Based off of the plugin by Clint Helfers, with permission.\n// https://web.archive.org/web/20100324014747/http://blindsignals.com/index.php/2009/07/jquery-delay/\njQuery.fn.delay = function( time, type ) {\n\ttime = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;\n\ttype = type || \"fx\";\n\n\treturn this.queue( type, function( next, hooks ) {\n\t\tvar timeout = window.setTimeout( next, time );\n\t\thooks.stop = function() {\n\t\t\twindow.clearTimeout( timeout );\n\t\t};\n\t} );\n};\n\n\n( function() {\n\tvar input = document.createElement( \"input\" ),\n\t\tselect = document.createElement( \"select\" ),\n\t\topt = select.appendChild( document.createElement( \"option\" ) );\n\n\tinput.type = \"checkbox\";\n\n\t// Support: Android <=4.3 only\n\t// Default value for a checkbox should be \"on\"\n\tsupport.checkOn = input.value !== \"\";\n\n\t// Support: IE <=11 only\n\t// Must access selectedIndex to make default options select\n\tsupport.optSelected = opt.selected;\n\n\t// Support: IE <=11 only\n\t// An input loses its value after becoming a radio\n\tinput = document.createElement( \"input\" );\n\tinput.value = \"t\";\n\tinput.type = \"radio\";\n\tsupport.radioValue = input.value === \"t\";\n} )();\n\n\nvar boolHook,\n\tattrHandle = jQuery.expr.attrHandle;\n\njQuery.fn.extend( {\n\tattr: function( name, value ) {\n\t\treturn access( this, jQuery.attr, name, value, arguments.length > 1 );\n\t},\n\n\tremoveAttr: function( name ) {\n\t\treturn this.each( function() {\n\t\t\tjQuery.removeAttr( this, name );\n\t\t} );\n\t}\n} );\n\njQuery.extend( {\n\tattr: function( elem, name, value ) {\n\t\tvar ret, hooks,\n\t\t\tnType = elem.nodeType;\n\n\t\t// Don't get/set attributes on text, comment and attribute nodes\n\t\tif ( nType === 3 || nType === 8 || nType === 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Fallback to prop when attributes are not supported\n\t\tif ( typeof elem.getAttribute === \"undefined\" ) {\n\t\t\treturn jQuery.prop( elem, name, value );\n\t\t}\n\n\t\t// Attribute hooks are determined by the lowercase version\n\t\t// Grab necessary hook if one is defined\n\t\tif ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {\n\t\t\thooks = jQuery.attrHooks[ name.toLowerCase() ] ||\n\t\t\t\t( jQuery.expr.match.bool.test( name ) ? boolHook : undefined );\n\t\t}\n\n\t\tif ( value !== undefined ) {\n\t\t\tif ( value === null ) {\n\t\t\t\tjQuery.removeAttr( elem, name );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( hooks && \"set\" in hooks &&\n\t\t\t\t( ret = hooks.set( elem, value, name ) ) !== undefined ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\telem.setAttribute( name, value + \"\" );\n\t\t\treturn value;\n\t\t}\n\n\t\tif ( hooks && \"get\" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {\n\t\t\treturn ret;\n\t\t}\n\n\t\tret = jQuery.find.attr( elem, name );\n\n\t\t// Non-existent attributes return null, we normalize to undefined\n\t\treturn ret == null ? undefined : ret;\n\t},\n\n\tattrHooks: {\n\t\ttype: {\n\t\t\tset: function( elem, value ) {\n\t\t\t\tif ( !support.radioValue && value === \"radio\" &&\n\t\t\t\t\tnodeName( elem, \"input\" ) ) {\n\t\t\t\t\tvar val = elem.value;\n\t\t\t\t\telem.setAttribute( \"type\", value );\n\t\t\t\t\tif ( val ) {\n\t\t\t\t\t\telem.value = val;\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tremoveAttr: function( elem, value ) {\n\t\tvar name,\n\t\t\ti = 0,\n\n\t\t\t// Attribute names can contain non-HTML whitespace characters\n\t\t\t// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n\t\t\tattrNames = value && value.match( rnothtmlwhite );\n\n\t\tif ( attrNames && elem.nodeType === 1 ) {\n\t\t\twhile ( ( name = attrNames[ i++ ] ) ) {\n\t\t\t\telem.removeAttribute( name );\n\t\t\t}\n\t\t}\n\t}\n} );\n\n// Hooks for boolean attributes\nboolHook = {\n\tset: function( elem, value, name ) {\n\t\tif ( value === false ) {\n\n\t\t\t// Remove boolean attributes when set to false\n\t\t\tjQuery.removeAttr( elem, name );\n\t\t} else {\n\t\t\telem.setAttribute( name, name );\n\t\t}\n\t\treturn name;\n\t}\n};\n\njQuery.each( jQuery.expr.match.bool.source.match( /\\w+/g ), function( i, name ) {\n\tvar getter = attrHandle[ name ] || jQuery.find.attr;\n\n\tattrHandle[ name ] = function( elem, name, isXML ) {\n\t\tvar ret, handle,\n\t\t\tlowercaseName = name.toLowerCase();\n\n\t\tif ( !isXML ) {\n\n\t\t\t// Avoid an infinite loop by temporarily removing this function from the getter\n\t\t\thandle = attrHandle[ lowercaseName ];\n\t\t\tattrHandle[ lowercaseName ] = ret;\n\t\t\tret = getter( elem, name, isXML ) != null ?\n\t\t\t\tlowercaseName :\n\t\t\t\tnull;\n\t\t\tattrHandle[ lowercaseName ] = handle;\n\t\t}\n\t\treturn ret;\n\t};\n} );\n\n\n\n\nvar rfocusable = /^(?:input|select|textarea|button)$/i,\n\trclickable = /^(?:a|area)$/i;\n\njQuery.fn.extend( {\n\tprop: function( name, value ) {\n\t\treturn access( this, jQuery.prop, name, value, arguments.length > 1 );\n\t},\n\n\tremoveProp: function( name ) {\n\t\treturn this.each( function() {\n\t\t\tdelete this[ jQuery.propFix[ name ] || name ];\n\t\t} );\n\t}\n} );\n\njQuery.extend( {\n\tprop: function( elem, name, value ) {\n\t\tvar ret, hooks,\n\t\t\tnType = elem.nodeType;\n\n\t\t// Don't get/set properties on text, comment and attribute nodes\n\t\tif ( nType === 3 || nType === 8 || nType === 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {\n\n\t\t\t// Fix name and attach hooks\n\t\t\tname = jQuery.propFix[ name ] || name;\n\t\t\thooks = jQuery.propHooks[ name ];\n\t\t}\n\n\t\tif ( value !== undefined ) {\n\t\t\tif ( hooks && \"set\" in hooks &&\n\t\t\t\t( ret = hooks.set( elem, value, name ) ) !== undefined ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\treturn ( elem[ name ] = value );\n\t\t}\n\n\t\tif ( hooks && \"get\" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {\n\t\t\treturn ret;\n\t\t}\n\n\t\treturn elem[ name ];\n\t},\n\n\tpropHooks: {\n\t\ttabIndex: {\n\t\t\tget: function( elem ) {\n\n\t\t\t\t// Support: IE <=9 - 11 only\n\t\t\t\t// elem.tabIndex doesn't always return the\n\t\t\t\t// correct value when it hasn't been explicitly set\n\t\t\t\t// https://web.archive.org/web/20141116233347/http://fluidproject.org/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/\n\t\t\t\t// Use proper attribute retrieval(#12072)\n\t\t\t\tvar tabindex = jQuery.find.attr( elem, \"tabindex\" );\n\n\t\t\t\tif ( tabindex ) {\n\t\t\t\t\treturn parseInt( tabindex, 10 );\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\trfocusable.test( elem.nodeName ) ||\n\t\t\t\t\trclickable.test( elem.nodeName ) &&\n\t\t\t\t\telem.href\n\t\t\t\t) {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}\n\t},\n\n\tpropFix: {\n\t\t\"for\": \"htmlFor\",\n\t\t\"class\": \"className\"\n\t}\n} );\n\n// Support: IE <=11 only\n// Accessing the selectedIndex property\n// forces the browser to respect setting selected\n// on the option\n// The getter ensures a default option is selected\n// when in an optgroup\n// eslint rule \"no-unused-expressions\" is disabled for this code\n// since it considers such accessions noop\nif ( !support.optSelected ) {\n\tjQuery.propHooks.selected = {\n\t\tget: function( elem ) {\n\n\t\t\t/* eslint no-unused-expressions: \"off\" */\n\n\t\t\tvar parent = elem.parentNode;\n\t\t\tif ( parent && parent.parentNode ) {\n\t\t\t\tparent.parentNode.selectedIndex;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tset: function( elem ) {\n\n\t\t\t/* eslint no-unused-expressions: \"off\" */\n\n\t\t\tvar parent = elem.parentNode;\n\t\t\tif ( parent ) {\n\t\t\t\tparent.selectedIndex;\n\n\t\t\t\tif ( parent.parentNode ) {\n\t\t\t\t\tparent.parentNode.selectedIndex;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\njQuery.each( [\n\t\"tabIndex\",\n\t\"readOnly\",\n\t\"maxLength\",\n\t\"cellSpacing\",\n\t\"cellPadding\",\n\t\"rowSpan\",\n\t\"colSpan\",\n\t\"useMap\",\n\t\"frameBorder\",\n\t\"contentEditable\"\n], function() {\n\tjQuery.propFix[ this.toLowerCase() ] = this;\n} );\n\n\n\n\n\t// Strip and collapse whitespace according to HTML spec\n\t// https://html.spec.whatwg.org/multipage/infrastructure.html#strip-and-collapse-whitespace\n\tfunction stripAndCollapse( value ) {\n\t\tvar tokens = value.match( rnothtmlwhite ) || [];\n\t\treturn tokens.join( \" \" );\n\t}\n\n\nfunction getClass( elem ) {\n\treturn elem.getAttribute && elem.getAttribute( \"class\" ) || \"\";\n}\n\njQuery.fn.extend( {\n\taddClass: function( value ) {\n\t\tvar classes, elem, cur, curValue, clazz, j, finalValue,\n\t\t\ti = 0;\n\n\t\tif ( jQuery.isFunction( value ) ) {\n\t\t\treturn this.each( function( j ) {\n\t\t\t\tjQuery( this ).addClass( value.call( this, j, getClass( this ) ) );\n\t\t\t} );\n\t\t}\n\n\t\tif ( typeof value === \"string\" && value ) {\n\t\t\tclasses = value.match( rnothtmlwhite ) || [];\n\n\t\t\twhile ( ( elem = this[ i++ ] ) ) {\n\t\t\t\tcurValue = getClass( elem );\n\t\t\t\tcur = elem.nodeType === 1 && ( \" \" + stripAndCollapse( curValue ) + \" \" );\n\n\t\t\t\tif ( cur ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\twhile ( ( clazz = classes[ j++ ] ) ) {\n\t\t\t\t\t\tif ( cur.indexOf( \" \" + clazz + \" \" ) < 0 ) {\n\t\t\t\t\t\t\tcur += clazz + \" \";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Only assign if different to avoid unneeded rendering.\n\t\t\t\t\tfinalValue = stripAndCollapse( cur );\n\t\t\t\t\tif ( curValue !== finalValue ) {\n\t\t\t\t\t\telem.setAttribute( \"class\", finalValue );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tremoveClass: function( value ) {\n\t\tvar classes, elem, cur, curValue, clazz, j, finalValue,\n\t\t\ti = 0;\n\n\t\tif ( jQuery.isFunction( value ) ) {\n\t\t\treturn this.each( function( j ) {\n\t\t\t\tjQuery( this ).removeClass( value.call( this, j, getClass( this ) ) );\n\t\t\t} );\n\t\t}\n\n\t\tif ( !arguments.length ) {\n\t\t\treturn this.attr( \"class\", \"\" );\n\t\t}\n\n\t\tif ( typeof value === \"string\" && value ) {\n\t\t\tclasses = value.match( rnothtmlwhite ) || [];\n\n\t\t\twhile ( ( elem = this[ i++ ] ) ) {\n\t\t\t\tcurValue = getClass( elem );\n\n\t\t\t\t// This expression is here for better compressibility (see addClass)\n\t\t\t\tcur = elem.nodeType === 1 && ( \" \" + stripAndCollapse( curValue ) + \" \" );\n\n\t\t\t\tif ( cur ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\twhile ( ( clazz = classes[ j++ ] ) ) {\n\n\t\t\t\t\t\t// Remove *all* instances\n\t\t\t\t\t\twhile ( cur.indexOf( \" \" + clazz + \" \" ) > -1 ) {\n\t\t\t\t\t\t\tcur = cur.replace( \" \" + clazz + \" \", \" \" );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Only assign if different to avoid unneeded rendering.\n\t\t\t\t\tfinalValue = stripAndCollapse( cur );\n\t\t\t\t\tif ( curValue !== finalValue ) {\n\t\t\t\t\t\telem.setAttribute( \"class\", finalValue );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\ttoggleClass: function( value, stateVal ) {\n\t\tvar type = typeof value;\n\n\t\tif ( typeof stateVal === \"boolean\" && type === \"string\" ) {\n\t\t\treturn stateVal ? this.addClass( value ) : this.removeClass( value );\n\t\t}\n\n\t\tif ( jQuery.isFunction( value ) ) {\n\t\t\treturn this.each( function( i ) {\n\t\t\t\tjQuery( this ).toggleClass(\n\t\t\t\t\tvalue.call( this, i, getClass( this ), stateVal ),\n\t\t\t\t\tstateVal\n\t\t\t\t);\n\t\t\t} );\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tvar className, i, self, classNames;\n\n\t\t\tif ( type === \"string\" ) {\n\n\t\t\t\t// Toggle individual class names\n\t\t\t\ti = 0;\n\t\t\t\tself = jQuery( this );\n\t\t\t\tclassNames = value.match( rnothtmlwhite ) || [];\n\n\t\t\t\twhile ( ( className = classNames[ i++ ] ) ) {\n\n\t\t\t\t\t// Check each className given, space separated list\n\t\t\t\t\tif ( self.hasClass( className ) ) {\n\t\t\t\t\t\tself.removeClass( className );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.addClass( className );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t// Toggle whole class name\n\t\t\t} else if ( value === undefined || type === \"boolean\" ) {\n\t\t\t\tclassName = getClass( this );\n\t\t\t\tif ( className ) {\n\n\t\t\t\t\t// Store className if set\n\t\t\t\t\tdataPriv.set( this, \"__className__\", className );\n\t\t\t\t}\n\n\t\t\t\t// If the element has a class name or if we're passed `false`,\n\t\t\t\t// then remove the whole classname (if there was one, the above saved it).\n\t\t\t\t// Otherwise bring back whatever was previously saved (if anything),\n\t\t\t\t// falling back to the empty string if nothing was stored.\n\t\t\t\tif ( this.setAttribute ) {\n\t\t\t\t\tthis.setAttribute( \"class\",\n\t\t\t\t\t\tclassName || value === false ?\n\t\t\t\t\t\t\"\" :\n\t\t\t\t\t\tdataPriv.get( this, \"__className__\" ) || \"\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t},\n\n\thasClass: function( selector ) {\n\t\tvar className, elem,\n\t\t\ti = 0;\n\n\t\tclassName = \" \" + selector + \" \";\n\t\twhile ( ( elem = this[ i++ ] ) ) {\n\t\t\tif ( elem.nodeType === 1 &&\n\t\t\t\t( \" \" + stripAndCollapse( getClass( elem ) ) + \" \" ).indexOf( className ) > -1 ) {\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n} );\n\n\n\n\nvar rreturn = /\\r/g;\n\njQuery.fn.extend( {\n\tval: function( value ) {\n\t\tvar hooks, ret, isFunction,\n\t\t\telem = this[ 0 ];\n\n\t\tif ( !arguments.length ) {\n\t\t\tif ( elem ) {\n\t\t\t\thooks = jQuery.valHooks[ elem.type ] ||\n\t\t\t\t\tjQuery.valHooks[ elem.nodeName.toLowerCase() ];\n\n\t\t\t\tif ( hooks &&\n\t\t\t\t\t\"get\" in hooks &&\n\t\t\t\t\t( ret = hooks.get( elem, \"value\" ) ) !== undefined\n\t\t\t\t) {\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\n\t\t\t\tret = elem.value;\n\n\t\t\t\t// Handle most common string cases\n\t\t\t\tif ( typeof ret === \"string\" ) {\n\t\t\t\t\treturn ret.replace( rreturn, \"\" );\n\t\t\t\t}\n\n\t\t\t\t// Handle cases where value is null/undef or number\n\t\t\t\treturn ret == null ? \"\" : ret;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tisFunction = jQuery.isFunction( value );\n\n\t\treturn this.each( function( i ) {\n\t\t\tvar val;\n\n\t\t\tif ( this.nodeType !== 1 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( isFunction ) {\n\t\t\t\tval = value.call( this, i, jQuery( this ).val() );\n\t\t\t} else {\n\t\t\t\tval = value;\n\t\t\t}\n\n\t\t\t// Treat null/undefined as \"\"; convert numbers to string\n\t\t\tif ( val == null ) {\n\t\t\t\tval = \"\";\n\n\t\t\t} else if ( typeof val === \"number\" ) {\n\t\t\t\tval += \"\";\n\n\t\t\t} else if ( Array.isArray( val ) ) {\n\t\t\t\tval = jQuery.map( val, function( value ) {\n\t\t\t\t\treturn value == null ? \"\" : value + \"\";\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\thooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];\n\n\t\t\t// If set returns undefined, fall back to normal setting\n\t\t\tif ( !hooks || !( \"set\" in hooks ) || hooks.set( this, val, \"value\" ) === undefined ) {\n\t\t\t\tthis.value = val;\n\t\t\t}\n\t\t} );\n\t}\n} );\n\njQuery.extend( {\n\tvalHooks: {\n\t\toption: {\n\t\t\tget: function( elem ) {\n\n\t\t\t\tvar val = jQuery.find.attr( elem, \"value\" );\n\t\t\t\treturn val != null ?\n\t\t\t\t\tval :\n\n\t\t\t\t\t// Support: IE <=10 - 11 only\n\t\t\t\t\t// option.text throws exceptions (#14686, #14858)\n\t\t\t\t\t// Strip and collapse whitespace\n\t\t\t\t\t// https://html.spec.whatwg.org/#strip-and-collapse-whitespace\n\t\t\t\t\tstripAndCollapse( jQuery.text( elem ) );\n\t\t\t}\n\t\t},\n\t\tselect: {\n\t\t\tget: function( elem ) {\n\t\t\t\tvar value, option, i,\n\t\t\t\t\toptions = elem.options,\n\t\t\t\t\tindex = elem.selectedIndex,\n\t\t\t\t\tone = elem.type === \"select-one\",\n\t\t\t\t\tvalues = one ? null : [],\n\t\t\t\t\tmax = one ? index + 1 : options.length;\n\n\t\t\t\tif ( index < 0 ) {\n\t\t\t\t\ti = max;\n\n\t\t\t\t} else {\n\t\t\t\t\ti = one ? index : 0;\n\t\t\t\t}\n\n\t\t\t\t// Loop through all the selected options\n\t\t\t\tfor ( ; i < max; i++ ) {\n\t\t\t\t\toption = options[ i ];\n\n\t\t\t\t\t// Support: IE <=9 only\n\t\t\t\t\t// IE8-9 doesn't update selected after form reset (#2551)\n\t\t\t\t\tif ( ( option.selected || i === index ) &&\n\n\t\t\t\t\t\t\t// Don't return options that are disabled or in a disabled optgroup\n\t\t\t\t\t\t\t!option.disabled &&\n\t\t\t\t\t\t\t( !option.parentNode.disabled ||\n\t\t\t\t\t\t\t\t!nodeName( option.parentNode, \"optgroup\" ) ) ) {\n\n\t\t\t\t\t\t// Get the specific value for the option\n\t\t\t\t\t\tvalue = jQuery( option ).val();\n\n\t\t\t\t\t\t// We don't need an array for one selects\n\t\t\t\t\t\tif ( one ) {\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Multi-Selects return an array\n\t\t\t\t\t\tvalues.push( value );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn values;\n\t\t\t},\n\n\t\t\tset: function( elem, value ) {\n\t\t\t\tvar optionSet, option,\n\t\t\t\t\toptions = elem.options,\n\t\t\t\t\tvalues = jQuery.makeArray( value ),\n\t\t\t\t\ti = options.length;\n\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\toption = options[ i ];\n\n\t\t\t\t\t/* eslint-disable no-cond-assign */\n\n\t\t\t\t\tif ( option.selected =\n\t\t\t\t\t\tjQuery.inArray( jQuery.valHooks.option.get( option ), values ) > -1\n\t\t\t\t\t) {\n\t\t\t\t\t\toptionSet = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t/* eslint-enable no-cond-assign */\n\t\t\t\t}\n\n\t\t\t\t// Force browsers to behave consistently when non-matching value is set\n\t\t\t\tif ( !optionSet ) {\n\t\t\t\t\telem.selectedIndex = -1;\n\t\t\t\t}\n\t\t\t\treturn values;\n\t\t\t}\n\t\t}\n\t}\n} );\n\n// Radios and checkboxes getter/setter\njQuery.each( [ \"radio\", \"checkbox\" ], function() {\n\tjQuery.valHooks[ this ] = {\n\t\tset: function( elem, value ) {\n\t\t\tif ( Array.isArray( value ) ) {\n\t\t\t\treturn ( elem.checked = jQuery.inArray( jQuery( elem ).val(), value ) > -1 );\n\t\t\t}\n\t\t}\n\t};\n\tif ( !support.checkOn ) {\n\t\tjQuery.valHooks[ this ].get = function( elem ) {\n\t\t\treturn elem.getAttribute( \"value\" ) === null ? \"on\" : elem.value;\n\t\t};\n\t}\n} );\n\n\n\n\n// Return jQuery for attributes-only inclusion\n\n\nvar rfocusMorph = /^(?:focusinfocus|focusoutblur)$/;\n\njQuery.extend( jQuery.event, {\n\n\ttrigger: function( event, data, elem, onlyHandlers ) {\n\n\t\tvar i, cur, tmp, bubbleType, ontype, handle, special,\n\t\t\teventPath = [ elem || document ],\n\t\t\ttype = hasOwn.call( event, \"type\" ) ? event.type : event,\n\t\t\tnamespaces = hasOwn.call( event, \"namespace\" ) ? event.namespace.split( \".\" ) : [];\n\n\t\tcur = tmp = elem = elem || document;\n\n\t\t// Don't do events on text and comment nodes\n\t\tif ( elem.nodeType === 3 || elem.nodeType === 8 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// focus/blur morphs to focusin/out; ensure we're not firing them right now\n\t\tif ( rfocusMorph.test( type + jQuery.event.triggered ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( type.indexOf( \".\" ) > -1 ) {\n\n\t\t\t// Namespaced trigger; create a regexp to match event type in handle()\n\t\t\tnamespaces = type.split( \".\" );\n\t\t\ttype = namespaces.shift();\n\t\t\tnamespaces.sort();\n\t\t}\n\t\tontype = type.indexOf( \":\" ) < 0 && \"on\" + type;\n\n\t\t// Caller can pass in a jQuery.Event object, Object, or just an event type string\n\t\tevent = event[ jQuery.expando ] ?\n\t\t\tevent :\n\t\t\tnew jQuery.Event( type, typeof event === \"object\" && event );\n\n\t\t// Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)\n\t\tevent.isTrigger = onlyHandlers ? 2 : 3;\n\t\tevent.namespace = namespaces.join( \".\" );\n\t\tevent.rnamespace = event.namespace ?\n\t\t\tnew RegExp( \"(^|\\\\.)\" + namespaces.join( \"\\\\.(?:.*\\\\.|)\" ) + \"(\\\\.|$)\" ) :\n\t\t\tnull;\n\n\t\t// Clean up the event in case it is being reused\n\t\tevent.result = undefined;\n\t\tif ( !event.target ) {\n\t\t\tevent.target = elem;\n\t\t}\n\n\t\t// Clone any incoming data and prepend the event, creating the handler arg list\n\t\tdata = data == null ?\n\t\t\t[ event ] :\n\t\t\tjQuery.makeArray( data, [ event ] );\n\n\t\t// Allow special events to draw outside the lines\n\t\tspecial = jQuery.event.special[ type ] || {};\n\t\tif ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Determine event propagation path in advance, per W3C events spec (#9951)\n\t\t// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)\n\t\tif ( !onlyHandlers && !special.noBubble && !jQuery.isWindow( elem ) ) {\n\n\t\t\tbubbleType = special.delegateType || type;\n\t\t\tif ( !rfocusMorph.test( bubbleType + type ) ) {\n\t\t\t\tcur = cur.parentNode;\n\t\t\t}\n\t\t\tfor ( ; cur; cur = cur.parentNode ) {\n\t\t\t\teventPath.push( cur );\n\t\t\t\ttmp = cur;\n\t\t\t}\n\n\t\t\t// Only add window if we got to document (e.g., not plain obj or detached DOM)\n\t\t\tif ( tmp === ( elem.ownerDocument || document ) ) {\n\t\t\t\teventPath.push( tmp.defaultView || tmp.parentWindow || window );\n\t\t\t}\n\t\t}\n\n\t\t// Fire handlers on the event path\n\t\ti = 0;\n\t\twhile ( ( cur = eventPath[ i++ ] ) && !event.isPropagationStopped() ) {\n\n\t\t\tevent.type = i > 1 ?\n\t\t\t\tbubbleType :\n\t\t\t\tspecial.bindType || type;\n\n\t\t\t// jQuery handler\n\t\t\thandle = ( dataPriv.get( cur, \"events\" ) || {} )[ event.type ] &&\n\t\t\t\tdataPriv.get( cur, \"handle\" );\n\t\t\tif ( handle ) {\n\t\t\t\thandle.apply( cur, data );\n\t\t\t}\n\n\t\t\t// Native handler\n\t\t\thandle = ontype && cur[ ontype ];\n\t\t\tif ( handle && handle.apply && acceptData( cur ) ) {\n\t\t\t\tevent.result = handle.apply( cur, data );\n\t\t\t\tif ( event.result === false ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tevent.type = type;\n\n\t\t// If nobody prevented the default action, do it now\n\t\tif ( !onlyHandlers && !event.isDefaultPrevented() ) {\n\n\t\t\tif ( ( !special._default ||\n\t\t\t\tspecial._default.apply( eventPath.pop(), data ) === false ) &&\n\t\t\t\tacceptData( elem ) ) {\n\n\t\t\t\t// Call a native DOM method on the target with the same name as the event.\n\t\t\t\t// Don't do default actions on window, that's where global variables be (#6170)\n\t\t\t\tif ( ontype && jQuery.isFunction( elem[ type ] ) && !jQuery.isWindow( elem ) ) {\n\n\t\t\t\t\t// Don't re-trigger an onFOO event when we call its FOO() method\n\t\t\t\t\ttmp = elem[ ontype ];\n\n\t\t\t\t\tif ( tmp ) {\n\t\t\t\t\t\telem[ ontype ] = null;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Prevent re-triggering of the same event, since we already bubbled it above\n\t\t\t\t\tjQuery.event.triggered = type;\n\t\t\t\t\telem[ type ]();\n\t\t\t\t\tjQuery.event.triggered = undefined;\n\n\t\t\t\t\tif ( tmp ) {\n\t\t\t\t\t\telem[ ontype ] = tmp;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn event.result;\n\t},\n\n\t// Piggyback on a donor event to simulate a different one\n\t// Used only for `focus(in | out)` events\n\tsimulate: function( type, elem, event ) {\n\t\tvar e = jQuery.extend(\n\t\t\tnew jQuery.Event(),\n\t\t\tevent,\n\t\t\t{\n\t\t\t\ttype: type,\n\t\t\t\tisSimulated: true\n\t\t\t}\n\t\t);\n\n\t\tjQuery.event.trigger( e, null, elem );\n\t}\n\n} );\n\njQuery.fn.extend( {\n\n\ttrigger: function( type, data ) {\n\t\treturn this.each( function() {\n\t\t\tjQuery.event.trigger( type, data, this );\n\t\t} );\n\t},\n\ttriggerHandler: function( type, data ) {\n\t\tvar elem = this[ 0 ];\n\t\tif ( elem ) {\n\t\t\treturn jQuery.event.trigger( type, data, elem, true );\n\t\t}\n\t}\n} );\n\n\njQuery.each( ( \"blur focus focusin focusout resize scroll click dblclick \" +\n\t\"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave \" +\n\t\"change select submit keydown keypress keyup contextmenu\" ).split( \" \" ),\n\tfunction( i, name ) {\n\n\t// Handle event binding\n\tjQuery.fn[ name ] = function( data, fn ) {\n\t\treturn arguments.length > 0 ?\n\t\t\tthis.on( name, null, data, fn ) :\n\t\t\tthis.trigger( name );\n\t};\n} );\n\njQuery.fn.extend( {\n\thover: function( fnOver, fnOut ) {\n\t\treturn this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );\n\t}\n} );\n\n\n\n\nsupport.focusin = \"onfocusin\" in window;\n\n\n// Support: Firefox <=44\n// Firefox doesn't have focus(in | out) events\n// Related ticket - https://bugzilla.mozilla.org/show_bug.cgi?id=687787\n//\n// Support: Chrome <=48 - 49, Safari <=9.0 - 9.1\n// focus(in | out) events fire after focus & blur events,\n// which is spec violation - http://www.w3.org/TR/DOM-Level-3-Events/#events-focusevent-event-order\n// Related ticket - https://bugs.chromium.org/p/chromium/issues/detail?id=449857\nif ( !support.focusin ) {\n\tjQuery.each( { focus: \"focusin\", blur: \"focusout\" }, function( orig, fix ) {\n\n\t\t// Attach a single capturing handler on the document while someone wants focusin/focusout\n\t\tvar handler = function( event ) {\n\t\t\tjQuery.event.simulate( fix, event.target, jQuery.event.fix( event ) );\n\t\t};\n\n\t\tjQuery.event.special[ fix ] = {\n\t\t\tsetup: function() {\n\t\t\t\tvar doc = this.ownerDocument || this,\n\t\t\t\t\tattaches = dataPriv.access( doc, fix );\n\n\t\t\t\tif ( !attaches ) {\n\t\t\t\t\tdoc.addEventListener( orig, handler, true );\n\t\t\t\t}\n\t\t\t\tdataPriv.access( doc, fix, ( attaches || 0 ) + 1 );\n\t\t\t},\n\t\t\tteardown: function() {\n\t\t\t\tvar doc = this.ownerDocument || this,\n\t\t\t\t\tattaches = dataPriv.access( doc, fix ) - 1;\n\n\t\t\t\tif ( !attaches ) {\n\t\t\t\t\tdoc.removeEventListener( orig, handler, true );\n\t\t\t\t\tdataPriv.remove( doc, fix );\n\n\t\t\t\t} else {\n\t\t\t\t\tdataPriv.access( doc, fix, attaches );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t} );\n}\nvar location = window.location;\n\nvar nonce = jQuery.now();\n\nvar rquery = ( /\\?/ );\n\n\n\n// Cross-browser xml parsing\njQuery.parseXML = function( data ) {\n\tvar xml;\n\tif ( !data || typeof data !== \"string\" ) {\n\t\treturn null;\n\t}\n\n\t// Support: IE 9 - 11 only\n\t// IE throws on parseFromString with invalid input.\n\ttry {\n\t\txml = ( new window.DOMParser() ).parseFromString( data, \"text/xml\" );\n\t} catch ( e ) {\n\t\txml = undefined;\n\t}\n\n\tif ( !xml || xml.getElementsByTagName( \"parsererror\" ).length ) {\n\t\tjQuery.error( \"Invalid XML: \" + data );\n\t}\n\treturn xml;\n};\n\n\nvar\n\trbracket = /\\[\\]$/,\n\trCRLF = /\\r?\\n/g,\n\trsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,\n\trsubmittable = /^(?:input|select|textarea|keygen)/i;\n\nfunction buildParams( prefix, obj, traditional, add ) {\n\tvar name;\n\n\tif ( Array.isArray( obj ) ) {\n\n\t\t// Serialize array item.\n\t\tjQuery.each( obj, function( i, v ) {\n\t\t\tif ( traditional || rbracket.test( prefix ) ) {\n\n\t\t\t\t// Treat each array item as a scalar.\n\t\t\t\tadd( prefix, v );\n\n\t\t\t} else {\n\n\t\t\t\t// Item is non-scalar (array or object), encode its numeric index.\n\t\t\t\tbuildParams(\n\t\t\t\t\tprefix + \"[\" + ( typeof v === \"object\" && v != null ? i : \"\" ) + \"]\",\n\t\t\t\t\tv,\n\t\t\t\t\ttraditional,\n\t\t\t\t\tadd\n\t\t\t\t);\n\t\t\t}\n\t\t} );\n\n\t} else if ( !traditional && jQuery.type( obj ) === \"object\" ) {\n\n\t\t// Serialize object item.\n\t\tfor ( name in obj ) {\n\t\t\tbuildParams( prefix + \"[\" + name + \"]\", obj[ name ], traditional, add );\n\t\t}\n\n\t} else {\n\n\t\t// Serialize scalar item.\n\t\tadd( prefix, obj );\n\t}\n}\n\n// Serialize an array of form elements or a set of\n// key/values into a query string\njQuery.param = function( a, traditional ) {\n\tvar prefix,\n\t\ts = [],\n\t\tadd = function( key, valueOrFunction ) {\n\n\t\t\t// If value is a function, invoke it and use its return value\n\t\t\tvar value = jQuery.isFunction( valueOrFunction ) ?\n\t\t\t\tvalueOrFunction() :\n\t\t\t\tvalueOrFunction;\n\n\t\t\ts[ s.length ] = encodeURIComponent( key ) + \"=\" +\n\t\t\t\tencodeURIComponent( value == null ? \"\" : value );\n\t\t};\n\n\t// If an array was passed in, assume that it is an array of form elements.\n\tif ( Array.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {\n\n\t\t// Serialize the form elements\n\t\tjQuery.each( a, function() {\n\t\t\tadd( this.name, this.value );\n\t\t} );\n\n\t} else {\n\n\t\t// If traditional, encode the \"old\" way (the way 1.3.2 or older\n\t\t// did it), otherwise encode params recursively.\n\t\tfor ( prefix in a ) {\n\t\t\tbuildParams( prefix, a[ prefix ], traditional, add );\n\t\t}\n\t}\n\n\t// Return the resulting serialization\n\treturn s.join( \"&\" );\n};\n\njQuery.fn.extend( {\n\tserialize: function() {\n\t\treturn jQuery.param( this.serializeArray() );\n\t},\n\tserializeArray: function() {\n\t\treturn this.map( function() {\n\n\t\t\t// Can add propHook for \"elements\" to filter or add form elements\n\t\t\tvar elements = jQuery.prop( this, \"elements\" );\n\t\t\treturn elements ? jQuery.makeArray( elements ) : this;\n\t\t} )\n\t\t.filter( function() {\n\t\t\tvar type = this.type;\n\n\t\t\t// Use .is( \":disabled\" ) so that fieldset[disabled] works\n\t\t\treturn this.name && !jQuery( this ).is( \":disabled\" ) &&\n\t\t\t\trsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&\n\t\t\t\t( this.checked || !rcheckableType.test( type ) );\n\t\t} )\n\t\t.map( function( i, elem ) {\n\t\t\tvar val = jQuery( this ).val();\n\n\t\t\tif ( val == null ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif ( Array.isArray( val ) ) {\n\t\t\t\treturn jQuery.map( val, function( val ) {\n\t\t\t\t\treturn { name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\treturn { name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n\t\t} ).get();\n\t}\n} );\n\n\nvar\n\tr20 = /%20/g,\n\trhash = /#.*$/,\n\trantiCache = /([?&])_=[^&]*/,\n\trheaders = /^(.*?):[ \\t]*([^\\r\\n]*)$/mg,\n\n\t// #7653, #8125, #8152: local protocol detection\n\trlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,\n\trnoContent = /^(?:GET|HEAD)$/,\n\trprotocol = /^\\/\\//,\n\n\t/* Prefilters\n\t * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)\n\t * 2) These are called:\n\t *    - BEFORE asking for a transport\n\t *    - AFTER param serialization (s.data is a string if s.processData is true)\n\t * 3) key is the dataType\n\t * 4) the catchall symbol \"*\" can be used\n\t * 5) execution will start with transport dataType and THEN continue down to \"*\" if needed\n\t */\n\tprefilters = {},\n\n\t/* Transports bindings\n\t * 1) key is the dataType\n\t * 2) the catchall symbol \"*\" can be used\n\t * 3) selection will start with transport dataType and THEN go to \"*\" if needed\n\t */\n\ttransports = {},\n\n\t// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression\n\tallTypes = \"*/\".concat( \"*\" ),\n\n\t// Anchor tag for parsing the document origin\n\toriginAnchor = document.createElement( \"a\" );\n\toriginAnchor.href = location.href;\n\n// Base \"constructor\" for jQuery.ajaxPrefilter and jQuery.ajaxTransport\nfunction addToPrefiltersOrTransports( structure ) {\n\n\t// dataTypeExpression is optional and defaults to \"*\"\n\treturn function( dataTypeExpression, func ) {\n\n\t\tif ( typeof dataTypeExpression !== \"string\" ) {\n\t\t\tfunc = dataTypeExpression;\n\t\t\tdataTypeExpression = \"*\";\n\t\t}\n\n\t\tvar dataType,\n\t\t\ti = 0,\n\t\t\tdataTypes = dataTypeExpression.toLowerCase().match( rnothtmlwhite ) || [];\n\n\t\tif ( jQuery.isFunction( func ) ) {\n\n\t\t\t// For each dataType in the dataTypeExpression\n\t\t\twhile ( ( dataType = dataTypes[ i++ ] ) ) {\n\n\t\t\t\t// Prepend if requested\n\t\t\t\tif ( dataType[ 0 ] === \"+\" ) {\n\t\t\t\t\tdataType = dataType.slice( 1 ) || \"*\";\n\t\t\t\t\t( structure[ dataType ] = structure[ dataType ] || [] ).unshift( func );\n\n\t\t\t\t// Otherwise append\n\t\t\t\t} else {\n\t\t\t\t\t( structure[ dataType ] = structure[ dataType ] || [] ).push( func );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\n// Base inspection function for prefilters and transports\nfunction inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {\n\n\tvar inspected = {},\n\t\tseekingTransport = ( structure === transports );\n\n\tfunction inspect( dataType ) {\n\t\tvar selected;\n\t\tinspected[ dataType ] = true;\n\t\tjQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {\n\t\t\tvar dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );\n\t\t\tif ( typeof dataTypeOrTransport === \"string\" &&\n\t\t\t\t!seekingTransport && !inspected[ dataTypeOrTransport ] ) {\n\n\t\t\t\toptions.dataTypes.unshift( dataTypeOrTransport );\n\t\t\t\tinspect( dataTypeOrTransport );\n\t\t\t\treturn false;\n\t\t\t} else if ( seekingTransport ) {\n\t\t\t\treturn !( selected = dataTypeOrTransport );\n\t\t\t}\n\t\t} );\n\t\treturn selected;\n\t}\n\n\treturn inspect( options.dataTypes[ 0 ] ) || !inspected[ \"*\" ] && inspect( \"*\" );\n}\n\n// A special extend for ajax options\n// that takes \"flat\" options (not to be deep extended)\n// Fixes #9887\nfunction ajaxExtend( target, src ) {\n\tvar key, deep,\n\t\tflatOptions = jQuery.ajaxSettings.flatOptions || {};\n\n\tfor ( key in src ) {\n\t\tif ( src[ key ] !== undefined ) {\n\t\t\t( flatOptions[ key ] ? target : ( deep || ( deep = {} ) ) )[ key ] = src[ key ];\n\t\t}\n\t}\n\tif ( deep ) {\n\t\tjQuery.extend( true, target, deep );\n\t}\n\n\treturn target;\n}\n\n/* Handles responses to an ajax request:\n * - finds the right dataType (mediates between content-type and expected dataType)\n * - returns the corresponding response\n */\nfunction ajaxHandleResponses( s, jqXHR, responses ) {\n\n\tvar ct, type, finalDataType, firstDataType,\n\t\tcontents = s.contents,\n\t\tdataTypes = s.dataTypes;\n\n\t// Remove auto dataType and get content-type in the process\n\twhile ( dataTypes[ 0 ] === \"*\" ) {\n\t\tdataTypes.shift();\n\t\tif ( ct === undefined ) {\n\t\t\tct = s.mimeType || jqXHR.getResponseHeader( \"Content-Type\" );\n\t\t}\n\t}\n\n\t// Check if we're dealing with a known content-type\n\tif ( ct ) {\n\t\tfor ( type in contents ) {\n\t\t\tif ( contents[ type ] && contents[ type ].test( ct ) ) {\n\t\t\t\tdataTypes.unshift( type );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Check to see if we have a response for the expected dataType\n\tif ( dataTypes[ 0 ] in responses ) {\n\t\tfinalDataType = dataTypes[ 0 ];\n\t} else {\n\n\t\t// Try convertible dataTypes\n\t\tfor ( type in responses ) {\n\t\t\tif ( !dataTypes[ 0 ] || s.converters[ type + \" \" + dataTypes[ 0 ] ] ) {\n\t\t\t\tfinalDataType = type;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( !firstDataType ) {\n\t\t\t\tfirstDataType = type;\n\t\t\t}\n\t\t}\n\n\t\t// Or just use first one\n\t\tfinalDataType = finalDataType || firstDataType;\n\t}\n\n\t// If we found a dataType\n\t// We add the dataType to the list if needed\n\t// and return the corresponding response\n\tif ( finalDataType ) {\n\t\tif ( finalDataType !== dataTypes[ 0 ] ) {\n\t\t\tdataTypes.unshift( finalDataType );\n\t\t}\n\t\treturn responses[ finalDataType ];\n\t}\n}\n\n/* Chain conversions given the request and the original response\n * Also sets the responseXXX fields on the jqXHR instance\n */\nfunction ajaxConvert( s, response, jqXHR, isSuccess ) {\n\tvar conv2, current, conv, tmp, prev,\n\t\tconverters = {},\n\n\t\t// Work with a copy of dataTypes in case we need to modify it for conversion\n\t\tdataTypes = s.dataTypes.slice();\n\n\t// Create converters map with lowercased keys\n\tif ( dataTypes[ 1 ] ) {\n\t\tfor ( conv in s.converters ) {\n\t\t\tconverters[ conv.toLowerCase() ] = s.converters[ conv ];\n\t\t}\n\t}\n\n\tcurrent = dataTypes.shift();\n\n\t// Convert to each sequential dataType\n\twhile ( current ) {\n\n\t\tif ( s.responseFields[ current ] ) {\n\t\t\tjqXHR[ s.responseFields[ current ] ] = response;\n\t\t}\n\n\t\t// Apply the dataFilter if provided\n\t\tif ( !prev && isSuccess && s.dataFilter ) {\n\t\t\tresponse = s.dataFilter( response, s.dataType );\n\t\t}\n\n\t\tprev = current;\n\t\tcurrent = dataTypes.shift();\n\n\t\tif ( current ) {\n\n\t\t\t// There's only work to do if current dataType is non-auto\n\t\t\tif ( current === \"*\" ) {\n\n\t\t\t\tcurrent = prev;\n\n\t\t\t// Convert response if prev dataType is non-auto and differs from current\n\t\t\t} else if ( prev !== \"*\" && prev !== current ) {\n\n\t\t\t\t// Seek a direct converter\n\t\t\t\tconv = converters[ prev + \" \" + current ] || converters[ \"* \" + current ];\n\n\t\t\t\t// If none found, seek a pair\n\t\t\t\tif ( !conv ) {\n\t\t\t\t\tfor ( conv2 in converters ) {\n\n\t\t\t\t\t\t// If conv2 outputs current\n\t\t\t\t\t\ttmp = conv2.split( \" \" );\n\t\t\t\t\t\tif ( tmp[ 1 ] === current ) {\n\n\t\t\t\t\t\t\t// If prev can be converted to accepted input\n\t\t\t\t\t\t\tconv = converters[ prev + \" \" + tmp[ 0 ] ] ||\n\t\t\t\t\t\t\t\tconverters[ \"* \" + tmp[ 0 ] ];\n\t\t\t\t\t\t\tif ( conv ) {\n\n\t\t\t\t\t\t\t\t// Condense equivalence converters\n\t\t\t\t\t\t\t\tif ( conv === true ) {\n\t\t\t\t\t\t\t\t\tconv = converters[ conv2 ];\n\n\t\t\t\t\t\t\t\t// Otherwise, insert the intermediate dataType\n\t\t\t\t\t\t\t\t} else if ( converters[ conv2 ] !== true ) {\n\t\t\t\t\t\t\t\t\tcurrent = tmp[ 0 ];\n\t\t\t\t\t\t\t\t\tdataTypes.unshift( tmp[ 1 ] );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Apply converter (if not an equivalence)\n\t\t\t\tif ( conv !== true ) {\n\n\t\t\t\t\t// Unless errors are allowed to bubble, catch and return them\n\t\t\t\t\tif ( conv && s.throws ) {\n\t\t\t\t\t\tresponse = conv( response );\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tresponse = conv( response );\n\t\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tstate: \"parsererror\",\n\t\t\t\t\t\t\t\terror: conv ? e : \"No conversion from \" + prev + \" to \" + current\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn { state: \"success\", data: response };\n}\n\njQuery.extend( {\n\n\t// Counter for holding the number of active queries\n\tactive: 0,\n\n\t// Last-Modified header cache for next request\n\tlastModified: {},\n\tetag: {},\n\n\tajaxSettings: {\n\t\turl: location.href,\n\t\ttype: \"GET\",\n\t\tisLocal: rlocalProtocol.test( location.protocol ),\n\t\tglobal: true,\n\t\tprocessData: true,\n\t\tasync: true,\n\t\tcontentType: \"application/x-www-form-urlencoded; charset=UTF-8\",\n\n\t\t/*\n\t\ttimeout: 0,\n\t\tdata: null,\n\t\tdataType: null,\n\t\tusername: null,\n\t\tpassword: null,\n\t\tcache: null,\n\t\tthrows: false,\n\t\ttraditional: false,\n\t\theaders: {},\n\t\t*/\n\n\t\taccepts: {\n\t\t\t\"*\": allTypes,\n\t\t\ttext: \"text/plain\",\n\t\t\thtml: \"text/html\",\n\t\t\txml: \"application/xml, text/xml\",\n\t\t\tjson: \"application/json, text/javascript\"\n\t\t},\n\n\t\tcontents: {\n\t\t\txml: /\\bxml\\b/,\n\t\t\thtml: /\\bhtml/,\n\t\t\tjson: /\\bjson\\b/\n\t\t},\n\n\t\tresponseFields: {\n\t\t\txml: \"responseXML\",\n\t\t\ttext: \"responseText\",\n\t\t\tjson: \"responseJSON\"\n\t\t},\n\n\t\t// Data converters\n\t\t// Keys separate source (or catchall \"*\") and destination types with a single space\n\t\tconverters: {\n\n\t\t\t// Convert anything to text\n\t\t\t\"* text\": String,\n\n\t\t\t// Text to html (true = no transformation)\n\t\t\t\"text html\": true,\n\n\t\t\t// Evaluate text as a json expression\n\t\t\t\"text json\": JSON.parse,\n\n\t\t\t// Parse text as xml\n\t\t\t\"text xml\": jQuery.parseXML\n\t\t},\n\n\t\t// For options that shouldn't be deep extended:\n\t\t// you can add your own custom options here if\n\t\t// and when you create one that shouldn't be\n\t\t// deep extended (see ajaxExtend)\n\t\tflatOptions: {\n\t\t\turl: true,\n\t\t\tcontext: true\n\t\t}\n\t},\n\n\t// Creates a full fledged settings object into target\n\t// with both ajaxSettings and settings fields.\n\t// If target is omitted, writes into ajaxSettings.\n\tajaxSetup: function( target, settings ) {\n\t\treturn settings ?\n\n\t\t\t// Building a settings object\n\t\t\tajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :\n\n\t\t\t// Extending ajaxSettings\n\t\t\tajaxExtend( jQuery.ajaxSettings, target );\n\t},\n\n\tajaxPrefilter: addToPrefiltersOrTransports( prefilters ),\n\tajaxTransport: addToPrefiltersOrTransports( transports ),\n\n\t// Main method\n\tajax: function( url, options ) {\n\n\t\t// If url is an object, simulate pre-1.5 signature\n\t\tif ( typeof url === \"object\" ) {\n\t\t\toptions = url;\n\t\t\turl = undefined;\n\t\t}\n\n\t\t// Force options to be an object\n\t\toptions = options || {};\n\n\t\tvar transport,\n\n\t\t\t// URL without anti-cache param\n\t\t\tcacheURL,\n\n\t\t\t// Response headers\n\t\t\tresponseHeadersString,\n\t\t\tresponseHeaders,\n\n\t\t\t// timeout handle\n\t\t\ttimeoutTimer,\n\n\t\t\t// Url cleanup var\n\t\t\turlAnchor,\n\n\t\t\t// Request state (becomes false upon send and true upon completion)\n\t\t\tcompleted,\n\n\t\t\t// To know if global events are to be dispatched\n\t\t\tfireGlobals,\n\n\t\t\t// Loop variable\n\t\t\ti,\n\n\t\t\t// uncached part of the url\n\t\t\tuncached,\n\n\t\t\t// Create the final options object\n\t\t\ts = jQuery.ajaxSetup( {}, options ),\n\n\t\t\t// Callbacks context\n\t\t\tcallbackContext = s.context || s,\n\n\t\t\t// Context for global events is callbackContext if it is a DOM node or jQuery collection\n\t\t\tglobalEventContext = s.context &&\n\t\t\t\t( callbackContext.nodeType || callbackContext.jquery ) ?\n\t\t\t\t\tjQuery( callbackContext ) :\n\t\t\t\t\tjQuery.event,\n\n\t\t\t// Deferreds\n\t\t\tdeferred = jQuery.Deferred(),\n\t\t\tcompleteDeferred = jQuery.Callbacks( \"once memory\" ),\n\n\t\t\t// Status-dependent callbacks\n\t\t\tstatusCode = s.statusCode || {},\n\n\t\t\t// Headers (they are sent all at once)\n\t\t\trequestHeaders = {},\n\t\t\trequestHeadersNames = {},\n\n\t\t\t// Default abort message\n\t\t\tstrAbort = \"canceled\",\n\n\t\t\t// Fake xhr\n\t\t\tjqXHR = {\n\t\t\t\treadyState: 0,\n\n\t\t\t\t// Builds headers hashtable if needed\n\t\t\t\tgetResponseHeader: function( key ) {\n\t\t\t\t\tvar match;\n\t\t\t\t\tif ( completed ) {\n\t\t\t\t\t\tif ( !responseHeaders ) {\n\t\t\t\t\t\t\tresponseHeaders = {};\n\t\t\t\t\t\t\twhile ( ( match = rheaders.exec( responseHeadersString ) ) ) {\n\t\t\t\t\t\t\t\tresponseHeaders[ match[ 1 ].toLowerCase() ] = match[ 2 ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmatch = responseHeaders[ key.toLowerCase() ];\n\t\t\t\t\t}\n\t\t\t\t\treturn match == null ? null : match;\n\t\t\t\t},\n\n\t\t\t\t// Raw string\n\t\t\t\tgetAllResponseHeaders: function() {\n\t\t\t\t\treturn completed ? responseHeadersString : null;\n\t\t\t\t},\n\n\t\t\t\t// Caches the header\n\t\t\t\tsetRequestHeader: function( name, value ) {\n\t\t\t\t\tif ( completed == null ) {\n\t\t\t\t\t\tname = requestHeadersNames[ name.toLowerCase() ] =\n\t\t\t\t\t\t\trequestHeadersNames[ name.toLowerCase() ] || name;\n\t\t\t\t\t\trequestHeaders[ name ] = value;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Overrides response content-type header\n\t\t\t\toverrideMimeType: function( type ) {\n\t\t\t\t\tif ( completed == null ) {\n\t\t\t\t\t\ts.mimeType = type;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Status-dependent callbacks\n\t\t\t\tstatusCode: function( map ) {\n\t\t\t\t\tvar code;\n\t\t\t\t\tif ( map ) {\n\t\t\t\t\t\tif ( completed ) {\n\n\t\t\t\t\t\t\t// Execute the appropriate callbacks\n\t\t\t\t\t\t\tjqXHR.always( map[ jqXHR.status ] );\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// Lazy-add the new callbacks in a way that preserves old ones\n\t\t\t\t\t\t\tfor ( code in map ) {\n\t\t\t\t\t\t\t\tstatusCode[ code ] = [ statusCode[ code ], map[ code ] ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Cancel the request\n\t\t\t\tabort: function( statusText ) {\n\t\t\t\t\tvar finalText = statusText || strAbort;\n\t\t\t\t\tif ( transport ) {\n\t\t\t\t\t\ttransport.abort( finalText );\n\t\t\t\t\t}\n\t\t\t\t\tdone( 0, finalText );\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t};\n\n\t\t// Attach deferreds\n\t\tdeferred.promise( jqXHR );\n\n\t\t// Add protocol if not provided (prefilters might expect it)\n\t\t// Handle falsy url in the settings object (#10093: consistency with old signature)\n\t\t// We also use the url parameter if available\n\t\ts.url = ( ( url || s.url || location.href ) + \"\" )\n\t\t\t.replace( rprotocol, location.protocol + \"//\" );\n\n\t\t// Alias method option to type as per ticket #12004\n\t\ts.type = options.method || options.type || s.method || s.type;\n\n\t\t// Extract dataTypes list\n\t\ts.dataTypes = ( s.dataType || \"*\" ).toLowerCase().match( rnothtmlwhite ) || [ \"\" ];\n\n\t\t// A cross-domain request is in order when the origin doesn't match the current origin.\n\t\tif ( s.crossDomain == null ) {\n\t\t\turlAnchor = document.createElement( \"a\" );\n\n\t\t\t// Support: IE <=8 - 11, Edge 12 - 13\n\t\t\t// IE throws exception on accessing the href property if url is malformed,\n\t\t\t// e.g. http://example.com:80x/\n\t\t\ttry {\n\t\t\t\turlAnchor.href = s.url;\n\n\t\t\t\t// Support: IE <=8 - 11 only\n\t\t\t\t// Anchor's host property isn't correctly set when s.url is relative\n\t\t\t\turlAnchor.href = urlAnchor.href;\n\t\t\t\ts.crossDomain = originAnchor.protocol + \"//\" + originAnchor.host !==\n\t\t\t\t\turlAnchor.protocol + \"//\" + urlAnchor.host;\n\t\t\t} catch ( e ) {\n\n\t\t\t\t// If there is an error parsing the URL, assume it is crossDomain,\n\t\t\t\t// it can be rejected by the transport if it is invalid\n\t\t\t\ts.crossDomain = true;\n\t\t\t}\n\t\t}\n\n\t\t// Convert data if not already a string\n\t\tif ( s.data && s.processData && typeof s.data !== \"string\" ) {\n\t\t\ts.data = jQuery.param( s.data, s.traditional );\n\t\t}\n\n\t\t// Apply prefilters\n\t\tinspectPrefiltersOrTransports( prefilters, s, options, jqXHR );\n\n\t\t// If request was aborted inside a prefilter, stop there\n\t\tif ( completed ) {\n\t\t\treturn jqXHR;\n\t\t}\n\n\t\t// We can fire global events as of now if asked to\n\t\t// Don't fire events if jQuery.event is undefined in an AMD-usage scenario (#15118)\n\t\tfireGlobals = jQuery.event && s.global;\n\n\t\t// Watch for a new set of requests\n\t\tif ( fireGlobals && jQuery.active++ === 0 ) {\n\t\t\tjQuery.event.trigger( \"ajaxStart\" );\n\t\t}\n\n\t\t// Uppercase the type\n\t\ts.type = s.type.toUpperCase();\n\n\t\t// Determine if request has content\n\t\ts.hasContent = !rnoContent.test( s.type );\n\n\t\t// Save the URL in case we're toying with the If-Modified-Since\n\t\t// and/or If-None-Match header later on\n\t\t// Remove hash to simplify url manipulation\n\t\tcacheURL = s.url.replace( rhash, \"\" );\n\n\t\t// More options handling for requests with no content\n\t\tif ( !s.hasContent ) {\n\n\t\t\t// Remember the hash so we can put it back\n\t\t\tuncached = s.url.slice( cacheURL.length );\n\n\t\t\t// If data is available, append data to url\n\t\t\tif ( s.data ) {\n\t\t\t\tcacheURL += ( rquery.test( cacheURL ) ? \"&\" : \"?\" ) + s.data;\n\n\t\t\t\t// #9682: remove data so that it's not used in an eventual retry\n\t\t\t\tdelete s.data;\n\t\t\t}\n\n\t\t\t// Add or update anti-cache param if needed\n\t\t\tif ( s.cache === false ) {\n\t\t\t\tcacheURL = cacheURL.replace( rantiCache, \"$1\" );\n\t\t\t\tuncached = ( rquery.test( cacheURL ) ? \"&\" : \"?\" ) + \"_=\" + ( nonce++ ) + uncached;\n\t\t\t}\n\n\t\t\t// Put hash and anti-cache on the URL that will be requested (gh-1732)\n\t\t\ts.url = cacheURL + uncached;\n\n\t\t// Change '%20' to '+' if this is encoded form body content (gh-2658)\n\t\t} else if ( s.data && s.processData &&\n\t\t\t( s.contentType || \"\" ).indexOf( \"application/x-www-form-urlencoded\" ) === 0 ) {\n\t\t\ts.data = s.data.replace( r20, \"+\" );\n\t\t}\n\n\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\n\t\tif ( s.ifModified ) {\n\t\t\tif ( jQuery.lastModified[ cacheURL ] ) {\n\t\t\t\tjqXHR.setRequestHeader( \"If-Modified-Since\", jQuery.lastModified[ cacheURL ] );\n\t\t\t}\n\t\t\tif ( jQuery.etag[ cacheURL ] ) {\n\t\t\t\tjqXHR.setRequestHeader( \"If-None-Match\", jQuery.etag[ cacheURL ] );\n\t\t\t}\n\t\t}\n\n\t\t// Set the correct header, if data is being sent\n\t\tif ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {\n\t\t\tjqXHR.setRequestHeader( \"Content-Type\", s.contentType );\n\t\t}\n\n\t\t// Set the Accepts header for the server, depending on the dataType\n\t\tjqXHR.setRequestHeader(\n\t\t\t\"Accept\",\n\t\t\ts.dataTypes[ 0 ] && s.accepts[ s.dataTypes[ 0 ] ] ?\n\t\t\t\ts.accepts[ s.dataTypes[ 0 ] ] +\n\t\t\t\t\t( s.dataTypes[ 0 ] !== \"*\" ? \", \" + allTypes + \"; q=0.01\" : \"\" ) :\n\t\t\t\ts.accepts[ \"*\" ]\n\t\t);\n\n\t\t// Check for headers option\n\t\tfor ( i in s.headers ) {\n\t\t\tjqXHR.setRequestHeader( i, s.headers[ i ] );\n\t\t}\n\n\t\t// Allow custom headers/mimetypes and early abort\n\t\tif ( s.beforeSend &&\n\t\t\t( s.beforeSend.call( callbackContext, jqXHR, s ) === false || completed ) ) {\n\n\t\t\t// Abort if not done already and return\n\t\t\treturn jqXHR.abort();\n\t\t}\n\n\t\t// Aborting is no longer a cancellation\n\t\tstrAbort = \"abort\";\n\n\t\t// Install callbacks on deferreds\n\t\tcompleteDeferred.add( s.complete );\n\t\tjqXHR.done( s.success );\n\t\tjqXHR.fail( s.error );\n\n\t\t// Get transport\n\t\ttransport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );\n\n\t\t// If no transport, we auto-abort\n\t\tif ( !transport ) {\n\t\t\tdone( -1, \"No Transport\" );\n\t\t} else {\n\t\t\tjqXHR.readyState = 1;\n\n\t\t\t// Send global event\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( \"ajaxSend\", [ jqXHR, s ] );\n\t\t\t}\n\n\t\t\t// If request was aborted inside ajaxSend, stop there\n\t\t\tif ( completed ) {\n\t\t\t\treturn jqXHR;\n\t\t\t}\n\n\t\t\t// Timeout\n\t\t\tif ( s.async && s.timeout > 0 ) {\n\t\t\t\ttimeoutTimer = window.setTimeout( function() {\n\t\t\t\t\tjqXHR.abort( \"timeout\" );\n\t\t\t\t}, s.timeout );\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tcompleted = false;\n\t\t\t\ttransport.send( requestHeaders, done );\n\t\t\t} catch ( e ) {\n\n\t\t\t\t// Rethrow post-completion exceptions\n\t\t\t\tif ( completed ) {\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\n\t\t\t\t// Propagate others as results\n\t\t\t\tdone( -1, e );\n\t\t\t}\n\t\t}\n\n\t\t// Callback for when everything is done\n\t\tfunction done( status, nativeStatusText, responses, headers ) {\n\t\t\tvar isSuccess, success, error, response, modified,\n\t\t\t\tstatusText = nativeStatusText;\n\n\t\t\t// Ignore repeat invocations\n\t\t\tif ( completed ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcompleted = true;\n\n\t\t\t// Clear timeout if it exists\n\t\t\tif ( timeoutTimer ) {\n\t\t\t\twindow.clearTimeout( timeoutTimer );\n\t\t\t}\n\n\t\t\t// Dereference transport for early garbage collection\n\t\t\t// (no matter how long the jqXHR object will be used)\n\t\t\ttransport = undefined;\n\n\t\t\t// Cache response headers\n\t\t\tresponseHeadersString = headers || \"\";\n\n\t\t\t// Set readyState\n\t\t\tjqXHR.readyState = status > 0 ? 4 : 0;\n\n\t\t\t// Determine if successful\n\t\t\tisSuccess = status >= 200 && status < 300 || status === 304;\n\n\t\t\t// Get response data\n\t\t\tif ( responses ) {\n\t\t\t\tresponse = ajaxHandleResponses( s, jqXHR, responses );\n\t\t\t}\n\n\t\t\t// Convert no matter what (that way responseXXX fields are always set)\n\t\t\tresponse = ajaxConvert( s, response, jqXHR, isSuccess );\n\n\t\t\t// If successful, handle type chaining\n\t\t\tif ( isSuccess ) {\n\n\t\t\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\n\t\t\t\tif ( s.ifModified ) {\n\t\t\t\t\tmodified = jqXHR.getResponseHeader( \"Last-Modified\" );\n\t\t\t\t\tif ( modified ) {\n\t\t\t\t\t\tjQuery.lastModified[ cacheURL ] = modified;\n\t\t\t\t\t}\n\t\t\t\t\tmodified = jqXHR.getResponseHeader( \"etag\" );\n\t\t\t\t\tif ( modified ) {\n\t\t\t\t\t\tjQuery.etag[ cacheURL ] = modified;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// if no content\n\t\t\t\tif ( status === 204 || s.type === \"HEAD\" ) {\n\t\t\t\t\tstatusText = \"nocontent\";\n\n\t\t\t\t// if not modified\n\t\t\t\t} else if ( status === 304 ) {\n\t\t\t\t\tstatusText = \"notmodified\";\n\n\t\t\t\t// If we have data, let's convert it\n\t\t\t\t} else {\n\t\t\t\t\tstatusText = response.state;\n\t\t\t\t\tsuccess = response.data;\n\t\t\t\t\terror = response.error;\n\t\t\t\t\tisSuccess = !error;\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\t// Extract error from statusText and normalize for non-aborts\n\t\t\t\terror = statusText;\n\t\t\t\tif ( status || !statusText ) {\n\t\t\t\t\tstatusText = \"error\";\n\t\t\t\t\tif ( status < 0 ) {\n\t\t\t\t\t\tstatus = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Set data for the fake xhr object\n\t\t\tjqXHR.status = status;\n\t\t\tjqXHR.statusText = ( nativeStatusText || statusText ) + \"\";\n\n\t\t\t// Success/Error\n\t\t\tif ( isSuccess ) {\n\t\t\t\tdeferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );\n\t\t\t} else {\n\t\t\t\tdeferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );\n\t\t\t}\n\n\t\t\t// Status-dependent callbacks\n\t\t\tjqXHR.statusCode( statusCode );\n\t\t\tstatusCode = undefined;\n\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( isSuccess ? \"ajaxSuccess\" : \"ajaxError\",\n\t\t\t\t\t[ jqXHR, s, isSuccess ? success : error ] );\n\t\t\t}\n\n\t\t\t// Complete\n\t\t\tcompleteDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );\n\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( \"ajaxComplete\", [ jqXHR, s ] );\n\n\t\t\t\t// Handle the global AJAX counter\n\t\t\t\tif ( !( --jQuery.active ) ) {\n\t\t\t\t\tjQuery.event.trigger( \"ajaxStop\" );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn jqXHR;\n\t},\n\n\tgetJSON: function( url, data, callback ) {\n\t\treturn jQuery.get( url, data, callback, \"json\" );\n\t},\n\n\tgetScript: function( url, callback ) {\n\t\treturn jQuery.get( url, undefined, callback, \"script\" );\n\t}\n} );\n\njQuery.each( [ \"get\", \"post\" ], function( i, method ) {\n\tjQuery[ method ] = function( url, data, callback, type ) {\n\n\t\t// Shift arguments if data argument was omitted\n\t\tif ( jQuery.isFunction( data ) ) {\n\t\t\ttype = type || callback;\n\t\t\tcallback = data;\n\t\t\tdata = undefined;\n\t\t}\n\n\t\t// The url can be an options object (which then must have .url)\n\t\treturn jQuery.ajax( jQuery.extend( {\n\t\t\turl: url,\n\t\t\ttype: method,\n\t\t\tdataType: type,\n\t\t\tdata: data,\n\t\t\tsuccess: callback\n\t\t}, jQuery.isPlainObject( url ) && url ) );\n\t};\n} );\n\n\njQuery._evalUrl = function( url ) {\n\treturn jQuery.ajax( {\n\t\turl: url,\n\n\t\t// Make this explicit, since user can override this through ajaxSetup (#11264)\n\t\ttype: \"GET\",\n\t\tdataType: \"script\",\n\t\tcache: true,\n\t\tasync: false,\n\t\tglobal: false,\n\t\t\"throws\": true\n\t} );\n};\n\n\njQuery.fn.extend( {\n\twrapAll: function( html ) {\n\t\tvar wrap;\n\n\t\tif ( this[ 0 ] ) {\n\t\t\tif ( jQuery.isFunction( html ) ) {\n\t\t\t\thtml = html.call( this[ 0 ] );\n\t\t\t}\n\n\t\t\t// The elements to wrap the target around\n\t\t\twrap = jQuery( html, this[ 0 ].ownerDocument ).eq( 0 ).clone( true );\n\n\t\t\tif ( this[ 0 ].parentNode ) {\n\t\t\t\twrap.insertBefore( this[ 0 ] );\n\t\t\t}\n\n\t\t\twrap.map( function() {\n\t\t\t\tvar elem = this;\n\n\t\t\t\twhile ( elem.firstElementChild ) {\n\t\t\t\t\telem = elem.firstElementChild;\n\t\t\t\t}\n\n\t\t\t\treturn elem;\n\t\t\t} ).append( this );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\twrapInner: function( html ) {\n\t\tif ( jQuery.isFunction( html ) ) {\n\t\t\treturn this.each( function( i ) {\n\t\t\t\tjQuery( this ).wrapInner( html.call( this, i ) );\n\t\t\t} );\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tvar self = jQuery( this ),\n\t\t\t\tcontents = self.contents();\n\n\t\t\tif ( contents.length ) {\n\t\t\t\tcontents.wrapAll( html );\n\n\t\t\t} else {\n\t\t\t\tself.append( html );\n\t\t\t}\n\t\t} );\n\t},\n\n\twrap: function( html ) {\n\t\tvar isFunction = jQuery.isFunction( html );\n\n\t\treturn this.each( function( i ) {\n\t\t\tjQuery( this ).wrapAll( isFunction ? html.call( this, i ) : html );\n\t\t} );\n\t},\n\n\tunwrap: function( selector ) {\n\t\tthis.parent( selector ).not( \"body\" ).each( function() {\n\t\t\tjQuery( this ).replaceWith( this.childNodes );\n\t\t} );\n\t\treturn this;\n\t}\n} );\n\n\njQuery.expr.pseudos.hidden = function( elem ) {\n\treturn !jQuery.expr.pseudos.visible( elem );\n};\njQuery.expr.pseudos.visible = function( elem ) {\n\treturn !!( elem.offsetWidth || elem.offsetHeight || elem.getClientRects().length );\n};\n\n\n\n\njQuery.ajaxSettings.xhr = function() {\n\ttry {\n\t\treturn new window.XMLHttpRequest();\n\t} catch ( e ) {}\n};\n\nvar xhrSuccessStatus = {\n\n\t\t// File protocol always yields status code 0, assume 200\n\t\t0: 200,\n\n\t\t// Support: IE <=9 only\n\t\t// #1450: sometimes IE returns 1223 when it should be 204\n\t\t1223: 204\n\t},\n\txhrSupported = jQuery.ajaxSettings.xhr();\n\nsupport.cors = !!xhrSupported && ( \"withCredentials\" in xhrSupported );\nsupport.ajax = xhrSupported = !!xhrSupported;\n\njQuery.ajaxTransport( function( options ) {\n\tvar callback, errorCallback;\n\n\t// Cross domain only allowed if supported through XMLHttpRequest\n\tif ( support.cors || xhrSupported && !options.crossDomain ) {\n\t\treturn {\n\t\t\tsend: function( headers, complete ) {\n\t\t\t\tvar i,\n\t\t\t\t\txhr = options.xhr();\n\n\t\t\t\txhr.open(\n\t\t\t\t\toptions.type,\n\t\t\t\t\toptions.url,\n\t\t\t\t\toptions.async,\n\t\t\t\t\toptions.username,\n\t\t\t\t\toptions.password\n\t\t\t\t);\n\n\t\t\t\t// Apply custom fields if provided\n\t\t\t\tif ( options.xhrFields ) {\n\t\t\t\t\tfor ( i in options.xhrFields ) {\n\t\t\t\t\t\txhr[ i ] = options.xhrFields[ i ];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Override mime type if needed\n\t\t\t\tif ( options.mimeType && xhr.overrideMimeType ) {\n\t\t\t\t\txhr.overrideMimeType( options.mimeType );\n\t\t\t\t}\n\n\t\t\t\t// X-Requested-With header\n\t\t\t\t// For cross-domain requests, seeing as conditions for a preflight are\n\t\t\t\t// akin to a jigsaw puzzle, we simply never set it to be sure.\n\t\t\t\t// (it can always be set on a per-request basis or even using ajaxSetup)\n\t\t\t\t// For same-domain requests, won't change header if already provided.\n\t\t\t\tif ( !options.crossDomain && !headers[ \"X-Requested-With\" ] ) {\n\t\t\t\t\theaders[ \"X-Requested-With\" ] = \"XMLHttpRequest\";\n\t\t\t\t}\n\n\t\t\t\t// Set headers\n\t\t\t\tfor ( i in headers ) {\n\t\t\t\t\txhr.setRequestHeader( i, headers[ i ] );\n\t\t\t\t}\n\n\t\t\t\t// Callback\n\t\t\t\tcallback = function( type ) {\n\t\t\t\t\treturn function() {\n\t\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\t\tcallback = errorCallback = xhr.onload =\n\t\t\t\t\t\t\t\txhr.onerror = xhr.onabort = xhr.onreadystatechange = null;\n\n\t\t\t\t\t\t\tif ( type === \"abort\" ) {\n\t\t\t\t\t\t\t\txhr.abort();\n\t\t\t\t\t\t\t} else if ( type === \"error\" ) {\n\n\t\t\t\t\t\t\t\t// Support: IE <=9 only\n\t\t\t\t\t\t\t\t// On a manual native abort, IE9 throws\n\t\t\t\t\t\t\t\t// errors on any property access that is not readyState\n\t\t\t\t\t\t\t\tif ( typeof xhr.status !== \"number\" ) {\n\t\t\t\t\t\t\t\t\tcomplete( 0, \"error\" );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tcomplete(\n\n\t\t\t\t\t\t\t\t\t\t// File: protocol always yields status 0; see #8605, #14207\n\t\t\t\t\t\t\t\t\t\txhr.status,\n\t\t\t\t\t\t\t\t\t\txhr.statusText\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcomplete(\n\t\t\t\t\t\t\t\t\txhrSuccessStatus[ xhr.status ] || xhr.status,\n\t\t\t\t\t\t\t\t\txhr.statusText,\n\n\t\t\t\t\t\t\t\t\t// Support: IE <=9 only\n\t\t\t\t\t\t\t\t\t// IE9 has no XHR2 but throws on binary (trac-11426)\n\t\t\t\t\t\t\t\t\t// For XHR2 non-text, let the caller handle it (gh-2498)\n\t\t\t\t\t\t\t\t\t( xhr.responseType || \"text\" ) !== \"text\"  ||\n\t\t\t\t\t\t\t\t\ttypeof xhr.responseText !== \"string\" ?\n\t\t\t\t\t\t\t\t\t\t{ binary: xhr.response } :\n\t\t\t\t\t\t\t\t\t\t{ text: xhr.responseText },\n\t\t\t\t\t\t\t\t\txhr.getAllResponseHeaders()\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t};\n\n\t\t\t\t// Listen to events\n\t\t\t\txhr.onload = callback();\n\t\t\t\terrorCallback = xhr.onerror = callback( \"error\" );\n\n\t\t\t\t// Support: IE 9 only\n\t\t\t\t// Use onreadystatechange to replace onabort\n\t\t\t\t// to handle uncaught aborts\n\t\t\t\tif ( xhr.onabort !== undefined ) {\n\t\t\t\t\txhr.onabort = errorCallback;\n\t\t\t\t} else {\n\t\t\t\t\txhr.onreadystatechange = function() {\n\n\t\t\t\t\t\t// Check readyState before timeout as it changes\n\t\t\t\t\t\tif ( xhr.readyState === 4 ) {\n\n\t\t\t\t\t\t\t// Allow onerror to be called first,\n\t\t\t\t\t\t\t// but that will not handle a native abort\n\t\t\t\t\t\t\t// Also, save errorCallback to a variable\n\t\t\t\t\t\t\t// as xhr.onerror cannot be accessed\n\t\t\t\t\t\t\twindow.setTimeout( function() {\n\t\t\t\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\t\t\t\terrorCallback();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\t// Create the abort callback\n\t\t\t\tcallback = callback( \"abort\" );\n\n\t\t\t\ttry {\n\n\t\t\t\t\t// Do send the request (this may raise an exception)\n\t\t\t\t\txhr.send( options.hasContent && options.data || null );\n\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\t// #14683: Only rethrow if this hasn't been notified as an error yet\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tthrow e;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tabort: function() {\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n} );\n\n\n\n\n// Prevent auto-execution of scripts when no explicit dataType was provided (See gh-2432)\njQuery.ajaxPrefilter( function( s ) {\n\tif ( s.crossDomain ) {\n\t\ts.contents.script = false;\n\t}\n} );\n\n// Install script dataType\njQuery.ajaxSetup( {\n\taccepts: {\n\t\tscript: \"text/javascript, application/javascript, \" +\n\t\t\t\"application/ecmascript, application/x-ecmascript\"\n\t},\n\tcontents: {\n\t\tscript: /\\b(?:java|ecma)script\\b/\n\t},\n\tconverters: {\n\t\t\"text script\": function( text ) {\n\t\t\tjQuery.globalEval( text );\n\t\t\treturn text;\n\t\t}\n\t}\n} );\n\n// Handle cache's special case and crossDomain\njQuery.ajaxPrefilter( \"script\", function( s ) {\n\tif ( s.cache === undefined ) {\n\t\ts.cache = false;\n\t}\n\tif ( s.crossDomain ) {\n\t\ts.type = \"GET\";\n\t}\n} );\n\n// Bind script tag hack transport\njQuery.ajaxTransport( \"script\", function( s ) {\n\n\t// This transport only deals with cross domain requests\n\tif ( s.crossDomain ) {\n\t\tvar script, callback;\n\t\treturn {\n\t\t\tsend: function( _, complete ) {\n\t\t\t\tscript = jQuery( \"<script>\" ).prop( {\n\t\t\t\t\tcharset: s.scriptCharset,\n\t\t\t\t\tsrc: s.url\n\t\t\t\t} ).on(\n\t\t\t\t\t\"load error\",\n\t\t\t\t\tcallback = function( evt ) {\n\t\t\t\t\t\tscript.remove();\n\t\t\t\t\t\tcallback = null;\n\t\t\t\t\t\tif ( evt ) {\n\t\t\t\t\t\t\tcomplete( evt.type === \"error\" ? 404 : 200, evt.type );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\t// Use native DOM manipulation to avoid our domManip AJAX trickery\n\t\t\t\tdocument.head.appendChild( script[ 0 ] );\n\t\t\t},\n\t\t\tabort: function() {\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n} );\n\n\n\n\nvar oldCallbacks = [],\n\trjsonp = /(=)\\?(?=&|$)|\\?\\?/;\n\n// Default jsonp settings\njQuery.ajaxSetup( {\n\tjsonp: \"callback\",\n\tjsonpCallback: function() {\n\t\tvar callback = oldCallbacks.pop() || ( jQuery.expando + \"_\" + ( nonce++ ) );\n\t\tthis[ callback ] = true;\n\t\treturn callback;\n\t}\n} );\n\n// Detect, normalize options and install callbacks for jsonp requests\njQuery.ajaxPrefilter( \"json jsonp\", function( s, originalSettings, jqXHR ) {\n\n\tvar callbackName, overwritten, responseContainer,\n\t\tjsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?\n\t\t\t\"url\" :\n\t\t\ttypeof s.data === \"string\" &&\n\t\t\t\t( s.contentType || \"\" )\n\t\t\t\t\t.indexOf( \"application/x-www-form-urlencoded\" ) === 0 &&\n\t\t\t\trjsonp.test( s.data ) && \"data\"\n\t\t);\n\n\t// Handle iff the expected data type is \"jsonp\" or we have a parameter to set\n\tif ( jsonProp || s.dataTypes[ 0 ] === \"jsonp\" ) {\n\n\t\t// Get callback name, remembering preexisting value associated with it\n\t\tcallbackName = s.jsonpCallback = jQuery.isFunction( s.jsonpCallback ) ?\n\t\t\ts.jsonpCallback() :\n\t\t\ts.jsonpCallback;\n\n\t\t// Insert callback into url or form data\n\t\tif ( jsonProp ) {\n\t\t\ts[ jsonProp ] = s[ jsonProp ].replace( rjsonp, \"$1\" + callbackName );\n\t\t} else if ( s.jsonp !== false ) {\n\t\t\ts.url += ( rquery.test( s.url ) ? \"&\" : \"?\" ) + s.jsonp + \"=\" + callbackName;\n\t\t}\n\n\t\t// Use data converter to retrieve json after script execution\n\t\ts.converters[ \"script json\" ] = function() {\n\t\t\tif ( !responseContainer ) {\n\t\t\t\tjQuery.error( callbackName + \" was not called\" );\n\t\t\t}\n\t\t\treturn responseContainer[ 0 ];\n\t\t};\n\n\t\t// Force json dataType\n\t\ts.dataTypes[ 0 ] = \"json\";\n\n\t\t// Install callback\n\t\toverwritten = window[ callbackName ];\n\t\twindow[ callbackName ] = function() {\n\t\t\tresponseContainer = arguments;\n\t\t};\n\n\t\t// Clean-up function (fires after converters)\n\t\tjqXHR.always( function() {\n\n\t\t\t// If previous value didn't exist - remove it\n\t\t\tif ( overwritten === undefined ) {\n\t\t\t\tjQuery( window ).removeProp( callbackName );\n\n\t\t\t// Otherwise restore preexisting value\n\t\t\t} else {\n\t\t\t\twindow[ callbackName ] = overwritten;\n\t\t\t}\n\n\t\t\t// Save back as free\n\t\t\tif ( s[ callbackName ] ) {\n\n\t\t\t\t// Make sure that re-using the options doesn't screw things around\n\t\t\t\ts.jsonpCallback = originalSettings.jsonpCallback;\n\n\t\t\t\t// Save the callback name for future use\n\t\t\t\toldCallbacks.push( callbackName );\n\t\t\t}\n\n\t\t\t// Call if it was a function and we have a response\n\t\t\tif ( responseContainer && jQuery.isFunction( overwritten ) ) {\n\t\t\t\toverwritten( responseContainer[ 0 ] );\n\t\t\t}\n\n\t\t\tresponseContainer = overwritten = undefined;\n\t\t} );\n\n\t\t// Delegate to script\n\t\treturn \"script\";\n\t}\n} );\n\n\n\n\n// Support: Safari 8 only\n// In Safari 8 documents created via document.implementation.createHTMLDocument\n// collapse sibling forms: the second one becomes a child of the first one.\n// Because of that, this security measure has to be disabled in Safari 8.\n// https://bugs.webkit.org/show_bug.cgi?id=137337\nsupport.createHTMLDocument = ( function() {\n\tvar body = document.implementation.createHTMLDocument( \"\" ).body;\n\tbody.innerHTML = \"<form></form><form></form>\";\n\treturn body.childNodes.length === 2;\n} )();\n\n\n// Argument \"data\" should be string of html\n// context (optional): If specified, the fragment will be created in this context,\n// defaults to document\n// keepScripts (optional): If true, will include scripts passed in the html string\njQuery.parseHTML = function( data, context, keepScripts ) {\n\tif ( typeof data !== \"string\" ) {\n\t\treturn [];\n\t}\n\tif ( typeof context === \"boolean\" ) {\n\t\tkeepScripts = context;\n\t\tcontext = false;\n\t}\n\n\tvar base, parsed, scripts;\n\n\tif ( !context ) {\n\n\t\t// Stop scripts or inline event handlers from being executed immediately\n\t\t// by using document.implementation\n\t\tif ( support.createHTMLDocument ) {\n\t\t\tcontext = document.implementation.createHTMLDocument( \"\" );\n\n\t\t\t// Set the base href for the created document\n\t\t\t// so any parsed elements with URLs\n\t\t\t// are based on the document's URL (gh-2965)\n\t\t\tbase = context.createElement( \"base\" );\n\t\t\tbase.href = document.location.href;\n\t\t\tcontext.head.appendChild( base );\n\t\t} else {\n\t\t\tcontext = document;\n\t\t}\n\t}\n\n\tparsed = rsingleTag.exec( data );\n\tscripts = !keepScripts && [];\n\n\t// Single tag\n\tif ( parsed ) {\n\t\treturn [ context.createElement( parsed[ 1 ] ) ];\n\t}\n\n\tparsed = buildFragment( [ data ], context, scripts );\n\n\tif ( scripts && scripts.length ) {\n\t\tjQuery( scripts ).remove();\n\t}\n\n\treturn jQuery.merge( [], parsed.childNodes );\n};\n\n\n/**\n * Load a url into a page\n */\njQuery.fn.load = function( url, params, callback ) {\n\tvar selector, type, response,\n\t\tself = this,\n\t\toff = url.indexOf( \" \" );\n\n\tif ( off > -1 ) {\n\t\tselector = stripAndCollapse( url.slice( off ) );\n\t\turl = url.slice( 0, off );\n\t}\n\n\t// If it's a function\n\tif ( jQuery.isFunction( params ) ) {\n\n\t\t// We assume that it's the callback\n\t\tcallback = params;\n\t\tparams = undefined;\n\n\t// Otherwise, build a param string\n\t} else if ( params && typeof params === \"object\" ) {\n\t\ttype = \"POST\";\n\t}\n\n\t// If we have elements to modify, make the request\n\tif ( self.length > 0 ) {\n\t\tjQuery.ajax( {\n\t\t\turl: url,\n\n\t\t\t// If \"type\" variable is undefined, then \"GET\" method will be used.\n\t\t\t// Make value of this field explicit since\n\t\t\t// user can override it through ajaxSetup method\n\t\t\ttype: type || \"GET\",\n\t\t\tdataType: \"html\",\n\t\t\tdata: params\n\t\t} ).done( function( responseText ) {\n\n\t\t\t// Save response for use in complete callback\n\t\t\tresponse = arguments;\n\n\t\t\tself.html( selector ?\n\n\t\t\t\t// If a selector was specified, locate the right elements in a dummy div\n\t\t\t\t// Exclude scripts to avoid IE 'Permission Denied' errors\n\t\t\t\tjQuery( \"<div>\" ).append( jQuery.parseHTML( responseText ) ).find( selector ) :\n\n\t\t\t\t// Otherwise use the full result\n\t\t\t\tresponseText );\n\n\t\t// If the request succeeds, this function gets \"data\", \"status\", \"jqXHR\"\n\t\t// but they are ignored because response was set above.\n\t\t// If it fails, this function gets \"jqXHR\", \"status\", \"error\"\n\t\t} ).always( callback && function( jqXHR, status ) {\n\t\t\tself.each( function() {\n\t\t\t\tcallback.apply( this, response || [ jqXHR.responseText, status, jqXHR ] );\n\t\t\t} );\n\t\t} );\n\t}\n\n\treturn this;\n};\n\n\n\n\n// Attach a bunch of functions for handling common AJAX events\njQuery.each( [\n\t\"ajaxStart\",\n\t\"ajaxStop\",\n\t\"ajaxComplete\",\n\t\"ajaxError\",\n\t\"ajaxSuccess\",\n\t\"ajaxSend\"\n], function( i, type ) {\n\tjQuery.fn[ type ] = function( fn ) {\n\t\treturn this.on( type, fn );\n\t};\n} );\n\n\n\n\njQuery.expr.pseudos.animated = function( elem ) {\n\treturn jQuery.grep( jQuery.timers, function( fn ) {\n\t\treturn elem === fn.elem;\n\t} ).length;\n};\n\n\n\n\njQuery.offset = {\n\tsetOffset: function( elem, options, i ) {\n\t\tvar curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition,\n\t\t\tposition = jQuery.css( elem, \"position\" ),\n\t\t\tcurElem = jQuery( elem ),\n\t\t\tprops = {};\n\n\t\t// Set position first, in-case top/left are set even on static elem\n\t\tif ( position === \"static\" ) {\n\t\t\telem.style.position = \"relative\";\n\t\t}\n\n\t\tcurOffset = curElem.offset();\n\t\tcurCSSTop = jQuery.css( elem, \"top\" );\n\t\tcurCSSLeft = jQuery.css( elem, \"left\" );\n\t\tcalculatePosition = ( position === \"absolute\" || position === \"fixed\" ) &&\n\t\t\t( curCSSTop + curCSSLeft ).indexOf( \"auto\" ) > -1;\n\n\t\t// Need to be able to calculate position if either\n\t\t// top or left is auto and position is either absolute or fixed\n\t\tif ( calculatePosition ) {\n\t\t\tcurPosition = curElem.position();\n\t\t\tcurTop = curPosition.top;\n\t\t\tcurLeft = curPosition.left;\n\n\t\t} else {\n\t\t\tcurTop = parseFloat( curCSSTop ) || 0;\n\t\t\tcurLeft = parseFloat( curCSSLeft ) || 0;\n\t\t}\n\n\t\tif ( jQuery.isFunction( options ) ) {\n\n\t\t\t// Use jQuery.extend here to allow modification of coordinates argument (gh-1848)\n\t\t\toptions = options.call( elem, i, jQuery.extend( {}, curOffset ) );\n\t\t}\n\n\t\tif ( options.top != null ) {\n\t\t\tprops.top = ( options.top - curOffset.top ) + curTop;\n\t\t}\n\t\tif ( options.left != null ) {\n\t\t\tprops.left = ( options.left - curOffset.left ) + curLeft;\n\t\t}\n\n\t\tif ( \"using\" in options ) {\n\t\t\toptions.using.call( elem, props );\n\n\t\t} else {\n\t\t\tcurElem.css( props );\n\t\t}\n\t}\n};\n\njQuery.fn.extend( {\n\toffset: function( options ) {\n\n\t\t// Preserve chaining for setter\n\t\tif ( arguments.length ) {\n\t\t\treturn options === undefined ?\n\t\t\t\tthis :\n\t\t\t\tthis.each( function( i ) {\n\t\t\t\t\tjQuery.offset.setOffset( this, options, i );\n\t\t\t\t} );\n\t\t}\n\n\t\tvar doc, docElem, rect, win,\n\t\t\telem = this[ 0 ];\n\n\t\tif ( !elem ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Return zeros for disconnected and hidden (display: none) elements (gh-2310)\n\t\t// Support: IE <=11 only\n\t\t// Running getBoundingClientRect on a\n\t\t// disconnected node in IE throws an error\n\t\tif ( !elem.getClientRects().length ) {\n\t\t\treturn { top: 0, left: 0 };\n\t\t}\n\n\t\trect = elem.getBoundingClientRect();\n\n\t\tdoc = elem.ownerDocument;\n\t\tdocElem = doc.documentElement;\n\t\twin = doc.defaultView;\n\n\t\treturn {\n\t\t\ttop: rect.top + win.pageYOffset - docElem.clientTop,\n\t\t\tleft: rect.left + win.pageXOffset - docElem.clientLeft\n\t\t};\n\t},\n\n\tposition: function() {\n\t\tif ( !this[ 0 ] ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar offsetParent, offset,\n\t\t\telem = this[ 0 ],\n\t\t\tparentOffset = { top: 0, left: 0 };\n\n\t\t// Fixed elements are offset from window (parentOffset = {top:0, left: 0},\n\t\t// because it is its only offset parent\n\t\tif ( jQuery.css( elem, \"position\" ) === \"fixed\" ) {\n\n\t\t\t// Assume getBoundingClientRect is there when computed position is fixed\n\t\t\toffset = elem.getBoundingClientRect();\n\n\t\t} else {\n\n\t\t\t// Get *real* offsetParent\n\t\t\toffsetParent = this.offsetParent();\n\n\t\t\t// Get correct offsets\n\t\t\toffset = this.offset();\n\t\t\tif ( !nodeName( offsetParent[ 0 ], \"html\" ) ) {\n\t\t\t\tparentOffset = offsetParent.offset();\n\t\t\t}\n\n\t\t\t// Add offsetParent borders\n\t\t\tparentOffset = {\n\t\t\t\ttop: parentOffset.top + jQuery.css( offsetParent[ 0 ], \"borderTopWidth\", true ),\n\t\t\t\tleft: parentOffset.left + jQuery.css( offsetParent[ 0 ], \"borderLeftWidth\", true )\n\t\t\t};\n\t\t}\n\n\t\t// Subtract parent offsets and element margins\n\t\treturn {\n\t\t\ttop: offset.top - parentOffset.top - jQuery.css( elem, \"marginTop\", true ),\n\t\t\tleft: offset.left - parentOffset.left - jQuery.css( elem, \"marginLeft\", true )\n\t\t};\n\t},\n\n\t// This method will return documentElement in the following cases:\n\t// 1) For the element inside the iframe without offsetParent, this method will return\n\t//    documentElement of the parent window\n\t// 2) For the hidden or detached element\n\t// 3) For body or html element, i.e. in case of the html node - it will return itself\n\t//\n\t// but those exceptions were never presented as a real life use-cases\n\t// and might be considered as more preferable results.\n\t//\n\t// This logic, however, is not guaranteed and can change at any point in the future\n\toffsetParent: function() {\n\t\treturn this.map( function() {\n\t\t\tvar offsetParent = this.offsetParent;\n\n\t\t\twhile ( offsetParent && jQuery.css( offsetParent, \"position\" ) === \"static\" ) {\n\t\t\t\toffsetParent = offsetParent.offsetParent;\n\t\t\t}\n\n\t\t\treturn offsetParent || documentElement;\n\t\t} );\n\t}\n} );\n\n// Create scrollLeft and scrollTop methods\njQuery.each( { scrollLeft: \"pageXOffset\", scrollTop: \"pageYOffset\" }, function( method, prop ) {\n\tvar top = \"pageYOffset\" === prop;\n\n\tjQuery.fn[ method ] = function( val ) {\n\t\treturn access( this, function( elem, method, val ) {\n\n\t\t\t// Coalesce documents and windows\n\t\t\tvar win;\n\t\t\tif ( jQuery.isWindow( elem ) ) {\n\t\t\t\twin = elem;\n\t\t\t} else if ( elem.nodeType === 9 ) {\n\t\t\t\twin = elem.defaultView;\n\t\t\t}\n\n\t\t\tif ( val === undefined ) {\n\t\t\t\treturn win ? win[ prop ] : elem[ method ];\n\t\t\t}\n\n\t\t\tif ( win ) {\n\t\t\t\twin.scrollTo(\n\t\t\t\t\t!top ? val : win.pageXOffset,\n\t\t\t\t\ttop ? val : win.pageYOffset\n\t\t\t\t);\n\n\t\t\t} else {\n\t\t\t\telem[ method ] = val;\n\t\t\t}\n\t\t}, method, val, arguments.length );\n\t};\n} );\n\n// Support: Safari <=7 - 9.1, Chrome <=37 - 49\n// Add the top/left cssHooks using jQuery.fn.position\n// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084\n// Blink bug: https://bugs.chromium.org/p/chromium/issues/detail?id=589347\n// getComputedStyle returns percent when specified for top/left/bottom/right;\n// rather than make the css module depend on the offset module, just check for it here\njQuery.each( [ \"top\", \"left\" ], function( i, prop ) {\n\tjQuery.cssHooks[ prop ] = addGetHookIf( support.pixelPosition,\n\t\tfunction( elem, computed ) {\n\t\t\tif ( computed ) {\n\t\t\t\tcomputed = curCSS( elem, prop );\n\n\t\t\t\t// If curCSS returns percentage, fallback to offset\n\t\t\t\treturn rnumnonpx.test( computed ) ?\n\t\t\t\t\tjQuery( elem ).position()[ prop ] + \"px\" :\n\t\t\t\t\tcomputed;\n\t\t\t}\n\t\t}\n\t);\n} );\n\n\n// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods\njQuery.each( { Height: \"height\", Width: \"width\" }, function( name, type ) {\n\tjQuery.each( { padding: \"inner\" + name, content: type, \"\": \"outer\" + name },\n\t\tfunction( defaultExtra, funcName ) {\n\n\t\t// Margin is only for outerHeight, outerWidth\n\t\tjQuery.fn[ funcName ] = function( margin, value ) {\n\t\t\tvar chainable = arguments.length && ( defaultExtra || typeof margin !== \"boolean\" ),\n\t\t\t\textra = defaultExtra || ( margin === true || value === true ? \"margin\" : \"border\" );\n\n\t\t\treturn access( this, function( elem, type, value ) {\n\t\t\t\tvar doc;\n\n\t\t\t\tif ( jQuery.isWindow( elem ) ) {\n\n\t\t\t\t\t// $( window ).outerWidth/Height return w/h including scrollbars (gh-1729)\n\t\t\t\t\treturn funcName.indexOf( \"outer\" ) === 0 ?\n\t\t\t\t\t\telem[ \"inner\" + name ] :\n\t\t\t\t\t\telem.document.documentElement[ \"client\" + name ];\n\t\t\t\t}\n\n\t\t\t\t// Get document width or height\n\t\t\t\tif ( elem.nodeType === 9 ) {\n\t\t\t\t\tdoc = elem.documentElement;\n\n\t\t\t\t\t// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height],\n\t\t\t\t\t// whichever is greatest\n\t\t\t\t\treturn Math.max(\n\t\t\t\t\t\telem.body[ \"scroll\" + name ], doc[ \"scroll\" + name ],\n\t\t\t\t\t\telem.body[ \"offset\" + name ], doc[ \"offset\" + name ],\n\t\t\t\t\t\tdoc[ \"client\" + name ]\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn value === undefined ?\n\n\t\t\t\t\t// Get width or height on the element, requesting but not forcing parseFloat\n\t\t\t\t\tjQuery.css( elem, type, extra ) :\n\n\t\t\t\t\t// Set width or height on the element\n\t\t\t\t\tjQuery.style( elem, type, value, extra );\n\t\t\t}, type, chainable ? margin : undefined, chainable );\n\t\t};\n\t} );\n} );\n\n\njQuery.fn.extend( {\n\n\tbind: function( types, data, fn ) {\n\t\treturn this.on( types, null, data, fn );\n\t},\n\tunbind: function( types, fn ) {\n\t\treturn this.off( types, null, fn );\n\t},\n\n\tdelegate: function( selector, types, data, fn ) {\n\t\treturn this.on( types, selector, data, fn );\n\t},\n\tundelegate: function( selector, types, fn ) {\n\n\t\t// ( namespace ) or ( selector, types [, fn] )\n\t\treturn arguments.length === 1 ?\n\t\t\tthis.off( selector, \"**\" ) :\n\t\t\tthis.off( types, selector || \"**\", fn );\n\t}\n} );\n\njQuery.holdReady = function( hold ) {\n\tif ( hold ) {\n\t\tjQuery.readyWait++;\n\t} else {\n\t\tjQuery.ready( true );\n\t}\n};\njQuery.isArray = Array.isArray;\njQuery.parseJSON = JSON.parse;\njQuery.nodeName = nodeName;\n\n\n\n\n// Register as a named AMD module, since jQuery can be concatenated with other\n// files that may use define, but not via a proper concatenation script that\n// understands anonymous AMD modules. A named AMD is safest and most robust\n// way to register. Lowercase jquery is used because AMD module names are\n// derived from file names, and jQuery is normally delivered in a lowercase\n// file name. Do this after creating the global so that if an AMD module wants\n// to call noConflict to hide this version of jQuery, it will work.\n\n// Note that for maximum portability, libraries that are not jQuery should\n// declare themselves as anonymous modules, and avoid setting a global if an\n// AMD loader is present. jQuery is a special case. For more information, see\n// https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon\n\nif ( typeof define === \"function\" && define.amd ) {\n\tdefine( \"jquery\", [], function() {\n\t\treturn jQuery;\n\t} );\n}\n\n\n\n\nvar\n\n\t// Map over jQuery in case of overwrite\n\t_jQuery = window.jQuery,\n\n\t// Map over the $ in case of overwrite\n\t_$ = window.$;\n\njQuery.noConflict = function( deep ) {\n\tif ( window.$ === jQuery ) {\n\t\twindow.$ = _$;\n\t}\n\n\tif ( deep && window.jQuery === jQuery ) {\n\t\twindow.jQuery = _jQuery;\n\t}\n\n\treturn jQuery;\n};\n\n// Expose jQuery and $ identifiers, even in AMD\n// (#7102#comment:10, https://github.com/jquery/jquery/pull/557)\n// and CommonJS for browser emulators (#13566)\nif ( !noGlobal ) {\n\twindow.jQuery = window.$ = jQuery;\n}\n\n\n\n\nreturn jQuery;\n} );\n\n\n\n// WEBPACK FOOTER //\n// ./~/jquery/dist/jquery.js","module.exports = global[\"jQuery\"] = require(\"-!/Users/cci/repository/nodefony-stage/node_modules/babel-loader/lib/index.js?{\\\"presets\\\":[\\\"es2015\\\"]}!./jquery.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/expose-loader?jQuery!./~/babel-loader/lib?{\"presets\":[\"es2015\"]}!./~/jquery/dist/jquery.js\n// module id = 61\n// module chunks = 0"],"sourceRoot":""}